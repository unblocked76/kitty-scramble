(function () {var projects={default:{languages:["en","fr","ru","de","es","pt","it","nl","ar","ja","ko","tr","zh","pl","lv"],dictionaries:{common_json:"cleverapps/utils/localization/common_${lang}.json",project_json:"res/localization/${lang}.json"},merge:{dictionaries:{quests_json:"res/localization/quests/quests_${lang}.json"}},homefix:{dictionaries:{farm_json:"res/localization/homefix/homefix_${lang}.json"}},farm:{dictionaries:{farm_json:"res/localization/farm/farm_${lang}.json"}},solitaire:{dictionaries:{solitaire_json:"cleverapps/utils/localization/solitaire/${lang}.json"}},match3:{dictionaries:{lang_json:"match3/res/localization/match3_${lang}.json",skin_json:"match3/res/localization/skins/${skin}/${skin}_${lang}.json"}},board:{dictionaries:{lang_json:"cleverapps/utils/localization/boardgame/boardgame_${lang}.json"},languages:["en","fr","ru","de","es","it","ja","nl"]},leagues:[30,60,100,200,500,1e3,!1],terms:"https://cleverappssg.com/legal/terms.html",
privacy:"https://cleverappssg.com/legal/privacy.html"},mergecraft:{basic:{type:"merge",metha:"none",orientation:"horizontal",staticUrl:"https://mergecraft.cleverappssg.com/publish/html5/",notoolbar:!0,xsollaProjectId:"134757",xsollaLoginProject:"9e48b5cc-b306-11eb-bc85-42010aa80004",webFirebase:{apiKey:"AIzaSyDKnlsckyA6vQzKDw8gyio4hxIKn5VABsk",authDomain:"the-mergest-kingdom.firebaseapp.com",projectId:"the-mergest-kingdom",storageBucket:"the-mergest-kingdom.appspot.com",messagingSenderId:"688806251955",appId:"1:688806251955:web:a157970e0c64b2950e4fc6",measurementId:"G-8XQS1XC37P"},fbPixelId:"321147649405995",deployment:"https://mergecraft.cleverappssg.com",title:"Mergest Kingdom: merge puzzle",fakeRestApiURL:"http://localhost:3006",lives:!0,levelEditor:!0,pixijs:!1,adjust:{token:"4ck88u210vr4",purchaseToken:"2hfeqa",events:{ad_finish_rewarded:"m79fh4",ad_start_interstitial:"p0abbk",retention_2:"qa22qa",retention_7:"w2b0ti"}},yodo1:{title:"合成王国：奇幻岛",adjust:{token:"2ssiznlyvzsw"}},
stand:{staticUrl:"https://mergecraft-staging.labsystech.ru/publish/html5-staging/",deployment:"https://mergecraft-staging.labsystech.ru",xsollaLoginProject:"9b99f537-af3a-11eb-bc85-42010aa80004"},fonts:[{folder:"marvin-round-nostroke",name:"nostroke",bundle:"digits",size:56},{folder:"marvin-round",name:"default",bundle:"digits",size:41},{folder:"marvin-round",name:"default",bundle:"digits",size:56},{folder:"marvin-round",name:"default",bundle:"digits",size:72},{folder:"formal",name:"formal",bundle:"admin",size:21}]},instant:{appId:"126844939376182",rewarded:"129195502474459",interstitial:"129195289141147",groupId:"110350677808060"},facebook:{shortname:"mergecraft",appId:"365815270676633",groupId:"mergecraftgroup",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"386728805962593"}},mbga:{appId:"12026923",groupId:""},vk:{shortname:"mergecraft",appId:"7776586",groupId:"mergecraft_group",stand:{appId:"7776276"}},ok:{shortname:"mergecraft",appId:"512000742814",
appKey:"CPJGFQJGDIHBABABA",groupId:"60620856950954",stand:{appId:"512000870791",appKey:"CIIKECKGDIHBABABA"}},android:{package:"com.cleverapps.mergecraft",unityGameId:""},amazon:{package:"com.cleverapps.mergecraft",id:"B0922VXRPZ"},ios:{package:"com.cleverapps.mergecraft",id:"1562149254"},mm:{appId:"783650",privateKey:"34f0c62fb0e1d0ac35d00c75acbe6cb5",groupId:"mergecraft",stand:{appId:"",privateKey:""}},fotostrana:{appId:"mergecraft",privateKey:"33af4305d7414b380c3636f3b03fb70f",groupId:"352927",stand:{appId:"",privateKey:""}},plinga:{appId:"b5203bfef51242c39690c761321d769f"},yandex:{appId:"171361"}},wondermerge:{basic:{type:"merge",metha:"none",orientation:"horizontal",notoolbar:!0,title:"WonderMerge",fakeRestApiURL:"http://localhost:3012",lives:!0,levelEditor:!0,adjust:{token:"",purchaseToken:"",events:{}},stand:{staticUrl:"https://wondermerge-staging.labsystech.ru/publish/html5-staging/",deployment:"https://wondermerge-staging.labsystech.ru"},fonts:[{folder:"marvin-round-nostroke",
name:"nostroke",bundle:"digits",size:56},{folder:"marvin-round",name:"default",bundle:"digits",size:41},{folder:"marvin-round",name:"default",bundle:"digits",size:56},{folder:"marvin-round",name:"default",bundle:"digits",size:72},{folder:"formal",name:"formal",bundle:"admin",size:21}]},facebook:{shortname:"cleverwondermerge",appId:"699542957221997",groupId:"rachelholmesfinddifferences",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"597596791051962"}},android:{package:"",unityGameId:""},amazon:{package:"",id:""},ios:{id:""}},mergeriddles:{basic:{type:"match3",metha:"simple",staticUrl:"https://mergecraft.cleverappssg.com/publish/html5/",deployment:"https://mergecraft.cleverappssg.com",title:"MergeRiddles",lives:!0,fakeRestApiURL:"http://localhost:3015",languages:["en"],adjust:{token:"",purchaseToken:"",events:{}},stand:{staticUrl:"https://mergecraft-staging.labsystech.ru/publish/html5-staging/",deployment:"https://mergecraft-staging.labsystech.ru"}},facebook:{
shortname:"mergecraft",appId:"365815270676633",groupId:"MergeCraft-Community-104474434917397",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"386728805962593"}},android:{package:"",unityGameId:""},amazon:{package:"",id:""},ios:{id:""}},mergeheroes:{basic:{type:"match3",metha:"simple",staticUrl:"https://wondermerge.cleverappssg.com/publish/html5/",deployment:"https://wondermerge.cleverappssg.com",title:"MergeHeroes",lives:!0,fakeRestApiURL:"http://localhost:3016",languages:["en"],adjust:{token:"",purchaseToken:"",events:{}},stand:{staticUrl:"https://wondermerge-staging.labsystech.ru/publish/html5-staging/",deployment:"https://wondermerge-staging.labsystech.ru"}},facebook:{shortname:"cleverwondermerge",appId:"699542957221997",groupId:"WonderMerge-Community-105125691516212",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"597596791051962"}},android:{package:"",unityGameId:""},amazon:{package:"",id:""},ios:{id:""}},wordheaps:{basic:{type:"board",
subtype:"stacks",metha:"simple",staticUrl:"https://wordheaps.cleverappssg.com/publish/html5/",deployment:"https://wordheaps.cleverappssg.com",title:"WordHeaps",fakeRestApiURL:"http://localhost:3013",adjust:{token:"",purchaseToken:"",events:{}},stand:{staticUrl:"https://wordheaps-staging.labsystech.ru/publish/html5-staging/",deployment:"https://wordheaps-staging.labsystech.ru"},fonts:[{folder:"neris-black",name:"default",bundle:"digits",size:40},{folder:"neris-black",name:"default",bundle:"digits",size:90},{folder:"neris-black-nostroke",name:"nostroke",bundle:"digits",size:49},{folder:"neris-black-nostroke",name:"nostroke",bundle:"digits",size:90},{folder:"formal",name:"formal",bundle:"admin",size:21}]},facebook:{shortname:"cleverwordheaps",appId:"299923727721026",groupId:"wordheapscommunity",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"513633536223627"}},android:{package:"",unityGameId:""},amazon:{package:"",id:""},ios:{id:""}},differences:{basic:{type:"differences",
subtype:"knockoutGame",metha:"simple",staticUrl:"https://differences.cleverappssg.com/publish/html5/",deployment:"https://differences.cleverappssg.com",title:"Differences",fakeRestApiURL:"http://localhost:3004",lives:!0,ui:"plaidui",adjust:{token:"lmk8mnhq4xs0",purchaseToken:"pnfv7v",events:{ad_finish_rewarded:"7e3jp0",ad_start_interstitial:"txnnp5"}},stand:{staticUrl:"https://differences-staging.labsystech.ru/publish/html5-staging/",deployment:"https://differences-staging.labsystech.ru"},fonts:[{folder:"russo_one",name:"default",bundle:"digits",size:35},{folder:"russo_one",name:"default",bundle:"digits",size:55},{folder:"russo_one-nostroke",name:"nostroke",bundle:"digits",size:35},{folder:"russo_one-nostroke",name:"nostroke",bundle:"digits",size:55},{folder:"formal",name:"formal",bundle:"admin",size:21}]},instant:{appId:"466070618121604",rewarded:"466072421454757",interstitial:"466072581454741",groupId:"100462882000800"},facebook:{shortname:"cleverdifferences",appId:"278637090036923",
groupId:"rachelholmesfinddifferences",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"195225751884161"}},android:{package:"com.cleverapps.differences",unityGameId:""},amazon:{package:"com.cleverapps.differences",id:"B08R7PCC89"},ios:{package:"com.cleverapps.differences",id:"1546227822"},ok:{shortname:"cleverdifferences",appId:"512000594608",appKey:"CBLDBOJGDIHBABABA",groupId:"58829738606762",stand:{appId:"512000589370",appKey:"CLDPPNJGDIHBABABA"}},vk:{shortname:"cleverdifferences",appId:"7605538",groupId:"differences_group",stand:{appId:""}},mm:{appId:"782111",privateKey:"44828036769062a2148cbf76f6bd33d6",groupId:"differences",stand:{appId:"",privateKey:""}},mbga:{appId:"",groupId:""},nk:{appId:"",groupId:""},draugiem:{appId:"",groupId:""},fotostrana:{appId:"differences",privateKey:"5b1ff4ce4c7e274ae98bf394d8d6dd37",groupId:"352931",stand:{appId:"",privateKey:""}},plinga:{appId:"120653a94b0a48cf9050fff4a258f5cf"}},tripeaks:{basic:{type:"solitaire",metha:"simple",
staticUrl:"https://tripeaks.cleverappssg.com/publish/html5/",deployment:"https://tripeaks.cleverappssg.com",title:"Kings & Queens: Solitaire Tri Peaks",fakeRestApiURL:"http://localhost:3002",lives:!0,levelEditor:!0,adjust:{token:"ng66lafe248w",purchaseToken:"6nlpft",events:{ad_finish_rewarded:"zculm1",ad_start_interstitial:"yxw2sg"}},stand:{staticUrl:"https://tripeaks-staging.labsystech.ru/publish/html5-staging/",deployment:"https://tripeaks-staging.labsystech.ru"},leagues:[30,60,100,200,500,!1],fonts:[{folder:"carlito-bold-v2-2px",name:"default",bundle:"digits",size:35},{folder:"carlito-bold-v2-2px",name:"default",bundle:"digits",size:65},{folder:"carlito-bold-v2-nostroke",name:"nostroke",bundle:"digits",size:35},{folder:"carlito-bold-v2-nostroke",name:"nostroke",bundle:"digits",size:65},{folder:"formal",name:"formal",bundle:"admin",size:21}]},instant:{appId:"582264172486698",rewarded:"583410035705445",interstitial:"583409625705486",groupId:"102297708232957"},facebook:{
shortname:"tripeakscard",appId:"1079919015696954",groupId:"KingsAndQueensTripeaksCommunity",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"585880102065094"}},android:{package:"com.cleverapps.tripeaks",unityGameId:""},amazon:{package:"com.cleverapps.tripeaks",id:"B08CNK8GSB"},ios:{package:"com.cleverapps.tripeaks",id:"1523134029"},ok:{shortname:"tripeaks",appId:"512000516286",appKey:"CPLBOMJGDIHBABABA",groupId:"58210808561834",stand:{appId:"512000567965",appKey:"COJLKNJGDIHBABABA"}},vk:{shortname:"tripeaks",appId:"7522400",groupId:"tripeaks_group",stand:{appId:"7522400"}},mm:{appId:"779517",privateKey:"f5117307f5652c346c8a492698ec5520",groupId:"tripeaks",stand:{appId:"",privateKey:""}},mbga:{appId:"12026813",groupId:""},nk:{appId:"kings-queens",groupId:"1419067"},draugiem:{appId:"",groupId:""},fotostrana:{appId:"tripeaks",privateKey:"b97e8a2478376c1d7261f87ab1b2f8aa",groupId:"352512",stand:{appId:"",privateKey:""}},plinga:{appId:"344fff78cd674f62a549533551505ebb"}},
spades:{basic:{type:"solitaire",metha:"simple",lives:!0,staticUrl:"https://spades.cleverappssg.com/publish/html5/",deployment:"https://spades.cleverappssg.com",title:"Spades",fakeRestApiURL:"http://localhost:3014",languages:["en"],adjust:{token:"",purchaseToken:"",events:{}},stand:{staticUrl:"https://spades-staging.labsystech.ru/publish/html5-staging/",deployment:"https://spades-staging.labsystech.ru"}},facebook:{shortname:"cleverspades",appId:"1152275768461536",groupId:"solitairekingdomcommunity",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"234186548097136"}},android:{package:"",unityGameId:""},amazon:{package:"",id:""},ios:{id:""}},riddles:{basic:{metha:"hose",type:"match3",lives:!0,staticUrl:"https://riddles.gcdn.co/publish/html5/",deployment:"https://riddles.labsystech.ru",results:!0,title:"Candy Riddles",fakeRestApiURL:"http://localhost:3007",levelEditor:!0,adjust:{token:"7h99civw80sg",purchaseToken:"pwy8hj",events:{}},stand:{
staticUrl:"https://riddles-staging.labsystech.ru/publish/html5-staging/",deployment:"https://riddles-staging.labsystech.ru"},fonts:[{folder:"riffic-bold",name:"default",bundle:"digits",size:41},{folder:"riffic-bold",name:"default",bundle:"digits",size:82},{folder:"riffic-bold-nostroke",name:"nostroke",bundle:"digits",size:41},{folder:"riffic-bold-nostroke",name:"nostroke",bundle:"digits",size:82},{folder:"formal",name:"formal",bundle:"admin",size:21},{folder:"custom/marvin_compact_digits",name:"compact_digits",bundle:"compact_digits",size:42},{folder:"custom/riddles_goals",name:"goals_font",bundle:"goals_font",size:41},{folder:"custom/riddles_levels",name:"level_digits",bundle:"level_digits",size:58}]},instant:{appId:"169228177248519",rewarded:"171407780363892",interstitial:"171665730338097",groupId:"337681893427623"},facebook:{shortname:"candyriddles",appId:"1996120880405386",groupId:"CandyRiddlesCommunity",gameroom_rate_postId:"140958473298826",
dontLikeGameUrl_postId:"145984586129548",stand:{appId:"109585006443834"}},android:{package:"com.cleverapps.candyriddles",unityGameId:"500007109"},amazon:{package:"com.cleverapps.candyriddles",id:"B078YB7FBX"},ios:{package:"com.cleverapps.riddles",id:"1340236132"},ok:{shortname:"candyriddles",appId:"1269377792",appKey:"CBAMCKKMEBABABABA",groupId:"54360798855338",stand:{appId:"1270935552",appKey:"CBABPBMMEBABABABA"}},vk:{shortname:"candy_riddles",appId:"6745237",groupId:"candyriddles",stand:{appId:"6790773"}},mm:{appId:"763558",privateKey:"832ab94c8979ec52da1ce740f71d7ad7",groupId:"candyriddles",stand:{appId:"763556",privateKey:"40f493f6966593a1f447980cd30bd92c"}},mbga:{appId:"12026417",groupId:"32844341"},nk:{appId:"candy-riddles",groupId:"1417264"},draugiem:{appId:"riddles",groupId:"riddlespage",stand:{appId:"riddlesstaging",groupId:"riddlespage"}},plinga:{appId:"639df47033804f18bf39e113ef29f4fa"},fotostrana:{appId:"candyriddles",privateKey:"00fcabb0bbbf4de8fd200683a099dc13",
groupId:"352511",stand:{appId:"",privateKey:""}}},heroes:{basic:{metha:"farm",type:"match3",lives:!0,staticUrl:"https://heroes.gcdn.co/publish/html5/",deployment:"https://heroes.cleverappssg.com",results:!0,title:"Sugar Heroes",fakeRestApiURL:"http://localhost:3008",adjust:{token:"mmimvhbjk1z4",purchaseToken:"83oly9",events:{}},stand:{staticUrl:"https://heroes-staging.labsystech.ru/publish/html5-staging/",deployment:"https://heroes-staging.labsystech.ru"},fonts:[{folder:"bryndanwrite",name:"default",bundle:"digits",size:53},{folder:"bryndanwrite",name:"default",bundle:"digits",size:90},{folder:"formal",name:"formal",bundle:"admin",size:21},{folder:"bryndanwrite-nostroke",name:"nostroke",bundle:"digits",size:74},{folder:"custom/marvin_compact_digits",name:"compact_digits",bundle:"compact_digits",size:42},{folder:"custom/heroes_goals",name:"goals_font",bundle:"goals_font",size:60}]},instant:{appId:"2096828893670802",rewarded:"2105178429502515",interstitial:"2105484592805232",
groupId:"278630749647866"},facebook:{shortname:"sugarheroes",appId:"205918406663140",groupId:"sugarheroescommunity",gameroom_rate_postId:"",dontLikeGameUrl_postId:"283957348885460",stand:{appId:"148448049182010"}},android:{package:"com.cleverapps.heroes",unityGameId:""},amazon:{package:"com.cleverapps.heroes",id:"B07JMZLTV7"},ios:{package:"com.cleverapps.heroes",id:"1439884631"},ok:{shortname:"sugarheroes",appId:"1271685376",appKey:"CBACGNMMEBABABABA",groupId:"54384511877290",stand:{appId:"512000694356",appKey:"CFFJJPJGDIHBABABA"}},vk:{shortname:"sugar_heroes",appId:"6830710",groupId:"sugarheroes",stand:{appId:""}},mm:{appId:"763582",privateKey:"8558918e7b85be33743d63b68ac7be00",groupId:"sugarheroes",stand:{appId:"",privateKey:""}},mbga:{appId:"12026480",groupId:"32846074"},nk:{appId:"sugar-heroes",groupId:"1417638"},draugiem:{appId:"sugarheroes",groupId:"sugarheroespage"},plinga:{appId:"b24567e39b5248eabe77a704dbb555a9"},fotostrana:{appId:"sugarheroes",
privateKey:"5480cd9bf57b7ed5be7f2decf8541e18",groupId:"352509",stand:{appId:"",privateKey:""}}},adventure:{basic:{metha:"hose",type:"match3",lives:!0,rpg:!0,staticUrl:"https://adventure.gcdn.co/publish/html5/",deployment:"https://adventure.cleverappssg.com",title:"Secrets of Charmland",fakeRestApiURL:"http://localhost:3010",adjust:{token:"yxn8ttu1ydj4",purchaseToken:"2th34l",events:{ad_finish_rewarded:"804ekp",ad_start_interstitial:"l647mw"}},stand:{staticUrl:"https://adventure-staging.labsystech.ru/publish/html5-staging/",deployment:"https://adventure-staging.labsystech.ru"},fonts:[{folder:"marvin-round",name:"default",bundle:"digits",size:41},{folder:"marvin-round",name:"default",bundle:"digits",size:56},{folder:"formal",name:"formal",bundle:"admin",size:21},{folder:"marvin-round-nostroke",name:"nostroke",bundle:"digits",size:56},{folder:"custom/marvin_compact_digits",name:"compact_digits",bundle:"compact_digits",size:42}]},instant:{appId:"228942985416996",rewarded:"228947032083258",
interstitial:"228947125416582",groupId:"secretsofcharmlandlite"},facebook:{shortname:"secretsofcharmland",appId:"1311019545689756",groupId:"secretsofcharmland",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"247075149531781"}},android:{package:"com.cleverapps.adventure",unityGameId:""},amazon:{package:"com.cleverapps.adventure",id:"B08NXG74BD"},ios:{package:"com.cleverapps.adventure",id:"1541304616"},ok:{shortname:"secretsofcharmland",appId:"512000026303",appKey:"CQLHGFJGDIHBABABA",groupId:"56035155116202",stand:{appId:"512000646929",appKey:"CCBQNOJGDIHBABABA"}},vk:{shortname:"thesecretsofcharmland",appId:"7139584",groupId:"secretsofcharmland",stand:{appId:""}},mm:{appId:"766832",privateKey:"6f8c46ea0f3720ee03b02083db09340b",groupId:"secretsofcharmland",stand:{appId:"",privateKey:""}},mbga:{appId:"",groupId:""},nk:{appId:"secrets-of-charmland",groupId:"1419069"},draugiem:{appId:"",groupId:""},plinga:{appId:"49d17c8657104ee2806feebe41e0f2cd"}},runes:{basic:{metha:"hose",
type:"match3",lives:!0,rpg:!0,staticUrl:"https://runes.gcdn.co/publish/html5/",deployment:"https://runes.cleverappssg.com",title:"Heroes of Match-3",fakeRestApiURL:"http://localhost:3011",adjust:{token:"eolgyc1elq0w",purchaseToken:"ya20wl",events:{}},stand:{staticUrl:"https://runes-staging.labsystech.ru/publish/html5-staging/",deployment:"https://runes-staging.labsystech.ru"},fonts:[{folder:"marvin-round",name:"default",bundle:"digits",size:41},{folder:"marvin-round",name:"default",bundle:"digits",size:56},{folder:"formal",name:"formal",bundle:"admin",size:21},{folder:"marvin-round-nostroke",name:"nostroke",bundle:"digits",size:56},{folder:"custom/marvin_compact_digits",name:"compact_digits",bundle:"compact_digits",size:42}]},instant:{appId:"346516946289630",rewarded:"376156803325644",interstitial:"376156129992378",groupId:"101372134583131"},facebook:{shortname:"heroesofmatch",appId:"582954732182317",groupId:"heroesofmatch3",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{
appId:"320708625483001"}},android:{package:"com.cleverapps.runes",unityGameId:""},amazon:{package:"com.cleverapps.runes",id:"B07WPW533K"},ios:{package:"com.cleverapps.runes",id:"1476535667"},ok:{shortname:"heroesofmatch",appId:"1279575808",appKey:"CBAIMFENEBABABABA",groupId:"55547515044010",stand:{appId:"512000465394",appKey:"CDPKBMJGDIHBABABA"}},vk:{shortname:"heroesofmatch",appId:"7016437",groupId:"heroes_of_match",stand:{appId:""}},mm:{appId:"765770",privateKey:"e52e74b4f487b2cccf2405816652956c",groupId:"heroesmatch3",stand:{appId:"",privateKey:""}},mbga:{appId:"12026637",groupId:"32852303"},nk:{appId:"heroes-of-match-3",groupId:"1419068"},draugiem:{appId:"",groupId:""},plinga:{appId:"bfd6c484cdd9475f895bee03e3b633ff"}},wordsoup:{basic:{staticUrl:"https://wordsoup.gcdn.co/publish/html5/",deployment:"https://wordsoup.labsystech.ru",title:"Word Sauce",type:"board",fakeRestApiURL:"http://localhost:3000",metha:"homefix",ui:"plaidui",adjust:{token:"ez2lszhmg4xs",purchaseToken:"1ghfoq",
events:{ad_finish_rewarded:"g49v7g",ad_start_interstitial:"kr85gz"}},stand:{staticUrl:"https://wordsoup-staging.labsystech.ru/publish/html5-staging/",deployment:"https://wordsoup-staging.labsystech.ru"},fonts:[{folder:"russo_one",name:"default",bundle:"digits",size:35},{folder:"russo_one",name:"default",bundle:"digits",size:55},{folder:"russo_one-nostroke",name:"nostroke",bundle:"digits",size:35},{folder:"russo_one-nostroke",name:"nostroke",bundle:"digits",size:55},{folder:"formal",name:"formal",bundle:"admin",size:21}]},instant:{appId:"177170139576790",rewarded:"194546684505802",interstitial:"194552307838573",groupId:"wordsaucelite"},facebook:{shortname:"word_soup",appId:"1839614776298283",groupId:"WordSoupPuzzle",gameroom_rate_postId:"520764398277098",dontLikeGameUrl_postId:"",stand:{appId:"1847284985531262"}},android:{package:"org.cocos2dx.wordsoup",unityGameId:""},amazon:{package:"org.cocos2dx.wordsoup",id:"B07192HTZ9"},ios:{package:"org.cocos2dx.wordsoup",id:"1236153570"},ok:{
shortname:"wordsoup",appId:"512000025924",appKey:"CFEGGFJGDIHBABABA",groupId:"56042597515434",stand:{appId:"512000436024",appKey:"CJDIKLJGDIHBABABA"}},vk:{shortname:"wordsoup",appId:"7139277",groupId:"wordsauce",stand:{appId:""}},mm:{appId:"766829",privateKey:"bce7dc4c706f1c0f9f53a38586ab0f14",groupId:"wordsauce",stand:{appId:"",privateKey:""}},mbga:{appId:"",groupId:""},nk:{appId:"word-soup",groupId:"1419071"},draugiem:{appId:"",groupId:""},plinga:{appId:"8d8965a1f1af4d2b884e0bc48737925d"},fotostrana:{appId:"wordsoup",privateKey:"ec5a95876a991b883c9c4848dde8b6d8",groupId:"352514",stand:{appId:"",privateKey:""}}},crocword:{basic:{metha:"hose",staticUrl:"https://crocword.gcdn.co/publish/html5/",deployment:"https://crocword.labsystech.ru",title:"Croc Word",type:"board",fakeRestApiURL:"http://localhost:3005",ui:"cyanui",adjust:{token:"6c299ak7zkw0",purchaseToken:"taza3r",events:{ad_finish_rewarded:"t1g1gj",ad_start_interstitial:"w692c3"}},stand:{
staticUrl:"https://crocword-staging.labsystech.ru/publish/html5-staging/",deployment:"https://crocword-staging.labsystech.ru"},fonts:[{folder:"carlito-bold-v2-2px",name:"default",bundle:"digits",size:35},{folder:"carlito-bold-v2-2px",name:"default",bundle:"digits",size:65},{folder:"carlito-bold-v2-nostroke",name:"nostroke",bundle:"digits",size:35},{folder:"carlito-bold-v2-nostroke",name:"nostroke",bundle:"digits",size:65},{folder:"formal",name:"formal",bundle:"admin",size:21}]},instant:{appId:"156455286289887",rewarded:"156461976289218",interstitial:"156462162955866",groupId:"1017684138380915"},facebook:{shortname:"crocword",appId:"480756825591552",groupId:"CrocwordPuzzleCommunity",gameroom_rate_postId:"365661064045146",dontLikeGameUrl_postId:"",stand:{appId:"2040725746155240"}},android:{package:"com.cleverapps.crocword",unityGameId:""},amazon:{package:"com.cleverapps.crocword",id:"B074JB1CB3"},ios:{package:"com.cleverapps.crocword",id:"1269673961"},ok:{shortname:"crocword",
appId:"512000231014",appKey:"CHGHIIJGDIHBABABA",groupId:"56496148775082",stand:{appId:"512000309461",appKey:"CGNJLJJGDIHBABABA"}},vk:{shortname:"crocword",appId:"7234712",groupId:"crocwordgroup",stand:{appId:""}},mm:{appId:"768269",privateKey:"d4754dc73b088c188a115f27a6955a30",groupId:"crocwordgroup",stand:{appId:"",privateKey:""}},fotostrana:{appId:"crocword",privateKey:"f520f6ab3bd7fd0800700c49352315d5",groupId:"352327",stand:{appId:"",privateKey:""}},mbga:{appId:"12026781",groupId:"32861692"},nk:{appId:"crocword",groupId:"1419072"},draugiem:{appId:"",groupId:""},plinga:{appId:"3e314ff40f40472f9aefed5b046f6dcc"}},magicwords:{basic:{metha:"simple",staticUrl:"https://magicwords.labsystech.ru/publish/html5/",deployment:"https://magicwords.labsystech.ru",title:"Magic Words",fakeRestApiURL:"http://localhost:3003",type:"board",adjust:{token:"",purchaseToken:"",events:{}},stand:{staticUrl:"https://magicwords-staging.labsystech.ru/publish/html5-staging/",
deployment:"https://magicwords-staging.labsystech.ru"},fonts:[{folder:"russo_one",name:"default",bundle:"digits",size:35},{folder:"russo_one",name:"default",bundle:"digits",size:55},{folder:"russo_one-nostroke",name:"nostroke",bundle:"digits",size:35},{folder:"russo_one-nostroke",name:"nostroke",bundle:"digits",size:55},{folder:"formal",name:"formal",bundle:"admin",size:21}]},instant:{appId:"635365383471881",rewarded:"636636986678054",interstitial:"636637626677990",groupId:"214767095976110"},facebook:{shortname:"magic_words_puzzle",appId:"116453995539327",groupId:"MagicWordsGameCommunity",gameroom_rate_postId:"424848868061655",dontLikeGameUrl_postId:"",stand:{appId:"442317226120273"}},android:{package:"com.cleverapps.magicwords",unityGameId:""},amazon:{package:"com.cleverapps.magicwords",id:"B071KKB243"},ios:{package:"com.cleverapps.magicwords",id:"1256304845"},ok:{shortname:"magic_words",appId:"512000565237",appKey:"CGPQJNJGDIHBABABA",groupId:"60937355722922",stand:{appId:"",appKey:""
}},vk:{shortname:"cleverapps_magic_words",appId:"7803436",groupId:"magic_words_group",stand:{appId:""}},mm:{appId:"783608",privateKey:"dc5f9696c5a5b43246a624bb0e768f82",groupId:"magic_words",stand:{appId:"",privateKey:""}},mbga:{appId:"",groupId:""},nk:{appId:"",groupId:""},draugiem:{appId:"",groupId:""},fotostrana:{appId:"magicwords",privateKey:"ed4e75bb8e2fd91a8842737d2daec10a",groupId:"352932",stand:{appId:"",privateKey:""}},plinga:{appId:"bbbcbc5c5b53473f9bcabe802b2f5296"}},olympics:{basic:{staticUrl:"https://olympics.gcdn.co/publish/html5/",deployment:"https://olympics.labsystech.ru",title:"Word Olympics",type:"board",fakeRestApiURL:"http://localhost:3009",lives:!0,metha:"knockout",adjust:{token:"oq5rkne31atc",purchaseToken:"1jir4j",events:{}},stand:{staticUrl:"https://olympics-staging.labsystech.ru/publish/html5-staging/",deployment:"https://olympics-staging.labsystech.ru"},fonts:[{folder:"roboto-bold",name:"default",bundle:"digits",size:40},{folder:"roboto-bold",name:"default",
bundle:"digits",size:70},{folder:"roboto-bold-nostroke",name:"nostroke",bundle:"digits",size:40},{folder:"roboto-bold-nostroke",name:"nostroke",bundle:"digits",size:70},{folder:"formal",name:"formal",bundle:"admin",size:21},{folder:"custom/marvin_compact_digits",name:"compact_digits",bundle:"compact_digits",size:42}]},instant:{appId:"403603626714071",rewarded:"404667946607639",interstitial:"404667353274365",groupId:"803998833127843"},facebook:{shortname:"word_olympics",appId:"404908173269801",groupId:"WordOlympicsPuzzle",gameroom_rate_postId:"",dontLikeGameUrl_postId:"",stand:{appId:"144582389701216"}},android:{package:"com.cleverapps.olympics",unityGameId:""},amazon:{package:"com.cleverapps.olympics",id:"B07DGGRN8K"},ios:{package:"com.cleverapps.olympics",id:"1394966990"},ok:{shortname:"olympics",appId:"512000487372",appKey:"CNMQGMJGDIHBABABA",groupId:"57516329402562",stand:{appId:"512000563796",appKey:"CFFLJNJGDIHBABABA"}},vk:{shortname:"wordolympics",appId:"7394144",
groupId:"wordolympicsgoup",stand:{appId:""}},mm:{appId:"771991",privateKey:"21595777945c95784a620c87da88c1df",groupId:"wordolympicsgroup",stand:{appId:"",privateKey:""}},mbga:{appId:"",groupId:""},nk:{appId:"crossword-online",groupId:"1419073"},draugiem:{appId:"",groupId:""},fotostrana:{appId:"olympics",privateKey:"11f5cd81d3000cdff01280a75074394a",groupId:"352515",stand:{appId:"",privateKey:""}}},scramble:{basic:{metha:"simple",staticUrl:"https://scramble.gcdn.co/publish/html5/",deployment:"https://scramble.labsystech.ru",title:"Kitty Scramble",type:"board",subtype:"stacks",languages:["en","fr","ru","it","de","es","nl","pt","ja","ko"],fakeRestApiURL:"http://localhost:3001",levelEditor:!0,changeLevelsDisabled:!0,pixijs:!1,adjust:{token:"tyz2dqp6yt4w",purchaseToken:"iyhfum",events:{ad_finish_rewarded:"fz4ds8",ad_start_interstitial:"1yuq60",retention_2:"64jbgj",retention_7:"z519a2"}},stand:{staticUrl:"https://scramble-staging.labsystech.ru/publish/html5-staging/",
deployment:"https://scramble-staging.labsystech.ru"},fonts:[{folder:"neris-black",name:"default",bundle:"digits",size:40},{folder:"neris-black",name:"default",bundle:"digits",size:90},{folder:"neris-black-nostroke",name:"nostroke",bundle:"digits",size:49},{folder:"neris-black-nostroke",name:"nostroke",bundle:"digits",size:90},{folder:"formal",name:"formal",bundle:"admin",size:21}]},instant:{appId:"170256430308082",rewarded:"170975370236188",interstitial:"170976206902771",groupId:"kittyscramblelite"},facebook:{shortname:"kittyscramble",appId:"229294690917786",groupId:"kittyscramblecommunity",gameroom_rate_postId:"503600920012105",dontLikeGameUrl_postId:"",stand:{appId:"540455343011567"}},android:{package:"com.cleverapps.scramble",unityGameId:""},amazon:{package:"com.cleverapps.scramble",id:"B073RHS2TQ"},ios:{package:"com.cleverapps.scramble",id:"1256286028"},ok:{shortname:"kittyscramble",appId:"512000595430",appKey:"CHOGBOJGDIHBABABA",groupId:"58437883658410",stand:{
appId:"512000542947",appKey:"CEOJENJGDIHBABABA"}},vk:{shortname:"kittyscramble",appId:"7559026",groupId:"kittyscramble_group",stand:{appId:""}},mm:{appId:"781640",privateKey:"ea277cd8e592c36afdc068eef84052ba",groupId:"kittyscramble",stand:{appId:"",privateKey:""}},mbga:{appId:"12026922",groupId:"32869232"},nk:{appId:"kitty-scramble",groupId:"1419070"},draugiem:{appId:"",groupId:""},plinga:{appId:"944186abe50e452dac7f0e8d3e0a8814"},fotostrana:{appId:"scramble",privateKey:"e2f2fa801cdd8f976a50b78561587172",groupId:"352513",stand:{appId:"",privateKey:""}}}};"undefined"!=typeof exports&&(module.exports=projects);var cleverapps={bundles:{}},projectName=(config="undefined"!=typeof document&&document.ccConfig||cc.game.config).projectName;cleverapps.config=config[projectName],cleverapps.config.debugMode=config.debugMode,cleverapps.config.useStandAppId=config.useStandAppId,cleverapps.config.name=projectName,cleverapps.config.prefix=projectName,
cleverapps.config.restApiURL="/"+projectName+"-rest",cleverapps.config.staticUrl=config.staticUrl||"",cleverapps.config.source=config.source,cleverapps.config.version=config.version,cleverapps.config.vkcors=config.vkcors,"match3"===cleverapps.config.type&&(match3={}),cleverapps.config.languages||(cleverapps.config.languages="board"===cleverapps.config.type?projects.default.board.languages:projects.default.languages),-1!==["iyodo1","ayodo1"].indexOf(cleverapps.config.source)&&(cleverapps.config.languages=["zh"]),cleverapps.config.leagues||(cleverapps.config.leagues=projects.default.leagues),cleverapps.config.prices={prolongations:[100,300,500,700,1e3],boosters:{0:{1:100,3:270,7:600},1:{1:150,3:400,7:900},2:{1:200,3:550,7:1200},3:{1:50},4:{1:150},5:{1:50},6:{1:100},7:{1:150},8:{1:100},9:{1:50},10:{1:50},11:{1:100},12:{1:150},13:{1:50},14:{1:100},15:{1:150}}};var projectAddedToNetwork=function(e,t,s){return!!s[e]&&(!!s[e][t]&&(
"android"===t?s[e][t].package:"ios"===t||"amazon"===t?s[e][t].id:s[e][t].appId))},generateNetworkLinks=function(e,t){var s={};for(var n in t[e])if(projectAddedToNetwork(e,n,t)){var i=t[e][n],o=!1;switch("undefined"==typeof exports&&(o=cleverapps.config.debugMode&&i.stand&&i.stand.appId),n){case"facebook":s.facebook=o?"https://apps.facebook.com/"+i.stand.appId:"https://apps.facebook.com/"+(i.shortname?i.shortname:i.appId);break;case"android":s.android="https://play.google.com/store/apps/details?id="+i.package;break;case"amazon":s.amazon="https://www.amazon.com/dp/"+i.id;break;case"ios":s.ios="https://apps.apple.com/app/id"+i.id;break;case"instant":s.instant=i.appId;break;case"ok":o?(s.web_ok="https://ok.ru/game/"+i.stand.appId,s.mobile_ok="https://m.ok.ru/game/"+i.stand.appId):(s.web_ok="https://ok.ru/game/"+i.shortname,s.mobile_ok="https://m.ok.ru/game/"+i.shortname);break;case"vk":o?(s.web_vk="https://vk.com/app"+i.stand.appId,s.mobile_vk="vk://vk.com/app"+i.stand.appId):(
s.web_vk="https://vk.com/"+i.shortname,s.mobile_vk="vk://vk.com/"+i.shortname);break;case"mm":o?(s.web_mm="https://my.mail.ru/apps/"+i.stand.appId,s.mobile_mm="https://m.my.mail.ru/apps/"+i.stand.appId):(s.web_mm="https://my.mail.ru/apps/"+i.appId,s.mobile_mm="https://m.my.mail.ru/apps/"+i.appId);break;case"mbga":"undefined"==typeof exports&&cleverapps.config.debugMode?s.mbga="http://sb.yahoo-mbga.jp/game/"+i.appId+"/play":s.mbga="http://yahoo-mbga.jp/game/"+i.appId+"/play",s.sp_mbga="http://sp.mbga.jp/_pf_install?game_id="+i.appId;break;case"nk":s.nk="https://nk.pl/#gry-online/"+i.appId;break;case"draugiem":s.draugiem="https://www.draugiem.lv/"+i.appId;break;case"fotostrana":s.fotostrana=o?"https://fotostrana.ru/app/"+i.stand.appId:"https://fotostrana.ru/app/"+i.appId;break;case"yandex":s.yandex="https://yandex.ru/games/play/"+i.appId}}return s};if("undefined"!=typeof exports)module.exports=generateNetworkLinks;else{for(var project in cleverapps.projectLinks={},projects
)cleverapps.projectLinks[project]=generateNetworkLinks(project,projects);var networkConfig=projects[projectName];for(var network in cleverapps.config.rate={urls:{}},cleverapps.config.helpURL={},cleverapps.config.dontLikeGameUrl={},networkConfig)if(projectAddedToNetwork(projectName,network,projects)){var data=networkConfig[network],useStandData=cleverapps.config.debugMode&&data.stand&&data.stand.appId;switch(network){case"facebook":config.plugin||(config.plugin={}),config.plugin.facebook={status:!0,frictionlessRequests:!0,version:"v3.3"},useStandData||cleverapps.config.useStandAppId?config.plugin.facebook.appId=data.stand.appId:config.plugin.facebook.appId=data.appId,cleverapps.config.facebook={url:cleverapps.projectLinks[projectName].facebook};var helpUrl="https://www.facebook.com/"+data.groupId;cleverapps.config.helpURL.default=helpUrl,cleverapps.config.rate.urls.gameroom=data.gameroom_rate_postId?helpUrl+"/posts/"+data.gameroom_rate_postId:helpUrl,
cleverapps.config.rate.urls.facebook="https://www.facebook.com/games/manage/",cleverapps.config.dontLikeGameUrl.default=data.dontLikeGameUrl_postId?helpUrl+"/posts/"+data.dontLikeGameUrl_postId:helpUrl;break;case"android":cleverapps.config.android={url:cleverapps.projectLinks[projectName].android,unityGameId:data.unityGameId},cleverapps.config.rate.urls.android="market://details?id="+data.package;break;case"amazon":cleverapps.config.amazon={url:cleverapps.projectLinks[projectName].amazon},cleverapps.config.rate.urls.amazon="amzn://apps/android?p="+data.package,cleverapps.config.dontLikeGameUrl.amazon=!1;break;case"ios":cleverapps.config.ios={url:cleverapps.projectLinks[projectName].ios},cleverapps.config.rate.urls.ios="itms-apps://itunes.apple.com/app/id"+data.id;break;case"instant":cleverapps.config.instantAds={rewarded:data.appId+"_"+data.rewarded,interstitial:data.appId+"_"+data.interstitial},cleverapps.config.helpURL.instant="https://www.facebook.com/"+data.groupId;break;case"ok":
cleverapps.config.mobile_ok=useStandData?{url:cleverapps.projectLinks[projectName].mobile_ok,appId:data.stand.appId,appKey:data.stand.appKey}:{url:cleverapps.projectLinks[projectName].mobile_ok,appId:data.appId,appKey:data.appKey},cleverapps.config.web_ok={url:cleverapps.projectLinks[projectName].web_ok},cleverapps.config.helpURL.web_ok="https://ok.ru/group/"+data.groupId,cleverapps.config.helpURL.mobile_ok="https://m.ok.ru/group/"+data.groupId;break;case"vk":cleverapps.config.vk=useStandData?{url:cleverapps.projectLinks[projectName].web_vk,appId:data.stand.appId}:{url:cleverapps.projectLinks[projectName].web_vk,appId:data.appId},cleverapps.config.helpURL.web_vk="https://vk.com/"+data.groupId,cleverapps.config.helpURL.mobile_vk="https://m.vk.com/"+data.groupId;break;case"mm":cleverapps.config.myMailRu=useStandData?{url:cleverapps.projectLinks[projectName].web_mm,appId:data.stand.appId,privateKey:data.stand.privateKey}:{url:cleverapps.projectLinks[projectName].web_mm,appId:data.appId,
privateKey:data.privateKey},cleverapps.config.helpURL.web_mm="https://my.mail.ru/community/"+data.groupId,cleverapps.config.helpURL.mobile_mm="https://m.my.mail.ru/community/"+data.groupId;break;case"mbga":cleverapps.config.mbga={url:cleverapps.projectLinks[projectName].mbga},cleverapps.config.sp_mbga={url:data.appId+"-4"},cleverapps.config.helpURL.mbga="http://yahoo-mbga.jp/group/"+data.groupId,cleverapps.config.helpURL.sp_mbga="http://sp.mbga.jp/_grp_view?g="+data.groupId;break;case"nk":cleverapps.config.nk={url:cleverapps.projectLinks[projectName].nk},cleverapps.config.helpURL.nk="https://nk.pl/#grupa/"+data.groupId;break;case"draugiem":cleverapps.config.draugiem={url:cleverapps.projectLinks[projectName].draugiem},cleverapps.config.helpURL.draugiem="https://www.draugiem.lv/"+data.groupId;break;case"plinga":cleverapps.config.plinga={appId:data.appId};break;case"fotostrana":cleverapps.config.fotostrana=useStandData?{url:cleverapps.projectLinks[projectName].fotostrana,
appId:data.stand.appId,privateKey:data.stand.privateKey}:{url:cleverapps.projectLinks[projectName].fotostrana,appId:data.appId,privateKey:data.privateKey},cleverapps.config.helpURL.fotostrana="https://fotostrana.ru/public/"+data.groupId}}}if(void 0===cleverapps&&"undefined"!=typeof exports)cleverapps={config:{}};cleverapps.getRequestParameters=function(e,t){var s={},n=e||window.location.search;if(n)for(var i=(n=n.substr(1)).split("&"),o=0;o<i.length;o++){var a=i[o].split("="),r=a[0],l=a[1]||"";t||(l=decodeURIComponent(l.replace(/\+/g," "))),s[r]=l}return s},cleverapps.config.debugMode&&void 0!==cleverapps.getRequestParameters(window.location.hash).dropDebugMode&&(cleverapps.config.debugMode=!1),cleverapps.EventEmitter=function(){this.bindings={}},cleverapps.EventEmitter.prototype.on=function(t,s,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(s);var n={clear:function(){if(this.bindings[t]){var e=this.bindings[t].indexOf(s);0<=e&&this.bindings[t].splice(e,1)}}.bind(this
)};return cleverapps.isGameObject(e)&&e.registerCleanupCallback(n.clear),n},cleverapps.EventEmitter.prototype.off=function(e){this.bindings[e]=void 0},cleverapps.EventEmitter.prototype.purge=function(){this.bindings={}},cleverapps.EventEmitter.prototype.trigger=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);var s=t.shift();this.bindings[s]&&this.bindings[s].slice().forEach(function(e){e.apply(this,t)})},cleverapps.EventsQueue=function(e){this.data=[],this.interval=cleverapps.parseInterval(e)},cleverapps.EventsQueue.prototype.add=function(e){this.data.push(e),this.data.sort(),this.shrink()},cleverapps.EventsQueue.prototype.first=function(){if(this.shrink(),0<this.data.length)return this.data[0]},cleverapps.EventsQueue.prototype.shrink=function(){for(;0<this.data.length&&this.data[0]+this.interval<=Date.now();)this.data.shift()},cleverapps.EventsQueue.prototype.getShrinkLeftTime=function(){if(0<this.data.length)return this.data[0]+this.interval-Date.now()},
cleverapps.EventsQueue.prototype.size=function(){return this.shrink(),this.data.length},cleverapps.Cache=function(e){this.capacity=e||100,this.data={},this.queue=[]},cleverapps.Cache.prototype.set=function(e,t){if(!this.data[e]){var s=this.queue.indexOf(e);-1!==s&&this.queue.splice(s,1)}this.data[e]=t,this.queue.push(e),this.queue.length>this.capacity&&(e=this.queue.shift(),delete this.data[e])},cleverapps.Cache.prototype.get=function(e){return this.data[e]},cleverapps.isRumble=function(){var e=cleverapps.metha.getMainObject().knockoutGame;return e&&e.isRumble()},cleverapps.isKnockoutGame=function(){return cleverapps.metha.getMainObject().knockoutGame},cleverapps.humanReadableNumber=function(e,t){return(parseInt(e)||0)*Episode.LEVELS_PER_EPISODE+t+1},cleverapps.humanUnReadableNumber=function(e){return{level:e%Episode.LEVELS_PER_EPISODE,episode:Math.floor(e/Episode.LEVELS_PER_EPISODE)}},cleverapps.arrayFill=function(e,t){for(var s=[],n=0;n<e;n++)s.push(t);return s},
cleverapps.formatAmount=function(e){if(e<1e3)return e;var t=Math.floor(e/1e3);(e-=1e3*t)<10?e="00"+e:e<100&&(e="0"+e);return t+" "+e},cleverapps.cmp=function(e,t){return(e=JSON.stringify(e))===(t=JSON.stringify(t))},cleverapps.loadSdk=function(e,t){var s=t.onSuccess||function(){},n=t.onFailure||function(){};cleverapps.config.vkcors&&0===(e=e.replace("https:","vkcors:").replace("http:","vkcors:")).indexOf("//")&&(e="vkcors:"+e),void 0===t.attempt&&(t.attempt=3);var i=document.createElement("script");t.crossorigin&&i.setAttribute("crossorigin","anonymous"),i.setAttribute("type","text/javascript"),i.setAttribute("src",e);var o=function(){clearTimeout(a),1<t.attempt?(document.body.contains(i)&&document.body.removeChild(i),t.attempt--,cleverapps.loadSdk(e,t)):n()}.bind(this);i.onload=function(){clearTimeout(a),s()},i.onerror=o;var a=setTimeout(o,3e4);document.body.appendChild(i)},cleverapps.setUrlHash=function(e){var t=cleverapps.getRequestParameters(window.location.hash);for(var s in e){
var n=e[s];void 0===n?delete t[s]:t[s]=n}window.location.hash=Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},cleverapps.bySource=function(e){var t,s=cleverapps.User.calcSource();return!cc.sys.isNative&&(-1<(t=navigator.userAgent||navigator.vendor||window.opera).indexOf("FBAN")||-1<t.indexOf("FBAV"))&&(s="gameroom"),e[s]?e[s]:"gameroom"===s&&e.facebook?e.facebook:e.default?e.default:void 0},cleverapps.INTERVALS={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3},cleverapps.padZeroes=function(e,t){for(var s=e+"";s.length<t;)s="0"+s;return s},cleverapps.parseInterval=function(e){var t=1e3*parseInt(e);for(var s in cleverapps.INTERVALS){if(-1!==e.indexOf(s))return t*cleverapps.INTERVALS[s]}return t},cleverapps.goalCollectSound=function(){cleverapps.audio.playSound(bundles.game.urls.goal_inc_effect,{throttle:100})},cleverapps.once=function(t){return function(){if(t){var e=t;t=void 0,e.apply(this,arguments)}}},cleverapps.shuffle=function(e){for(
var t=0;t<e.length;t++){var s=cleverapps.Random.random(e.length),n=e[t];e[t]=e[s],e[s]=n}return e},cleverapps.extractDateFromDateTime=function(e){return new Date(e).setHours(0,0,0,0)},cleverapps.extractNumber=function(e){if(e){for(var t="",s=0;s<e.length;s++){var n=e.charAt(s);n.match(/\d+/g)?t+=n:","!==n&&"."!==n||(t+=".")}return-1!==t.indexOf(".")?parseFloat(t):parseInt(t)}},cleverapps.extend=function(e,t){if(Object.assign)return Object.assign.apply(this,arguments);for(var s=1;s<arguments.length;s++)for(var n in arguments[s])e[n]=arguments[s][n];return e},cleverapps.override=function(e,t){for(var s in t){var n=e[s],i=t[s];n instanceof cc.Color?(console.log("Override color: "+s),e[s]=i):Array.isArray(n)&&Array.isArray(i)?e[s]=i:"object"==typeof n&&"object"==typeof i?cleverapps.override(n,i):e[s]=i}return e},cleverapps.increaseStylesByKoef=function(e,t){for(var s in e){var n=e[s];if("number"==typeof n){if(Array.isArray(e))continue;cleverapps.UI.needUpdateSizes(e,s,n)&&(e[s]*=t,
e[s]=Math.round(e[s]))}else"object"==typeof n&&cleverapps.UI.needUpdateSizes(e,s,n)&&cleverapps.increaseStylesByKoef(n,t)}},cleverapps.extendStyles=function(e,t){if(t.extendStylesProcessed)return t;var s=cleverapps.overrideStyles(e,t,!0);return s.extendStylesProcessed=!0,cleverapps.extend(t,s),t},cleverapps.overrideStyles=function(e,t,s){for(var n in void 0!==e&&void 0!==t||console.log(e,t),s&&(e=cleverapps.clone(e,!0)),t){var i=e[n],o=t[n];i instanceof cc.Color||i&&i.fnt?e[n]=o:Array.isArray(i)&&Array.isArray(o)?e[n]=o:"object"==typeof i&&"object"==typeof o?cleverapps.overrideStyles(i,o):e[n]=o}return e},cleverapps.overrideColors=function(e,t){var s=function(e){return e instanceof cc.Color||cc.sys.isNative&&e&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b&&void 0!==e.a};for(var n in t){var i=e[n],o=t[n];void 0===i?e[n]=o:s(i)&&s(o)?(i.r=o.r,i.g=o.g,i.b=o.b,i.a=o.a):"object"==typeof i&&"object"==typeof o?cleverapps.overrideColors(i,o):e[n]=o}return e},cleverapps.overrideFonts=function(e,t){
for(var s in t){var n=e[s],i=t[s];if(void 0===n)e[s]=i;else{if(cleverapps.config.debugMode)var o=JSON.stringify(n);if(i.size&&(n.size=i.size),i.color&&(n.color=i.color),i.scale&&(n.scale=i.scale),i.alternativeSizes&&(n.alternativeSizes=i.alternativeSizes),i.name&&(n.name=i.name),n.stroke=i.stroke,n.shadow=i.shadow,cleverapps.config.debugMode){var a=JSON.stringify(n);if(o===a)throw console.log("WAS BECOME override "+s),console.log(o,a),"Unnecessary overrideFonts: "+s}}e[s].fnt=!0}return e},cleverapps.clone=function(e,t){if(null===e)return null;if("object"!=typeof e)return e;if("undefined"!=typeof cc&&e instanceof cc.Color)return cc.color(e);if(Array.isArray(e)){for(var s=[],n=0;n<e.length;n++)t?s.push(cleverapps.clone(e[n],!0)):s.push(e[n]);return s}s={};for(var i in e)if(e[i]&&e[i].fnt)s[i]=e[i];else if(t){if(cleverapps.config.debugMode&&"undefined"!=typeof cc&&e[i]instanceof cc.Node)throw"clone node object with name - "+i;s[i]=cleverapps.clone(e[i],!0)}else s[i]=e[i];return s},
cleverapps.accumulate=function(e,t){var s,n,i=void 0;return function(){s=this,n=arguments,void 0===i&&(i=setTimeout(function(){clearTimeout(i),i=void 0,t.apply(s,n)},e))}},cleverapps.async=function(s){return function(){var e=this,t=arguments;setTimeout(function(){s.apply(e,t)},0)}},cleverapps.extendFunc=function(s,n){return function(){var e=this._super;this._super=s;var t=n.apply(this,arguments);return this._super=e,t}},cleverapps.throttle=function(e,t,s){return s=void 0!==s?s:0,function(){s+e<Date.now()&&(s=Date.now(),t.apply(this,arguments))}},cleverapps.postpone=function(e,t){var s,n,i;return function(){s=this,n=arguments,clearTimeout(i),i=setTimeout(function(){t.apply(s,n)},e)}},cleverapps.timeredThrottle=function(s,e,n){var i,o,a;n=void 0!==n?n:0;var r=function(){void 0!==a&&(clearTimeout(a),a=void 0),o=i=void 0},l=function(){i&&o&&(e.apply(i,o),n=Date.now()),r()};return function(){r(),i=this,o=arguments;var e=Date.now(),t=n+s-e;t<=0?l():a=setTimeout(l,t)}},
cleverapps.createSet=function(e){var t={};return e.forEach(function(e){t[e]=!0}),t},cleverapps.contains=function(t,e,s){return s=s||function(e){return e},t=cleverapps.toArray(t||[]).map(s),(e=cleverapps.toArray(e||[]).map(s)).filter(function(e){return-1!==t.indexOf(e)}).length===e.length},cleverapps.substract=function(e,t,s){s=s||function(e){return e},e=e||[];var n={};return(t=t||[]).forEach(function(e){n[s(e)]=!0}),e.filter(function(e){return void 0===n[s(e)]})},cleverapps.intersect=function(e,t){e=e||[];var s={};return(t=t||[]).forEach(function(e){s[e]=!0}),e.filter(function(e){return void 0!==s[e]})},cleverapps.unique=function(e){if("undefined"!=typeof Set&&"function"==typeof Array.from)return Array.from(new Set(e));var t={},s=[];return e.forEach(function(e){!0!==t[e]&&(s.push(e),t[e]=!0)}),s},cleverapps.values=function(e){if(!e)return[];if(Object.values)return Object.values(e);var t=[];for(var s in e)t.push(e[s]);return t},cleverapps.callFunc=function(e){e()},
cleverapps.intervalToString=function(e,t){void 0===t&&(t=!0);var s=(e=Math.ceil(e/1e3))%60,n=(e=Math.floor(e/60))%60,i=Math.floor(e/60);if(s<10&&(s="0"+s),n<10&&(n="0"+n),24<i||24===i&&(0<n||0<s)){var o=Math.floor(i/24);return i%=24,Messages.get("dayTimeString",{day:o,hr:i})}return!t&&i<=24&&0<i?Messages.get("hoursMinutesString",{hr:i,min:n}):(i<10&&(i="0"+i),(t?i+":":"")+n+":"+s)},cleverapps.isLevels=function(){return cleverapps.metha.getType()!==Metha.NONE},cleverapps.isStaging=function(){return!cc.sys.isNative&&cleverapps.config.debugMode&&!cleverapps.isLocalhost()},cleverapps.isLocalhost=function(){return!cc.sys.isNative&&("localhost"===location.host||"127.0.0.1"===location.host||0===location.host.indexOf("192.168."))},cleverapps.isStagingHost=function(){return-1!==location.host.indexOf("staging.labsystech.ru")},cleverapps.isInstant=function(){return"instant"===cc.game.config.source},cleverapps.isOkApp=function(){
var e=!cc.sys.isNative&&window&&window.navigator&&window.navigator.userAgent;return e&&0<=e.indexOf("OkApp")},cleverapps.checkStatus=function(e,t){return Array.isArray(t)||(t=[t]),Array.isArray(e)?0<e.filter(function(e){return cleverapps.checkStatus(e,t)}.bind(this)).length:-1!==t.indexOf(e)||e&&e.errorMessage&&e.errorMessage.status&&-1!==t.indexOf(e.errorMessage.status)},cleverapps.toArray=function(e){return Array.isArray(e)||null==e?e:[e]},cleverapps.wait=function(e,t){if(0!==e){var s=0;return function(){++s===e&&t()}}t()},cleverapps.waitNoMore=function(e,t){var s=setTimeout(function(){console.log("waitNoMore timeout: "+e),s=void 0,t()},e);return function(){void 0!==s&&(clearTimeout(s),t())}},cleverapps.doubleReward=function(e){if(void 0!==e.gold&&(e.gold*=2),void 0!==e.boosters)for(var t in e.boosters)e.boosters[t]*=2;return void 0!==e.exp&&(e.exp*=2),void 0!==e.stars&&(e.stars*=2),void 0!==e.lives&&(e.lives*=2),e},cleverapps.throwAsync=function(e,t){e=e+" "+JSON.stringify((
t||new Error).stack),setTimeout(function(){throw e},0)},cleverapps.isNumber=function(e){return"string"==typeof e&&e&&/^[0-9]+$/.test(e)||"number"==typeof e&&!isNaN(e)},cleverapps.castType=function(e){return"string"==typeof e&&cleverapps.isNumber(e)?parseInt(e):e},cleverapps.rangeArray=function(e,t){for(var s=[],n=e;n<=t;n++)s.push(n);return s},cleverapps.splitToChunks=function(e,t){for(var s=Math.ceil(e.length/t),n=[];0<e.length;)n.push(e.splice(0,s));return n},cleverapps.sign=function(e){return e<0?-1:0<e?1:0},cleverapps.splitHalfByWord=function(e){for(var t=Math.floor(e.length/2),s=-1,n=0;n<=t&&-1===s;n++)" "===e.charAt(t-n)?s=t-n:" "===e.charAt(t+n)&&(s=t+n);return-1===s?[e]:[e.substr(0,s),e.substr(s+1)]};var OverridesContainer=function(){this.overrides=[]};OverridesContainer.prototype.override=function(e,t,s){if(e){var n=e[t];e[t]=s,this.overrides.push({target:e,key:t,value:s,oldValue:n})}},OverridesContainer.prototype.unoverride=function(){var e=this.overrides;this.overrides=[],
e.forEach(function(e){e.target[e.key]=e.oldValue})},void 0===Array.prototype.find&&Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),s=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<s;){var o=t[i];if(e.call(n,o,i,t))return o;i++}},configurable:!0,writable:!0}),cleverapps.EXCHANGE_RATES={EUR:.9,RUB:64.23,GBP:.79,DEM:1.77,JPY:108.31,INR:70.86,FRF:5.95,CAD:1.32,AUD:1.47,BEF:36.58},cleverapps.NO_ACTION="no_action",cleverapps.ONE_HOUR=cleverapps.parseInterval("1 hour"),cleverapps.ONE_DAY=cleverapps.parseInterval("1 day"),cleverapps.isCocosJs=function(){return!cleverapps.isPixiJs()},cleverapps.isPixiJs=function(){return cleverapps.config.debugMode&&cleverapps.config.pixijs},cleverapps.colorToHex=function(e){return(e.r<<16)+(e.g<<8)+(0|e.b)},cleverapps.isGameObject=function(e){return cleverapps.isPixiJs(
)?e instanceof cc.Base:e instanceof cc.Node},cleverapps.hashCode=function(e){if(null==e||"number"==typeof e&&isNaN(e))return 0;e+="";for(var t=0,s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s);return t},cleverapps.reverseObject=function(e){var t={};for(var s in e){var n=e[s];if(void 0!==t[n])throw"Not unique key - "+s;t[n]=s}return t},"undefined"!=typeof exports&&(module.exports=cleverapps);var ResourceProcessor={addStaticUrl:function(){var e,s=function(e){return"string"==typeof e&&-1!==[".plist",".atlas"].indexOf(cc.path.extname(e))},i=function(e,t){if("string"==typeof e&&"@"===e.charAt(0))return e;if("string"==typeof e&&-1===e.indexOf(t))return t+e;if("font"===e.type)return e.srcs=e.srcs.map(function(e){return i(e,t)}),e;if("object"==typeof e){var s={};for(var n in e)s[n]=i(e[n],t);return s}return e},t=cleverapps.config,n=Object.keys(bundles);for(var o in n){var a=n[o],r=bundles[a],l=t.staticUrl,c="";if(cc.sys.isNative&&(l="",c=t.staticUrl.replace("html5-staging","external-staging"
).replace("html5","external")),l||c)for(var o in r.urls){var p=r.urls[o],d=r.external&&("string"==typeof(e=p)&&-1!==[".png",".jpg"].indexOf(cc.path.extname(e)))&&c||l;d&&(r.urls[o]=i(p,d))}l&&Object.keys(r.jsons).forEach(function(e){var t;(s(r.jsons[e])||"string"==typeof(t=r.jsons[e])&&-1!==[".json"].indexOf(cc.path.extname(t))&&"levels"===e&&r.urls.levels)&&(r.jsons[e]=i(r.jsons[e],l))}),Object.keys(r.urls).forEach(function(e){s(r.urls[e])&&(r.jsons[e]=r.urls[e])})}},calcProbablyNeed:function(){if("playable"===cleverapps.config.source)return[];var e=["main","transition","language_"+cleverapps.settings.language],t=cleverapps.Plot.onStartup(void 0,!0),s=[];"object"==typeof t&&(s=t.options,t=t.scene);var n=cleverapps.bundleLoader.getClassBundles(t,this,s);return e=e.concat(n),cleverapps.config.debugMode&&e.push("dev_resources"),e=(e=cleverapps.unique(e)).filter(function(e){return void 0!==bundles[e]&&!bundles[e].noCache})}},bundles={avatar:{urls:{},injectTo:["main"],frameIds:["%n_frame",
"%n_frame2"],jsonIds:[],soundIds:[],unpackedIds:[]},backgrounds_window_0:{urls:{background:"@background_0-39a4f80ec3.jpg"}},backgrounds_window_1:{urls:{background:"@background_1-c1c634ae2d.jpg"}},backgrounds_window_10:{urls:{background:"@background_10-a92b35bbe1.jpg"}},backgrounds_window_11:{urls:{background:"@background_11-77b86049b0.jpg"}},backgrounds_window_12:{urls:{background:"@background_12-b59e72a5c8.jpg"}},backgrounds_window_13:{urls:{background:"@background_13-2d592dbf20.jpg"}},backgrounds_window_14:{urls:{background:"@background_14-e92fb059d2.jpg"}},backgrounds_window_15:{urls:{background:"@background_15-6ffd914047.jpg"}},backgrounds_window_16:{urls:{background:"@background_16-b87e4b6182.jpg"}},backgrounds_window_17:{urls:{background:"@background_17-5432932040.jpg"}},backgrounds_window_18:{urls:{background:"@background_18-082cb34569.jpg"}},backgrounds_window_19:{urls:{background:"@background_19-ee965bb7bc.jpg"}},backgrounds_window_2:{urls:{
background:"@background_2-95be3e0853.jpg"}},backgrounds_window_20:{urls:{background:"@background_20-498f77c0bc.jpg"}},backgrounds_window_21:{urls:{background:"@background_21-3b7e9109f3.jpg"}},backgrounds_window_22:{urls:{background:"@background_22-61943659bd.jpg"}},backgrounds_window_23:{urls:{background:"@background_23-6df376eccf.jpg"}},backgrounds_window_24:{urls:{background:"@background_24-ca2984c379.jpg"}},backgrounds_window_25:{urls:{background:"@background_25-0f91e81bb8.jpg"}},backgrounds_window_26:{urls:{background:"@background_26-6cf46e2bf7.jpg"}},backgrounds_window_27:{urls:{background:"@background_27-3fb014ee6f.jpg"}},backgrounds_window_28:{urls:{background:"@background_28-c23882a611.jpg"}},backgrounds_window_29:{urls:{background:"@background_29-ed26819dc8.jpg"}},backgrounds_window_3:{urls:{background:"@background_3-06d5c16108.jpg"}},backgrounds_window_30:{urls:{background:"@background_30-1c407f5110.jpg"}},backgrounds_window_31:{urls:{
background:"@background_31-0f5217c10e.jpg"}},backgrounds_window_32:{urls:{background:"@background_32-f89878d20b.jpg"}},backgrounds_window_33:{urls:{background:"@background_33-d286e0d010.jpg"}},backgrounds_window_34:{urls:{background:"@background_34-f09d4490f9.jpg"}},backgrounds_window_35:{urls:{background:"@background_35-bb057629b0.jpg"}},backgrounds_window_36:{urls:{background:"@background_36-4067856d9e.jpg"}},backgrounds_window_37:{urls:{background:"@background_37-57e22cd5aa.jpg"}},backgrounds_window_38:{urls:{background:"@background_38-74dda2b07a.jpg"}},backgrounds_window_39:{urls:{background:"@background_39-67de6dbcba.jpg"}},backgrounds_window_4:{urls:{background:"@background_4-8a33019dcd.jpg"}},backgrounds_window_40:{urls:{background:"@background_40-7c412d6add.jpg"}},backgrounds_window_41:{urls:{background:"@background_41-e3f47f8de2.jpg"}},backgrounds_window_42:{urls:{background:"@background_42-55cbaa226c.jpg"}},backgrounds_window_43:{urls:{
background:"@background_43-9acaaca01f.jpg"}},backgrounds_window_44:{urls:{background:"@background_44-3e61ed42a8.jpg"}},backgrounds_window_45:{urls:{background:"@background_45-76c454213f.jpg"}},backgrounds_window_46:{urls:{background:"@background_46-0ad52d16b7.jpg"}},backgrounds_window_47:{urls:{background:"@background_47-512a5916f4.jpg"}},backgrounds_window_48:{urls:{background:"@background_48-e0c67b5af0.jpg"}},backgrounds_window_49:{urls:{background:"@background_49-4875876295.jpg"}},backgrounds_window_5:{urls:{background:"@background_5-191890ec60.jpg"}},backgrounds_window_50:{urls:{background:"@background_50-d65e23edb5.jpg"}},backgrounds_window_51:{urls:{background:"@background_51-15f12a4cf7.jpg"}},backgrounds_window_52:{urls:{background:"@background_52-87b99c7e1e.jpg"}},backgrounds_window_53:{urls:{background:"@background_53-bf0ad0ac73.jpg"}},backgrounds_window_54:{urls:{background:"@background_54-51398b88e4.jpg"}},backgrounds_window_55:{urls:{
background:"@background_55-fa3a693588.jpg"}},backgrounds_window_56:{urls:{background:"@background_56-c4763f225f.jpg"}},backgrounds_window_6:{urls:{background:"@background_6-367a428d8d.jpg"}},backgrounds_window_7:{urls:{background:"@background_7-0c326e2a11.jpg"}},backgrounds_window_8:{urls:{background:"@background_8-74b88e3529.jpg"}},backgrounds_window_9:{urls:{background:"@background_9-a1393dfdd0.jpg"}},battle_pass:{urls:{png:"@%n-b8c5eec7a7.png",json:"@%n-e5508d8ca0.json"},jsons:{plist:"@%n-b8c5eec7a7.plist"},frames:{gold_small_png:"#%n-reward_icons-gold_small.png",reward_gold_png:"#%n-reward_icons-gold.png",hint_icon_png:"#%n-reward_icons-hint_icon.png",hint:"#%n-reward_icons-hint.png",eye:"#%n-reward_icons-eye.png",highlight:"#%n-reward_icons-highlight.png",hint_small:"#%n-reward_icons-hint_small.png",eye_small:"#%n-reward_icons-eye_small.png",highlight_small:"#%n-reward_icons-highlight_small.png",default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",
default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",
default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",
nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",
nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png"}},beatfriendwindow:{urls:{png:"@%n-affb73f9df.png",json:"@%n-3f62f317f1.json"},jsons:{plist:"@%n-affb73f9df.plist"},frames:{beat_friend_bg_png:"#%n-windows-beat_friend_bg.png"}},black_friday:{urls:{png:"@%n-a5578a1810.png",json:"@%n-c2f953a691.json"},jsons:{plist:"@%n-a5578a1810.plist"},frames:{balloon_png:"#%n-balloon.png",label_png:"#%n-label.png"}},bonus_round_window:{urls:{png:"@%n-b3eba981dd.png",json:"@%n-ecfee66933.json"},jsons:{bonus_round_json:"@jsons/bonus_round-f89b44fb8b.json",atlas:"@%n-b3eba981dd.atlas"}},bonus_world_easter:{urls:{music:"~sounds/easter_music-aa79ad6de0.mp3",png:"@%n-4a3348dd62.png",json:"@%n-65f8898af9.json"},jsons:{level_json:"@jsons/level-1da730165e.json",chest_json:"@jsons/chest-e8de6715a4.json",
plist:"@%n-4a3348dd62.plist",atlas:"@%n-4a3348dd62.atlas"},frames:{default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",
default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",
nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",
nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png"}},bonus_world_easter_background:{urls:{background:"@background-6a4b479942.jpg",music:"~sounds/easter_music-aa79ad6de0.mp3",png:"@%n-764c084111.png",json:"@%n-766e108e2d.json"},jsons:{background_spine:"@jsons/background_spine-bd5ae19a5f.json",atlas:"@%n-764c084111.atlas"}},bonus_world_easter_background_instant:{urls:{background:"@background_instant-1f4668fc78.jpg",music:"~sounds/easter_music-aa79ad6de0.mp3",png:"@%n-764c084111.png",json:"@%n-13e4750355.json"},jsons:{background_spine:"@jsons/background_spine-bd5ae19a5f.json",atlas:"@%n-764c084111.atlas"}},bonus_world_summer:{urls:{pass_level_effect:"~sounds/pearl-8a5a9dfa7b.mp3",
music:"~sounds/summer_music-f9e7dea6f3.mp3",png:"@%n-d4f00a1ecc.png",json:"@%n-89d0c6b018.json"},jsons:{level_json:"@jsons/level-f2fc724815.json",chest_json:"@jsons/chest-e494510764.json",plist:"@%n-d4f00a1ecc.plist",atlas:"@%n-d4f00a1ecc.atlas"},frames:{default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",
default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",
nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",
nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png"}},bonus_world_summer_background:{urls:{background:"@background-f1c1ea570e.jpg",music:"~sounds/summer_music-f9e7dea6f3.mp3",png:"@%n-cd12325b3b.png",json:"@%n-5c6c3a4533.json"},jsons:{background_spine:"@jsons/background_spine-bc972748e7.json",atlas:"@%n-cd12325b3b.atlas"}},bonus_world_summer_background_instant:{urls:{background:"@background_instant-e52618beb9.jpg",music:"~sounds/summer_music-f9e7dea6f3.mp3",png:"@%n-cd12325b3b.png",json:"@%n-3036de61c0.json"},jsons:{
background_spine:"@jsons/background_spine-bc972748e7.json",atlas:"@%n-cd12325b3b.atlas"}},bonus_world_valentines:{urls:{music:"~sounds/valentines_music-8b0a745da0.mp3",png:"@%n-1000b69ddf.png",json:"@%n-9f03581372.json"},jsons:{level_json:"@jsons/level-65b4c3afa2.json",level_2_json:"@jsons/level2-7f9b19ccf3.json",chest_json:"@jsons/chest-2ac7756855.json",plist:"@%n-1000b69ddf.plist",atlas:"@%n-1000b69ddf.atlas"},frames:{default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",
default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",
nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",
nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png"}},bonus_world_valentines_background:{urls:{background:"@background-5070bb5001.jpg",music:"~sounds/valentines_music-8b0a745da0.mp3",png:"@%n-3bfa528aba.png",json:"@%n-189df25dc8.json"},jsons:{background_spine:"@jsons/background_spine-ae7747ee1d.json",
atlas:"@%n-3bfa528aba.atlas"}},boosters_before:{urls:{},injectTo:["main"],frameIds:["booster_before_bg_png","booster_before_bg_on_png","booster_before_bg_off_png","bonus_hint_sale_png","booster_before_green_button_png","booster_before_purple_button_png","booster_before_check_icon_png","booster_before_plus_icon_png","booster_before_price_bg_png","hard_level_title_bg_png","tricky_level_title_bg_png","booster_before_lock_png","booster_before_level_bg","booster_before_level_bg_hard","booster_before_level_bg_tricky"],jsonIds:[],soundIds:["appear_sfx","booster_before_selection_effect","booster_before_cancel_effect"],unpackedIds:[]},boosters_sale:{urls:{png:"@%n-c8b62331eb.png",json:"@%n-25f8f60ab2.json"},jsons:{prize_json:"@jsons/%n_prize-c0c1ca0d9f.json",plist:"@%n-c8b62331eb.plist",atlas:"@%n-c8b62331eb.atlas"},frames:{boosterssale_streak_bar_bg:"#%n-streak_bar_bg.png",boosterssale_streak_bar:"#%n-streak_bar.png",row_bg_png:"#%n-row_bg.png",label_bg_png:"#%n-bar_bg.png",
window_bg_png:"#%n-window_bg.png",title_bg_png:"#%n-title_bg.png"}},browser_resources:{urls:{left_bg:"@pattern_left-621d415ff8.jpg",right_bg:"@pattern_right-cd6bf798a8.jpg"}},buttons:{urls:{},injectTo:["game","main"],frameIds:["window_button_png","window_button_on_png","window_button_disabled_png","green_button_png","green_button_on_png"],jsonIds:[],soundIds:[],unpackedIds:[]},buttons_main:{urls:{},injectTo:["main"],frameIds:["window_close_png","window_close_on_png","blue_button_png","blue_button_on_png","help_button_png","help_button_on_png","exit_button_icon","scene_exit_button","small_green_button","small_green_button_on","small_blue_button","small_blue_button_on","music_off_png","music_on_png","sound_off_png","sound_on_png","red_button","red_button_on","play_button_png","play_button_on_png","play_button_hard_png","play_button_hard_on_png","play_button_tricky_png","play_button_tricky_on_png","mission_play_button","mission_play_button_on"],jsonIds:[],soundIds:[],unpackedIds:[]},
chat:{urls:{window_bg:"@window_bg-122eed08e5.jpg",strict_font_ttf:{type:"font",name:"Rubic",srcs:["~%n/all/font.ttf","~%n/all/font.eot"]},png:"@%n-9cc19994c6.png",json:"@%n-1293cae7d7.json"},jsons:{plist:"@%n-9cc19994c6.plist"},frames:{dialog_box_green:"#%n-dialog_box.png",dialog_box_white:"#%n-dialog_box_2.png",icon_back:"#%n-icon_back.png",panel_off:"#%n-panel_off.png",panel_on:"#%n-panel_on.png",panelup:"#%n-panelup.png",paneldown:"#%n-paneldown.png",textbox:"#%n-textbox.png",checkmark_tmp:"#%n-checkmark_0.png",checkmark_sent:"#%n-checkmark_1.png",checkmark_read:"#%n-checkmark_2.png",checkmark_gift:"#%n-checkmark_yes.png",gift_bg:"#%n-gift_bg.png",accept_button:"#%n-button_accept.png",accept_button_on:"#%n-button_accept_press.png",no_button:"#%n-no_button.png",no_button_on:"#%n-no_button_press.png"}},combo_background:{urls:{},injectTo:["game"],frameIds:[],jsonIds:["%n_json","%n_particles_json"],soundIds:[],unpackedIds:[]},confirmexit_window:{urls:{}},controlbuttons:{urls:{},
injectTo:["game","main"],frameIds:["menu_icon_png","button_png","button_on_png","fullscreen_icon_png","back_button_png","back_button_on_png","back_icon_png"],jsonIds:[],soundIds:[],unpackedIds:[]},cookiejar:{urls:{},injectTo:["game"],frameIds:["light_bg_png","row_player_png","prize_png"],jsonIds:["extra_container_json","cookie_json"],soundIds:[],unpackedIds:[]},cryptex:{urls:{},injectTo:["game"],frameIds:[],jsonIds:["%n_json"],soundIds:["%n_attempt_effect","%n_open_effect","%n_fail_effect"],unpackedIds:[]},daily_cup:{urls:{bg:"@bg-6915d55b1c.jpg",png:"@%n-23b860cbae.png",json:"@%n-21d6a29e8c.json"},jsons:{daily_cup_json:"@jsons/%n-c33891ff23.json",plist:"@%n-23b860cbae.plist",atlas:"@%n-23b860cbae.atlas"},frames:{daily_cup_row_icon:"#%n-images-%n_row_icon.png",daily_cup_table_bg:"#%n-images-%n_table_bg.png",daily_cup_leaders_icon_png:"#%n-images-bonus_cup.png",daily_cup_titleBg:"#%n-title_bg.png"}},daily_minigame_window:{urls:{}},dailytask_notification:{urls:{},injectTo:["game","main"
],frameIds:["icon","daily_task_bar_png","daily_task_bar_bg_png","notification_bg"],jsonIds:[],soundIds:["task_done_sfx"],unpackedIds:[]},dailytasks:{urls:{png:"@%n-829f183e51.png",json:"@%n-7acf9ad940.json"},jsons:{plist:"@%n-829f183e51.plist"},frames:{daily_task_icon_0_png:"#%n-dailytask_fb_bigicon.png",daily_task_icon_1_png:"#%n-icon1.png",daily_task_icon_2_png:"#%n-icon2.png",daily_task_icon_3_png:"#%n-icon3.png",daily_task_icon_4_png:"#%n-level_open.png",daily_task_icon_6_png:"#%n-free_moves_friends.png",daily_task_icon_7_png:"#%n-adicon.png",daily_task_icon_13_png:"#%n-coin_task.png",daily_task_icon_17_png:"#%n-hint_task.png",daily_task_icon_19_png:"#%n-episode_task.png",daily_task_icon_20_png:"#%n-gift_task.png",daily_task_icon_22_png:"#%n-overtake_task.png",daily_task_icon_23_png:"#%n-bonus_task.png",daily_task_bg_png:"#%n-mission-task_bg.png",daily_task_bar_png:"#%n-mission-bar.png",daily_task_bar_bg_png:"#%n-mission-bar_bg.png",prize_png:"#%n-prize.png",
daily_task_icon_41_png:"#%n-daily_tasks.png",daily_task_icon_15_png:"#%n-extra_task.png",daily_task_icon_16_png:"#%n-letter_task.png",daily_task_icon_18_png:"#%n-tournament_task.png",daily_task_icon_21_png:"#%n-free_moves_friends.png",daily_task_timer_bg_png:"#%n-mission-timer_bg.png",daily_task_timer_icon_png:"#%n-mission-timer_icon.png",letter_bg_png:"#%n-game-letter_bg.png",letter_keypad_yellow_bg_png:"#%n-game-letter_keypad_yellow_bg.png",letter_keypad_green_bg_png:"#%n-game-letter_keypad_green_bg.png",letter_keypad_red_bg_png:"#%n-game-letter_keypad_red_bg.png",letter_keypad_orange_bg_png:"#%n-game-letter_keypad_orange_bg.png",letter_keypad_blue_bg_png:"#%n-game-letter_keypad_blue_bg.png",letter_keypad_purple_bg_png:"#%n-game-letter_keypad_purple_bg.png",letter_keypad_light_blue_bg_png:"#%n-game-letter_keypad_light_blue_bg.png",letter_keypad_pink_bg_png:"#%n-game-letter_keypad_pink_bg.png",letter_keypad_bg_plain_png:"#%n-game-letter_keypad_bg_plain.png"}},dialogues:{urls:{},
injectTo:["main"],frameIds:["bg_png","arrow_png"],jsonIds:[],soundIds:[],unpackedIds:[]},dialogues_minimal:{urls:{png:"@%n-6a2cab96b8.png",json:"@%n-a477b6827b.json"},jsons:{dialogue_minimal_json:"@jsons/dialog_minimal-4064835200.json",plist:"@%n-6a2cab96b8.plist",atlas:"@%n-6a2cab96b8.atlas"},frames:{bg_minimal_png:"#%n-dialogues-bg_minimal.png",arrow_minimal_png:"#%n-dialogues-arrow_minimal.png"}},digits:{urls:{},injectTo:["slot_machine","battle_pass","minesweeper","bonus_world_summer","bonus_world_easter","bonus_world_valentines","admin","tile_shop","game","main"],frameIds:["default40pt_0","default40pt_1","default40pt_2","default40pt_3","default40pt_4","default40pt_5","default40pt_6","default40pt_7","default40pt_8","default40pt_9","default40pt_colon","default40pt_slash","default40pt_plus","default40pt_minus","default40pt_x","default40pt_space","default90pt_0","default90pt_1","default90pt_2","default90pt_3","default90pt_4","default90pt_5","default90pt_6","default90pt_7",
"default90pt_8","default90pt_9","default90pt_colon","default90pt_slash","default90pt_plus","default90pt_minus","default90pt_x","default90pt_space","nostroke49pt_0","nostroke49pt_1","nostroke49pt_2","nostroke49pt_3","nostroke49pt_4","nostroke49pt_5","nostroke49pt_6","nostroke49pt_7","nostroke49pt_8","nostroke49pt_9","nostroke49pt_colon","nostroke49pt_slash","nostroke49pt_plus","nostroke49pt_minus","nostroke49pt_x","nostroke49pt_space","nostroke90pt_0","nostroke90pt_1","nostroke90pt_2","nostroke90pt_3","nostroke90pt_4","nostroke90pt_5","nostroke90pt_6","nostroke90pt_7","nostroke90pt_8","nostroke90pt_9","nostroke90pt_colon","nostroke90pt_slash","nostroke90pt_plus","nostroke90pt_minus","nostroke90pt_x","nostroke90pt_space"],jsonIds:[],soundIds:[],unpackedIds:[]},easter:{urls:{png:"@%n-f98a7eff44.png",json:"@%n-9a9136351d.json"},jsons:{letter_rules_json:"@jsons/abc_tournament_help-eeeb458c8a.json",mission_window_json:"@jsons/mission_window-c3b37f2b62.json",plist:"@%n-f98a7eff44.plist",
atlas:"@%n-f98a7eff44.atlas"},frames:{letter_mission_icon:"#%n-letter_mission_icon.png",menu_bar_item:"#%n-menu_bar_item.png",mission_star0_png:"#%n-mission_star_0.png",mission_star1_png:"#%n-mission_star_1.png",decor_window_top:"#%n-decor_window_top.png",decor_window_bottom:"#%n-decor_window_bottom.png",decor_progress:"#%n-decor_progress.png"}},episode_0:{urls:{json:"~%n/all/%n-0a14d46304.json"},jsons:{levels:"~%n/all/jsons/0-d8d42808d6.json"},episodeNo:0,levelsAmount:15,hard:[11],tricky:[],language:"en"},episode_0_de:{urls:{json:"~%n/all/%n-edbecd7cfa.json"},jsons:{levels:"~%n/all/jsons/0-8eb3ebaad5.json"},episodeNo:0,levelsAmount:15,hard:[10,13],tricky:[],language:"de"},episode_0_es:{urls:{json:"~%n/all/%n-a1b902b4c3.json"},jsons:{levels:"~%n/all/jsons/0-55c10af77b.json"},episodeNo:0,levelsAmount:15,hard:[7,14],tricky:[],language:"es"},episode_0_fr:{urls:{json:"~%n/all/%n-a980978cf1.json"},jsons:{levels:"~%n/all/jsons/0-c15311b431.json"},episodeNo:0,levelsAmount:15,hard:[11,14],
tricky:[],language:"fr"},episode_0_it:{urls:{json:"~%n/all/%n-ef5e106446.json"},jsons:{levels:"~%n/all/jsons/0-bdd3f4d268.json"},episodeNo:0,levelsAmount:15,hard:[3,12],tricky:[],language:"it"},episode_0_ja:{urls:{json:"~%n/all/%n-f9fd9548b0.json"},jsons:{levels:"~%n/all/jsons/0-0bb0594bdb.json"},episodeNo:0,levelsAmount:15,hard:[4,12],tricky:[],language:"ja"},episode_0_ko:{urls:{json:"~%n/all/%n-7f02661fb5.json"},jsons:{levels:"~%n/all/jsons/0-ed5251f84e.json"},episodeNo:0,levelsAmount:15,hard:[11,12],tricky:[],language:"ko"},episode_0_nl:{urls:{json:"~%n/all/%n-80add250d2.json"},jsons:{levels:"~%n/all/jsons/0-e5a6846ea0.json"},episodeNo:0,levelsAmount:15,hard:[0,11],tricky:[],language:"nl"},episode_0_pt:{urls:{json:"~%n/all/%n-991830f057.json"},jsons:{levels:"~%n/all/jsons/0-789f8698bf.json"},episodeNo:0,levelsAmount:15,hard:[4,6],tricky:[],language:"pt"},episode_0_ru:{urls:{json:"~%n/all/%n-cf7ce830e0.json"},jsons:{levels:"~%n/all/jsons/0-1738af4052.json"},episodeNo:0,
levelsAmount:15,hard:[11,14],tricky:[],language:"ru"},episode_1:{urls:{json:"~%n/all/%n-4ffeda1eea.json"},jsons:{levels:"~%n/all/jsons/1-94092d52a4.json"},episodeNo:1,levelsAmount:15,hard:[12],tricky:[],language:"en"},episode_10:{urls:{json:"~%n/all/%n-c3dde44b5c.json"},jsons:{levels:"~%n/all/jsons/10-d019e31585.json"},episodeNo:10,levelsAmount:15,hard:[6],tricky:[0,9],language:"en"},episode_100:{urls:{json:"~%n/all/%n-3377b8d78f.json"},jsons:{levels:"~%n/all/jsons/100-e5bd6a2dec.json"},episodeNo:100,levelsAmount:15,hard:[2,3],tricky:[6,12],language:"en"},episode_100_de:{urls:{json:"~%n/all/%n-44f437aa77.json"},jsons:{levels:"~%n/all/jsons/100-90629c7336.json"},episodeNo:100,levelsAmount:15,hard:[6,10],tricky:[1,13],language:"de"},episode_100_es:{urls:{json:"~%n/all/%n-c2507b29be.json"},jsons:{levels:"~%n/all/jsons/100-b93ca49b83.json"},episodeNo:100,levelsAmount:15,hard:[4,9],tricky:[1,11],language:"es"},episode_100_fr:{urls:{json:"~%n/all/%n-9224585d0c.json"},jsons:{
levels:"~%n/all/jsons/100-c72c8da24f.json"},episodeNo:100,levelsAmount:15,hard:[6,7],tricky:[1,11],language:"fr"},episode_100_it:{urls:{json:"~%n/all/%n-fd583a81a9.json"},jsons:{levels:"~%n/all/jsons/100-319cc47c05.json"},episodeNo:100,levelsAmount:15,hard:[3,9],tricky:[0,7],language:"it"},episode_100_ja:{urls:{json:"~%n/all/%n-4bd181019e.json"},jsons:{levels:"~%n/all/jsons/100-9653d8e824.json"},episodeNo:100,levelsAmount:15,hard:[1,10],tricky:[6,14],language:"ja"},episode_100_nl:{urls:{json:"~%n/all/%n-43299c24c9.json"},jsons:{levels:"~%n/all/jsons/100-a868f0667b.json"},episodeNo:100,levelsAmount:15,hard:[0,14],tricky:[4,11],language:"nl"},episode_100_ru:{urls:{json:"~%n/all/%n-450307c689.json"},jsons:{levels:"~%n/all/jsons/100-41e00794bf.json"},episodeNo:100,levelsAmount:15,hard:[3,8],tricky:[1,12],language:"ru"},episode_101:{urls:{json:"~%n/all/%n-5f88f7915d.json"},jsons:{levels:"~%n/all/jsons/101-a24c9006e7.json"},episodeNo:101,levelsAmount:15,hard:[2,4],tricky:[8,14],language:"en"
},episode_101_de:{urls:{json:"~%n/all/%n-64ab8fdbda.json"},jsons:{levels:"~%n/all/jsons/101-0ced876539.json"},episodeNo:101,levelsAmount:15,hard:[3,14],tricky:[0,8],language:"de"},episode_101_es:{urls:{json:"~%n/all/%n-e50e6ed8dd.json"},jsons:{levels:"~%n/all/jsons/101-62ef14f893.json"},episodeNo:101,levelsAmount:15,hard:[4,14],tricky:[6,12],language:"es"},episode_101_fr:{urls:{json:"~%n/all/%n-b0088a3ce0.json"},jsons:{levels:"~%n/all/jsons/101-09a05d7152.json"},episodeNo:101,levelsAmount:15,hard:[0,9],tricky:[4,13],language:"fr"},episode_101_it:{urls:{json:"~%n/all/%n-abb7bdad0f.json"},jsons:{levels:"~%n/all/jsons/101-4271fbbdfe.json"},episodeNo:101,levelsAmount:15,hard:[1,5],tricky:[8,13],language:"it"},episode_101_ja:{urls:{json:"~%n/all/%n-83962b4160.json"},jsons:{levels:"~%n/all/jsons/101-59ec605f15.json"},episodeNo:101,levelsAmount:15,hard:[1,8],tricky:[4,12],language:"ja"},episode_101_nl:{urls:{json:"~%n/all/%n-840dc34c62.json"},jsons:{levels:"~%n/all/jsons/101-fdb8677e5d.json"
},episodeNo:101,levelsAmount:15,hard:[0,12],tricky:[2,7],language:"nl"},episode_101_ru:{urls:{json:"~%n/all/%n-c26b9d4413.json"},jsons:{levels:"~%n/all/jsons/101-59c5a1e0e1.json"},episodeNo:101,levelsAmount:15,hard:[5,6],tricky:[2,13],language:"ru"},episode_102:{urls:{json:"~%n/all/%n-42bc143e6d.json"},jsons:{levels:"~%n/all/jsons/102-8ec7f87e26.json"},episodeNo:102,levelsAmount:15,hard:[0,9],tricky:[3,11],language:"en"},episode_102_de:{urls:{json:"~%n/all/%n-42afdd17a4.json"},jsons:{levels:"~%n/all/jsons/102-6949402b59.json"},episodeNo:102,levelsAmount:15,hard:[8,12],tricky:[1,10],language:"de"},episode_102_es:{urls:{json:"~%n/all/%n-8d74d2cb78.json"},jsons:{levels:"~%n/all/jsons/102-0a0a1d4b03.json"},episodeNo:102,levelsAmount:15,hard:[6,13],tricky:[0,9],language:"es"},episode_102_fr:{urls:{json:"~%n/all/%n-fcdf8fd44e.json"},jsons:{levels:"~%n/all/jsons/102-0935b37a6c.json"},episodeNo:102,levelsAmount:15,hard:[5,11],tricky:[0,7],language:"fr"},episode_102_it:{urls:{
json:"~%n/all/%n-841da8e342.json"},jsons:{levels:"~%n/all/jsons/102-81afd331ae.json"},episodeNo:102,levelsAmount:15,hard:[0,13],tricky:[5,11],language:"it"},episode_102_ja:{urls:{json:"~%n/all/%n-8e6ae55b54.json"},jsons:{levels:"~%n/all/jsons/102-6938485f82.json"},episodeNo:102,levelsAmount:15,hard:[0,9],tricky:[5,14],language:"ja"},episode_102_nl:{urls:{json:"~%n/all/%n-fc9766572e.json"},jsons:{levels:"~%n/all/jsons/102-2c76400aa8.json"},episodeNo:102,levelsAmount:15,hard:[1,7],tricky:[5,13],language:"nl"},episode_102_ru:{urls:{json:"~%n/all/%n-4dcb6d1eb4.json"},jsons:{levels:"~%n/all/jsons/102-1c45cfc3a6.json"},episodeNo:102,levelsAmount:15,hard:[2,8],tricky:[0,10],language:"ru"},episode_103:{urls:{json:"~%n/all/%n-34e0556113.json"},jsons:{levels:"~%n/all/jsons/103-f9c351c0df.json"},episodeNo:103,levelsAmount:15,hard:[0,12],tricky:[5,14],language:"en"},episode_103_de:{urls:{json:"~%n/all/%n-49f8aaae8b.json"},jsons:{levels:"~%n/all/jsons/103-3e3e8677a5.json"},episodeNo:103,
levelsAmount:15,hard:[7,14],tricky:[3,12],language:"de"},episode_103_es:{urls:{json:"~%n/all/%n-ddfbf87ccf.json"},jsons:{levels:"~%n/all/jsons/103-c38ca3e758.json"},episodeNo:103,levelsAmount:15,hard:[1,10],tricky:[4,13],language:"es"},episode_103_fr:{urls:{json:"~%n/all/%n-d420686e62.json"},jsons:{levels:"~%n/all/jsons/103-388a70c132.json"},episodeNo:103,levelsAmount:15,hard:[3,12],tricky:[1,10],language:"fr"},episode_103_it:{urls:{json:"~%n/all/%n-eca0c69ff1.json"},jsons:{levels:"~%n/all/jsons/103-1179948b6e.json"},episodeNo:103,levelsAmount:15,hard:[0,8],tricky:[3,11],language:"it"},episode_103_ja:{urls:{json:"~%n/all/%n-a44e91f529.json"},jsons:{levels:"~%n/all/jsons/103-cc0ca28f16.json"},episodeNo:103,levelsAmount:15,hard:[2,10],tricky:[0,12],language:"ja"},episode_103_nl:{urls:{json:"~%n/all/%n-bd748a6e47.json"},jsons:{levels:"~%n/all/jsons/103-68ad59efa6.json"},episodeNo:103,levelsAmount:15,hard:[1,13],tricky:[6,11],language:"nl"},episode_103_ru:{urls:{
json:"~%n/all/%n-4edca08ff6.json"},jsons:{levels:"~%n/all/jsons/103-c8711fe4b7.json"},episodeNo:103,levelsAmount:15,hard:[0,9],tricky:[4,13],language:"ru"},episode_104:{urls:{json:"~%n/all/%n-3b01b5b431.json"},jsons:{levels:"~%n/all/jsons/104-35106a20a1.json"},episodeNo:104,levelsAmount:15,hard:[9,13],tricky:[0,6],language:"en"},episode_104_de:{urls:{json:"~%n/all/%n-dace176e85.json"},jsons:{levels:"~%n/all/jsons/104-b3c01eb220.json"},episodeNo:104,levelsAmount:15,hard:[5,7],tricky:[0,11],language:"de"},episode_104_es:{urls:{json:"~%n/all/%n-12e09e8205.json"},jsons:{levels:"~%n/all/jsons/104-3aaff76743.json"},episodeNo:104,levelsAmount:15,hard:[10],tricky:[0,5],language:"es"},episode_104_fr:{urls:{json:"~%n/all/%n-8608097d19.json"},jsons:{levels:"~%n/all/jsons/104-6127af3c97.json"},episodeNo:104,levelsAmount:15,hard:[7,11],tricky:[3,14],language:"fr"},episode_104_it:{urls:{json:"~%n/all/%n-ce651ee5d3.json"},jsons:{levels:"~%n/all/jsons/104-dc50063c46.json"},episodeNo:104,
levelsAmount:15,hard:[0,8],tricky:[5,14],language:"it"},episode_104_ja:{urls:{json:"~%n/all/%n-92a3f84626.json"},jsons:{levels:"~%n/all/jsons/104-642e7ba6c5.json"},episodeNo:104,levelsAmount:15,hard:[1,11],tricky:[4,13],language:"ja"},episode_104_nl:{urls:{json:"~%n/all/%n-bc0355eb23.json"},jsons:{levels:"~%n/all/jsons/104-849d6a05e4.json"},episodeNo:104,levelsAmount:15,hard:[3,8],tricky:[1,11],language:"nl"},episode_104_ru:{urls:{json:"~%n/all/%n-b48be3836b.json"},jsons:{levels:"~%n/all/jsons/104-e70eb40a6a.json"},episodeNo:104,levelsAmount:15,hard:[5,9],tricky:[3,14],language:"ru"},episode_105:{urls:{json:"~%n/all/%n-cd2b1725bb.json"},jsons:{levels:"~%n/all/jsons/105-5f43b23cc8.json"},episodeNo:105,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"en"},episode_105_de:{urls:{json:"~%n/all/%n-4c8ead1dda.json"},jsons:{levels:"~%n/all/jsons/105-880b666191.json"},episodeNo:105,levelsAmount:15,hard:[4,13],tricky:[6,11],language:"de"},episode_105_es:{urls:{json:"~%n/all/%n-46702daf64.json"
},jsons:{levels:"~%n/all/jsons/105-d51b24b5c9.json"},episodeNo:105,levelsAmount:15,hard:[4],tricky:[2,12],language:"es"},episode_105_fr:{urls:{json:"~%n/all/%n-b4dd6c5dfa.json"},jsons:{levels:"~%n/all/jsons/105-3f1dc39203.json"},episodeNo:105,levelsAmount:15,hard:[8,13],tricky:[0,5],language:"fr"},episode_105_it:{urls:{json:"~%n/all/%n-99c8ca5c1c.json"},jsons:{levels:"~%n/all/jsons/105-141b661928.json"},episodeNo:105,levelsAmount:15,hard:[4,6],tricky:[0,11],language:"it"},episode_105_ja:{urls:{json:"~%n/all/%n-7e4d1e4d8c.json"},jsons:{levels:"~%n/all/jsons/105-cefb95ac62.json"},episodeNo:105,levelsAmount:15,hard:[2,4],tricky:[0,10],language:"ja"},episode_105_nl:{urls:{json:"~%n/all/%n-bda48d7bdf.json"},jsons:{levels:"~%n/all/jsons/105-95dc149a9b.json"},episodeNo:105,levelsAmount:15,hard:[7,13],tricky:[3,11],language:"nl"},episode_105_ru:{urls:{json:"~%n/all/%n-d8649868c5.json"},jsons:{levels:"~%n/all/jsons/105-60daf36ce1.json"},episodeNo:105,levelsAmount:15,hard:[13,14],tricky:[1,7],
language:"ru"},episode_106:{urls:{json:"~%n/all/%n-6385f94033.json"},jsons:{levels:"~%n/all/jsons/106-952f639506.json"},episodeNo:106,levelsAmount:15,hard:[7],tricky:[5,14],language:"en"},episode_106_de:{urls:{json:"~%n/all/%n-5649ca4361.json"},jsons:{levels:"~%n/all/jsons/106-23b5627f9d.json"},episodeNo:106,levelsAmount:15,hard:[2,7],tricky:[0,11],language:"de"},episode_106_es:{urls:{json:"~%n/all/%n-336718cff3.json"},jsons:{levels:"~%n/all/jsons/106-7de997b25b.json"},episodeNo:106,levelsAmount:15,hard:[2,3],tricky:[7,14],language:"es"},episode_106_fr:{urls:{json:"~%n/all/%n-fb5c07fcc5.json"},jsons:{levels:"~%n/all/jsons/106-95636d4153.json"},episodeNo:106,levelsAmount:15,hard:[0,13],tricky:[5,10],language:"fr"},episode_106_it:{urls:{json:"~%n/all/%n-7ad0af8f49.json"},jsons:{levels:"~%n/all/jsons/106-47ce6649d3.json"},episodeNo:106,levelsAmount:15,hard:[0,4],tricky:[7,12],language:"it"},episode_106_ja:{urls:{json:"~%n/all/%n-64745d0bec.json"},jsons:{
levels:"~%n/all/jsons/106-2f965f3c1b.json"},episodeNo:106,levelsAmount:15,hard:[3,4],tricky:[6,12],language:"ja"},episode_106_nl:{urls:{json:"~%n/all/%n-b7daff2a45.json"},jsons:{levels:"~%n/all/jsons/106-d68c95c95c.json"},episodeNo:106,levelsAmount:15,hard:[1,11],tricky:[3,9],language:"nl"},episode_106_ru:{urls:{json:"~%n/all/%n-e2cf961c29.json"},jsons:{levels:"~%n/all/jsons/106-81d5c0dd49.json"},episodeNo:106,levelsAmount:15,hard:[5,12],tricky:[3,14],language:"ru"},episode_107:{urls:{json:"~%n/all/%n-d91dc38401.json"},jsons:{levels:"~%n/all/jsons/107-4c09850de5.json"},episodeNo:107,levelsAmount:15,hard:[4,5],tricky:[2,12],language:"en"},episode_107_de:{urls:{json:"~%n/all/%n-1de05d66fe.json"},jsons:{levels:"~%n/all/jsons/107-939c21768b.json"},episodeNo:107,levelsAmount:15,hard:[1,5],tricky:[7,12],language:"de"},episode_107_es:{urls:{json:"~%n/all/%n-44fadb98b4.json"},jsons:{levels:"~%n/all/jsons/107-3ed8b78935.json"},episodeNo:107,levelsAmount:15,hard:[2,12],tricky:[0,8],language:"es"
},episode_107_fr:{urls:{json:"~%n/all/%n-8b3d48b15a.json"},jsons:{levels:"~%n/all/jsons/107-58b9531898.json"},episodeNo:107,levelsAmount:15,hard:[4,8],tricky:[0,11],language:"fr"},episode_107_it:{urls:{json:"~%n/all/%n-65537aee44.json"},jsons:{levels:"~%n/all/jsons/107-6b76797f7d.json"},episodeNo:107,levelsAmount:15,hard:[3,13],tricky:[7,11],language:"it"},episode_107_ja:{urls:{json:"~%n/all/%n-8174c7c078.json"},jsons:{levels:"~%n/all/jsons/107-51496c3237.json"},episodeNo:107,levelsAmount:15,hard:[9,12],tricky:[3,14],language:"ja"},episode_107_nl:{urls:{json:"~%n/all/%n-3bdfebef9e.json"},jsons:{levels:"~%n/all/jsons/107-3f980bc023.json"},episodeNo:107,levelsAmount:15,hard:[7,8],tricky:[2,12],language:"nl"},episode_107_ru:{urls:{json:"~%n/all/%n-055ed3815f.json"},jsons:{levels:"~%n/all/jsons/107-52ae38c049.json"},episodeNo:107,levelsAmount:15,hard:[1,11],tricky:[3,9],language:"ru"},episode_108:{urls:{json:"~%n/all/%n-eb187eeb76.json"},jsons:{levels:"~%n/all/jsons/108-c82564281d.json"},
episodeNo:108,levelsAmount:15,hard:[1,6],tricky:[8,14],language:"en"},episode_108_de:{urls:{json:"~%n/all/%n-d939ff58bd.json"},jsons:{levels:"~%n/all/jsons/108-a4a10a8232.json"},episodeNo:108,levelsAmount:15,hard:[2,9],tricky:[7,14],language:"de"},episode_108_es:{urls:{json:"~%n/all/%n-c9daccd03a.json"},jsons:{levels:"~%n/all/jsons/108-f6ace0fff0.json"},episodeNo:108,levelsAmount:15,hard:[2,5],tricky:[8,14],language:"es"},episode_108_fr:{urls:{json:"~%n/all/%n-ef7874781d.json"},jsons:{levels:"~%n/all/jsons/108-92efef2754.json"},episodeNo:108,levelsAmount:15,hard:[0,4],tricky:[6,12],language:"fr"},episode_108_it:{urls:{json:"~%n/all/%n-6fc0336ccb.json"},jsons:{levels:"~%n/all/jsons/108-9cf0244d7a.json"},episodeNo:108,levelsAmount:15,hard:[6,13],tricky:[1,10],language:"it"},episode_108_ja:{urls:{json:"~%n/all/%n-3e380cb92e.json"},jsons:{levels:"~%n/all/jsons/108-be5f72bc5a.json"},episodeNo:108,levelsAmount:15,hard:[1,7],tricky:[3,11],language:"ja"},episode_108_nl:{urls:{
json:"~%n/all/%n-05712853f6.json"},jsons:{levels:"~%n/all/jsons/108-7998e78db3.json"},episodeNo:108,levelsAmount:15,hard:[3,12],tricky:[0,7],language:"nl"},episode_108_ru:{urls:{json:"~%n/all/%n-0a6780efcf.json"},jsons:{levels:"~%n/all/jsons/108-dd09c1c618.json"},episodeNo:108,levelsAmount:15,hard:[6,13],tricky:[1,10],language:"ru"},episode_109:{urls:{json:"~%n/all/%n-a796623517.json"},jsons:{levels:"~%n/all/jsons/109-1ac22fb4f9.json"},episodeNo:109,levelsAmount:15,hard:[2,7],tricky:[0,11],language:"en"},episode_109_de:{urls:{json:"~%n/all/%n-1bc98d34de.json"},jsons:{levels:"~%n/all/jsons/109-8820542d33.json"},episodeNo:109,levelsAmount:15,hard:[4,7],tricky:[1,13],language:"de"},episode_109_es:{urls:{json:"~%n/all/%n-f407bffc70.json"},jsons:{levels:"~%n/all/jsons/109-d3fbfc3217.json"},episodeNo:109,levelsAmount:15,hard:[0,2],tricky:[4,10],language:"es"},episode_109_fr:{urls:{json:"~%n/all/%n-c34cc8274f.json"},jsons:{levels:"~%n/all/jsons/109-cda5c165b1.json"},episodeNo:109,
levelsAmount:15,hard:[2],tricky:[8,14],language:"fr"},episode_109_it:{urls:{json:"~%n/all/%n-4dc36eb6f3.json"},jsons:{levels:"~%n/all/jsons/109-219c7d4bec.json"},episodeNo:109,levelsAmount:15,hard:[1,10],tricky:[5,14],language:"it"},episode_109_ja:{urls:{json:"~%n/all/%n-75f45ca9b1.json"},jsons:{levels:"~%n/all/jsons/109-2372c87829.json"},episodeNo:109,levelsAmount:15,hard:[6,11],tricky:[2,14],language:"ja"},episode_109_nl:{urls:{json:"~%n/all/%n-b8cb78fb16.json"},jsons:{levels:"~%n/all/jsons/109-b28039f905.json"},episodeNo:109,levelsAmount:15,hard:[4,5],tricky:[2,12],language:"nl"},episode_109_ru:{urls:{json:"~%n/all/%n-0f57207d53.json"},jsons:{levels:"~%n/all/jsons/109-dea5c1160b.json"},episodeNo:109,levelsAmount:15,hard:[4,12],tricky:[0,7],language:"ru"},episode_10_de:{urls:{json:"~%n/all/%n-532de2e8bb.json"},jsons:{levels:"~%n/all/jsons/10-accf212d29.json"},episodeNo:10,levelsAmount:15,hard:[7,14],tricky:[0,9],language:"de"},episode_10_es:{urls:{json:"~%n/all/%n-e2050154aa.json"},
jsons:{levels:"~%n/all/jsons/10-15a3257c67.json"},episodeNo:10,levelsAmount:15,hard:[5,9],tricky:[3,14],language:"es"},episode_10_fr:{urls:{json:"~%n/all/%n-24e34d36b5.json"},jsons:{levels:"~%n/all/jsons/10-31ad657073.json"},episodeNo:10,levelsAmount:15,hard:[2],tricky:[7,14],language:"fr"},episode_10_it:{urls:{json:"~%n/all/%n-e9e3152ff1.json"},jsons:{levels:"~%n/all/jsons/10-530459fa83.json"},episodeNo:10,levelsAmount:15,hard:[0],tricky:[5,12],language:"it"},episode_10_ja:{urls:{json:"~%n/all/%n-bcf4d4341d.json"},jsons:{levels:"~%n/all/jsons/10-50fcf812c4.json"},episodeNo:10,levelsAmount:15,hard:[0,2],tricky:[6,13],language:"ja"},episode_10_ko:{urls:{json:"~%n/all/%n-704f0ad35e.json"},jsons:{levels:"~%n/all/jsons/10-255223002f.json"},episodeNo:10,levelsAmount:15,hard:[5,6],tricky:[1,11],language:"ko"},episode_10_nl:{urls:{json:"~%n/all/%n-fcdaa6ccdf.json"},jsons:{levels:"~%n/all/jsons/10-c15ca51787.json"},episodeNo:10,levelsAmount:15,hard:[0,14],tricky:[3,9],language:"nl"},
episode_10_pt:{urls:{json:"~%n/all/%n-e7332c2597.json"},jsons:{levels:"~%n/all/jsons/10-564bf21835.json"},episodeNo:10,levelsAmount:15,hard:[1,14],tricky:[6,12],language:"pt"},episode_10_ru:{urls:{json:"~%n/all/%n-3a0e52b7c3.json"},jsons:{levels:"~%n/all/jsons/10-cebb2e1a36.json"},episodeNo:10,levelsAmount:15,hard:[7],tricky:[4,14],language:"ru"},episode_11:{urls:{json:"~%n/all/%n-eb70c45456.json"},jsons:{levels:"~%n/all/jsons/11-49c13fc41e.json"},episodeNo:11,levelsAmount:15,hard:[9,12],tricky:[1,7],language:"en"},episode_110:{urls:{json:"~%n/all/%n-70ba475457.json"},jsons:{levels:"~%n/all/jsons/110-5d3a9bff1a.json"},episodeNo:110,levelsAmount:15,hard:[0,1],tricky:[6,13],language:"en"},episode_110_de:{urls:{json:"~%n/all/%n-b09688805c.json"},jsons:{levels:"~%n/all/jsons/110-da46639c90.json"},episodeNo:110,levelsAmount:15,hard:[9],tricky:[3,13],language:"de"},episode_110_es:{urls:{json:"~%n/all/%n-b7b24ce325.json"},jsons:{levels:"~%n/all/jsons/110-19b593eb3f.json"},episodeNo:110,
levelsAmount:15,hard:[1,6],tricky:[4,12],language:"es"},episode_110_fr:{urls:{json:"~%n/all/%n-18a9852155.json"},jsons:{levels:"~%n/all/jsons/110-34919a5329.json"},episodeNo:110,levelsAmount:15,hard:[2,12],tricky:[4,10],language:"fr"},episode_110_it:{urls:{json:"~%n/all/%n-0e31127ed3.json"},jsons:{levels:"~%n/all/jsons/110-651cdc3311.json"},episodeNo:110,levelsAmount:15,hard:[3,12],tricky:[0,8],language:"it"},episode_110_ja:{urls:{json:"~%n/all/%n-88445c74b6.json"},jsons:{levels:"~%n/all/jsons/110-ef052e90d5.json"},episodeNo:110,levelsAmount:15,hard:[3,6],tricky:[0,11],language:"ja"},episode_110_nl:{urls:{json:"~%n/all/%n-51c33eb2c2.json"},jsons:{levels:"~%n/all/jsons/110-22c712d0e5.json"},episodeNo:110,levelsAmount:15,hard:[9,10],tricky:[3,13],language:"nl"},episode_110_ru:{urls:{json:"~%n/all/%n-c6e1b74f50.json"},jsons:{levels:"~%n/all/jsons/110-3457b76af8.json"},episodeNo:110,levelsAmount:15,hard:[4,9],tricky:[1,13],language:"ru"},episode_111:{urls:{json:"~%n/all/%n-1b77338967.json"
},jsons:{levels:"~%n/all/jsons/111-614665eea8.json"},episodeNo:111,levelsAmount:15,hard:[2,14],tricky:[0,9],language:"en"},episode_111_de:{urls:{json:"~%n/all/%n-b942812e1e.json"},jsons:{levels:"~%n/all/jsons/111-06e20c75eb.json"},episodeNo:111,levelsAmount:15,hard:[2,7],tricky:[0,11],language:"de"},episode_111_es:{urls:{json:"~%n/all/%n-393b8a0f5b.json"},jsons:{levels:"~%n/all/jsons/111-23c4f7bb55.json"},episodeNo:111,levelsAmount:15,hard:[1,6],tricky:[10,14],language:"es"},episode_111_fr:{urls:{json:"~%n/all/%n-013d0e88a9.json"},jsons:{levels:"~%n/all/jsons/111-2d1c02c1d9.json"},episodeNo:111,levelsAmount:15,hard:[4],tricky:[6,13],language:"fr"},episode_111_it:{urls:{json:"~%n/all/%n-c1da26d8d1.json"},jsons:{levels:"~%n/all/jsons/111-553295a877.json"},episodeNo:111,levelsAmount:15,hard:[2,4],tricky:[8,13],language:"it"},episode_111_ja:{urls:{json:"~%n/all/%n-9f03366133.json"},jsons:{levels:"~%n/all/jsons/111-9aa7724c45.json"},episodeNo:111,levelsAmount:15,hard:[2,5],tricky:[7,12],
language:"ja"},episode_111_nl:{urls:{json:"~%n/all/%n-5fd956a52e.json"},jsons:{levels:"~%n/all/jsons/111-e43b769e64.json"},episodeNo:111,levelsAmount:15,hard:[4,9],tricky:[0,11],language:"nl"},episode_111_ru:{urls:{json:"~%n/all/%n-ee006c6c7f.json"},jsons:{levels:"~%n/all/jsons/111-d8770d1a16.json"},episodeNo:111,levelsAmount:15,hard:[2,3],tricky:[7,14],language:"ru"},episode_112:{urls:{json:"~%n/all/%n-3dcb92bcc8.json"},jsons:{levels:"~%n/all/jsons/112-2bdce94933.json"},episodeNo:112,levelsAmount:15,hard:[2,9],tricky:[4,12],language:"en"},episode_112_de:{urls:{json:"~%n/all/%n-4fd189ed49.json"},jsons:{levels:"~%n/all/jsons/112-f9982dbc98.json"},episodeNo:112,levelsAmount:15,hard:[3,7],tricky:[5,13],language:"de"},episode_112_es:{urls:{json:"~%n/all/%n-bcee5dc84f.json"},jsons:{levels:"~%n/all/jsons/112-b6efca4f4d.json"},episodeNo:112,levelsAmount:15,hard:[1,14],tricky:[4,10],language:"es"},episode_112_fr:{urls:{json:"~%n/all/%n-3a459523da.json"},jsons:{
levels:"~%n/all/jsons/112-eb425b38ab.json"},episodeNo:112,levelsAmount:15,hard:[7,14],tricky:[0,5],language:"fr"},episode_112_it:{urls:{json:"~%n/all/%n-ad029b4256.json"},jsons:{levels:"~%n/all/jsons/112-9546997572.json"},episodeNo:112,levelsAmount:15,hard:[0,3],tricky:[5,11],language:"it"},episode_112_ja:{urls:{json:"~%n/all/%n-1b1a9f4baf.json"},jsons:{levels:"~%n/all/jsons/112-c278b48407.json"},episodeNo:112,levelsAmount:15,hard:[1,10],tricky:[7,14],language:"ja"},episode_112_nl:{urls:{json:"~%n/all/%n-7dd14ce606.json"},jsons:{levels:"~%n/all/jsons/112-2421f78492.json"},episodeNo:112,levelsAmount:15,hard:[0,6],tricky:[8,13],language:"nl"},episode_112_ru:{urls:{json:"~%n/all/%n-3e3e339f18.json"},jsons:{levels:"~%n/all/jsons/112-961993ebd5.json"},episodeNo:112,levelsAmount:15,hard:[4,8],tricky:[0,11],language:"ru"},episode_113:{urls:{json:"~%n/all/%n-b0455d151b.json"},jsons:{levels:"~%n/all/jsons/113-e67889b14b.json"},episodeNo:113,levelsAmount:15,hard:[0,4],tricky:[9,14],language:"en"
},episode_113_de:{urls:{json:"~%n/all/%n-3b05a439d1.json"},jsons:{levels:"~%n/all/jsons/113-80f264b4a0.json"},episodeNo:113,levelsAmount:15,hard:[6,7],tricky:[0,10],language:"de"},episode_113_es:{urls:{json:"~%n/all/%n-f15648414a.json"},jsons:{levels:"~%n/all/jsons/113-ff4a8d6282.json"},episodeNo:113,levelsAmount:15,hard:[4,11],tricky:[2,13],language:"es"},episode_113_fr:{urls:{json:"~%n/all/%n-2fc13e1e06.json"},jsons:{levels:"~%n/all/jsons/113-3e2877db82.json"},episodeNo:113,levelsAmount:15,hard:[1,9],tricky:[5,13],language:"fr"},episode_113_it:{urls:{json:"~%n/all/%n-f923c225a3.json"},jsons:{levels:"~%n/all/jsons/113-3e36880295.json"},episodeNo:113,levelsAmount:15,hard:[6,9],tricky:[1,12],language:"it"},episode_113_ja:{urls:{json:"~%n/all/%n-f42572546e.json"},jsons:{levels:"~%n/all/jsons/113-fe5de152f4.json"},episodeNo:113,levelsAmount:15,hard:[0,3],tricky:[6,12],language:"ja"},episode_113_nl:{urls:{json:"~%n/all/%n-8928bde11a.json"},jsons:{levels:"~%n/all/jsons/113-85b0181b0a.json"
},episodeNo:113,levelsAmount:15,hard:[9],tricky:[0,7],language:"nl"},episode_113_ru:{urls:{json:"~%n/all/%n-9530888de1.json"},jsons:{levels:"~%n/all/jsons/113-87f539a547.json"},episodeNo:113,levelsAmount:15,hard:[2,4],tricky:[8,13],language:"ru"},episode_114:{urls:{json:"~%n/all/%n-8a50cea3ae.json"},jsons:{levels:"~%n/all/jsons/114-3a6dcb940f.json"},episodeNo:114,levelsAmount:15,hard:[6,12],tricky:[1,9],language:"en"},episode_114_de:{urls:{json:"~%n/all/%n-c01171d9d0.json"},jsons:{levels:"~%n/all/jsons/114-d449d7741b.json"},episodeNo:114,levelsAmount:15,hard:[7,12],tricky:[1,9],language:"de"},episode_114_es:{urls:{json:"~%n/all/%n-ee728154e1.json"},jsons:{levels:"~%n/all/jsons/114-a4a55c4540.json"},episodeNo:114,levelsAmount:15,hard:[0,6],tricky:[2,10],language:"es"},episode_114_fr:{urls:{json:"~%n/all/%n-c95d030784.json"},jsons:{levels:"~%n/all/jsons/114-1a55cca27b.json"},episodeNo:114,levelsAmount:15,hard:[3,6],tricky:[0,11],language:"fr"},episode_114_it:{urls:{
json:"~%n/all/%n-318d5311bb.json"},jsons:{levels:"~%n/all/jsons/114-981e959559.json"},episodeNo:114,levelsAmount:15,hard:[1,5],tricky:[9,14],language:"it"},episode_114_ja:{urls:{json:"~%n/all/%n-d12cfd2c3b.json"},jsons:{levels:"~%n/all/jsons/114-11b41646e8.json"},episodeNo:114,levelsAmount:15,hard:[0,10],tricky:[4,13],language:"ja"},episode_114_nl:{urls:{json:"~%n/all/%n-c3769c5adc.json"},jsons:{levels:"~%n/all/jsons/114-b10413d0a1.json"},episodeNo:114,levelsAmount:15,hard:[3,10],tricky:[1,12],language:"nl"},episode_114_ru:{urls:{json:"~%n/all/%n-b8c191afe4.json"},jsons:{levels:"~%n/all/jsons/114-1ce8f1d15f.json"},episodeNo:114,levelsAmount:15,hard:[6,12],tricky:[0,8],language:"ru"},episode_115:{urls:{json:"~%n/all/%n-39484aac97.json"},jsons:{levels:"~%n/all/jsons/115-0fb8bfb0ec.json"},episodeNo:115,levelsAmount:15,hard:[0,6],tricky:[4,13],language:"en"},episode_115_de:{urls:{json:"~%n/all/%n-2e0ad49bdc.json"},jsons:{levels:"~%n/all/jsons/115-d33bca8e55.json"},episodeNo:115,
levelsAmount:15,hard:[5,13],tricky:[3,11],language:"de"},episode_115_es:{urls:{json:"~%n/all/%n-ee381ebb0b.json"},jsons:{levels:"~%n/all/jsons/115-6aed6fd325.json"},episodeNo:115,levelsAmount:15,hard:[6,10],tricky:[2,13],language:"es"},episode_115_fr:{urls:{json:"~%n/all/%n-8770bc751a.json"},jsons:{levels:"~%n/all/jsons/115-5c75cb0279.json"},episodeNo:115,levelsAmount:15,hard:[0,7],tricky:[3,12],language:"fr"},episode_115_it:{urls:{json:"~%n/all/%n-182094e50c.json"},jsons:{levels:"~%n/all/jsons/115-58b75f7119.json"},episodeNo:115,levelsAmount:15,hard:[0],tricky:[3,11],language:"it"},episode_115_ja:{urls:{json:"~%n/all/%n-725ae118e3.json"},jsons:{levels:"~%n/all/jsons/115-a0feb627aa.json"},episodeNo:115,levelsAmount:15,hard:[0,6],tricky:[2,10],language:"ja"},episode_115_nl:{urls:{json:"~%n/all/%n-a55c9d3343.json"},jsons:{levels:"~%n/all/jsons/115-1979c26333.json"},episodeNo:115,levelsAmount:15,hard:[4,12],tricky:[7,14],language:"nl"},episode_115_ru:{urls:{
json:"~%n/all/%n-92b7d7a626.json"},jsons:{levels:"~%n/all/jsons/115-48af6241ba.json"},episodeNo:115,levelsAmount:15,hard:[0,5],tricky:[3,12],language:"ru"},episode_116:{urls:{json:"~%n/all/%n-8f2bf1d057.json"},jsons:{levels:"~%n/all/jsons/116-ed45a36880.json"},episodeNo:116,levelsAmount:15,hard:[4,12],tricky:[0,8],language:"en"},episode_116_de:{urls:{json:"~%n/all/%n-b7d7dfa6a8.json"},jsons:{levels:"~%n/all/jsons/116-2c17e9e567.json"},episodeNo:116,levelsAmount:15,hard:[7,14],tricky:[1,10],language:"de"},episode_116_es:{urls:{json:"~%n/all/%n-365b98dbdf.json"},jsons:{levels:"~%n/all/jsons/116-0249e7440d.json"},episodeNo:116,levelsAmount:15,hard:[3,12],tricky:[6,14],language:"es"},episode_116_fr:{urls:{json:"~%n/all/%n-62672438d2.json"},jsons:{levels:"~%n/all/jsons/116-7169d471c0.json"},episodeNo:116,levelsAmount:15,hard:[13],tricky:[5,11],language:"fr"},episode_116_it:{urls:{json:"~%n/all/%n-0c4ba80c80.json"},jsons:{levels:"~%n/all/jsons/116-ab937439ed.json"},episodeNo:116,
levelsAmount:15,hard:[4,11],tricky:[2,13],language:"it"},episode_116_ja:{urls:{json:"~%n/all/%n-1b041bc358.json"},jsons:{levels:"~%n/all/jsons/116-622eac426b.json"},episodeNo:116,levelsAmount:15,hard:[5,10],tricky:[2,13],language:"ja"},episode_116_nl:{urls:{json:"~%n/all/%n-e9800ed5d3.json"},jsons:{levels:"~%n/all/jsons/116-488344ec3e.json"},episodeNo:116,levelsAmount:15,hard:[1],tricky:[4,12],language:"nl"},episode_116_ru:{urls:{json:"~%n/all/%n-cf85033b79.json"},jsons:{levels:"~%n/all/jsons/116-1bc0df5855.json"},episodeNo:116,levelsAmount:15,hard:[5,10],tricky:[7,14],language:"ru"},episode_117:{urls:{json:"~%n/all/%n-0651cc5cfb.json"},jsons:{levels:"~%n/all/jsons/117-b543b74fa7.json"},episodeNo:117,levelsAmount:15,hard:[3,13],tricky:[5,10],language:"en"},episode_117_de:{urls:{json:"~%n/all/%n-47dd6bd564.json"},jsons:{levels:"~%n/all/jsons/117-9f8dc18473.json"},episodeNo:117,levelsAmount:15,hard:[4,8],tricky:[2,13],language:"de"},episode_117_es:{urls:{json:"~%n/all/%n-29f0563328.json"
},jsons:{levels:"~%n/all/jsons/117-d45e528d2d.json"},episodeNo:117,levelsAmount:15,hard:[10],tricky:[1,8],language:"es"},episode_117_fr:{urls:{json:"~%n/all/%n-8ea29ee62b.json"},jsons:{levels:"~%n/all/jsons/117-7ddb2dbc71.json"},episodeNo:117,levelsAmount:15,hard:[11,14],tricky:[1,7],language:"fr"},episode_117_it:{urls:{json:"~%n/all/%n-f0d48bc9b7.json"},jsons:{levels:"~%n/all/jsons/117-74ecb39b7c.json"},episodeNo:117,levelsAmount:15,hard:[9,13],tricky:[0,5],language:"it"},episode_117_ja:{urls:{json:"~%n/all/%n-bed6c3feb9.json"},jsons:{levels:"~%n/all/jsons/117-dadb4065fb.json"},episodeNo:117,levelsAmount:15,hard:[0,12],tricky:[6,14],language:"ja"},episode_117_nl:{urls:{json:"~%n/all/%n-237aeeac1d.json"},jsons:{levels:"~%n/all/jsons/117-6fc168c2aa.json"},episodeNo:117,levelsAmount:15,hard:[1,2],tricky:[7,13],language:"nl"},episode_117_ru:{urls:{json:"~%n/all/%n-28f8b07513.json"},jsons:{levels:"~%n/all/jsons/117-2e0a4dac79.json"},episodeNo:117,levelsAmount:15,hard:[0,6],tricky:[3,12],
language:"ru"},episode_118:{urls:{json:"~%n/all/%n-7977ebe411.json"},jsons:{levels:"~%n/all/jsons/118-e534107f63.json"},episodeNo:118,levelsAmount:15,hard:[8,11],tricky:[3,14],language:"en"},episode_118_de:{urls:{json:"~%n/all/%n-13baee97d1.json"},jsons:{levels:"~%n/all/jsons/118-8600c26c7f.json"},episodeNo:118,levelsAmount:15,hard:[5],tricky:[0,9],language:"de"},episode_118_es:{urls:{json:"~%n/all/%n-29dd46ed4c.json"},jsons:{levels:"~%n/all/jsons/118-386d9f5a6e.json"},episodeNo:118,levelsAmount:15,hard:[5,10],tricky:[3,14],language:"es"},episode_118_fr:{urls:{json:"~%n/all/%n-ad8ca4a811.json"},jsons:{levels:"~%n/all/jsons/118-4a14848ed9.json"},episodeNo:118,levelsAmount:15,hard:[7,13],tricky:[2,10],language:"fr"},episode_118_it:{urls:{json:"~%n/all/%n-6df46656b9.json"},jsons:{levels:"~%n/all/jsons/118-bec0472893.json"},episodeNo:118,levelsAmount:15,hard:[3,14],tricky:[5,11],language:"it"},episode_118_ja:{urls:{json:"~%n/all/%n-99bc268f68.json"},jsons:{
levels:"~%n/all/jsons/118-fba29c4a70.json"},episodeNo:118,levelsAmount:15,hard:[3,8],tricky:[1,12],language:"ja"},episode_118_nl:{urls:{json:"~%n/all/%n-9c2c89afe5.json"},jsons:{levels:"~%n/all/jsons/118-596f033b8c.json"},episodeNo:118,levelsAmount:15,hard:[6,7],tricky:[0,10],language:"nl"},episode_118_ru:{urls:{json:"~%n/all/%n-4bd680e217.json"},jsons:{levels:"~%n/all/jsons/118-3b76ab88a1.json"},episodeNo:118,levelsAmount:15,hard:[2,6],tricky:[8,13],language:"ru"},episode_119:{urls:{json:"~%n/all/%n-6f704a25df.json"},jsons:{levels:"~%n/all/jsons/119-40463ca999.json"},episodeNo:119,levelsAmount:15,hard:[2,6],tricky:[4,12],language:"en"},episode_119_de:{urls:{json:"~%n/all/%n-6fa9f910a3.json"},jsons:{levels:"~%n/all/jsons/119-2ddae45b02.json"},episodeNo:119,levelsAmount:15,hard:[0,4],tricky:[7,13],language:"de"},episode_119_es:{urls:{json:"~%n/all/%n-92d6081f0d.json"},jsons:{levels:"~%n/all/jsons/119-9c2d1d0945.json"},episodeNo:119,levelsAmount:15,hard:[4,5],tricky:[1,12],language:"es"
},episode_119_fr:{urls:{json:"~%n/all/%n-312e66fe37.json"},jsons:{levels:"~%n/all/jsons/119-5a31182c21.json"},episodeNo:119,levelsAmount:15,hard:[9,13],tricky:[0,4],language:"fr"},episode_119_it:{urls:{json:"~%n/all/%n-44bfa4f55d.json"},jsons:{levels:"~%n/all/jsons/119-9464fbfe3c.json"},episodeNo:119,levelsAmount:15,hard:[5,9],tricky:[3,14],language:"it"},episode_119_ja:{urls:{json:"~%n/all/%n-efe3b9638d.json"},jsons:{levels:"~%n/all/jsons/119-fc2ff4225f.json"},episodeNo:119,levelsAmount:15,hard:[1,12],tricky:[6,14],language:"ja"},episode_119_nl:{urls:{json:"~%n/all/%n-f63d36ae7a.json"},jsons:{levels:"~%n/all/jsons/119-0415a9dd41.json"},episodeNo:119,levelsAmount:15,hard:[6,7],tricky:[3,13],language:"nl"},episode_119_ru:{urls:{json:"~%n/all/%n-365b2cc477.json"},jsons:{levels:"~%n/all/jsons/119-d982358ecf.json"},episodeNo:119,levelsAmount:15,hard:[4,9],tricky:[0,11],language:"ru"},episode_11_de:{urls:{json:"~%n/all/%n-ecec624718.json"},jsons:{levels:"~%n/all/jsons/11-610f111b7f.json"},
episodeNo:11,levelsAmount:15,hard:[2,3],tricky:[6,12],language:"de"},episode_11_es:{urls:{json:"~%n/all/%n-ce072ea1c3.json"},jsons:{levels:"~%n/all/jsons/11-da2b391ff2.json"},episodeNo:11,levelsAmount:15,hard:[8,13],tricky:[1,5],language:"es"},episode_11_fr:{urls:{json:"~%n/all/%n-fb0b9f3b80.json"},jsons:{levels:"~%n/all/jsons/11-a4c17d4279.json"},episodeNo:11,levelsAmount:15,hard:[8,14],tricky:[0,6],language:"fr"},episode_11_it:{urls:{json:"~%n/all/%n-dd77aadb22.json"},jsons:{levels:"~%n/all/jsons/11-dc7199f317.json"},episodeNo:11,levelsAmount:15,hard:[3,10],tricky:[0,7],language:"it"},episode_11_ja:{urls:{json:"~%n/all/%n-c18501924f.json"},jsons:{levels:"~%n/all/jsons/11-66309b0b8c.json"},episodeNo:11,levelsAmount:15,hard:[3,11],tricky:[6,14],language:"ja"},episode_11_ko:{urls:{json:"~%n/all/%n-da6646891e.json"},jsons:{levels:"~%n/all/jsons/11-25ab4e941d.json"},episodeNo:11,levelsAmount:15,hard:[1,9],tricky:[6,14],language:"ko"},episode_11_nl:{urls:{json:"~%n/all/%n-ace86aebe5.json"
},jsons:{levels:"~%n/all/jsons/11-065c4256d2.json"},episodeNo:11,levelsAmount:15,hard:[6,14],tricky:[2,11],language:"nl"},episode_11_pt:{urls:{json:"~%n/all/%n-c68a6eb4f2.json"},jsons:{levels:"~%n/all/jsons/11-6638d7c5b3.json"},episodeNo:11,levelsAmount:15,hard:[0,9],tricky:[3,11],language:"pt"},episode_11_ru:{urls:{json:"~%n/all/%n-4adbea537a.json"},jsons:{levels:"~%n/all/jsons/11-c8f92bed48.json"},episodeNo:11,levelsAmount:15,hard:[3,10],tricky:[1,12],language:"ru"},episode_12:{urls:{json:"~%n/all/%n-ae0cf4757e.json"},jsons:{levels:"~%n/all/jsons/12-c18c8a3151.json"},episodeNo:12,levelsAmount:15,hard:[1,8],tricky:[6,14],language:"en"},episode_120:{urls:{json:"~%n/all/%n-6ef061516f.json"},jsons:{levels:"~%n/all/jsons/120-8dcad6d1be.json"},episodeNo:120,levelsAmount:15,hard:[5,14],tricky:[3,12],language:"en"},episode_120_de:{urls:{json:"~%n/all/%n-6fc2a078f6.json"},jsons:{levels:"~%n/all/jsons/120-1cc1ca568f.json"},episodeNo:120,levelsAmount:15,hard:[7,14],tricky:[3,12],language:"de"},
episode_120_es:{urls:{json:"~%n/all/%n-b86191175d.json"},jsons:{levels:"~%n/all/jsons/120-8106d614a6.json"},episodeNo:120,levelsAmount:15,hard:[4,5],tricky:[2,13],language:"es"},episode_120_fr:{urls:{json:"~%n/all/%n-cb1623e604.json"},jsons:{levels:"~%n/all/jsons/120-7e23746293.json"},episodeNo:120,levelsAmount:15,hard:[1,13],tricky:[5,10],language:"fr"},episode_120_it:{urls:{json:"~%n/all/%n-4c9b0691b1.json"},jsons:{levels:"~%n/all/jsons/120-9b0ab8e047.json"},episodeNo:120,levelsAmount:15,hard:[3,12],tricky:[1,9],language:"it"},episode_120_ja:{urls:{json:"~%n/all/%n-f9b448657f.json"},jsons:{levels:"~%n/all/jsons/120-c1b764f48e.json"},episodeNo:120,levelsAmount:15,hard:[10,12],tricky:[1,7],language:"ja"},episode_120_nl:{urls:{json:"~%n/all/%n-f490531839.json"},jsons:{levels:"~%n/all/jsons/120-bc6cfa383c.json"},episodeNo:120,levelsAmount:15,hard:[6,14],tricky:[4,12],language:"nl"},episode_120_ru:{urls:{json:"~%n/all/%n-fd9054cded.json"},jsons:{levels:"~%n/all/jsons/120-59a05d20d3.json"
},episodeNo:120,levelsAmount:15,hard:[0,14],tricky:[5,11],language:"ru"},episode_121:{urls:{json:"~%n/all/%n-ce8eb435c8.json"},jsons:{levels:"~%n/all/jsons/121-802f2c5eec.json"},episodeNo:121,levelsAmount:15,hard:[2,6],tricky:[0,12],language:"en"},episode_121_de:{urls:{json:"~%n/all/%n-a8c445dda9.json"},jsons:{levels:"~%n/all/jsons/121-1443986739.json"},episodeNo:121,levelsAmount:15,hard:[1,5],tricky:[7,11],language:"de"},episode_121_es:{urls:{json:"~%n/all/%n-2dfe2d1702.json"},jsons:{levels:"~%n/all/jsons/121-3667d19c0f.json"},episodeNo:121,levelsAmount:15,hard:[2,10],tricky:[0,7],language:"es"},episode_121_fr:{urls:{json:"~%n/all/%n-90b2581100.json"},jsons:{levels:"~%n/all/jsons/121-c6518259f6.json"},episodeNo:121,levelsAmount:15,hard:[2,10],tricky:[6,14],language:"fr"},episode_121_it:{urls:{json:"~%n/all/%n-b2da86643b.json"},jsons:{levels:"~%n/all/jsons/121-936058415d.json"},episodeNo:121,levelsAmount:15,hard:[5,8],tricky:[3,14],language:"it"},episode_121_ja:{urls:{
json:"~%n/all/%n-afb999b9a2.json"},jsons:{levels:"~%n/all/jsons/121-d60d0124b0.json"},episodeNo:121,levelsAmount:15,hard:[5,11],tricky:[2,13],language:"ja"},episode_121_nl:{urls:{json:"~%n/all/%n-b05e9f6362.json"},jsons:{levels:"~%n/all/jsons/121-32de2d82b3.json"},episodeNo:121,levelsAmount:15,hard:[3,11],tricky:[1,9],language:"nl"},episode_121_ru:{urls:{json:"~%n/all/%n-60314e3804.json"},jsons:{levels:"~%n/all/jsons/121-fc40aa2e46.json"},episodeNo:121,levelsAmount:15,hard:[1,13],tricky:[6,11],language:"ru"},episode_122:{urls:{json:"~%n/all/%n-eeb978832a.json"},jsons:{levels:"~%n/all/jsons/122-e981336928.json"},episodeNo:122,levelsAmount:15,hard:[4,12],tricky:[1,10],language:"en"},episode_122_de:{urls:{json:"~%n/all/%n-fdebd0878b.json"},jsons:{levels:"~%n/all/jsons/122-5c4f508842.json"},episodeNo:122,levelsAmount:15,hard:[1,9],tricky:[6,14],language:"de"},episode_122_es:{urls:{json:"~%n/all/%n-4269c1d9d4.json"},jsons:{levels:"~%n/all/jsons/122-7982c39ff1.json"},episodeNo:122,
levelsAmount:15,hard:[3,8],tricky:[5,13],language:"es"},episode_122_fr:{urls:{json:"~%n/all/%n-43ee8763a5.json"},jsons:{levels:"~%n/all/jsons/122-0715452574.json"},episodeNo:122,levelsAmount:15,hard:[2,6],tricky:[4,12],language:"fr"},episode_122_it:{urls:{json:"~%n/all/%n-bb7f7e758d.json"},jsons:{levels:"~%n/all/jsons/122-c2e6ad2fa5.json"},episodeNo:122,levelsAmount:15,hard:[0,3],tricky:[6,12],language:"it"},episode_122_ja:{urls:{json:"~%n/all/%n-237608b899.json"},jsons:{levels:"~%n/all/jsons/122-6fa53fb216.json"},episodeNo:122,levelsAmount:15,hard:[3,13],tricky:[0,7],language:"ja"},episode_122_nl:{urls:{json:"~%n/all/%n-4baad911b0.json"},jsons:{levels:"~%n/all/jsons/122-a7a336c82e.json"},episodeNo:122,levelsAmount:15,hard:[3,12],tricky:[6,14],language:"nl"},episode_122_ru:{urls:{json:"~%n/all/%n-8426808ab9.json"},jsons:{levels:"~%n/all/jsons/122-0f886be987.json"},episodeNo:122,levelsAmount:15,hard:[4,14],tricky:[1,10],language:"ru"},episode_123:{urls:{json:"~%n/all/%n-df9da45045.json"
},jsons:{levels:"~%n/all/jsons/123-be81deca95.json"},episodeNo:123,levelsAmount:15,hard:[3,14],tricky:[0,8],language:"en"},episode_123_de:{urls:{json:"~%n/all/%n-5d96b4ff94.json"},jsons:{levels:"~%n/all/jsons/123-842e93e26a.json"},episodeNo:123,levelsAmount:15,hard:[7,11],tricky:[0,9],language:"de"},episode_123_es:{urls:{json:"~%n/all/%n-121d54a963.json"},jsons:{levels:"~%n/all/jsons/123-f00ba7ab9d.json"},episodeNo:123,levelsAmount:15,hard:[9,14],tricky:[3,12],language:"es"},episode_123_fr:{urls:{json:"~%n/all/%n-3419dae12d.json"},jsons:{levels:"~%n/all/jsons/123-38673e38de.json"},episodeNo:123,levelsAmount:15,hard:[1,7],tricky:[9,14],language:"fr"},episode_123_it:{urls:{json:"~%n/all/%n-b0ec2271e6.json"},jsons:{levels:"~%n/all/jsons/123-98e627ab34.json"},episodeNo:123,levelsAmount:15,hard:[0,5],tricky:[7,13],language:"it"},episode_123_ja:{urls:{json:"~%n/all/%n-4444fc9d82.json"},jsons:{levels:"~%n/all/jsons/123-3d0dfdef7a.json"},episodeNo:123,levelsAmount:15,hard:[1,5],tricky:[8,13],
language:"ja"},episode_123_nl:{urls:{json:"~%n/all/%n-3e8f5dc18d.json"},jsons:{levels:"~%n/all/jsons/123-75a7dfd2e9.json"},episodeNo:123,levelsAmount:15,hard:[1,7],tricky:[3,12],language:"nl"},episode_123_ru:{urls:{json:"~%n/all/%n-056c8c7de1.json"},jsons:{levels:"~%n/all/jsons/123-09e53f7819.json"},episodeNo:123,levelsAmount:15,hard:[4,7],tricky:[9,14],language:"ru"},episode_124:{urls:{json:"~%n/all/%n-12099ec565.json"},jsons:{levels:"~%n/all/jsons/124-8af47e0628.json"},episodeNo:124,levelsAmount:15,hard:[1,8],tricky:[4,13],language:"en"},episode_124_de:{urls:{json:"~%n/all/%n-e9b57eb15d.json"},jsons:{levels:"~%n/all/jsons/124-1c7c5a9c84.json"},episodeNo:124,levelsAmount:15,hard:[1,2],tricky:[6,12],language:"de"},episode_124_es:{urls:{json:"~%n/all/%n-d00c869088.json"},jsons:{levels:"~%n/all/jsons/124-b5a11afbec.json"},episodeNo:124,levelsAmount:15,hard:[3,8],tricky:[1,11],language:"es"},episode_124_fr:{urls:{json:"~%n/all/%n-8a4f7a4bd7.json"},jsons:{
levels:"~%n/all/jsons/124-3f11e297d2.json"},episodeNo:124,levelsAmount:15,hard:[0,3],tricky:[5,11],language:"fr"},episode_124_it:{urls:{json:"~%n/all/%n-8ed313a17f.json"},jsons:{levels:"~%n/all/jsons/124-745ff4bd4a.json"},episodeNo:124,levelsAmount:15,hard:[3,4],tricky:[0,9],language:"it"},episode_124_ja:{urls:{json:"~%n/all/%n-e2ba9f0f9a.json"},jsons:{levels:"~%n/all/jsons/124-e22ded4417.json"},episodeNo:124,levelsAmount:15,hard:[2,4],tricky:[8,14],language:"ja"},episode_124_nl:{urls:{json:"~%n/all/%n-8762f23c03.json"},jsons:{levels:"~%n/all/jsons/124-837015c218.json"},episodeNo:124,levelsAmount:15,hard:[0,5],tricky:[7,13],language:"nl"},episode_124_ru:{urls:{json:"~%n/all/%n-c35c36bde8.json"},jsons:{levels:"~%n/all/jsons/124-dd2b06af91.json"},episodeNo:124,levelsAmount:15,hard:[7,14],tricky:[1,10],language:"ru"},episode_125:{urls:{json:"~%n/all/%n-9e013d906f.json"},jsons:{levels:"~%n/all/jsons/125-3f1705e9de.json"},episodeNo:125,levelsAmount:15,hard:[0],tricky:[6,14],language:"en"},
episode_125_de:{urls:{json:"~%n/all/%n-e07230e8ed.json"},jsons:{levels:"~%n/all/jsons/125-62ee05b643.json"},episodeNo:125,levelsAmount:15,hard:[2,10],tricky:[0,7],language:"de"},episode_125_es:{urls:{json:"~%n/all/%n-2d61c06ea2.json"},jsons:{levels:"~%n/all/jsons/125-be4fd4efce.json"},episodeNo:125,levelsAmount:15,hard:[1,8],tricky:[6,14],language:"es"},episode_125_fr:{urls:{json:"~%n/all/%n-dc4b4fe24e.json"},jsons:{levels:"~%n/all/jsons/125-f51bd3defc.json"},episodeNo:125,levelsAmount:15,hard:[7,11],tricky:[1,13],language:"fr"},episode_125_it:{urls:{json:"~%n/all/%n-11467718c7.json"},jsons:{levels:"~%n/all/jsons/125-8df5d262c1.json"},episodeNo:125,levelsAmount:15,hard:[2,4],tricky:[7,13],language:"it"},episode_125_ja:{urls:{json:"~%n/all/%n-42ccefb58a.json"},jsons:{levels:"~%n/all/jsons/125-a11e7a3341.json"},episodeNo:125,levelsAmount:15,hard:[2,7],tricky:[4,11],language:"ja"},episode_125_nl:{urls:{json:"~%n/all/%n-82d54a47a9.json"},jsons:{levels:"~%n/all/jsons/125-c6f2f48438.json"},
episodeNo:125,levelsAmount:15,hard:[5,12],tricky:[0,7],language:"nl"},episode_125_ru:{urls:{json:"~%n/all/%n-af35f54002.json"},jsons:{levels:"~%n/all/jsons/125-03c88f3233.json"},episodeNo:125,levelsAmount:15,hard:[0,5],tricky:[7,13],language:"ru"},episode_126:{urls:{json:"~%n/all/%n-8bf3a324cb.json"},jsons:{levels:"~%n/all/jsons/126-8a65b0a590.json"},episodeNo:126,levelsAmount:15,hard:[4,11],tricky:[0,8],language:"en"},episode_126_de:{urls:{json:"~%n/all/%n-e0c741b09c.json"},jsons:{levels:"~%n/all/jsons/126-e3e4231866.json"},episodeNo:126,levelsAmount:15,hard:[1,5],tricky:[7,13],language:"de"},episode_126_es:{urls:{json:"~%n/all/%n-bfd723fb92.json"},jsons:{levels:"~%n/all/jsons/126-a36ce2f333.json"},episodeNo:126,levelsAmount:15,hard:[2,3],tricky:[0,11],language:"es"},episode_126_fr:{urls:{json:"~%n/all/%n-1b4dd81a2d.json"},jsons:{levels:"~%n/all/jsons/126-984b80618f.json"},episodeNo:126,levelsAmount:15,hard:[1],tricky:[3,9],language:"fr"},episode_126_it:{urls:{
json:"~%n/all/%n-8b809e9cf0.json"},jsons:{levels:"~%n/all/jsons/126-072fbcbbf8.json"},episodeNo:126,levelsAmount:15,hard:[7,14],tricky:[3,12],language:"it"},episode_126_ja:{urls:{json:"~%n/all/%n-2686b7ee5f.json"},jsons:{levels:"~%n/all/jsons/126-51af3d8afe.json"},episodeNo:126,levelsAmount:15,hard:[2,12],tricky:[6,14],language:"ja"},episode_126_nl:{urls:{json:"~%n/all/%n-15f7d7ea8b.json"},jsons:{levels:"~%n/all/jsons/126-27f33cfeff.json"},episodeNo:126,levelsAmount:15,hard:[2,4],tricky:[7,13],language:"nl"},episode_126_ru:{urls:{json:"~%n/all/%n-ad133ae875.json"},jsons:{levels:"~%n/all/jsons/126-f06c165361.json"},episodeNo:126,levelsAmount:15,hard:[0,13],tricky:[2,7],language:"ru"},episode_127:{urls:{json:"~%n/all/%n-c66df9d28d.json"},jsons:{levels:"~%n/all/jsons/127-df76266bef.json"},episodeNo:127,levelsAmount:15,hard:[3],tricky:[7,13],language:"en"},episode_127_de:{urls:{json:"~%n/all/%n-c1e9abf1ac.json"},jsons:{levels:"~%n/all/jsons/127-f07746d975.json"},episodeNo:127,
levelsAmount:15,hard:[0,9],tricky:[5,14],language:"de"},episode_127_es:{urls:{json:"~%n/all/%n-d06c757a5b.json"},jsons:{levels:"~%n/all/jsons/127-f7315b3aa4.json"},episodeNo:127,levelsAmount:15,hard:[3,8],tricky:[1,12],language:"es"},episode_127_fr:{urls:{json:"~%n/all/%n-b205a1cdf8.json"},jsons:{levels:"~%n/all/jsons/127-de5f830f48.json"},episodeNo:127,levelsAmount:15,hard:[1,4],tricky:[7,13],language:"fr"},episode_127_it:{urls:{json:"~%n/all/%n-f4913e042c.json"},jsons:{levels:"~%n/all/jsons/127-21f9b2c228.json"},episodeNo:127,levelsAmount:15,hard:[1,10],tricky:[3,8],language:"it"},episode_127_ja:{urls:{json:"~%n/all/%n-2b5bfee79d.json"},jsons:{levels:"~%n/all/jsons/127-51a3a9d0ac.json"},episodeNo:127,levelsAmount:15,hard:[5,10],tricky:[0,12],language:"ja"},episode_127_nl:{urls:{json:"~%n/all/%n-3616d32f1a.json"},jsons:{levels:"~%n/all/jsons/127-7ad1f3064d.json"},episodeNo:127,levelsAmount:15,hard:[2,6],tricky:[9,14],language:"nl"},episode_127_ru:{urls:{
json:"~%n/all/%n-9c623c5314.json"},jsons:{levels:"~%n/all/jsons/127-3d6a41ab77.json"},episodeNo:127,levelsAmount:15,hard:[1,10],tricky:[5,13],language:"ru"},episode_128:{urls:{json:"~%n/all/%n-6ba2516279.json"},jsons:{levels:"~%n/all/jsons/128-e7fadfe53f.json"},episodeNo:128,levelsAmount:15,hard:[0,14],tricky:[2,9],language:"en"},episode_128_de:{urls:{json:"~%n/all/%n-493ee569aa.json"},jsons:{levels:"~%n/all/jsons/128-8ca74ab619.json"},episodeNo:128,levelsAmount:15,hard:[2,5],tricky:[0,11],language:"de"},episode_128_es:{urls:{json:"~%n/all/%n-bcac7ba198.json"},jsons:{levels:"~%n/all/jsons/128-bbbb0c89a2.json"},episodeNo:128,levelsAmount:15,hard:[5,11],tricky:[7,14],language:"es"},episode_128_fr:{urls:{json:"~%n/all/%n-66d247bd94.json"},jsons:{levels:"~%n/all/jsons/128-364f275b8f.json"},episodeNo:128,levelsAmount:15,hard:[4,5],tricky:[7,14],language:"fr"},episode_128_it:{urls:{json:"~%n/all/%n-3064f4c06f.json"},jsons:{levels:"~%n/all/jsons/128-1b32b2546f.json"},episodeNo:128,
levelsAmount:15,hard:[3,12],tricky:[6,14],language:"it"},episode_128_ja:{urls:{json:"~%n/all/%n-42ee772909.json"},jsons:{levels:"~%n/all/jsons/128-105a128f77.json"},episodeNo:128,levelsAmount:15,hard:[3,4],tricky:[6,12],language:"ja"},episode_128_nl:{urls:{json:"~%n/all/%n-5bf79c2324.json"},jsons:{levels:"~%n/all/jsons/128-3bc6242b0c.json"},episodeNo:128,levelsAmount:15,hard:[1,5],tricky:[3,11],language:"nl"},episode_128_ru:{urls:{json:"~%n/all/%n-7a91ffb377.json"},jsons:{levels:"~%n/all/jsons/128-477930d7a4.json"},episodeNo:128,levelsAmount:15,hard:[0,1],tricky:[7,14],language:"ru"},episode_129:{urls:{json:"~%n/all/%n-9697d9396e.json"},jsons:{levels:"~%n/all/jsons/129-3d9a643ac1.json"},episodeNo:129,levelsAmount:15,hard:[0,2],tricky:[6,12],language:"en"},episode_129_de:{urls:{json:"~%n/all/%n-0c39a91012.json"},jsons:{levels:"~%n/all/jsons/129-00ae69130d.json"},episodeNo:129,levelsAmount:15,hard:[2,6],tricky:[8,14],language:"de"},episode_129_es:{urls:{json:"~%n/all/%n-3c30031633.json"
},jsons:{levels:"~%n/all/jsons/129-1d5829ae6e.json"},episodeNo:129,levelsAmount:15,hard:[0,13],tricky:[3,9],language:"es"},episode_129_fr:{urls:{json:"~%n/all/%n-295f40b9ba.json"},jsons:{levels:"~%n/all/jsons/129-f7948256aa.json"},episodeNo:129,levelsAmount:15,hard:[2,7],tricky:[0,11],language:"fr"},episode_129_it:{urls:{json:"~%n/all/%n-6a73cdb17d.json"},jsons:{levels:"~%n/all/jsons/129-a697714333.json"},episodeNo:129,levelsAmount:15,hard:[2,7],tricky:[0,12],language:"it"},episode_129_ja:{urls:{json:"~%n/all/%n-13c5ef0ae5.json"},jsons:{levels:"~%n/all/jsons/129-6d2cd4ec22.json"},episodeNo:129,levelsAmount:15,hard:[1,6],tricky:[3,10],language:"ja"},episode_129_nl:{urls:{json:"~%n/all/%n-db56cc7431.json"},jsons:{levels:"~%n/all/jsons/129-4bc85e9fe9.json"},episodeNo:129,levelsAmount:15,hard:[9],tricky:[4,13],language:"nl"},episode_129_ru:{urls:{json:"~%n/all/%n-1fbdb0e888.json"},jsons:{levels:"~%n/all/jsons/129-0c96afb78b.json"},episodeNo:129,levelsAmount:15,hard:[4],tricky:[1,10],
language:"ru"},episode_12_de:{urls:{json:"~%n/all/%n-6e5d8e57f1.json"},jsons:{levels:"~%n/all/jsons/12-d72ba14074.json"},episodeNo:12,levelsAmount:15,hard:[0,8],tricky:[2,6],language:"de"},episode_12_es:{urls:{json:"~%n/all/%n-ae1ad0c3aa.json"},jsons:{levels:"~%n/all/jsons/12-6d9aa26d7b.json"},episodeNo:12,levelsAmount:15,hard:[5,14],tricky:[3,12],language:"es"},episode_12_fr:{urls:{json:"~%n/all/%n-8252136bb2.json"},jsons:{levels:"~%n/all/jsons/12-ddec0583a1.json"},episodeNo:12,levelsAmount:15,hard:[6,8],tricky:[2,12],language:"fr"},episode_12_it:{urls:{json:"~%n/all/%n-36ea957226.json"},jsons:{levels:"~%n/all/jsons/12-890313d310.json"},episodeNo:12,levelsAmount:15,hard:[12],tricky:[2,9],language:"it"},episode_12_ja:{urls:{json:"~%n/all/%n-061f77dc6f.json"},jsons:{levels:"~%n/all/jsons/12-e347b2ff40.json"},episodeNo:12,levelsAmount:15,hard:[11,14],tricky:[1,6],language:"ja"},episode_12_ko:{urls:{json:"~%n/all/%n-ae933d6649.json"},jsons:{levels:"~%n/all/jsons/12-687189ba4d.json"},
episodeNo:12,levelsAmount:15,hard:[0,7],tricky:[2,11],language:"ko"},episode_12_nl:{urls:{json:"~%n/all/%n-2176986dac.json"},jsons:{levels:"~%n/all/jsons/12-2cd3cf91fb.json"},episodeNo:12,levelsAmount:15,hard:[7,12],tricky:[0,4],language:"nl"},episode_12_pt:{urls:{json:"~%n/all/%n-c516a722ef.json"},jsons:{levels:"~%n/all/jsons/12-0706a9ef88.json"},episodeNo:12,levelsAmount:15,hard:[12,14],tricky:[4,10],language:"pt"},episode_12_ru:{urls:{json:"~%n/all/%n-94057f2083.json"},jsons:{levels:"~%n/all/jsons/12-f9e79ffd8c.json"},episodeNo:12,levelsAmount:15,hard:[4,11],tricky:[2,13],language:"ru"},episode_13:{urls:{json:"~%n/all/%n-da5e63d9a8.json"},jsons:{levels:"~%n/all/jsons/13-1ea94fed74.json"},episodeNo:13,levelsAmount:15,hard:[4,14],tricky:[1,9],language:"en"},episode_130:{urls:{json:"~%n/all/%n-9b04a5a8f0.json"},jsons:{levels:"~%n/all/jsons/130-fda8a151c1.json"},episodeNo:130,levelsAmount:15,hard:[4,13],tricky:[7,11],language:"en"},episode_130_de:{urls:{json:"~%n/all/%n-8bcf7d86ae.json"
},jsons:{levels:"~%n/all/jsons/130-c63752747b.json"},episodeNo:130,levelsAmount:15,hard:[14],tricky:[0,8],language:"de"},episode_130_es:{urls:{json:"~%n/all/%n-4785d23c32.json"},jsons:{levels:"~%n/all/jsons/130-a6f5b137c3.json"},episodeNo:130,levelsAmount:15,hard:[5,10],tricky:[2,14],language:"es"},episode_130_fr:{urls:{json:"~%n/all/%n-b5ffe9885f.json"},jsons:{levels:"~%n/all/jsons/130-7595ec09ab.json"},episodeNo:130,levelsAmount:15,hard:[2,14],tricky:[6,11],language:"fr"},episode_130_it:{urls:{json:"~%n/all/%n-b5d6f3678d.json"},jsons:{levels:"~%n/all/jsons/130-cc60e86641.json"},episodeNo:130,levelsAmount:15,hard:[0,1],tricky:[5,12],language:"it"},episode_130_ja:{urls:{json:"~%n/all/%n-8e0dd9614c.json"},jsons:{levels:"~%n/all/jsons/130-dc1c13f397.json"},episodeNo:130,levelsAmount:15,hard:[0,10],tricky:[4,12],language:"ja"},episode_130_nl:{urls:{json:"~%n/all/%n-cd6909282a.json"},jsons:{levels:"~%n/all/jsons/130-d0b2c0d57a.json"},episodeNo:130,levelsAmount:15,hard:[2,14],tricky:[0,9],
language:"nl"},episode_130_ru:{urls:{json:"~%n/all/%n-65756aeb6a.json"},jsons:{levels:"~%n/all/jsons/130-0ee27391bb.json"},episodeNo:130,levelsAmount:15,hard:[9,11],tricky:[3,14],language:"ru"},episode_131:{urls:{json:"~%n/all/%n-a462984bda.json"},jsons:{levels:"~%n/all/jsons/131-ef9dfd0de5.json"},episodeNo:131,levelsAmount:15,hard:[1],tricky:[5,12],language:"en"},episode_131_de:{urls:{json:"~%n/all/%n-d3e56b6208.json"},jsons:{levels:"~%n/all/jsons/131-fd31f017eb.json"},episodeNo:131,levelsAmount:15,hard:[0,7],tricky:[3,12],language:"de"},episode_131_es:{urls:{json:"~%n/all/%n-e652e397df.json"},jsons:{levels:"~%n/all/jsons/131-17790689d4.json"},episodeNo:131,levelsAmount:15,hard:[1,7],tricky:[3,11],language:"es"},episode_131_fr:{urls:{json:"~%n/all/%n-172e8e68e3.json"},jsons:{levels:"~%n/all/jsons/131-6e84211e21.json"},episodeNo:131,levelsAmount:15,hard:[7,14],tricky:[0,9],language:"fr"},episode_131_it:{urls:{json:"~%n/all/%n-424060e391.json"},jsons:{
levels:"~%n/all/jsons/131-21fc7fa53f.json"},episodeNo:131,levelsAmount:15,hard:[0,5],tricky:[9,14],language:"it"},episode_131_ja:{urls:{json:"~%n/all/%n-c090b44d5c.json"},jsons:{levels:"~%n/all/jsons/131-e7d3e0849c.json"},episodeNo:131,levelsAmount:15,hard:[1,8],tricky:[5,14],language:"ja"},episode_131_nl:{urls:{json:"~%n/all/%n-ea188c8ea3.json"},jsons:{levels:"~%n/all/jsons/131-887b6afee5.json"},episodeNo:131,levelsAmount:15,hard:[0,1],tricky:[5,12],language:"nl"},episode_131_ru:{urls:{json:"~%n/all/%n-b41cc72f65.json"},jsons:{levels:"~%n/all/jsons/131-f9449a8701.json"},episodeNo:131,levelsAmount:15,hard:[0,1],tricky:[3,10],language:"ru"},episode_132:{urls:{json:"~%n/all/%n-3e59026477.json"},jsons:{levels:"~%n/all/jsons/132-619b633661.json"},episodeNo:132,levelsAmount:15,hard:[3,7],tricky:[5,13],language:"en"},episode_132_de:{urls:{json:"~%n/all/%n-7d3359f724.json"},jsons:{levels:"~%n/all/jsons/132-e088991a80.json"},episodeNo:132,levelsAmount:15,hard:[5,14],tricky:[7,12],language:"de"
},episode_132_es:{urls:{json:"~%n/all/%n-a1dbc955ac.json"},jsons:{levels:"~%n/all/jsons/132-e9c28992d2.json"},episodeNo:132,levelsAmount:15,hard:[3,5],tricky:[8,13],language:"es"},episode_132_fr:{urls:{json:"~%n/all/%n-f071ae71fc.json"},jsons:{levels:"~%n/all/jsons/132-b5f0012a1f.json"},episodeNo:132,levelsAmount:15,hard:[0,8],tricky:[3,12],language:"fr"},episode_132_it:{urls:{json:"~%n/all/%n-c0788be800.json"},jsons:{levels:"~%n/all/jsons/132-aaa4bf6b8a.json"},episodeNo:132,levelsAmount:15,hard:[4,11],tricky:[1,13],language:"it"},episode_132_ja:{urls:{json:"~%n/all/%n-4e7a2cf640.json"},jsons:{levels:"~%n/all/jsons/132-2a801f7cb8.json"},episodeNo:132,levelsAmount:15,hard:[5,8],tricky:[0,11],language:"ja"},episode_132_nl:{urls:{json:"~%n/all/%n-d6c1b6fb22.json"},jsons:{levels:"~%n/all/jsons/132-5421681e9b.json"},episodeNo:132,levelsAmount:15,hard:[5,11],tricky:[7,14],language:"nl"},episode_132_ru:{urls:{json:"~%n/all/%n-91ddc3135c.json"},jsons:{levels:"~%n/all/jsons/132-56de8ac35f.json"
},episodeNo:132,levelsAmount:15,hard:[0,13],tricky:[4,9],language:"ru"},episode_133:{urls:{json:"~%n/all/%n-84d5bf263c.json"},jsons:{levels:"~%n/all/jsons/133-e2c934155f.json"},episodeNo:133,levelsAmount:15,hard:[1,11],tricky:[3,8],language:"en"},episode_133_ru:{urls:{json:"~%n/all/%n-dc0cba3794.json"},jsons:{levels:"~%n/all/jsons/133-a5ff2a07f4.json"},episodeNo:133,levelsAmount:15,hard:[0,7],tricky:[2,9],language:"ru"},episode_134:{urls:{json:"~%n/all/%n-9fe4567346.json"},jsons:{levels:"~%n/all/jsons/134-d51833ca69.json"},episodeNo:134,levelsAmount:15,hard:[0,12],tricky:[5,10],language:"en"},episode_134_ru:{urls:{json:"~%n/all/%n-3d9355f342.json"},jsons:{levels:"~%n/all/jsons/134-1aeed75ae0.json"},episodeNo:134,levelsAmount:15,hard:[3,5],tricky:[1,12],language:"ru"},episode_135:{urls:{json:"~%n/all/%n-3de58179af.json"},jsons:{levels:"~%n/all/jsons/135-a8670d9f87.json"},episodeNo:135,levelsAmount:15,hard:[0,6],tricky:[2,11],language:"en"},episode_135_ru:{urls:{
json:"~%n/all/%n-7bc5f571b0.json"},jsons:{levels:"~%n/all/jsons/135-14682c0824.json"},episodeNo:135,levelsAmount:15,hard:[5,7],tricky:[3,14],language:"ru"},episode_136:{urls:{json:"~%n/all/%n-a66e5e4fbb.json"},jsons:{levels:"~%n/all/jsons/136-b78c0b2f10.json"},episodeNo:136,levelsAmount:15,hard:[4,14],tricky:[1,10],language:"en"},episode_136_ru:{urls:{json:"~%n/all/%n-ef08efaa8f.json"},jsons:{levels:"~%n/all/jsons/136-c1e66b8e2e.json"},episodeNo:136,levelsAmount:15,hard:[11,13],tricky:[0,6],language:"ru"},episode_137:{urls:{json:"~%n/all/%n-6994db74bb.json"},jsons:{levels:"~%n/all/jsons/137-667a6159ec.json"},episodeNo:137,levelsAmount:15,hard:[3,10],tricky:[6,14],language:"en"},episode_137_ru:{urls:{json:"~%n/all/%n-1e53eba449.json"},jsons:{levels:"~%n/all/jsons/137-a1cee0b8f5.json"},episodeNo:137,levelsAmount:15,hard:[5,10],tricky:[2,14],language:"ru"},episode_138:{urls:{json:"~%n/all/%n-548cda7c65.json"},jsons:{levels:"~%n/all/jsons/138-a7b444cc20.json"},episodeNo:138,
levelsAmount:15,hard:[5,6],tricky:[1,12],language:"en"},episode_138_ru:{urls:{json:"~%n/all/%n-9572ea13cb.json"},jsons:{levels:"~%n/all/jsons/138-8a074545fd.json"},episodeNo:138,levelsAmount:15,hard:[0,5],tricky:[2,11],language:"ru"},episode_139:{urls:{json:"~%n/all/%n-be43a06135.json"},jsons:{levels:"~%n/all/jsons/139-f6a5fdcab8.json"},episodeNo:139,levelsAmount:15,hard:[4,13],tricky:[2,10],language:"en"},episode_139_ru:{urls:{json:"~%n/all/%n-18c65a88d5.json"},jsons:{levels:"~%n/all/jsons/139-0e59051b39.json"},episodeNo:139,levelsAmount:15,hard:[3,11],tricky:[1,9],language:"ru"},episode_13_de:{urls:{json:"~%n/all/%n-d3431f768b.json"},jsons:{levels:"~%n/all/jsons/13-f35609da9f.json"},episodeNo:13,levelsAmount:15,hard:[1,5],tricky:[7,13],language:"de"},episode_13_es:{urls:{json:"~%n/all/%n-b76cb6eb75.json"},jsons:{levels:"~%n/all/jsons/13-4117763d8b.json"},episodeNo:13,levelsAmount:15,hard:[0,7],tricky:[2,11],language:"es"},episode_13_fr:{urls:{json:"~%n/all/%n-ecf7e1fcab.json"},
jsons:{levels:"~%n/all/jsons/13-f38e97aead.json"},episodeNo:13,levelsAmount:15,hard:[2,14],tricky:[0,8],language:"fr"},episode_13_it:{urls:{json:"~%n/all/%n-d0e814e63c.json"},jsons:{levels:"~%n/all/jsons/13-2352b3665f.json"},episodeNo:13,levelsAmount:15,hard:[4,7],tricky:[9,14],language:"it"},episode_13_ja:{urls:{json:"~%n/all/%n-644b2d7610.json"},jsons:{levels:"~%n/all/jsons/13-f517e56818.json"},episodeNo:13,levelsAmount:15,hard:[13],tricky:[4,10],language:"ja"},episode_13_ko:{urls:{json:"~%n/all/%n-3d05eca3c3.json"},jsons:{levels:"~%n/all/jsons/13-268ef4e057.json"},episodeNo:13,levelsAmount:15,hard:[6,13],tricky:[1,10],language:"ko"},episode_13_nl:{urls:{json:"~%n/all/%n-846d9c2f9e.json"},jsons:{levels:"~%n/all/jsons/13-110a94d194.json"},episodeNo:13,levelsAmount:15,hard:[8,13],tricky:[2,10],language:"nl"},episode_13_pt:{urls:{json:"~%n/all/%n-918ef897de.json"},jsons:{levels:"~%n/all/jsons/13-3cc53bb09b.json"},episodeNo:13,levelsAmount:15,hard:[3,11],tricky:[0,9],language:"pt"},
episode_13_ru:{urls:{json:"~%n/all/%n-53b3dd7190.json"},jsons:{levels:"~%n/all/jsons/13-a7d4a48a51.json"},episodeNo:13,levelsAmount:15,hard:[11,14],tricky:[0,5],language:"ru"},episode_14:{urls:{json:"~%n/all/%n-45cae228ea.json"},jsons:{levels:"~%n/all/jsons/14-84e2360497.json"},episodeNo:14,levelsAmount:15,hard:[0,5],tricky:[8,14],language:"en"},episode_140:{urls:{json:"~%n/all/%n-292a3e0261.json"},jsons:{levels:"~%n/all/jsons/140-3164be9782.json"},episodeNo:140,levelsAmount:15,hard:[3,5],tricky:[0,10],language:"en"},episode_140_ru:{urls:{json:"~%n/all/%n-9f4d8a444f.json"},jsons:{levels:"~%n/all/jsons/140-e6140b3d3c.json"},episodeNo:140,levelsAmount:15,hard:[4,10],tricky:[7,14],language:"ru"},episode_141:{urls:{json:"~%n/all/%n-ffcf4aadf6.json"},jsons:{levels:"~%n/all/jsons/141-00765be0ba.json"},episodeNo:141,levelsAmount:15,hard:[0,2],tricky:[6,13],language:"en"},episode_141_ru:{urls:{json:"~%n/all/%n-72d784d4ad.json"},jsons:{levels:"~%n/all/jsons/141-56a847d537.json"},episodeNo:141,
levelsAmount:15,hard:[1,5],tricky:[7,12],language:"ru"},episode_14_de:{urls:{json:"~%n/all/%n-a0fd6c87a6.json"},jsons:{levels:"~%n/all/jsons/14-f0dcacf8a9.json"},episodeNo:14,levelsAmount:15,hard:[5,13],tricky:[2,11],language:"de"},episode_14_es:{urls:{json:"~%n/all/%n-81bf5920bf.json"},jsons:{levels:"~%n/all/jsons/14-0648f01cb7.json"},episodeNo:14,levelsAmount:15,hard:[7,11],tricky:[1,9],language:"es"},episode_14_fr:{urls:{json:"~%n/all/%n-9de8aaa17f.json"},jsons:{levels:"~%n/all/jsons/14-9da45c7bea.json"},episodeNo:14,levelsAmount:15,hard:[3,6],tricky:[1,13],language:"fr"},episode_14_it:{urls:{json:"~%n/all/%n-4ebdf324a7.json"},jsons:{levels:"~%n/all/jsons/14-73d2ad58d2.json"},episodeNo:14,levelsAmount:15,hard:[6,8],tricky:[1,11],language:"it"},episode_14_ja:{urls:{json:"~%n/all/%n-d5a5cfd456.json"},jsons:{levels:"~%n/all/jsons/14-fa2d29cbee.json"},episodeNo:14,levelsAmount:15,hard:[5,11],tricky:[0,9],language:"ja"},episode_14_ko:{urls:{json:"~%n/all/%n-f50c3e62d2.json"},jsons:{
levels:"~%n/all/jsons/14-9a75b342cd.json"},episodeNo:14,levelsAmount:15,hard:[12,13],tricky:[0,5],language:"ko"},episode_14_nl:{urls:{json:"~%n/all/%n-0a774233bc.json"},jsons:{levels:"~%n/all/jsons/14-7400a4ce94.json"},episodeNo:14,levelsAmount:15,hard:[12,14],tricky:[4,10],language:"nl"},episode_14_pt:{urls:{json:"~%n/all/%n-7905301c6c.json"},jsons:{levels:"~%n/all/jsons/14-3049ab6ee0.json"},episodeNo:14,levelsAmount:15,hard:[0,9],tricky:[4,13],language:"pt"},episode_14_ru:{urls:{json:"~%n/all/%n-9c725abdbf.json"},jsons:{levels:"~%n/all/jsons/14-9421a0472b.json"},episodeNo:14,levelsAmount:15,hard:[0,7],tricky:[4,13],language:"ru"},episode_15:{urls:{json:"~%n/all/%n-bd763184f5.json"},jsons:{levels:"~%n/all/jsons/15-f1838639ad.json"},episodeNo:15,levelsAmount:15,hard:[10,14],tricky:[0,6],language:"en"},episode_15_de:{urls:{json:"~%n/all/%n-3288f3ee68.json"},jsons:{levels:"~%n/all/jsons/15-b7739b6805.json"},episodeNo:15,levelsAmount:15,hard:[0,12],tricky:[2,8],language:"de"},
episode_15_es:{urls:{json:"~%n/all/%n-f9a900610c.json"},jsons:{levels:"~%n/all/jsons/15-49970faa3b.json"},episodeNo:15,levelsAmount:15,hard:[6,11],tricky:[4,14],language:"es"},episode_15_fr:{urls:{json:"~%n/all/%n-55252e9d69.json"},jsons:{levels:"~%n/all/jsons/15-2a57907e33.json"},episodeNo:15,levelsAmount:15,hard:[8,12],tricky:[3,14],language:"fr"},episode_15_it:{urls:{json:"~%n/all/%n-c4558a94ad.json"},jsons:{levels:"~%n/all/jsons/15-46fe707faf.json"},episodeNo:15,levelsAmount:15,hard:[2,6],tricky:[9,14],language:"it"},episode_15_ja:{urls:{json:"~%n/all/%n-9ed0ee42c8.json"},jsons:{levels:"~%n/all/jsons/15-70e20b3ade.json"},episodeNo:15,levelsAmount:15,hard:[1,14],tricky:[5,10],language:"ja"},episode_15_ko:{urls:{json:"~%n/all/%n-d896ec17e5.json"},jsons:{levels:"~%n/all/jsons/15-652c7d2027.json"},episodeNo:15,levelsAmount:15,hard:[3,5],tricky:[7,13],language:"ko"},episode_15_nl:{urls:{json:"~%n/all/%n-59a6838413.json"},jsons:{levels:"~%n/all/jsons/15-8fb785730f.json"},episodeNo:15,
levelsAmount:15,hard:[5,10],tricky:[0,8],language:"nl"},episode_15_pt:{urls:{json:"~%n/all/%n-3f9af5e22d.json"},jsons:{levels:"~%n/all/jsons/15-cd5b24648a.json"},episodeNo:15,levelsAmount:15,hard:[6,9],tricky:[0,4],language:"pt"},episode_15_ru:{urls:{json:"~%n/all/%n-f401ff098f.json"},jsons:{levels:"~%n/all/jsons/15-c339e854b9.json"},episodeNo:15,levelsAmount:15,hard:[12],tricky:[4,14],language:"ru"},episode_16:{urls:{json:"~%n/all/%n-bcedfb6437.json"},jsons:{levels:"~%n/all/jsons/16-1dc00bb1f4.json"},episodeNo:16,levelsAmount:15,hard:[2,12],tricky:[4,9],language:"en"},episode_16_de:{urls:{json:"~%n/all/%n-baeccc404c.json"},jsons:{levels:"~%n/all/jsons/16-d328a77b7f.json"},episodeNo:16,levelsAmount:15,hard:[7,14],tricky:[3,11],language:"de"},episode_16_es:{urls:{json:"~%n/all/%n-9ca467de4a.json"},jsons:{levels:"~%n/all/jsons/16-1d417b64ec.json"},episodeNo:16,levelsAmount:15,hard:[3],tricky:[5,12],language:"es"},episode_16_fr:{urls:{json:"~%n/all/%n-5fad4562f6.json"},jsons:{
levels:"~%n/all/jsons/16-422392124c.json"},episodeNo:16,levelsAmount:15,hard:[0,8],tricky:[2,11],language:"fr"},episode_16_it:{urls:{json:"~%n/all/%n-d1aba51e97.json"},jsons:{levels:"~%n/all/jsons/16-a3883f432f.json"},episodeNo:16,levelsAmount:15,hard:[0,3],tricky:[5,11],language:"it"},episode_16_ja:{urls:{json:"~%n/all/%n-70f3ee523d.json"},jsons:{levels:"~%n/all/jsons/16-8109cf4648.json"},episodeNo:16,levelsAmount:15,hard:[5,10],tricky:[0,7],language:"ja"},episode_16_ko:{urls:{json:"~%n/all/%n-2fbf529988.json"},jsons:{levels:"~%n/all/jsons/16-a7f7c88264.json"},episodeNo:16,levelsAmount:15,hard:[8,11],tricky:[3,14],language:"ko"},episode_16_nl:{urls:{json:"~%n/all/%n-69dd6b9bfa.json"},jsons:{levels:"~%n/all/jsons/16-2e2364563b.json"},episodeNo:16,levelsAmount:15,hard:[7,14],tricky:[3,12],language:"nl"},episode_16_pt:{urls:{json:"~%n/all/%n-fb9aebef12.json"},jsons:{levels:"~%n/all/jsons/16-575948be39.json"},episodeNo:16,levelsAmount:15,hard:[7],tricky:[2,12],language:"pt"},
episode_16_ru:{urls:{json:"~%n/all/%n-259be822f4.json"},jsons:{levels:"~%n/all/jsons/16-da8d4a9425.json"},episodeNo:16,levelsAmount:15,hard:[4,10],tricky:[1,8],language:"ru"},episode_17:{urls:{json:"~%n/all/%n-3e757d430e.json"},jsons:{levels:"~%n/all/jsons/17-705b3a381e.json"},episodeNo:17,levelsAmount:15,hard:[5,11],tricky:[7,14],language:"en"},episode_17_de:{urls:{json:"~%n/all/%n-ca1bedc0c6.json"},jsons:{levels:"~%n/all/jsons/17-7a8cf06e6b.json"},episodeNo:17,levelsAmount:15,hard:[7,12],tricky:[0,5],language:"de"},episode_17_es:{urls:{json:"~%n/all/%n-6814e5dd3e.json"},jsons:{levels:"~%n/all/jsons/17-7cc3a92c1a.json"},episodeNo:17,levelsAmount:15,hard:[0,4],tricky:[8,14],language:"es"},episode_17_fr:{urls:{json:"~%n/all/%n-54fe6d1e4a.json"},jsons:{levels:"~%n/all/jsons/17-2a39c9e0a3.json"},episodeNo:17,levelsAmount:15,hard:[0,9],tricky:[5,13],language:"fr"},episode_17_it:{urls:{json:"~%n/all/%n-13addd3017.json"},jsons:{levels:"~%n/all/jsons/17-f89d35abd2.json"},episodeNo:17,
levelsAmount:15,hard:[0,5],tricky:[3,12],language:"it"},episode_17_ja:{urls:{json:"~%n/all/%n-ae31ee2dde.json"},jsons:{levels:"~%n/all/jsons/17-4b2500fb90.json"},episodeNo:17,levelsAmount:15,hard:[2,13],tricky:[4,10],language:"ja"},episode_17_ko:{urls:{json:"~%n/all/%n-e20d5e0626.json"},jsons:{levels:"~%n/all/jsons/17-d51dd2641a.json"},episodeNo:17,levelsAmount:15,hard:[3],tricky:[1,10],language:"ko"},episode_17_nl:{urls:{json:"~%n/all/%n-c1a59b4ace.json"},jsons:{levels:"~%n/all/jsons/17-99179f88d2.json"},episodeNo:17,levelsAmount:15,hard:[14],tricky:[0,8],language:"nl"},episode_17_pt:{urls:{json:"~%n/all/%n-f7591683f6.json"},jsons:{levels:"~%n/all/jsons/17-d9c85f99ac.json"},episodeNo:17,levelsAmount:15,hard:[9,13],tricky:[3,11],language:"pt"},episode_17_ru:{urls:{json:"~%n/all/%n-6cec8bdf97.json"},jsons:{levels:"~%n/all/jsons/17-1507737754.json"},episodeNo:17,levelsAmount:15,hard:[8,14],tricky:[3,12],language:"ru"},episode_18:{urls:{json:"~%n/all/%n-ec0631d07c.json"},jsons:{
levels:"~%n/all/jsons/18-164889d0f7.json"},episodeNo:18,levelsAmount:15,hard:[2,12],tricky:[4,10],language:"en"},episode_18_de:{urls:{json:"~%n/all/%n-339b737655.json"},jsons:{levels:"~%n/all/jsons/18-398cac11d8.json"},episodeNo:18,levelsAmount:15,hard:[1,12],tricky:[4,9],language:"de"},episode_18_es:{urls:{json:"~%n/all/%n-236e7bd3b8.json"},jsons:{levels:"~%n/all/jsons/18-fe780a8926.json"},episodeNo:18,levelsAmount:15,hard:[12],tricky:[1,7],language:"es"},episode_18_fr:{urls:{json:"~%n/all/%n-cbdf2b5f74.json"},jsons:{levels:"~%n/all/jsons/18-418c6a3e81.json"},episodeNo:18,levelsAmount:15,hard:[0,10],tricky:[2,8],language:"fr"},episode_18_it:{urls:{json:"~%n/all/%n-64a9e47e34.json"},jsons:{levels:"~%n/all/jsons/18-0a0eedd290.json"},episodeNo:18,levelsAmount:15,hard:[1,9],tricky:[7,14],language:"it"},episode_18_ja:{urls:{json:"~%n/all/%n-1384876557.json"},jsons:{levels:"~%n/all/jsons/18-6742c08aee.json"},episodeNo:18,levelsAmount:15,hard:[0,6],tricky:[8,14],language:"ja"},
episode_18_ko:{urls:{json:"~%n/all/%n-db8e70b02b.json"},jsons:{levels:"~%n/all/jsons/18-323a5582c4.json"},episodeNo:18,levelsAmount:15,hard:[2,10],tricky:[6,14],language:"ko"},episode_18_nl:{urls:{json:"~%n/all/%n-cd8a01d9cf.json"},jsons:{levels:"~%n/all/jsons/18-24c3756135.json"},episodeNo:18,levelsAmount:15,hard:[1,11],tricky:[4,9],language:"nl"},episode_18_pt:{urls:{json:"~%n/all/%n-dd8bae87c3.json"},jsons:{levels:"~%n/all/jsons/18-7211beb24d.json"},episodeNo:18,levelsAmount:15,hard:[0,7],tricky:[3,11],language:"pt"},episode_18_ru:{urls:{json:"~%n/all/%n-953c5d7e99.json"},jsons:{levels:"~%n/all/jsons/18-1ad2256c5f.json"},episodeNo:18,levelsAmount:15,hard:[0,10],tricky:[2,8],language:"ru"},episode_19:{urls:{json:"~%n/all/%n-a2fadeb8c2.json"},jsons:{levels:"~%n/all/jsons/19-0efd13e224.json"},episodeNo:19,levelsAmount:15,hard:[3,4],tricky:[7,13],language:"en"},episode_19_de:{urls:{json:"~%n/all/%n-6ee343f51a.json"},jsons:{levels:"~%n/all/jsons/19-3439703322.json"},episodeNo:19,
levelsAmount:15,hard:[4,7],tricky:[10,14],language:"de"},episode_19_es:{urls:{json:"~%n/all/%n-1d9d0b817d.json"},jsons:{levels:"~%n/all/jsons/19-2ed8d92ad1.json"},episodeNo:19,levelsAmount:15,hard:[10,13],tricky:[2,7],language:"es"},episode_19_fr:{urls:{json:"~%n/all/%n-99c1f21339.json"},jsons:{levels:"~%n/all/jsons/19-2e58be0419.json"},episodeNo:19,levelsAmount:15,hard:[4],tricky:[2,12],language:"fr"},episode_19_it:{urls:{json:"~%n/all/%n-3e54ee3c57.json"},jsons:{levels:"~%n/all/jsons/19-af30375960.json"},episodeNo:19,levelsAmount:15,hard:[8,10],tricky:[1,12],language:"it"},episode_19_ja:{urls:{json:"~%n/all/%n-e9cc8836b2.json"},jsons:{levels:"~%n/all/jsons/19-baef52b7e9.json"},episodeNo:19,levelsAmount:15,hard:[3,4],tricky:[1,10],language:"ja"},episode_19_ko:{urls:{json:"~%n/all/%n-60225828bf.json"},jsons:{levels:"~%n/all/jsons/19-92d3114cca.json"},episodeNo:19,levelsAmount:15,hard:[6,10],tricky:[0,8],language:"ko"},episode_19_nl:{urls:{json:"~%n/all/%n-5df55395ea.json"},jsons:{
levels:"~%n/all/jsons/19-7698ca34ec.json"},episodeNo:19,levelsAmount:15,hard:[0,8],tricky:[6,14],language:"nl"},episode_19_pt:{urls:{json:"~%n/all/%n-e0a3232b30.json"},jsons:{levels:"~%n/all/jsons/19-bbf5279165.json"},episodeNo:19,levelsAmount:15,hard:[4,9],tricky:[6,14],language:"pt"},episode_19_ru:{urls:{json:"~%n/all/%n-6362a3bed0.json"},jsons:{levels:"~%n/all/jsons/19-a76d22090c.json"},episodeNo:19,levelsAmount:15,hard:[3,9],tricky:[1,13],language:"ru"},episode_1_de:{urls:{json:"~%n/all/%n-f920046089.json"},jsons:{levels:"~%n/all/jsons/1-c9962c60bc.json"},episodeNo:1,levelsAmount:15,hard:[13],tricky:[],language:"de"},episode_1_es:{urls:{json:"~%n/all/%n-58bc47b3fb.json"},jsons:{levels:"~%n/all/jsons/1-a3bce24c69.json"},episodeNo:1,levelsAmount:15,hard:[8,12],tricky:[],language:"es"},episode_1_fr:{urls:{json:"~%n/all/%n-8964134bd5.json"},jsons:{levels:"~%n/all/jsons/1-0a08cf5c3b.json"},episodeNo:1,levelsAmount:15,hard:[10],tricky:[],language:"fr"},episode_1_it:{urls:{
json:"~%n/all/%n-2bfdcf34bc.json"},jsons:{levels:"~%n/all/jsons/1-35e00a6215.json"},episodeNo:1,levelsAmount:15,hard:[6,14],tricky:[],language:"it"},episode_1_ja:{urls:{json:"~%n/all/%n-85d8a12fcc.json"},jsons:{levels:"~%n/all/jsons/1-0645cc902c.json"},episodeNo:1,levelsAmount:15,hard:[8],tricky:[],language:"ja"},episode_1_ko:{urls:{json:"~%n/all/%n-c4838540fd.json"},jsons:{levels:"~%n/all/jsons/1-cdda4e77c1.json"},episodeNo:1,levelsAmount:15,hard:[10,14],tricky:[],language:"ko"},episode_1_nl:{urls:{json:"~%n/all/%n-4e4e33219c.json"},jsons:{levels:"~%n/all/jsons/1-f6e9a2f101.json"},episodeNo:1,levelsAmount:15,hard:[7,11],tricky:[],language:"nl"},episode_1_pt:{urls:{json:"~%n/all/%n-d462da2a99.json"},jsons:{levels:"~%n/all/jsons/1-7e9d903a06.json"},episodeNo:1,levelsAmount:15,hard:[9,14],tricky:[],language:"pt"},episode_1_ru:{urls:{json:"~%n/all/%n-4379958725.json"},jsons:{levels:"~%n/all/jsons/1-cafd8d713c.json"},episodeNo:1,levelsAmount:15,hard:[11,13],tricky:[],language:"ru"},
episode_2:{urls:{json:"~%n/all/%n-ae4250b0ea.json"},jsons:{levels:"~%n/all/jsons/2-fed49be048.json"},episodeNo:2,levelsAmount:15,hard:[1,5],tricky:[8,13],language:"en"},episode_20:{urls:{json:"~%n/all/%n-03605578bb.json"},jsons:{levels:"~%n/all/jsons/20-2399cde35c.json"},episodeNo:20,levelsAmount:15,hard:[6,14],tricky:[0,8],language:"en"},episode_20_de:{urls:{json:"~%n/all/%n-5391d976fc.json"},jsons:{levels:"~%n/all/jsons/20-d42787a5c6.json"},episodeNo:20,levelsAmount:15,hard:[8,12],tricky:[1,10],language:"de"},episode_20_es:{urls:{json:"~%n/all/%n-914d1da447.json"},jsons:{levels:"~%n/all/jsons/20-399b735c6a.json"},episodeNo:20,levelsAmount:15,hard:[8],tricky:[0,10],language:"es"},episode_20_fr:{urls:{json:"~%n/all/%n-d656d224f9.json"},jsons:{levels:"~%n/all/jsons/20-7be8a8cfdd.json"},episodeNo:20,levelsAmount:15,hard:[0,7],tricky:[9,14],language:"fr"},episode_20_it:{urls:{json:"~%n/all/%n-ca004df5d9.json"},jsons:{levels:"~%n/all/jsons/20-4a0ce209ee.json"},episodeNo:20,levelsAmount:15,
hard:[2,8],tricky:[5,14],language:"it"},episode_20_ja:{urls:{json:"~%n/all/%n-a27fb51fda.json"},jsons:{levels:"~%n/all/jsons/20-5ffa5f1d85.json"},episodeNo:20,levelsAmount:15,hard:[2],tricky:[6,13],language:"ja"},episode_20_ko:{urls:{json:"~%n/all/%n-77e569e7d4.json"},jsons:{levels:"~%n/all/jsons/20-b1cc4ff566.json"},episodeNo:20,levelsAmount:15,hard:[0,13],tricky:[3,9],language:"ko"},episode_20_nl:{urls:{json:"~%n/all/%n-2232d3c2dc.json"},jsons:{levels:"~%n/all/jsons/20-977ac9194f.json"},episodeNo:20,levelsAmount:15,hard:[5,9],tricky:[1,13],language:"nl"},episode_20_pt:{urls:{json:"~%n/all/%n-28522be365.json"},jsons:{levels:"~%n/all/jsons/20-667f46992b.json"},episodeNo:20,levelsAmount:15,hard:[5],tricky:[0,10],language:"pt"},episode_20_ru:{urls:{json:"~%n/all/%n-a7e02fe8cc.json"},jsons:{levels:"~%n/all/jsons/20-4afee3d0c2.json"},episodeNo:20,levelsAmount:15,hard:[0,11],tricky:[2,6],language:"ru"},episode_21:{urls:{json:"~%n/all/%n-9c31451453.json"},jsons:{
levels:"~%n/all/jsons/21-1f62b23ee6.json"},episodeNo:21,levelsAmount:15,hard:[2,11],tricky:[5,13],language:"en"},episode_21_de:{urls:{json:"~%n/all/%n-24d786400e.json"},jsons:{levels:"~%n/all/jsons/21-9eb381135d.json"},episodeNo:21,levelsAmount:15,hard:[3,11],tricky:[5,13],language:"de"},episode_21_es:{urls:{json:"~%n/all/%n-7aedd05434.json"},jsons:{levels:"~%n/all/jsons/21-75ef22cfc3.json"},episodeNo:21,levelsAmount:15,hard:[0,12],tricky:[3,9],language:"es"},episode_21_fr:{urls:{json:"~%n/all/%n-6d3fd3781d.json"},jsons:{levels:"~%n/all/jsons/21-b9059cf1d5.json"},episodeNo:21,levelsAmount:15,hard:[6,13],tricky:[1,10],language:"fr"},episode_21_it:{urls:{json:"~%n/all/%n-482dbd6100.json"},jsons:{levels:"~%n/all/jsons/21-5f0fcde251.json"},episodeNo:21,levelsAmount:15,hard:[1,2],tricky:[4,10],language:"it"},episode_21_ja:{urls:{json:"~%n/all/%n-55a8f59a61.json"},jsons:{levels:"~%n/all/jsons/21-ed04afb378.json"},episodeNo:21,levelsAmount:15,hard:[4,5],tricky:[0,10],language:"ja"},
episode_21_ko:{urls:{json:"~%n/all/%n-a124f47408.json"},jsons:{levels:"~%n/all/jsons/21-c55f130d9a.json"},episodeNo:21,levelsAmount:15,hard:[3,13],tricky:[7,11],language:"ko"},episode_21_nl:{urls:{json:"~%n/all/%n-0d8d318df9.json"},jsons:{levels:"~%n/all/jsons/21-8aa2ef0ace.json"},episodeNo:21,levelsAmount:15,hard:[2,6],tricky:[8,14],language:"nl"},episode_21_pt:{urls:{json:"~%n/all/%n-b886870267.json"},jsons:{levels:"~%n/all/jsons/21-634e4310c2.json"},episodeNo:21,levelsAmount:15,hard:[7,14],tricky:[1,10],language:"pt"},episode_21_ru:{urls:{json:"~%n/all/%n-5cb1c16c97.json"},jsons:{levels:"~%n/all/jsons/21-3c0ff86cfc.json"},episodeNo:21,levelsAmount:15,hard:[4,11],tricky:[1,13],language:"ru"},episode_22:{urls:{json:"~%n/all/%n-2b830870d8.json"},jsons:{levels:"~%n/all/jsons/22-6818e0d818.json"},episodeNo:22,levelsAmount:15,hard:[0,1],tricky:[3,10],language:"en"},episode_22_de:{urls:{json:"~%n/all/%n-1ba85b1c1a.json"},jsons:{levels:"~%n/all/jsons/22-b5327e28c2.json"},episodeNo:22,
levelsAmount:15,hard:[1,13],tricky:[3,8],language:"de"},episode_22_es:{urls:{json:"~%n/all/%n-94d969fcb3.json"},jsons:{levels:"~%n/all/jsons/22-eec1de16fd.json"},episodeNo:22,levelsAmount:15,hard:[12,14],tricky:[4,10],language:"es"},episode_22_fr:{urls:{json:"~%n/all/%n-201ce1b1e5.json"},jsons:{levels:"~%n/all/jsons/22-7dd6c3c959.json"},episodeNo:22,levelsAmount:15,hard:[1,5],tricky:[8,13],language:"fr"},episode_22_it:{urls:{json:"~%n/all/%n-95c5d74502.json"},jsons:{levels:"~%n/all/jsons/22-b164c7ef02.json"},episodeNo:22,levelsAmount:15,hard:[3,12],tricky:[5,10],language:"it"},episode_22_ja:{urls:{json:"~%n/all/%n-d264eb8db5.json"},jsons:{levels:"~%n/all/jsons/22-d74bb720d7.json"},episodeNo:22,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"ja"},episode_22_ko:{urls:{json:"~%n/all/%n-74de43b8de.json"},jsons:{levels:"~%n/all/jsons/22-734f537103.json"},episodeNo:22,levelsAmount:15,hard:[12,13],tricky:[1,8],language:"ko"},episode_22_nl:{urls:{json:"~%n/all/%n-035fc58569.json"},jsons:{
levels:"~%n/all/jsons/22-8695ceca1c.json"},episodeNo:22,levelsAmount:15,hard:[2,11],tricky:[0,8],language:"nl"},episode_22_pt:{urls:{json:"~%n/all/%n-3fde950b76.json"},jsons:{levels:"~%n/all/jsons/22-d54ac5c262.json"},episodeNo:22,levelsAmount:15,hard:[2,10],tricky:[7,14],language:"pt"},episode_22_ru:{urls:{json:"~%n/all/%n-279cc8df1f.json"},jsons:{levels:"~%n/all/jsons/22-abf0732956.json"},episodeNo:22,levelsAmount:15,hard:[8,14],tricky:[3,12],language:"ru"},episode_23:{urls:{json:"~%n/all/%n-7768d8bb53.json"},jsons:{levels:"~%n/all/jsons/23-9865845772.json"},episodeNo:23,levelsAmount:15,hard:[3,14],tricky:[1,10],language:"en"},episode_23_de:{urls:{json:"~%n/all/%n-ed1f7e98a8.json"},jsons:{levels:"~%n/all/jsons/23-102054dac4.json"},episodeNo:23,levelsAmount:15,hard:[4,9],tricky:[2,13],language:"de"},episode_23_es:{urls:{json:"~%n/all/%n-cfa041703e.json"},jsons:{levels:"~%n/all/jsons/23-2db5f07641.json"},episodeNo:23,levelsAmount:15,hard:[2],tricky:[4,11],language:"es"},episode_23_fr:{
urls:{json:"~%n/all/%n-26c3161964.json"},jsons:{levels:"~%n/all/jsons/23-5f11cd7444.json"},episodeNo:23,levelsAmount:15,hard:[8,13],tricky:[0,5],language:"fr"},episode_23_it:{urls:{json:"~%n/all/%n-d2e8fe8c96.json"},jsons:{levels:"~%n/all/jsons/23-0551f32b07.json"},episodeNo:23,levelsAmount:15,hard:[4,11],tricky:[0,8],language:"it"},episode_23_ja:{urls:{json:"~%n/all/%n-7cba7d30cc.json"},jsons:{levels:"~%n/all/jsons/23-2327befbf8.json"},episodeNo:23,levelsAmount:15,hard:[9,12],tricky:[4,14],language:"ja"},episode_23_ko:{urls:{json:"~%n/all/%n-af4583f9b3.json"},jsons:{levels:"~%n/all/jsons/23-a03e4d7820.json"},episodeNo:23,levelsAmount:15,hard:[1,5],tricky:[8,13],language:"ko"},episode_23_nl:{urls:{json:"~%n/all/%n-99e5016d2a.json"},jsons:{levels:"~%n/all/jsons/23-243b7725b6.json"},episodeNo:23,levelsAmount:15,hard:[3,10],tricky:[5,13],language:"nl"},episode_23_pt:{urls:{json:"~%n/all/%n-3dc76124a9.json"},jsons:{levels:"~%n/all/jsons/23-05fc338f79.json"},episodeNo:23,levelsAmount:15,
hard:[5,14],tricky:[1,10],language:"pt"},episode_23_ru:{urls:{json:"~%n/all/%n-9aeab2b073.json"},jsons:{levels:"~%n/all/jsons/23-86a036a78e.json"},episodeNo:23,levelsAmount:15,hard:[6],tricky:[1,10],language:"ru"},episode_24:{urls:{json:"~%n/all/%n-90e6e084dd.json"},jsons:{levels:"~%n/all/jsons/24-c3345784f3.json"},episodeNo:24,levelsAmount:15,hard:[1,12],tricky:[6,14],language:"en"},episode_24_de:{urls:{json:"~%n/all/%n-82482beba1.json"},jsons:{levels:"~%n/all/jsons/24-9fb464d740.json"},episodeNo:24,levelsAmount:15,hard:[3,13],tricky:[6,11],language:"de"},episode_24_es:{urls:{json:"~%n/all/%n-5a358c54a0.json"},jsons:{levels:"~%n/all/jsons/24-9fc26874db.json"},episodeNo:24,levelsAmount:15,hard:[6,7],tricky:[2,13],language:"es"},episode_24_fr:{urls:{json:"~%n/all/%n-b835d13437.json"},jsons:{levels:"~%n/all/jsons/24-d25055decb.json"},episodeNo:24,levelsAmount:15,hard:[7,14],tricky:[2,11],language:"fr"},episode_24_it:{urls:{json:"~%n/all/%n-d8db33da97.json"},jsons:{
levels:"~%n/all/jsons/24-bf93573878.json"},episodeNo:24,levelsAmount:15,hard:[1,11],tricky:[4,9],language:"it"},episode_24_ja:{urls:{json:"~%n/all/%n-208e210611.json"},jsons:{levels:"~%n/all/jsons/24-ac964528c9.json"},episodeNo:24,levelsAmount:15,hard:[2,13],tricky:[4,10],language:"ja"},episode_24_ko:{urls:{json:"~%n/all/%n-6c80647e15.json"},jsons:{levels:"~%n/all/jsons/24-13962867ac.json"},episodeNo:24,levelsAmount:15,hard:[3,5],tricky:[0,10],language:"ko"},episode_24_nl:{urls:{json:"~%n/all/%n-90691432fe.json"},jsons:{levels:"~%n/all/jsons/24-ca975e709f.json"},episodeNo:24,levelsAmount:15,hard:[6,9],tricky:[0,11],language:"nl"},episode_24_pt:{urls:{json:"~%n/all/%n-4b2d1fbaad.json"},jsons:{levels:"~%n/all/jsons/24-a337c8eea6.json"},episodeNo:24,levelsAmount:15,hard:[3,5],tricky:[7,13],language:"pt"},episode_24_ru:{urls:{json:"~%n/all/%n-ad21aea648.json"},jsons:{levels:"~%n/all/jsons/24-b061c0751a.json"},episodeNo:24,levelsAmount:15,hard:[8,14],tricky:[3,11],language:"ru"},
episode_25:{urls:{json:"~%n/all/%n-9798ffb6b4.json"},jsons:{levels:"~%n/all/jsons/25-2ee9105522.json"},episodeNo:25,levelsAmount:15,hard:[0,1],tricky:[4,11],language:"en"},episode_25_de:{urls:{json:"~%n/all/%n-f16dd8bc25.json"},jsons:{levels:"~%n/all/jsons/25-22c7dce3a1.json"},episodeNo:25,levelsAmount:15,hard:[1],tricky:[4,11],language:"de"},episode_25_es:{urls:{json:"~%n/all/%n-3c05aa81fb.json"},jsons:{levels:"~%n/all/jsons/25-8422bd41fb.json"},episodeNo:25,levelsAmount:15,hard:[11,13],tricky:[0,5],language:"es"},episode_25_fr:{urls:{json:"~%n/all/%n-c217e6741d.json"},jsons:{levels:"~%n/all/jsons/25-37777ce45e.json"},episodeNo:25,levelsAmount:15,hard:[2,12],tricky:[6,14],language:"fr"},episode_25_it:{urls:{json:"~%n/all/%n-be2ed02f08.json"},jsons:{levels:"~%n/all/jsons/25-9fefc68a07.json"},episodeNo:25,levelsAmount:15,hard:[11],tricky:[5,14],language:"it"},episode_25_ja:{urls:{json:"~%n/all/%n-78e40b683a.json"},jsons:{levels:"~%n/all/jsons/25-ef9638c560.json"},episodeNo:25,
levelsAmount:15,hard:[8,9],tricky:[3,13],language:"ja"},episode_25_ko:{urls:{json:"~%n/all/%n-522accf75b.json"},jsons:{levels:"~%n/all/jsons/25-0037324043.json"},episodeNo:25,levelsAmount:15,hard:[0,8],tricky:[4,13],language:"ko"},episode_25_nl:{urls:{json:"~%n/all/%n-db1f8155b9.json"},jsons:{levels:"~%n/all/jsons/25-75c90317ef.json"},episodeNo:25,levelsAmount:15,hard:[1,12],tricky:[4,9],language:"nl"},episode_25_pt:{urls:{json:"~%n/all/%n-63fa16fbce.json"},jsons:{levels:"~%n/all/jsons/25-c3c25bddf3.json"},episodeNo:25,levelsAmount:15,hard:[1,2],tricky:[4,10],language:"pt"},episode_25_ru:{urls:{json:"~%n/all/%n-a40c640a0c.json"},jsons:{levels:"~%n/all/jsons/25-f4405ca1fb.json"},episodeNo:25,levelsAmount:15,hard:[6,14],tricky:[0,9],language:"ru"},episode_26:{urls:{json:"~%n/all/%n-a3eaed0131.json"},jsons:{levels:"~%n/all/jsons/26-b9df03d32d.json"},episodeNo:26,levelsAmount:15,hard:[9],tricky:[3,13],language:"en"},episode_26_de:{urls:{json:"~%n/all/%n-a12194ea21.json"},jsons:{
levels:"~%n/all/jsons/26-c926afa381.json"},episodeNo:26,levelsAmount:15,hard:[2,14],tricky:[7,12],language:"de"},episode_26_es:{urls:{json:"~%n/all/%n-ab320f9daf.json"},jsons:{levels:"~%n/all/jsons/26-04bf4f5f9c.json"},episodeNo:26,levelsAmount:15,hard:[3,14],tricky:[5,11],language:"es"},episode_26_fr:{urls:{json:"~%n/all/%n-2cff5f710d.json"},jsons:{levels:"~%n/all/jsons/26-cf943d259f.json"},episodeNo:26,levelsAmount:15,hard:[13,14],tricky:[1,8],language:"fr"},episode_26_it:{urls:{json:"~%n/all/%n-b9a35c52c6.json"},jsons:{levels:"~%n/all/jsons/26-6f9ffbc6a5.json"},episodeNo:26,levelsAmount:15,hard:[3,6],tricky:[1,12],language:"it"},episode_26_ja:{urls:{json:"~%n/all/%n-f8d6bc9c1b.json"},jsons:{levels:"~%n/all/jsons/26-897dc10458.json"},episodeNo:26,levelsAmount:15,hard:[12,14],tricky:[0,6],language:"ja"},episode_26_ko:{urls:{json:"~%n/all/%n-e796e59f4f.json"},jsons:{levels:"~%n/all/jsons/26-80a5d8d63f.json"},episodeNo:26,levelsAmount:15,hard:[1,10],tricky:[3,8],language:"ko"},
episode_26_nl:{urls:{json:"~%n/all/%n-be91097075.json"},jsons:{levels:"~%n/all/jsons/26-48dbc68b7c.json"},episodeNo:26,levelsAmount:15,hard:[4,8],tricky:[6,14],language:"nl"},episode_26_pt:{urls:{json:"~%n/all/%n-b54a819f59.json"},jsons:{levels:"~%n/all/jsons/26-1fb9781b39.json"},episodeNo:26,levelsAmount:15,hard:[0,10],tricky:[5,13],language:"pt"},episode_26_ru:{urls:{json:"~%n/all/%n-c54325dcb7.json"},jsons:{levels:"~%n/all/jsons/26-e60b00008b.json"},episodeNo:26,levelsAmount:15,hard:[1,5],tricky:[7,12],language:"ru"},episode_27:{urls:{json:"~%n/all/%n-5e2c813870.json"},jsons:{levels:"~%n/all/jsons/27-6d9e3350ee.json"},episodeNo:27,levelsAmount:15,hard:[6,11],tricky:[0,4],language:"en"},episode_27_de:{urls:{json:"~%n/all/%n-2196a788b0.json"},jsons:{levels:"~%n/all/jsons/27-588dac935d.json"},episodeNo:27,levelsAmount:15,hard:[8,13],tricky:[1,6],language:"de"},episode_27_es:{urls:{json:"~%n/all/%n-4ec6a5cca6.json"},jsons:{levels:"~%n/all/jsons/27-8a3033cb9b.json"},episodeNo:27,
levelsAmount:15,hard:[0,8],tricky:[5,14],language:"es"},episode_27_fr:{urls:{json:"~%n/all/%n-d8136fb44a.json"},jsons:{levels:"~%n/all/jsons/27-0ca1502a19.json"},episodeNo:27,levelsAmount:15,hard:[5,13],tricky:[3,11],language:"fr"},episode_27_it:{urls:{json:"~%n/all/%n-eb44d8fb49.json"},jsons:{levels:"~%n/all/jsons/27-23256ccf7d.json"},episodeNo:27,levelsAmount:15,hard:[3,7],tricky:[5,13],language:"it"},episode_27_ja:{urls:{json:"~%n/all/%n-8d1122bd47.json"},jsons:{levels:"~%n/all/jsons/27-c7e49161e8.json"},episodeNo:27,levelsAmount:15,hard:[0,8],tricky:[4,13],language:"ja"},episode_27_ko:{urls:{json:"~%n/all/%n-14a52f4355.json"},jsons:{levels:"~%n/all/jsons/27-89b1de12bc.json"},episodeNo:27,levelsAmount:15,hard:[1],tricky:[5,11],language:"ko"},episode_27_nl:{urls:{json:"~%n/all/%n-884f72b975.json"},jsons:{levels:"~%n/all/jsons/27-1b9a88a469.json"},episodeNo:27,levelsAmount:15,hard:[8,12],tricky:[1,6],language:"nl"},episode_27_pt:{urls:{json:"~%n/all/%n-3623fcbb82.json"},jsons:{
levels:"~%n/all/jsons/27-bd5a209703.json"},episodeNo:27,levelsAmount:15,hard:[1,10],tricky:[3,8],language:"pt"},episode_27_ru:{urls:{json:"~%n/all/%n-04743912b9.json"},jsons:{levels:"~%n/all/jsons/27-c2629fdd8c.json"},episodeNo:27,levelsAmount:15,hard:[3,11],tricky:[7,14],language:"ru"},episode_28:{urls:{json:"~%n/all/%n-e1f3702b5b.json"},jsons:{levels:"~%n/all/jsons/28-eb382324dc.json"},episodeNo:28,levelsAmount:15,hard:[4,13],tricky:[2,10],language:"en"},episode_28_de:{urls:{json:"~%n/all/%n-f5f33afb4d.json"},jsons:{levels:"~%n/all/jsons/28-ffe169cde7.json"},episodeNo:28,levelsAmount:15,hard:[8,10],tricky:[2,13],language:"de"},episode_28_es:{urls:{json:"~%n/all/%n-55279a1f74.json"},jsons:{levels:"~%n/all/jsons/28-feddd506b8.json"},episodeNo:28,levelsAmount:15,hard:[3,4],tricky:[1,11],language:"es"},episode_28_fr:{urls:{json:"~%n/all/%n-42f08e7600.json"},jsons:{levels:"~%n/all/jsons/28-154315aeca.json"},episodeNo:28,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"fr"},
episode_28_it:{urls:{json:"~%n/all/%n-362e1fae0d.json"},jsons:{levels:"~%n/all/jsons/28-f7518a3f9e.json"},episodeNo:28,levelsAmount:15,hard:[6,12],tricky:[0,4],language:"it"},episode_28_ja:{urls:{json:"~%n/all/%n-1668f2fe69.json"},jsons:{levels:"~%n/all/jsons/28-8f28bb29e7.json"},episodeNo:28,levelsAmount:15,hard:[6,13],tricky:[3,11],language:"ja"},episode_28_ko:{urls:{json:"~%n/all/%n-f2d652a514.json"},jsons:{levels:"~%n/all/jsons/28-87eb94fbed.json"},episodeNo:28,levelsAmount:15,hard:[3,11],tricky:[6,14],language:"ko"},episode_28_nl:{urls:{json:"~%n/all/%n-b50ee14fea.json"},jsons:{levels:"~%n/all/jsons/28-19786e1a9d.json"},episodeNo:28,levelsAmount:15,hard:[10],tricky:[3,13],language:"nl"},episode_28_pt:{urls:{json:"~%n/all/%n-74ed454199.json"},jsons:{levels:"~%n/all/jsons/28-bd6109980e.json"},episodeNo:28,levelsAmount:15,hard:[2,5],tricky:[7,12],language:"pt"},episode_28_ru:{urls:{json:"~%n/all/%n-072246b708.json"},jsons:{levels:"~%n/all/jsons/28-9278a306e3.json"},episodeNo:28,
levelsAmount:15,hard:[3,10],tricky:[1,12],language:"ru"},episode_29:{urls:{json:"~%n/all/%n-dde398042d.json"},jsons:{levels:"~%n/all/jsons/29-badebdab39.json"},episodeNo:29,levelsAmount:15,hard:[0,10],tricky:[5,14],language:"en"},episode_29_de:{urls:{json:"~%n/all/%n-1ff071dbdf.json"},jsons:{levels:"~%n/all/jsons/29-25bb8fafd1.json"},episodeNo:29,levelsAmount:15,hard:[4,14],tricky:[0,8],language:"de"},episode_29_es:{urls:{json:"~%n/all/%n-f9fa62da41.json"},jsons:{levels:"~%n/all/jsons/29-d3313ddeef.json"},episodeNo:29,levelsAmount:15,hard:[5,10],tricky:[3,14],language:"es"},episode_29_fr:{urls:{json:"~%n/all/%n-d54c2565b0.json"},jsons:{levels:"~%n/all/jsons/29-43c94e718f.json"},episodeNo:29,levelsAmount:15,hard:[1,7],tricky:[5,13],language:"fr"},episode_29_it:{urls:{json:"~%n/all/%n-1ea07ec4bf.json"},jsons:{levels:"~%n/all/jsons/29-835bb71e96.json"},episodeNo:29,levelsAmount:15,hard:[3,9],tricky:[5,13],language:"it"},episode_29_ja:{urls:{json:"~%n/all/%n-560608f627.json"},jsons:{
levels:"~%n/all/jsons/29-6878976159.json"},episodeNo:29,levelsAmount:15,hard:[0,5],tricky:[3,11],language:"ja"},episode_29_ko:{urls:{json:"~%n/all/%n-1f7e7fcaec.json"},jsons:{levels:"~%n/all/jsons/29-d16fdc5cba.json"},episodeNo:29,levelsAmount:15,hard:[1,6],tricky:[4,12],language:"ko"},episode_29_nl:{urls:{json:"~%n/all/%n-e4115a14bc.json"},jsons:{levels:"~%n/all/jsons/29-fd2cd1bccb.json"},episodeNo:29,levelsAmount:15,hard:[0,12],tricky:[2,7],language:"nl"},episode_29_pt:{urls:{json:"~%n/all/%n-9c46ac1e38.json"},jsons:{levels:"~%n/all/jsons/29-6967ddbe1f.json"},episodeNo:29,levelsAmount:15,hard:[3,5],tricky:[9,14],language:"pt"},episode_29_ru:{urls:{json:"~%n/all/%n-d53b293d16.json"},jsons:{levels:"~%n/all/jsons/29-47fb41a5d7.json"},episodeNo:29,levelsAmount:15,hard:[7,13],tricky:[2,10],language:"ru"},episode_2_de:{urls:{json:"~%n/all/%n-bd29d80a84.json"},jsons:{levels:"~%n/all/jsons/2-3eda08a8ea.json"},episodeNo:2,levelsAmount:15,hard:[11],tricky:[4,14],language:"de"},episode_2_es:{
urls:{json:"~%n/all/%n-0d5e242c3f.json"},jsons:{levels:"~%n/all/jsons/2-8edcd6ca29.json"},episodeNo:2,levelsAmount:15,hard:[12],tricky:[3,10],language:"es"},episode_2_fr:{urls:{json:"~%n/all/%n-2e52395d26.json"},jsons:{levels:"~%n/all/jsons/2-dc2f7ac829.json"},episodeNo:2,levelsAmount:15,hard:[2,9],tricky:[4,12],language:"fr"},episode_2_it:{urls:{json:"~%n/all/%n-98bb4ea1d2.json"},jsons:{levels:"~%n/all/jsons/2-0da504774c.json"},episodeNo:2,levelsAmount:15,hard:[11],tricky:[1,8],language:"it"},episode_2_ja:{urls:{json:"~%n/all/%n-8680ed467d.json"},jsons:{levels:"~%n/all/jsons/2-6a3fc44f95.json"},episodeNo:2,levelsAmount:15,hard:[12],tricky:[0,6],language:"ja"},episode_2_ko:{urls:{json:"~%n/all/%n-782bc55087.json"},jsons:{levels:"~%n/all/jsons/2-39ffcd8d94.json"},episodeNo:2,levelsAmount:15,hard:[3,11],tricky:[0,8],language:"ko"},episode_2_nl:{urls:{json:"~%n/all/%n-7102e40616.json"},jsons:{levels:"~%n/all/jsons/2-11ebd3201d.json"},episodeNo:2,levelsAmount:15,hard:[10,14],tricky:[4,12],
language:"nl"},episode_2_pt:{urls:{json:"~%n/all/%n-b349b50bd8.json"},jsons:{levels:"~%n/all/jsons/2-0b37f84f6f.json"},episodeNo:2,levelsAmount:15,hard:[12],tricky:[3,10],language:"pt"},episode_2_ru:{urls:{json:"~%n/all/%n-c60151bb0a.json"},jsons:{levels:"~%n/all/jsons/2-d73e59790c.json"},episodeNo:2,levelsAmount:15,hard:[5,9],tricky:[1,12],language:"ru"},episode_3:{urls:{json:"~%n/all/%n-70bb5c1363.json"},jsons:{levels:"~%n/all/jsons/3-031ee04703.json"},episodeNo:3,levelsAmount:15,hard:[0,8],tricky:[2,10],language:"en"},episode_30:{urls:{json:"~%n/all/%n-ffff037d57.json"},jsons:{levels:"~%n/all/jsons/30-e078f0a177.json"},episodeNo:30,levelsAmount:15,hard:[2,8],tricky:[4,12],language:"en"},episode_30_de:{urls:{json:"~%n/all/%n-11036ddce3.json"},jsons:{levels:"~%n/all/jsons/30-4706a8bc0e.json"},episodeNo:30,levelsAmount:15,hard:[4,8],tricky:[2,13],language:"de"},episode_30_es:{urls:{json:"~%n/all/%n-38fc0ab043.json"},jsons:{levels:"~%n/all/jsons/30-877515ead2.json"},episodeNo:30,
levelsAmount:15,hard:[8,10],tricky:[1,12],language:"es"},episode_30_fr:{urls:{json:"~%n/all/%n-0c13a0c064.json"},jsons:{levels:"~%n/all/jsons/30-e1f59b00f9.json"},episodeNo:30,levelsAmount:15,hard:[3,7],tricky:[0,10],language:"fr"},episode_30_it:{urls:{json:"~%n/all/%n-bf52e4a012.json"},jsons:{levels:"~%n/all/jsons/30-6b61694131.json"},episodeNo:30,levelsAmount:15,hard:[5,12],tricky:[3,14],language:"it"},episode_30_ja:{urls:{json:"~%n/all/%n-be85d122d9.json"},jsons:{levels:"~%n/all/jsons/30-7c9a69f7d8.json"},episodeNo:30,levelsAmount:15,hard:[7],tricky:[4,14],language:"ja"},episode_30_ko:{urls:{json:"~%n/all/%n-da1c88e715.json"},jsons:{levels:"~%n/all/jsons/30-aa710b3301.json"},episodeNo:30,levelsAmount:15,hard:[5,6],tricky:[2,13],language:"ko"},episode_30_nl:{urls:{json:"~%n/all/%n-e61c120dcd.json"},jsons:{levels:"~%n/all/jsons/30-58b21fd07f.json"},episodeNo:30,levelsAmount:15,hard:[5,14],tricky:[2,11],language:"nl"},episode_30_pt:{urls:{json:"~%n/all/%n-238fe0e2fd.json"},jsons:{
levels:"~%n/all/jsons/30-45ec386eee.json"},episodeNo:30,levelsAmount:15,hard:[11,12],tricky:[1,8],language:"pt"},episode_30_ru:{urls:{json:"~%n/all/%n-d68f100de9.json"},jsons:{levels:"~%n/all/jsons/30-24e8f17040.json"},episodeNo:30,levelsAmount:15,hard:[8],tricky:[0,6],language:"ru"},episode_31:{urls:{json:"~%n/all/%n-c73d0558f7.json"},jsons:{levels:"~%n/all/jsons/31-32839242a9.json"},episodeNo:31,levelsAmount:15,hard:[0,2],tricky:[8,14],language:"en"},episode_31_de:{urls:{json:"~%n/all/%n-45a3ebb412.json"},jsons:{levels:"~%n/all/jsons/31-b8439bab1c.json"},episodeNo:31,levelsAmount:15,hard:[10,14],tricky:[3,12],language:"de"},episode_31_es:{urls:{json:"~%n/all/%n-7d66216c53.json"},jsons:{levels:"~%n/all/jsons/31-66112f6fe7.json"},episodeNo:31,levelsAmount:15,hard:[7,14],tricky:[2,11],language:"es"},episode_31_fr:{urls:{json:"~%n/all/%n-acaeddb18c.json"},jsons:{levels:"~%n/all/jsons/31-bfc57b3f76.json"},episodeNo:31,levelsAmount:15,hard:[3,12],tricky:[5,10],language:"fr"},
episode_31_it:{urls:{json:"~%n/all/%n-d84e8b9497.json"},jsons:{levels:"~%n/all/jsons/31-9f07f2edeb.json"},episodeNo:31,levelsAmount:15,hard:[3,8],tricky:[1,12],language:"it"},episode_31_ja:{urls:{json:"~%n/all/%n-71d3c9b7bf.json"},jsons:{levels:"~%n/all/jsons/31-6b57a32daa.json"},episodeNo:31,levelsAmount:15,hard:[3,9],tricky:[1,12],language:"ja"},episode_31_ko:{urls:{json:"~%n/all/%n-390d5ec38d.json"},jsons:{levels:"~%n/all/jsons/31-ef87a3be38.json"},episodeNo:31,levelsAmount:15,hard:[10],tricky:[0,6],language:"ko"},episode_31_nl:{urls:{json:"~%n/all/%n-4ecd9b4e95.json"},jsons:{levels:"~%n/all/jsons/31-b788a77e43.json"},episodeNo:31,levelsAmount:15,hard:[2,10],tricky:[6,14],language:"nl"},episode_31_pt:{urls:{json:"~%n/all/%n-d1c1e9989c.json"},jsons:{levels:"~%n/all/jsons/31-40d4a303ec.json"},episodeNo:31,levelsAmount:15,hard:[0,8],tricky:[4,13],language:"pt"},episode_31_ru:{urls:{json:"~%n/all/%n-5d8fad0ab3.json"},jsons:{levels:"~%n/all/jsons/31-294e1afb44.json"},episodeNo:31,
levelsAmount:15,hard:[1,9],tricky:[5,13],language:"ru"},episode_32:{urls:{json:"~%n/all/%n-2dea49d1b7.json"},jsons:{levels:"~%n/all/jsons/32-0d61e3d6b0.json"},episodeNo:32,levelsAmount:15,hard:[0,6],tricky:[2,11],language:"en"},episode_32_de:{urls:{json:"~%n/all/%n-c790c712bf.json"},jsons:{levels:"~%n/all/jsons/32-224afc0522.json"},episodeNo:32,levelsAmount:15,hard:[2,11],tricky:[4,8],language:"de"},episode_32_es:{urls:{json:"~%n/all/%n-492ac23260.json"},jsons:{levels:"~%n/all/jsons/32-b31117ced2.json"},episodeNo:32,levelsAmount:15,hard:[4,14],tricky:[0,8],language:"es"},episode_32_fr:{urls:{json:"~%n/all/%n-05786d0fc3.json"},jsons:{levels:"~%n/all/jsons/32-df3bebc910.json"},episodeNo:32,levelsAmount:15,hard:[2],tricky:[7,14],language:"fr"},episode_32_it:{urls:{json:"~%n/all/%n-68bd2d4020.json"},jsons:{levels:"~%n/all/jsons/32-22bcd42190.json"},episodeNo:32,levelsAmount:15,hard:[2,6],tricky:[9,14],language:"it"},episode_32_ja:{urls:{json:"~%n/all/%n-274a74f5da.json"},jsons:{
levels:"~%n/all/jsons/32-2aaa1209c6.json"},episodeNo:32,levelsAmount:15,hard:[1,13],tricky:[5,10],language:"ja"},episode_32_ko:{urls:{json:"~%n/all/%n-d40750559a.json"},jsons:{levels:"~%n/all/jsons/32-3191335ecf.json"},episodeNo:32,levelsAmount:15,hard:[10],tricky:[3,12],language:"ko"},episode_32_nl:{urls:{json:"~%n/all/%n-e9ea798e4a.json"},jsons:{levels:"~%n/all/jsons/32-30438c7a4e.json"},episodeNo:32,levelsAmount:15,hard:[1,8],tricky:[4,12],language:"nl"},episode_32_pt:{urls:{json:"~%n/all/%n-9dc51c46c3.json"},jsons:{levels:"~%n/all/jsons/32-42747fd83a.json"},episodeNo:32,levelsAmount:15,hard:[3,7],tricky:[0,10],language:"pt"},episode_32_ru:{urls:{json:"~%n/all/%n-574039b6ca.json"},jsons:{levels:"~%n/all/jsons/32-99c433fc91.json"},episodeNo:32,levelsAmount:15,hard:[1,10],tricky:[6,14],language:"ru"},episode_33:{urls:{json:"~%n/all/%n-17055df1e4.json"},jsons:{levels:"~%n/all/jsons/33-03ec597410.json"},episodeNo:33,levelsAmount:15,hard:[0],tricky:[5,12],language:"en"},episode_33_de:{
urls:{json:"~%n/all/%n-1a1da7c4cf.json"},jsons:{levels:"~%n/all/jsons/33-ea4e25bcba.json"},episodeNo:33,levelsAmount:15,hard:[4,13],tricky:[6,11],language:"de"},episode_33_es:{urls:{json:"~%n/all/%n-394b798514.json"},jsons:{levels:"~%n/all/jsons/33-039c72d954.json"},episodeNo:33,levelsAmount:15,hard:[1,7],tricky:[5,13],language:"es"},episode_33_fr:{urls:{json:"~%n/all/%n-439b17fc26.json"},jsons:{levels:"~%n/all/jsons/33-7540dbf579.json"},episodeNo:33,levelsAmount:15,hard:[1,8],tricky:[4,11],language:"fr"},episode_33_it:{urls:{json:"~%n/all/%n-b4f4718872.json"},jsons:{levels:"~%n/all/jsons/33-c7b81f03ed.json"},episodeNo:33,levelsAmount:15,hard:[11,13],tricky:[0,6],language:"it"},episode_33_ja:{urls:{json:"~%n/all/%n-a19d4dd2bf.json"},jsons:{levels:"~%n/all/jsons/33-308fd93820.json"},episodeNo:33,levelsAmount:15,hard:[0,6],tricky:[2,10],language:"ja"},episode_33_ko:{urls:{json:"~%n/all/%n-4c4321b692.json"},jsons:{levels:"~%n/all/jsons/33-da8e725cf4.json"},episodeNo:33,levelsAmount:15,
hard:[4,9],tricky:[6,14],language:"ko"},episode_33_nl:{urls:{json:"~%n/all/%n-eec8e5f944.json"},jsons:{levels:"~%n/all/jsons/33-19c8adb496.json"},episodeNo:33,levelsAmount:15,hard:[6,7],tricky:[4,14],language:"nl"},episode_33_pt:{urls:{json:"~%n/all/%n-c26085af4e.json"},jsons:{levels:"~%n/all/jsons/33-36a86b1199.json"},episodeNo:33,levelsAmount:15,hard:[8,12],tricky:[2,10],language:"pt"},episode_33_ru:{urls:{json:"~%n/all/%n-dea5282f67.json"},jsons:{levels:"~%n/all/jsons/33-c0e990cc6a.json"},episodeNo:33,levelsAmount:15,hard:[0,14],tricky:[3,9],language:"ru"},episode_34:{urls:{json:"~%n/all/%n-067b82d612.json"},jsons:{levels:"~%n/all/jsons/34-36744e52a2.json"},episodeNo:34,levelsAmount:15,hard:[4,6],tricky:[0,10],language:"en"},episode_34_de:{urls:{json:"~%n/all/%n-ba509e9634.json"},jsons:{levels:"~%n/all/jsons/34-42bd2bf40f.json"},episodeNo:34,levelsAmount:15,hard:[8,13],tricky:[0,6],language:"de"},episode_34_es:{urls:{json:"~%n/all/%n-d17876d0de.json"},jsons:{
levels:"~%n/all/jsons/34-784d69829b.json"},episodeNo:34,levelsAmount:15,hard:[0,13],tricky:[5,11],language:"es"},episode_34_fr:{urls:{json:"~%n/all/%n-06912a3374.json"},jsons:{levels:"~%n/all/jsons/34-507041a9a1.json"},episodeNo:34,levelsAmount:15,hard:[4,9],tricky:[6,14],language:"fr"},episode_34_it:{urls:{json:"~%n/all/%n-cb34122bf2.json"},jsons:{levels:"~%n/all/jsons/34-875b6e7508.json"},episodeNo:34,levelsAmount:15,hard:[2,13],tricky:[4,10],language:"it"},episode_34_ja:{urls:{json:"~%n/all/%n-746d07e380.json"},jsons:{levels:"~%n/all/jsons/34-9bc7661e6e.json"},episodeNo:34,levelsAmount:15,hard:[5,12],tricky:[2,10],language:"ja"},episode_34_ko:{urls:{json:"~%n/all/%n-20d894a781.json"},jsons:{levels:"~%n/all/jsons/34-e8f6ea3084.json"},episodeNo:34,levelsAmount:15,hard:[0,8],tricky:[3,11],language:"ko"},episode_34_nl:{urls:{json:"~%n/all/%n-1997fa5ae5.json"},jsons:{levels:"~%n/all/jsons/34-61db50fccb.json"},episodeNo:34,levelsAmount:15,hard:[3,9],tricky:[0,12],language:"nl"},
episode_34_pt:{urls:{json:"~%n/all/%n-6dc3548a90.json"},jsons:{levels:"~%n/all/jsons/34-d92eee0d89.json"},episodeNo:34,levelsAmount:15,hard:[1,13],tricky:[6,11],language:"pt"},episode_34_ru:{urls:{json:"~%n/all/%n-dca110197d.json"},jsons:{levels:"~%n/all/jsons/34-d1b3bda578.json"},episodeNo:34,levelsAmount:15,hard:[9],tricky:[4,14],language:"ru"},episode_35:{urls:{json:"~%n/all/%n-5554da156d.json"},jsons:{levels:"~%n/all/jsons/35-9eb757f616.json"},episodeNo:35,levelsAmount:15,hard:[6],tricky:[2,12],language:"en"},episode_35_de:{urls:{json:"~%n/all/%n-43c5c12fc2.json"},jsons:{levels:"~%n/all/jsons/35-eede52f0b3.json"},episodeNo:35,levelsAmount:15,hard:[0,11],tricky:[4,9],language:"de"},episode_35_es:{urls:{json:"~%n/all/%n-7f6bdf56e5.json"},jsons:{levels:"~%n/all/jsons/35-f8147f23f2.json"},episodeNo:35,levelsAmount:15,hard:[0,11],tricky:[3,8],language:"es"},episode_35_fr:{urls:{json:"~%n/all/%n-c3c2f1bc6f.json"},jsons:{levels:"~%n/all/jsons/35-d322a8fea0.json"},episodeNo:35,
levelsAmount:15,hard:[3,13],tricky:[0,9],language:"fr"},episode_35_it:{urls:{json:"~%n/all/%n-d10e52e1ac.json"},jsons:{levels:"~%n/all/jsons/35-53d3b42e2d.json"},episodeNo:35,levelsAmount:15,hard:[4,12],tricky:[0,7],language:"it"},episode_35_ja:{urls:{json:"~%n/all/%n-56651214a2.json"},jsons:{levels:"~%n/all/jsons/35-52d4da23f2.json"},episodeNo:35,levelsAmount:15,hard:[4,14],tricky:[6,12],language:"ja"},episode_35_ko:{urls:{json:"~%n/all/%n-2b80c39e4c.json"},jsons:{levels:"~%n/all/jsons/35-60757a3269.json"},episodeNo:35,levelsAmount:15,hard:[3,10],tricky:[6,14],language:"ko"},episode_35_nl:{urls:{json:"~%n/all/%n-c2b3aa2272.json"},jsons:{levels:"~%n/all/jsons/35-1c298b64a8.json"},episodeNo:35,levelsAmount:15,hard:[0,9],tricky:[4,13],language:"nl"},episode_35_pt:{urls:{json:"~%n/all/%n-db39193169.json"},jsons:{levels:"~%n/all/jsons/35-ffeb471a35.json"},episodeNo:35,levelsAmount:15,hard:[10],tricky:[1,8],language:"pt"},episode_35_ru:{urls:{json:"~%n/all/%n-66cb4e075f.json"},jsons:{
levels:"~%n/all/jsons/35-5d212ffca2.json"},episodeNo:35,levelsAmount:15,hard:[9,10],tricky:[1,7],language:"ru"},episode_36:{urls:{json:"~%n/all/%n-25d26db205.json"},jsons:{levels:"~%n/all/jsons/36-89518abe42.json"},episodeNo:36,levelsAmount:15,hard:[3,8],tricky:[6,14],language:"en"},episode_36_de:{urls:{json:"~%n/all/%n-69f7c5538b.json"},jsons:{levels:"~%n/all/jsons/36-82e0b6acb1.json"},episodeNo:36,levelsAmount:15,hard:[1,5],tricky:[3,10],language:"de"},episode_36_es:{urls:{json:"~%n/all/%n-b748f1cdf6.json"},jsons:{levels:"~%n/all/jsons/36-7b04100390.json"},episodeNo:36,levelsAmount:15,hard:[2,14],tricky:[6,12],language:"es"},episode_36_fr:{urls:{json:"~%n/all/%n-5f19e4e8da.json"},jsons:{levels:"~%n/all/jsons/36-d17dfdbea2.json"},episodeNo:36,levelsAmount:15,hard:[2,10],tricky:[4,13],language:"fr"},episode_36_it:{urls:{json:"~%n/all/%n-3489433f23.json"},jsons:{levels:"~%n/all/jsons/36-324c737b52.json"},episodeNo:36,levelsAmount:15,hard:[7,13],tricky:[1,10],language:"it"},
episode_36_ja:{urls:{json:"~%n/all/%n-1720aa7326.json"},jsons:{levels:"~%n/all/jsons/36-e9fc391dd7.json"},episodeNo:36,levelsAmount:15,hard:[2,3],tricky:[5,11],language:"ja"},episode_36_ko:{urls:{json:"~%n/all/%n-a62c7fc0a0.json"},jsons:{levels:"~%n/all/jsons/36-e64312a321.json"},episodeNo:36,levelsAmount:15,hard:[0,10],tricky:[2,8],language:"ko"},episode_36_nl:{urls:{json:"~%n/all/%n-1d04cbd5ff.json"},jsons:{levels:"~%n/all/jsons/36-9d94cd30c7.json"},episodeNo:36,levelsAmount:15,hard:[2,11],tricky:[0,7],language:"nl"},episode_36_pt:{urls:{json:"~%n/all/%n-43303e97ec.json"},jsons:{levels:"~%n/all/jsons/36-caae7b51ff.json"},episodeNo:36,levelsAmount:15,hard:[3,5],tricky:[8,14],language:"pt"},episode_36_ru:{urls:{json:"~%n/all/%n-97ebfe4811.json"},jsons:{levels:"~%n/all/jsons/36-6c4edec2e6.json"},episodeNo:36,levelsAmount:15,hard:[0,8],tricky:[4,13],language:"ru"},episode_37:{urls:{json:"~%n/all/%n-5f55a286f3.json"},jsons:{levels:"~%n/all/jsons/37-b81223ed82.json"},episodeNo:37,
levelsAmount:15,hard:[4,10],tricky:[0,8],language:"en"},episode_37_de:{urls:{json:"~%n/all/%n-bf3ceac891.json"},jsons:{levels:"~%n/all/jsons/37-d2b9d7bb2e.json"},episodeNo:37,levelsAmount:15,hard:[3,9],tricky:[1,13],language:"de"},episode_37_es:{urls:{json:"~%n/all/%n-3df2096a20.json"},jsons:{levels:"~%n/all/jsons/37-d778384dd6.json"},episodeNo:37,levelsAmount:15,hard:[6,7],tricky:[0,11],language:"es"},episode_37_fr:{urls:{json:"~%n/all/%n-4e0f5182c5.json"},jsons:{levels:"~%n/all/jsons/37-d48db3ce07.json"},episodeNo:37,levelsAmount:15,hard:[1,13],tricky:[3,7],language:"fr"},episode_37_it:{urls:{json:"~%n/all/%n-299dde6e84.json"},jsons:{levels:"~%n/all/jsons/37-cc377d9c99.json"},episodeNo:37,levelsAmount:15,hard:[1,2],tricky:[7,14],language:"it"},episode_37_ja:{urls:{json:"~%n/all/%n-dc7afd2554.json"},jsons:{levels:"~%n/all/jsons/37-986c9194b9.json"},episodeNo:37,levelsAmount:15,hard:[2,11],tricky:[6,14],language:"ja"},episode_37_ko:{urls:{json:"~%n/all/%n-c393f97697.json"},jsons:{
levels:"~%n/all/jsons/37-94bf93bb84.json"},episodeNo:37,levelsAmount:15,hard:[4,5],tricky:[2,12],language:"ko"},episode_37_nl:{urls:{json:"~%n/all/%n-83ed259a16.json"},jsons:{levels:"~%n/all/jsons/37-bde7d7659e.json"},episodeNo:37,levelsAmount:15,hard:[4],tricky:[2,12],language:"nl"},episode_37_pt:{urls:{json:"~%n/all/%n-73fe4c9b71.json"},jsons:{levels:"~%n/all/jsons/37-63423d02f5.json"},episodeNo:37,levelsAmount:15,hard:[4,10],tricky:[0,12],language:"pt"},episode_37_ru:{urls:{json:"~%n/all/%n-bf157a90ad.json"},jsons:{levels:"~%n/all/jsons/37-dd6123e9ba.json"},episodeNo:37,levelsAmount:15,hard:[2,5],tricky:[0,10],language:"ru"},episode_38:{urls:{json:"~%n/all/%n-e7d628f268.json"},jsons:{levels:"~%n/all/jsons/38-fddfc1179e.json"},episodeNo:38,levelsAmount:15,hard:[6,13],tricky:[3,11],language:"en"},episode_38_de:{urls:{json:"~%n/all/%n-ee6d079289.json"},jsons:{levels:"~%n/all/jsons/38-a1681e024f.json"},episodeNo:38,levelsAmount:15,hard:[10],tricky:[3,13],language:"de"},episode_38_es:{
urls:{json:"~%n/all/%n-033cfc2bb0.json"},jsons:{levels:"~%n/all/jsons/38-2e5379e14e.json"},episodeNo:38,levelsAmount:15,hard:[4,12],tricky:[1,9],language:"es"},episode_38_fr:{urls:{json:"~%n/all/%n-363bb1254a.json"},jsons:{levels:"~%n/all/jsons/38-5ca57f3dc4.json"},episodeNo:38,levelsAmount:15,hard:[5,8],tricky:[1,13],language:"fr"},episode_38_it:{urls:{json:"~%n/all/%n-7c21f39389.json"},jsons:{levels:"~%n/all/jsons/38-55d01ed6df.json"},episodeNo:38,levelsAmount:15,hard:[0,6],tricky:[3,11],language:"it"},episode_38_ja:{urls:{json:"~%n/all/%n-2b66c519a0.json"},jsons:{levels:"~%n/all/jsons/38-4e8728d95e.json"},episodeNo:38,levelsAmount:15,hard:[0,7],tricky:[2,11],language:"ja"},episode_38_ko:{urls:{json:"~%n/all/%n-71f8abb678.json"},jsons:{levels:"~%n/all/jsons/38-ccd0934da9.json"},episodeNo:38,levelsAmount:15,hard:[4,10],tricky:[0,7],language:"ko"},episode_38_nl:{urls:{json:"~%n/all/%n-5b96c26efa.json"},jsons:{levels:"~%n/all/jsons/38-d4fda8b9a5.json"},episodeNo:38,levelsAmount:15,
hard:[4],tricky:[7,14],language:"nl"},episode_38_pt:{urls:{json:"~%n/all/%n-9c2c3bd4f6.json"},jsons:{levels:"~%n/all/jsons/38-be71653707.json"},episodeNo:38,levelsAmount:15,hard:[0,10],tricky:[4,12],language:"pt"},episode_38_ru:{urls:{json:"~%n/all/%n-5c7a58772c.json"},jsons:{levels:"~%n/all/jsons/38-05348b3fe7.json"},episodeNo:38,levelsAmount:15,hard:[3,6],tricky:[8,13],language:"ru"},episode_39:{urls:{json:"~%n/all/%n-c8b6a6ca12.json"},jsons:{levels:"~%n/all/jsons/39-86a1099e3c.json"},episodeNo:39,levelsAmount:15,hard:[2,9],tricky:[0,11],language:"en"},episode_39_de:{urls:{json:"~%n/all/%n-22b242aedb.json"},jsons:{levels:"~%n/all/jsons/39-d1209f7ebb.json"},episodeNo:39,levelsAmount:15,hard:[4,8],tricky:[0,11],language:"de"},episode_39_es:{urls:{json:"~%n/all/%n-494f06432b.json"},jsons:{levels:"~%n/all/jsons/39-5f3715d8d6.json"},episodeNo:39,levelsAmount:15,hard:[2,8],tricky:[10,14],language:"es"},episode_39_fr:{urls:{json:"~%n/all/%n-857c23c390.json"},jsons:{
levels:"~%n/all/jsons/39-79759fd026.json"},episodeNo:39,levelsAmount:15,hard:[10],tricky:[3,13],language:"fr"},episode_39_it:{urls:{json:"~%n/all/%n-b818ffd76a.json"},jsons:{levels:"~%n/all/jsons/39-ccc4279644.json"},episodeNo:39,levelsAmount:15,hard:[1,8],tricky:[6,14],language:"it"},episode_39_ja:{urls:{json:"~%n/all/%n-b180f5aa8e.json"},jsons:{levels:"~%n/all/jsons/39-77c871c727.json"},episodeNo:39,levelsAmount:15,hard:[2,12],tricky:[4,9],language:"ja"},episode_39_ko:{urls:{json:"~%n/all/%n-443e6f901e.json"},jsons:{levels:"~%n/all/jsons/39-75cff88934.json"},episodeNo:39,levelsAmount:15,hard:[2,8],tricky:[4,13],language:"ko"},episode_39_nl:{urls:{json:"~%n/all/%n-ec4ffe4b3d.json"},jsons:{levels:"~%n/all/jsons/39-96633e0319.json"},episodeNo:39,levelsAmount:15,hard:[9,10],tricky:[1,7],language:"nl"},episode_39_pt:{urls:{json:"~%n/all/%n-faeaff8604.json"},jsons:{levels:"~%n/all/jsons/39-7369feda66.json"},episodeNo:39,levelsAmount:15,hard:[7,11],tricky:[0,4],language:"pt"},
episode_39_ru:{urls:{json:"~%n/all/%n-3a256279c2.json"},jsons:{levels:"~%n/all/jsons/39-478baa064f.json"},episodeNo:39,levelsAmount:15,hard:[0],tricky:[6,14],language:"ru"},episode_3_de:{urls:{json:"~%n/all/%n-0c702e4b9d.json"},jsons:{levels:"~%n/all/jsons/3-0fe462b652.json"},episodeNo:3,levelsAmount:15,hard:[2,7],tricky:[4,12],language:"de"},episode_3_es:{urls:{json:"~%n/all/%n-fe72b6f947.json"},jsons:{levels:"~%n/all/jsons/3-c9581ebd3e.json"},episodeNo:3,levelsAmount:15,hard:[14],tricky:[5,12],language:"es"},episode_3_fr:{urls:{json:"~%n/all/%n-9d3156af5e.json"},jsons:{levels:"~%n/all/jsons/3-823460f6fd.json"},episodeNo:3,levelsAmount:15,hard:[6,13],tricky:[3,11],language:"fr"},episode_3_it:{urls:{json:"~%n/all/%n-1b096cd0f1.json"},jsons:{levels:"~%n/all/jsons/3-6543dd43e7.json"},episodeNo:3,levelsAmount:15,hard:[5,11],tricky:[2,13],language:"it"},episode_3_ja:{urls:{json:"~%n/all/%n-3993cf22b7.json"},jsons:{levels:"~%n/all/jsons/3-8517038363.json"},episodeNo:3,levelsAmount:15,hard:[
0,3],tricky:[7,13],language:"ja"},episode_3_ko:{urls:{json:"~%n/all/%n-a5157b3593.json"},jsons:{levels:"~%n/all/jsons/3-75409fdf1e.json"},episodeNo:3,levelsAmount:15,hard:[6,11],tricky:[1,9],language:"ko"},episode_3_nl:{urls:{json:"~%n/all/%n-273bfe6541.json"},jsons:{levels:"~%n/all/jsons/3-42ba9ff518.json"},episodeNo:3,levelsAmount:15,hard:[0,13],tricky:[3,9],language:"nl"},episode_3_pt:{urls:{json:"~%n/all/%n-3ca487d0a4.json"},jsons:{levels:"~%n/all/jsons/3-7694f2af8d.json"},episodeNo:3,levelsAmount:15,hard:[2],tricky:[0,10],language:"pt"},episode_3_ru:{urls:{json:"~%n/all/%n-9e4284c857.json"},jsons:{levels:"~%n/all/jsons/3-1e159566ef.json"},episodeNo:3,levelsAmount:15,hard:[1,10],tricky:[7,14],language:"ru"},episode_4:{urls:{json:"~%n/all/%n-459e24a007.json"},jsons:{levels:"~%n/all/jsons/4-108c0b9f20.json"},episodeNo:4,levelsAmount:15,hard:[4,9],tricky:[2,13],language:"en"},episode_40:{urls:{json:"~%n/all/%n-4d0254ffed.json"},jsons:{levels:"~%n/all/jsons/40-eb073f8081.json"},
episodeNo:40,levelsAmount:15,hard:[1,5],tricky:[7,12],language:"en"},episode_40_de:{urls:{json:"~%n/all/%n-5fd86d4be3.json"},jsons:{levels:"~%n/all/jsons/40-201061d17b.json"},episodeNo:40,levelsAmount:15,hard:[11,13],tricky:[3,8],language:"de"},episode_40_es:{urls:{json:"~%n/all/%n-8ebddf71cc.json"},jsons:{levels:"~%n/all/jsons/40-e4ce9617d7.json"},episodeNo:40,levelsAmount:15,hard:[2,11],tricky:[4,13],language:"es"},episode_40_fr:{urls:{json:"~%n/all/%n-b58b23cb1a.json"},jsons:{levels:"~%n/all/jsons/40-f24b53ebd0.json"},episodeNo:40,levelsAmount:15,hard:[6,9],tricky:[0,11],language:"fr"},episode_40_it:{urls:{json:"~%n/all/%n-bff65822e4.json"},jsons:{levels:"~%n/all/jsons/40-6f97469c63.json"},episodeNo:40,levelsAmount:15,hard:[6,7],tricky:[0,11],language:"it"},episode_40_ja:{urls:{json:"~%n/all/%n-04bb91147e.json"},jsons:{levels:"~%n/all/jsons/40-18b5ebf94f.json"},episodeNo:40,levelsAmount:15,hard:[0,4],tricky:[9,14],language:"ja"},episode_40_ko:{urls:{json:"~%n/all/%n-b5c2e886c8.json"
},jsons:{levels:"~%n/all/jsons/40-d1d40c3212.json"},episodeNo:40,levelsAmount:15,hard:[0,7],tricky:[5,14],language:"ko"},episode_40_nl:{urls:{json:"~%n/all/%n-c7e36eb92f.json"},jsons:{levels:"~%n/all/jsons/40-7e7760c072.json"},episodeNo:40,levelsAmount:15,hard:[7,11],tricky:[3,14],language:"nl"},episode_40_pt:{urls:{json:"~%n/all/%n-d104e74f2b.json"},jsons:{levels:"~%n/all/jsons/40-d5c10f721e.json"},episodeNo:40,levelsAmount:15,hard:[5,11],tricky:[1,13],language:"pt"},episode_40_ru:{urls:{json:"~%n/all/%n-af003dd4e5.json"},jsons:{levels:"~%n/all/jsons/40-bcd517d0c9.json"},episodeNo:40,levelsAmount:15,hard:[5,10],tricky:[0,8],language:"ru"},episode_41:{urls:{json:"~%n/all/%n-69950b69fe.json"},jsons:{levels:"~%n/all/jsons/41-a3c513e3a1.json"},episodeNo:41,levelsAmount:15,hard:[1],tricky:[8,14],language:"en"},episode_41_de:{urls:{json:"~%n/all/%n-9bf7571bab.json"},jsons:{levels:"~%n/all/jsons/41-ea974eeab5.json"},episodeNo:41,levelsAmount:15,hard:[3,6],tricky:[0,11],language:"de"},
episode_41_es:{urls:{json:"~%n/all/%n-8bb73ff42a.json"},jsons:{levels:"~%n/all/jsons/41-b95339fcdb.json"},episodeNo:41,levelsAmount:15,hard:[11,13],tricky:[2,8],language:"es"},episode_41_fr:{urls:{json:"~%n/all/%n-f8ae4a0a7e.json"},jsons:{levels:"~%n/all/jsons/41-74bb9b4b11.json"},episodeNo:41,levelsAmount:15,hard:[1,6],tricky:[8,14],language:"fr"},episode_41_it:{urls:{json:"~%n/all/%n-86952eb579.json"},jsons:{levels:"~%n/all/jsons/41-b5ade2d711.json"},episodeNo:41,levelsAmount:15,hard:[0,1],tricky:[5,12],language:"it"},episode_41_ja:{urls:{json:"~%n/all/%n-43c64fec5d.json"},jsons:{levels:"~%n/all/jsons/41-2ce5b0e61b.json"},episodeNo:41,levelsAmount:15,hard:[1],tricky:[5,12],language:"ja"},episode_41_ko:{urls:{json:"~%n/all/%n-ae946d3749.json"},jsons:{levels:"~%n/all/jsons/41-7513e030ff.json"},episodeNo:41,levelsAmount:15,hard:[1,14],tricky:[3,9],language:"ko"},episode_41_nl:{urls:{json:"~%n/all/%n-7ab11ff866.json"},jsons:{levels:"~%n/all/jsons/41-054a7f64cd.json"},episodeNo:41,
levelsAmount:15,hard:[1,12],tricky:[3,8],language:"nl"},episode_41_pt:{urls:{json:"~%n/all/%n-bb12e5d890.json"},jsons:{levels:"~%n/all/jsons/41-9d1722d4dc.json"},episodeNo:41,levelsAmount:15,hard:[5,10],tricky:[3,14],language:"pt"},episode_41_ru:{urls:{json:"~%n/all/%n-0ca33e5f99.json"},jsons:{levels:"~%n/all/jsons/41-1bff73d0b1.json"},episodeNo:41,levelsAmount:15,hard:[6,11],tricky:[3,14],language:"ru"},episode_42:{urls:{json:"~%n/all/%n-8ea5d07663.json"},jsons:{levels:"~%n/all/jsons/42-62889ae7ea.json"},episodeNo:42,levelsAmount:15,hard:[1,6],tricky:[4,13],language:"en"},episode_42_de:{urls:{json:"~%n/all/%n-da99050bb9.json"},jsons:{levels:"~%n/all/jsons/42-a370631749.json"},episodeNo:42,levelsAmount:15,hard:[5],tricky:[2,11],language:"de"},episode_42_es:{urls:{json:"~%n/all/%n-62b78da4df.json"},jsons:{levels:"~%n/all/jsons/42-c008532c5b.json"},episodeNo:42,levelsAmount:15,hard:[7,14],tricky:[0,9],language:"es"},episode_42_fr:{urls:{json:"~%n/all/%n-897de94f22.json"},jsons:{
levels:"~%n/all/jsons/42-1daf3d4e61.json"},episodeNo:42,levelsAmount:15,hard:[0,4],tricky:[2,11],language:"fr"},episode_42_it:{urls:{json:"~%n/all/%n-f8cd15e001.json"},jsons:{levels:"~%n/all/jsons/42-20b698f907.json"},episodeNo:42,levelsAmount:15,hard:[8,13],tricky:[4,11],language:"it"},episode_42_ja:{urls:{json:"~%n/all/%n-1758995424.json"},jsons:{levels:"~%n/all/jsons/42-a036a0c5e3.json"},episodeNo:42,levelsAmount:15,hard:[2,8],tricky:[5,14],language:"ja"},episode_42_ko:{urls:{json:"~%n/all/%n-f8e76ff432.json"},jsons:{levels:"~%n/all/jsons/42-c88af9bfa1.json"},episodeNo:42,levelsAmount:15,hard:[4,8],tricky:[2,14],language:"ko"},episode_42_nl:{urls:{json:"~%n/all/%n-6790276c67.json"},jsons:{levels:"~%n/all/jsons/42-dde4d6b423.json"},episodeNo:42,levelsAmount:15,hard:[1,10],tricky:[4,12],language:"nl"},episode_42_pt:{urls:{json:"~%n/all/%n-1cdce1136f.json"},jsons:{levels:"~%n/all/jsons/42-fb5f80460d.json"},episodeNo:42,levelsAmount:15,hard:[4,14],tricky:[1,9],language:"pt"},
episode_42_ru:{urls:{json:"~%n/all/%n-fe12d1e830.json"},jsons:{levels:"~%n/all/jsons/42-aece2cc55a.json"},episodeNo:42,levelsAmount:15,hard:[0,8],tricky:[2,11],language:"ru"},episode_43:{urls:{json:"~%n/all/%n-df5178164f.json"},jsons:{levels:"~%n/all/jsons/43-f584762a6f.json"},episodeNo:43,levelsAmount:15,hard:[0,11],tricky:[4,13],language:"en"},episode_43_de:{urls:{json:"~%n/all/%n-70670189e9.json"},jsons:{levels:"~%n/all/jsons/43-e89514dbb2.json"},episodeNo:43,levelsAmount:15,hard:[6,14],tricky:[4,12],language:"de"},episode_43_es:{urls:{json:"~%n/all/%n-9a938e69b1.json"},jsons:{levels:"~%n/all/jsons/43-232009b1c7.json"},episodeNo:43,levelsAmount:15,hard:[5],tricky:[3,13],language:"es"},episode_43_fr:{urls:{json:"~%n/all/%n-2009e83348.json"},jsons:{levels:"~%n/all/jsons/43-2cb7d28fbd.json"},episodeNo:43,levelsAmount:15,hard:[1,14],tricky:[4,10],language:"fr"},episode_43_it:{urls:{json:"~%n/all/%n-439b3fa26e.json"},jsons:{levels:"~%n/all/jsons/43-de17cd3abf.json"},episodeNo:43,
levelsAmount:15,hard:[1,12],tricky:[4,10],language:"it"},episode_43_ja:{urls:{json:"~%n/all/%n-d285a1130c.json"},jsons:{levels:"~%n/all/jsons/43-98006bd643.json"},episodeNo:43,levelsAmount:15,hard:[7],tricky:[1,10],language:"ja"},episode_43_ko:{urls:{json:"~%n/all/%n-c6b14e2e2c.json"},jsons:{levels:"~%n/all/jsons/43-6ca788ec06.json"},episodeNo:43,levelsAmount:15,hard:[0,6],tricky:[2,11],language:"ko"},episode_43_nl:{urls:{json:"~%n/all/%n-9dfa234837.json"},jsons:{levels:"~%n/all/jsons/43-0888acc4d8.json"},episodeNo:43,levelsAmount:15,hard:[4,13],tricky:[7,11],language:"nl"},episode_43_pt:{urls:{json:"~%n/all/%n-3ca46d8077.json"},jsons:{levels:"~%n/all/jsons/43-6f1f96a859.json"},episodeNo:43,levelsAmount:15,hard:[4,13],tricky:[6,11],language:"pt"},episode_43_ru:{urls:{json:"~%n/all/%n-e771f5c61a.json"},jsons:{levels:"~%n/all/jsons/43-2dab12c6ae.json"},episodeNo:43,levelsAmount:15,hard:[4,12],tricky:[1,9],language:"ru"},episode_44:{urls:{json:"~%n/all/%n-a33221609f.json"},jsons:{
levels:"~%n/all/jsons/44-8005ffe7b0.json"},episodeNo:44,levelsAmount:15,hard:[0,11],tricky:[2,7],language:"en"},episode_44_de:{urls:{json:"~%n/all/%n-40cd9f5670.json"},jsons:{levels:"~%n/all/jsons/44-bd2a166d2e.json"},episodeNo:44,levelsAmount:15,hard:[10],tricky:[1,8],language:"de"},episode_44_es:{urls:{json:"~%n/all/%n-7bf406a1da.json"},jsons:{levels:"~%n/all/jsons/44-feb49d7336.json"},episodeNo:44,levelsAmount:15,hard:[4,10],tricky:[0,8],language:"es"},episode_44_fr:{urls:{json:"~%n/all/%n-286e1fd65c.json"},jsons:{levels:"~%n/all/jsons/44-12ed5d118e.json"},episodeNo:44,levelsAmount:15,hard:[4,14],tricky:[7,12],language:"fr"},episode_44_it:{urls:{json:"~%n/all/%n-9ddcdc4150.json"},jsons:{levels:"~%n/all/jsons/44-ea44e13c51.json"},episodeNo:44,levelsAmount:15,hard:[0,2],tricky:[7,13],language:"it"},episode_44_ja:{urls:{json:"~%n/all/%n-47c6de8cdb.json"},jsons:{levels:"~%n/all/jsons/44-67f8f67acc.json"},episodeNo:44,levelsAmount:15,hard:[0,10],tricky:[5,13],language:"ja"},
episode_44_ko:{urls:{json:"~%n/all/%n-09c579a373.json"},jsons:{levels:"~%n/all/jsons/44-8dba23b922.json"},episodeNo:44,levelsAmount:15,hard:[4,13],tricky:[1,9],language:"ko"},episode_44_nl:{urls:{json:"~%n/all/%n-bfa0b4d148.json"},jsons:{levels:"~%n/all/jsons/44-22e438fb7e.json"},episodeNo:44,levelsAmount:15,hard:[0,10],tricky:[3,12],language:"nl"},episode_44_pt:{urls:{json:"~%n/all/%n-92e835b6a0.json"},jsons:{levels:"~%n/all/jsons/44-17a2899e5b.json"},episodeNo:44,levelsAmount:15,hard:[4,10],tricky:[0,8],language:"pt"},episode_44_ru:{urls:{json:"~%n/all/%n-ab16f56e9d.json"},jsons:{levels:"~%n/all/jsons/44-202dd04474.json"},episodeNo:44,levelsAmount:15,hard:[4,10],tricky:[7,14],language:"ru"},episode_45:{urls:{json:"~%n/all/%n-8a0f53bbe4.json"},jsons:{levels:"~%n/all/jsons/45-fe6719c8ce.json"},episodeNo:45,levelsAmount:15,hard:[3,13],tricky:[5,10],language:"en"},episode_45_de:{urls:{json:"~%n/all/%n-af3ca124aa.json"},jsons:{levels:"~%n/all/jsons/45-61e68f9cc3.json"},episodeNo:45,
levelsAmount:15,hard:[4,14],tricky:[2,11],language:"de"},episode_45_es:{urls:{json:"~%n/all/%n-435f6eb992.json"},jsons:{levels:"~%n/all/jsons/45-f3079bf12a.json"},episodeNo:45,levelsAmount:15,hard:[12,13],tricky:[1,7],language:"es"},episode_45_fr:{urls:{json:"~%n/all/%n-e49e6ac41a.json"},jsons:{levels:"~%n/all/jsons/45-e435ea998c.json"},episodeNo:45,levelsAmount:15,hard:[2,13],tricky:[4,10],language:"fr"},episode_45_it:{urls:{json:"~%n/all/%n-ce1d221faf.json"},jsons:{levels:"~%n/all/jsons/45-c432ae64ad.json"},episodeNo:45,levelsAmount:15,hard:[10,14],tricky:[0,5],language:"it"},episode_45_ja:{urls:{json:"~%n/all/%n-9fabd0f8c5.json"},jsons:{levels:"~%n/all/jsons/45-b3f7452239.json"},episodeNo:45,levelsAmount:15,hard:[4,9],tricky:[0,11],language:"ja"},episode_45_ko:{urls:{json:"~%n/all/%n-4d36c944c1.json"},jsons:{levels:"~%n/all/jsons/45-769a09eddd.json"},episodeNo:45,levelsAmount:15,hard:[5,14],tricky:[7,12],language:"ko"},episode_45_nl:{urls:{json:"~%n/all/%n-2628e0efe8.json"},jsons:{
levels:"~%n/all/jsons/45-8314a8cd97.json"},episodeNo:45,levelsAmount:15,hard:[1,11],tricky:[5,14],language:"nl"},episode_45_pt:{urls:{json:"~%n/all/%n-0241816a95.json"},jsons:{levels:"~%n/all/jsons/45-d1240419fc.json"},episodeNo:45,levelsAmount:15,hard:[8],tricky:[2,12],language:"pt"},episode_45_ru:{urls:{json:"~%n/all/%n-8aff64a942.json"},jsons:{levels:"~%n/all/jsons/45-0548caf82f.json"},episodeNo:45,levelsAmount:15,hard:[2,9],tricky:[4,13],language:"ru"},episode_46:{urls:{json:"~%n/all/%n-620d446d62.json"},jsons:{levels:"~%n/all/jsons/46-1c23537939.json"},episodeNo:46,levelsAmount:15,hard:[2,7],tricky:[9,14],language:"en"},episode_46_de:{urls:{json:"~%n/all/%n-1b1decc2cd.json"},jsons:{levels:"~%n/all/jsons/46-d03dea3f08.json"},episodeNo:46,levelsAmount:15,hard:[11],tricky:[0,6],language:"de"},episode_46_es:{urls:{json:"~%n/all/%n-d80b43cd97.json"},jsons:{levels:"~%n/all/jsons/46-0ed9310e85.json"},episodeNo:46,levelsAmount:15,hard:[2,10],tricky:[6,14],language:"es"},episode_46_fr:{
urls:{json:"~%n/all/%n-a4d0fd3208.json"},jsons:{levels:"~%n/all/jsons/46-eabfc57dd8.json"},episodeNo:46,levelsAmount:15,hard:[6,11],tricky:[2,13],language:"fr"},episode_46_it:{urls:{json:"~%n/all/%n-845e0bfc3a.json"},jsons:{levels:"~%n/all/jsons/46-f31cffc68c.json"},episodeNo:46,levelsAmount:15,hard:[5,10],tricky:[2,13],language:"it"},episode_46_ja:{urls:{json:"~%n/all/%n-cef587fb45.json"},jsons:{levels:"~%n/all/jsons/46-33bf144298.json"},episodeNo:46,levelsAmount:15,hard:[5,7],tricky:[1,12],language:"ja"},episode_46_ko:{urls:{json:"~%n/all/%n-aee7b2bb61.json"},jsons:{levels:"~%n/all/jsons/46-af4f478898.json"},episodeNo:46,levelsAmount:15,hard:[13,14],tricky:[1,9],language:"ko"},episode_46_nl:{urls:{json:"~%n/all/%n-4f20095418.json"},jsons:{levels:"~%n/all/jsons/46-5d28a902a2.json"},episodeNo:46,levelsAmount:15,hard:[5,10],tricky:[0,8],language:"nl"},episode_46_pt:{urls:{json:"~%n/all/%n-d0cbca3c8e.json"},jsons:{levels:"~%n/all/jsons/46-3e4d266a74.json"},episodeNo:46,levelsAmount:15,
hard:[4,7],tricky:[10,14],language:"pt"},episode_46_ru:{urls:{json:"~%n/all/%n-36f6446738.json"},jsons:{levels:"~%n/all/jsons/46-3a6ca3c030.json"},episodeNo:46,levelsAmount:15,hard:[0,5],tricky:[7,13],language:"ru"},episode_47:{urls:{json:"~%n/all/%n-100e9e6d52.json"},jsons:{levels:"~%n/all/jsons/47-1f44345ed5.json"},episodeNo:47,levelsAmount:15,hard:[4,14],tricky:[1,10],language:"en"},episode_47_de:{urls:{json:"~%n/all/%n-1e70c7e346.json"},jsons:{levels:"~%n/all/jsons/47-3abaa18480.json"},episodeNo:47,levelsAmount:15,hard:[4],tricky:[6,13],language:"de"},episode_47_es:{urls:{json:"~%n/all/%n-fe1b475d34.json"},jsons:{levels:"~%n/all/jsons/47-437a924be1.json"},episodeNo:47,levelsAmount:15,hard:[13,14],tricky:[1,8],language:"es"},episode_47_fr:{urls:{json:"~%n/all/%n-fdd6719d0a.json"},jsons:{levels:"~%n/all/jsons/47-6aa5db2f1e.json"},episodeNo:47,levelsAmount:15,hard:[1,14],tricky:[3,8],language:"fr"},episode_47_it:{urls:{json:"~%n/all/%n-1bac324bfd.json"},jsons:{
levels:"~%n/all/jsons/47-5253fe2f32.json"},episodeNo:47,levelsAmount:15,hard:[0,11],tricky:[2,8],language:"it"},episode_47_ja:{urls:{json:"~%n/all/%n-4f71006ab1.json"},jsons:{levels:"~%n/all/jsons/47-a80fb92820.json"},episodeNo:47,levelsAmount:15,hard:[6,12],tricky:[3,14],language:"ja"},episode_47_ko:{urls:{json:"~%n/all/%n-7d7094de93.json"},jsons:{levels:"~%n/all/jsons/47-d45611a2d8.json"},episodeNo:47,levelsAmount:15,hard:[3,11],tricky:[5,13],language:"ko"},episode_47_nl:{urls:{json:"~%n/all/%n-2c1b9f555e.json"},jsons:{levels:"~%n/all/jsons/47-cd0c702ba2.json"},episodeNo:47,levelsAmount:15,hard:[10],tricky:[3,13],language:"nl"},episode_47_pt:{urls:{json:"~%n/all/%n-ece09e5670.json"},jsons:{levels:"~%n/all/jsons/47-e600147dad.json"},episodeNo:47,levelsAmount:15,hard:[10],tricky:[2,12],language:"pt"},episode_47_ru:{urls:{json:"~%n/all/%n-7d1cdf6520.json"},jsons:{levels:"~%n/all/jsons/47-53d72f61ae.json"},episodeNo:47,levelsAmount:15,hard:[5,12],tricky:[0,8],language:"ru"},episode_48:{
urls:{json:"~%n/all/%n-e5ae48b1de.json"},jsons:{levels:"~%n/all/jsons/48-ec255724c5.json"},episodeNo:48,levelsAmount:15,hard:[2,14],tricky:[7,12],language:"en"},episode_48_de:{urls:{json:"~%n/all/%n-ebe0639357.json"},jsons:{levels:"~%n/all/jsons/48-f9d3a84abe.json"},episodeNo:48,levelsAmount:15,hard:[6],tricky:[4,14],language:"de"},episode_48_es:{urls:{json:"~%n/all/%n-11d511c15f.json"},jsons:{levels:"~%n/all/jsons/48-07b81a9e79.json"},episodeNo:48,levelsAmount:15,hard:[6,9],tricky:[2,13],language:"es"},episode_48_fr:{urls:{json:"~%n/all/%n-eb8b65046b.json"},jsons:{levels:"~%n/all/jsons/48-f77dcc5600.json"},episodeNo:48,levelsAmount:15,hard:[6,11],tricky:[2,13],language:"fr"},episode_48_it:{urls:{json:"~%n/all/%n-859a7757b3.json"},jsons:{levels:"~%n/all/jsons/48-2cfdc2a88a.json"},episodeNo:48,levelsAmount:15,hard:[11,13],tricky:[1,7],language:"it"},episode_48_ja:{urls:{json:"~%n/all/%n-0a0e8aefe4.json"},jsons:{levels:"~%n/all/jsons/48-27da7027bf.json"},episodeNo:48,levelsAmount:15,
hard:[5,12],tricky:[1,9],language:"ja"},episode_48_ko:{urls:{json:"~%n/all/%n-95fec5493d.json"},jsons:{levels:"~%n/all/jsons/48-f8dd1fc872.json"},episodeNo:48,levelsAmount:15,hard:[0,1],tricky:[3,9],language:"ko"},episode_48_nl:{urls:{json:"~%n/all/%n-cb4d1ecfa4.json"},jsons:{levels:"~%n/all/jsons/48-9b95062929.json"},episodeNo:48,levelsAmount:15,hard:[1,6],tricky:[3,11],language:"nl"},episode_48_pt:{urls:{json:"~%n/all/%n-ff60621b61.json"},jsons:{levels:"~%n/all/jsons/48-7dac30fa5b.json"},episodeNo:48,levelsAmount:15,hard:[6,14],tricky:[2,11],language:"pt"},episode_48_ru:{urls:{json:"~%n/all/%n-d02152c856.json"},jsons:{levels:"~%n/all/jsons/48-66beb19d6b.json"},episodeNo:48,levelsAmount:15,hard:[6,11],tricky:[2,13],language:"ru"},episode_49:{urls:{json:"~%n/all/%n-8702571bbb.json"},jsons:{levels:"~%n/all/jsons/49-e48c42c54c.json"},episodeNo:49,levelsAmount:15,hard:[9,13],tricky:[1,6],language:"en"},episode_49_de:{urls:{json:"~%n/all/%n-7554b92736.json"},jsons:{
levels:"~%n/all/jsons/49-8b1c573184.json"},episodeNo:49,levelsAmount:15,hard:[7,13],tricky:[1,9],language:"de"},episode_49_es:{urls:{json:"~%n/all/%n-093c39d948.json"},jsons:{levels:"~%n/all/jsons/49-757ed90ab7.json"},episodeNo:49,levelsAmount:15,hard:[0,6],tricky:[2,10],language:"es"},episode_49_fr:{urls:{json:"~%n/all/%n-a272fa65ff.json"},jsons:{levels:"~%n/all/jsons/49-1a34aac1b1.json"},episodeNo:49,levelsAmount:15,hard:[2,10],tricky:[6,14],language:"fr"},episode_49_it:{urls:{json:"~%n/all/%n-9cf09066bf.json"},jsons:{levels:"~%n/all/jsons/49-4f2129ee4f.json"},episodeNo:49,levelsAmount:15,hard:[5,14],tricky:[7,12],language:"it"},episode_49_ja:{urls:{json:"~%n/all/%n-97643e3a2e.json"},jsons:{levels:"~%n/all/jsons/49-170dcfa440.json"},episodeNo:49,levelsAmount:15,hard:[13,14],tricky:[3,10],language:"ja"},episode_49_ko:{urls:{json:"~%n/all/%n-775efa0e0f.json"},jsons:{levels:"~%n/all/jsons/49-4f5aa86f06.json"},episodeNo:49,levelsAmount:15,hard:[1,2],tricky:[7,13],language:"ko"},
episode_49_nl:{urls:{json:"~%n/all/%n-2687c7597d.json"},jsons:{levels:"~%n/all/jsons/49-b377c4e92e.json"},episodeNo:49,levelsAmount:15,hard:[6,7],tricky:[1,11],language:"nl"},episode_49_pt:{urls:{json:"~%n/all/%n-676d63606d.json"},jsons:{levels:"~%n/all/jsons/49-adc7c8a749.json"},episodeNo:49,levelsAmount:15,hard:[14],tricky:[1,7],language:"pt"},episode_49_ru:{urls:{json:"~%n/all/%n-97ec8f272c.json"},jsons:{levels:"~%n/all/jsons/49-f4a317203b.json"},episodeNo:49,levelsAmount:15,hard:[4,6],tricky:[0,11],language:"ru"},episode_4_de:{urls:{json:"~%n/all/%n-f31ac72494.json"},jsons:{levels:"~%n/all/jsons/4-f98147af08.json"},episodeNo:4,levelsAmount:15,hard:[10,13],tricky:[2,7],language:"de"},episode_4_es:{urls:{json:"~%n/all/%n-ae7941a216.json"},jsons:{levels:"~%n/all/jsons/4-36bd43a02e.json"},episodeNo:4,levelsAmount:15,hard:[0,5],tricky:[3,11],language:"es"},episode_4_fr:{urls:{json:"~%n/all/%n-7a4fb47021.json"},jsons:{levels:"~%n/all/jsons/4-b612113bb2.json"},episodeNo:4,levelsAmount:15,
hard:[7,14],tricky:[1,10],language:"fr"},episode_4_it:{urls:{json:"~%n/all/%n-1d638315ac.json"},jsons:{levels:"~%n/all/jsons/4-49cfdb7b35.json"},episodeNo:4,levelsAmount:15,hard:[1,7],tricky:[3,11],language:"it"},episode_4_ja:{urls:{json:"~%n/all/%n-c074ade87a.json"},jsons:{levels:"~%n/all/jsons/4-33f10ea2df.json"},episodeNo:4,levelsAmount:15,hard:[4,8],tricky:[6,14],language:"ja"},episode_4_ko:{urls:{json:"~%n/all/%n-ff52a6d30d.json"},jsons:{levels:"~%n/all/jsons/4-e55563fe46.json"},episodeNo:4,levelsAmount:15,hard:[3,5],tricky:[9,14],language:"ko"},episode_4_nl:{urls:{json:"~%n/all/%n-54e38a6b21.json"},jsons:{levels:"~%n/all/jsons/4-07e37aa9ee.json"},episodeNo:4,levelsAmount:15,hard:[3,13],tricky:[5,10],language:"nl"},episode_4_pt:{urls:{json:"~%n/all/%n-1bcdd39967.json"},jsons:{levels:"~%n/all/jsons/4-3f9ddb6f84.json"},episodeNo:4,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"pt"},episode_4_ru:{urls:{json:"~%n/all/%n-cdd9ea8591.json"},jsons:{
levels:"~%n/all/jsons/4-446c69dc45.json"},episodeNo:4,levelsAmount:15,hard:[7,11],tricky:[1,13],language:"ru"},episode_5:{urls:{json:"~%n/all/%n-0a3cc404ba.json"},jsons:{levels:"~%n/all/jsons/5-26996a942e.json"},episodeNo:5,levelsAmount:15,hard:[2,10],tricky:[6,14],language:"en"},episode_50:{urls:{json:"~%n/all/%n-52e8ba59bf.json"},jsons:{levels:"~%n/all/jsons/50-0377c2ae8c.json"},episodeNo:50,levelsAmount:15,hard:[3,8],tricky:[5,13],language:"en"},episode_50_de:{urls:{json:"~%n/all/%n-d434ca49c1.json"},jsons:{levels:"~%n/all/jsons/50-8cf28b1c24.json"},episodeNo:50,levelsAmount:15,hard:[1,5],tricky:[9,14],language:"de"},episode_50_es:{urls:{json:"~%n/all/%n-6a5f8d801e.json"},jsons:{levels:"~%n/all/jsons/50-12197b4e77.json"},episodeNo:50,levelsAmount:15,hard:[1,10],tricky:[5,13],language:"es"},episode_50_fr:{urls:{json:"~%n/all/%n-7b922606c3.json"},jsons:{levels:"~%n/all/jsons/50-20b713911d.json"},episodeNo:50,levelsAmount:15,hard:[1,14],tricky:[4,9],language:"fr"},episode_50_it:{urls:{
json:"~%n/all/%n-9ee97cc948.json"},jsons:{levels:"~%n/all/jsons/50-9c0b9580a4.json"},episodeNo:50,levelsAmount:15,hard:[4,14],tricky:[1,10],language:"it"},episode_50_ja:{urls:{json:"~%n/all/%n-490fcbd5bd.json"},jsons:{levels:"~%n/all/jsons/50-a199e0f71e.json"},episodeNo:50,levelsAmount:15,hard:[5,9],tricky:[0,11],language:"ja"},episode_50_ko:{urls:{json:"~%n/all/%n-aa52200bdc.json"},jsons:{levels:"~%n/all/jsons/50-b0f2cadf56.json"},episodeNo:50,levelsAmount:15,hard:[0,5],tricky:[9,14],language:"ko"},episode_50_nl:{urls:{json:"~%n/all/%n-048235aaf7.json"},jsons:{levels:"~%n/all/jsons/50-2ec58df7ad.json"},episodeNo:50,levelsAmount:15,hard:[1,12],tricky:[6,14],language:"nl"},episode_50_pt:{urls:{json:"~%n/all/%n-a76b235fe2.json"},jsons:{levels:"~%n/all/jsons/50-2ce7252206.json"},episodeNo:50,levelsAmount:15,hard:[0,11],tricky:[4,13],language:"pt"},episode_50_ru:{urls:{json:"~%n/all/%n-937ab803f4.json"},jsons:{levels:"~%n/all/jsons/50-dbf2519042.json"},episodeNo:50,levelsAmount:15,hard:[5,
10],tricky:[1,12],language:"ru"},episode_51:{urls:{json:"~%n/all/%n-6f46ffb934.json"},jsons:{levels:"~%n/all/jsons/51-89e3acb6bd.json"},episodeNo:51,levelsAmount:15,hard:[1,11],tricky:[3,7],language:"en"},episode_51_de:{urls:{json:"~%n/all/%n-062b94e25b.json"},jsons:{levels:"~%n/all/jsons/51-24dcccf4ab.json"},episodeNo:51,levelsAmount:15,hard:[7,11],tricky:[0,9],language:"de"},episode_51_es:{urls:{json:"~%n/all/%n-2ba750c7fe.json"},jsons:{levels:"~%n/all/jsons/51-247acee072.json"},episodeNo:51,levelsAmount:15,hard:[0,3],tricky:[8,14],language:"es"},episode_51_fr:{urls:{json:"~%n/all/%n-ede84ae04c.json"},jsons:{levels:"~%n/all/jsons/51-6cab50621e.json"},episodeNo:51,levelsAmount:15,hard:[5,11],tricky:[3,14],language:"fr"},episode_51_it:{urls:{json:"~%n/all/%n-5bb235677e.json"},jsons:{levels:"~%n/all/jsons/51-4e6327a20c.json"},episodeNo:51,levelsAmount:15,hard:[4,13],tricky:[2,10],language:"it"},episode_51_ja:{urls:{json:"~%n/all/%n-db72428ed3.json"},jsons:{
levels:"~%n/all/jsons/51-dc3d0d7448.json"},episodeNo:51,levelsAmount:15,hard:[7,14],tricky:[2,11],language:"ja"},episode_51_ko:{urls:{json:"~%n/all/%n-02d33008d1.json"},jsons:{levels:"~%n/all/jsons/51-36edc9e7ff.json"},episodeNo:51,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"ko"},episode_51_nl:{urls:{json:"~%n/all/%n-3e0eca7538.json"},jsons:{levels:"~%n/all/jsons/51-9a09b5cf43.json"},episodeNo:51,levelsAmount:15,hard:[3,6],tricky:[1,12],language:"nl"},episode_51_pt:{urls:{json:"~%n/all/%n-39ea259e12.json"},jsons:{levels:"~%n/all/jsons/51-399e6fd801.json"},episodeNo:51,levelsAmount:15,hard:[4,5],tricky:[0,10],language:"pt"},episode_51_ru:{urls:{json:"~%n/all/%n-e47d1a645b.json"},jsons:{levels:"~%n/all/jsons/51-47c0877310.json"},episodeNo:51,levelsAmount:15,hard:[1,5],tricky:[9,14],language:"ru"},episode_52:{urls:{json:"~%n/all/%n-2f0c9b6d61.json"},jsons:{levels:"~%n/all/jsons/52-2792f21e6a.json"},episodeNo:52,levelsAmount:15,hard:[4,8],tricky:[2,13],language:"en"},episode_52_de:{
urls:{json:"~%n/all/%n-6a969390e2.json"},jsons:{levels:"~%n/all/jsons/52-80fbb9edc1.json"},episodeNo:52,levelsAmount:15,hard:[10],tricky:[2,12],language:"de"},episode_52_es:{urls:{json:"~%n/all/%n-380d7fc0f0.json"},jsons:{levels:"~%n/all/jsons/52-16c84850cc.json"},episodeNo:52,levelsAmount:15,hard:[5,13],tricky:[1,9],language:"es"},episode_52_fr:{urls:{json:"~%n/all/%n-17f13cfb6b.json"},jsons:{levels:"~%n/all/jsons/52-d7a72284f2.json"},episodeNo:52,levelsAmount:15,hard:[1,14],tricky:[4,10],language:"fr"},episode_52_it:{urls:{json:"~%n/all/%n-0b5befc2f7.json"},jsons:{levels:"~%n/all/jsons/52-01c3f82810.json"},episodeNo:52,levelsAmount:15,hard:[2,11],tricky:[0,7],language:"it"},episode_52_ja:{urls:{json:"~%n/all/%n-0900fc1cc2.json"},jsons:{levels:"~%n/all/jsons/52-edfdc4f028.json"},episodeNo:52,levelsAmount:15,hard:[6,8],tricky:[3,14],language:"ja"},episode_52_ko:{urls:{json:"~%n/all/%n-ed837e48bf.json"},jsons:{levels:"~%n/all/jsons/52-cbc441d4a2.json"},episodeNo:52,levelsAmount:15,
hard:[0,5],tricky:[9,14],language:"ko"},episode_52_nl:{urls:{json:"~%n/all/%n-2e51096ad6.json"},jsons:{levels:"~%n/all/jsons/52-1ee5040d16.json"},episodeNo:52,levelsAmount:15,hard:[0,8],tricky:[4,13],language:"nl"},episode_52_pt:{urls:{json:"~%n/all/%n-f7b8abbbba.json"},jsons:{levels:"~%n/all/jsons/52-50be1df08e.json"},episodeNo:52,levelsAmount:15,hard:[8,12],tricky:[1,6],language:"pt"},episode_52_ru:{urls:{json:"~%n/all/%n-18e6131e89.json"},jsons:{levels:"~%n/all/jsons/52-0f010798e6.json"},episodeNo:52,levelsAmount:15,hard:[0,7],tricky:[3,12],language:"ru"},episode_53:{urls:{json:"~%n/all/%n-798d517934.json"},jsons:{levels:"~%n/all/jsons/53-bc1804d53c.json"},episodeNo:53,levelsAmount:15,hard:[0,12],tricky:[5,14],language:"en"},episode_53_de:{urls:{json:"~%n/all/%n-9064644b9e.json"},jsons:{levels:"~%n/all/jsons/53-e2f3aa25ea.json"},episodeNo:53,levelsAmount:15,hard:[3,12],tricky:[0,7],language:"de"},episode_53_es:{urls:{json:"~%n/all/%n-75518f03c4.json"},jsons:{
levels:"~%n/all/jsons/53-e3107cd27c.json"},episodeNo:53,levelsAmount:15,hard:[3,4],tricky:[8,14],language:"es"},episode_53_fr:{urls:{json:"~%n/all/%n-322db7e8b3.json"},jsons:{levels:"~%n/all/jsons/53-8d66029d69.json"},episodeNo:53,levelsAmount:15,hard:[3],tricky:[6,12],language:"fr"},episode_53_it:{urls:{json:"~%n/all/%n-90a62df565.json"},jsons:{levels:"~%n/all/jsons/53-0d334ebde0.json"},episodeNo:53,levelsAmount:15,hard:[7],tricky:[3,12],language:"it"},episode_53_ja:{urls:{json:"~%n/all/%n-2668f5896c.json"},jsons:{levels:"~%n/all/jsons/53-417e0c2b32.json"},episodeNo:53,levelsAmount:15,hard:[11,13],tricky:[1,6],language:"ja"},episode_53_ko:{urls:{json:"~%n/all/%n-2ed46a0c7a.json"},jsons:{levels:"~%n/all/jsons/53-83e232bc9a.json"},episodeNo:53,levelsAmount:15,hard:[6,10],tricky:[1,12],language:"ko"},episode_53_nl:{urls:{json:"~%n/all/%n-3d22f6aa65.json"},jsons:{levels:"~%n/all/jsons/53-2261db7a28.json"},episodeNo:53,levelsAmount:15,hard:[3,9],tricky:[0,7],language:"nl"},episode_53_pt:{
urls:{json:"~%n/all/%n-db274d11d4.json"},jsons:{levels:"~%n/all/jsons/53-178f0a8fb8.json"},episodeNo:53,levelsAmount:15,hard:[0,1],tricky:[8,14],language:"pt"},episode_53_ru:{urls:{json:"~%n/all/%n-4f9ba9664b.json"},jsons:{levels:"~%n/all/jsons/53-278fb9fa7e.json"},episodeNo:53,levelsAmount:15,hard:[2,8],tricky:[5,13],language:"ru"},episode_54:{urls:{json:"~%n/all/%n-8736598940.json"},jsons:{levels:"~%n/all/jsons/54-84cef7052a.json"},episodeNo:54,levelsAmount:15,hard:[2],tricky:[4,10],language:"en"},episode_54_de:{urls:{json:"~%n/all/%n-27e4d3840a.json"},jsons:{levels:"~%n/all/jsons/54-2f9d1d2c3c.json"},episodeNo:54,levelsAmount:15,hard:[1,10],tricky:[5,13],language:"de"},episode_54_es:{urls:{json:"~%n/all/%n-d7c9147bc8.json"},jsons:{levels:"~%n/all/jsons/54-53caa7b315.json"},episodeNo:54,levelsAmount:15,hard:[5,14],tricky:[0,9],language:"es"},episode_54_fr:{urls:{json:"~%n/all/%n-173ea7a549.json"},jsons:{levels:"~%n/all/jsons/54-b24b08b60f.json"},episodeNo:54,levelsAmount:15,hard:[10
],tricky:[0,6],language:"fr"},episode_54_it:{urls:{json:"~%n/all/%n-f779189159.json"},jsons:{levels:"~%n/all/jsons/54-8ffce27573.json"},episodeNo:54,levelsAmount:15,hard:[2,13],tricky:[6,11],language:"it"},episode_54_ja:{urls:{json:"~%n/all/%n-121fb67438.json"},jsons:{levels:"~%n/all/jsons/54-f5f7462c01.json"},episodeNo:54,levelsAmount:15,hard:[0,9],tricky:[5,14],language:"ja"},episode_54_ko:{urls:{json:"~%n/all/%n-0fce320f2e.json"},jsons:{levels:"~%n/all/jsons/54-2d9a6f5c72.json"},episodeNo:54,levelsAmount:15,hard:[7],tricky:[3,12],language:"ko"},episode_54_nl:{urls:{json:"~%n/all/%n-b54cb3fe9e.json"},jsons:{levels:"~%n/all/jsons/54-b35b5af7f0.json"},episodeNo:54,levelsAmount:15,hard:[0,6],tricky:[4,13],language:"nl"},episode_54_pt:{urls:{json:"~%n/all/%n-5733363c68.json"},jsons:{levels:"~%n/all/jsons/54-e8347a847d.json"},episodeNo:54,levelsAmount:15,hard:[1,2],tricky:[5,12],language:"pt"},episode_54_ru:{urls:{json:"~%n/all/%n-8d9d2da3a4.json"},jsons:{
levels:"~%n/all/jsons/54-f80b62026b.json"},episodeNo:54,levelsAmount:15,hard:[8,9],tricky:[0,6],language:"ru"},episode_55:{urls:{json:"~%n/all/%n-ad16812461.json"},jsons:{levels:"~%n/all/jsons/55-7c3033500d.json"},episodeNo:55,levelsAmount:15,hard:[8,12],tricky:[3,14],language:"en"},episode_55_de:{urls:{json:"~%n/all/%n-2795b52d76.json"},jsons:{levels:"~%n/all/jsons/55-262a999af1.json"},episodeNo:55,levelsAmount:15,hard:[5,10],tricky:[3,14],language:"de"},episode_55_es:{urls:{json:"~%n/all/%n-d0bd9baacd.json"},jsons:{levels:"~%n/all/jsons/55-427e518207.json"},episodeNo:55,levelsAmount:15,hard:[4,11],tricky:[1,13],language:"es"},episode_55_fr:{urls:{json:"~%n/all/%n-a1047e0465.json"},jsons:{levels:"~%n/all/jsons/55-963f2b29d4.json"},episodeNo:55,levelsAmount:15,hard:[5,6],tricky:[2,13],language:"fr"},episode_55_it:{urls:{json:"~%n/all/%n-f555b26a0a.json"},jsons:{levels:"~%n/all/jsons/55-ca80e88222.json"},episodeNo:55,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"it"},
episode_55_ja:{urls:{json:"~%n/all/%n-d2f2c0092e.json"},jsons:{levels:"~%n/all/jsons/55-83d3148a0b.json"},episodeNo:55,levelsAmount:15,hard:[6,10],tricky:[0,12],language:"ja"},episode_55_ko:{urls:{json:"~%n/all/%n-92c7f4e622.json"},jsons:{levels:"~%n/all/jsons/55-38af602c44.json"},episodeNo:55,levelsAmount:15,hard:[10],tricky:[0,6],language:"ko"},episode_55_nl:{urls:{json:"~%n/all/%n-9913f108d1.json"},jsons:{levels:"~%n/all/jsons/55-c2195ba741.json"},episodeNo:55,levelsAmount:15,hard:[4,5],tricky:[8,14],language:"nl"},episode_55_pt:{urls:{json:"~%n/all/%n-b25e811e6b.json"},jsons:{levels:"~%n/all/jsons/55-1eb9757cca.json"},episodeNo:55,levelsAmount:15,hard:[2,7],tricky:[5,13],language:"pt"},episode_55_ru:{urls:{json:"~%n/all/%n-07f48db3ea.json"},jsons:{levels:"~%n/all/jsons/55-f15ef9fe32.json"},episodeNo:55,levelsAmount:15,hard:[7,11],tricky:[2,13],language:"ru"},episode_56:{urls:{json:"~%n/all/%n-8ef027dffc.json"},jsons:{levels:"~%n/all/jsons/56-7dbd071d07.json"},episodeNo:56,
levelsAmount:15,hard:[3,10],tricky:[0,12],language:"en"},episode_56_de:{urls:{json:"~%n/all/%n-ea617845e0.json"},jsons:{levels:"~%n/all/jsons/56-c854cc2a3a.json"},episodeNo:56,levelsAmount:15,hard:[8,12],tricky:[0,5],language:"de"},episode_56_es:{urls:{json:"~%n/all/%n-774091c475.json"},jsons:{levels:"~%n/all/jsons/56-b74a03c9ff.json"},episodeNo:56,levelsAmount:15,hard:[11,13],tricky:[0,5],language:"es"},episode_56_fr:{urls:{json:"~%n/all/%n-cd6c50c2fc.json"},jsons:{levels:"~%n/all/jsons/56-b65f066d17.json"},episodeNo:56,levelsAmount:15,hard:[3,12],tricky:[6,14],language:"fr"},episode_56_it:{urls:{json:"~%n/all/%n-63bc9aeed7.json"},jsons:{levels:"~%n/all/jsons/56-0ba82caf50.json"},episodeNo:56,levelsAmount:15,hard:[3,10],tricky:[6,14],language:"it"},episode_56_ja:{urls:{json:"~%n/all/%n-f5a80d8149.json"},jsons:{levels:"~%n/all/jsons/56-ff71da09d1.json"},episodeNo:56,levelsAmount:15,hard:[10,13],tricky:[1,7],language:"ja"},episode_56_ko:{urls:{json:"~%n/all/%n-8874340db9.json"},jsons:{
levels:"~%n/all/jsons/56-138789690a.json"},episodeNo:56,levelsAmount:15,hard:[1,3],tricky:[7,13],language:"ko"},episode_56_nl:{urls:{json:"~%n/all/%n-0e19edbca0.json"},jsons:{levels:"~%n/all/jsons/56-f1c0ee169f.json"},episodeNo:56,levelsAmount:15,hard:[12,14],tricky:[1,7],language:"nl"},episode_56_pt:{urls:{json:"~%n/all/%n-69b21e8029.json"},jsons:{levels:"~%n/all/jsons/56-a302443986.json"},episodeNo:56,levelsAmount:15,hard:[2],tricky:[0,9],language:"pt"},episode_56_ru:{urls:{json:"~%n/all/%n-306503bb21.json"},jsons:{levels:"~%n/all/jsons/56-c10d4dddef.json"},episodeNo:56,levelsAmount:15,hard:[1],tricky:[7,14],language:"ru"},episode_57:{urls:{json:"~%n/all/%n-532e47f4d0.json"},jsons:{levels:"~%n/all/jsons/57-269d24d14a.json"},episodeNo:57,levelsAmount:15,hard:[2],tricky:[5,12],language:"en"},episode_57_de:{urls:{json:"~%n/all/%n-6c592c0cc5.json"},jsons:{levels:"~%n/all/jsons/57-4d8e09012d.json"},episodeNo:57,levelsAmount:15,hard:[1,12],tricky:[6,14],language:"de"},episode_57_es:{urls:{
json:"~%n/all/%n-5e96effe6e.json"},jsons:{levels:"~%n/all/jsons/57-cf4ea49a9e.json"},episodeNo:57,levelsAmount:15,hard:[1,9],tricky:[4,13],language:"es"},episode_57_fr:{urls:{json:"~%n/all/%n-9f4e9797f5.json"},jsons:{levels:"~%n/all/jsons/57-66723df1c1.json"},episodeNo:57,levelsAmount:15,hard:[1,7],tricky:[4,11],language:"fr"},episode_57_it:{urls:{json:"~%n/all/%n-2f0a2da663.json"},jsons:{levels:"~%n/all/jsons/57-219a607eef.json"},episodeNo:57,levelsAmount:15,hard:[1,5],tricky:[3,12],language:"it"},episode_57_ja:{urls:{json:"~%n/all/%n-1f1b9d675a.json"},jsons:{levels:"~%n/all/jsons/57-2871f6bbb5.json"},episodeNo:57,levelsAmount:15,hard:[3,10],tricky:[0,7],language:"ja"},episode_57_ko:{urls:{json:"~%n/all/%n-e432c29901.json"},jsons:{levels:"~%n/all/jsons/57-5e2e359f66.json"},episodeNo:57,levelsAmount:15,hard:[1,3],tricky:[8,14],language:"ko"},episode_57_nl:{urls:{json:"~%n/all/%n-2200001354.json"},jsons:{levels:"~%n/all/jsons/57-eedca7c364.json"},episodeNo:57,levelsAmount:15,hard:[5,12
],tricky:[3,14],language:"nl"},episode_57_pt:{urls:{json:"~%n/all/%n-9eddcdea79.json"},jsons:{levels:"~%n/all/jsons/57-c9ca2baa84.json"},episodeNo:57,levelsAmount:15,hard:[1,6],tricky:[8,13],language:"pt"},episode_57_ru:{urls:{json:"~%n/all/%n-b50fb65316.json"},jsons:{levels:"~%n/all/jsons/57-21a5ca02e7.json"},episodeNo:57,levelsAmount:15,hard:[0,4],tricky:[6,11],language:"ru"},episode_58:{urls:{json:"~%n/all/%n-657e4e6ed5.json"},jsons:{levels:"~%n/all/jsons/58-033ea50b8a.json"},episodeNo:58,levelsAmount:15,hard:[1,12],tricky:[3,7],language:"en"},episode_58_de:{urls:{json:"~%n/all/%n-5b5c1048eb.json"},jsons:{levels:"~%n/all/jsons/58-54944faedb.json"},episodeNo:58,levelsAmount:15,hard:[1,14],tricky:[3,9],language:"de"},episode_58_es:{urls:{json:"~%n/all/%n-e6aa091544.json"},jsons:{levels:"~%n/all/jsons/58-83dbe2d9f2.json"},episodeNo:58,levelsAmount:15,hard:[8,10],tricky:[3,14],language:"es"},episode_58_fr:{urls:{json:"~%n/all/%n-0c3a24482c.json"},jsons:{
levels:"~%n/all/jsons/58-cc8ccc859f.json"},episodeNo:58,levelsAmount:15,hard:[0,11],tricky:[5,14],language:"fr"},episode_58_it:{urls:{json:"~%n/all/%n-82c5f23466.json"},jsons:{levels:"~%n/all/jsons/58-59b813d4f2.json"},episodeNo:58,levelsAmount:15,hard:[7,8],tricky:[2,12],language:"it"},episode_58_ja:{urls:{json:"~%n/all/%n-fb71d6df78.json"},jsons:{levels:"~%n/all/jsons/58-0d38fd059a.json"},episodeNo:58,levelsAmount:15,hard:[5,12],tricky:[2,10],language:"ja"},episode_58_ko:{urls:{json:"~%n/all/%n-2dfecfe450.json"},jsons:{levels:"~%n/all/jsons/58-b68e2d3dc3.json"},episodeNo:58,levelsAmount:15,hard:[11,13],tricky:[1,6],language:"ko"},episode_58_nl:{urls:{json:"~%n/all/%n-b001ab8fde.json"},jsons:{levels:"~%n/all/jsons/58-f08f64925f.json"},episodeNo:58,levelsAmount:15,hard:[6,13],tricky:[0,9],language:"nl"},episode_58_pt:{urls:{json:"~%n/all/%n-81aa6ef493.json"},jsons:{levels:"~%n/all/jsons/58-220ff0d718.json"},episodeNo:58,levelsAmount:15,hard:[6,12],tricky:[3,14],language:"pt"},
episode_58_ru:{urls:{json:"~%n/all/%n-2c644a17b9.json"},jsons:{levels:"~%n/all/jsons/58-cf23e9c85d.json"},episodeNo:58,levelsAmount:15,hard:[5,7],tricky:[3,14],language:"ru"},episode_59:{urls:{json:"~%n/all/%n-ebf7bebfba.json"},jsons:{levels:"~%n/all/jsons/59-74292ea434.json"},episodeNo:59,levelsAmount:15,hard:[1,6],tricky:[4,13],language:"en"},episode_59_de:{urls:{json:"~%n/all/%n-672c01298d.json"},jsons:{levels:"~%n/all/jsons/59-a6b2b76f2b.json"},episodeNo:59,levelsAmount:15,hard:[3],tricky:[5,12],language:"de"},episode_59_es:{urls:{json:"~%n/all/%n-60cf63343b.json"},jsons:{levels:"~%n/all/jsons/59-f41870d064.json"},episodeNo:59,levelsAmount:15,hard:[4,8],tricky:[0,11],language:"es"},episode_59_fr:{urls:{json:"~%n/all/%n-88644bc08d.json"},jsons:{levels:"~%n/all/jsons/59-b3ef7b3041.json"},episodeNo:59,levelsAmount:15,hard:[1,10],tricky:[3,12],language:"fr"},episode_59_it:{urls:{json:"~%n/all/%n-39a357fdde.json"},jsons:{levels:"~%n/all/jsons/59-b2e14a4c23.json"},episodeNo:59,
levelsAmount:15,hard:[0,5],tricky:[2,10],language:"it"},episode_59_ja:{urls:{json:"~%n/all/%n-1d04d3638d.json"},jsons:{levels:"~%n/all/jsons/59-ae116fa60c.json"},episodeNo:59,levelsAmount:15,hard:[1,8],tricky:[6,14],language:"ja"},episode_59_ko:{urls:{json:"~%n/all/%n-e5203b0e47.json"},jsons:{levels:"~%n/all/jsons/59-e7cff89695.json"},episodeNo:59,levelsAmount:15,hard:[0,1],tricky:[7,13],language:"ko"},episode_59_nl:{urls:{json:"~%n/all/%n-bfd5acc27f.json"},jsons:{levels:"~%n/all/jsons/59-d389f4b857.json"},episodeNo:59,levelsAmount:15,hard:[0,14],tricky:[4,10],language:"nl"},episode_59_pt:{urls:{json:"~%n/all/%n-73a9661aa4.json"},jsons:{levels:"~%n/all/jsons/59-ef24b76ca9.json"},episodeNo:59,levelsAmount:15,hard:[3,14],tricky:[1,9],language:"pt"},episode_59_ru:{urls:{json:"~%n/all/%n-8e67431339.json"},jsons:{levels:"~%n/all/jsons/59-599043b622.json"},episodeNo:59,levelsAmount:15,hard:[2,8],tricky:[0,12],language:"ru"},episode_5_de:{urls:{json:"~%n/all/%n-b89d207980.json"},jsons:{
levels:"~%n/all/jsons/5-e948a5f51a.json"},episodeNo:5,levelsAmount:15,hard:[3,6],tricky:[0,10],language:"de"},episode_5_es:{urls:{json:"~%n/all/%n-fa41735c54.json"},jsons:{levels:"~%n/all/jsons/5-bd757ce33f.json"},episodeNo:5,levelsAmount:15,hard:[5,9],tricky:[3,14],language:"es"},episode_5_fr:{urls:{json:"~%n/all/%n-b7443df5df.json"},jsons:{levels:"~%n/all/jsons/5-4d55410cc8.json"},episodeNo:5,levelsAmount:15,hard:[0,9],tricky:[4,13],language:"fr"},episode_5_it:{urls:{json:"~%n/all/%n-a40671244b.json"},jsons:{levels:"~%n/all/jsons/5-4cd8446466.json"},episodeNo:5,levelsAmount:15,hard:[3,14],tricky:[5,11],language:"it"},episode_5_ja:{urls:{json:"~%n/all/%n-ae7236dde5.json"},jsons:{levels:"~%n/all/jsons/5-e3db80eb2a.json"},episodeNo:5,levelsAmount:15,hard:[5,12],tricky:[1,9],language:"ja"},episode_5_ko:{urls:{json:"~%n/all/%n-f16704020d.json"},jsons:{levels:"~%n/all/jsons/5-151268c57e.json"},episodeNo:5,levelsAmount:15,hard:[2,13],tricky:[4,9],language:"ko"},episode_5_nl:{urls:{
json:"~%n/all/%n-855a39dea3.json"},jsons:{levels:"~%n/all/jsons/5-73a48eabf6.json"},episodeNo:5,levelsAmount:15,hard:[6,13],tricky:[0,8],language:"nl"},episode_5_pt:{urls:{json:"~%n/all/%n-9a333cb220.json"},jsons:{levels:"~%n/all/jsons/5-aad838812a.json"},episodeNo:5,levelsAmount:15,hard:[0,1],tricky:[8,14],language:"pt"},episode_5_ru:{urls:{json:"~%n/all/%n-83ec42e3db.json"},jsons:{levels:"~%n/all/jsons/5-d3b64dcf5d.json"},episodeNo:5,levelsAmount:15,hard:[1,14],tricky:[5,11],language:"ru"},episode_6:{urls:{json:"~%n/all/%n-211be23246.json"},jsons:{levels:"~%n/all/jsons/6-a9f4816196.json"},episodeNo:6,levelsAmount:15,hard:[0,11],tricky:[3,8],language:"en"},episode_60:{urls:{json:"~%n/all/%n-9baab9a23f.json"},jsons:{levels:"~%n/all/jsons/60-90209fb780.json"},episodeNo:60,levelsAmount:15,hard:[5,9],tricky:[2,14],language:"en"},episode_60_de:{urls:{json:"~%n/all/%n-4eb84d0d86.json"},jsons:{levels:"~%n/all/jsons/60-c6229c85f3.json"},episodeNo:60,levelsAmount:15,hard:[3,8],tricky:[10,14],
language:"de"},episode_60_es:{urls:{json:"~%n/all/%n-37358cff87.json"},jsons:{levels:"~%n/all/jsons/60-8098d6371c.json"},episodeNo:60,levelsAmount:15,hard:[5],tricky:[7,13],language:"es"},episode_60_fr:{urls:{json:"~%n/all/%n-ba08afa140.json"},jsons:{levels:"~%n/all/jsons/60-5cf8078fa1.json"},episodeNo:60,levelsAmount:15,hard:[5],tricky:[2,12],language:"fr"},episode_60_it:{urls:{json:"~%n/all/%n-adac806496.json"},jsons:{levels:"~%n/all/jsons/60-87ad4aeb98.json"},episodeNo:60,levelsAmount:15,hard:[6,10],tricky:[1,13],language:"it"},episode_60_ja:{urls:{json:"~%n/all/%n-b72428470d.json"},jsons:{levels:"~%n/all/jsons/60-74bd0da2e7.json"},episodeNo:60,levelsAmount:15,hard:[4,13],tricky:[0,8],language:"ja"},episode_60_ko:{urls:{json:"~%n/all/%n-85601f1ca7.json"},jsons:{levels:"~%n/all/jsons/60-f54dde81d2.json"},episodeNo:60,levelsAmount:15,hard:[5],tricky:[0,10],language:"ko"},episode_60_nl:{urls:{json:"~%n/all/%n-9ac80d8b0b.json"},jsons:{levels:"~%n/all/jsons/60-bb49d5185d.json"},
episodeNo:60,levelsAmount:15,hard:[7],tricky:[0,9],language:"nl"},episode_60_pt:{urls:{json:"~%n/all/%n-9f35fdb8d8.json"},jsons:{levels:"~%n/all/jsons/60-6bc8cd2744.json"},episodeNo:60,levelsAmount:15,hard:[6,13],tricky:[3,11],language:"pt"},episode_60_ru:{urls:{json:"~%n/all/%n-c26bf56520.json"},jsons:{levels:"~%n/all/jsons/60-15f39f6e2d.json"},episodeNo:60,levelsAmount:15,hard:[0,11],tricky:[4,13],language:"ru"},episode_61:{urls:{json:"~%n/all/%n-dfb762e747.json"},jsons:{levels:"~%n/all/jsons/61-88f76c1c6e.json"},episodeNo:61,levelsAmount:15,hard:[5,9],tricky:[0,11],language:"en"},episode_61_de:{urls:{json:"~%n/all/%n-fa093aa431.json"},jsons:{levels:"~%n/all/jsons/61-d948fe5aba.json"},episodeNo:61,levelsAmount:15,hard:[3,11],tricky:[1,13],language:"de"},episode_61_es:{urls:{json:"~%n/all/%n-61b4ed6059.json"},jsons:{levels:"~%n/all/jsons/61-875cec8592.json"},episodeNo:61,levelsAmount:15,hard:[1,12],tricky:[3,8],language:"es"},episode_61_fr:{urls:{json:"~%n/all/%n-c1baa5a7ad.json"},
jsons:{levels:"~%n/all/jsons/61-a870595404.json"},episodeNo:61,levelsAmount:15,hard:[4,13],tricky:[7,11],language:"fr"},episode_61_it:{urls:{json:"~%n/all/%n-fd0658d5dd.json"},jsons:{levels:"~%n/all/jsons/61-15b7239ede.json"},episodeNo:61,levelsAmount:15,hard:[1,9],tricky:[6,14],language:"it"},episode_61_ja:{urls:{json:"~%n/all/%n-9177ec5cce.json"},jsons:{levels:"~%n/all/jsons/61-ac0e5f1f01.json"},episodeNo:61,levelsAmount:15,hard:[1,3],tricky:[8,14],language:"ja"},episode_61_ko:{urls:{json:"~%n/all/%n-94e94620de.json"},jsons:{levels:"~%n/all/jsons/61-a649b68dde.json"},episodeNo:61,levelsAmount:15,hard:[7,9],tricky:[2,12],language:"ko"},episode_61_nl:{urls:{json:"~%n/all/%n-f9eccaad55.json"},jsons:{levels:"~%n/all/jsons/61-65c5e83dac.json"},episodeNo:61,levelsAmount:15,hard:[7,11],tricky:[1,13],language:"nl"},episode_61_pt:{urls:{json:"~%n/all/%n-d176cbb35e.json"},jsons:{levels:"~%n/all/jsons/61-0dcc8c6a66.json"},episodeNo:61,levelsAmount:15,hard:[1,13],tricky:[3,9],language:"pt"},
episode_61_ru:{urls:{json:"~%n/all/%n-234a36d509.json"},jsons:{levels:"~%n/all/jsons/61-02c4f99b48.json"},episodeNo:61,levelsAmount:15,hard:[11,12],tricky:[0,5],language:"ru"},episode_62:{urls:{json:"~%n/all/%n-b6ae2997b1.json"},jsons:{levels:"~%n/all/jsons/62-24e2300b5c.json"},episodeNo:62,levelsAmount:15,hard:[3,5],tricky:[8,13],language:"en"},episode_62_de:{urls:{json:"~%n/all/%n-8c41119c99.json"},jsons:{levels:"~%n/all/jsons/62-4217684c81.json"},episodeNo:62,levelsAmount:15,hard:[5,10],tricky:[2,14],language:"de"},episode_62_es:{urls:{json:"~%n/all/%n-01841ffb9f.json"},jsons:{levels:"~%n/all/jsons/62-744f647c09.json"},episodeNo:62,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"es"},episode_62_fr:{urls:{json:"~%n/all/%n-9c69204e24.json"},jsons:{levels:"~%n/all/jsons/62-edf1526a05.json"},episodeNo:62,levelsAmount:15,hard:[10,14],tricky:[1,7],language:"fr"},episode_62_it:{urls:{json:"~%n/all/%n-52fa895e12.json"},jsons:{levels:"~%n/all/jsons/62-750de6edac.json"},episodeNo:62,
levelsAmount:15,hard:[4,7],tricky:[0,11],language:"it"},episode_62_ja:{urls:{json:"~%n/all/%n-964692de14.json"},jsons:{levels:"~%n/all/jsons/62-c8c1297fcc.json"},episodeNo:62,levelsAmount:15,hard:[1,9],tricky:[3,12],language:"ja"},episode_62_ko:{urls:{json:"~%n/all/%n-28f02a2d89.json"},jsons:{levels:"~%n/all/jsons/62-86bdfccde2.json"},episodeNo:62,levelsAmount:15,hard:[0,8],tricky:[2,6],language:"ko"},episode_62_nl:{urls:{json:"~%n/all/%n-51fa67ef1a.json"},jsons:{levels:"~%n/all/jsons/62-dd841938dd.json"},episodeNo:62,levelsAmount:15,hard:[2,9],tricky:[6,14],language:"nl"},episode_62_pt:{urls:{json:"~%n/all/%n-a8fc67e58f.json"},jsons:{levels:"~%n/all/jsons/62-621f5336e7.json"},episodeNo:62,levelsAmount:15,hard:[0,2],tricky:[6,12],language:"pt"},episode_62_ru:{urls:{json:"~%n/all/%n-2eefc8b578.json"},jsons:{levels:"~%n/all/jsons/62-9d5e8341be.json"},episodeNo:62,levelsAmount:15,hard:[2,6],tricky:[8,13],language:"ru"},episode_63:{urls:{json:"~%n/all/%n-bddda6ec76.json"},jsons:{
levels:"~%n/all/jsons/63-f2d46edfb6.json"},episodeNo:63,levelsAmount:15,hard:[2,11],tricky:[0,8],language:"en"},episode_63_de:{urls:{json:"~%n/all/%n-4c1146406c.json"},jsons:{levels:"~%n/all/jsons/63-5a09692a47.json"},episodeNo:63,levelsAmount:15,hard:[1,14],tricky:[3,9],language:"de"},episode_63_es:{urls:{json:"~%n/all/%n-df81b6f788.json"},jsons:{levels:"~%n/all/jsons/63-c93bd1443a.json"},episodeNo:63,levelsAmount:15,hard:[4,12],tricky:[7,14],language:"es"},episode_63_fr:{urls:{json:"~%n/all/%n-1ac5df2475.json"},jsons:{levels:"~%n/all/jsons/63-a53e09e1fd.json"},episodeNo:63,levelsAmount:15,hard:[0,13],tricky:[5,11],language:"fr"},episode_63_it:{urls:{json:"~%n/all/%n-433c8e0eec.json"},jsons:{levels:"~%n/all/jsons/63-8d1163709a.json"},episodeNo:63,levelsAmount:15,hard:[2,7],tricky:[9,14],language:"it"},episode_63_ja:{urls:{json:"~%n/all/%n-e32095ea8b.json"},jsons:{levels:"~%n/all/jsons/63-d17b04af1f.json"},episodeNo:63,levelsAmount:15,hard:[3],tricky:[5,12],language:"ja"},
episode_63_ko:{urls:{json:"~%n/all/%n-320e4ed347.json"},jsons:{levels:"~%n/all/jsons/63-209e952da1.json"},episodeNo:63,levelsAmount:15,hard:[0,5],tricky:[3,12],language:"ko"},episode_63_nl:{urls:{json:"~%n/all/%n-0fe23be1ac.json"},jsons:{levels:"~%n/all/jsons/63-a6ace7adc9.json"},episodeNo:63,levelsAmount:15,hard:[4,11],tricky:[0,8],language:"nl"},episode_63_pt:{urls:{json:"~%n/all/%n-950a1c5f09.json"},jsons:{levels:"~%n/all/jsons/63-96f4ee44bb.json"},episodeNo:63,levelsAmount:15,hard:[4,10],tricky:[0,7],language:"pt"},episode_63_ru:{urls:{json:"~%n/all/%n-6cedb838b4.json"},jsons:{levels:"~%n/all/jsons/63-28984e37a6.json"},episodeNo:63,levelsAmount:15,hard:[2,8],tricky:[6,14],language:"ru"},episode_64:{urls:{json:"~%n/all/%n-901bfa9150.json"},jsons:{levels:"~%n/all/jsons/64-d685927101.json"},episodeNo:64,levelsAmount:15,hard:[0,5],tricky:[3,12],language:"en"},episode_64_de:{urls:{json:"~%n/all/%n-de43635174.json"},jsons:{levels:"~%n/all/jsons/64-2ac4c31dea.json"},episodeNo:64,
levelsAmount:15,hard:[3,12],tricky:[5,10],language:"de"},episode_64_es:{urls:{json:"~%n/all/%n-497c1bfddc.json"},jsons:{levels:"~%n/all/jsons/64-5fc082841d.json"},episodeNo:64,levelsAmount:15,hard:[7,14],tricky:[1,10],language:"es"},episode_64_fr:{urls:{json:"~%n/all/%n-a75b4966fc.json"},jsons:{levels:"~%n/all/jsons/64-4d71f5576b.json"},episodeNo:64,levelsAmount:15,hard:[1,2],tricky:[4,10],language:"fr"},episode_64_it:{urls:{json:"~%n/all/%n-e8bea1bff7.json"},jsons:{levels:"~%n/all/jsons/64-0b1b5ad6c1.json"},episodeNo:64,levelsAmount:15,hard:[3,12],tricky:[0,8],language:"it"},episode_64_ja:{urls:{json:"~%n/all/%n-1bfaf3ccc2.json"},jsons:{levels:"~%n/all/jsons/64-a8404b5ca0.json"},episodeNo:64,levelsAmount:15,hard:[10,13],tricky:[4,8],language:"ja"},episode_64_ko:{urls:{json:"~%n/all/%n-02c0f425ee.json"},jsons:{levels:"~%n/all/jsons/64-e4fbbff371.json"},episodeNo:64,levelsAmount:15,hard:[0,2],tricky:[7,13],language:"ko"},episode_64_nl:{urls:{json:"~%n/all/%n-23d1157b64.json"},jsons:{
levels:"~%n/all/jsons/64-9bdac69880.json"},episodeNo:64,levelsAmount:15,hard:[1,9],tricky:[6,14],language:"nl"},episode_64_pt:{urls:{json:"~%n/all/%n-6278a87b21.json"},jsons:{levels:"~%n/all/jsons/64-7b9c06b6c6.json"},episodeNo:64,levelsAmount:15,hard:[6,12],tricky:[1,10],language:"pt"},episode_64_ru:{urls:{json:"~%n/all/%n-eca5e3c4d1.json"},jsons:{levels:"~%n/all/jsons/64-784002ed34.json"},episodeNo:64,levelsAmount:15,hard:[0,12],tricky:[3,8],language:"ru"},episode_65:{urls:{json:"~%n/all/%n-2da9e8d462.json"},jsons:{levels:"~%n/all/jsons/65-891d080763.json"},episodeNo:65,levelsAmount:15,hard:[2,5],tricky:[10,14],language:"en"},episode_65_de:{urls:{json:"~%n/all/%n-7e0ee47ec5.json"},jsons:{levels:"~%n/all/jsons/65-efdfc4b3c3.json"},episodeNo:65,levelsAmount:15,hard:[0,1],tricky:[3,10],language:"de"},episode_65_es:{urls:{json:"~%n/all/%n-9653aa910d.json"},jsons:{levels:"~%n/all/jsons/65-e82f7593c0.json"},episodeNo:65,levelsAmount:15,hard:[1,2],tricky:[7,13],language:"es"},
episode_65_fr:{urls:{json:"~%n/all/%n-7a9970de03.json"},jsons:{levels:"~%n/all/jsons/65-21d918f6b9.json"},episodeNo:65,levelsAmount:15,hard:[3,13],tricky:[5,10],language:"fr"},episode_65_it:{urls:{json:"~%n/all/%n-386fcef4b9.json"},jsons:{levels:"~%n/all/jsons/65-81198ce772.json"},episodeNo:65,levelsAmount:15,hard:[2,4],tricky:[6,12],language:"it"},episode_65_ja:{urls:{json:"~%n/all/%n-6a435fe8cd.json"},jsons:{levels:"~%n/all/jsons/65-470474920f.json"},episodeNo:65,levelsAmount:15,hard:[1,4],tricky:[7,13],language:"ja"},episode_65_ko:{urls:{json:"~%n/all/%n-11856b9cb5.json"},jsons:{levels:"~%n/all/jsons/65-c1e9ef21bb.json"},episodeNo:65,levelsAmount:15,hard:[2],tricky:[4,10],language:"ko"},episode_65_nl:{urls:{json:"~%n/all/%n-32b2c2f470.json"},jsons:{levels:"~%n/all/jsons/65-ef7eaf9152.json"},episodeNo:65,levelsAmount:15,hard:[0,9],tricky:[2,11],language:"nl"},episode_65_pt:{urls:{json:"~%n/all/%n-de4cbb14f6.json"},jsons:{levels:"~%n/all/jsons/65-e4ba3dcace.json"},episodeNo:65,
levelsAmount:15,hard:[4,11],tricky:[2,14],language:"pt"},episode_65_ru:{urls:{json:"~%n/all/%n-1269b32a22.json"},jsons:{levels:"~%n/all/jsons/65-dfabf625e5.json"},episodeNo:65,levelsAmount:15,hard:[4,10],tricky:[6,14],language:"ru"},episode_66:{urls:{json:"~%n/all/%n-0a1d51ce0b.json"},jsons:{levels:"~%n/all/jsons/66-4b83d8152d.json"},episodeNo:66,levelsAmount:15,hard:[2,10],tricky:[4,13],language:"en"},episode_66_de:{urls:{json:"~%n/all/%n-099bcd6015.json"},jsons:{levels:"~%n/all/jsons/66-1a4e68c512.json"},episodeNo:66,levelsAmount:15,hard:[4,10],tricky:[1,12],language:"de"},episode_66_es:{urls:{json:"~%n/all/%n-74eeb64a2a.json"},jsons:{levels:"~%n/all/jsons/66-7472f646e7.json"},episodeNo:66,levelsAmount:15,hard:[0,7],tricky:[2,10],language:"es"},episode_66_fr:{urls:{json:"~%n/all/%n-00917a6f00.json"},jsons:{levels:"~%n/all/jsons/66-12c50887a3.json"},episodeNo:66,levelsAmount:15,hard:[5,6],tricky:[0,10],language:"fr"},episode_66_it:{urls:{json:"~%n/all/%n-3f224c7d8a.json"},jsons:{
levels:"~%n/all/jsons/66-101912e59e.json"},episodeNo:66,levelsAmount:15,hard:[4],tricky:[8,14],language:"it"},episode_66_ja:{urls:{json:"~%n/all/%n-ca06e67deb.json"},jsons:{levels:"~%n/all/jsons/66-532423576d.json"},episodeNo:66,levelsAmount:15,hard:[6,8],tricky:[2,13],language:"ja"},episode_66_nl:{urls:{json:"~%n/all/%n-6feee54122.json"},jsons:{levels:"~%n/all/jsons/66-74452ae0b3.json"},episodeNo:66,levelsAmount:15,hard:[0,7],tricky:[3,12],language:"nl"},episode_66_ru:{urls:{json:"~%n/all/%n-fdb047812b.json"},jsons:{levels:"~%n/all/jsons/66-8e6bf4ecff.json"},episodeNo:66,levelsAmount:15,hard:[9,13],tricky:[0,5],language:"ru"},episode_67:{urls:{json:"~%n/all/%n-66eca66108.json"},jsons:{levels:"~%n/all/jsons/67-d20854910c.json"},episodeNo:67,levelsAmount:15,hard:[3],tricky:[6,13],language:"en"},episode_67_de:{urls:{json:"~%n/all/%n-4a4dcd327c.json"},jsons:{levels:"~%n/all/jsons/67-c1e2905467.json"},episodeNo:67,levelsAmount:15,hard:[2,12],tricky:[6,14],language:"de"},episode_67_es:{
urls:{json:"~%n/all/%n-02c0810e9e.json"},jsons:{levels:"~%n/all/jsons/67-298105f75d.json"},episodeNo:67,levelsAmount:15,hard:[4,7],tricky:[2,13],language:"es"},episode_67_fr:{urls:{json:"~%n/all/%n-cbf9c9b245.json"},jsons:{levels:"~%n/all/jsons/67-8eda69bbce.json"},episodeNo:67,levelsAmount:15,hard:[4,11],tricky:[1,9],language:"fr"},episode_67_it:{urls:{json:"~%n/all/%n-5c3e56d2bc.json"},jsons:{levels:"~%n/all/jsons/67-4b8b8e82b7.json"},episodeNo:67,levelsAmount:15,hard:[0,13],tricky:[3,9],language:"it"},episode_67_ja:{urls:{json:"~%n/all/%n-42418e0300.json"},jsons:{levels:"~%n/all/jsons/67-469e3806e8.json"},episodeNo:67,levelsAmount:15,hard:[4,10],tricky:[0,8],language:"ja"},episode_67_nl:{urls:{json:"~%n/all/%n-1a1d3648ab.json"},jsons:{levels:"~%n/all/jsons/67-aa274a92c4.json"},episodeNo:67,levelsAmount:15,hard:[1,8],tricky:[10,14],language:"nl"},episode_67_ru:{urls:{json:"~%n/all/%n-64f717dac4.json"},jsons:{levels:"~%n/all/jsons/67-3b7ad098e9.json"},episodeNo:67,levelsAmount:15,
hard:[4],tricky:[2,12],language:"ru"},episode_68:{urls:{json:"~%n/all/%n-2b6a4d97f7.json"},jsons:{levels:"~%n/all/jsons/68-7c38b4460c.json"},episodeNo:68,levelsAmount:15,hard:[7,12],tricky:[0,5],language:"en"},episode_68_de:{urls:{json:"~%n/all/%n-fd06e076e4.json"},jsons:{levels:"~%n/all/jsons/68-79b6fe1517.json"},episodeNo:68,levelsAmount:15,hard:[0,1],tricky:[4,11],language:"de"},episode_68_es:{urls:{json:"~%n/all/%n-0199dc5759.json"},jsons:{levels:"~%n/all/jsons/68-1fb6793b95.json"},episodeNo:68,levelsAmount:15,hard:[4,14],tricky:[0,9],language:"es"},episode_68_fr:{urls:{json:"~%n/all/%n-3d2fcd96f1.json"},jsons:{levels:"~%n/all/jsons/68-febb0c87b8.json"},episodeNo:68,levelsAmount:15,hard:[3],tricky:[8,14],language:"fr"},episode_68_it:{urls:{json:"~%n/all/%n-2326e646b1.json"},jsons:{levels:"~%n/all/jsons/68-400fd5bd0b.json"},episodeNo:68,levelsAmount:15,hard:[8,14],tricky:[2,11],language:"it"},episode_68_ja:{urls:{json:"~%n/all/%n-99d9ae5a65.json"},jsons:{
levels:"~%n/all/jsons/68-e42a46b13c.json"},episodeNo:68,levelsAmount:15,hard:[1,14],tricky:[6,11],language:"ja"},episode_68_nl:{urls:{json:"~%n/all/%n-9e9822b964.json"},jsons:{levels:"~%n/all/jsons/68-c8886b8ee0.json"},episodeNo:68,levelsAmount:15,hard:[4,7],tricky:[1,13],language:"nl"},episode_68_ru:{urls:{json:"~%n/all/%n-7c9b2230eb.json"},jsons:{levels:"~%n/all/jsons/68-c05d0be958.json"},episodeNo:68,levelsAmount:15,hard:[1,3],tricky:[9,14],language:"ru"},episode_69:{urls:{json:"~%n/all/%n-2a622359c6.json"},jsons:{levels:"~%n/all/jsons/69-995d8a0b4c.json"},episodeNo:69,levelsAmount:15,hard:[1,9],tricky:[5,13],language:"en"},episode_69_de:{urls:{json:"~%n/all/%n-adee1d7289.json"},jsons:{levels:"~%n/all/jsons/69-5b43ff9359.json"},episodeNo:69,levelsAmount:15,hard:[7,8],tricky:[2,13],language:"de"},episode_69_es:{urls:{json:"~%n/all/%n-22785ab57a.json"},jsons:{levels:"~%n/all/jsons/69-5bc4b40102.json"},episodeNo:69,levelsAmount:15,hard:[5,11],tricky:[1,9],language:"es"},episode_69_fr:{
urls:{json:"~%n/all/%n-ef4228aabf.json"},jsons:{levels:"~%n/all/jsons/69-eadefed36d.json"},episodeNo:69,levelsAmount:15,hard:[10],tricky:[1,8],language:"fr"},episode_69_it:{urls:{json:"~%n/all/%n-ae6b2a9265.json"},jsons:{levels:"~%n/all/jsons/69-afc5f0918d.json"},episodeNo:69,levelsAmount:15,hard:[0,8],tricky:[2,10],language:"it"},episode_69_ja:{urls:{json:"~%n/all/%n-41b98bf69a.json"},jsons:{levels:"~%n/all/jsons/69-087fe567c8.json"},episodeNo:69,levelsAmount:15,hard:[3,8],tricky:[0,11],language:"ja"},episode_69_nl:{urls:{json:"~%n/all/%n-0725a36ab8.json"},jsons:{levels:"~%n/all/jsons/69-7b28562b2f.json"},episodeNo:69,levelsAmount:15,hard:[0,2],tricky:[7,13],language:"nl"},episode_69_ru:{urls:{json:"~%n/all/%n-7ba92b5d91.json"},jsons:{levels:"~%n/all/jsons/69-4c90435a90.json"},episodeNo:69,levelsAmount:15,hard:[1,8],tricky:[4,13],language:"ru"},episode_6_de:{urls:{json:"~%n/all/%n-bad0ead897.json"},jsons:{levels:"~%n/all/jsons/6-b2c906a65d.json"},episodeNo:6,levelsAmount:15,hard:[3,10
],tricky:[5,13],language:"de"},episode_6_es:{urls:{json:"~%n/all/%n-d6cf459c3e.json"},jsons:{levels:"~%n/all/jsons/6-36593cee67.json"},episodeNo:6,levelsAmount:15,hard:[4,11],tricky:[1,9],language:"es"},episode_6_fr:{urls:{json:"~%n/all/%n-71ab2ccf77.json"},jsons:{levels:"~%n/all/jsons/6-28024f8fcb.json"},episodeNo:6,levelsAmount:15,hard:[0,5],tricky:[2,10],language:"fr"},episode_6_it:{urls:{json:"~%n/all/%n-c165be7cf0.json"},jsons:{levels:"~%n/all/jsons/6-18b5dcf8aa.json"},episodeNo:6,levelsAmount:15,hard:[1,14],tricky:[6,12],language:"it"},episode_6_ja:{urls:{json:"~%n/all/%n-e8a38c0857.json"},jsons:{levels:"~%n/all/jsons/6-4db7a2d149.json"},episodeNo:6,levelsAmount:15,hard:[3,7],tricky:[9,14],language:"ja"},episode_6_ko:{urls:{json:"~%n/all/%n-ad57caecb9.json"},jsons:{levels:"~%n/all/jsons/6-dfb141a831.json"},episodeNo:6,levelsAmount:15,hard:[0,2],tricky:[6,13],language:"ko"},episode_6_nl:{urls:{json:"~%n/all/%n-8061f87fb2.json"},jsons:{levels:"~%n/all/jsons/6-5d9112526c.json"},
episodeNo:6,levelsAmount:15,hard:[0,4],tricky:[7,13],language:"nl"},episode_6_pt:{urls:{json:"~%n/all/%n-c7ec6c54a5.json"},jsons:{levels:"~%n/all/jsons/6-7b74f5e4fd.json"},episodeNo:6,levelsAmount:15,hard:[3,9],tricky:[1,12],language:"pt"},episode_6_ru:{urls:{json:"~%n/all/%n-a5c691eef6.json"},jsons:{levels:"~%n/all/jsons/6-1578d1fda6.json"},episodeNo:6,levelsAmount:15,hard:[0,8],tricky:[2,10],language:"ru"},episode_7:{urls:{json:"~%n/all/%n-b863861338.json"},jsons:{levels:"~%n/all/jsons/7-008edceb61.json"},episodeNo:7,levelsAmount:15,hard:[12,13],tricky:[4,10],language:"en"},episode_70:{urls:{json:"~%n/all/%n-4fcb4840b6.json"},jsons:{levels:"~%n/all/jsons/70-eeb01fa907.json"},episodeNo:70,levelsAmount:15,hard:[1,3],tricky:[9,14],language:"en"},episode_70_de:{urls:{json:"~%n/all/%n-f9ecc39c11.json"},jsons:{levels:"~%n/all/jsons/70-e423394710.json"},episodeNo:70,levelsAmount:15,hard:[0,4],tricky:[2,10],language:"de"},episode_70_es:{urls:{json:"~%n/all/%n-c6ba8ef866.json"},jsons:{
levels:"~%n/all/jsons/70-912c6ede03.json"},episodeNo:70,levelsAmount:15,hard:[1,8],tricky:[6,14],language:"es"},episode_70_fr:{urls:{json:"~%n/all/%n-b5c0166fb6.json"},jsons:{levels:"~%n/all/jsons/70-ca4d523b09.json"},episodeNo:70,levelsAmount:15,hard:[5,11],tricky:[2,13],language:"fr"},episode_70_it:{urls:{json:"~%n/all/%n-b2da4a5e82.json"},jsons:{levels:"~%n/all/jsons/70-5131daf2c4.json"},episodeNo:70,levelsAmount:15,hard:[7,12],tricky:[2,10],language:"it"},episode_70_ja:{urls:{json:"~%n/all/%n-de5a083913.json"},jsons:{levels:"~%n/all/jsons/70-e6481ae129.json"},episodeNo:70,levelsAmount:15,hard:[7,12],tricky:[1,9],language:"ja"},episode_70_nl:{urls:{json:"~%n/all/%n-f35ab0efd0.json"},jsons:{levels:"~%n/all/jsons/70-a6ff7bc903.json"},episodeNo:70,levelsAmount:15,hard:[0,6],tricky:[2,10],language:"nl"},episode_70_ru:{urls:{json:"~%n/all/%n-85b7176bbf.json"},jsons:{levels:"~%n/all/jsons/70-986a967b9c.json"},episodeNo:70,levelsAmount:15,hard:[0,10],tricky:[4,13],language:"ru"},
episode_71:{urls:{json:"~%n/all/%n-33646f590d.json"},jsons:{levels:"~%n/all/jsons/71-76efcce585.json"},episodeNo:71,levelsAmount:15,hard:[5,10],tricky:[1,12],language:"en"},episode_71_de:{urls:{json:"~%n/all/%n-190d0d1e2e.json"},jsons:{levels:"~%n/all/jsons/71-9bca3a9321.json"},episodeNo:71,levelsAmount:15,hard:[0,9],tricky:[4,13],language:"de"},episode_71_es:{urls:{json:"~%n/all/%n-b3e283c241.json"},jsons:{levels:"~%n/all/jsons/71-32c4fd04d0.json"},episodeNo:71,levelsAmount:15,hard:[0,10],tricky:[3,12],language:"es"},episode_71_fr:{urls:{json:"~%n/all/%n-1f10c39892.json"},jsons:{levels:"~%n/all/jsons/71-aacf86e150.json"},episodeNo:71,levelsAmount:15,hard:[1,12],tricky:[3,8],language:"fr"},episode_71_it:{urls:{json:"~%n/all/%n-84438cbcb3.json"},jsons:{levels:"~%n/all/jsons/71-2ade28b93e.json"},episodeNo:71,levelsAmount:15,hard:[1,7],tricky:[9,14],language:"it"},episode_71_ja:{urls:{json:"~%n/all/%n-18353ed94e.json"},jsons:{levels:"~%n/all/jsons/71-d4f0fe5d1f.json"},episodeNo:71,
levelsAmount:15,hard:[0,6],tricky:[9,14],language:"ja"},episode_71_nl:{urls:{json:"~%n/all/%n-2c366979f8.json"},jsons:{levels:"~%n/all/jsons/71-2d6f90aa32.json"},episodeNo:71,levelsAmount:15,hard:[8,11],tricky:[2,13],language:"nl"},episode_71_ru:{urls:{json:"~%n/all/%n-532050547d.json"},jsons:{levels:"~%n/all/jsons/71-0262441869.json"},episodeNo:71,levelsAmount:15,hard:[1,5],tricky:[3,11],language:"ru"},episode_72:{urls:{json:"~%n/all/%n-6de30c0b1d.json"},jsons:{levels:"~%n/all/jsons/72-e3c5f9ce29.json"},episodeNo:72,levelsAmount:15,hard:[7,12],tricky:[3,14],language:"en"},episode_72_de:{urls:{json:"~%n/all/%n-ff02a87737.json"},jsons:{levels:"~%n/all/jsons/72-eb3413ee85.json"},episodeNo:72,levelsAmount:15,hard:[11],tricky:[4,14],language:"de"},episode_72_es:{urls:{json:"~%n/all/%n-0b3b5faa7b.json"},jsons:{levels:"~%n/all/jsons/72-f24dacf92d.json"},episodeNo:72,levelsAmount:15,hard:[1,7],tricky:[5,13],language:"es"},episode_72_fr:{urls:{json:"~%n/all/%n-c254f1b18f.json"},jsons:{
levels:"~%n/all/jsons/72-a2a844aa98.json"},episodeNo:72,levelsAmount:15,hard:[0,7],tricky:[4,13],language:"fr"},episode_72_it:{urls:{json:"~%n/all/%n-3106af0f6c.json"},jsons:{levels:"~%n/all/jsons/72-237bdf7695.json"},episodeNo:72,levelsAmount:15,hard:[2,14],tricky:[4,10],language:"it"},episode_72_ja:{urls:{json:"~%n/all/%n-0d4e886bba.json"},jsons:{levels:"~%n/all/jsons/72-c156ce748c.json"},episodeNo:72,levelsAmount:15,hard:[3,8],tricky:[1,12],language:"ja"},episode_72_nl:{urls:{json:"~%n/all/%n-117e6d8768.json"},jsons:{levels:"~%n/all/jsons/72-e03109bb74.json"},episodeNo:72,levelsAmount:15,hard:[1,13],tricky:[3,8],language:"nl"},episode_72_ru:{urls:{json:"~%n/all/%n-6c314d3723.json"},jsons:{levels:"~%n/all/jsons/72-a48f892168.json"},episodeNo:72,levelsAmount:15,hard:[1,9],tricky:[5,13],language:"ru"},episode_73:{urls:{json:"~%n/all/%n-d21efd58a0.json"},jsons:{levels:"~%n/all/jsons/73-343029596d.json"},episodeNo:73,levelsAmount:15,hard:[1,5],tricky:[7,12],language:"en"},episode_73_de:{
urls:{json:"~%n/all/%n-f83dc5cf92.json"},jsons:{levels:"~%n/all/jsons/73-0c2c0c87b1.json"},episodeNo:73,levelsAmount:15,hard:[2,12],tricky:[4,9],language:"de"},episode_73_es:{urls:{json:"~%n/all/%n-66f3aec726.json"},jsons:{levels:"~%n/all/jsons/73-8cae4db145.json"},episodeNo:73,levelsAmount:15,hard:[4,11],tricky:[0,7],language:"es"},episode_73_fr:{urls:{json:"~%n/all/%n-6f797ba359.json"},jsons:{levels:"~%n/all/jsons/73-2efe4a4648.json"},episodeNo:73,levelsAmount:15,hard:[1,9],tricky:[6,14],language:"fr"},episode_73_it:{urls:{json:"~%n/all/%n-d50fcedcdb.json"},jsons:{levels:"~%n/all/jsons/73-8c4713954c.json"},episodeNo:73,levelsAmount:15,hard:[5,7],tricky:[9,14],language:"it"},episode_73_ja:{urls:{json:"~%n/all/%n-3877ee6a35.json"},jsons:{levels:"~%n/all/jsons/73-d6b2d2b2e8.json"},episodeNo:73,levelsAmount:15,hard:[7,12],tricky:[2,10],language:"ja"},episode_73_nl:{urls:{json:"~%n/all/%n-f1f1901fa3.json"},jsons:{levels:"~%n/all/jsons/73-dd910fddef.json"},episodeNo:73,levelsAmount:15,
hard:[0,1],tricky:[5,11],language:"nl"},episode_73_ru:{urls:{json:"~%n/all/%n-e279e928c2.json"},jsons:{levels:"~%n/all/jsons/73-710ff656d8.json"},episodeNo:73,levelsAmount:15,hard:[0,12],tricky:[2,8],language:"ru"},episode_74:{urls:{json:"~%n/all/%n-6fba0759f1.json"},jsons:{levels:"~%n/all/jsons/74-d3c4d2fc5d.json"},episodeNo:74,levelsAmount:15,hard:[2,6],tricky:[8,13],language:"en"},episode_74_de:{urls:{json:"~%n/all/%n-94cd95e254.json"},jsons:{levels:"~%n/all/jsons/74-ce09abcf3e.json"},episodeNo:74,levelsAmount:15,hard:[5],tricky:[7,14],language:"de"},episode_74_es:{urls:{json:"~%n/all/%n-ea8d9f53ed.json"},jsons:{levels:"~%n/all/jsons/74-353fef49cc.json"},episodeNo:74,levelsAmount:15,hard:[0,5],tricky:[7,13],language:"es"},episode_74_fr:{urls:{json:"~%n/all/%n-ec8188cd83.json"},jsons:{levels:"~%n/all/jsons/74-104271926b.json"},episodeNo:74,levelsAmount:15,hard:[9],tricky:[1,11],language:"fr"},episode_74_it:{urls:{json:"~%n/all/%n-e831b5f602.json"},jsons:{
levels:"~%n/all/jsons/74-bf987f70f1.json"},episodeNo:74,levelsAmount:15,hard:[1,11],tricky:[4,9],language:"it"},episode_74_ja:{urls:{json:"~%n/all/%n-1654eb195c.json"},jsons:{levels:"~%n/all/jsons/74-f195cc44ce.json"},episodeNo:74,levelsAmount:15,hard:[3,8],tricky:[0,10],language:"ja"},episode_74_nl:{urls:{json:"~%n/all/%n-95c2e93fff.json"},jsons:{levels:"~%n/all/jsons/74-e557f67dd6.json"},episodeNo:74,levelsAmount:15,hard:[5,13],tricky:[3,11],language:"nl"},episode_74_ru:{urls:{json:"~%n/all/%n-aee81e26fb.json"},jsons:{levels:"~%n/all/jsons/74-840fcf7053.json"},episodeNo:74,levelsAmount:15,hard:[0,4],tricky:[6,12],language:"ru"},episode_75:{urls:{json:"~%n/all/%n-9d3a915cc1.json"},jsons:{levels:"~%n/all/jsons/75-a7ee7b42bb.json"},episodeNo:75,levelsAmount:15,hard:[2,8],tricky:[0,10],language:"en"},episode_75_de:{urls:{json:"~%n/all/%n-fa8b50c5de.json"},jsons:{levels:"~%n/all/jsons/75-ea1d374736.json"},episodeNo:75,levelsAmount:15,hard:[1,13],tricky:[3,9],language:"de"},episode_75_es:{
urls:{json:"~%n/all/%n-e696d23e88.json"},jsons:{levels:"~%n/all/jsons/75-22d1b7ecf5.json"},episodeNo:75,levelsAmount:15,hard:[4,12],tricky:[6,14],language:"es"},episode_75_fr:{urls:{json:"~%n/all/%n-c8ead34848.json"},jsons:{levels:"~%n/all/jsons/75-410355a344.json"},episodeNo:75,levelsAmount:15,hard:[4,11],tricky:[6,14],language:"fr"},episode_75_it:{urls:{json:"~%n/all/%n-c460d858fd.json"},jsons:{levels:"~%n/all/jsons/75-5276f096ce.json"},episodeNo:75,levelsAmount:15,hard:[0,1],tricky:[6,12],language:"it"},episode_75_ja:{urls:{json:"~%n/all/%n-6604c7bb6c.json"},jsons:{levels:"~%n/all/jsons/75-5cb133f417.json"},episodeNo:75,levelsAmount:15,hard:[4,6],tricky:[2,13],language:"ja"},episode_75_nl:{urls:{json:"~%n/all/%n-11aa56854f.json"},jsons:{levels:"~%n/all/jsons/75-3bbe16fb37.json"},episodeNo:75,levelsAmount:15,hard:[6,14],tricky:[1,10],language:"nl"},episode_75_ru:{urls:{json:"~%n/all/%n-7e157f6d30.json"},jsons:{levels:"~%n/all/jsons/75-748ec89a53.json"},episodeNo:75,levelsAmount:15,
hard:[1,8],tricky:[6,14],language:"ru"},episode_76:{urls:{json:"~%n/all/%n-358cba9ccf.json"},jsons:{levels:"~%n/all/jsons/76-c360d27045.json"},episodeNo:76,levelsAmount:15,hard:[0,2],tricky:[6,13],language:"en"},episode_76_de:{urls:{json:"~%n/all/%n-772695fa36.json"},jsons:{levels:"~%n/all/jsons/76-cb1ee68e56.json"},episodeNo:76,levelsAmount:15,hard:[3,10],tricky:[1,13],language:"de"},episode_76_es:{urls:{json:"~%n/all/%n-5bffd6968e.json"},jsons:{levels:"~%n/all/jsons/76-d2c801ff62.json"},episodeNo:76,levelsAmount:15,hard:[2,3],tricky:[5,11],language:"es"},episode_76_fr:{urls:{json:"~%n/all/%n-b7ec8e730b.json"},jsons:{levels:"~%n/all/jsons/76-f80bd8fa3d.json"},episodeNo:76,levelsAmount:15,hard:[3,6],tricky:[0,12],language:"fr"},episode_76_it:{urls:{json:"~%n/all/%n-74e99dcd3a.json"},jsons:{levels:"~%n/all/jsons/76-bd30f053b9.json"},episodeNo:76,levelsAmount:15,hard:[3,13],tricky:[0,7],language:"it"},episode_76_ja:{urls:{json:"~%n/all/%n-326af36305.json"},jsons:{
levels:"~%n/all/jsons/76-362c5c7395.json"},episodeNo:76,levelsAmount:15,hard:[1,2],tricky:[8,14],language:"ja"},episode_76_nl:{urls:{json:"~%n/all/%n-9b5bb5747f.json"},jsons:{levels:"~%n/all/jsons/76-d78758f88d.json"},episodeNo:76,levelsAmount:15,hard:[0,8],tricky:[4,13],language:"nl"},episode_76_ru:{urls:{json:"~%n/all/%n-e830d8a119.json"},jsons:{levels:"~%n/all/jsons/76-c575f6f549.json"},episodeNo:76,levelsAmount:15,hard:[2,13],tricky:[4,9],language:"ru"},episode_77:{urls:{json:"~%n/all/%n-4c9ac2d120.json"},jsons:{levels:"~%n/all/jsons/77-13af3d2303.json"},episodeNo:77,levelsAmount:15,hard:[9,13],tricky:[3,11],language:"en"},episode_77_de:{urls:{json:"~%n/all/%n-9d286d1332.json"},jsons:{levels:"~%n/all/jsons/77-2e50cbf059.json"},episodeNo:77,levelsAmount:15,hard:[3,11],tricky:[0,7],language:"de"},episode_77_es:{urls:{json:"~%n/all/%n-f5e334034f.json"},jsons:{levels:"~%n/all/jsons/77-80227a6897.json"},episodeNo:77,levelsAmount:15,hard:[2,14],tricky:[6,12],language:"es"},
episode_77_fr:{urls:{json:"~%n/all/%n-2c9015983d.json"},jsons:{levels:"~%n/all/jsons/77-b92fe62782.json"},episodeNo:77,levelsAmount:15,hard:[1,9],tricky:[4,13],language:"fr"},episode_77_it:{urls:{json:"~%n/all/%n-9d6659d843.json"},jsons:{levels:"~%n/all/jsons/77-2249c347d8.json"},episodeNo:77,levelsAmount:15,hard:[6,13],tricky:[2,10],language:"it"},episode_77_ja:{urls:{json:"~%n/all/%n-7051d6c296.json"},jsons:{levels:"~%n/all/jsons/77-44f81140ff.json"},episodeNo:77,levelsAmount:15,hard:[10,12],tricky:[1,6],language:"ja"},episode_77_nl:{urls:{json:"~%n/all/%n-feb2fcb7b7.json"},jsons:{levels:"~%n/all/jsons/77-822efa5b71.json"},episodeNo:77,levelsAmount:15,hard:[2,8],tricky:[0,10],language:"nl"},episode_77_ru:{urls:{json:"~%n/all/%n-5a006e8cb5.json"},jsons:{levels:"~%n/all/jsons/77-039617f34c.json"},episodeNo:77,levelsAmount:15,hard:[1,8],tricky:[5,13],language:"ru"},episode_78:{urls:{json:"~%n/all/%n-4ecce1efcf.json"},jsons:{levels:"~%n/all/jsons/78-d00304e1fb.json"},episodeNo:78,
levelsAmount:15,hard:[1,8],tricky:[4,11],language:"en"},episode_78_de:{urls:{json:"~%n/all/%n-49348412bd.json"},jsons:{levels:"~%n/all/jsons/78-ca8242765b.json"},episodeNo:78,levelsAmount:15,hard:[6],tricky:[2,12],language:"de"},episode_78_es:{urls:{json:"~%n/all/%n-8a04c1edc9.json"},jsons:{levels:"~%n/all/jsons/78-7a442d474f.json"},episodeNo:78,levelsAmount:15,hard:[4,14],tricky:[0,9],language:"es"},episode_78_fr:{urls:{json:"~%n/all/%n-f6b09308e1.json"},jsons:{levels:"~%n/all/jsons/78-ad1c8e50ce.json"},episodeNo:78,levelsAmount:15,hard:[4,11],tricky:[0,7],language:"fr"},episode_78_it:{urls:{json:"~%n/all/%n-e7d2ac47ae.json"},jsons:{levels:"~%n/all/jsons/78-6384476618.json"},episodeNo:78,levelsAmount:15,hard:[0,11],tricky:[5,14],language:"it"},episode_78_ja:{urls:{json:"~%n/all/%n-7596579e4b.json"},jsons:{levels:"~%n/all/jsons/78-9bd92fefc9.json"},episodeNo:78,levelsAmount:15,hard:[1,7],tricky:[9,14],language:"ja"},episode_78_nl:{urls:{json:"~%n/all/%n-446f47b691.json"},jsons:{
levels:"~%n/all/jsons/78-a39873032e.json"},episodeNo:78,levelsAmount:15,hard:[0],tricky:[5,12],language:"nl"},episode_78_ru:{urls:{json:"~%n/all/%n-69e9d813d6.json"},jsons:{levels:"~%n/all/jsons/78-04bd697e9e.json"},episodeNo:78,levelsAmount:15,hard:[1,6],tricky:[3,10],language:"ru"},episode_79:{urls:{json:"~%n/all/%n-48fab0c297.json"},jsons:{levels:"~%n/all/jsons/79-d35d88fb0a.json"},episodeNo:79,levelsAmount:15,hard:[0,5],tricky:[8,14],language:"en"},episode_79_de:{urls:{json:"~%n/all/%n-959340f42d.json"},jsons:{levels:"~%n/all/jsons/79-85d1700e55.json"},episodeNo:79,levelsAmount:15,hard:[8,14],tricky:[3,12],language:"de"},episode_79_es:{urls:{json:"~%n/all/%n-783c8ca983.json"},jsons:{levels:"~%n/all/jsons/79-af42b32d65.json"},episodeNo:79,levelsAmount:15,hard:[0,3],tricky:[7,12],language:"es"},episode_79_fr:{urls:{json:"~%n/all/%n-7df3bcfbc6.json"},jsons:{levels:"~%n/all/jsons/79-c58e3a213c.json"},episodeNo:79,levelsAmount:15,hard:[1,7],tricky:[5,13],language:"fr"},episode_79_it:{
urls:{json:"~%n/all/%n-3ead3ce106.json"},jsons:{levels:"~%n/all/jsons/79-8ec4d9e25e.json"},episodeNo:79,levelsAmount:15,hard:[1,12],tricky:[4,8],language:"it"},episode_79_ja:{urls:{json:"~%n/all/%n-37f5ac702c.json"},jsons:{levels:"~%n/all/jsons/79-6b5ed725c1.json"},episodeNo:79,levelsAmount:15,hard:[6,8],tricky:[0,11],language:"ja"},episode_79_nl:{urls:{json:"~%n/all/%n-136fd32113.json"},jsons:{levels:"~%n/all/jsons/79-72276f8231.json"},episodeNo:79,levelsAmount:15,hard:[3,6],tricky:[9,14],language:"nl"},episode_79_ru:{urls:{json:"~%n/all/%n-f827a77eae.json"},jsons:{levels:"~%n/all/jsons/79-c24d553892.json"},episodeNo:79,levelsAmount:15,hard:[3,10],tricky:[5,13],language:"ru"},episode_7_de:{urls:{json:"~%n/all/%n-74f93d9c28.json"},jsons:{levels:"~%n/all/jsons/7-60df4856bd.json"},episodeNo:7,levelsAmount:15,hard:[7,12],tricky:[3,14],language:"de"},episode_7_es:{urls:{json:"~%n/all/%n-50eb3f07b6.json"},jsons:{levels:"~%n/all/jsons/7-ae01d9ae4f.json"},episodeNo:7,levelsAmount:15,hard:[2,6
],tricky:[8,13],language:"es"},episode_7_fr:{urls:{json:"~%n/all/%n-92ddbaf36e.json"},jsons:{levels:"~%n/all/jsons/7-8d45fec6eb.json"},episodeNo:7,levelsAmount:15,hard:[5,14],tricky:[2,11],language:"fr"},episode_7_it:{urls:{json:"~%n/all/%n-9fd612761b.json"},jsons:{levels:"~%n/all/jsons/7-14e8fc1330.json"},episodeNo:7,levelsAmount:15,hard:[1,3],tricky:[6,11],language:"it"},episode_7_ja:{urls:{json:"~%n/all/%n-23ee45d079.json"},jsons:{levels:"~%n/all/jsons/7-9269d25f2b.json"},episodeNo:7,levelsAmount:15,hard:[2,9],tricky:[4,12],language:"ja"},episode_7_ko:{urls:{json:"~%n/all/%n-6e7237899c.json"},jsons:{levels:"~%n/all/jsons/7-fa1a5cda8a.json"},episodeNo:7,levelsAmount:15,hard:[4,5],tricky:[0,10],language:"ko"},episode_7_nl:{urls:{json:"~%n/all/%n-6f8e920922.json"},jsons:{levels:"~%n/all/jsons/7-3ad63ad26a.json"},episodeNo:7,levelsAmount:15,hard:[3,7],tricky:[9,14],language:"nl"},episode_7_pt:{urls:{json:"~%n/all/%n-6be9687886.json"},jsons:{levels:"~%n/all/jsons/7-f713a0fbf2.json"},
episodeNo:7,levelsAmount:15,hard:[0,2],tricky:[6,13],language:"pt"},episode_7_ru:{urls:{json:"~%n/all/%n-36b183248c.json"},jsons:{levels:"~%n/all/jsons/7-c7c18b3d79.json"},episodeNo:7,levelsAmount:15,hard:[3,14],tricky:[5,11],language:"ru"},episode_8:{urls:{json:"~%n/all/%n-f31b0cd7a6.json"},jsons:{levels:"~%n/all/jsons/8-3ea32f41a8.json"},episodeNo:8,levelsAmount:15,hard:[0,8],tricky:[2,11],language:"en"},episode_80:{urls:{json:"~%n/all/%n-685a5314e9.json"},jsons:{levels:"~%n/all/jsons/80-e3778634f8.json"},episodeNo:80,levelsAmount:15,hard:[0,6],tricky:[2,11],language:"en"},episode_80_de:{urls:{json:"~%n/all/%n-1c37520450.json"},jsons:{levels:"~%n/all/jsons/80-700a8eaa7b.json"},episodeNo:80,levelsAmount:15,hard:[3,6],tricky:[0,11],language:"de"},episode_80_es:{urls:{json:"~%n/all/%n-b8a85675dc.json"},jsons:{levels:"~%n/all/jsons/80-0eedc7b09b.json"},episodeNo:80,levelsAmount:15,hard:[1,8],tricky:[3,10],language:"es"},episode_80_fr:{urls:{json:"~%n/all/%n-6e143a4f92.json"},jsons:{
levels:"~%n/all/jsons/80-ea82c0a412.json"},episodeNo:80,levelsAmount:15,hard:[1,14],tricky:[6,12],language:"fr"},episode_80_it:{urls:{json:"~%n/all/%n-a334cda640.json"},jsons:{levels:"~%n/all/jsons/80-22deeb172c.json"},episodeNo:80,levelsAmount:15,hard:[5,8],tricky:[3,14],language:"it"},episode_80_ja:{urls:{json:"~%n/all/%n-7baf3f03c7.json"},jsons:{levels:"~%n/all/jsons/80-bfa29f8e0c.json"},episodeNo:80,levelsAmount:15,hard:[5,7],tricky:[2,13],language:"ja"},episode_80_nl:{urls:{json:"~%n/all/%n-8a514fb47a.json"},jsons:{levels:"~%n/all/jsons/80-7ad7418c59.json"},episodeNo:80,levelsAmount:15,hard:[5,14],tricky:[1,9],language:"nl"},episode_80_ru:{urls:{json:"~%n/all/%n-109daf2af3.json"},jsons:{levels:"~%n/all/jsons/80-82b8695788.json"},episodeNo:80,levelsAmount:15,hard:[8,11],tricky:[3,14],language:"ru"},episode_81:{urls:{json:"~%n/all/%n-0e0bcf5269.json"},jsons:{levels:"~%n/all/jsons/81-c3b4cb1508.json"},episodeNo:81,levelsAmount:15,hard:[3,9],tricky:[1,13],language:"en"},
episode_81_de:{urls:{json:"~%n/all/%n-fd9bf60f68.json"},jsons:{levels:"~%n/all/jsons/81-164f977158.json"},episodeNo:81,levelsAmount:15,hard:[6,12],tricky:[3,14],language:"de"},episode_81_es:{urls:{json:"~%n/all/%n-748d4eb7fe.json"},jsons:{levels:"~%n/all/jsons/81-0c73c14b2e.json"},episodeNo:81,levelsAmount:15,hard:[3],tricky:[5,12],language:"es"},episode_81_fr:{urls:{json:"~%n/all/%n-ed2cb8fa19.json"},jsons:{levels:"~%n/all/jsons/81-9319a62434.json"},episodeNo:81,levelsAmount:15,hard:[2,14],tricky:[4,9],language:"fr"},episode_81_it:{urls:{json:"~%n/all/%n-f5b599763f.json"},jsons:{levels:"~%n/all/jsons/81-2ddddb31ae.json"},episodeNo:81,levelsAmount:15,hard:[1,12],tricky:[3,9],language:"it"},episode_81_ja:{urls:{json:"~%n/all/%n-28325ead0c.json"},jsons:{levels:"~%n/all/jsons/81-252ae87c77.json"},episodeNo:81,levelsAmount:15,hard:[3,9],tricky:[0,7],language:"ja"},episode_81_nl:{urls:{json:"~%n/all/%n-4d3db25fb3.json"},jsons:{levels:"~%n/all/jsons/81-7065fe5e44.json"},episodeNo:81,
levelsAmount:15,hard:[0,7],tricky:[5,14],language:"nl"},episode_81_ru:{urls:{json:"~%n/all/%n-a5c4fd0719.json"},jsons:{levels:"~%n/all/jsons/81-03e24cafa4.json"},episodeNo:81,levelsAmount:15,hard:[6,7],tricky:[1,11],language:"ru"},episode_82:{urls:{json:"~%n/all/%n-afdad6bb6e.json"},jsons:{levels:"~%n/all/jsons/82-9d85dff002.json"},episodeNo:82,levelsAmount:15,hard:[1,3],tricky:[9,14],language:"en"},episode_82_de:{urls:{json:"~%n/all/%n-f704a1c70a.json"},jsons:{levels:"~%n/all/jsons/82-463264c9d8.json"},episodeNo:82,levelsAmount:15,hard:[3,9],tricky:[0,11],language:"de"},episode_82_es:{urls:{json:"~%n/all/%n-1fd5565911.json"},jsons:{levels:"~%n/all/jsons/82-c9503fdafe.json"},episodeNo:82,levelsAmount:15,hard:[4,14],tricky:[6,12],language:"es"},episode_82_fr:{urls:{json:"~%n/all/%n-af57072b6c.json"},jsons:{levels:"~%n/all/jsons/82-ca015486e8.json"},episodeNo:82,levelsAmount:15,hard:[8,11],tricky:[3,14],language:"fr"},episode_82_it:{urls:{json:"~%n/all/%n-802a05587c.json"},jsons:{
levels:"~%n/all/jsons/82-70e34b0cc1.json"},episodeNo:82,levelsAmount:15,hard:[0,11],tricky:[4,9],language:"it"},episode_82_ja:{urls:{json:"~%n/all/%n-263fe137a2.json"},jsons:{levels:"~%n/all/jsons/82-3bc07e368b.json"},episodeNo:82,levelsAmount:15,hard:[0,1],tricky:[5,12],language:"ja"},episode_82_nl:{urls:{json:"~%n/all/%n-ab3d4db5cc.json"},jsons:{levels:"~%n/all/jsons/82-85a75460e4.json"},episodeNo:82,levelsAmount:15,hard:[4,8],tricky:[0,12],language:"nl"},episode_82_ru:{urls:{json:"~%n/all/%n-dd09fc352a.json"},jsons:{levels:"~%n/all/jsons/82-750f6a1b63.json"},episodeNo:82,levelsAmount:15,hard:[0,7],tricky:[5,14],language:"ru"},episode_83:{urls:{json:"~%n/all/%n-9bd7ce5439.json"},jsons:{levels:"~%n/all/jsons/83-c4d2cc0a14.json"},episodeNo:83,levelsAmount:15,hard:[0,7],tricky:[3,12],language:"en"},episode_83_de:{urls:{json:"~%n/all/%n-0542a4a5b3.json"},jsons:{levels:"~%n/all/jsons/83-d535378a5e.json"},episodeNo:83,levelsAmount:15,hard:[7,14],tricky:[1,10],language:"de"},episode_83_es:{
urls:{json:"~%n/all/%n-0c3cfeb5d6.json"},jsons:{levels:"~%n/all/jsons/83-f120cfb15e.json"},episodeNo:83,levelsAmount:15,hard:[3,12],tricky:[0,8],language:"es"},episode_83_fr:{urls:{json:"~%n/all/%n-2ee426f9af.json"},jsons:{levels:"~%n/all/jsons/83-dfabeabe67.json"},episodeNo:83,levelsAmount:15,hard:[0,11],tricky:[2,8],language:"fr"},episode_83_it:{urls:{json:"~%n/all/%n-da71800cda.json"},jsons:{levels:"~%n/all/jsons/83-d143d1c9e9.json"},episodeNo:83,levelsAmount:15,hard:[4,13],tricky:[0,7],language:"it"},episode_83_ja:{urls:{json:"~%n/all/%n-865b87bcfe.json"},jsons:{levels:"~%n/all/jsons/83-9e996b5b69.json"},episodeNo:83,levelsAmount:15,hard:[4,10],tricky:[6,14],language:"ja"},episode_83_nl:{urls:{json:"~%n/all/%n-e45ec2433c.json"},jsons:{levels:"~%n/all/jsons/83-2ae54f7669.json"},episodeNo:83,levelsAmount:15,hard:[3,14],tricky:[5,10],language:"nl"},episode_83_ru:{urls:{json:"~%n/all/%n-27f47ba962.json"},jsons:{levels:"~%n/all/jsons/83-bd69f1029b.json"},episodeNo:83,levelsAmount:15,
hard:[9,13],tricky:[0,6],language:"ru"},episode_84:{urls:{json:"~%n/all/%n-9299b4ccea.json"},jsons:{levels:"~%n/all/jsons/84-53b3308eff.json"},episodeNo:84,levelsAmount:15,hard:[2,13],tricky:[5,11],language:"en"},episode_84_de:{urls:{json:"~%n/all/%n-a36c46b38f.json"},jsons:{levels:"~%n/all/jsons/84-d1cb884e69.json"},episodeNo:84,levelsAmount:15,hard:[11],tricky:[5,14],language:"de"},episode_84_es:{urls:{json:"~%n/all/%n-bd0f5081fe.json"},jsons:{levels:"~%n/all/jsons/84-696d069826.json"},episodeNo:84,levelsAmount:15,hard:[1,9],tricky:[6,14],language:"es"},episode_84_fr:{urls:{json:"~%n/all/%n-f500dd8636.json"},jsons:{levels:"~%n/all/jsons/84-3dc2defa38.json"},episodeNo:84,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"fr"},episode_84_it:{urls:{json:"~%n/all/%n-ed082e8e6d.json"},jsons:{levels:"~%n/all/jsons/84-1457bd0e7a.json"},episodeNo:84,levelsAmount:15,hard:[2,10],tricky:[4,13],language:"it"},episode_84_ja:{urls:{json:"~%n/all/%n-914dcb1d55.json"},jsons:{
levels:"~%n/all/jsons/84-37b48c560e.json"},episodeNo:84,levelsAmount:15,hard:[1,10],tricky:[3,8],language:"ja"},episode_84_nl:{urls:{json:"~%n/all/%n-2678f56fd0.json"},jsons:{levels:"~%n/all/jsons/84-79741ee410.json"},episodeNo:84,levelsAmount:15,hard:[1,11],tricky:[3,7],language:"nl"},episode_84_ru:{urls:{json:"~%n/all/%n-099fde3097.json"},jsons:{levels:"~%n/all/jsons/84-baa16a2217.json"},episodeNo:84,levelsAmount:15,hard:[3,6],tricky:[1,13],language:"ru"},episode_85:{urls:{json:"~%n/all/%n-1ae513ec9a.json"},jsons:{levels:"~%n/all/jsons/85-3f127731c3.json"},episodeNo:85,levelsAmount:15,hard:[0,7],tricky:[2,11],language:"en"},episode_85_de:{urls:{json:"~%n/all/%n-0cc949dc34.json"},jsons:{levels:"~%n/all/jsons/85-3c37372e07.json"},episodeNo:85,levelsAmount:15,hard:[0,4],tricky:[6,12],language:"de"},episode_85_es:{urls:{json:"~%n/all/%n-4a0f4f6766.json"},jsons:{levels:"~%n/all/jsons/85-2858fbdc09.json"},episodeNo:85,levelsAmount:15,hard:[2,8],tricky:[0,11],language:"es"},episode_85_fr:{
urls:{json:"~%n/all/%n-fa44f04fdf.json"},jsons:{levels:"~%n/all/jsons/85-6eead11291.json"},episodeNo:85,levelsAmount:15,hard:[1,13],tricky:[7,11],language:"fr"},episode_85_it:{urls:{json:"~%n/all/%n-90fa02dcdb.json"},jsons:{levels:"~%n/all/jsons/85-62f4817fbf.json"},episodeNo:85,levelsAmount:15,hard:[1,2],tricky:[7,13],language:"it"},episode_85_ja:{urls:{json:"~%n/all/%n-6801a394e9.json"},jsons:{levels:"~%n/all/jsons/85-fbab9840f0.json"},episodeNo:85,levelsAmount:15,hard:[1,8],tricky:[6,14],language:"ja"},episode_85_nl:{urls:{json:"~%n/all/%n-c8d4d25470.json"},jsons:{levels:"~%n/all/jsons/85-e237def8a9.json"},episodeNo:85,levelsAmount:15,hard:[0,2],tricky:[6,12],language:"nl"},episode_85_ru:{urls:{json:"~%n/all/%n-635c721621.json"},jsons:{levels:"~%n/all/jsons/85-de12992842.json"},episodeNo:85,levelsAmount:15,hard:[6,14],tricky:[0,8],language:"ru"},episode_86:{urls:{json:"~%n/all/%n-6efc91656e.json"},jsons:{levels:"~%n/all/jsons/86-6acc289e75.json"},episodeNo:86,levelsAmount:15,hard:[6
,13],tricky:[2,10],language:"en"},episode_86_de:{urls:{json:"~%n/all/%n-9ce1413e8c.json"},jsons:{levels:"~%n/all/jsons/86-0f7fb8a3cf.json"},episodeNo:86,levelsAmount:15,hard:[0,4],tricky:[7,13],language:"de"},episode_86_es:{urls:{json:"~%n/all/%n-e5c96d05c2.json"},jsons:{levels:"~%n/all/jsons/86-7c39358dde.json"},episodeNo:86,levelsAmount:15,hard:[1,9],tricky:[4,12],language:"es"},episode_86_fr:{urls:{json:"~%n/all/%n-0e77b2425b.json"},jsons:{levels:"~%n/all/jsons/86-edf4def57e.json"},episodeNo:86,levelsAmount:15,hard:[11,13],tricky:[1,7],language:"fr"},episode_86_it:{urls:{json:"~%n/all/%n-fcb7054a8d.json"},jsons:{levels:"~%n/all/jsons/86-8a63cb2cfa.json"},episodeNo:86,levelsAmount:15,hard:[1,5],tricky:[3,11],language:"it"},episode_86_ja:{urls:{json:"~%n/all/%n-30c2c25209.json"},jsons:{levels:"~%n/all/jsons/86-9f5bc62ed6.json"},episodeNo:86,levelsAmount:15,hard:[1],tricky:[3,10],language:"ja"},episode_86_nl:{urls:{json:"~%n/all/%n-1e70d19701.json"},jsons:{
levels:"~%n/all/jsons/86-0dd334751b.json"},episodeNo:86,levelsAmount:15,hard:[5,11],tricky:[3,14],language:"nl"},episode_86_ru:{urls:{json:"~%n/all/%n-5d54ace57b.json"},jsons:{levels:"~%n/all/jsons/86-6f8c8ef333.json"},episodeNo:86,levelsAmount:15,hard:[4,6],tricky:[2,13],language:"ru"},episode_87:{urls:{json:"~%n/all/%n-65dced74f2.json"},jsons:{levels:"~%n/all/jsons/87-9940567a10.json"},episodeNo:87,levelsAmount:15,hard:[0,11],tricky:[2,8],language:"en"},episode_87_de:{urls:{json:"~%n/all/%n-373f0f6545.json"},jsons:{levels:"~%n/all/jsons/87-822e97dc62.json"},episodeNo:87,levelsAmount:15,hard:[4,6],tricky:[0,10],language:"de"},episode_87_es:{urls:{json:"~%n/all/%n-fc0202f019.json"},jsons:{levels:"~%n/all/jsons/87-04ce2ff85c.json"},episodeNo:87,levelsAmount:15,hard:[9],tricky:[5,14],language:"es"},episode_87_fr:{urls:{json:"~%n/all/%n-5b12d65769.json"},jsons:{levels:"~%n/all/jsons/87-e6dbc45064.json"},episodeNo:87,levelsAmount:15,hard:[2,12],tricky:[5,14],language:"fr"},episode_87_it:{
urls:{json:"~%n/all/%n-3cb4c1470b.json"},jsons:{levels:"~%n/all/jsons/87-7bd3743b8f.json"},episodeNo:87,levelsAmount:15,hard:[1,12],tricky:[5,14],language:"it"},episode_87_ja:{urls:{json:"~%n/all/%n-42d47230f4.json"},jsons:{levels:"~%n/all/jsons/87-1af44181ee.json"},episodeNo:87,levelsAmount:15,hard:[4,8],tricky:[1,12],language:"ja"},episode_87_nl:{urls:{json:"~%n/all/%n-d92cd1d50d.json"},jsons:{levels:"~%n/all/jsons/87-cfae824da2.json"},episodeNo:87,levelsAmount:15,hard:[3,9],tricky:[0,11],language:"nl"},episode_87_ru:{urls:{json:"~%n/all/%n-ae20ab902c.json"},jsons:{levels:"~%n/all/jsons/87-1439ab889c.json"},episodeNo:87,levelsAmount:15,hard:[4,11],tricky:[6,14],language:"ru"},episode_88:{urls:{json:"~%n/all/%n-7eb1a04e4c.json"},jsons:{levels:"~%n/all/jsons/88-395f0de1a0.json"},episodeNo:88,levelsAmount:15,hard:[3,7],tricky:[1,12],language:"en"},episode_88_de:{urls:{json:"~%n/all/%n-e9e33ebe90.json"},jsons:{levels:"~%n/all/jsons/88-fc96650989.json"},episodeNo:88,levelsAmount:15,hard:[
1],tricky:[6,13],language:"de"},episode_88_es:{urls:{json:"~%n/all/%n-aa499856aa.json"},jsons:{levels:"~%n/all/jsons/88-dfbd2ece06.json"},episodeNo:88,levelsAmount:15,hard:[7,11],tricky:[1,13],language:"es"},episode_88_fr:{urls:{json:"~%n/all/%n-efd292e4ee.json"},jsons:{levels:"~%n/all/jsons/88-90bd83e3d9.json"},episodeNo:88,levelsAmount:15,hard:[0,13],tricky:[2,7],language:"fr"},episode_88_it:{urls:{json:"~%n/all/%n-55f8d4c472.json"},jsons:{levels:"~%n/all/jsons/88-6fc2c30fb2.json"},episodeNo:88,levelsAmount:15,hard:[4,9],tricky:[0,11],language:"it"},episode_88_ja:{urls:{json:"~%n/all/%n-3885b6c9f1.json"},jsons:{levels:"~%n/all/jsons/88-dc43bacee1.json"},episodeNo:88,levelsAmount:15,hard:[1,12],tricky:[7,14],language:"ja"},episode_88_nl:{urls:{json:"~%n/all/%n-9cf7014263.json"},jsons:{levels:"~%n/all/jsons/88-454e792bc3.json"},episodeNo:88,levelsAmount:15,hard:[6,14],tricky:[3,11],language:"nl"},episode_88_ru:{urls:{json:"~%n/all/%n-0941dc30a8.json"},jsons:{
levels:"~%n/all/jsons/88-e1fede750b.json"},episodeNo:88,levelsAmount:15,hard:[8,10],tricky:[1,6],language:"ru"},episode_89:{urls:{json:"~%n/all/%n-d139bc844f.json"},jsons:{levels:"~%n/all/jsons/89-d17370dd52.json"},episodeNo:89,levelsAmount:15,hard:[7],tricky:[5,14],language:"en"},episode_89_de:{urls:{json:"~%n/all/%n-789ebffc06.json"},jsons:{levels:"~%n/all/jsons/89-a444f1965c.json"},episodeNo:89,levelsAmount:15,hard:[6],tricky:[0,10],language:"de"},episode_89_es:{urls:{json:"~%n/all/%n-41fb544744.json"},jsons:{levels:"~%n/all/jsons/89-49c14952d6.json"},episodeNo:89,levelsAmount:15,hard:[9,13],tricky:[2,7],language:"es"},episode_89_fr:{urls:{json:"~%n/all/%n-73ae81510b.json"},jsons:{levels:"~%n/all/jsons/89-8a2b3a8197.json"},episodeNo:89,levelsAmount:15,hard:[3,10],tricky:[5,13],language:"fr"},episode_89_it:{urls:{json:"~%n/all/%n-0a452bdb2d.json"},jsons:{levels:"~%n/all/jsons/89-bb03f30f4d.json"},episodeNo:89,levelsAmount:15,hard:[10,11],tricky:[2,8],language:"it"},episode_89_ja:{
urls:{json:"~%n/all/%n-725437c050.json"},jsons:{levels:"~%n/all/jsons/89-9a8e5c7329.json"},episodeNo:89,levelsAmount:15,hard:[2,12],tricky:[4,10],language:"ja"},episode_89_nl:{urls:{json:"~%n/all/%n-326021cc9e.json"},jsons:{levels:"~%n/all/jsons/89-f8185cdd97.json"},episodeNo:89,levelsAmount:15,hard:[2,5],tricky:[0,11],language:"nl"},episode_89_ru:{urls:{json:"~%n/all/%n-f340234e8c.json"},jsons:{levels:"~%n/all/jsons/89-514a5a04e7.json"},episodeNo:89,levelsAmount:15,hard:[2,12],tricky:[6,14],language:"ru"},episode_8_de:{urls:{json:"~%n/all/%n-dbb758b040.json"},jsons:{levels:"~%n/all/jsons/8-1b976c40cc.json"},episodeNo:8,levelsAmount:15,hard:[9,14],tricky:[1,6],language:"de"},episode_8_es:{urls:{json:"~%n/all/%n-5634ee29f0.json"},jsons:{levels:"~%n/all/jsons/8-e2a3fca5e4.json"},episodeNo:8,levelsAmount:15,hard:[5,10],tricky:[0,7],language:"es"},episode_8_fr:{urls:{json:"~%n/all/%n-8fcdf2079a.json"},jsons:{levels:"~%n/all/jsons/8-c2a24f4308.json"},episodeNo:8,levelsAmount:15,hard:[9,10],
tricky:[4,14],language:"fr"},episode_8_it:{urls:{json:"~%n/all/%n-f096516590.json"},jsons:{levels:"~%n/all/jsons/8-a66af9f08b.json"},episodeNo:8,levelsAmount:15,hard:[4,11],tricky:[6,14],language:"it"},episode_8_ja:{urls:{json:"~%n/all/%n-f832e762c3.json"},jsons:{levels:"~%n/all/jsons/8-5fb7ec2ac5.json"},episodeNo:8,levelsAmount:15,hard:[8],tricky:[3,12],language:"ja"},episode_8_ko:{urls:{json:"~%n/all/%n-efe4faec90.json"},jsons:{levels:"~%n/all/jsons/8-7a652476ba.json"},episodeNo:8,levelsAmount:15,hard:[7,12],tricky:[2,10],language:"ko"},episode_8_nl:{urls:{json:"~%n/all/%n-a93ab51be9.json"},jsons:{levels:"~%n/all/jsons/8-b390c532f8.json"},episodeNo:8,levelsAmount:15,hard:[7,9],tricky:[1,11],language:"nl"},episode_8_pt:{urls:{json:"~%n/all/%n-eb6e70a364.json"},jsons:{levels:"~%n/all/jsons/8-39ba79195a.json"},episodeNo:8,levelsAmount:15,hard:[7,12],tricky:[0,5],language:"pt"},episode_8_ru:{urls:{json:"~%n/all/%n-1f1fa099e9.json"},jsons:{levels:"~%n/all/jsons/8-39b62d79a0.json"},
episodeNo:8,levelsAmount:15,hard:[3],tricky:[8,14],language:"ru"},episode_9:{urls:{json:"~%n/all/%n-6eea2e002f.json"},jsons:{levels:"~%n/all/jsons/9-779a874156.json"},episodeNo:9,levelsAmount:15,hard:[1,7],tricky:[4,13],language:"en"},episode_90:{urls:{json:"~%n/all/%n-cd2bf81dbd.json"},jsons:{levels:"~%n/all/jsons/90-13e136ae12.json"},episodeNo:90,levelsAmount:15,hard:[2,10],tricky:[4,12],language:"en"},episode_90_de:{urls:{json:"~%n/all/%n-98ab432bc7.json"},jsons:{levels:"~%n/all/jsons/90-2e3d019796.json"},episodeNo:90,levelsAmount:15,hard:[2,11],tricky:[4,9],language:"de"},episode_90_es:{urls:{json:"~%n/all/%n-8f26830b51.json"},jsons:{levels:"~%n/all/jsons/90-2d277477ea.json"},episodeNo:90,levelsAmount:15,hard:[1,7],tricky:[3,11],language:"es"},episode_90_fr:{urls:{json:"~%n/all/%n-401d11e1c6.json"},jsons:{levels:"~%n/all/jsons/90-bc3707ca60.json"},episodeNo:90,levelsAmount:15,hard:[0,9],tricky:[2,11],language:"fr"},episode_90_it:{urls:{json:"~%n/all/%n-1cd5f05725.json"},jsons:{
levels:"~%n/all/jsons/90-d518c91207.json"},episodeNo:90,levelsAmount:15,hard:[4,12],tricky:[7,14],language:"it"},episode_90_ja:{urls:{json:"~%n/all/%n-035dbbb427.json"},jsons:{levels:"~%n/all/jsons/90-06852941c2.json"},episodeNo:90,levelsAmount:15,hard:[3,11],tricky:[5,13],language:"ja"},episode_90_nl:{urls:{json:"~%n/all/%n-754c72b7cc.json"},jsons:{levels:"~%n/all/jsons/90-966caa02c9.json"},episodeNo:90,levelsAmount:15,hard:[1,9],tricky:[4,12],language:"nl"},episode_90_ru:{urls:{json:"~%n/all/%n-5b77b1dd0b.json"},jsons:{levels:"~%n/all/jsons/90-edb2bc5679.json"},episodeNo:90,levelsAmount:15,hard:[1,10],tricky:[3,8],language:"ru"},episode_91:{urls:{json:"~%n/all/%n-6632599b54.json"},jsons:{levels:"~%n/all/jsons/91-8eb03a52f0.json"},episodeNo:91,levelsAmount:15,hard:[4,5],tricky:[2,13],language:"en"},episode_91_de:{urls:{json:"~%n/all/%n-b97badc099.json"},jsons:{levels:"~%n/all/jsons/91-3d32703910.json"},episodeNo:91,levelsAmount:15,hard:[9,14],tricky:[4,12],language:"de"},
episode_91_es:{urls:{json:"~%n/all/%n-969f7ba6bb.json"},jsons:{levels:"~%n/all/jsons/91-48a64c6587.json"},episodeNo:91,levelsAmount:15,hard:[1,5],tricky:[8,13],language:"es"},episode_91_fr:{urls:{json:"~%n/all/%n-dcd5aa9e40.json"},jsons:{levels:"~%n/all/jsons/91-62863d769c.json"},episodeNo:91,levelsAmount:15,hard:[2,4],tricky:[6,12],language:"fr"},episode_91_it:{urls:{json:"~%n/all/%n-cef5384f70.json"},jsons:{levels:"~%n/all/jsons/91-0d122a1579.json"},episodeNo:91,levelsAmount:15,hard:[0,12],tricky:[3,9],language:"it"},episode_91_ja:{urls:{json:"~%n/all/%n-4a513cdd1e.json"},jsons:{levels:"~%n/all/jsons/91-b6e205a8f8.json"},episodeNo:91,levelsAmount:15,hard:[5,13],tricky:[0,8],language:"ja"},episode_91_nl:{urls:{json:"~%n/all/%n-921da76da6.json"},jsons:{levels:"~%n/all/jsons/91-bbcefd0ed6.json"},episodeNo:91,levelsAmount:15,hard:[1,11],tricky:[7,14],language:"nl"},episode_91_ru:{urls:{json:"~%n/all/%n-0db2787b6b.json"},jsons:{levels:"~%n/all/jsons/91-502d16ff7c.json"},episodeNo:91,
levelsAmount:15,hard:[6,7],tricky:[2,12],language:"ru"},episode_92:{urls:{json:"~%n/all/%n-1779940e92.json"},jsons:{levels:"~%n/all/jsons/92-8a44998d39.json"},episodeNo:92,levelsAmount:15,hard:[2],tricky:[0,9],language:"en"},episode_92_de:{urls:{json:"~%n/all/%n-b846f61484.json"},jsons:{levels:"~%n/all/jsons/92-353495f94a.json"},episodeNo:92,levelsAmount:15,hard:[1,9],tricky:[4,12],language:"de"},episode_92_es:{urls:{json:"~%n/all/%n-b4cb554aa2.json"},jsons:{levels:"~%n/all/jsons/92-75b6f4a060.json"},episodeNo:92,levelsAmount:15,hard:[0,8],tricky:[6,14],language:"es"},episode_92_fr:{urls:{json:"~%n/all/%n-2f22931c7f.json"},jsons:{levels:"~%n/all/jsons/92-5270b99822.json"},episodeNo:92,levelsAmount:15,hard:[2,14],tricky:[7,12],language:"fr"},episode_92_it:{urls:{json:"~%n/all/%n-19b2fdbb0a.json"},jsons:{levels:"~%n/all/jsons/92-d22775bafd.json"},episodeNo:92,levelsAmount:15,hard:[5,13],tricky:[2,10],language:"it"},episode_92_ja:{urls:{json:"~%n/all/%n-58188cfda3.json"},jsons:{
levels:"~%n/all/jsons/92-2ebe7faf37.json"},episodeNo:92,levelsAmount:15,hard:[1,8],tricky:[5,13],language:"ja"},episode_92_nl:{urls:{json:"~%n/all/%n-0681f335ef.json"},jsons:{levels:"~%n/all/jsons/92-06ceabbac4.json"},episodeNo:92,levelsAmount:15,hard:[0,10],tricky:[3,12],language:"nl"},episode_92_ru:{urls:{json:"~%n/all/%n-feae9ffa20.json"},jsons:{levels:"~%n/all/jsons/92-b5bb31cfd7.json"},episodeNo:92,levelsAmount:15,hard:[1,3],tricky:[9,14],language:"ru"},episode_93:{urls:{json:"~%n/all/%n-e679ec617f.json"},jsons:{levels:"~%n/all/jsons/93-771e714c05.json"},episodeNo:93,levelsAmount:15,hard:[6,10],tricky:[2,13],language:"en"},episode_93_de:{urls:{json:"~%n/all/%n-b4f7fb3565.json"},jsons:{levels:"~%n/all/jsons/93-8e61bba9b2.json"},episodeNo:93,levelsAmount:15,hard:[5,10],tricky:[2,13],language:"de"},episode_93_es:{urls:{json:"~%n/all/%n-c18d003857.json"},jsons:{levels:"~%n/all/jsons/93-ec1ebbd7a7.json"},episodeNo:93,levelsAmount:15,hard:[6,9],tricky:[1,12],language:"es"},
episode_93_fr:{urls:{json:"~%n/all/%n-079666c1f4.json"},jsons:{levels:"~%n/all/jsons/93-ad01510aaa.json"},episodeNo:93,levelsAmount:15,hard:[0,4],tricky:[6,12],language:"fr"},episode_93_it:{urls:{json:"~%n/all/%n-3518df9e99.json"},jsons:{levels:"~%n/all/jsons/93-a9447302e2.json"},episodeNo:93,levelsAmount:15,hard:[1,5],tricky:[3,11],language:"it"},episode_93_ja:{urls:{json:"~%n/all/%n-f8abf4f0d8.json"},jsons:{levels:"~%n/all/jsons/93-cabe513ca2.json"},episodeNo:93,levelsAmount:15,hard:[0,1],tricky:[3,10],language:"ja"},episode_93_nl:{urls:{json:"~%n/all/%n-0b9753cf7e.json"},jsons:{levels:"~%n/all/jsons/93-351e91d215.json"},episodeNo:93,levelsAmount:15,hard:[1,13],tricky:[5,10],language:"nl"},episode_93_ru:{urls:{json:"~%n/all/%n-126fbe7dcd.json"},jsons:{levels:"~%n/all/jsons/93-63689fed3b.json"},episodeNo:93,levelsAmount:15,hard:[5,6],tricky:[1,12],language:"ru"},episode_94:{urls:{json:"~%n/all/%n-bfdfaae378.json"},jsons:{levels:"~%n/all/jsons/94-18434b0d1a.json"},episodeNo:94,
levelsAmount:15,hard:[2,8],tricky:[6,14],language:"en"},episode_94_de:{urls:{json:"~%n/all/%n-2514ad9055.json"},jsons:{levels:"~%n/all/jsons/94-ca87c2173b.json"},episodeNo:94,levelsAmount:15,hard:[3,9],tricky:[0,7],language:"de"},episode_94_es:{urls:{json:"~%n/all/%n-82a5fcd061.json"},jsons:{levels:"~%n/all/jsons/94-882f1dba3e.json"},episodeNo:94,levelsAmount:15,hard:[2,5],tricky:[9,14],language:"es"},episode_94_fr:{urls:{json:"~%n/all/%n-a972069daa.json"},jsons:{levels:"~%n/all/jsons/94-df7d5ebc88.json"},episodeNo:94,levelsAmount:15,hard:[11,13],tricky:[2,8],language:"fr"},episode_94_it:{urls:{json:"~%n/all/%n-1116c3f224.json"},jsons:{levels:"~%n/all/jsons/94-62b81dac2f.json"},episodeNo:94,levelsAmount:15,hard:[0,13],tricky:[4,10],language:"it"},episode_94_ja:{urls:{json:"~%n/all/%n-40b3d87365.json"},jsons:{levels:"~%n/all/jsons/94-831fc22f94.json"},episodeNo:94,levelsAmount:15,hard:[0,12],tricky:[3,9],language:"ja"},episode_94_nl:{urls:{json:"~%n/all/%n-4f7eeb2043.json"},jsons:{
levels:"~%n/all/jsons/94-00e9ed490d.json"},episodeNo:94,levelsAmount:15,hard:[3,14],tricky:[0,8],language:"nl"},episode_94_ru:{urls:{json:"~%n/all/%n-85ee34de23.json"},jsons:{levels:"~%n/all/jsons/94-8122f58fcf.json"},episodeNo:94,levelsAmount:15,hard:[2,6],tricky:[8,13],language:"ru"},episode_95:{urls:{json:"~%n/all/%n-2442cf0f20.json"},jsons:{levels:"~%n/all/jsons/95-0a6f01327e.json"},episodeNo:95,levelsAmount:15,hard:[7,11],tricky:[1,9],language:"en"},episode_95_de:{urls:{json:"~%n/all/%n-be09c21600.json"},jsons:{levels:"~%n/all/jsons/95-8c7d406f94.json"},episodeNo:95,levelsAmount:15,hard:[12],tricky:[3,9],language:"de"},episode_95_es:{urls:{json:"~%n/all/%n-e5cef2ac6e.json"},jsons:{levels:"~%n/all/jsons/95-1c2db2756d.json"},episodeNo:95,levelsAmount:15,hard:[3,10],tricky:[1,12],language:"es"},episode_95_fr:{urls:{json:"~%n/all/%n-190c6bfa70.json"},jsons:{levels:"~%n/all/jsons/95-7dbb8f5178.json"},episodeNo:95,levelsAmount:15,hard:[0,13],tricky:[2,7],language:"fr"},episode_95_it:{
urls:{json:"~%n/all/%n-b8749a0509.json"},jsons:{levels:"~%n/all/jsons/95-62d8ae9e73.json"},episodeNo:95,levelsAmount:15,hard:[1,5],tricky:[9,14],language:"it"},episode_95_ja:{urls:{json:"~%n/all/%n-77613831e5.json"},jsons:{levels:"~%n/all/jsons/95-464263fd69.json"},episodeNo:95,levelsAmount:15,hard:[3,12],tricky:[6,14],language:"ja"},episode_95_nl:{urls:{json:"~%n/all/%n-18e472a197.json"},jsons:{levels:"~%n/all/jsons/95-85ed1b1644.json"},episodeNo:95,levelsAmount:15,hard:[0,12],tricky:[4,10],language:"nl"},episode_95_ru:{urls:{json:"~%n/all/%n-8d8229ca46.json"},jsons:{levels:"~%n/all/jsons/95-a728eee62f.json"},episodeNo:95,levelsAmount:15,hard:[1,13],tricky:[3,8],language:"ru"},episode_96:{urls:{json:"~%n/all/%n-fedfa94533.json"},jsons:{levels:"~%n/all/jsons/96-8713b6ce16.json"},episodeNo:96,levelsAmount:15,hard:[5,12],tricky:[3,14],language:"en"},episode_96_de:{urls:{json:"~%n/all/%n-fea8396a56.json"},jsons:{levels:"~%n/all/jsons/96-08bd5882d0.json"},episodeNo:96,levelsAmount:15,
hard:[1,9],tricky:[6,14],language:"de"},episode_96_es:{urls:{json:"~%n/all/%n-168637fa97.json"},jsons:{levels:"~%n/all/jsons/96-543da2bd2f.json"},episodeNo:96,levelsAmount:15,hard:[1,14],tricky:[5,11],language:"es"},episode_96_fr:{urls:{json:"~%n/all/%n-2dfc19132c.json"},jsons:{levels:"~%n/all/jsons/96-51da380344.json"},episodeNo:96,levelsAmount:15,hard:[0,4],tricky:[7,13],language:"fr"},episode_96_it:{urls:{json:"~%n/all/%n-1abb4c7e56.json"},jsons:{levels:"~%n/all/jsons/96-36334f569c.json"},episodeNo:96,levelsAmount:15,hard:[3,6],tricky:[1,12],language:"it"},episode_96_ja:{urls:{json:"~%n/all/%n-848aba3c37.json"},jsons:{levels:"~%n/all/jsons/96-07cf386acd.json"},episodeNo:96,levelsAmount:15,hard:[4,5],tricky:[1,12],language:"ja"},episode_96_nl:{urls:{json:"~%n/all/%n-8a8a715ce4.json"},jsons:{levels:"~%n/all/jsons/96-483fa5ac63.json"},episodeNo:96,levelsAmount:15,hard:[7,11],tricky:[3,14],language:"nl"},episode_96_ru:{urls:{json:"~%n/all/%n-f3bc40306c.json"},jsons:{
levels:"~%n/all/jsons/96-c414d86ee6.json"},episodeNo:96,levelsAmount:15,hard:[4,7],tricky:[2,13],language:"ru"},episode_97:{urls:{json:"~%n/all/%n-56047632f6.json"},jsons:{levels:"~%n/all/jsons/97-80f3e6226c.json"},episodeNo:97,levelsAmount:15,hard:[5,13],tricky:[0,9],language:"en"},episode_97_de:{urls:{json:"~%n/all/%n-fcfb46aad6.json"},jsons:{levels:"~%n/all/jsons/97-e0e761d3ec.json"},episodeNo:97,levelsAmount:15,hard:[10],tricky:[1,8],language:"de"},episode_97_es:{urls:{json:"~%n/all/%n-3298e7b253.json"},jsons:{levels:"~%n/all/jsons/97-cec2307120.json"},episodeNo:97,levelsAmount:15,hard:[2,13],tricky:[0,7],language:"es"},episode_97_fr:{urls:{json:"~%n/all/%n-664550f869.json"},jsons:{levels:"~%n/all/jsons/97-842c049533.json"},episodeNo:97,levelsAmount:15,hard:[3,6],tricky:[9,14],language:"fr"},episode_97_it:{urls:{json:"~%n/all/%n-8dbc493acf.json"},jsons:{levels:"~%n/all/jsons/97-25b496d9e4.json"},episodeNo:97,levelsAmount:15,hard:[8,9],tricky:[4,14],language:"it"},episode_97_ja:{
urls:{json:"~%n/all/%n-0e3e74d8fc.json"},jsons:{levels:"~%n/all/jsons/97-cfb2a5b274.json"},episodeNo:97,levelsAmount:15,hard:[8,14],tricky:[2,11],language:"ja"},episode_97_nl:{urls:{json:"~%n/all/%n-5e0f69cb82.json"},jsons:{levels:"~%n/all/jsons/97-0b28319e04.json"},episodeNo:97,levelsAmount:15,hard:[0,4],tricky:[6,12],language:"nl"},episode_97_ru:{urls:{json:"~%n/all/%n-d5bb3a081a.json"},jsons:{levels:"~%n/all/jsons/97-8bb034468a.json"},episodeNo:97,levelsAmount:15,hard:[6],tricky:[0,10],language:"ru"},episode_98:{urls:{json:"~%n/all/%n-8c9ba3ae64.json"},jsons:{levels:"~%n/all/jsons/98-43a5b162b3.json"},episodeNo:98,levelsAmount:15,hard:[3,7],tricky:[1,13],language:"en"},episode_98_de:{urls:{json:"~%n/all/%n-0549501905.json"},jsons:{levels:"~%n/all/jsons/98-4e94e9d545.json"},episodeNo:98,levelsAmount:15,hard:[3,9],tricky:[6,14],language:"de"},episode_98_es:{urls:{json:"~%n/all/%n-f9876b7aea.json"},jsons:{levels:"~%n/all/jsons/98-1b0c7b4178.json"},episodeNo:98,levelsAmount:15,hard:[0,2
],tricky:[6,13],language:"es"},episode_98_fr:{urls:{json:"~%n/all/%n-9ddead2e71.json"},jsons:{levels:"~%n/all/jsons/98-31e183a5e4.json"},episodeNo:98,levelsAmount:15,hard:[2,7],tricky:[4,12],language:"fr"},episode_98_it:{urls:{json:"~%n/all/%n-18dc62885f.json"},jsons:{levels:"~%n/all/jsons/98-76244ad178.json"},episodeNo:98,levelsAmount:15,hard:[2,9],tricky:[4,12],language:"it"},episode_98_ja:{urls:{json:"~%n/all/%n-69c12a93eb.json"},jsons:{levels:"~%n/all/jsons/98-12cf141fbb.json"},episodeNo:98,levelsAmount:15,hard:[0,6],tricky:[2,10],language:"ja"},episode_98_nl:{urls:{json:"~%n/all/%n-7d7a465261.json"},jsons:{levels:"~%n/all/jsons/98-125cbbd576.json"},episodeNo:98,levelsAmount:15,hard:[7,13],tricky:[3,11],language:"nl"},episode_98_ru:{urls:{json:"~%n/all/%n-4830547642.json"},jsons:{levels:"~%n/all/jsons/98-5fc7dbd6db.json"},episodeNo:98,levelsAmount:15,hard:[6,10],tricky:[1,12],language:"ru"},episode_99:{urls:{json:"~%n/all/%n-efea0ccd10.json"},jsons:{
levels:"~%n/all/jsons/99-3b0c31a133.json"},episodeNo:99,levelsAmount:15,hard:[2,4],tricky:[0,10],language:"en"},episode_99_de:{urls:{json:"~%n/all/%n-8eb7ac7035.json"},jsons:{levels:"~%n/all/jsons/99-3ce2ed7b20.json"},episodeNo:99,levelsAmount:15,hard:[0,5],tricky:[2,11],language:"de"},episode_99_es:{urls:{json:"~%n/all/%n-123c0f67be.json"},jsons:{levels:"~%n/all/jsons/99-e3d78bda12.json"},episodeNo:99,levelsAmount:15,hard:[2,13],tricky:[6,11],language:"es"},episode_99_fr:{urls:{json:"~%n/all/%n-34437ae907.json"},jsons:{levels:"~%n/all/jsons/99-daca3aa409.json"},episodeNo:99,levelsAmount:15,hard:[6,14],tricky:[3,12],language:"fr"},episode_99_it:{urls:{json:"~%n/all/%n-4bb3e00790.json"},jsons:{levels:"~%n/all/jsons/99-193f680fa2.json"},episodeNo:99,levelsAmount:15,hard:[0,1],tricky:[6,12],language:"it"},episode_99_ja:{urls:{json:"~%n/all/%n-1928a9c288.json"},jsons:{levels:"~%n/all/jsons/99-b1c1174e7c.json"},episodeNo:99,levelsAmount:15,hard:[0,11],tricky:[4,13],language:"ja"},
episode_99_nl:{urls:{json:"~%n/all/%n-755b3a4f71.json"},jsons:{levels:"~%n/all/jsons/99-89a567bbf3.json"},episodeNo:99,levelsAmount:15,hard:[0,14],tricky:[3,10],language:"nl"},episode_99_ru:{urls:{json:"~%n/all/%n-1ae000135c.json"},jsons:{levels:"~%n/all/jsons/99-d4fd35d5f8.json"},episodeNo:99,levelsAmount:15,hard:[2,5],tricky:[9,14],language:"ru"},episode_9_de:{urls:{json:"~%n/all/%n-1d8663334e.json"},jsons:{levels:"~%n/all/jsons/9-e7f1b89491.json"},episodeNo:9,levelsAmount:15,hard:[9,14],tricky:[3,12],language:"de"},episode_9_es:{urls:{json:"~%n/all/%n-6a3bdb82ed.json"},jsons:{levels:"~%n/all/jsons/9-4d892933c4.json"},episodeNo:9,levelsAmount:15,hard:[12,13],tricky:[2,9],language:"es"},episode_9_fr:{urls:{json:"~%n/all/%n-a81cd219e9.json"},jsons:{levels:"~%n/all/jsons/9-c1f949b0b0.json"},episodeNo:9,levelsAmount:15,hard:[1,3],tricky:[6,11],language:"fr"},episode_9_it:{urls:{json:"~%n/all/%n-95cf292e01.json"},jsons:{levels:"~%n/all/jsons/9-466c728c08.json"},episodeNo:9,
levelsAmount:15,hard:[8,14],tricky:[1,10],language:"it"},episode_9_ja:{urls:{json:"~%n/all/%n-81a611b5df.json"},jsons:{levels:"~%n/all/jsons/9-5317d9241c.json"},episodeNo:9,levelsAmount:15,hard:[10,14],tricky:[0,5],language:"ja"},episode_9_ko:{urls:{json:"~%n/all/%n-326ef78a65.json"},jsons:{levels:"~%n/all/jsons/9-ef8d30320e.json"},episodeNo:9,levelsAmount:15,hard:[2,14],tricky:[6,12],language:"ko"},episode_9_nl:{urls:{json:"~%n/all/%n-97d689447d.json"},jsons:{levels:"~%n/all/jsons/9-58eb7ba522.json"},episodeNo:9,levelsAmount:15,hard:[1,4],tricky:[9,14],language:"nl"},episode_9_pt:{urls:{json:"~%n/all/%n-417458f579.json"},jsons:{levels:"~%n/all/jsons/9-c9f2495b6e.json"},episodeNo:9,levelsAmount:15,hard:[2,9],tricky:[5,13],language:"pt"},episode_9_ru:{urls:{json:"~%n/all/%n-8f2a69384c.json"},jsons:{levels:"~%n/all/jsons/9-5935d24722.json"},episodeNo:9,levelsAmount:15,hard:[7,11],tricky:[1,9],language:"ru"},episode_bonus_world_easter:{urls:{json:"~%n/all/%n-ba956e717e.json"},jsons:{
levels:"~%n/all/jsons/bonus_world_easter-dc34910fa9.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"en"},episode_bonus_world_easter_de:{urls:{json:"~%n/all/%n-8c009c2f07.json"},jsons:{levels:"~%n/all/jsons/bonus_world_easter-30a9e996fc.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"de"},episode_bonus_world_easter_es:{urls:{json:"~%n/all/%n-beda8555f1.json"},jsons:{levels:"~%n/all/jsons/bonus_world_easter-bb2ab109cd.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"es"},episode_bonus_world_easter_fr:{urls:{json:"~%n/all/%n-c70ae6ef4d.json"},jsons:{levels:"~%n/all/jsons/bonus_world_easter-d4ecfbd6bf.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"fr"},episode_bonus_world_easter_it:{urls:{json:"~%n/all/%n-0b9c0b4f36.json"},jsons:{
levels:"~%n/all/jsons/bonus_world_easter-b30ba8fa79.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"it"},episode_bonus_world_easter_ja:{urls:{json:"~%n/all/%n-7276316874.json"},jsons:{levels:"~%n/all/jsons/bonus_world_easter-1e74ecd016.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"ja"},episode_bonus_world_easter_ko:{urls:{json:"~%n/all/%n-fa797ff6e7.json"},jsons:{levels:"~%n/all/jsons/bonus_world_easter-4f062458e8.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"ko"},episode_bonus_world_easter_nl:{urls:{json:"~%n/all/%n-36589b62af.json"},jsons:{levels:"~%n/all/jsons/bonus_world_easter-f91607edee.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"nl"},episode_bonus_world_easter_pt:{urls:{json:"~%n/all/%n-3c716102be.json"},jsons:{
levels:"~%n/all/jsons/bonus_world_easter-7deec1b956.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"pt"},episode_bonus_world_easter_ru:{urls:{json:"~%n/all/%n-390fa6c945.json"},jsons:{levels:"~%n/all/jsons/bonus_world_easter-9a89ad58df.json"},episodeNo:"bonus_world_easter",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"ru"},episode_bonus_world_summer:{urls:{json:"~%n/all/%n-8843170543.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-fbb982b11c.json"},episodeNo:"bonus_world_summer",levelsAmount:19,hard:[],tricky:[2,4,7,8,10,11,13,14,15,17,18],language:"en"},episode_bonus_world_summer_de:{urls:{json:"~%n/all/%n-87e1710434.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-a9d508ed1b.json"},episodeNo:"bonus_world_summer",levelsAmount:19,hard:[],tricky:[2,4,7,8,10,11,13,14,15,17,18],language:"de"},episode_bonus_world_summer_es:{urls:{json:"~%n/all/%n-9ee231ff89.json"},jsons:{
levels:"~%n/all/jsons/bonus_world_summer-7ab7d2ab53.json"},episodeNo:"bonus_world_summer",levelsAmount:19,hard:[],tricky:[2,4,7,8,10,11,13,14,15,17,18],language:"es"},episode_bonus_world_summer_fr:{urls:{json:"~%n/all/%n-fee4774c6f.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-66d2a4e9aa.json"},episodeNo:"bonus_world_summer",levelsAmount:19,hard:[],tricky:[2,4,7,8,10,11,13,14,15,17,18],language:"fr"},episode_bonus_world_summer_it:{urls:{json:"~%n/all/%n-27dd67f0e2.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-26af66e57d.json"},episodeNo:"bonus_world_summer",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"it"},episode_bonus_world_summer_ja:{urls:{json:"~%n/all/%n-c1ae089d85.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-c7d62e160c.json"},episodeNo:"bonus_world_summer",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"ja"},episode_bonus_world_summer_ko:{urls:{json:"~%n/all/%n-14fef6d586.json"},jsons:{
levels:"~%n/all/jsons/bonus_world_summer-b6d7417578.json"},episodeNo:"bonus_world_summer",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"ko"},episode_bonus_world_summer_nl:{urls:{json:"~%n/all/%n-29807e4ae7.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-5e77271a60.json"},episodeNo:"bonus_world_summer",levelsAmount:19,hard:[],tricky:[2,4,7,8,10,11,13,14,15,17,18],language:"nl"},episode_bonus_world_summer_pt:{urls:{json:"~%n/all/%n-651f183d65.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-3bdc41ea69.json"},episodeNo:"bonus_world_summer",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"pt"},episode_bonus_world_summer_ru:{urls:{json:"~%n/all/%n-858b2bfbf9.json"},jsons:{levels:"~%n/all/jsons/bonus_world_summer-7988e17034.json"},episodeNo:"bonus_world_summer",levelsAmount:15,hard:[],tricky:[2,4,7,8,10,11,13,14],language:"ru"},episode_bonus_world_valentines:{urls:{json:"~%n/all/%n-2a02b64ce6.json"},jsons:{
levels:"~%n/all/jsons/bonus_world_valentines-d4f8eafb10.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"en"},episode_bonus_world_valentines_de:{urls:{json:"~%n/all/%n-4d458cb992.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-b77bd145f7.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"de"},episode_bonus_world_valentines_es:{urls:{json:"~%n/all/%n-dfc71e144f.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-2e5be2b66f.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"es"},episode_bonus_world_valentines_fr:{urls:{json:"~%n/all/%n-ecbbcfdacc.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-9539904bf9.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"fr"},episode_bonus_world_valentines_it:{urls:{json:"~%n/all/%n-f1cdcc56c3.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-7418e96763.json"},
episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"it"},episode_bonus_world_valentines_ja:{urls:{json:"~%n/all/%n-7809971831.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-eacd85e585.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"ja"},episode_bonus_world_valentines_ko:{urls:{json:"~%n/all/%n-e6d964de6c.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-5c14ce5b4e.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"ko"},episode_bonus_world_valentines_nl:{urls:{json:"~%n/all/%n-6953382fbc.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-d58cc6ec5b.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"nl"},episode_bonus_world_valentines_pt:{urls:{json:"~%n/all/%n-2b95fb8160.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-4a54328feb.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],
language:"pt"},episode_bonus_world_valentines_ru:{urls:{json:"~%n/all/%n-a49317cbb8.json"},jsons:{levels:"~%n/all/jsons/bonus_world_valentines-2d5df10371.json"},episodeNo:"bonus_world_valentines",levelsAmount:15,hard:[],tricky:[],language:"ru"},episode_bonusrounds:{urls:{json:"~%n/all/%n-48b579af44.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-6e41c140ec.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"en"},episode_bonusrounds_de:{urls:{json:"~%n/all/%n-e09239a115.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-038cc38abe.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"de"},episode_bonusrounds_es:{urls:{json:"~%n/all/%n-5aa717613d.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-b096df8a4e.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"es"},episode_bonusrounds_fr:{urls:{json:"~%n/all/%n-ca962fbbcb.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-1e00890e81.json"},episodeNo:"bonusrounds",
levelsAmount:543,hard:[],tricky:[],language:"fr"},episode_bonusrounds_it:{urls:{json:"~%n/all/%n-a22a7e5e77.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-bf32280977.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"it"},episode_bonusrounds_ja:{urls:{json:"~%n/all/%n-8f3e707ca2.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-460f2eb10a.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"ja"},episode_bonusrounds_ko:{urls:{json:"~%n/all/%n-6011c78f26.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-8e49b95cc7.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"ko"},episode_bonusrounds_nl:{urls:{json:"~%n/all/%n-3218991432.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-9b73bcc538.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"nl"},episode_bonusrounds_pt:{urls:{json:"~%n/all/%n-98c8a8fa80.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-8fd904875d.json"},episodeNo:"bonusrounds",
levelsAmount:543,hard:[],tricky:[],language:"pt"},episode_bonusrounds_ru:{urls:{json:"~%n/all/%n-0cff59489b.json"},jsons:{levels:"~%n/all/jsons/bonusrounds-244f70ad85.json"},episodeNo:"bonusrounds",levelsAmount:543,hard:[],tricky:[],language:"ru"},episode_coming_soon:{urls:{},levelPositions:"levels_1"},exclamations:{urls:{},injectTo:["game"],frameIds:[],jsonIds:["animation"],soundIds:[],unpackedIds:[]},extra_de:{urls:{json:"~%n/all/%n-fa940321cf.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-66724b1fa3.json"}},extra_en:{urls:{json:"~%n/all/%n-7dcd46397e.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-5949553489.json"}},extra_es:{urls:{json:"~%n/all/%n-9939d96bcf.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-6f7cbb3b82.json"}},extra_fr:{urls:{json:"~%n/all/%n-6dbd21e0e7.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-3a6b6c3bb6.json"}},extra_it:{urls:{json:"~%n/all/%n-563a0ffd07.json"},jsons:{
dictionary_json:"~%n/all/jsons/build_full_client-361c46c44c.json"}},extra_ja:{urls:{json:"~%n/all/%n-6b2d3f26be.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-0428c4b601.json"}},extra_ko:{urls:{json:"~%n/all/%n-87d47a2588.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-65c266e902.json"}},extra_nl:{urls:{json:"~%n/all/%n-c889f1d717.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-13aaa5ea13.json"}},extra_pt:{urls:{json:"~%n/all/%n-2437adcedf.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-56f53c4e69.json"}},extra_ru:{urls:{json:"~%n/all/%n-f9e8f5f0a8.json"},jsons:{dictionary_json:"~%n/all/jsons/build_full_client-1d46d9f3f3.json"}},extrawindow:{urls:{png:"@%n-35ea0b27c4.png",json:"@%n-6e34308aec.json"},jsons:{present_json:"@jsons/present-a5e71337a2.json",extra_json:"@jsons/extra-b56b56ac7b.json",plist:"@%n-35ea0b27c4.plist",atlas:"@%n-35ea0b27c4.atlas"},frames:{progress_bar:"#%n-game-progressbar.png",
progress_bar_bg:"#%n-game-progressbarbg.png"}},favorite_sale:{urls:{png:"@%n-5e17227ebc.png",json:"@%n-f6ce27528c.json"},jsons:{plist:"@%n-5e17227ebc.plist"},frames:{plus_png:"#%n-plus_big.png",timer_bg_png:"#%n-timer_bg.png"}},finger:{urls:{},injectTo:["game","main"],frameIds:["tutorial_click_png","tutorial_hand_png"],jsonIds:[],soundIds:[],unpackedIds:[]},finish_episode_0:{urls:{episode_finish_image:"@%n-77ddf4a31e.jpg"}},finish_episode_0_ru:{urls:{episode_finish_image:"@finish_episode_0-d309dd8795.jpg"}},finish_episode_1:{urls:{episode_finish_image:"@%n-29bdfa58f9.jpg"}},finish_episode_1_ru:{urls:{episode_finish_image:"@finish_episode_1-e9aed92794.jpg"}},finish_episode_window:{urls:{}},fireworks:{urls:{fireworks_effect:"~sounds/%n-01f0a80b87.mp3",png:"@%n-f5c09adcbc.png",json:"@%n-bb2c7ce769.json"},jsons:{fireworks_json:"@jsons/%n-ac0ffff7c1.json",atlas:"@%n-f5c09adcbc.atlas"}},flying_ad:{urls:{},injectTo:["main","game","slot_machine"],frameIds:[],jsonIds:["%n_json"],soundIds:[],
unpackedIds:[]},flying_hint:{urls:{}},game:{urls:{wrong_effect:"~sounds/wrong-a7deae31ff.mp3",tournament_element_collected:"~sounds/star-b57a612fd5.mp3",shuffle_effect:"~sounds/shuffle-b63e3e5663.mp3",background_music_game:"~sounds/music-6a23609253.mp3",background_music_hard:"~sounds/hardmusic-08020cc3f3.mp3",win_effect:"~sounds/win-dd9eef1609.mp3",hint_effect:"~sounds/hint-e54ad8faa9.mp3",nota_0:"~sounds/1_c-baab5bf623.mp3",nota_1:"~sounds/2_d-d4415b972c.mp3",nota_2:"~sounds/3_e-1ac281869e.mp3",nota_3:"~sounds/4_f-29c4cfc40c.mp3",nota_4:"~sounds/5_g-efb5d44751.mp3",nota_5:"~sounds/6_a-a5b5156861.mp3",nota_6:"~sounds/7_b-ec301601da.mp3",nota_7:"~sounds/8_c1-ebf60481fb.mp3",nota_8:"~sounds/9_d1-8917919c21.mp3",gun_bombing_effect:"~sounds/gun_cat-0a491ce34c.mp3",letter_effect:"~sounds/letter-0bd966a543.mp3",letters_effect:"~sounds/letters-d7ec09cf7d.mp3",extra_effect:"~sounds/extra-db57d9ae81.mp3",extra_word_effect:"~sounds/extra_word-4c4fcf3e18.mp3",
alreadyfound_effect:"~sounds/alreadyfound-292e6fa492.mp3",openlevel_effect:"~sounds/openlevel-b018e227d5.mp3",jar_collect_effect:"~sounds/jar-d6f0af0816.mp3",last_word_effect:"~sounds/last_word-8a4d372a67.mp3",bonusround_window_effect:"~sounds/bonusroundwindow-47269f2feb.mp3",coin_collect_effect:"~sounds/item_coins-50cbed86e1.mp3",letter_drop_effect_0:"~sounds/drop_1-e1ad12c7a7.mp3",win_effect_2:"~sounds/meow_win-3fa86d571a.mp3",open_word_effect:"~sounds/open_word-f0a33d16a0.mp3",victory_looped_effect:"~sounds/purr-99838cc4e1.mp3",board_element_show_effect:"~sounds/start_tournel-65ca59a177.mp3",highlight_booster_effect:"~sounds/booster_1-127b9e6b3b.mp3",eye_booster_start_effect:"~sounds/booster_2_start-473285e62e.mp3",eye_booster_effect:"~sounds/booster_2_act-8c165f4d17.mp3",hint_booster_before_effect:"~sounds/booster_3-5344706d5d.mp3",gun_flight_effect:"~sounds/gun_flight-75bcaa594e.mp3",gun_drop_effect:"~sounds/gun_drop-b3eb93d9dc.mp3",
background_music_tricky:"~sounds/trickymusic-d0fb56437f.mp3",win_intro_effect:"~sounds/win_intro-a427b58cc5.mp3",game_message_effect:"~sounds/window-a51fa939a6.mp3",openlevel_effect_bonus:"~sounds/openlevel_bonus-1b389b12c1.mp3",openlevel_effect_hard:"~sounds/openlevel_hard-87d1361c5d.mp3",openlevel_effect_tricky:"~sounds/openlevel_tricky-c17148c9c8.mp3",task_done_sfx:"~sounds/done_jingle-c8ff12607c.mp3",cryptex_attempt_effect:"~sounds/cryptex_off-e7162b0011.mp3",cryptex_open_effect:"~sounds/cryptex_on-77b98456eb.mp3",cryptex_fail_effect:"~sounds/cryptex_fail-0ac03362a9.mp3",png:"@%n-27a6db44dc.png",json:"@%n-b5d18c50c0.json"},jsons:{hint_button_arrow_json:"@jsons/hint_button_arrow-008e7a2d92.json",coins_reward_json:"@jsons/coins_reward-9f92bd9090.json",shovel_json:"@jsons/shovel-c6ccda4333.json",hint_json:"@jsons/hint-88a18393c5.json",coin_json:"@jsons/coin-598cdb10c4.json",remove_letter_sparkles_json:"@jsons/remove_letter_sparkles-990037c907.json",
eye_booster_json:"@jsons/eye_booster-36fd42ef7d.json",hint_booster_json:"@jsons/hint_booster-b3d68ee7ec.json",highlight_booster_json:"@jsons/highlight_booster-5fdd1505d9.json",flashlight_json:"@jsons/flashlight-43a57437e1.json",star_json:"@jsons/star-36b70c8119.json",medallion_json:"@jsons/banner-d03689c4e8.json",keypad_coin_json:"@jsons/keypad_coin-86a35366f9.json",keypad_bag_coin_json:"@jsons/bag_of_gold-cd454890e7.json",shuffle_json:"@jsons/shuffle-ea08e1f899.json",hint_icon_json:"@jsons/hint_icon-f43b34c99e.json",slot_machine_ticket_json:"@jsons/ticket-1effd49c48.json",combo_background_json:"@jsons/combo_glow_fx-3a7047dbce.json",combo_background_particles_json:"@jsons/combo_glow_fx_particles-2810d15005.json",bound_round_timer_json:"@jsons/bonus_round_timer-e5d121cbc1.json",animation:"@jsons/exclamation-35af20d755.json",game_message_json:"@jsons/%n_message-68c439dec7.json",game_message_victory_json:"@jsons/%n_message_victory-1c79db1f4a.json",hero_json:"@jsons/hero-fc7f32c05f.json",
hero_backLight_json:"@jsons/score_girl-463e0f9fab.json",cryptex_json:"@jsons/cryptex-fac8df60c6.json",extra_container_json:"@jsons/extra_container-c199d9dd8f.json",cookie_json:"@jsons/cookie_jump-55e186adf9.json",flying_ad_json:"@jsons/flying_ad-35ce77d30b.json",letter_particle_plist:"~%n/all/particle_word-664aa7fe94.plist",plist:"@%n-27a6db44dc.plist",atlas:"@%n-27a6db44dc.atlas"},frames:{hint_coins_png:"#%n-buttons-hint_coins.png",ratewindow_on:"#%n-rate-star.png",mission_star0_png:"#%n-missions-mission_star_0.png",mission_star1_png:"#%n-missions-mission_star_1.png",letter_a:"#%n-letters-a.png",letter_b:"#%n-letters-b.png",letter_c:"#%n-letters-c.png",letter_d:"#%n-letters-d.png",letter_e:"#%n-letters-e.png",letter_f:"#%n-letters-f.png",letter_g:"#%n-letters-g.png",letter_h:"#%n-letters-h.png",letter_i:"#%n-letters-i.png",letter_j:"#%n-letters-j.png",letter_k:"#%n-letters-k.png",letter_l:"#%n-letters-l.png",letter_m:"#%n-letters-m.png",letter_n:"#%n-letters-n.png",
letter_o:"#%n-letters-o.png",letter_p:"#%n-letters-p.png",letter_q:"#%n-letters-q.png",letter_r:"#%n-letters-r.png",letter_s:"#%n-letters-s.png",letter_t:"#%n-letters-t.png",letter_u:"#%n-letters-u.png",letter_v:"#%n-letters-v.png",letter_w:"#%n-letters-w.png",letter_x:"#%n-letters-x.png",letter_y:"#%n-letters-y.png",letter_z:"#%n-letters-z.png","letter_à":"#%n-fr-a_gravis.png","letter_â":"#%n-fr-a_circumflex.png","letter_æ":"#%n-fr-fr_ae.png","letter_ç":"#%n-fr-fr_c.png","letter_è":"#%n-fr-e_gravis.png","letter_é":"#%n-fr-e_acute.png","letter_ê":"#%n-fr-e_circumflex.png","letter_ë":"#%n-fr-e_umlaut.png","letter_î":"#%n-fr-i_circumflex.png","letter_ï":"#%n-fr-i_umlaut.png","letter_ô":"#%n-fr-o_circumflex.png","letter_ù":"#%n-fr-u_gravis.png","letter_û":"#%n-fr-u_circumflex.png","letter_ü":"#%n-fr-u_umlaut.png","letter_ÿ":"#%n-fr-y_umlaut.png","letter_œ":"#%n-fr-fr_oe.png","letter_а":"#%n-rus-a.png","letter_б":"#%n-rus-b.png","letter_в":"#%n-rus-v.png","letter_г":"#%n-rus-g.png",
"letter_д":"#%n-rus-d.png","letter_е":"#%n-rus-e.png","letter_ё":"#%n-rus-yo.png","letter_ж":"#%n-rus-zh.png","letter_з":"#%n-rus-z.png","letter_и":"#%n-rus-i.png","letter_й":"#%n-rus-j.png","letter_к":"#%n-rus-k.png","letter_л":"#%n-rus-l.png","letter_м":"#%n-rus-m.png","letter_н":"#%n-rus-n.png","letter_о":"#%n-rus-o.png","letter_п":"#%n-rus-p.png","letter_р":"#%n-rus-r.png","letter_с":"#%n-rus-s.png","letter_т":"#%n-rus-t.png","letter_у":"#%n-rus-u.png","letter_ф":"#%n-rus-f.png","letter_х":"#%n-rus-x.png","letter_ц":"#%n-rus-cz.png","letter_ч":"#%n-rus-ch.png","letter_ш":"#%n-rus-sh.png","letter_щ":"#%n-rus-shh.png","letter_ъ":"#%n-rus-tz.png","letter_ы":"#%n-rus-y.png","letter_ь":"#%n-rus-mz.png","letter_э":"#%n-rus-eh.png","letter_ю":"#%n-rus-yu.png","letter_я":"#%n-rus-ya.png","letter_ß":"#%n-de-ss.png","letter_ä":"#%n-de-a_umlaut.png","letter_ö":"#%n-de-o_umlaut.png","letter_ñ":"#%n-es-n_tilde.png","letter_í":"#%n-es-i_acute.png","letter_á":"#%n-es-a_acute.png",
"letter_ó":"#%n-es-o_acute.png","letter_ú":"#%n-es-u_acute.png","letter_ì":"#%n-it-i_gravis.png","letter_ò":"#%n-it-o_gravis.png",shuffle_png:"#%n-buttons-shuffle.png",shuffle_on_png:"#%n-buttons-shuffle_on.png",placeholder_png:"#%n-basic-cell.png",word_extra_png:"#%n-word_extra.png",word_right_png:"#%n-word_right.png",word_wrong_png:"#%n-word_wrong.png",hint_icon_png:"#%n-reward_icons-hint_icon.png",line_png:"#%n-line.png",avatar_frame_red_png:"#%n-avatar_frame_red.png",submit_icon_png:"#%n-buttons-submit_icon.png",cancel_icon_png:"#%n-buttons-cancel_icon.png",board_letter_frame_png:"#%n-letter_frame.png",board_letter_blink_png:"#%n-letter_blink.png",booster_amount_bg_png:"#%n-menubar-bar_bg.png",gun_price_bg_png:"#%n-buttons-small_green_button.png",shuffle_coins_png:"#%n-buttons-shuffle_coins.png",theme_bg_png:"#%n-themebg.png",found_word_bg_png:"#%n-found_word_bg.png",found_word_bg_hard_png:"#%n-found_word_bg_hard.png",found_word_bg_tricky_png:"#%n-found_word_bg_tricky.png",
found_word_bg_bonus_png:"#%n-found_word_bg_bonus.png",current_bg_png:"#%n-current_bg.png",current_bg_hard_png:"#%n-current_bg_hard.png",current_bg_bonus_png:"#%n-current_bg_bonus.png",current_bg_tricky_png:"#%n-current_bg_tricky.png",board_highlight_frame:"#%n-board_highlight_frame.png",placeholder_highlighted_png:"#%n-placeholder_highlighted.png",loupe_png:"#%n-loupe.png","letter_ã":"#%n-pt-a_tilde.png","letter_õ":"#%n-pt-o_tilde.png","letter_ㄱ":"#%n-ko-k.png","letter_ㄴ":"#%n-ko-n.png","letter_ㄷ":"#%n-ko-d.png","letter_ㄹ":"#%n-ko-r.png","letter_ㅁ":"#%n-ko-m.png","letter_ㅂ":"#%n-ko-b.png","letter_ㅅ":"#%n-ko-s.png","letter_ㅇ":"#%n-ko-ng.png","letter_ㅈ":"#%n-ko-dzh.png","letter_ㅊ":"#%n-ko-ch.png","letter_ㅋ":"#%n-ko-kkh.png","letter_ㅌ":"#%n-ko-tkh.png","letter_ㅍ":"#%n-ko-p.png","letter_ㅎ":"#%n-ko-kh.png","letter_ㅏ":"#%n-ko-a.png","letter_ㅑ":"#%n-ko-ya.png","letter_ㅓ":"#%n-ko-oo.png","letter_ㅕ":"#%n-ko-yo.png","letter_ㅗ":"#%n-ko-o.png","letter_ㅛ":"#%n-ko-yoo.png","letter_ㅜ":"#%n-ko-u.png",
"letter_ㅠ":"#%n-ko-yu.png","letter_ㅡ":"#%n-ko-y.png","letter_ㅣ":"#%n-ko-i.png","letter_ㅐ":"#%n-ko-eh.png","letter_ㅒ":"#%n-ko-yeh.png","letter_ㅔ":"#%n-ko-ye.png","letter_ㅖ":"#%n-ko-qt.png","letter_ㅘ":"#%n-ko-va.png","letter_ㅙ":"#%n-ko-vee.png","letter_ㅚ":"#%n-ko-ve.png","letter_ㅝ":"#%n-ko-vo.png","letter_ㅞ":"#%n-ko-vye.png","letter_ㅟ":"#%n-ko-vi.png","letter_ㅢ":"#%n-ko-yy.png","letter_ㄲ":"#%n-ko-extra1.png","letter_ㄸ":"#%n-ko-extra2.png","letter_ㅃ":"#%n-ko-extra3.png","letter_ㅆ":"#%n-ko-extra4.png","letter_ㅉ":"#%n-ko-extra5.png","letter_애":"#%n-ko-eh2.png","letter_얘":"#%n-ko-yeh2.png","letter_에":"#%n-ko-ye2.png","letter_예":"#%n-ko-qt2.png","letter_와":"#%n-ko-va2.png","letter_왜":"#%n-ko-vee2.png","letter_외":"#%n-ko-ve2.png","letter_워":"#%n-ko-vo2.png","letter_웨":"#%n-ko-vye2.png","letter_위":"#%n-ko-vi2.png","letter_의":"#%n-ko-yy2.png","letter_아":"#%n-ko-a2.png","letter_야":"#%n-ko-ya2.png","letter_어":"#%n-ko-oo2.png","letter_여":"#%n-ko-yo2.png","letter_오":"#%n-ko-o2.png",
"letter_요":"#%n-ko-yoo2.png","letter_우":"#%n-ko-u2.png","letter_유":"#%n-ko-yu2.png","letter_으":"#%n-ko-y2.png","letter_이":"#%n-ko-i2.png",tooltip_bg_png:"#%n-tooltip-box.png",tooltip_shadow_arrow_png:"#%n-tooltip-arrow.png",tooltip_arrow_png:"#%n-tooltip-arrow2.png",gold_small_png:"#%n-reward_icons-gold_small.png",reward_gold_png:"#%n-reward_icons-gold.png",hint:"#%n-reward_icons-hint.png",eye:"#%n-reward_icons-eye.png",highlight:"#%n-reward_icons-highlight.png",hint_small:"#%n-reward_icons-hint_small.png",eye_small:"#%n-reward_icons-eye_small.png",highlight_small:"#%n-reward_icons-highlight_small.png",adicon_png:"#%n-shared-adicon.png",adicon_bubble_png:"#%n-shared-adicon_bubble.png",tutorial_click_png:"#%n-tutorial-circle.png",tutorial_hand_png:"#%n-tutorial-hand.png",default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",
default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",
default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",
nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",
nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png",icon:"#%n-dailytasks-daily_tasks.png",daily_task_bar_png:"#%n-mission-bar.png",daily_task_bar_bg_png:"#%n-mission-bar_bg.png",notification_bg:"#%n-mission-notification_bg.png",menu_icon_png:"#%n-controlbuttons-menu.png",button_png:"#%n-controlbuttons-menu_button.png",button_on_png:"#%n-controlbuttons-menu_button_on.png",fullscreen_icon_png:"#%n-controlbuttons-fullscreen_icon.png",back_button_png:"#%n-controlbuttons-back_button.png",back_button_on_png:"#%n-controlbuttons-back_button_on.png",back_icon_png:"#%n-controlbuttons-back.png",coin_png:"#%n-menubar-coin.png",menubar_bg_png:"#%n-menubar-bar_bg.png",plus_button_png:"#%n-menubar-plus.png",plus_button_on_png:"#%n-menubar-plus_on.png",attention_png:"#%n-menubar-attention.png",cryptex_png:"#%n-menubar-cryptex_icon.png",menubar_help_button_png:"#%n-menubar-help_small.png",menubar_help_button_on_png:"#%n-menubar-help_small_on.png",window_button_png:"#%n-buttons-button.png",
window_button_on_png:"#%n-buttons-button_on.png",window_button_disabled_png:"#%n-buttons-button_off.png",green_button_png:"#%n-buttons-green_button.png",green_button_on_png:"#%n-buttons-green_button_on.png",gamemessage_bg_png:"#%n-%n_message-level_msg_bg.png",gamemessage_bg_hard_png:"#%n-%n_message-hard_level_msg_bg.png",title_bg_png:"#%n-%n_message-title_bg.png",title_bg_hard_png:"#%n-%n_message-title_bg_hard.png",title_bg_tricky_png:"#%n-%n_message-title_bg_tricky.png",tricky_level_msg_bg:"#%n-%n_message-tricky_level_msg_bg.png",bonus_round_level_msg_bg:"#%n-%n_message-bonus_round_level_msg_bg.png",reward_element_bg_png:"#%n-reward_element-reward_element_bg.png",letter_bg_png:"#%n-letter_bg.png",letter_keypad_yellow_bg_png:"#%n-letter_keypad_yellow_bg.png",letter_keypad_green_bg_png:"#%n-letter_keypad_green_bg.png",letter_keypad_red_bg_png:"#%n-letter_keypad_red_bg.png",letter_keypad_orange_bg_png:"#%n-letter_keypad_orange_bg.png",
letter_keypad_blue_bg_png:"#%n-letter_keypad_blue_bg.png",letter_keypad_purple_bg_png:"#%n-letter_keypad_purple_bg.png",letter_keypad_light_blue_bg_png:"#%n-letter_keypad_light_blue_bg.png",letter_keypad_pink_bg_png:"#%n-letter_keypad_pink_bg.png",letter_keypad_bg_plain_png:"#%n-letter_keypad_bg_plain.png",light_bg_png:"#%n-light_bg.png",row_player_png:"#%n-row_player.png",prize_png:"#%n-images-cookie_1.png"},maxSize:2048},game_background:{urls:{background:"@level_bg-6b9ee4cabb.jpg"}},game_background_2:{urls:{background:"@level_bg2-5affc68646.jpg"}},game_background_3:{urls:{background:"@level_bg3-1032cad1e6.jpg"}},game_background_bonus:{urls:{background:"@bonus_round_bg-8f25a74653.jpg"}},game_background_hard:{urls:{background:"@hard_level_bg-5ed69feaf0.jpg"}},gamemessage:{urls:{},injectTo:["game"],frameIds:["%n_bg_png","%n_bg_hard_png","title_bg_png","title_bg_hard_png","title_bg_tricky_png","tricky_level_msg_bg","bonus_round_level_msg_bg"],jsonIds:["game_message_json",
"game_message_victory_json"],soundIds:[],unpackedIds:[]},git:{urls:{},injectTo:["admin","wysiwyg"],frameIds:["push_icon","revert_icon","regular_button","regular_button_on","delete_button","scroll_bg","scroll_content_bg","loading"],jsonIds:[],soundIds:[],unpackedIds:[]},halloween:{urls:{png:"@%n-e54b5df30b.png",json:"@%n-179f0e10e1.json"},jsons:{halloween_mission_window_json:"@jsons/mission_window-bda4c5380c.json",pumpkin_json:"@jsons/pumpkin-2ae43813de.json",letter_rules_json:"@jsons/abc_tournament_help-8cd3a498e5.json",plist:"@%n-e54b5df30b.plist",atlas:"@%n-e54b5df30b.atlas"},frames:{mission_letter_png:"#%n-mission_icon.png",web:"#%n-web.png",mission_star_0_png:"#%n-mission_star_0.png",mission_star_1_png:"#%n-mission_star_1.png"}},help_from_friends:{urls:{window_effect_addcoinsvideo:"~sounds/coinsfromvideo-cc95775613.mp3",png:"@%n-3157390014.png",json:"@%n-a34c52c82e.json"},jsons:{help_from_friends_json:"@jsons/%n-51ed78fc85.json",atlas:"@%n-3157390014.atlas"}},hero:{urls:{},
injectTo:["game","main"],frameIds:[],jsonIds:["%n_json","%n_backLight_json"],soundIds:[],unpackedIds:[]},heroes:{urls:{}},language_de:{urls:{json:"@%n-bc6aeb35d6.json"},jsons:{common_json:"~%n/all/jsons/common_de-5fd1d86380.json",project_json:"~%n/all/jsons/de-c00b2a3342.json",lang_json:"~%n/all/jsons/boardgame_de-55a86c1611.json"}},language_en:{urls:{json:"@%n-cdded3c357.json"},jsons:{common_json:"~%n/all/jsons/common_en-63fd587cfa.json",project_json:"~%n/all/jsons/en-c0a43c9cb6.json",lang_json:"~%n/all/jsons/boardgame_en-e1823fbf25.json"}},language_es:{urls:{json:"@%n-58ec6dc5b9.json"},jsons:{common_json:"~%n/all/jsons/common_es-de62ecde1f.json",project_json:"~%n/all/jsons/es-91233d1fab.json",lang_json:"~%n/all/jsons/boardgame_es-5963363ca9.json"}},language_fr:{urls:{json:"@%n-a631873d62.json"},jsons:{common_json:"~%n/all/jsons/common_fr-9b51292348.json",project_json:"~%n/all/jsons/fr-e2098d12c7.json",lang_json:"~%n/all/jsons/boardgame_fr-76e9e2b1db.json"}},language_it:{urls:{
json:"@%n-a54b216633.json"},jsons:{common_json:"~%n/all/jsons/common_it-a623c18628.json",project_json:"~%n/all/jsons/it-359cc6e3bf.json",lang_json:"~%n/all/jsons/boardgame_it-08434e9826.json"}},language_ja:{urls:{json:"@%n-7640151d65.json"},jsons:{common_json:"~%n/all/jsons/common_ja-cfc3632c0c.json",project_json:"~%n/all/jsons/ja-860c4bd397.json",lang_json:"~%n/all/jsons/boardgame_ja-109f77a5ce.json"}},language_ko:{urls:{json:"@%n-0ebd069487.json"},jsons:{common_json:"~%n/all/jsons/common_ko-653ebeb837.json",project_json:"~%n/all/jsons/ko-b4dec8b124.json",lang_json:"~%n/all/jsons/boardgame_ko-1008bb5ed9.json"}},language_nl:{urls:{json:"@%n-0e31e648d0.json"},jsons:{common_json:"~%n/all/jsons/common_nl-72adf55895.json",project_json:"~%n/all/jsons/nl-3f50419c49.json",lang_json:"~%n/all/jsons/boardgame_nl-3a4c2f0e5a.json"}},language_pt:{urls:{json:"@%n-b0d0ddea77.json"},jsons:{common_json:"~%n/all/jsons/common_pt-fa18073981.json",project_json:"~%n/all/jsons/pt-ff3f5355ed.json",
lang_json:"~%n/all/jsons/boardgame_pt-f22faa58c3.json"}},language_ru:{urls:{json:"@%n-50ea886d94.json"},jsons:{common_json:"~%n/all/jsons/common_ru-676c3b7711.json",project_json:"~%n/all/jsons/ru-dc4c8251b6.json",lang_json:"~%n/all/jsons/boardgame_ru-37cc7d1cce.json"}},languageswindow:{urls:{png:"@%n-2107c9730e.png",json:"@%n-ba613637d7.json"},jsons:{plist:"@%n-2107c9730e.plist"},frames:{buttoncheck_png:"#%n-languages-check.png",buttonbg_png:"#%n-languages-bg.png",buttonbg_on_png:"#%n-languages-bg_on.png"}},lantern:{urls:{}},lantern_window:{urls:{}},letter_tournament:{urls:{png:"@%n-d29384f7c3.png",json:"@%n-db85f5f586.json"},jsons:{rules_json:"@jsons/abc_tournament_help-725b377813.json",mission_window_json:"@jsons/mission_window-6778d3c890.json",atlas:"@%n-d29384f7c3.atlas"}},letters:{urls:{},injectTo:["%n_ja","game","dailytasks"],frameIds:["letter_bg_png","letter_keypad_yellow_bg_png","letter_keypad_green_bg_png","letter_keypad_red_bg_png","letter_keypad_orange_bg_png",
"letter_keypad_blue_bg_png","letter_keypad_purple_bg_png","letter_keypad_light_blue_bg_png","letter_keypad_pink_bg_png","letter_keypad_bg_plain_png"],jsonIds:[],soundIds:[],unpackedIds:[]},letters_glow:{urls:{},injectTo:["letters_ja","game"],frameIds:[],jsonIds:[],soundIds:[],unpackedIds:[]},letters_ja:{urls:{png:"@%n-1b6bc60866.png",json:"@%n-b3ed231f36.json"},jsons:{plist:"@%n-1b6bc60866.plist"},frames:{"letter_ぁ":"#%n-ja-a.png","letter_あ":"#%n-ja-a_1.png","letter_ぃ":"#%n-ja-i.png","letter_い":"#%n-ja-i_1.png","letter_う":"#%n-ja-u.png","letter_ぇ":"#%n-ja-e.png","letter_え":"#%n-ja-e_1.png","letter_ぉ":"#%n-ja-o.png","letter_お":"#%n-ja-o_1.png","letter_か":"#%n-ja-ka.png","letter_が":"#%n-ja-ga.png","letter_き":"#%n-ja-ki.png","letter_ぎ":"#%n-ja-gi.png","letter_く":"#%n-ja-ku.png","letter_ぐ":"#%n-ja-gu.png","letter_け":"#%n-ja-ke.png","letter_げ":"#%n-ja-ge.png","letter_こ":"#%n-ja-ko.png","letter_ご":"#%n-ja-go.png","letter_さ":"#%n-ja-sa.png","letter_ざ":"#%n-ja-za.png",
"letter_し":"#%n-ja-shi.png","letter_じ":"#%n-ja-ji.png","letter_す":"#%n-ja-su.png","letter_ず":"#%n-ja-zu.png","letter_せ":"#%n-ja-se.png","letter_ぜ":"#%n-ja-ze.png","letter_そ":"#%n-ja-so.png","letter_ぞ":"#%n-ja-zo.png","letter_た":"#%n-ja-ta.png","letter_だ":"#%n-ja-da.png","letter_ち":"#%n-ja-chi.png","letter_ぢ":"#%n-ja-ji_1.png","letter_っ":"#%n-ja-quote.png","letter_つ":"#%n-ja-tsu.png","letter_づ":"#%n-ja-zu_1.png","letter_て":"#%n-ja-te.png","letter_で":"#%n-ja-de.png","letter_と":"#%n-ja-to.png","letter_ど":"#%n-ja-do.png","letter_な":"#%n-ja-na.png","letter_に":"#%n-ja-ni.png","letter_ぬ":"#%n-ja-nu.png","letter_ね":"#%n-ja-ne.png","letter_の":"#%n-ja-no.png","letter_は":"#%n-ja-ha.png","letter_ば":"#%n-ja-ba.png","letter_ぱ":"#%n-ja-pa.png","letter_ひ":"#%n-ja-hi.png","letter_び":"#%n-ja-bi.png","letter_ぴ":"#%n-ja-pi.png","letter_ふ":"#%n-ja-fu.png","letter_ぶ":"#%n-ja-bu.png","letter_ぷ":"#%n-ja-pu.png","letter_へ":"#%n-ja-he.png","letter_べ":"#%n-ja-be.png","letter_ぺ":"#%n-ja-pe.png",
"letter_ほ":"#%n-ja-ho.png","letter_ぼ":"#%n-ja-bo.png","letter_ぽ":"#%n-ja-po.png","letter_ま":"#%n-ja-ma.png","letter_み":"#%n-ja-mi.png","letter_む":"#%n-ja-mu.png","letter_め":"#%n-ja-me.png","letter_も":"#%n-ja-mo.png","letter_ゃ":"#%n-ja-ya.png","letter_や":"#%n-ja-ya_1.png","letter_ゅ":"#%n-ja-yu.png","letter_ゆ":"#%n-ja-yu_1.png","letter_ょ":"#%n-ja-yo.png","letter_よ":"#%n-ja-yo_1.png","letter_ら":"#%n-ja-ra.png","letter_り":"#%n-ja-ri.png","letter_る":"#%n-ja-ru.png","letter_れ":"#%n-ja-re.png","letter_ろ":"#%n-ja-ro.png","letter_わ":"#%n-ja-wa.png","letter_を":"#%n-ja-o_2.png","letter_ん":"#%n-ja-n.png","letter_ァ":"#%n-ja-a_2.png","letter_ア":"#%n-ja-a_3.png","letter_ィ":"#%n-ja-i_2.png","letter_イ":"#%n-ja-i_3.png","letter_ゥ":"#%n-ja-u_1.png","letter_ウ":"#%n-ja-u_2.png","letter_ェ":"#%n-ja-e_2.png","letter_エ":"#%n-ja-e_3.png","letter_ォ":"#%n-ja-o_3.png","letter_オ":"#%n-ja-o_4.png","letter_カ":"#%n-ja-ka_1.png","letter_ガ":"#%n-ja-ga_1.png","letter_キ":"#%n-ja-ki_1.png","letter_ギ":"#%n-ja-gi_1.png",
"letter_ク":"#%n-ja-ku_1.png","letter_グ":"#%n-ja-gu_1.png","letter_ケ":"#%n-ja-ke_1.png","letter_ゲ":"#%n-ja-ge_1.png","letter_コ":"#%n-ja-ko_1.png","letter_ゴ":"#%n-ja-go_1.png","letter_サ":"#%n-ja-sa_1.png","letter_ザ":"#%n-ja-za_1.png","letter_シ":"#%n-ja-shi_1.png","letter_ジ":"#%n-ja-ji_2.png","letter_ス":"#%n-ja-su_1.png","letter_ズ":"#%n-ja-zu_2.png","letter_セ":"#%n-ja-se_1.png","letter_ゼ":"#%n-ja-ze_1.png","letter_ソ":"#%n-ja-so_1.png","letter_ゾ":"#%n-ja-zo_1.png","letter_タ":"#%n-ja-ta_1.png","letter_ダ":"#%n-ja-da_1.png","letter_チ":"#%n-ja-chi_1.png","letter_ッ":"#%n-ja-quote_1.png","letter_ツ":"#%n-ja-tsu_1.png","letter_テ":"#%n-ja-te_1.png","letter_デ":"#%n-ja-de_1.png","letter_ト":"#%n-ja-to_1.png","letter_ド":"#%n-ja-do_1.png","letter_ナ":"#%n-ja-na_1.png","letter_ニ":"#%n-ja-ni_1.png","letter_ヌ":"#%n-ja-nu_1.png","letter_ネ":"#%n-ja-ne_1.png","letter_ノ":"#%n-ja-no_1.png","letter_ハ":"#%n-ja-ha_1.png","letter_バ":"#%n-ja-ba_1.png","letter_パ":"#%n-ja-pa_1.png","letter_ヒ":"#%n-ja-hi_1.png",
"letter_ビ":"#%n-ja-bi_1.png","letter_ピ":"#%n-ja-pi_1.png","letter_フ":"#%n-ja-fu_1.png","letter_ブ":"#%n-ja-bu_1.png","letter_プ":"#%n-ja-pu_1.png","letter_ヘ":"#%n-ja-he_1.png","letter_ベ":"#%n-ja-be_1.png","letter_ペ":"#%n-ja-pe_1.png","letter_ホ":"#%n-ja-ho_1.png","letter_ボ":"#%n-ja-bo_1.png","letter_ポ":"#%n-ja-po_1.png","letter_マ":"#%n-ja-ma_1.png","letter_ミ":"#%n-ja-mi_1.png","letter_ム":"#%n-ja-mu_1.png","letter_メ":"#%n-ja-me_1.png","letter_モ":"#%n-ja-mo_1.png","letter_ャ":"#%n-ja-ya_2.png","letter_ヤ":"#%n-ja-ya_3.png","letter_ュ":"#%n-ja-yu_2.png","letter_ユ":"#%n-ja-yu_3.png","letter_ョ":"#%n-ja-yo_2.png","letter_ヨ":"#%n-ja-yo_3.png","letter_ラ":"#%n-ja-ra_1.png","letter_リ":"#%n-ja-ri_1.png","letter_ル":"#%n-ja-ru_1.png","letter_レ":"#%n-ja-re_1.png","letter_ロ":"#%n-ja-ro_1.png","letter_ワ":"#%n-ja-wa_1.png","letter_ン":"#%n-ja-n_1.png","letter_ヴ":"#%n-ja-vu.png","letter_ー":"#%n-ja-dash.png",letter_bg_png:"#%n-game-letter_bg.png",
letter_keypad_yellow_bg_png:"#%n-game-letter_keypad_yellow_bg.png",letter_keypad_green_bg_png:"#%n-game-letter_keypad_green_bg.png",letter_keypad_red_bg_png:"#%n-game-letter_keypad_red_bg.png",letter_keypad_orange_bg_png:"#%n-game-letter_keypad_orange_bg.png",letter_keypad_blue_bg_png:"#%n-game-letter_keypad_blue_bg.png",letter_keypad_purple_bg_png:"#%n-game-letter_keypad_purple_bg.png",letter_keypad_light_blue_bg_png:"#%n-game-letter_keypad_light_blue_bg.png",letter_keypad_pink_bg_png:"#%n-game-letter_keypad_pink_bg.png",letter_keypad_bg_plain_png:"#%n-game-letter_keypad_bg_plain.png"}},loading_scene:{urls:{png:"@%n-6b1d097c6d.png",json:"@%n-459ea2c756.json"},jsons:{loading:"@jsons/loading-8ab3dcf85a.json",atlas:"@%n-6b1d097c6d.atlas"}},loading_scene_backgrounds:{urls:{background:"@background-d2930e1de2.jpg",background_en:"@pattern_bg-c4cabb54c0.png"}},lose_window:{urls:{}},lottery:{urls:{},injectTo:["tile_shop","main"],frameIds:["%n_en","%n_ru","ok_%n","ok_%n_10k","vk_%n"],jsonIds:[
],soundIds:[],unpackedIds:[]},magic_tournament:{urls:{}},main:{urls:{click_effect:"~sounds/click-a27ba9047e.mp3",coins_effect:"~sounds/coins-4cf6dea43f.mp3",notification_effect:"~sounds/notification-a7dfa35781.mp3",window_effect:"~sounds/window-a51fa939a6.mp3",play_button_effect:"~sounds/play_button_effect-0caa47ecd1.mp3",treasure_search_effect:"~sounds/book-c42feb6454.mp3",background_music_map:"~sounds/musicepisode-02b30317ff.mp3",periodicbonus_effect:"~sounds/periodicbonus-c542f78aa9.mp3",daily_game_mix_effect:"~sounds/mixbox-7ab3ff9873.mp3",champion_window_effect:"~sounds/spwindows-55100bd538.mp3",reward_window_effect:"~sounds/reward-70dd978954.mp3",beat_friend_effect:"~sounds/beat_friends-c743f7ef91.mp3",basefont_ttf:{type:"font",name:"Neris-Black",srcs:["~%n/all/neris-black-sc.ttf","~%n/all/neris-black-sc.eot"]},treasure_search_open_effect:"~sounds/tour_bailer-0f3c5a3168.mp3",treasure_search_found_effect:"~sounds/tour_flower-a550e6d5f6.mp3",meow:"~sounds/meow-d30bfa364d.mp3",
task_done_sfx:"~sounds/done_jingle-c8ff12607c.mp3",appear_sfx:"~sounds/emergence_boosterdo-4c0b6fe03d.mp3",booster_before_selection_effect:"~sounds/s_booster_selection-bea15c1d6f.mp3",booster_before_cancel_effect:"~sounds/s_booster_cancel-e36ae11dc3.mp3",star_collect_effect:"~sounds/star_collect-326dc2cce6.mp3",simple_win_effect:"~sounds/simple_win-08e9e6772c.mp3",simple_transition_effect:"~sounds/simple_transition-209db99faf.mp3",metha_present_effect:"~sounds/present-788b433cdc.mp3",png:"@%n-443c203c99.png",json:"@%n-807bd1d774.json"},jsons:{share_json:"~%n/all/jsons/share-8424f0514e.json",wait_json:"@jsons/loading-9fb7dc15f9.json",reward_spine_json:"@jsons/reward_animation-287c7e5ee5.json",friday_schedule:{url:"cleverapps/utils/events/client/scrambleschedule.json",
data:'[{"features":["boosters"],"start":"2021-07-04T00:00:00.000Z","finish":"2021-07-04T23:59:00.000Z"},{"features":["lottery"],"start":"2021-06-16T00:00:00.000Z","finish":"2021-06-16T23:59:00.000Z"},{"features":["lottery"],"start":"2021-07-01T00:00:00.000Z","finish":"2021-07-01T23:59:00.000Z"},{"features":["lottery"],"start":"2021-07-13T00:00:00.000Z","finish":"2021-07-13T23:59:00.000Z"},{"features":["lottery"],"start":"2021-07-28T00:00:00.000Z","finish":"2021-07-28T23:59:00.000Z"},{"features":["xmas","wardrobe"],"start":"2020-12-04T00:00:00.000Z","finish":"2021-01-24T23:59:00.000Z"},{"features":["halloween"],"start":"2020-10-06T00:00:00.000Z","finish":"2020-11-01T23:59:00.000Z"},{"features":["valentines","bonusworld"],"start":"2021-02-08T00:00:00.000Z","finish":"2021-02-14T23:59:00.000Z","options":{"bonusWorldType":"valentines"}},{"features":["black_friday","favorite","boosters"],"start":"2020-11-20T00:00:00.000Z","finish":"2020-11-27T23:59:00.000Z","debug":true},{"features":["easter","bonusworld"],"options":{"bonusWorldType":"easter"},"start":"2021-03-29T00:00:00.000Z","finish":"2021-04-11T23:59:00.000Z"},{"features":["memorial","bonusworld"],"start":"2021-05-24T00:00:00.000Z","finish":"2021-06-06T23:59:00.000Z","options":{"bonusWorldType":"summer"}}]',
inline:!0},play_button_transition_json:"@jsons/play_button_transition-86d4e931e5.json",wait_transition_json:"@jsons/loading_orange-672bf6923d.json",present_json:"@jsons/present-a5e71337a2.json",bound_round_timer_json:"@jsons/bonus_round_timer-e5d121cbc1.json",dailycup_icon_json:"@jsons/icon_dailycup-8bc0051b45.json",piggybank_icon_json:"@jsons/icon_piggy-e5c916902b.json",pack_icon_json:"@jsons/icon_pack1-14d36d8f12.json",pack1_icon_json:"@jsons/icon_pack2-f8dc97c320.json",pack2_icon_json:"@jsons/icon_pack3-8f248c4589.json",mission_letter_icon_json:"@jsons/mission_letter_icon-63fad465e9.json",treasure_search_icon_json:"@jsons/gem_icon-0ee2fbbb90.json",easter_letter_json:"@jsons/easter_letter-b97e78f0e4.json",valentine_letter_json:"@jsons/valentine_letter-c76dea98dd.json",halloween_letter_json:"@jsons/mission_letter_icon-05243ff4aa.json",boosters_sale_icon_json:"@jsons/booster_sale_icon-bac17cf5a9.json",favorite_sale_icon_json:"@jsons/favorite_sale_icon-15d870d5ee.json",
bonus_world_valentines_icon_json:"@jsons/bonus_world_valentines_icon-3549b2f453.json",bonus_world_easter_icon_json:"@jsons/bonus_world_easter_icon-82ceb96631.json",bonus_world_summer_icon_json:"@jsons/bonus_world_summer_icon-02ad7482d8.json",xmas_letter_json:"@jsons/xmas_letter-5e57831b80.json",slot_machine_json:"@jsons/slot_machine-c895e38372.json",memorial_letter_json:"@jsons/memorial_letter-5991299d1a.json",transition_json:"@jsons/transition-1dceffd1a0.json",hero_json:"@jsons/hero-fc7f32c05f.json",hero_backLight_json:"@jsons/score_girl-463e0f9fab.json",star_json:"@jsons/star-36b70c8119.json",progress_bar_json:"@jsons/progress_bar-6fc7b7e73d.json",avatar_spark_json:"@jsons/avatar_spark-dae07e0bd6.json",progress_bar_spark_json:"@jsons/progress_bar_spark-536c458f3d.json",flying_ad_json:"@jsons/flying_ad-35ce77d30b.json",plist:"@%n-443c203c99.plist",atlas:"@%n-443c203c99.atlas"},frames:{notification_bg_png:"#%n-notification-notification_bg.png",
fb_icon_png:"#%n-socialicons-fb_icon_white.png",ok_icon_png:"#%n-socialicons-ok_icon.png",vk_icon_png:"#%n-socialicons-vk_icon.png",xsolla_icon_png:"#%n-socialicons-xsolla_icon.png",nk_icon_png:"#%n-socialicons-nk_icon.png",mm_icon_png:"#%n-socialicons-mm_icon.png",fs_icon_png:"#%n-socialicons-fs_icon.png",draugiem_icon_png:"#%n-socialicons-draugiem_icon.png",mobage_icon_png:"#%n-socialicons-mobage_icon.png",google_icon_png:"#%n-socialicons-google_icon.png",apple_icon_png:"#%n-socialicons-apple_icon.png",yandex_icon_png:"#%n-socialicons-yandex_icon.png",white_button_png:"#%n-socialicons-white_button.png",white_outline_button_png:"#%n-socialicons-white_outline_button.png",white_outline_button_on_png:"#%n-socialicons-white_outline_button_on.png",white_shadow_button_png:"#%n-socialicons-white_shadow_button.png",white_shadow_button_on_png:"#%n-socialicons-white_shadow_button_on.png",blue_outline_button_png:"#%n-socialicons-blue_outline_button.png",
blue_outline_button_on_png:"#%n-socialicons-blue_outline_button_on.png",select_friend_checkbox:"#%n-selectfriends-checkbox_sf.png",select_friend_checkbox_selected:"#%n-selectfriends-checkbox_mark.png",light_bg_png:"#%n-tournament-light_bg.png",light_bg_you_png:"#%n-tournament-light_bg_you.png",row_player_png:"#%n-tournament-row_player.png",row_you_png:"#%n-tournament-row_you.png",missions_item_bg_png:"#%n-mission-item_bg.png",global_icon:"#%n-leaderboard-world.png",friends_icon:"#%n-leaderboard-friends.png",league_arrow_png:"#%n-leaderboard-league_arrow.png",levelstart_cup_1:"#%n-leaderboard-1_place.png",levelstart_cup_2:"#%n-leaderboard-2_place.png",levelstart_cup_3:"#%n-leaderboard-3_place.png",shop_tab_off:"#%n-leaderboard-tab_off.png",shop_tab_on:"#%n-leaderboard-tab_on.png",wood_bg:"#%n-windows-window_bg.png",bounty_item_bg:"#%n-friend_messages-bounty_bg.png",android_avatar:"#%n-avatars-android_avatar.png",ios_avatar:"#%n-avatars-ios_avatar.png",
user_avatar:"#%n-avatars-user_avatar.png",default_avatar:"#%n-avatars-default_avatar.jpg",window_title_bg_png:"#%n-windows-window_title_bg.png",mission_letter_png:"#%n-missions-mission_letter.png",tournament_gold:"#%n-missions-gold_tournament.png",tournament_silver:"#%n-missions-silver_tournament.png",tournament_bronze:"#%n-missions-bronze_tournament.png",prize_place_1:"#%n-missions-prize_place_1.png",prize_place_2:"#%n-missions-prize_place_2.png",prize_place_3:"#%n-missions-prize_place_3.png",timer_bg_png:"#%n-menu-timer_bg_2.png",goal_done_sign:"#%n-selectfriends-checkbox_mark.png",ribbon:"#%n-ribbon_title-ribbon_title_full.png",fb_icon_blue_png:"#%n-socialicons-fb_icon.png",scrollbar_png:"#%n-scrollbar-scrollbar.png",tooltip_bg_png:"#%n-tooltip-box.png",tooltip_shadow_arrow_png:"#%n-tooltip-arrow.png",tooltip_arrow_png:"#%n-tooltip-arrow2.png",gold_small_png:"#%n-reward_icons-gold_small.png",reward_gold_png:"#%n-reward_icons-gold.png",hint_icon_png:"#%n-reward_icons-hint_icon.png",
hint:"#%n-reward_icons-hint.png",eye:"#%n-reward_icons-eye.png",highlight:"#%n-reward_icons-highlight.png",hint_small:"#%n-reward_icons-hint_small.png",eye_small:"#%n-reward_icons-eye_small.png",highlight_small:"#%n-reward_icons-highlight_small.png",window_bg_png:"#%n-windows-window_bg.png",adicon_png:"#%n-shared-adicon.png",adicon_bubble_png:"#%n-shared-adicon_bubble.png",tutorial_click_png:"#%n-tutorial-circle.png",tutorial_hand_png:"#%n-tutorial-hand.png",default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",
default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",
nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",
nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png",toolbar_bg_png:"#%n-toolbar-toolbar_bg.png",toolbar_attention_icon_png:"#%n-toolbar-toolbar_notification.png",toolbar_dailybonus_icon_png:"#%n-toolbar-tb_dailyquest.png",toolbar_daily_tasks_icon_png:"#%n-toolbar-tb_daily_tasks.png",
toolbar_mail_icon_png:"#%n-toolbar-tb_messages.png",toolbar_leader_board_icon_png:"#%n-toolbar-tb_leaderboard_icon.png",toolbar_bonusround_icon_png:"#%n-toolbar-tb_bonus_round.png",icon:"#%n-dailytasks-daily_tasks.png",daily_task_bar_png:"#%n-mission-bar.png",daily_task_bar_bg_png:"#%n-mission-bar_bg.png",notification_bg:"#%n-mission-notification_bg.png",menu_icon_png:"#%n-controlbuttons-menu.png",button_png:"#%n-controlbuttons-menu_button.png",button_on_png:"#%n-controlbuttons-menu_button_on.png",fullscreen_icon_png:"#%n-controlbuttons-fullscreen_icon.png",back_button_png:"#%n-controlbuttons-back_button.png",back_button_on_png:"#%n-controlbuttons-back_button_on.png",back_icon_png:"#%n-controlbuttons-back.png",coin_png:"#%n-menubar-coin.png",menubar_bg_png:"#%n-menubar-bar_bg.png",plus_button_png:"#%n-menubar-plus.png",plus_button_on_png:"#%n-menubar-plus_on.png",attention_png:"#%n-toolbar-toolbar_notification.png",cryptex_png:"#%n-menubar-cryptex_icon.png",
menubar_help_button_png:"#%n-menubar-help_small.png",menubar_help_button_on_png:"#%n-menubar-help_small_on.png",window_button_png:"#%n-buttons-button.png",window_button_on_png:"#%n-buttons-button_on.png",window_button_disabled_png:"#%n-buttons-button_off.png",green_button_png:"#%n-buttons-green_button.png",green_button_on_png:"#%n-buttons-green_button_on.png",window_close_png:"#%n-buttons-close.png",window_close_on_png:"#%n-buttons-close_on.png",blue_button_png:"#%n-buttons-button_blue.png",blue_button_on_png:"#%n-buttons-button_blue_on.png",help_button_png:"#%n-buttons-help_small.png",help_button_on_png:"#%n-buttons-help_small_on.png",exit_button_icon:"#%n-buttons-exit_icon.png",scene_exit_button:"#%n-buttons-scene_exit.png",small_green_button:"#%n-buttons-small_green_button.png",small_green_button_on:"#%n-buttons-small_green_button_on.png",small_blue_button:"#%n-buttons-small_blue_button.png",small_blue_button_on:"#%n-buttons-small_blue_button_on.png",
music_off_png:"#%n-sounds-music_off.png",music_on_png:"#%n-sounds-music_on.png",sound_off_png:"#%n-sounds-sound_off.png",sound_on_png:"#%n-sounds-sound_on.png",red_button:"#%n-buttons-red_button.png",red_button_on:"#%n-buttons-red_button_on.png",play_button_png:"#%n-buttons-play_button.png",play_button_on_png:"#%n-buttons-play_button_on.png",play_button_hard_png:"#%n-buttons-play_button_hard.png",play_button_hard_on_png:"#%n-buttons-play_button_hard_on.png",play_button_tricky_png:"#%n-buttons-play_button_tricky.png",play_button_tricky_on_png:"#%n-buttons-play_button_tricky_on.png",mission_play_button:"#%n-buttons-red_button.png",mission_play_button_on:"#%n-buttons-red_button_on.png",icon_bg:"#%n-sidebar-icon_bg.png",lock:"#%n-sidebar-lock_sidebar.png",icon_text_bg:"#%n-sidebar-icon_text_bg.png",daily_cup_icon:"#%n-dailycup-daily_cup.png",starter_pack_0_icon_png:"#%n-pack1-starter_pack_0.png",starter_pack_1_icon_png:"#%n-pack2-starter_pack_1.png",
starter_pack_2_icon_png:"#%n-pack3-starter_pack_2.png",bounty_ready_icon:"#%n-friend_messages-bounty_ready_icon.png",send_coins_icon:"#%n-friend_messages-ask_coins.png",accept_coins_icon:"#%n-friend_messages-accept_coins_icon.png",accept_stuck_coins_icon:"#%n-friend_messages-accept_stuck_coins_icon.png",avatar_frame:"#%n-avatars-avatar_frame.png",avatar_frame2:"#%n-avatars-avatar_frame2.png",booster_before_bg_png:"#%n-boosters_before-booster_before_bg.png",booster_before_bg_on_png:"#%n-boosters_before-booster_before_bg_on.png",booster_before_bg_off_png:"#%n-boosters_before-booster_before_bg_off.png",bonus_hint_sale_png:"#%n-boosters_before-booster_hint_sale.png",booster_before_green_button_png:"#%n-boosters_before-booster_before_green_button.png",booster_before_purple_button_png:"#%n-boosters_before-booster_before_purple_button.png",booster_before_check_icon_png:"#%n-boosters_before-booster_before_check_icon.png",
booster_before_plus_icon_png:"#%n-boosters_before-booster_before_plus_icon.png",booster_before_price_bg_png:"#%n-boosters_before-booster_before_price_bg.png",hard_level_title_bg_png:"#%n-boosters_before-window_title_bg_hard.png",tricky_level_title_bg_png:"#%n-boosters_before-window_title_bg_tricky.png",booster_before_lock_png:"#%n-boosters_before-booster_before_lock.png",booster_before_level_bg:"#%n-boosters_before-booster_before_level_bg.png",booster_before_level_bg_hard:"#%n-boosters_before-booster_before_level_bg_hard.png",booster_before_level_bg_tricky:"#%n-boosters_before-booster_before_level_bg_tricky.png",bg_png:"#%n-dialogues-bg.png",arrow_png:"#%n-simple-arrow.png",friend_bg_png:"#%n-select_friend_window-friend_bg.png",bar_png:"#%n-simple-bar.png",bar_bg_png:"#%n-simple-bar_bg.png",frame_gold_png:"#%n-simple-frame_gold.png",frame_silver_png:"#%n-simple-frame_silver.png",star_png:"#%n-simple-star.png",tape_png:"#%n-simple-tape.png",lock_png:"#%n-simple-lock.png",
scroll_bg_png:"#%n-simple-scroll_bg.png",backgrounds_window_title_bg:"#%n-simple-backgrounds_window_title_bg.png",closed_bg_png:"#%n-simple-closed_bg.png",lottery_en:"#%n-lottery-lottery_en.png",lottery_ru:"#%n-lottery-lottery_ru.png",ok_lottery:"#%n-lottery-ok_lottery.png",ok_lottery_10k:"#%n-lottery-ok_lottery_10000.png",vk_lottery:"#%n-lottery-vk_lottery.png",stitch_png:"#%n-stitches-stitch.png",stitch_corner_png:"#%n-stitches-stitch_corner.png"}},memorial:{urls:{png:"@%n-03b3de0146.png",json:"@%n-856197473f.json"},jsons:{letter_rules_json:"@jsons/letter_rules-199e266cf5.json",mission_window_json:"@jsons/mission_window-7411ba1fa5.json",hero_json:"@jsons/hero-a66d2a06fc.json",plist:"@%n-03b3de0146.plist",atlas:"@%n-03b3de0146.atlas"},frames:{memorial_decor_top:"#%n-decor_window_top.png",mission_icon_png:"#%n-mission_icon.png",mission_star0_png:"#%n-mission_star_0.png",mission_star1_png:"#%n-mission_star_1.png",memorial_decor_bottom_left:"#%n-decor_window_bottom.png",
menu_bar_item:"#%n-menu_bar_item.png",decor_progress:"#%n-decor_progress.png"}},menubar:{urls:{},injectTo:["minesweeper","game","main"],frameIds:["coin_png","%n_bg_png","plus_button_png","plus_button_on_png","attention_png","cryptex_png","%n_help_button_png","%n_help_button_on_png"],jsonIds:["bound_round_timer_json"],soundIds:[],unpackedIds:[]},merge:{urls:{}},metha_simple_main:{urls:{}},metha_top_layer_0:{urls:{}},minesweeper:{urls:{png:"@%n-6e7f0d6e1d.png",json:"@%n-7dffc78e7c.json"},jsons:{bound_round_timer_json:"@jsons/bonus_round_timer-e5d121cbc1.json",plist:"@%n-6e7f0d6e1d.plist",atlas:"@%n-6e7f0d6e1d.atlas"},frames:{gold_small_png:"#%n-reward_icons-gold_small.png",reward_gold_png:"#%n-reward_icons-gold.png",hint_icon_png:"#%n-reward_icons-hint_icon.png",hint:"#%n-reward_icons-hint.png",eye:"#%n-reward_icons-eye.png",highlight:"#%n-reward_icons-highlight.png",hint_small:"#%n-reward_icons-hint_small.png",eye_small:"#%n-reward_icons-eye_small.png",
highlight_small:"#%n-reward_icons-highlight_small.png",default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",
default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",
nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",
nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png",coin_png:"#%n-menubar-coin.png",menubar_bg_png:"#%n-menubar-bar_bg.png",plus_button_png:"#%n-menubar-plus.png",plus_button_on_png:"#%n-menubar-plus_on.png",attention_png:"#%n-menubar-attention.png",cryptex_png:"#%n-menubar-cryptex_icon.png",menubar_help_button_png:"#%n-menubar-help_small.png",menubar_help_button_on_png:"#%n-menubar-help_small_on.png"}},moves:{urls:{},injectTo:["game"],frameIds:[],jsonIds:[],soundIds:[],unpackedIds:[]},piggybank_window:{urls:{png:"@%n-7d811e792a.png",json:"@%n-0f3f2ddf9c.json"},jsons:{piggy_bank_window_json:"@jsons/piggy_bank-2fabd5e7ac.json",atlas:"@%n-7d811e792a.atlas"}},promotion_adventure_en:{urls:{image:"@adventure-5d35db83ca.jpg"}},promotion_adventure_ru:{
urls:{image:"@adventure-81c39864ca.jpg"}},promotion_crocword_de:{urls:{image:"@crocword-8e180fa28c.jpg"}},promotion_crocword_en:{urls:{image:"@crocword-50a3c2e09b.jpg"}},promotion_crocword_es:{urls:{image:"@crocword-5d726c18ef.jpg"}},promotion_crocword_fr:{urls:{image:"@crocword-b29ec54414.jpg"}},promotion_crocword_it:{urls:{image:"@crocword-52921a2490.jpg"}},promotion_crocword_ru:{urls:{image:"@crocword-04c2173528.jpg"}},promotion_differences_en:{urls:{image:"@differences-f96d4306e7.jpg"}},promotion_differences_ru:{urls:{image:"@differences-247f801ff4.jpg"}},promotion_heroes_en:{urls:{image:"@heroes-a832bb6d6d.jpg"}},promotion_heroes_ru:{urls:{image:"@heroes-09bae5b254.jpg"}},promotion_magicwords_de:{urls:{image:"@magicwords-27fe6117a0.jpg"}},promotion_magicwords_en:{urls:{image:"@magicwords-04657482ac.jpg"}},promotion_magicwords_es:{urls:{image:"@magicwords-9992e631df.jpg"}},promotion_magicwords_fr:{urls:{image:"@magicwords-39ad2d700d.jpg"}},promotion_magicwords_it:{urls:{
image:"@magicwords-da3d9e149d.jpg"}},promotion_magicwords_ru:{urls:{image:"@magicwords-27091fcfcc.jpg"}},promotion_mergecraft_en:{urls:{image:"@mergecraft-14d19e6dc3.jpg"}},promotion_mergecraft_ru:{urls:{image:"@mergecraft-801c1a3952.jpg"}},promotion_olympics_de:{urls:{image:"@olympics-499c616821.jpg"}},promotion_olympics_en:{urls:{image:"@olympics-fb3fadbc6f.jpg"}},promotion_olympics_es:{urls:{image:"@olympics-767b28ab28.jpg"}},promotion_olympics_fr:{urls:{image:"@olympics-28fa89a300.jpg"}},promotion_olympics_it:{urls:{image:"@olympics-a9eb2d4445.jpg"}},promotion_olympics_ru:{urls:{image:"@olympics-657a1659cd.jpg"}},promotion_riddles_en:{urls:{image:"@riddles-6e4a64f461.jpg"}},promotion_riddles_ru:{urls:{image:"@riddles-a04f70fa4d.jpg"}},promotion_runes_en:{urls:{image:"@runes-4189fa6106.jpg"}},promotion_runes_ru:{urls:{image:"@runes-8ea348dfc8.jpg"}},promotion_scramble_en:{urls:{image:"@scramble-245e9c08c0.jpg"}},promotion_scramble_fr:{urls:{image:"@scramble-da8e269592.jpg"}},
promotion_scramble_ru:{urls:{image:"@scramble-5a0aa23d2f.jpg"}},promotion_tripeaks_de:{urls:{image:"@tripeaks-d748eb75e8.jpg"}},promotion_tripeaks_en:{urls:{image:"@tripeaks-228cedda9d.jpg"}},promotion_tripeaks_es:{urls:{image:"@tripeaks-e80b0dbc61.jpg"}},promotion_tripeaks_fr:{urls:{image:"@tripeaks-c7665a69ae.jpg"}},promotion_tripeaks_it:{urls:{image:"@tripeaks-82d49cd2e2.jpg"}},promotion_tripeaks_ru:{urls:{image:"@tripeaks-2efc59480b.jpg"}},promotion_wordsoup_de:{urls:{image:"@wordsoup-8392808e0c.jpg"}},promotion_wordsoup_en:{urls:{image:"@wordsoup-26337c641b.jpg"}},promotion_wordsoup_es:{urls:{image:"@wordsoup-cde236a3a6.jpg"}},promotion_wordsoup_fr:{urls:{image:"@wordsoup-d02f7f9b50.jpg"}},promotion_wordsoup_it:{urls:{image:"@wordsoup-c9f4605075.jpg"}},promotion_wordsoup_ru:{urls:{image:"@wordsoup-4b87340634.jpg"}},request_center:{urls:{},injectTo:["main"],frameIds:["bounty_ready_icon","send_coins_icon","accept_coins_icon","accept_stuck_coins_icon"],jsonIds:[],soundIds:[],
unpackedIds:[]},reward_element:{urls:{},injectTo:["game"],frameIds:["%n_bg_png"],jsonIds:[],soundIds:[],unpackedIds:[]},reward_icons:{urls:{},injectTo:["slot_machine","battle_pass","minesweeper","tile_shop","game","main","admin"],frameIds:["gold_small_png","reward_gold_png","hint_icon_png","hint","eye","highlight","hint_small","eye_small","highlight_small"],jsonIds:[],soundIds:[],unpackedIds:[]},rose_tournament:{urls:{}},rotate_phone:{urls:{rotate_png:"@phoneturn-7a474f6b71.png"}},ruby_tournament:{urls:{}},scrollbar:{urls:{},injectTo:["main"],frameIds:["%n_png"],jsonIds:[],soundIds:[],unpackedIds:[]},select_friend_window:{urls:{},injectTo:["main"],frameIds:["friend_bg_png"],jsonIds:[],soundIds:[],unpackedIds:[]},shared:{urls:{},injectTo:["tile_shop","game","main"],frameIds:["adicon_png","adicon_bubble_png"],jsonIds:[],soundIds:[],unpackedIds:[]},sidebar:{urls:{},injectTo:["main"],frameIds:["icon_bg","lock","attention_png","icon_text_bg","daily_cup_icon","starter_pack_0_icon_png",
"starter_pack_1_icon_png","starter_pack_2_icon_png"],jsonIds:["dailycup_icon_json","piggybank_icon_json","pack_icon_json","pack1_icon_json","pack2_icon_json","mission_letter_icon_json","treasure_search_icon_json","easter_letter_json","valentine_letter_json","halloween_letter_json","boosters_sale_icon_json","favorite_sale_icon_json","bonus_world_valentines_icon_json","bonus_world_easter_icon_json","bonus_world_summer_icon_json","xmas_letter_json","slot_machine_json","memorial_letter_json"],soundIds:[],unpackedIds:[]},simple:{urls:{},injectTo:["main"],frameIds:["arrow_png","bar_png","bar_bg_png","frame_gold_png","frame_silver_png","star_png","tape_png","lock_png","scroll_bg_png","backgrounds_window_title_bg","closed_bg_png"],jsonIds:["star_json","progress_bar_json","avatar_spark_json","progress_bar_spark_json"],soundIds:["star_collect_effect","%n_win_effect","%n_transition_effect","metha_present_effect"],unpackedIds:[]},simple_background_0:{urls:{
background:"@background_0-1963c99091.jpg",png:"@%n-02f011e587.png",json:"@%n-3429a95801.json"},jsons:{plist:"@%n-02f011e587.plist"},frames:{background_icon_current:"#%n-simple-background_icon_0.png",background_icon_next:"#%n-simple-background_icon_1.png"}},simple_background_1:{urls:{background:"@background_1-2ffc53632c.jpg",png:"@%n-a054f1e9fb.png",json:"@%n-6981cadb7a.json"},jsons:{plist:"@%n-a054f1e9fb.plist"},frames:{background_icon_current:"#%n-simple-background_icon_1.png",background_icon_next:"#%n-simple-background_icon_2.png"}},simple_background_10:{urls:{background:"@background_10-51a5fd9ac6.jpg",png:"@%n-ca93b86665.png",json:"@%n-4ba9fe7973.json"},jsons:{plist:"@%n-ca93b86665.plist"},frames:{background_icon_current:"#%n-simple-background_icon_10.png",background_icon_next:"#%n-simple-background_icon_11.png"}},simple_background_11:{urls:{background:"@background_11-705c4473ef.jpg",png:"@%n-6b2b3121be.png",json:"@%n-a9ccdb16e5.json"},jsons:{plist:"@%n-6b2b3121be.plist"},frames:{
background_icon_current:"#%n-simple-background_icon_11.png",background_icon_next:"#%n-simple-background_icon_12.png"}},simple_background_12:{urls:{background:"@background_12-c014d3bd32.jpg",png:"@%n-089786209e.png",json:"@%n-cb29c510f7.json"},jsons:{plist:"@%n-089786209e.plist"},frames:{background_icon_current:"#%n-simple-background_icon_12.png",background_icon_next:"#%n-simple-background_icon_13.png"}},simple_background_13:{urls:{background:"@background_13-046664fa9c.jpg",png:"@%n-99916dff78.png",json:"@%n-8ca2f3c59f.json"},jsons:{plist:"@%n-99916dff78.plist"},frames:{background_icon_current:"#%n-simple-background_icon_13.png",background_icon_next:"#%n-simple-background_icon_14.png"}},simple_background_14:{urls:{background:"@background_14-cf75ccbae0.jpg",png:"@%n-abec04e0d5.png",json:"@%n-7b5494a48d.json"},jsons:{plist:"@%n-abec04e0d5.plist"},frames:{background_icon_current:"#%n-simple-background_icon_14.png",background_icon_next:"#%n-simple-background_icon_15.png"}},
simple_background_15:{urls:{background:"@background_15-2d915e2b36.jpg",png:"@%n-92aa75fd5e.png",json:"@%n-ca92c9985d.json"},jsons:{plist:"@%n-92aa75fd5e.plist"},frames:{background_icon_current:"#%n-simple-background_icon_15.png",background_icon_next:"#%n-simple-background_icon_16.png"}},simple_background_16:{urls:{background:"@background_16-baa3eb0695.jpg",png:"@%n-ab9284b720.png",json:"@%n-d9561f6cad.json"},jsons:{plist:"@%n-ab9284b720.plist"},frames:{background_icon_current:"#%n-simple-background_icon_16.png",background_icon_next:"#%n-simple-background_icon_17.png"}},simple_background_17:{urls:{background:"@background_17-12a1a08645.jpg",png:"@%n-349f506203.png",json:"@%n-ce17440373.json"},jsons:{plist:"@%n-349f506203.plist"},frames:{background_icon_current:"#%n-simple-background_icon_17.png",background_icon_next:"#%n-simple-background_icon_18.png"}},simple_background_18:{urls:{background:"@background_18-1a550140a6.jpg",png:"@%n-5cdd18fde8.png",json:"@%n-ad572169cc.json"},jsons:{
plist:"@%n-5cdd18fde8.plist"},frames:{background_icon_current:"#%n-simple-background_icon_18.png",background_icon_next:"#%n-simple-background_icon_19.png"}},simple_background_19:{urls:{background:"@background_19-17481e1132.jpg",png:"@%n-fd9e3775f2.png",json:"@%n-c8892dea80.json"},jsons:{plist:"@%n-fd9e3775f2.plist"},frames:{background_icon_current:"#%n-simple-background_icon_19.png",background_icon_next:"#%n-simple-background_icon_20.png"}},simple_background_2:{urls:{background:"@background_2-973eb34f7d.jpg",png:"@%n-acdd6d2f15.png",json:"@%n-7e3c09ff9d.json"},jsons:{plist:"@%n-acdd6d2f15.plist"},frames:{background_icon_current:"#%n-simple-background_icon_2.png",background_icon_next:"#%n-simple-background_icon_3.png"}},simple_background_20:{urls:{background:"@background_20-de033eecd4.jpg",png:"@%n-f8b9ed7b04.png",json:"@%n-b621c076aa.json"},jsons:{plist:"@%n-f8b9ed7b04.plist"},frames:{background_icon_current:"#%n-simple-background_icon_20.png",
background_icon_next:"#%n-simple-background_icon_21.png"}},simple_background_21:{urls:{background:"@background_21-beede3d07b.jpg",png:"@%n-58cc1c343a.png",json:"@%n-8deffa065d.json"},jsons:{plist:"@%n-58cc1c343a.plist"},frames:{background_icon_current:"#%n-simple-background_icon_21.png",background_icon_next:"#%n-simple-background_icon_22.png"}},simple_background_22:{urls:{background:"@background_22-8e271abcb7.jpg",png:"@%n-f2cbd68bd6.png",json:"@%n-dcf798fb91.json"},jsons:{plist:"@%n-f2cbd68bd6.plist"},frames:{background_icon_current:"#%n-simple-background_icon_22.png",background_icon_next:"#%n-simple-background_icon_23.png"}},simple_background_23:{urls:{background:"@background_23-b827913596.jpg",png:"@%n-cf84e9694b.png",json:"@%n-be52512c22.json"},jsons:{plist:"@%n-cf84e9694b.plist"},frames:{background_icon_current:"#%n-simple-background_icon_23.png",background_icon_next:"#%n-simple-background_icon_24.png"}},simple_background_24:{urls:{background:"@background_24-943b98e805.jpg",
png:"@%n-553949adad.png",json:"@%n-0a775cefae.json"},jsons:{plist:"@%n-553949adad.plist"},frames:{background_icon_current:"#%n-simple-background_icon_24.png",background_icon_next:"#%n-simple-background_icon_25.png"}},simple_background_25:{urls:{background:"@background_25-3db5fb6012.jpg",png:"@%n-5195c450f7.png",json:"@%n-f3acb61070.json"},jsons:{plist:"@%n-5195c450f7.plist"},frames:{background_icon_current:"#%n-simple-background_icon_25.png",background_icon_next:"#%n-simple-background_icon_26.png"}},simple_background_26:{urls:{background:"@background_26-5630691740.jpg",png:"@%n-00181112ee.png",json:"@%n-71da284a78.json"},jsons:{plist:"@%n-00181112ee.plist"},frames:{background_icon_current:"#%n-simple-background_icon_26.png",background_icon_next:"#%n-simple-background_icon_27.png"}},simple_background_27:{urls:{background:"@background_27-ae17d66080.jpg",png:"@%n-8801e46940.png",json:"@%n-b0b4a8791c.json"},jsons:{plist:"@%n-8801e46940.plist"},frames:{
background_icon_current:"#%n-simple-background_icon_27.png",background_icon_next:"#%n-simple-background_icon_28.png"}},simple_background_28:{urls:{background:"@background_28-dc2d7410e4.jpg",png:"@%n-952593b921.png",json:"@%n-72c41b898f.json"},jsons:{plist:"@%n-952593b921.plist"},frames:{background_icon_current:"#%n-simple-background_icon_28.png",background_icon_next:"#%n-simple-background_icon_29.png"}},simple_background_29:{urls:{background:"@background_29-7748a979df.jpg",png:"@%n-d46f00d186.png",json:"@%n-97f310695a.json"},jsons:{plist:"@%n-d46f00d186.plist"},frames:{background_icon_current:"#%n-simple-background_icon_29.png",background_icon_next:"#%n-simple-background_icon_30.png"}},simple_background_3:{urls:{background:"@background_3-f155338349.jpg",png:"@%n-c763ccb338.png",json:"@%n-be2dee3224.json"},jsons:{plist:"@%n-c763ccb338.plist"},frames:{background_icon_current:"#%n-simple-background_icon_3.png",background_icon_next:"#%n-simple-background_icon_4.png"}},
simple_background_30:{urls:{background:"@background_30-a5fbabf4fd.jpg",png:"@%n-2fec3bf394.png",json:"@%n-84ecdc523c.json"},jsons:{plist:"@%n-2fec3bf394.plist"},frames:{background_icon_current:"#%n-simple-background_icon_30.png",background_icon_next:"#%n-simple-background_icon_31.png"}},simple_background_31:{urls:{background:"@background_31-4dba9b0fc0.jpg",png:"@%n-ed6e51af3b.png",json:"@%n-a647237296.json"},jsons:{plist:"@%n-ed6e51af3b.plist"},frames:{background_icon_current:"#%n-simple-background_icon_31.png",background_icon_next:"#%n-simple-background_icon_32.png"}},simple_background_32:{urls:{background:"@background_32-583ef08a0b.jpg",png:"@%n-a134a92ef8.png",json:"@%n-3610c3b7f2.json"},jsons:{plist:"@%n-a134a92ef8.plist"},frames:{background_icon_current:"#%n-simple-background_icon_32.png",background_icon_next:"#%n-simple-background_icon_33.png"}},simple_background_33:{urls:{background:"@background_33-66d990dbda.jpg",png:"@%n-ef90566cac.png",json:"@%n-d56e051f1d.json"},jsons:{
plist:"@%n-ef90566cac.plist"},frames:{background_icon_current:"#%n-simple-background_icon_33.png",background_icon_next:"#%n-simple-background_icon_34.png"}},simple_background_34:{urls:{background:"@background_34-0160408152.jpg",png:"@%n-522813e343.png",json:"@%n-53ba402dfc.json"},jsons:{plist:"@%n-522813e343.plist"},frames:{background_icon_current:"#%n-simple-background_icon_34.png",background_icon_next:"#%n-simple-background_icon_35.png"}},simple_background_35:{urls:{background:"@background_35-8bae7a4b59.jpg",png:"@%n-5ea3d5e17e.png",json:"@%n-b88543a342.json"},jsons:{plist:"@%n-5ea3d5e17e.plist"},frames:{background_icon_current:"#%n-simple-background_icon_35.png",background_icon_next:"#%n-simple-background_icon_36.png"}},simple_background_36:{urls:{background:"@background_36-8cf9e2803d.jpg",png:"@%n-50c7813249.png",json:"@%n-9f486eee28.json"},jsons:{plist:"@%n-50c7813249.plist"},frames:{background_icon_current:"#%n-simple-background_icon_36.png",
background_icon_next:"#%n-simple-background_icon_37.png"}},simple_background_37:{urls:{background:"@background_37-f9943fbbd7.jpg",png:"@%n-2a96239877.png",json:"@%n-5ef3fc6182.json"},jsons:{plist:"@%n-2a96239877.plist"},frames:{background_icon_current:"#%n-simple-background_icon_37.png",background_icon_next:"#%n-simple-background_icon_38.png"}},simple_background_38:{urls:{background:"@background_38-495d741770.jpg",png:"@%n-3c33834436.png",json:"@%n-b18b0cff2d.json"},jsons:{plist:"@%n-3c33834436.plist"},frames:{background_icon_current:"#%n-simple-background_icon_38.png",background_icon_next:"#%n-simple-background_icon_39.png"}},simple_background_39:{urls:{background:"@background_39-55a5030513.jpg",png:"@%n-7f50d9eca9.png",json:"@%n-ea0cdd69cb.json"},jsons:{plist:"@%n-7f50d9eca9.plist"},frames:{background_icon_current:"#%n-simple-background_icon_39.png",background_icon_next:"#%n-simple-background_icon_40.png"}},simple_background_4:{urls:{background:"@background_4-315ad746c4.jpg",
png:"@%n-118c8bb0e8.png",json:"@%n-2da7980bc5.json"},jsons:{plist:"@%n-118c8bb0e8.plist"},frames:{background_icon_current:"#%n-simple-background_icon_4.png",background_icon_next:"#%n-simple-background_icon_5.png"}},simple_background_40:{urls:{background:"@background_40-b8c8deb209.jpg",png:"@%n-7df2f714ec.png",json:"@%n-1e9be517dc.json"},jsons:{plist:"@%n-7df2f714ec.plist"},frames:{background_icon_current:"#%n-simple-background_icon_40.png",background_icon_next:"#%n-simple-background_icon_41.png"}},simple_background_41:{urls:{background:"@background_41-658b9b5338.jpg",png:"@%n-b21967a4a2.png",json:"@%n-fee9f9463e.json"},jsons:{plist:"@%n-b21967a4a2.plist"},frames:{background_icon_current:"#%n-simple-background_icon_41.png",background_icon_next:"#%n-simple-background_icon_42.png"}},simple_background_42:{urls:{background:"@background_42-e8bbc72ff7.jpg",png:"@%n-e5b60ca410.png",json:"@%n-e2a440f577.json"},jsons:{plist:"@%n-e5b60ca410.plist"},frames:{
background_icon_current:"#%n-simple-background_icon_42.png",background_icon_next:"#%n-simple-background_icon_43.png"}},simple_background_43:{urls:{background:"@background_43-5cc7658119.jpg",png:"@%n-197938c24f.png",json:"@%n-e4716d9b51.json"},jsons:{plist:"@%n-197938c24f.plist"},frames:{background_icon_current:"#%n-simple-background_icon_43.png",background_icon_next:"#%n-simple-background_icon_44.png"}},simple_background_44:{urls:{background:"@background_44-93eeb7525d.jpg",png:"@%n-87abea8a24.png",json:"@%n-f952333fe4.json"},jsons:{plist:"@%n-87abea8a24.plist"},frames:{background_icon_current:"#%n-simple-background_icon_44.png",background_icon_next:"#%n-simple-background_icon_45.png"}},simple_background_45:{urls:{background:"@background_45-6192de0af6.jpg",png:"@%n-f85cb863e8.png",json:"@%n-76f5c137e2.json"},jsons:{plist:"@%n-f85cb863e8.plist"},frames:{background_icon_current:"#%n-simple-background_icon_45.png",background_icon_next:"#%n-simple-background_icon_46.png"}},
simple_background_46:{urls:{background:"@background_46-af81ec4e1e.jpg",png:"@%n-a81e2535f6.png",json:"@%n-53e75a0069.json"},jsons:{plist:"@%n-a81e2535f6.plist"},frames:{background_icon_current:"#%n-simple-background_icon_46.png",background_icon_next:"#%n-simple-background_icon_47.png"}},simple_background_47:{urls:{background:"@background_47-7435ff56a4.jpg",png:"@%n-db8e198d50.png",json:"@%n-6998bec358.json"},jsons:{plist:"@%n-db8e198d50.plist"},frames:{background_icon_current:"#%n-simple-background_icon_47.png",background_icon_next:"#%n-simple-background_icon_48.png"}},simple_background_48:{urls:{background:"@background_48-164ca9bdd9.jpg",png:"@%n-29e879da12.png",json:"@%n-50c9c653b9.json"},jsons:{plist:"@%n-29e879da12.plist"},frames:{background_icon_current:"#%n-simple-background_icon_48.png",background_icon_next:"#%n-simple-background_icon_49.png"}},simple_background_49:{urls:{background:"@background_49-6a73512951.jpg",png:"@%n-895ae76e24.png",json:"@%n-210fed430a.json"},jsons:{
plist:"@%n-895ae76e24.plist"},frames:{background_icon_current:"#%n-simple-background_icon_49.png",background_icon_next:"#%n-simple-background_icon_50.png"}},simple_background_5:{urls:{background:"@background_5-c66a088a83.jpg",png:"@%n-0ad2d27008.png",json:"@%n-08bbc3b0c7.json"},jsons:{plist:"@%n-0ad2d27008.plist"},frames:{background_icon_current:"#%n-simple-background_icon_5.png",background_icon_next:"#%n-simple-background_icon_6.png"}},simple_background_50:{urls:{background:"@background_50-8686fff612.jpg",png:"@%n-ab94e1e34b.png",json:"@%n-5e4cf30a86.json"},jsons:{plist:"@%n-ab94e1e34b.plist"},frames:{background_icon_current:"#%n-simple-background_icon_50.png",background_icon_next:"#%n-simple-background_icon_51.png"}},simple_background_51:{urls:{background:"@background_51-25d752d0fc.jpg",png:"@%n-2e3d311425.png",json:"@%n-36d21aad8b.json"},jsons:{plist:"@%n-2e3d311425.plist"},frames:{background_icon_current:"#%n-simple-background_icon_51.png",
background_icon_next:"#%n-simple-background_icon_52.png"}},simple_background_52:{urls:{background:"@background_52-e09aa77524.jpg",png:"@%n-b70b144c0a.png",json:"@%n-45fab7d5c4.json"},jsons:{plist:"@%n-b70b144c0a.plist"},frames:{background_icon_current:"#%n-simple-background_icon_52.png",background_icon_next:"#%n-simple-background_icon_53.png"}},simple_background_53:{urls:{background:"@background_53-b9c537c3d4.jpg",png:"@%n-bbf21ba604.png",json:"@%n-fe326aabaf.json"},jsons:{plist:"@%n-bbf21ba604.plist"},frames:{background_icon_current:"#%n-simple-background_icon_53.png",background_icon_next:"#%n-simple-background_icon_54.png"}},simple_background_54:{urls:{background:"@background_54-35df5d4c08.jpg",png:"@%n-741462884a.png",json:"@%n-c26b5370ae.json"},jsons:{plist:"@%n-741462884a.plist"},frames:{background_icon_current:"#%n-simple-background_icon_54.png",background_icon_next:"#%n-simple-background_icon_55.png"}},simple_background_55:{urls:{background:"@background_55-e14fe02553.jpg",
png:"@%n-35cac138f3.png",json:"@%n-dcba779a71.json"},jsons:{plist:"@%n-35cac138f3.plist"},frames:{background_icon_current:"#%n-simple-background_icon_55.png",background_icon_next:"#%n-simple-background_icon_56.png"}},simple_background_56:{urls:{background:"@background_56-4eb3da669b.jpg",png:"@%n-357951f075.png",json:"@%n-ccc11aa14b.json"},jsons:{plist:"@%n-357951f075.plist"},frames:{background_icon_current:"#%n-simple-background_icon_56.png",background_icon_next:"#%n-simple-background_icon_coming_soon.png"}},simple_background_6:{urls:{background:"@background_6-9918e9bcbe.jpg",png:"@%n-1bdc481d4c.png",json:"@%n-58d44cc421.json"},jsons:{plist:"@%n-1bdc481d4c.plist"},frames:{background_icon_current:"#%n-simple-background_icon_6.png",background_icon_next:"#%n-simple-background_icon_7.png"}},simple_background_7:{urls:{background:"@background_7-0b9297258b.jpg",png:"@%n-209f3f4fe8.png",json:"@%n-8d0f76d1ab.json"},jsons:{plist:"@%n-209f3f4fe8.plist"},frames:{
background_icon_current:"#%n-simple-background_icon_7.png",background_icon_next:"#%n-simple-background_icon_8.png"}},simple_background_8:{urls:{background:"@background_8-81150f9f01.jpg",png:"@%n-d11f10aaa0.png",json:"@%n-66bdc311ca.json"},jsons:{plist:"@%n-d11f10aaa0.plist"},frames:{background_icon_current:"#%n-simple-background_icon_8.png",background_icon_next:"#%n-simple-background_icon_9.png"}},simple_background_9:{urls:{background:"@background_9-7ea7d5f409.jpg",png:"@%n-690ebf7241.png",json:"@%n-bdb0b1483a.json"},jsons:{plist:"@%n-690ebf7241.plist"},frames:{background_icon_current:"#%n-simple-background_icon_9.png",background_icon_next:"#%n-simple-background_icon_10.png"}},slot_machine:{urls:{background:"@background-1d10a7e230.jpg",coins_reward_effect:"~sounds/coins_spin-24edd6119e.mp3",boosters_reward_effect:"~sounds/boosters_spin-424435af98.mp3",no_reward_effect:"~sounds/lose_spin-8830164a6f.mp3",reward_window_effect:"~sounds/reward_spin-45dfeb6aae.mp3",
spin_effect:"~sounds/spin-3839f1244c.mp3",spin_stop_effect:"~sounds/stop_spin-3cc3e3dfd8.mp3",button_click_effect:"~sounds/click_spin-1945c1f120.mp3",lights_effect:"~sounds/slot_lamp-b2768bc5f0.mp3",music:"~sounds/music_spin-7f938b4374.mp3",png:"@%n-0b92699f01.png",json:"@%n-7159935ca6.json"},jsons:{button_json:"@jsons/button-9782c5e07f.json",reward_json:"@jsons/reward-0cb897536f.json",reward_gold_json:"@jsons/reward_gold-651d4ad5ea.json",shine_json:"@jsons/shine-313ab43ee5.json",lights_json:"@jsons/lights-4166140383.json",flying_ad_json:"@jsons/flying_ad-35ce77d30b.json",plist:"@%n-0b92699f01.plist",atlas:"@%n-0b92699f01.atlas"},frames:{booster_13_png:"#%n-booster_13.png",booster_14_png:"#%n-booster_14.png",booster_15_png:"#%n-booster_15.png",coins_png:"#%n-coins.png",coin_png:"#%n-coin.png",arrow_png:"#%n-arrow.png",help_button_png:"#%n-help.png",help_button_on_png:"#%n-help_on.png",ticket_png:"#%n-ticket.png",tickets_buy_png:"#%n-tickets_buy.png",amount_bg_png:"#%n-amount_bg.png",
buy_button_png:"#%n-buy_button.png",buy_button_on_png:"#%n-buy_button_on.png",plus_png:"#%n-plus.png",plus_on_png:"#%n-plus_on.png",line_png:"#%n-line.png",point_png:"#%n-point.png",reward_bg_png:"#%n-reward_bg.png",buy_window_inner_bg_png:"#%n-buy_window_inner_bg.png",buy_window_title_png:"#%n-buy_window_title.png",buy_window_icon_png:"#%n-buy_window_icon.png",gold_small_png:"#%n-reward_icons-gold_small.png",reward_gold_png:"#%n-reward_icons-gold.png",hint_icon_png:"#%n-reward_icons-hint_icon.png",hint:"#%n-reward_icons-hint.png",eye:"#%n-reward_icons-eye.png",highlight:"#%n-reward_icons-highlight.png",hint_small:"#%n-reward_icons-hint_small.png",eye_small:"#%n-reward_icons-eye_small.png",highlight_small:"#%n-reward_icons-highlight_small.png",default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",
default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",
default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",
nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",
nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png"}},slot_machine_rules_window:{urls:{png:"@%n-5d4fdffd7b.png",json:"@%n-31181201a3.json"},jsons:{rules_json:"@jsons/rules-ba89c7cfb8.json",atlas:"@%n-5d4fdffd7b.atlas"}},sounds:{urls:{}},starchest_window:{urls:{}},starter_pack:{urls:{starter_pack_effect:"~sounds/%n-05f106e65a.mp3",png:"@%n-a866280d4b.png",json:"@%n-53509b5680.json"},jsons:{pack_json:"@jsons/%n-e798b083e7.json",atlas:"@%n-a866280d4b.atlas"}},stitches:{urls:{},injectTo:["tile_shop","main"],frameIds:["stitch_png","stitch_corner_png"],jsonIds:[],soundIds:[],unpackedIds:[]},store_links:{urls:{amazon_png:"@amazon-fff217ce99.png",ios_png:"@appstore-7ca2da36e4.png",android_png:"@googleplay-d959d72ee5.png"}},stuck_window:{urls:{}},subscription_window:{urls:{png:"@%n-d85b113082.png",json:"@%n-5d116b55fa.json"},jsons:{subscription_json:"@jsons/subscription_animation-da92b7d1d6.json",plist:"@%n-d85b113082.plist",atlas:"@%n-d85b113082.atlas"},frames:{
subscription_ribbon_png:"#%n-tile_shop-shop_purple_ribbon.png"}},temp_good_finish_window:{urls:{}},tile_shop:{urls:{badge_appear_effect:"~sounds/badge_appear-7102ce72e2.mp3",png:"@%n-740abba5ea.png",json:"@%n-8c54b31523.json"},jsons:{shop_sparkles_small_json:"@jsons/shop_sparkles_small-11e96d2c9e.json",shop_sparkles_large_json:"@jsons/shop_sparkles_large-cba75331e0.json",prev_icon_light_json:"@jsons/prem_light-4ac8cbc401.json",plist:"@%n-740abba5ea.plist",atlas:"@%n-740abba5ea.atlas"},frames:{shop_title:"#%n-shop_red_ribbon.png",shop_tile_bg_png:"#%n-shop_bg_white.png",feature_button_png:"#%n-feature_tile_button.png",feature_button_on_png:"#%n-feature_tile_button_on.png",feature_button_off_png:"#%n-feature_tile_button_off.png",shop_badge_bestseller_png:"#%n-shop_best_seller.png",more_button_png:"#%n-more_button.png",shop_gold1_png:"#%n-shop_coins_500.png",shop_gold2_png:"#%n-shop_coins_500.png",shop_gold3_png:"#%n-shop_coins_1800.png",heap_gold_png:"#%n-shop_coins_3800.png",
shop_gold4_png:"#%n-shop_coins_6000.png",shop_gold5_png:"#%n-shop_coins_25000.png",small_shop_button:"#%n-buttons-small_green_button.png",small_shop_button_on:"#%n-buttons-small_green_button_on.png",ok_icon_png:"#%n-socialicons-ok_icon.png",prem_crown:"#%n-prem_crown.png",prem_tile_icon:"#%n-prem_icon.png",prem_tile_bg:"#%n-prem_substrate.png",prem_rewards_bg:"#%n-prem_awards.png",shop_timer_icon_png:"#%n-timer.png",attention_png:"#%n-attention.png",gold_for_video_png:"#%n-gold_for_video.png",epic_pack_png:"#%n-epic_pack.png",honey_pack_png:"#%n-honey_pack.png",jam_pack_png:"#%n-jam_pack.png",sweet_pack_png:"#%n-sweet_pack.png",tasty_pack_png:"#%n-tasty_pack.png",shop_inner_bg_png:"#%n-shop_purple_ribbon.png",stitch_blue_png:"#%n-stitch_blue.png",stitch_corner_blue_png:"#%n-stitch_corner_blue.png",gold_small_png:"#%n-reward_icons-gold_small.png",reward_gold_png:"#%n-reward_icons-gold.png",hint_icon_png:"#%n-reward_icons-hint_icon.png",hint:"#%n-reward_icons-hint.png",
eye:"#%n-reward_icons-eye.png",highlight:"#%n-reward_icons-highlight.png",hint_small:"#%n-reward_icons-hint_small.png",eye_small:"#%n-reward_icons-eye_small.png",highlight_small:"#%n-reward_icons-highlight_small.png",adicon_png:"#%n-shared-adicon.png",adicon_bubble_png:"#%n-shared-adicon_bubble.png",default40pt_0:"#%n-neris-black-40pt-0.png",default40pt_1:"#%n-neris-black-40pt-1.png",default40pt_2:"#%n-neris-black-40pt-2.png",default40pt_3:"#%n-neris-black-40pt-3.png",default40pt_4:"#%n-neris-black-40pt-4.png",default40pt_5:"#%n-neris-black-40pt-5.png",default40pt_6:"#%n-neris-black-40pt-6.png",default40pt_7:"#%n-neris-black-40pt-7.png",default40pt_8:"#%n-neris-black-40pt-8.png",default40pt_9:"#%n-neris-black-40pt-9.png",default40pt_colon:"#%n-neris-black-40pt-colon.png",default40pt_slash:"#%n-neris-black-40pt-slash.png",default40pt_plus:"#%n-neris-black-40pt-plus.png",default40pt_minus:"#%n-neris-black-40pt-minus.png",default40pt_x:"#%n-neris-black-40pt-x.png",
default40pt_space:"#%n-neris-black-40pt-space.png",default90pt_0:"#%n-neris-black-90pt-0.png",default90pt_1:"#%n-neris-black-90pt-1.png",default90pt_2:"#%n-neris-black-90pt-2.png",default90pt_3:"#%n-neris-black-90pt-3.png",default90pt_4:"#%n-neris-black-90pt-4.png",default90pt_5:"#%n-neris-black-90pt-5.png",default90pt_6:"#%n-neris-black-90pt-6.png",default90pt_7:"#%n-neris-black-90pt-7.png",default90pt_8:"#%n-neris-black-90pt-8.png",default90pt_9:"#%n-neris-black-90pt-9.png",default90pt_colon:"#%n-neris-black-90pt-colon.png",default90pt_slash:"#%n-neris-black-90pt-slash.png",default90pt_plus:"#%n-neris-black-90pt-plus.png",default90pt_minus:"#%n-neris-black-90pt-minus.png",default90pt_x:"#%n-neris-black-90pt-x.png",default90pt_space:"#%n-neris-black-90pt-space.png",nostroke49pt_0:"#%n-neris-black-nostroke-49pt-0.png",nostroke49pt_1:"#%n-neris-black-nostroke-49pt-1.png",nostroke49pt_2:"#%n-neris-black-nostroke-49pt-2.png",nostroke49pt_3:"#%n-neris-black-nostroke-49pt-3.png",
nostroke49pt_4:"#%n-neris-black-nostroke-49pt-4.png",nostroke49pt_5:"#%n-neris-black-nostroke-49pt-5.png",nostroke49pt_6:"#%n-neris-black-nostroke-49pt-6.png",nostroke49pt_7:"#%n-neris-black-nostroke-49pt-7.png",nostroke49pt_8:"#%n-neris-black-nostroke-49pt-8.png",nostroke49pt_9:"#%n-neris-black-nostroke-49pt-9.png",nostroke49pt_colon:"#%n-neris-black-nostroke-49pt-colon.png",nostroke49pt_slash:"#%n-neris-black-nostroke-49pt-slash.png",nostroke49pt_plus:"#%n-neris-black-nostroke-49pt-plus.png",nostroke49pt_minus:"#%n-neris-black-nostroke-49pt-minus.png",nostroke49pt_x:"#%n-neris-black-nostroke-49pt-x.png",nostroke49pt_space:"#%n-neris-black-nostroke-49pt-space.png",nostroke90pt_0:"#%n-neris-black-nostroke-90pt-0.png",nostroke90pt_1:"#%n-neris-black-nostroke-90pt-1.png",nostroke90pt_2:"#%n-neris-black-nostroke-90pt-2.png",nostroke90pt_3:"#%n-neris-black-nostroke-90pt-3.png",nostroke90pt_4:"#%n-neris-black-nostroke-90pt-4.png",nostroke90pt_5:"#%n-neris-black-nostroke-90pt-5.png",
nostroke90pt_6:"#%n-neris-black-nostroke-90pt-6.png",nostroke90pt_7:"#%n-neris-black-nostroke-90pt-7.png",nostroke90pt_8:"#%n-neris-black-nostroke-90pt-8.png",nostroke90pt_9:"#%n-neris-black-nostroke-90pt-9.png",nostroke90pt_colon:"#%n-neris-black-nostroke-90pt-colon.png",nostroke90pt_slash:"#%n-neris-black-nostroke-90pt-slash.png",nostroke90pt_plus:"#%n-neris-black-nostroke-90pt-plus.png",nostroke90pt_minus:"#%n-neris-black-nostroke-90pt-minus.png",nostroke90pt_x:"#%n-neris-black-nostroke-90pt-x.png",nostroke90pt_space:"#%n-neris-black-nostroke-90pt-space.png",lottery_en:"#%n-lottery-lottery_en.png",lottery_ru:"#%n-lottery-lottery_ru.png",ok_lottery:"#%n-lottery-ok_lottery.png",ok_lottery_10k:"#%n-lottery-ok_lottery_10000.png",vk_lottery:"#%n-lottery-vk_lottery.png",stitch_png:"#%n-stitches-stitch.png",stitch_corner_png:"#%n-stitches-stitch_corner.png"}},tiles:{urls:{}},toolbar:{urls:{},injectTo:["main"],frameIds:["%n_bg_png","%n_attention_icon_png","%n_dailybonus_icon_png",
"%n_daily_tasks_icon_png","%n_mail_icon_png","%n_leader_board_icon_png","%n_bonusround_icon_png"],jsonIds:[],soundIds:[],unpackedIds:[]},tooltip:{urls:{},injectTo:["game","main"],frameIds:["%n_bg_png","%n_shadow_arrow_png","%n_arrow_png"],jsonIds:[],soundIds:[],unpackedIds:[]},transition:{urls:{},injectTo:["main"],frameIds:[],jsonIds:["%n_json"],soundIds:[],unpackedIds:[]},treasuresearch:{urls:{png:"@%n-06314b1ed2.png",json:"@%n-9b39884fdc.json"},jsons:{weed:"@jsons/weed-cf6fe91384.json",hover:"@jsons/hover-927b682bda.json",holder:"@jsons/flowers-b7807f3268.json",clouds:"@jsons/gem_clouds-92a501fe55.json",prize:"@jsons/treasure_prize-7f251e374a.json",hero:"@jsons/gardencat-3c98c2678c.json",plist:"@%n-06314b1ed2.plist",atlas:"@%n-06314b1ed2.atlas"},frames:{bg:"#%n-treasure_search-win_bg.png",tile:"#%n-treasure_search-ground.png",shovel:"#%n-treasure_search-shovel.png",tray:"#%n-treasure_search-tray.png",amount_bg:"#%n-treasure_search-amount_bg.png"}},tulpan_tournament:{urls:{}},
valentines:{urls:{png:"@%n-41cdaa18bd.png",json:"@%n-cda2864e69.json"},jsons:{hero_json:"@jsons/hero-adf67291d1.json",letter_rules_json:"@jsons/letter_rules-c51077d7c6.json",mission_window_json:"@jsons/mission_window-56fe5896f0.json",plist:"@%n-41cdaa18bd.plist",atlas:"@%n-41cdaa18bd.atlas"},frames:{valentines_decor_cloud_2_png:"#%n-menu_bar_plus_icon.png",valentines_decor_cloud_3_png:"#%n-scene_button_icon.png",mission_icon_png:"#%n-mission_letter.png",mission_star0_png:"#%n-mission_star_0.png",mission_star1_png:"#%n-mission_star_1.png",valentines_decor_top_png:"#%n-decor_window_top.png",valentines_decor_bottom_png:"#%n-decor_window_bottom.png",valentines_decor_progress_png:"#%n-decor_progress.png"}},victorywindow:{urls:{png:"@%n-ed7cde7bcc.png",json:"@%n-122ee49d54.json"},jsons:{victory_json:"@jsons/victory-707484cbf6.json",plist:"@%n-ed7cde7bcc.plist",atlas:"@%n-ed7cde7bcc.atlas"},frames:{level_victory_reward_bg:"#%n-victory-reward_bg.png"}},vip_window:{urls:{
png:"@%n-3b7800003f.png",json:"@%n-d3ca712549.json"},jsons:{vip_title_json:"@jsons/vip_title-ae9182ab16.json",vip_icon_json:"@jsons/vip-4c0f9f1595.json",plist:"@%n-3b7800003f.plist",atlas:"@%n-3b7800003f.atlas"},frames:{vip_progress_background:"#%n-progress_background.png",vip_progress_bar:"#%n-progressbar.png"}},wardrobe_window:{urls:{png:"@%n-0cef42fae8.png",json:"@%n-6cd9bcd371.json"},jsons:{plist:"@%n-0cef42fae8.plist"},frames:{window_table_bg:"#%n-wardrobe-ny_inner_bg.png",progress_bg:"#%n-wardrobe-bar_0.png",progress_fill:"#%n-wardrobe-bar_1.png"}},windows:{urls:{},injectTo:["main"],frameIds:["window_bg_png"],jsonIds:["present_json"],soundIds:[],unpackedIds:[]},world_map:{urls:{}},xmas:{urls:{png:"@%n-74a00febe5.png",json:"@%n-6a1305f11a.json"},jsons:{hero_json:"@jsons/hero-594d0c60a4.json",decor_window_top:"@jsons/decor_window_top-ae119aece0.json",decor_progress:"@jsons/decor_progress-5bcb42b91d.json",wardrobe_sidebar_icon_json:"@jsons/wardrobe_icon-8eb4f38b7b.json",
mission_window_json:"@jsons/mission_window-6a88c155c0.json",letter_rules_json:"@jsons/abc_tournament_help-cca30f33f7.json",plist:"@%n-74a00febe5.plist",atlas:"@%n-74a00febe5.atlas"},frames:{decor_snow_1:"#%n-decor_snow_1.png",decor_snow_2:"#%n-decor_snow_2.png",decor_window_bottom:"#%n-decor_window_bottom.png",window_banner:"#%n-wardrobe-ny_banner.png",stage1_icon:"#%n-icons-skin1.png",stage2_icon:"#%n-icons-skin2.png",stage3_icon:"#%n-icons-skin3.png",stage4_icon:"#%n-icons-skin4.png",stage5_icon:"#%n-icons-skin5.png",stage6_icon:"#%n-icons-skin6.png",stage7_icon:"#%n-icons-skin7.png",stage8_icon:"#%n-icons-skin8.png",stage9_icon:"#%n-icons-skin9.png",stage10_icon:"#%n-icons-skin10.png",mission_letter_png:"#%n-mission-mission_icon.png",mission_star0_png:"#%n-mission-mission_star_0.png",mission_star1_png:"#%n-mission-mission_star_1.png"}}},buildConfig={resolutions:{h1200plinga:{scale:.9,id:"h1200plinga",height:1200,options:{pngcrush:!0,depth:6}}},target:"plinga",env:"release",
archiveUpload:1,buildDir:"publish/plinga"},resolutions=buildConfig.resolutions,unmifiyBundlesRec=function(e,t,s){var n=e[t];if("object"==typeof n)for(var i in n)unmifiyBundlesRec(n,i,s);else"string"==typeof n&&(n=(n=(n=n.replace("@","~%n/%r/")).replace("~","res/packed/")).replace(new RegExp("%n","g"),s),"undefined"!=typeof unpackedBundles&&unpackedBundles[s]&&unpackedBundles[s][e[t]]&&(unpackedMap[n]=unpackedBundles[s][e[t]]),e[t]=n)},isVirtualLink=function(e){return"string"==typeof e&&"@"===e.charAt(0)},parseVirtualLink=function(e){return{bundle:e.substr(1,e.indexOf("#")-1),id:e.substr(e.lastIndexOf("#")+1)}},processVirtualUrl=function(e,t){if(!isVirtualLink(e))return e;var s=parseVirtualLink(e),n=bundles[s.bundle];for(var i in n.injectTo){var o=n.injectTo[i];if(cleverapps.bundleLoader.isLoaded(o))return bundles[o].urls[s.id]}if(t&&t.useUnusedBundles)for(var i in n.injectTo){o=n.injectTo[i];if(cleverapps.bundleLoader.isUnused(o))return bundles[o].urls[s.id]}
var a="no urlId "+e+" for bundle "+s.bundle;if(console.log(a),cleverapps.config.debugMode)throw a},getVirtualLinkType=function(e){return e.split("#")[1]},processVirtualImage=function(e,t){if(!isVirtualLink(e))return e;var s=getVirtualLinkType(e);return"frame"===s?processVirtualFrame(e,t):"url"===s?processVirtualUrl(e):void 0},processVirtualFrame=function(e,t){if(!isVirtualLink(e))return e;var s=parseVirtualLink(e),n=bundles[s.bundle].injectTo;for(var i in Array.isArray(t)&&(n=cleverapps.intersect(n,t).concat(n)),n){var o=n[i];if(cleverapps.bundleLoader.isLoaded(o))return bundles[o].frames[s.id]}var a="no frameId "+e+" for bundle "+s.bundle;if(console.log(a),cleverapps.config.debugMode)throw a},processVirtualJson=function(e){if(!isVirtualLink(e))return e;var t=parseVirtualLink(e),s=bundles[t.bundle];for(var n in s.injectTo){var i=s.injectTo[n];if(cleverapps.bundleLoader.isLoaded(i))return bundles[i].jsons[t.id]}var o="no json "+e+" for bundle "+t.bundle;if(console.log(o),
cleverapps.config.debugMode)throw o},processInlineJSONs=function(e){for(var t in e.jsons){var s=e.jsons[t];if(s.inline){var n=JSON.parse(s.data),i=s.url;cc.loader.cache[i]=n,e.jsons[t]=i}}},unminifyBundles=function(e){for(var t in e=e||Object.keys(bundles)){var s=e[t];unmifiyBundlesRec(bundles,s,s),bundles[s].frames||(bundles[s].frames={}),bundles[s].jsons||(bundles[s].jsons={}),processInlineJSONs(bundles[s]);var n=bundles[s];n.injectTo&&n.frameIds&&(n.frameIds.forEach(function(e){n.frames[e]="@"+s+"#frame#"+e}),delete n.frameIds),n.injectTo&&n.jsonIds&&(n.jsonIds.forEach(function(e){n.jsons[e]="@"+s+"#json#"+e}),delete n.jsonIds),n.injectTo&&n.soundIds&&(n.soundIds.forEach(function(e){n.urls[e]="@"+s+"#url#"+e}),delete n.soundIds),n.injectTo&&n.unpackedIds&&(n.unpackedIds.forEach(function(e){n.urls[e]="@"+s+"#url#"+e}),delete n.unpackedIds)}"undefined"!=typeof unpackedBundles&&(unpackedBundles=void 0,delete unpackedMap[bundles.dev_resources.frames.border])};unminifyBundles(),
ResourceProcessor.addStaticUrl();var Bundle=function(e){this.name=e,this.data=bundles[e]};Bundle.prototype.onLoad=function(e){e=e||function(){};var t=cc.loader.getRes(this.data.urls.json);for(var s in t){var n=this.data.jsons[s],i=t[s];"string"==typeof n&&".plist"===cc.path.extname(n)&&(i=cc.plistParser.parse(i)),cc.loader.cache[n]=i}this.data.jsons.plist?cleverapps.isPixiJs()?cc.spriteFrameCache.addSpriteFrames(this.data.jsons.plist,this.data.urls.png,this.data.jsons.atlas,e):(cc.spriteFrameCache.addSpriteFrames(this.data.jsons.plist),e()):e()},Bundle.prototype.isResourceSound=function(e){return!!e&&(e.music||"string"==typeof e&&(-1!==e.indexOf("/sfx/")||-1!==e.indexOf(".mp3")))},Bundle.prototype.listSoundUrls=function(){return cc.sys.isWebViewAudio?[]:cleverapps.values(this.data.urls).filter(function(e){return this.isResourceSound(e)&&!isVirtualLink(e)}.bind(this))},Bundle.prototype.listUrls=function(){return cleverapps.values(this.data.urls).filter(function(e){if(
"playable"===cleverapps.config.source){if("string"==typeof e&&(void 0!==cc.loader.cache[e]||-1!==e.indexOf(".json")))return!1;if(e&&"font"===e.type)return!1}return!this.isResourceSound(e)&&!isVirtualLink(e)}.bind(this))},Bundle.prototype.listJsons=function(){return cleverapps.values(this.data.jsons)},Bundle.prototype.injectTo=function(t){["urls","frames","jsons"].forEach(function(e){cleverapps.extend(t,this.data[e])},this)};var BundleLoader=function(){this.handles={},this.blockedCounter=0,this.unusedResources={},this.unusedBundles={},this.waitWindow=void 0,this.onceFinishLoadCallback=void 0};BundleLoader.prototype.whenLoadFinish=function(e){0===this.blockedCounter?e():this.onceFinishLoadCallback=cleverapps.once(e)},BundleLoader.prototype.addBlockWindow=function(){if(0===this.blockedCounter){var e=cc.director.getRunningScene();e&&e.scene&&!cleverapps.scenes.isLoaderScene()&&!this.waitWindow&&"playable"!==cleverapps.config.source&&(this.waitWindow=new WaitWindow)}this.blockedCounter++},
BundleLoader.prototype.removeBlockWindow=function(){this.blockedCounter--,this.blockedCounter<=0&&(this.waitWindow&&(this.waitWindow.close(),this.waitWindow=void 0),this.onceFinishLoadCallback&&this.onceFinishLoadCallback())},BundleLoader.prototype.onFailure=function(e,t){var s=this.getHandle(e),n=s&&s.onFailures;cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAIL_BUNDLE+e),s&&s.blocked?(this.waitWindow&&(this.waitWindow.close(),this.waitWindow=!1),new RestartWindow):this.deleteBundle(e,!0),cleverapps.versionChecker.isClientVersionActual()&&!cleverapps.config.debugMode&&cleverapps.checkStatus(t,404)&&setTimeout(function(){throw"load actual bundle "+e+" 404 error"},0),n&&n.forEach(function(e){e(t)})},BundleLoader.prototype.loadBundles=function(e,t){var s=t&&t.onSuccess||function(){},n=t&&t.onFailure,i=cleverapps.wait(e&&e.length||0,s);n&&(n=cleverapps.once(n));for(var o=0;o<e.length;o++){var a={onSuccess:i,onFailure:n,blocked:t&&t.blocked};this.loadBundle(e[o],a)}},
BundleLoader.prototype.getHandle=function(e){return this.handles[e]},BundleLoader.prototype.countLoaded=function(e){if(Array.isArray(e))return e.filter(function(e){return this.countLoaded(e)}.bind(this)).length;var t=this.getHandle(e);return t&&t.loaded?1:0},BundleLoader.prototype.isLoaded=function(e){return Array.isArray(e)||(e=[e]),this.countLoaded(e)===e.length},BundleLoader.prototype.loadBundle=function(t,e){if(t&&t.loadBundle)t.loadBundle(e);else{var s=bundles[t],n=this.getHandle(t),i=(e=e||{}).onSuccess,o=e.onFailure,a=e.blocked;if(n)return n.counter++,void(n.loaded?i&&i(s):(i&&n.onSuccesses.push(i),o&&n.onFailures.push(o),!n.blocked&&a&&(n.blocked=!0,this.addBlockWindow())));var r=[];i&&(r=Array.isArray(i)?i:[i]);var l=[];o&&(l=Array.isArray(o)?o:[o]);var c={loaded:!1,counter:1,onSuccesses:r,onFailures:l,blocked:a};if(this.handles[t]=c,a&&this.addBlockWindow(),c.onLoadedUrls=cleverapps.once(function(){c.loaded=!0,c.blocked&&this.removeBlockWindow(),new Bundle(t).onLoad(function(
){for(var e=0;e<c.onSuccesses.length;e++)r[e].call(this,s);delete c.onSuccesses,delete c.onFailures,delete c.blocked})}.bind(this)),bundles[t].injectTo)c.onLoadedUrls();else{var p=3,d=function(){if(this.getHandle(t)){var e=cc.game.config.noCache;s.noCache&&!e&&(cc.game.config.noCache=!0),cc.loader.load(new Bundle(t).listUrls(),function(e){e?(console.log("load failed",e,JSON.stringify(new Bundle(t).listUrls())),p<=1||cleverapps.checkStatus(e,404)?cleverapps.versionChecker.loadClientVersion(function(){this.onFailure(t,e)}.bind(this)):(p--,d())):(c.onLoadedUrls(),cc.loader.load(new Bundle(t).listSoundUrls()))}.bind(this)),cc.game.config.noCache=e}}.bind(this);d()}}},BundleLoader.prototype.checkUrlUseInLoadedBundles=function(e){for(var t in this.handles){var s=new Bundle(t),n=s.listUrls().concat(s.listSoundUrls());for(var i in n)if(n[i]===e)return!0}return!1},BundleLoader.prototype.deleteBundles=function(e){if(e)for(var t=0;t<e.length;t++)this.deleteBundle(e[t])},
BundleLoader.prototype.deleteBundle=function(e,t){var s=this.handles[e];if(void 0!==s&&-1===["main","transition","episodes_resources"].indexOf(e)&&(s.counter--,!(0<s.counter||bundles[e].storage)))if(bundles[e].injectTo)delete this.handles[e];else{t||s.loaded||!s.blocked||console.log("Remove blocked loading bundle (maybe error!)",e),s.loaded&&this.clearOverrides(s);var n=new Bundle(e),i=n.listUrls().concat(n.listSoundUrls());for(var o in s.onLoadedUrls=function(){},delete this.handles[e],i){var a=i[o];this.checkUrlUseInLoadedBundles(a)||(this.unusedResources[a]=!0)}this.unusedBundles[e]=!0}},BundleLoader.prototype.override=function(e,t,s,n){e.overrides=e.overrides||new OverridesContainer,e.overrides.override(t,s,n)},BundleLoader.prototype.clearOverrides=function(e){e.overrides&&(e.unoverride(),delete e.overrides)},BundleLoader.prototype.isUnused=function(e){return!this.isLoaded(e)&&this.unusedBundles[e]},BundleLoader.prototype.clearUnusedResources=function(){if(0!==Object.keys(
this.unusedBundles).length){var e=this.unusedResources;for(var t in e)if(!this.checkUrlUseInLoadedBundles(t)){var s=cc.textureCache.getTextureForKey(t);s&&(cc.spriteFrameCache.removeSpriteFramesFromTexture(s),cc.textureCache.removeTextureForKey(t)),cc.loader.release(t)}this.unusedResources={},Object.keys(this.unusedBundles).forEach(function(e){bundles[e].injectTo||this.handles[e]||new Bundle(e).listJsons().forEach(function(e){delete cleverapps.Spine.cache[e]})}.bind(this)),this.unusedBundles={}}},BundleLoader.prototype.getClassBundles=function(e,t,s){var n=[];return"function"==typeof e.BUNDLES?n=e.BUNDLES.apply(t,s):Array.isArray(e.BUNDLES)&&(n=e.BUNDLES),cleverapps.skins.getBundle()&&n.push(cleverapps.skins.getBundle()),n},BundleLoader.prototype.allLoaded=function(e){return 0===e.filter(function(e){return bundles[e]&&!this.isLoaded(e)},this).length};var cleverapps_events={APP_INITIALIZE:"app_initialize",DATALOADER_CHECKSUM_MATCH:"dataloader_checksum_match",
DATALOADER_CHECKSUM_DIFFERENT:"dataloader_checksum_different",PUSH_IOS:"push_ios",BEFORE_LEAVE_WINDOW:"before_leave_window",BEFORE_LEAVE_CATCH:"before_leave_catch",BOOKMARK:"bookmark",JOIN_GROUP:"join_group",AD_READY:"ad_ready",AD_START:"ad_start",AD_FINISH:"ad_finish",HINT_USED:"hint_used",REWARD_RECEIVED:"reward_received",SHOP_OPEN:"shop_open",TILE_SHOP_OPEN:"tile_shop_open",DAU:"dau",DAU_LANGUAGE:"dau_language",USER_GOLD_DAU:"user_gold_dau",UNIQUE_START:"lev_start",UNIQUE_FINISH:"lev_finish",ERROR_AMOUNT:"error_amount",DAU_WFRIENDS_0:"dau_wfriends_0",DAU_WFRIENDS_1:"dau_wfriends_1",DAU_WFRIENDS_2:"dau_wfriends_2",DAU_WFRIENDS_3:"dau_wfriends_3",DAU_WFRIENDS_4:"dau_wfriends_4",DAU_WFRIENDS_5:"dau_wfriends_5",RETENTION_0:"retention_0",RETENTION_1:"retention_1",RETENTION_2:"retention_2",RETENTION_3:"retention_3",RETENTION_7:"retention_7",RETENTION_14:"retention_14",RETENTION_30:"retention_30",PRODUCT_BOUGHT:"product_bought",PRODUCT_BOUGHT_LANGUAGE:"product_bought_language",
PURCHASE_VALIDATE_SUCCESS:"purchase_validate_success",PURCHASE_VALIDATE_FAILURE:"purchase_validate_failure",MOVES_SHOW:"moves_show",MOVES_BOUGHT:"moves_bought",MOVES_USED_FORCE:"moves_used_force",UNDO_USED:"undo",UNDO_USED_FORCE:"undo_force",BOMB_MOVES_BOUGHT:"bomb_moves_bought",LIVES_BOUGHT:"lives_bought",SHOP_BOUGHT:"shop",SHOP_BOUGHT_AMOUNT:"shop_amount",BONUS_WORKER_BOUGHT:"bonus_worker_bought",BONUS_WORKER_FOR_ADS:"bonus_worker_for_ads",SOFT_CURRENCY_BUY:"soft_buy",SOFT_CURRENCY_COST:"soft_cost",SHARE:"share",SHARE_ITEM:"share_item",BOOSTERS_BOUGHT:"boosters_bought",BOOSTERS_BOUGHT_ITEM:"boosters_bought_item",BOOSTERS_EXECUTE:"boosters_execute",STAR_CHEST_OPEN:"star_chest_open",STAR_CHEST_OPEN_ITEM:"star_chest_open_item",DAILY_BONUS:"daily_bonus",DAILY_BONUS_DOUBLE:"daily_bonus_double",UNITS_SHOP_RUBY:"units_shop_ruby",UNITS_SHOP_COINS:"units_shop_coins",UNITS_SHOP_ITEM:"units_shop_item",UNITS_SHOP_ITEM_ADS:"units_shop_item_ads",SPECIAL_OFFER_COUNT:"special_offer_count",
SPECIAL_OFFER_BUY:"special_offer_buy",SPECIAL_OFFER_RUBY:"special_offer_ruby",SPEND_WANDS:"spend_wands",SPEND_WANDS_KRAKEN_AVAILABLE:"spend_wands_kraken_available",SPEND_WANDS_KRAKEN_ACTIVE:"spend_wands_kraken_active",COLLECT_WANDS_KRAKEN_AVAILABLE:"collect_wands_kraken_available",COLLECT_WANDS_KRAKEN_ACTIVE:"collect_wands_kraken_active",KRAKEN_ACTIVE_REFRESHES:"kraken_active_refreshes",KRAKEN_AVAILABLE_REFRESHES:"kraken_available_refreshes",MONSTER_BATTLE:"monster_battle",MONSTER_SPAWN:"monster_spawn",MONSTER_DIE:"monster_die",OPEN_CHEST_ADS_COUNT:"open_chest_ads_count",WORKER_SPEEDUP_ADS_COUNT:"worker_speedup_ads_count",TELLY_ADS_COUNT:"telly_ads_count",FEAST_PACK_BUY:"_feast_pack_buy",FEAST_PACK_RUBY:"_feast_pack_ruby",MONEY_FOG_RUBY:"money_fog_ruby",MONEY_FOG:"money_fog",GUN_FORCE:"gun_force",DAILY_TASKS_FORCE:"daily_tasks_force",FREE_HINT_FORCE:"free_hint_force",FREE_PAINT_FORCE:"free_paint_force",HEROES_AVAILABLE_FORCE:"heroes_available_force",LANTERN_FORCE:"lantern_force",
FIRST_BOOSTERS_BEFORE:"first_boosters_before",SECOND_BOOSTERS_BEFORE:"second_boosters_before",THIRD_BOOSTERS_BEFORE:"third_boosters_before",FREE_WILDCARD_FORCE:"free_wildcard_force",FREE_UNDO_FORCE:"free_undo_force",FREE_ADD_MOVES_FORCE:"free_add_moves_force",MOVES_FOR_BUY_SUCCESS:"moves_for_buy_success",MOVES_FOR_BUY_SHOW:"moves_for_buy_show",LIVES_FOR_VIDEO_SUCCESS:"lives_for_video_success",LIVES_FOR_VIDEO_SHOW:"lives_for_video_show",COINS_FOR_VIDEO_SUCCESS:"coins_for_video_success",COINS_FOR_VIDEO_SHOW:"coins_for_video_show",HINT_FOR_INVITE_SUCCESS:"hint_for_invite_success",HINT_FOR_INVITE_SHOW:"hint_for_invite_show",SIGN_IN_REWARD:"sign_in_reward",HELP_BY_FIVE_ATTEMPTS:"help_by_five_attemts",HELP_BY_ATTEMPTS_DAU:"help_by_attemts_dau",HELP_BY_ATTEMPTS_ONE_AND_MORE:"help_by_attemts_1_and_more",HELP_BY_ATTEMPTS_THREE_AND_MORE:"help_by_attemts_3_and_more",HELP_BY_ATTEMPTS_FIVE_AND_MORE:"help_by_attemts_5_and_more",FREE_MOVES:"free_moves",FREE_BOMB_MOVES:"free_bomb_moves",
RATE_WINDOW:"rate_window",RATE_SEND:"rate_send",RATE_1:"rate_1",RATE_2:"rate_2",RATE_3:"rate_3",RATE_4:"rate_4",RATE_5:"rate_5",TUTORIAL_STEP_1:"tutorial_step_1",TUTORIAL_STEP_2:"tutorial_step_2",TUTORIAL_STEP_3:"tutorial_step_3",TUTORIAL_COMPLETED:"fb_mobile_tutorial_completion",LEVEL_PASS_EVENT:"level_passed",LEVEL_START:"level_start",LEVEL_FINISH:"level_finish",LEVEL_GIVEUP:"level_giveup",ACHIEVED_LEVEL:"fb_mobile_level_achieved",LEVEL_PASSED_TIME:"level_passed_time",LEVEL_STARS:"level_stars",LEVEL_LEFT_MOVES:"level_left_moves",LEVEL_UP:"level_up",LEVEL_FPS:"level_fps",PLAY_TIMES:"play_times",MESSAGE_SENT_FRIEND:"message_friend",MESSAGE_SENT_INVITE:"message_invite",MESSAGE_SENT_PREFIX:"message_sent_",MESSAGE_CANCEL_PREFIX:"message_cancel_",MESSAGE_ERROR:"message_error",FAKEFB_BY_TIMEOUT:"fakefb_by_timeout",FAKEFB_BY_SCRIPT_ERROR:"fakefb_by_script_error",FACEBOOK_INITED:"facebook_inited",PAYER_PROMO_FOUND:"payer_promo_found",PAYER_PROMO_SHOW:"payer_promo_show",
PAYER_PROMO_BUY:"payer_promo_buy",PAYER_PROMO_DONE:"payer_promo_done",BOUNTY_OPENED:"bounty_opened",PACKWINDOW_OPENED:"packwindow_opened",PACK_STARTED:"pack_started",PACK_BOUGHT:"pack_bought",PACK_BOUGHT_WITH_PAYMENT:"pack_bought_with_payment",FREE_HINT_SHOWED:"free_hint_showed",TOURNAMENT_LEVEL_PLACE:"tournament_level_place",FPS_AUTO:"fps_auto",FPS_LOW:"fps_low",FPS_HIGH:"fps_high",REWARDED_AVAILABLE:"rewarded_available",REWARDED_WATCHED:"rewarded_watched",VIP_REWARDED_WATCHED:"vip_rewarded_watched",VIP_REWARDED_DAU:"vip_rewarded_dau",MAKE_CHOICE:"make_choice",REDO_CHOICE:"redo_choice",BUY_CHOICE:"buy_choice",REWARDED_CHOICE:"rewarded_choice",REWARDED_SHARE:"rewarded_share_1",REWARDED_ADD_LIVES:"rewarded_add_lives_1",REWARDED_ADD_COINS:"rewarded_add_coins_1",REWARDED_DAILY_BONUS:"rewarded_dailybonus_1",REWARD_BUY:"reward_buy",LEADERS_WINDOW_OPEN:"leaders_window_open",NEW_LEAGUE:"new_league",PERIODIC_BONUS_FORCE:"periodic_bonus_force",BONUS_ROUND_FORCE:"bonus_round_force",
GIVEUP_ATTENTION:"giveup_attention",GIVEUP_MISSION:"giveup_mission",GIVEUP_CHANGE:"giveup_change",GIVEUP_ATTENTION_NEARLY:"giveup_attention1",GIVEUP_CHANGE_NEARLY:"giveup_change1",SESSION_DAILY_TASK_AVAILABLE:"session_daily_task_available",SESSION_DAILY_TASK_FINISH:"session_daily_task_finish",SESSION_DAILY_TASK_REWARD:"session_daily_task_reward",SESSION_DAILY_TASK_OPEN_WINDOW:"session_daily_task_open_window",DAILY_TASK_REWARD:"daily_task_rewarded",DAILY_TASK_FINISH_AMOUNT:"daily_task_finish_amount",DAILY_TASKS_OPEN_WINDOW:"daily_tasks_open_window",DAILY_TASKS_START:"daily_tasks_start",SPEND_COINS:"spend_coins",FB_SPEND_COINS:"fb_mobile_spent_credits",FBLOGINORINVITE_LOGIN:"extra_login",FBLOGINORINVITE_INVITE:"extra_invite",HIGHSCORE_INVITE:"extra_highscore_invite",BOOSTER_CELL_ADDED:"booster_cell_added",BOOSTER_CELL_COLLECTED:"booster_cell_collected",BOOSTER_CELL_RECEIVED:"booster_cell_recevied",BUY_MOVES:"buy_moves_",MISSION_FINISH:"mission_finish",COMBO_PRIZE:"combo_3",
COOKIEJAR_REWARD:"cookiejar_reward",GUN_SHOT_FORCE:"gunshotforce",GUN_SHOT:"gunshot",FAIL_BUNDLE:"fail_bundle_",PIGGY_BANK:"piggy_bank",PIGGY_BANK_LEVEL:"piggy_bank_level_",ACTIVE_TIME:"active_time",CHRISTMAS_FORCE:"christmas_force",CRYPTEX_REWARD:"cryptex_reward",CRYPTEX_FAIL:"cryptex_fail",WIN_KNOCKOUT:"win_knockout",LOSE_KNOCKOUT:"lose_knockout",SUBSCRIPTION_WINDOW_OPEN:"subscription_window_open",SUBSCRIPTION_REWARD:"subscription_reward",SUBSCRIPTION_BOUGHT:"subscription_bought",SUBSCRIPTION_CANCELLED:"subscription_cancelled",DAILY_CUP_REWARD:"daily_cup_reward",DAILY_CUP_DAU:"daily_cup_dau",DAILY_CUP_PLAYERS:"daily_cup_players",INSTANT_SHORTCUT_SHOW:"instant_shortcut_show",INSTANT_SHORTCUT:"instant_shortcut",INSTANT_BOT_SHOW:"instant_bot_show",INSTANT_BOT_ERROR:"instant_bot_error",INSTANT_BOT:"instant_bot",INSTANT_UPDATE:"instant_update",INSTANT_PAYMENT:"instant_payment_",INSTANT_CONSUME:"instant_consume_",MISSION_DAU:"mission_dau",MISSION_START_DAU:"mission_start_dau",
FAVORITE_REGULAR:"favorite_regular",FAVORITE_PRODUCT_BOUGHT:"favorite_sale_product_bought",LANTERN_COMBO_NO_PLACE:"lantern_combo_no_place",LANTERN_MULTICOLOR_NO_PLACE:"lantern_multicolor_no_place",BOOSTER_COMBO_NO_PLACE:"booster_combo_no_place",BOOSTER_MULTICOLOR_NO_PLACE:"booster_multicolor_no_place",BATTLE_PASS_FINISH_TASK:"battle_pass_finish_task",BATTLE_PASS_RECEIVED:"battle_pass_received",BATTLE_PASS_RECEIVED_PREMIUM:"battle_pass_received_premium",BATTLE_PASS_BOUGHT:"battle_pass_bought",METHA_ITEM:"metha_item",METHA_LEVEL:"metha_level",MINIGAME_FINISH:"minigame_finish",MINIGAME_REWARD:"minigame_reward",MINESWEEPER_START:"minesweeper_start",MINESWEEPER_VICTORY:"minesweeper_victory",MINESWEEPER_CONTINUE:"minesweeper_continue",MINESWEEPER_CONTINUE_RUBY:"minesweeper_continue_ruby",LOCALSTORAGE_CLEARED:"localstorage_cleared",LOCALSTORAGE_ERROR_SET_ITEM:"localstorage_error_set_item",LOCALSTORAGE_SESSION_EXPIRED:"localstorage_session_expired",PAYMENT_OPEN:"payment_open",
PAYMENT_CANCEL:"payment_cancel",PAYMENT_FAILURE:"payment_failure",PAYMENT_NOT_INITIALIZED:"payment_not_initialized",PAYMENT_NOT_REFRESHED:"payment_not_refreshed",PAYMENT_SUCCESS:"payment_success",TREASURE_SEARCH_START:"treasure_search_start",TREASURE_SEARCH_FINISH:"treasure_search_finish",SIMPLE_METHA_BACKGROUND:"simple_metha_background",CARD_SKIN_CHANGED:"card_skin_changed",CARD_SKIN_BOUGHT_USING_COINS:"card_skin_bought_using_coins",LOGIN:"login",SIGN_UP:"sign_up",TUTORIAL_COMPLETE:"tutorial_complete",TUTORIAL_BEGIN:"tutorial_begin",SEARCH:"search",PRESENT_OFFER:"present_offer",JOIN_GROUP:"join_group",SELECT_CONTENT:"select_content",UNLOCK_ACHIEVEMENT:"unlock_achievement",POST_SCORE:"post_score",BONUS_WORLD_LEVEL:"bonus_world_level",PRODUCT_BOUGHT_BONUS_WORLD:"product_bought_bonus_world",BONUS_WORLD_DAU:"bonus_world_dau",BONUS_WORLD_LEVEL_DAU:"bonus_world_level_dau",BONUS_WORLD_REWARD:"BONUS_WORLD_REWARD",SLOT_MACHINE_DAU:"slot_machine_dau",
SLOT_MACHINE_SPIN_DAU:"slot_machine_spin_dau",SLOT_MACHINE_SPIN:"slot_machine_spin",SLOT_MACHINE_TICKET:"slot_machine_ticket",SLOT_MACHINE_TICKET_BOUGHT:"slot_machine_ticket_bought",SLOT_MACHINE_TICKET_GOLD:"slot_machine_ticket_gold",SLOT_MACHINE_FORCE:"slot_machine_force",SLOT_MACHINE_ACTIVE_REFRESHES:"slot_machine_active_refreshes",SLOT_MACHINE_AVAILABLE_REFRESHES:"slot_machine_available_refreshes",SPEND_GOLD_SLOT_MACHINE_AVAILABLE:"spend_gold_slot_machine_available",SPEND_GOLD_SLOT_MACHINE_ACTIVE:"spend_gold_slot_machine_active",PASS_LEVEL_SLOT_MACHINE_AVAILABLE:"pass_level_slot_machine_available",PASS_LEVEL_SLOT_MACHINE_ACTIVE:"pass_level_slot_machine_active",PRODUCT_BOUGHT_BUILDING:"product_bought_building",NON_PAYER_BOUGHT_FUND:"non_payer_bought_fund",BOUGHT_FUND:"bought_fund",GROWTH_FUND_DAU:"growth_fund_dau",GROWTH_FUND_GOLD:"growth_fund_gold",PAYER_BOUGHT_MISSION_OFFER:"payer_bought_mission_offer",PAYER_DAU:"payer_dau",MOVES_FOR_VIDEO:"moves_for_video",
BOOSTERS_BEFORE_FOR_VIDEO:"boosters_before_for_video",HINT_FOR_VIDEO:"hint_for_video",STAR_FOR_VIDEO:"star_for_video",TICKET_FOR_VIDEO:"ticket_for_video"};if("undefined"!=typeof module&&(module.exports=cleverapps_events),!cleverapps.isPixiJs())var ProportionalToFrameWithBorders=cc.ContainerStrategy.extend({ctor:function(e){this.windowSize=e},apply:function(e,t){var s,n,i=this.windowSize.width,o=this.windowSize.height,a=cc.container.style,r=t.width,l=t.height,c=i/r,p=o/l;c<p?(s=i,n=l*c):(s=r*p,n=o);var d=Math.round((i-s)/2);s=Math.round(s),n=Math.round(n),this._setupContainer(e,s,n),e._isRotated?a.marginLeft=o+"px":a.margin="0",a.paddingLeft="0",a.paddingRight="0",a.paddingTop="0",a.paddingBottom="0",a.padding="0",a.margin="0 "+d+"px",Resolution.addSides(i,o,s,n,d)}});var Resolution={_whenResolutionStableCallbacks:[],_afterResolutionChangedCallbacks:[],_whenResolutionStableTimeouts:[],afterResolutionChanged:function(e){this._afterResolutionChangedCallbacks.push(e)},
onResolutionChanged:function(){this._resolutionChangeTimeout&&clearInterval(this._resolutionChangeTimeout),this._whenResolutionStableTimeouts.forEach(function(e){clearInterval(e)}),this._whenResolutionStableTimeouts=[],this._afterResolutionChangedCallbacks.forEach(function(e){e()}),this._resolutionChangeTimeout=setTimeout(this.onResolutionStable.bind(this),500)},onResolutionStable:function(){this._whenResolutionStableCallbacks.forEach(function(e){e()}),this._whenResolutionStableCallbacks=[]},whenResolutionStable:function(e){e=cleverapps.once(e),this._whenResolutionStableCallbacks.push(e),this._whenResolutionStableTimeouts.push(setTimeout(e,500))},setupResolutionScale:function(){resolutionScale=resolutions[cleverapps.settings.calcResolution()].scale,cleverapps.UI.updateSizes(resolutionScale),cleverapps.UI.selectSkinResources(cleverapps.settings.calcResolution()),cleverapps.home&&cleverapps.home.setupResolution(),cleverapps.farm&&cleverapps.farm.setupResolution()},
calculateSceneSize:function(e){var t=e.width/e.height,s=cleverapps.styles.SCENE_HEIGHT,n=s*t;if(n<cleverapps.styles.SCENE_MIN_WIDTH&&(s=(n=cleverapps.styles.SCENE_MIN_WIDTH)/t),cleverapps.isInstant()&&cleverapps.styles.INSTANT_SCENE_MAX_WIDTH&&(cleverapps.styles.SCENE_MAX_WIDTH=cleverapps.styles.INSTANT_SCENE_MAX_WIDTH),n>cleverapps.styles.SCENE_MAX_WIDTH){var i=resolutions[cleverapps.settings.calcResolution()].horizontal;n=void 0!==cleverapps.styles.SCENE_HORIZONTAL_WIDTH&&n>=cleverapps.styles.SCENE_HORIZONTAL_WIDTH&&(e.height<cleverapps.styles.SCENE_HORIZONTAL_MAX_HEIGHT||i||cleverapps.wideMode&&cleverapps.wideMode.mode===cleverapps.WideMode.HORIZONTAL)?cleverapps.styles.SCENE_HORIZONTAL_WIDTH:cleverapps.styles.SCENE_MAX_WIDTH}return cc.size(n,s)},isRightOrientation:function(e){return"horizontal"===cleverapps.config.orientation?e.width>=.65*e.height:e.width<e.height},setupDesignResolution:function(e){var t=cc.view.getFrameSize();if(e=e||{},
cc.sys.isMobile||"undefined"==typeof window||(t={width:window.innerWidth,height:window.innerHeight},this.currentHeight=window.innerHeight),!(t.width<cleverapps.SETUP_RESOLUTION_MIN_FRAME_SIZE||t.height<cleverapps.SETUP_RESOLUTION_MIN_FRAME_SIZE)&&(void 0===cleverapps.rightOrientation||(cleverapps.rightOrientation=this.isRightOrientation(t),cleverapps.rotatePhoneInfo(cleverapps.rightOrientation),cleverapps.rightOrientation))){if(void 0!==cleverapps&&cleverapps.decCanvasHeight&&t.height>cleverapps.decCanvasHeight&&(t.height-=cleverapps.decCanvasHeight),e.sceneMaxWidthOverride&&(cleverapps.styles.SCENE_MAX_WIDTH=e.sceneMaxWidthOverride),e.width&&(t.width=e.width),e.height&&(t.height=e.height),t.width&&t.height){var s={width:t.width,height:t.height};cleverapps.info.setKeyValue("resolution",s)}var n=this.calculateSceneSize(t);if(cleverapps.isPixiJs())cc.view.setDesignResolutionSize(n.width,n.height,t);else if(cc.sys.isNative)cc.view.setDesignResolutionSize(n.width,n.height,
cc.ResolutionPolicy.SHOW_ALL);else{var i=new cc.ResolutionPolicy(new ProportionalToFrameWithBorders(t),cc.ContentStrategy.SHOW_ALL);cc.view.setDesignResolutionSize(n.width,n.height,i)}cc.sys.isNative||void 0!==cleverapps&&cleverapps.canvasTop&&(document.getElementById("Cocos2dGameContainer").style["margin-top"]=cleverapps.canvasTop);var o=cc.director.getRunningScene();o&&o.onChangeSize&&o.onChangeSize(),o&&o.replacing&&(cleverapps.FixedWidthScene.changedSize=!0),this.onResolutionChanged(),cleverapps.canBlockOrientation=cleverapps.MobileOK.isAppropriate()||cleverapps.MobileMyMailRu.isAppropriate()||cleverapps.SPMobage.isAppropriate(),cleverapps.canBlockOrientation||!cc.sys.isMobile||cc.sys.isNative||(cleverapps.canBlockOrientation=!0),void 0===cleverapps.rightOrientation&&cleverapps.canBlockOrientation&&this.isRightOrientation(n)&&(cleverapps.rightOrientation=!0,cleverapps.rotatePhoneInfo(!0))}},setupResolution:function(){cc.view.enableRetina(!0),cc.view.adjustViewPort(!0),
cc.view._orientationChanging=!1,cc.view.resizeWithBrowserSize(!0),cc.view.setResizeCallback(this.setupDesignResolution.bind(this)),this.setupResolutionScale(),this.setupDesignResolution(),cc.sys.isMobile||"undefined"==typeof window||setTimeout(function(){this.currentHeight!==window.innerHeight&&this.setupDesignResolution(),setTimeout(function(){this.currentHeight!==window.innerHeight&&this.setupDesignResolution()}.bind(this),3e3)}.bind(this),1e3)},addSides:function(e,t,s,n,i){var o=document.getElementById("bg");o&&(o.style.position="absolute",o.style.left="0px",o.style.top="0px");var a=document.getElementById("LeftBg");if(a)if(0<i){a.style.width=i+1+"px";var r=bundles.browser_resources.urls.left_bg||bundles.browser_resources.urls.pattern_bg_png;r&&(a.style.backgroundImage="url('"+r+"')")}else a.style.width="0";var l=document.getElementById("RightBg");if(l)if(0<i){l.style.left=i+s-1+"px",l.style.width=e-i-s+2+"px"
;var c=bundles.browser_resources.urls.right_bg||bundles.browser_resources.urls.pattern_bg_png;c&&(l.style.backgroundImage="url('"+c+"')")}else l.style.width="0";var p=document.getElementById("LeftSideBar"),d=document.getElementById("RightSideBar");if(p&&bundles.browser_resources.urls.sidebar){var u=cleverapps.styles.SIDEBAR_WIDTH,h=Math.ceil(u*n/1334),g=Math.ceil(5*n/1334);g<cleverapps.styles.MIN_SIDEBAR_X&&(g=cleverapps.styles.MIN_SIDEBAR_X),0<i?(p.style.left=i-h+g+"px",p.style.width=h+"px",p.style.backgroundImage="url('"+bundles.browser_resources.urls.sidebar+"')",d.style.left=i+s-g+"px",d.style.width=h+"px",d.style.backgroundImage="url('"+bundles.browser_resources.urls.sidebar+"')"):(p.style.width="0",d.style.width="0")}}};cleverapps.rotatePhoneInfo=function(e){document.getElementById("RotatePhoneText").innerText=Messages.get("Rotate.device"),document.getElementById("RotatePhoneIcon").src=bundles.rotate_phone.urls.rotate_png,document.getElementById("RotatePhone"
).style.display=e?"none":"block",console.log(222,e)},window.ENABLE_IMAEG_POOL=!1,cleverapps.EVENTS=cleverapps_events,cleverapps.whenAllInitialized=function(e){cleverapps.allInitialized&&e(),cleverapps.__whenAllInitializedCallbacks||(cleverapps.__whenAllInitializedCallbacks=[]),cleverapps.__whenAllInitializedCallbacks.push(e)},cleverapps.afterAllLoadingFinish=function(){cleverapps.allInitialized=!0,cleverapps.__whenAllInitializedCallbacks&&cleverapps.__whenAllInitializedCallbacks.forEach(function(e){e()})},cleverapps.customBoardGameInitialization=function(e){levels.gameHints=new levels.GameHints,levels.cookieJar=new cleverapps.CookieJar,levels.tutorial=new cleverapps.Tutorial},cleverapps.customMatch3Initialization=function(e){levels.levelAttempts=new levels.LevelAttempts},cleverapps.afterResourceLoaded=function(e){"undefined"!=typeof document&&(document.title=Messages.get(cleverapps.config.title)),levels.initialize(),
"board"===cleverapps.config.type?cleverapps.customBoardGameInitialization(e):"match3"===cleverapps.config.type&&cleverapps.customMatch3Initialization(e),cleverapps.metha.distract({focus:"afterAllLoadingFinish",actions:[function(e){"undefined"!=typeof FBInstant?FBInstant.startGameAsync().then(e):e()},function(e){if(cleverapps.afterAllLoadingFinish(),cleverapps.dailyLevel.isStartFromPortlet())return cleverapps.eventLogger.logEvent("daily_level_channel_"+cleverapps.dailyLevel.getCurrentEvent()),void cleverapps.dailyLevel.start(e);"mergecraft"===cleverapps.config.name&&cleverapps.config.editorMode&&cleverapps.isLocalhost()&&(e(),cleverapps.config.adminMode=!0,new Episode(0).getLevel(0).edit()),cleverapps.Plot.onStartup(e)}]})},cleverapps.createGlobalObjects=function(){"merge"===cleverapps.config.type&&(Families.initialize(),Quests.initialize()),Missions.initialize(),cleverapps.bundleLoader=new BundleLoader,cleverapps.flags=new cleverapps.Flags,
cleverapps.social=cleverapps.SocialManager.create(),cleverapps.eventBus=new cleverapps.EventEmitter,cleverapps.DataLoader.init(),cleverapps.synchronizer=new cleverapps.Synchronizer,cleverapps.eventLogger=new cleverapps.EventsLogger,cleverapps.consoleStream=new cleverapps.ConsoleStream,cleverapps.metha=new Metha,cleverapps.playSession=new PlaySession,cleverapps.info=new cleverapps.Information;var e=levels.initUser();return cleverapps.abTest=new cleverapps.ABTest,cleverapps.scenes=new cleverapps.Scenes,cleverapps.environment=new cleverapps.Environment,cleverapps.communityManager=new CommunityManager,cleverapps.skins=new cleverapps.SkinManager,cleverapps.windows=new Windows,cleverapps.settings=new cleverapps.Settings(e),cleverapps.audio=new cleverapps.Audio,cleverapps.versionChecker=new VersionChecker,cleverapps.userresult=new UserResult,cleverapps.info.reportPhone(),cleverapps.info.reportUserAgent(),cleverapps.info.reportAppVersion(),cleverapps.info.reportMaxTextureSize(),
cleverapps.info.reportSysLanguage(),cleverapps.info.reportInstaller(),cleverapps.firebase=cleverapps.FirebaseManager.run(),cleverapps.firebase.init(),cleverapps.metha.getType()===Metha.FARM?(cleverapps.farm=new Farm,MethaHelper.prepare()):cleverapps.metha.getType()===Metha.HOMEFIX?(cleverapps.home=new Home,MethaHelper.prepare()):cleverapps.metha.getType()===Metha.KNOCKOUT&&(cleverapps.knockout=new Knockout),cleverapps.metha.getType()===Metha.SIMPLE&&(cleverapps.simple=new Simple),cleverapps.promotion=new cleverapps.Promotion,cleverapps.adjust=new cleverapps.Adjust,cleverapps.facebookEventsLogger=new cleverapps.FacebookEventsLogger,cleverapps.friends=new FriendsCache,cleverapps.invitalbleFriends=new FriendsCache(!0),cleverapps.payments=cleverapps.PaymentsManager.init(),cleverapps.paymentsHistory=new cleverapps.PaymentsHistory,cleverapps.localPushes=new cleverapps.LocalPushes,levels.progress=new Progress,levels.episodes=EpisodesManager.create(),
cleverapps.serverFlags=new cleverapps.ServerFlags,cleverapps.periodicBonus=new cleverapps.MiniGame(e),cleverapps.boostersCounter=new cleverapps.BoostersCounter(e),cleverapps.gun=new Gun,cleverapps.isKnockoutGame()&&(cleverapps.knockoutTutorial=new KnockoutTutorial),cleverapps.tempGoods=new cleverapps.TempGoods,cleverapps.config.lives&&(cleverapps.lives=new cleverapps.Lives(e)),cleverapps.dailyTasks=new cleverapps.DailyTasks(e),cleverapps.forces=new Forces,cleverapps.packManager=new PackManager,"merge"!==cleverapps.config.type&&(cleverapps.piggyBank=new PiggyBank),Subscription.IsModelAvailable()&&(cleverapps.subscription=new Subscription),"mergecraft"===cleverapps.config.name&&(cleverapps.growthFund=new GrowthFund),"undefined"!=typeof Heroes&&(match3.heroes=new Heroes),"match3"===cleverapps.config.type&&(cleverapps.starChest=new cleverapps.StarChest),levels.friendSorter=new FriendSorter,levels.friendRequests=new levels.FriendRequests,cleverapps.eventManager=new EventManager,
cleverapps.competitionPlayers=new CompetitionPlayers,cleverapps.competitionStatistics=new CompetitionStatistics,cleverapps.bountyManager=new BountyManager,cleverapps.leadersWindowTable=new cleverapps.Table,cleverapps.dailyCupLeadersWindowTable=new cleverapps.Table,cleverapps.dailyCup=new DailyCup(DailyCup.TYPE_DAILY),-1!==["olympics","differences"].indexOf(cleverapps.config.name)&&(cleverapps.weeklyCup=new DailyCup(DailyCup.TYPE_WEEKLY),cleverapps.weeklyCupTop=new WeeklyCupTop),-1!==["tripeaks","spades"].indexOf(cleverapps.config.name)&&(cleverapps.cardSkins=new CardSkins),"merge"===cleverapps.config.type&&(cleverapps.unitSyncer=new UnitSyncer,cleverapps.unitSaver=new UnitSaver,cleverapps.energyProducts=new EnergyProducts,cleverapps.unitsShop=new UnitsShop,cleverapps.unitsLibrary=new UnitsLibrary),cleverapps.dailyLevel=new DailyLevel,cleverapps.user.calcIdfa(),cleverapps.rewardedAdsManager=new RewardedAdsManager,cleverapps.adsLimits=new AdsLimits,cleverapps.toolbar=new Toolbar,
cleverapps.sideBar=new SideBar,cleverapps.menuBar=new MenuBar,cleverapps.missionManager=new MissionManager,void 0!==cleverapps.BonusRoundChest&&(cleverapps.bonusRoundChest=new cleverapps.BonusRoundChest(e),cleverapps.toolbar.addItem(new BonusRoundToolbarItem)),cleverapps.exclamation=new Exclamation,cleverapps.tooltipManager=new TooltipManager,PlayButton.IsAvailable()&&(cleverapps.playButton=new PlayButton),cleverapps.chat=new Chat,cleverapps.keyboardController=new KeyboardController,cleverapps.wideMode=new cleverapps.WideMode,FlyingAd.IsAvailable()&&(cleverapps.flyingAd=new FlyingAd),e},cleverapps.onStart=function(){"undefined"!=typeof document&&(document.title=cleverapps.config.title);var e=cleverapps.createGlobalObjects(),t=2;cleverapps.flags.norest||(t++,cleverapps.synchronizer._onceFirstSyncCompletedListener=cleverapps.waitNoMore(3e3,function(){console.log("first sync"),n()})),cc.sys.os===cc.sys.OS_IOS&&cc.sys.isNative&&cleverapps.LocalPushes.IosWebViewSender.askPermission()
;var s=function(){cleverapps.afterResourceLoaded(e)},n=cleverapps.wait(t,function(){cc.loaderScene.beforeTransitionAnimations?cc.loaderScene.beforeTransitionAnimations(s):s()});cleverapps.social.initialize(function(){cleverapps.versionChecker.check(),0===levels.user.getProgress()&&(cc.sys.isNative||cleverapps.social.loginPlacement||"sp_mbga"===cleverapps.User.calcSource()||cleverapps.social.needWindowForLogin()||cleverapps.social.checkConnection()),cleverapps.social.isLoggedIn()?cleverapps.SocialManager.onLogin():cleverapps.synchronizer.syncWhenReady(),cleverapps.FBLike.createLikeButtons(),setTimeout(function(){cleverapps.NativeLinks.createLinks()},0),n()}),function(){Resolution.setupResolution(),cleverapps.Spine.prepare(),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,cleverapps.Parallax.refresh);var e=ResourceProcessor.calcProbablyNeed(),t=[].concat.apply([],e.map(function(e){return new Bundle(e).listUrls()}));cc.loaderScene=new LoaderScene(t,function(){
cleverapps.bundleLoader.loadBundles(e,{onSuccess:function(){cc.sys.isNative||"undefined"==typeof logTimeStart||(logTimeStartTimeout&&clearTimeout(logTimeStartTimeout),logTimeStart.save()),Messages.preload(cleverapps.settings.language,n)}})}),cc.director.runScene(cc.loaderScene)}()},cleverapps.styles={},cleverapps.styles.ALIGN_BOTTOM="b",cleverapps.styles.GetRealCoord=function(e,t){return"number"==typeof e?e:e===cleverapps.styles.ALIGN_BOTTOM?t.height/2:void 0},cleverapps.styles.SCENE_HEIGHT=1334,cleverapps.styles.SCENE_MAX_WIDTH=1500,cleverapps.styles.SCENE_MIN_WIDTH=660,cleverapps.SETUP_RESOLUTION_MIN_FRAME_SIZE=150,cleverapps.styles.SQUARE_MODE_WIDTH=1300,cleverapps.styles.SIDEBAR_WIDTH=35,cleverapps.styles.MIN_SIDEBAR_X=2,cleverapps.styles.COLORS={BLACK:new cc.Color(0,0,0,255),BLACK_STROKE:new cc.Color(0,0,0,90),COLOR_GRAY:new cc.Color(200,200,200,255),COLOR_DARK_GRAY:new cc.Color(150,150,150,255),COLOR_VERY_DARK_GRAY:new cc.Color(100,100,100,255),WHITE:new cc.Color(255,255,255,255
),GREEN:new cc.Color(13,119,0,255),YELLOW:new cc.Color(255,255,0,255),HOVER:new cc.Color(230,230,230,255),COLOR_BROWN:new cc.Color(60,45,25,255),COLOR_RED:new cc.Color(255,0,0,255),MESSAGE_GREEN:new cc.Color(4,160,41,255),LIFE_GREEN:new cc.Color(24,200,61,255),PINK:new cc.Color(255,102,102,255),COLOR_DARK_BROWN:new cc.Color(120,85,85,255),HERO_STATS_UPGRADE:new cc.Color(57,237,7,255),GUN_PRICE_FONT_COLOR:new cc.Color(176,125,82,255),REWARDS_TEXT_STROKE_COLOR:new cc.Color(76,98,109,255),GRAY_SCALE_COLOR:new cc.Color(135,135,135,255),GRAY_SCALE_RESTORE_COLOR:new cc.Color(255,255,255,255),DAILY_TOURNAMENT_TIMER:new cc.Color(130,70,40,255),BOOSTERS_SALE_TEXT_COLOR:new cc.Color(191,164,119,255),DARK_RED:new cc.Color(200,0,0,255),COLOR_DARK_YELLOW:new cc.Color(255,194,9,255),COLOR_BROWN_2:new cc.Color(173,61,0,255),COLOR_WINDOW_TEXT:new cc.Color(130,70,40,255),COLOR_VERYLIGHTBROWN:new cc.Color(220,191,144,255),TOOLTIP_COLOR:new cc.Color(148,49,19,255),COINS_REWARD_YELLOW:new cc.Color(255,244
,55,255),COINS_REWARD_STROKE_COLOR:new cc.Color(149,67,23,255),MINIGAME_REWARD_TEXT:new cc.Color(66,68,80)},cleverapps.styles.DECORATORS={DARK_OLIVE_GREEN_STROKE:{color:new cc.Color(121,94,46,255),size:4},WHITE_TEXT_SHADOW:{color:cleverapps.styles.COLORS.BLACK,direction:cc.size(0,-4),blur:5},BROWN_STROKE:{color:cleverapps.styles.COLORS.COLOR_BROWN_2,size:3},BUTTON_TEXT_SHADOW:{color:cleverapps.styles.COLORS.BLACK,direction:cc.size(0,0),blur:5},BUTTON_TEXT_STROKE:{color:cleverapps.styles.COLORS.BLACK,size:2},WINDOW_WHITE_TEXT_STROKE:{color:cleverapps.styles.COLORS.BLACK,size:1},REWARDS_TEXT_STROKE:{color:cleverapps.styles.COLORS.REWARDS_TEXT_STROKE_COLOR,size:3},DAILY_TOURNAMENT_TITLE_STROKE:{color:new cc.Color(116,17,168,255),size:4},TILE_SHOP_WINDOW_STROKE:{color:new cc.Color(150,111,72,255),size:2},TILE_SHOP_WINDOW_TITLE_SHADOW:{color:new cc.Color(112,109,109,255),direction:cc.size(0,-4),blur:0},IMAGE_FONT_STROKE:{color:cleverapps.styles.COLORS.BLACK_STROKE,size:1},
IMAGE_FONT_SHADOW:{color:cleverapps.styles.COLORS.BLACK,direction:cc.size(0,-1),blur:3},TRANSPARENT_BLACK_2PX:{color:cleverapps.styles.COLORS.BLACK_STROKE,size:2}},cleverapps.styles.FONTS=cleverapps.overrideFonts({},{VICTORY_TEXT:{size:56,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.WHITE_TEXT_SHADOW},GUN_PRICE_TEXT:{size:40,color:cleverapps.styles.COLORS.GUN_PRICE_FONT_COLOR},MISSION_RULES_BUTTON_TEXT:{size:64,color:cleverapps.styles.COLORS.WHITE},FBLOGINORINVITE_TEXT:{size:28,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},BUTTON_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},SUBSCRIPTION_BUTTON_SMALL_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE},SUBSCRIPTION_BUTTON_TEXT:{size:60,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},
SUBSCRIPTION_OFFERS_MAIN_TEXT:{size:44,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},SUBSCRIPTION_OFFERS_TEXT:{size:16,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},TOURNAMENTSTORY_OFFERS_MAIN_TEXT:{size:38,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},TOURNAMENTSTORY_OFFERS_TEXT:{size:16,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},TOURNAMENTSTORY_ARROW_TEXT:{size:32,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},TOURNAMENTSTORY_BUTTON_TEXT:{size:40,
color:cleverapps.styles.COLORS.WHITE},BUTTON_SMALL_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},GAME_REWARD_BUTTON_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.BUTTON_TEXT_SHADOW,stroke:cleverapps.styles.DECORATORS.BUTTON_TEXT_STROKE},TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},VICTORY_CHEST_TEXT:{name:"default",size:50},SMALL_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SMALL_TEXT_BROWN:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},WINDOW_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},MISSIONS_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},DAILY_TASK_BOOSTER_AMOUNT_TEXT:{size:60,color:cleverapps.styles.COLORS.COLOR_BROWN},
WINDOW_SMALL_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIBE_TERMS_TEXT:{size:22,color:cleverapps.styles.COLORS.COLOR_GRAY},SUBSCRIBE_CTA_TITLE:{size:36,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIBE_FEATURE_TEXT:{size:36,color:cleverapps.styles.COLORS.COLOR_VERY_DARK_GRAY},SUBSCRIBE_BUTTON_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SUBSCRIBE_CTA_TEXT:{size:36,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIBE_TITLE_TEXT:{size:70,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIBE_TERMS_BUTTIONS_TEXT:{size:24,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIPTION_MAIN_TEXT:{size:25,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIPTION_BUTTON_ADDITIONAL_TEXT:{size:18,color:cleverapps.styles.COLORS.GUN_PRICE_FONT_COLOR},REWARDS_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.REWARDS_TEXT_STROKE},HERO_STATS_VALUE:{size:30,
color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT},HERO_UPGRADE:{size:34,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},HERO_STATS_UPGRADE_VALUE:{size:30,color:cleverapps.styles.COLORS.HERO_STATS_UPGRADE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},INFO_EXP_TEXT:{size:37,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SMALL_TEXT_ERROR:{size:30,color:cleverapps.styles.COLORS.COLOR_RED},EPISODE_TITLE_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},SHARE_BUTTON_REWARD_TEXT:{},WHITE_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SMALL_WHITE_TEXT:{name:"default",size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},LIVES_AMOUNT_TEXT:{name:"default",size:40},DAILY_TASKS_LEVEL_TEXT:{size:35,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},
DAILY_TASK_BUTTON_TEXT:{size:46,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PIGGY_BANK_AMOUNT_TEXT:{size:44,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PACK_WINDOW_TEXT:{size:35,color:cleverapps.styles.COLORS.BLACK},FORCE_MESSAGE_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},DAILY_TOURNAMENT_TITLE_TEXT:{size:55,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.DAILY_TOURNAMENT_TITLE_STROKE},DAILY_TOURNAMENT_TEXT:{size:40,color:cleverapps.styles.COLORS.DAILY_TOURNAMENT_TIMER},BIG_BUTTON_TEXT:{size:70,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},BREAKVIEW_AMOUNT_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},TILE_SHOP_WINDOW_TEXT:{size:35,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.TILE_SHOP_WINDOW_STROKE},
TILE_SHOP_WINDOW_TITLE_TEXT:{size:85,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.TILE_SHOP_WINDOW_TITLE_SHADOW},WHITE_TITLE_TEXT:{size:60,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},LEVEL_TUTORIAL_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},TOOLTIP_TEXT:{size:40,color:cleverapps.styles.COLORS.TOOLTIP_COLOR},TOOLTIP_FONT:{color:cleverapps.styles.COLORS.TOOLTIP_COLOR,size:40},TREASURE_SEARCH_PROGRESS_BAR_TEXT:{name:"default",size:35,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},DAILY_TASK_PROGRESS_FONT:{name:"default",size:35}}),cleverapps.styles.SpineSkins={},cleverapps.Environment=function(){this.episodeNo=levels.user.episode,this.levelNo=levels.user.level,this.scene=void 0,this.onOpenWindowListener=function(e){},this.paused=!1,this.onShowCallbacks=[],this.onShowCounter=0,
cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,this.onShow.bind(this)),cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,this.onHide.bind(this)),this.onShowTime=Date.now()},cleverapps.whenShow=function(s){return function(){var e=this,t=arguments;cleverapps.environment.whenShow(function(){s.apply(e,t)})}},cleverapps.Environment.prototype.whenShow=function(e){this.paused?this.onShowCallbacks.push(e):e()},cleverapps.Environment.prototype.onHide=function(){this.paused=!0,this.onShowTimeout&&(clearTimeout(this.onShowTimeout),delete this.onShowTimeout)},cleverapps.Environment.prototype.onShow=function(){this.onShowTime=Date.now(),this.onShowCounter++,this.onShowTimeout=setTimeout(function(){delete this.onShowTimeout,this.paused=!1;var e=this.onShowCallbacks;this.onShowCallbacks=[],e.forEach(function(e){this.whenShow(e)}.bind(this))}.bind(this),300)},cleverapps.Environment.prototype.setScene=function(e){this.scene=e,cleverapps.firebase&&cleverapps.firebase.setScreenName(
this.getScreen(),this.getScene())},cleverapps.Environment.prototype.isDailyCupScene=function(){return this.scene===cleverapps.Environment.SCENE_DAILY_CUP},cleverapps.Environment.prototype.isMainScene=function(){return this.scene===cleverapps.Environment.SCENE_MAIN||"merge"===cleverapps.config.type&&this.scene===cleverapps.Environment.SCENE_GAME},cleverapps.Environment.prototype.isMethaScene=function(){return this.scene===cleverapps.Environment.SCENE_METHA||this.scene===cleverapps.Environment.SCENE_MAIN&&!cleverapps.metha.withSimpleMain()},cleverapps.Environment.prototype.isHeroesScene=function(){return this.scene===cleverapps.Environment.SCENE_HEROES},cleverapps.Environment.prototype.isBattleScene=function(){return this.scene===cleverapps.Environment.SCENE_BATTLE},cleverapps.Environment.prototype.isGameScene=function(){return this.scene===cleverapps.Environment.SCENE_GAME},cleverapps.Environment.prototype.isEditorScene=function(){return this.scene===cleverapps.Environment.SCENE_EDITOR}
,cleverapps.Environment.prototype.isChatScene=function(){return this.scene===cleverapps.Environment.SCENE_CHAT},cleverapps.Environment.prototype.isMiniGameScene=function(){return this.scene===cleverapps.Environment.SCENE_MINE||this.scene===cleverapps.Environment.SCENE_SLOT_MACHINE},cleverapps.Environment.prototype.isAdministratorScene=function(){return this.scene===cleverapps.Environment.SCENE_ADMINISTRATOR},cleverapps.Environment.prototype.isSceneWithPreview=function(){return this.scene===cleverapps.Environment.SCENE_EDITOR||this.scene===cleverapps.Environment.SCENE_ADMINISTRATOR||this.scene===cleverapps.Environment.SCENE_WYSIWYG},cleverapps.Environment.prototype.isWysiwygScene=function(){return this.scene===cleverapps.Environment.SCENE_WYSIWYG},cleverapps.Environment.prototype.isBonusWorldScene=function(){return this.scene===cleverapps.Environment.SCENE_BONUS_WORLD},cleverapps.Environment.prototype.isSlotMachineScene=function(){
return this.scene===cleverapps.Environment.SCENE_SLOT_MACHINE},cleverapps.Environment.prototype.onOpenWindow=function(e){this.onOpenWindowListener(e),cleverapps.firebase&&cleverapps.firebase.setScreenName(this.getScreen(),this.getScene())},cleverapps.Environment.prototype.onCloseWindow=function(e){cleverapps.firebase&&cleverapps.firebase.setScreenName(this.getScreen(),this.getScene())},cleverapps.Environment.prototype.getActiveWindow=function(){var e=cleverapps.windows&&cleverapps.windows.currentWindow();if(e&&e.name)return e.name},cleverapps.Environment.prototype.getScreen=function(){return this.getActiveWindow()||this.getScene()},cleverapps.Environment.prototype.getScene=function(){return this.scene},cleverapps.Environment.SCENE_MAIN="main",cleverapps.Environment.SCENE_METHA="metha",cleverapps.Environment.SCENE_GAME="game",cleverapps.Environment.SCENE_EDITOR="editor",cleverapps.Environment.SCENE_ADMINISTRATOR="administrator",cleverapps.Environment.SCENE_COMICS="comics",
cleverapps.Environment.SCENE_HEROES="heroes",cleverapps.Environment.SCENE_CARD_SKINS="cardskins",cleverapps.Environment.SCENE_DAILY_CUP="dailycup",cleverapps.Environment.SCENE_TRIPEAKS="tripeaks",cleverapps.Environment.SCENE_CHAT="chat",cleverapps.Environment.SCENE_WYSIWYG="wysiwyg",cleverapps.Environment.SCENE_BONUS_WORLD="bonusworld",cleverapps.Environment.SCENE_SLOT_MACHINE="slotmachine",cleverapps.Environment.SCENE_MINE="mine",cleverapps.Environment.SCENE_BATTLE="battle",resolutionScale=1,cleverapps.UI={stableKeys:["verticalAlignment","texType","opacity","scale9","parent","scale","minScale","maxScale","rotation","baseScale","zoomScale","zoom","scaleX","scaleY","anchorX","anchorY","zIndex","zOrder","mobileScaleAdd","coinScale","SIDEBAR_WIDTH","MOBILE_MENU_SCALE","MIN_SIDEBAR_X","duration","delay","idleDelay","closeButtonDelay","visiblePages","type","hideDirection","widthMultiplier","number","mobileScale","innerScale","dialogueStages","baseline","skew","anchor","factorX","factorY",
"smallMargin","threshold","timeScale","fadeIn"],needUpdateSizes:function(e,t,s){return!(s instanceof cc.Color)&&(("direction"!==t||"object"==typeof s)&&!(0<=cleverapps.UI.stableKeys.indexOf(t)))},updateSizes:function(n){var i={},o=[],a=function(e){if(!e.isUpdated)for(var t in e.isUpdated=!0,o.push(e),e){var s=e[t];if("number"==typeof s){if(Array.isArray(e))continue;cleverapps.UI.needUpdateSizes(e,t,s)&&(i[t]=!0,e[t]*=n,e[t]=Math.round(e[t]))}else"object"==typeof s&&cleverapps.UI.needUpdateSizes(e,t,s)&&a(s)}};cleverapps.styles.isUpdated||(a(cleverapps.styles),cleverapps.config.fonts.forEach(function(e){e.originalSize=e.size+""}),a(cleverapps.config.fonts),cleverapps.values(Forces).forEach(function(e){e.style&&a(e.style),e.Finger&&a(e.Finger)}),o.forEach(function(e){delete e.isUpdated}),cleverapps.styles.isUpdated=!0)},selectSkinResources:function(e){var i=function(e,t,s){for(var n in e)"string"==typeof e[n]&&(e[n]=e[n].replace("/%r/","/"+t+"/")),s&&"object"==typeof e[n]&&i(e[n],t,s)}
;for(var t in bundles){var s=bundles[t];i(s.urls,e),i(s.frames,e),i(s.jsons,e)}for(var n in cleverapps.styles){var o=cleverapps.styles[n];i(o,e,!0)}if("object"==typeof HeroesLibrary&&i(HeroesLibrary,e,!0),"undefined"!=typeof CardSkins&&i(CardSkins,e,!0),"undefined"!=typeof unpackedMap)for(var t in unpackedMap)-1!==t.indexOf("/%r/")&&(unpackedMap[t.replace("/%r/","/"+e+"/")]=unpackedMap[t],delete unpackedMap[t])},HORIZONTAL:0,VERTICAL:1,ALIGN_START:1,ALIGN_CENTER:2,ALIGN_END:3,TOP_TO_BOTTOM:2,SCALE_ANIMATION:2,OPACITY_ANIMATION:3,arrangeWithMargins:function(a,r){var l=r.margin;void 0===l&&(l=0);var c=0;c=r.direction===cleverapps.UI.HORIZONTAL?r.x||0:r.y||0;var p=r.iterator;return p||(p=function(e,t,s){if(r.align===cleverapps.UI.ALIGN_START||r.align===cleverapps.UI.ALIGN_END){var n=r.direction===cleverapps.UI.HORIZONTAL?e.height*e.scaleY/2:e.width*e.scaleX/2;r.align===cleverapps.UI.ALIGN_END&&(n=-n),r.direction===cleverapps.UI.HORIZONTAL?s+=n:t+=n}e.setPositionRound(t,s)}),a.forEach(
function(e,t){r.direction===cleverapps.UI.TOP_TO_BOTTOM&&(e=a[a.length-1-t]);var s=e.baseScaleX||e.baseScale||e.scaleX,n=e.baseScaleY||e.baseScale||e.scaleY;if(r.direction===cleverapps.UI.HORIZONTAL){var i=e.y;void 0!==r.y&&(i=r.y-(.5-e.anchorY)*e.height*Math.abs(n)),p(e,c+e.width*Math.abs(s)*e.anchorX,i),c+=e.width*Math.abs(s)}else{var o=e.x;void 0!==r.x&&(o=r.x-(.5-e.anchorX)*e.width*Math.abs(s)),p(e,o,c+e.height*Math.abs(n)*e.anchorY),c+=e.height*Math.abs(n)}c+=l}),c-l},calculateContentSize:function(e){var t=0,s=0;return e.children.forEach(function(e){t<e.x+e.width*e.scaleX/2&&(t=e.x+e.width*e.scaleX/2),s<e.y+e.height*e.scaleY/2&&(s=e.y+e.height*e.scaleY/2)}),cc.size(Math.round(t),Math.round(s))},fitToBox:function(e,t){var s=Math.min(t.width/e.width,t.height/e.height,t.maxScale||1);e.setScale(s)},jumpAnimation:function(e,t,s){var n=(s=s||{}).time||.5,i=s.h||cleverapps.styles.UI.jumpAnimation.h,o=s.parent||cc.director.getRunningScene().scene,a=e.getParent();e.replaceParentSamePlace(o
,{keepScale:!0});var r=cc.p(e.x,e.y),l=cc.p(e.x+t.x,e.y+t.y),c=cc.pMidpoint(r,l);c.y+=i;var p=new cc.BezierTo(n,[r,c,l]).easing(cc.easeIn(1));if(s.spawn||s.sound){var d=[];s.spawn&&d.push(s.spawn),s.sound&&d.push(new cc.Sequence(new cc.DelayTime(void 0===s.soundDelay?.5:s.soundDelay),new cc.CallFunc(cleverapps.audio.playSound.bind(cleverapps.audio,s.sound)))),d.push(p),p=new cc.Spawn(d)}e.runAction(new cc.Sequence(p,new cc.CallFunc(function(){e.replaceParentSamePlace(a),s.callback&&s.callback()})))},collectAnimation:function(e,t,s){s=s||{};var n,i=cc.director.getRunningScene();n=s.parent?s.parent:i,e.replaceParentSamePlace(n,{keepScale:!0}),t&&t.parent||(t=cc.director.getRunningScene().scene);var o,a=e.getPosition(),r=n.convertToNodeSpace(t.parent.convertToWorldSpace(t.getPosition()));if(s.jump)o=cc.p(a.x,r.y);else{var l=cc.pSub(r,a),c=cc.pMult(cc.pNormalize(cc.pPerp(l)),cleverapps.styles.UI.collectAnimation.bezierX),p=cc.pMidpoint(a,r),d=cc.pAdd(p,c),u=cc.pSub(p,c),h=cc.p(i.width/2,
i.height/2),g=cc.pDistance(d,h),v=cc.pDistance(u,h);o=cc.pSub(a,cc.pMult(l,.33)),o=g<v?cc.pAdd(o,c):cc.pSub(o,c)}var m=s.time?s.time:.7;s.speed&&(m=(cc.pDistance(a,o)+cc.pDistance(o,r))/s.speed)<.3&&(m=.3),s.callback&&e.runAction(new cc.Sequence(new cc.DelayTime(m),new cc.CallFunc(s.callback))),e.runAction(new cc.Sequence(new cc.Spawn(new cc.BezierTo(m,[a,o,r]),new cc.ScaleTo(m,s.noScale?e.getScale():1)),new cc.CallFunc(function(){!1!==s.finishRemove&&e.removeFromParent(),s.targetEffect&&(t.stopAllActions(),t.runAction(new cc.Sequence(new cc.ScaleTo(.15,1.1),new cc.ScaleTo(.15,1))))}))),e.setLocalZOrder(10)},jumpCollectAnimation:function(t,s){var e=s.jump,n=s.collect;e.callback=function(){var e=s.delay||.3;n.callback=s.callback,n.jump=!0,t.runAction(new cc.Sequence(new cc.DelayTime(e),new cc.CallFunc(function(){cleverapps.UI.collectAnimation(t,n.target,n)})))},e.time=e.time||.4;var i=t.getScale();t.setScale(.5*i),e.spawn=new cc.ScaleTo(e.time,1.2*i)
;var o=e.dist||cleverapps.styles.UI.jumpCollectAnimation.dist;cleverapps.UI.jumpAnimation(t,o,e)},animateDelta:function(e,t){if(0!==e){0<e&&(e="+"+e);var s=cleverapps.UI.generateImageText(""+e,t.font||cleverapps.styles.FONTS.WHITE_TEXT||cleverapps.styles.FONTS.TEXT);if(t.icon){var n=new cc.Sprite(t.icon);t.iconScale&&n.setScale(t.iconScale),(s=new cleverapps.Layout([s,n],{direction:cleverapps.UI.HORIZONTAL,margin:cleverapps.styles.UI.delta.margin})).setCascadeOpacityEnabled(!0)}t.parent&&t.parent.addChild(s),s.setPositionRound(t),t.zOrder&&s.setLocalZOrder(t.zOrder);var i=cleverapps.styles.UI.delta.y;t.dy&&(i=t.dy),t.delay=t.delay||0;var o=t.duration||2;return s.opacity=0,s.runAction(new cc.Sequence(new cc.DelayTime(t.delay),new cc.CallFunc(function(){s.opacity=255}),new cc.Spawn(new cc.MoveBy(o,cc.p(0,i)),new cc.Sequence(new cc.FadeTo(o,0),new cc.RemoveSelf)))),s}},getFontName:function(e){return void 0===e&&(e=bundles.main.urls.basefont_ttf),
"playable"===cleverapps.config.source?"Playable-font":cc.sys.isNative&&!cc.sys.isWebView&&cc.sys.os===cc.sys.OS_ANDROID?e.srcs[0]:e.name},generateImageText:function(e,t,s,n){if(cleverapps.config.debugMode&&!cleverapps.UI.ImageFont.IsApplicable(t,e))throw console.log(t),"Not applicable image font: "+e;return e=cleverapps.UI.LabelTTF.GetLocalizedText(e,s),new cleverapps.UI.ImageFont(e,t,n)},generateOnlyText:function(e,t,s){var n=new cleverapps.UI.LabelTTF("",cleverapps.UI.getFontName(t.font));e=cleverapps.UI.LabelTTF.GetLocalizedText(e,s);var i=cleverapps.UI.getSceneSize();return e.length*t.size*.5>i.width&&(n.setDimensions(i.width,0),n._autoDimensions=!0),n.setString(e),n.setFont(t),n},generateTTFText:function(e,t,s){var n;return cleverapps.UI.ImageFont.IsApplicable(t,e)?n=new cleverapps.UI.ImageFont(e,t):(n=new cleverapps.UI.LabelTTF("",cleverapps.UI.getFontName(t.font)),170<(e=cleverapps.UI.LabelTTF.GetLocalizedText(e,s)).length&&(n.setDimensions(cleverapps.UI.getSceneSize().width,0),
n._autoDimensions=!0),n.setString(e),n.setFont(t)),n},CheckBox:cc.Node.extend({ctor:function(e){this._super(),(e=e||{}).styles=e.styles||{},this.options=e,this.onChangeCallback=e.onChange||function(e){},this.selected=!1;var t=[],s=this.createCheckBox();t.push(s),e.label&&(this.createLabel(),t.push(this.label));var n=this.getStyles(),i=new cleverapps.Layout(t,{margin:n.margin,padding:n.padding,direction:void 0!==e.direction?e.direction:cleverapps.UI.HORIZONTAL});this.addChild(i),this.setAnchorPoint2(),this.setContentSize2(i.getContentSize()),i.setPositionRound(this.width/2,this.height/2),cleverapps.UI.applyHover(this),this.options.label&&this.options.label.clickable?cleverapps.UI.onClick(this,this.onClick.bind(this),{noThrottle:!0}):cleverapps.UI.onClick(s,this.onClick.bind(this),{noThrottle:!0}),this.setSelected(this.options.isSelected)},createCheckBox:function(){var e=this.getStyles(),t=new cc.Sprite(e.bgImage);return this.icon=new cc.Sprite(e.checkImage),t.addChild(this.icon),
this.icon.setPositionRound(t.width/2,t.height/2),this.icon.setVisible(!1),t},createLabel:function(){this.label=cleverapps.UI.generateTTFText(this.options.label.text,this.options.label.font||cleverapps.styles.FONTS.WINDOW_TEXT)},onClick:function(){this.setSelected(!this.isSelected()),cleverapps.audio.playSound(bundles.main.urls.click_effect)},isSelected:function(){return this.selected},setSelected:function(e){this.selected!==e&&(this.selected=e,this.icon.setVisible(e),this.onChangeCallback(this.selected))},getStyles:function(){return this.styles||(this.styles=cleverapps.overrideStyles(cleverapps.styles.UI.CheckBox,this.options.styles,!0)),this.styles}}),makeHideable:function(e,t){e.hideHandler=new cleverapps.UI.HideHandler(e,t)},wrap:function(e,t){if(0===e.children.length)return e;for(var s,n,i,o,a=0;a<e.children.length;a++){var r=e.children[a],l=r.baseScaleX||r.baseScale||r.scaleX,c=r.baseScaleY||r.baseScale||r.scaleY,p=r.height,d=r.width;t&&(p=r.getBoundingBox().height,
d=r.getBoundingBox().width,c=l=1);var u=r.y-p*c*r.anchorY,h=u+p*c;(void 0===s||u<s)&&(s=u),(void 0===n||n<h)&&(n=h);var g=r.x-d*l*r.anchorX,v=g+d*l;(void 0===i||g<i)&&(i=g),(void 0===o||o<v)&&(o=v)}return o<0&&(o=0),n<0&&(n=0),0<s&&(s=0),0<i&&(i=0),i=-i,s=-s,e.setContentSize2(i+o,s+n),e.children.forEach(function(e){e.x+=i,e.y+=s}),e.setAnchorPoint2(),e},shake:function(t,e){var s=(e=e||{}).delay||0,n=e.power||1,i=e.vibro;void 0===i&&(i=500);var o=e.strength;o||(o=cleverapps.styles.UI.shake);var a=e.base;a||(a={x:t.x,y:t.y,r:t.rotation});var r=[{x:2,y:1,r:0},{x:-1,y:-2,r:-1},{x:-3,y:0,r:1},{x:0,y:2,r:0},{x:1,y:-1,r:1},{x:0,y:0,r:0}].map(function(e){return new cc.CallFunc(function(){t.setPosition(a.x+e.x*o.dx*n,a.y+e.y*o.dy*n),t.setRotation(a.r+e.r)})}),l=[new cc.DelayTime(s/1e3)];cleverapps.settings.vibro&&i&&l.push(new cc.CallFunc(function(){cc.sys.isNative&&void 0!==cc.Device?cc.Device.vibrate(i/1e3):"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(i)})),r.forEach(
function(e){l.push(e),l.push(new cc.DelayTime(.05))}),t.stopAllActions(),t.runAction(new cc.Sequence(l))},wrapWithPadding:function(e,t,s){if(t=t?{left:t.left||t.x||0,right:t.right||t.x||0,top:t.top||t.y||0,bottom:t.bottom||(t.isTop?0:t.y)||0}:{left:0,right:0,top:0,bottom:0},s)return e.children.forEach(function(e){e.x+=t.left,e.y+=t.bottom}),e.width+=t.left+t.right,e.height+=t.top+t.bottom,e;var n=new cc.Node;return n.addChild(e),n.setContentSize2(e.width*e.scaleX+t.left+t.right,e.height*e.scaleY+t.top+t.bottom),n.setAnchorPoint2(),e.setPosition(t.left+e.width*e.scaleX/2,t.bottom+e.height*e.scaleY/2),n},setDimensions:function(e,t){var s=t.width||e.width*e.scaleX,n=t.height||e.height*e.scaleY;cleverapps.UI.fitToBox(e,{width:s,height:n});var i=Math.max(0,s-e.width*e.scaleX),o=Math.max(0,n-e.height*e.scaleY);(i||o)&&cleverapps.UI.wrapWithPadding(e,{x:i/2/e.scaleX,y:o/2/e.scaleY},!0)},targetContainPoint:function(e,t,s){if(s){if(!cc.rectContainsPoint(cc.rect(0,0,e.width,e.height),t))return!1
;if(t.x+=(s.width-e.width)/2,t.x<0||t.x>s.width)return!1;var n=s.width/2,i=s.height/2;t.x>n&&(t.x=s.width-t.x);var o=e.height;return o<s.height&&(o=s.height),t.y>i&&t.y<o-i?!0:(t.y>i&&(t.y=o-t.y),!(t.y<0||t.y>i)&&(n-t.x)*i<t.y*n)}var a=e.clickPosition||{x:0,y:0};return cc.rectContainsPoint(cc.rect(a.x,a.y,e.width,e.height),t)},onDrag:function(s,n){var i,o=void 0!==(n=n||{}).dragMinDist?n.dragMinDist:cleverapps.styles.UI.DRAG_MIN_DIST,e=cleverapps.UI.DRAG_THROTTLE,a=cleverapps.throttle(e,n.onDragMove?n.onDragMove:function(){}),r=!1,t=!1;return void 0!==n.swallowTouches&&(t=n.swallowTouches),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:t,onTouchBegan:function(e){if(!s.isDisplayed())return!1;var t=cleverapps.UI.targetContainPoint(s,s.convertTouchToNodeSpace(e),n.isometricCell);return t&&(i=e.getLocation(),n.onTouchBegan&&n.onTouchBegan(e)),t},onTouchMoved:function(e){var t=e.getLocation();if(cc.pDistance(t,i)>=o){if(!r){if(
n.onDragStart&&!n.onDragStart())return;r=!0}n.followPointer&&s.setPositionRound(s.parent.convertTouchToNodeSpace(e)),a({dx:t.x-i.x,dy:t.y-i.y,touch:e})}},onTouchEnded:function(e){if(r||0===o){r=!1;var t=e.getLocation();n.onDragMove&&n.onDragMove({dx:t.x-i.x,dy:t.y-i.y,touch:e}),n.onDragEnd&&n.onDragEnd({dx:t.x-i.x,dy:t.y-i.y,touch:e})}}},s)},onTouchBegan:function(s,n,i){i=i||{},n&&!i.noThrottle&&(n=cleverapps.throttle(i.clickThrottle||cleverapps.UI.CLICK_THROTTLE,n));var e=!0;return void 0!==i.swallowTouches&&(e=i.swallowTouches),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:e,onTouchBegan:function(e){if(!s.isDisplayed())return!1;var t=s.convertTouchToNodeSpace(e);return!!cleverapps.UI.targetContainPoint(s,t,i.isometricCell)&&(n(t),!0)}},s)},onClick:function(n,s,i){i=i||{},s&&!i.noThrottle&&(s=cleverapps.throttle(i.clickThrottle||cleverapps.UI.CLICK_THROTTLE,s));var o,a,r=i.ignoreOnTouchMoved,
l=void 0===i.ignoreOnTouchMovedThreshold?cleverapps.styles.UI.onClick.ignoreOnTouchMovedThreshold:i.ignoreOnTouchMovedThreshold,e=!0;return void 0!==i.swallowTouches&&(e=i.swallowTouches),i.useInteractiveScale&&!n.applyInteractiveScale&&(n.applyInteractiveScale=cleverapps.UI.applyInteractiveScale),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:e,onTouchBegan:function(e){if(!n.isDisplayed())return!1;if(i.filter&&!i.filter())return!1;var t=n.getCropContainer();if(t&&!cc.rectContainsPoint(cc.rect(0,0,t.width,t.height),t.convertTouchToNodeSpace(e)))return!1;var s=cleverapps.UI.targetContainPoint(n,n.convertTouchToNodeSpace(e),i.isometricCell);return s&&(o=e.getLocation(),a=!0,n.onTouchBegan&&n.onTouchBegan(),i.useInteractiveScale&&n.applyInteractiveScale&&(n.isTouchBegan=!0,n.applyInteractiveScale())),s},onTouchMoved:function(e){if(r&&a){var t=o,s=e.getLocation(),n=Math.abs(t.x-s.x)+Math.abs(t.y-s.y);l<n&&(a=!1)}},onTouchEnded:function(e){
n.onTouchEnded&&n.onTouchEnded(),i.useInteractiveScale&&n.applyInteractiveScale&&(n.isTouchBegan=!1,n.applyInteractiveScale());var t=n.convertTouchToNodeSpace(e);if(cleverapps.UI.targetContainPoint(n,t,i.isometricCell)&&a)return s(t),!0}},n)},applyHover:function(r,l){r.onMouseOver||(r.onMouseOver=function(){r.applyInteractiveScale(),r.settings&&r.settings.hint&&r.showHint(r.settings.hint)}),r.onMouseOut||(r.onMouseOut=function(){r.applyInteractiveScale(),r.settings&&r.settings.hint&&r.hideHint()}),l=l||{},r.applyInteractiveScale||(r.applyInteractiveScale=cleverapps.UI.applyInteractiveScale),r.hoverListener=cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:function(e){if(!cleverapps.UI.disableHover){var t=e.getLocation(),s=r.getCropContainer(),n=r.convertToNodeSpace(t),i=r.getContentSize(),o=r.hoverPosition||{x:0,y:0},a=cc.rect(o.x,o.y,i.width,i.height);l.filter&&!l.filter()||!cc.rectContainsPoint(a,n)||s&&!cc.rectContainsPoint(cc.rect(0,0,s.width,s.height),
s.convertToNodeSpace(t))?r.mouseOver&&(r.mouseOver=!1,r.onMouseOut()):r.mouseOver||(r.mouseOver=!0,r.onMouseOver())}}},r)},removeHover:function(e){e.hoverListener&&(cc.eventManager.removeListener(e.hoverListener),delete e.hoverListener)},applyInteractiveScale:function(){var e=void 0===this.baseScale?1:this.baseScale;this.selected&&this.selectedScale?this.setScale(e*this.selectedScale):this.isTouchBegan?this.setScale(.97*e):this.mouseOver?this.setScale(1.03*e):this.setScale(e)},convertToGrayScale:function(e,t){"undefined"!=typeof gl&&(e.spine&&(e=e.spine),t?e.normalShader?e.setShaderProgram(e.normalShader):e.opacity=255:cc.shaderCache&&cleverapps.Shaders&&cc.shaderCache.getProgram(cleverapps.Shaders.GRAYSCALE_SPRITE_KEY)?(e.normalShader||(e.normalShader=e.getShaderProgram()),e.setShaderProgram(cc.shaderCache.getProgram(cleverapps.Shaders.GRAYSCALE_SPRITE_KEY))):e.opacity=150)},_setShaderUpdate:function(e,t,s){if(e._superUpdate)e.update=e._superUpdate.bind(e),delete e._superUpdate,
e.normalShader&&e.setShaderProgram(e.normalShader);else if(cc.shaderCache&&cleverapps.Shaders&&cc.shaderCache.getProgram(t)){e.normalShader||(e.normalShader=e.getShaderProgram()),e.setShaderProgram(cc.shaderCache.getProgram(t));var n=e.getShaderProgram();e._superUpdate=e.update,e.scheduleUpdate(),e.update=function(e){s(e,n)}.bind(e)}},toggleFlickering:function(n,e){if("undefined"!=typeof gl){var i=(e=e||{}).flickSpeed||2,o=e.flickPause||.2,a=e.color;(!a||!Array.isArray(a)||a.length<3)&&(a=[.35,.35,.35]);var r=0;this._setShaderUpdate(n,cleverapps.Shaders.FLICKER_SHADER_KEY,function(e,t){n._superUpdate(e),t.use(),r+=e;var s=Math.abs(Math.sin(Math.max(r-o,0)*i));s=Math.max(0,Math.min(1,s)),t.setUniformLocationWith1f("sineTime",s),t.setUniformLocationWith3f("flickColor",a[0],a[1],a[2])})}},toggleBlur:function(c,p){if((p=p||{}).animate=p.animate||{},"undefined"!=typeof gl){var s=p.blurLength||.005,d=p.strength||1,u=function(e,t){c.blurShader.use(),c.blurShader.setUniformLocationWith1f(
"u_blurOffset",s),c.blurShader.setUniformLocationWith1f("u_blurStrength",e),c.blurShader.setUniformLocationWith1f("u_extent",t)},e=function(e,t){t=t||function(){};var s=p.animate.type||cleverapps.UI.BLUR_ANIMATION.FADE,n=p.animate.time||.2,i=p.animate.steps||20,o=e?d:0,a=e?1:0,r=d/i,l=1/i;c.blurAction=c.runAction(new cc.Sequence(new cc.Repeat(new cc.Sequence(new cc.CallFunc(function(){s===cleverapps.UI.BLUR_ANIMATION.FADE?u(o+=e?-r:r,1):u(d,a+=e?-l:l)}),new cc.DelayTime(n/i)),i),new cc.CallFunc(t))),c.blurAction.whenDone=t};if(c.blurAction&&!c.blurAction.isDone()&&(c.stopAction(c.blurAction),c.blurAction.whenDone(),delete c.blurAction),c.normalShader){var t=function(){c.setShaderProgram(c.normalShader),delete c.normalShader,delete c.blurShader};p.animate?e(!0,function(){t(),p.animate.callback&&p.animate.callback()}):t()}else if(cc.shaderCache&&cleverapps.Shaders){var n=cleverapps.Shaders.BLUR_FADE_KEY;p.animate.type===cleverapps.UI.BLUR_ANIMATION.CURTAIN&&(
n=p.animate.reverseCurtain?cleverapps.Shaders.BLUR_CURTAIN_REVERSE_KEY:cleverapps.Shaders.BLUR_CURTAIN_KEY),cc.shaderCache.getProgram(n)&&(c.normalShader=c.getShaderProgram(),c.setShaderProgram(cc.shaderCache.getProgram(n)),c.blurShader=c.getShaderProgram(),p.animate?e(!1,p.animate.callback):u(d,1))}}else p.animate&&p.animate.callback&&p.animate.callback()},getSceneSize:function(){var e=cc.director.getWinSize();return e.height=cleverapps.styles.SCENE_HEIGHT,e},getSceneOffsetY:function(){var e=cc.director.getRunningScene(),t=1;return e&&e.scene&&(t=e.scene.resizeScale),(cc.director.getWinSize().height-cleverapps.styles.SCENE_HEIGHT*t)/2/t},createPatternSprite:function(e,t){void 0===t&&(t=cc.director.getWinSize());var s=new cc.Sprite(e);if("auto"===t.width&&(t.width=s.width-2),"auto"===t.height&&(t.height=s.height-2),cleverapps.isPixiJs())s=new cc.TilingSprite(e,t.width,t.height);else if("undefined"!=typeof gl&&s.getTexture()){s.getTexture().setTexParameters({minFilter:gl.NEAREST,
magFilter:gl.NEAREST,wrapS:gl.REPEAT,wrapT:gl.REPEAT});var n=s.getTextureRect();n.width=t.width,n.height=t.height,s.setTextureRect(n)}else t.width&&t.height&&s.setScale(t.width/s.width,t.height/s.height);return s.setPositionRound(t.width/2,t.height/2),s},createSprite:function(e){if(!e)return new cc.Sprite;var t=e&&e.image||e;if(t=processVirtualImage(t),void 0!==e.scale9&&!1!==e.scale9){var s,n,i=cleverapps.UI.createScale9Sprite(t,e.scale9);e.sizes?(s=e.sizes[cleverapps.wideMode.mode].width,n=e.sizes[cleverapps.wideMode.mode].height):(s=e.width,n=e.height);var o=e.rotation;if(e.rotations&&(o=e.rotations[cleverapps.wideMode.mode]),o){var a=n;n=s,s=a,i.setRotation(o)}return i.setContentSize2(s,n),i}var r=t;return(t=new cc.Sprite(t)).scale=e.scale||1,t.spriteFrameName=r,t},getScale9Rect:function(e,t){void 0===t&&(t=cleverapps.UI.Scale9Rect.Default);var s=(e instanceof cc.SpriteFrame?e:cc.spriteFrameCache.getSpriteFrame(e)).getOriginalSize(),n=t===cleverapps.UI.Scale9Rect.TwoPixelXY,
i=Math.round(n?s.width/2-1:s.width/3),o=Math.round(n?2:s.width/3),a=t===cleverapps.UI.Scale9Rect.TwoPixelY||t===cleverapps.UI.Scale9Rect.TwoPixelXY,r=Math.round(a?s.height/2-1:s.height/3),l=Math.round(a?2:s.height/3);return cc.rect(i,r,o,l)},createScale9Sprite:function(e,t){if(!(e instanceof cc.SpriteFrame?e:cc.spriteFrameCache.getSpriteFrame(e))){if(cleverapps.config.debugMode)throw"No scale9 sprite: "+e;return new cc.Scale9Sprite}var s=new cc.Scale9Sprite(e,cleverapps.UI.getScale9Rect(e,t));return s.spriteFrameName=e,s},createAnimation:function(e){e=e.spine;var t=new cleverapps.Spine(e.json);return t.setAnimation(0,e.openAnimation,!1),e.idleAnimation&&t.setCompleteListener(function(){t.setAnimation(0,e.idleAnimation,!0)}),t},getBrowserName:function(){return cleverapps.UI.browserName?cleverapps.UI.browserName:cleverapps.UI.browserName=(new UAParser).getBrowser().name}},cleverapps.isPixiJs()||(cc.LabelTTF.RenderCmd.prototype._setColorsString=function(){var e=this._displayedColor,
t=this._node,s=t._shadowColor||this._displayedColor,n=t._strokeColor,i=t._textFillColor,o=e.r/255,a=e.g/255,r=e.b/255;this._shadowColorStr="rgba("+(0|o*s.r)+","+(0|a*s.g)+","+(0|r*s.b)+","+t._shadowOpacity+")",this._fillColorStr="rgba("+(0|o*i.r)+","+(0|a*i.g)+","+(0|r*i.b)+", 1)",this._strokeColorStr="rgba("+(0|o*n.r)+","+(0|a*n.g)+","+(0|r*n.b)+","+t._strokeOpacity+")"},cc.LabelTTF.WebGLRenderCmd.prototype._setColorsString=cc.LabelTTF.RenderCmd.prototype._setColorsString,cc.LabelTTF.CacheRenderCmd.prototype._setColorsString=cc.LabelTTF.RenderCmd.prototype._setColorsString,cc.LabelTTF.CanvasRenderCmd.prototype._setColorsString=cc.LabelTTF.RenderCmd.prototype._setColorsString),cleverapps.styles.UI={DRAG_MIN_DIST:5,jumpAnimation:{h:200},jumpCollectAnimation:{dist:{x:100,y:-100}},collectAnimation:{bezierX:700},delta:{y:20,icon:{margin:5}},Avatar:{x:8,top:8,bottom:8},onClick:{ignoreOnTouchMovedThreshold:30},shake:{dx:1,dy:1},TTFText:{verticalAlignment:void 0,baseline:0,safari:{
verticalAlignment:void 0,baseline:0}},CheckBox:{checkImage:bundles.main.frames.goal_done_sign,bgImage:bundles.main.frames.select_friend_checkbox,margin:10}},cleverapps.UI.Scale9Rect={Default:0,TwoPixelX:1,TwoPixelY:2,TwoPixelXY:3},cleverapps.UI.DRAG_THROTTLE=50,cleverapps.UI.CLICK_THROTTLE=500,cleverapps.UI.SOCIAL_CLICK_THROTTLE=cleverapps.UI.CLICK_THROTTLE,cleverapps.UI.BLUR_ANIMATION={FADE:1,CURTAIN:2},cleverapps.isPixiJs()||(cc.PlaySound=cc.ActionInstant.extend({sound:void 0,ctor:function(e,t){cc.FiniteTimeAction.prototype.ctor.call(this),this.sound=e,this.options=t},update:function(e){cleverapps.audio.playSound(this.sound,this.options)},reverse:function(){return this},clone:function(){return new cc.PlaySound(this.sound,this.options)}})),cleverapps.UI.ScrollBarContainer=cc.Node.extend({}),cleverapps.UI.ScrollView=ccui.Layout.extend({ctor:function(e,t){switch(this.options=t||{},this.dir=cleverapps.UI.ScrollView.DIR_NONE,this.onUpdatePositionListener=function(){},
this.onUpdateZoomListener=function(){},this.options.childrenVisibility=void 0===this.options.childrenVisibility?cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_FULLCHECK:this.options.childrenVisibility,this.options.childrenVisibilityPadding=this.options.childrenVisibilityPadding||0,this.options.childrenVisibility){case cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_LINEAR:this.childrenVisibility=new ScrollChildrenLinearVisibility(this);break;case cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_FULLCHECK:this.childrenVisibility=new ScrollChildrenFullCheckVisibility(this)}this._super(),(void 0===this.options.clipping||this.options.clipping)&&this.setClippingEnabled(!0),this.setAnchorPoint2(),this.centerNode=new cc.Node,this.addChild(this.centerNode),!1!==this.options.scrollBarEnabled&&(this.barContainer=new cleverapps.UI.ScrollBarContainer,this.addChild(this.barContainer,2),this.barContainer.setCascadeOpacityEnabled(!0),this.barContainer.setOpacity(0),this.barContainer.runAction(new cc.Sequence(
new cc.DelayTime(.3),new cc.FadeTo(.3,255))),this.barHandler=new ScrollBarHandler(this)),this.zoom=1,this.options.zoom&&(this.zoomHandler=new cleverapps.UI.ZoomHandler(this)),this.scrollHandler=new cleverapps.UI.ScrollHandler(this,{mouseScroll:!this.options.zoom,touchPadding:this.options.touchPadding,outOfBoundaryScale:this.options.outOfBoundaryScale,inertialScrollFactor:this.options.inertialScrollFactor}),e&&this.setInnerContent(e),this.scheduleUpdate()},isEmpty:function(){return!this.innerContent||!this.innerContent.children.length},setContentSize:function(e,t){var s=this.width,n=this.height,i=this.innerContent&&this.innerContent.getPosition();this._super(e,t),s===this.width&&n===this.height||(this.barContainer&&this.barContainer.setContentSize(this.getContentSize()),this.centerNode&&this.centerNode.setPosition(this.width/2,this.height/2),this.innerContent&&(this.calcBorders(),this.scrollToPoint(cc.p(-i.x,-i.y))))},updateVisibility:function(){if(
this.innerContent.setVisibleRect&&this.innerContent.setVisibleRect(this.getVisibleRect()),this.childrenVisibility&&this.currentVisibleChildIds&&!this.isEmpty()&&this.width+this.height!==0){var e,t=this.childrenVisibility.visibleIds(),s=this.innerContent.children;for(e=0;e<this.currentVisibleChildIds.length;e++)s[this.currentVisibleChildIds[e]].hideDirty=!0;for(e=0;e<t.length;e++){(n=s[t[e]]).hideDirty&&delete n.hideDirty,n.visible=!0}for(e=0;e<this.currentVisibleChildIds.length;e++){var n;(n=s[this.currentVisibleChildIds[e]]).hideDirty&&(delete n.hideDirty,n.visible=!1)}this.currentVisibleChildIds=t}},getVisibleRect:function(){return cc.rect(Math.round(this.innerContent.width/2-this.width/this.zoom/2-this.innerContent.x),Math.round(this.innerContent.height/2-this.height/this.zoom/2-this.innerContent.y),Math.round(this.width/this.zoom),Math.round(this.height/this.zoom))},isVisiblePoint:function(e){var t=this.getVisibleRect();return cc.rectContainsPoint(t,e)},calcBorders:function(){if(
this.isEmpty())return this.min=cc.p(0,0),void(this.max=cc.p(0,0));this.min=cc.p(-this.innerContent.width/2+this.width/this.zoom/2,-this.innerContent.height/2+this.height/this.zoom/2),0<this.min.x&&(this.min.x=0),0<this.min.y&&(this.min.y=0),this.max=cc.p(this.innerContent.width/2-this.width/this.zoom/2,this.innerContent.height/2-this.height/this.zoom/2),this.max.x<0&&(this.max.x=0),this.max.y<0&&(this.max.y=0),this.setDirection(),this.barHandler&&this.barHandler.reset()},setInnerContent:function(e){this.innerContent&&this.innerContent.removeFromParent(),this.innerContent=e,this.innerContent.setAnchorPoint2(),this.innerContent.setPositionRound(0,0),this.centerNode.addChild(e),this.width&&this.height?(this.updateInnerContent(),this.scrollToDefault()):this.initChildrenVisibility()},scrollToDefault:function(){this.innerContent&&this.scrollTo(cleverapps.UI.ScrollView.SCROLLS.UPPER_LEFT)},initChildrenVisibility:function(){if(this.childrenVisibility){this.currentVisibleChildIds=[];for(
var e=0;e<this.innerContent.children.length;e++)this.currentVisibleChildIds.push(e)}},updateInnerContent:function(){this.calcBorders(),this.initChildrenVisibility(),this.scrollToPoint(this.normalizePoint(this.getContainerPosition()))},borderTouchScrollIteration:function(e,t,s){s*=.01;var n=this.width/this.zoom/2*s,i=this.height/this.zoom/2*s;t/=this.zoom;var o=this.centerNode.convertTouchToNodeSpace(e),a=0,r=0,l=this.getContainerPosition();o.x<-n&&(a=l.x-t>=this.min.x?-t:this.min.x-l.x),o.x>n&&(a=l.x+t<=this.max.x?t:this.max.x-l.x),o.y<-i&&(r=l.y-t>=this.min.y?-t:this.min.y-l.y),o.y>i&&(r=l.y+t<=this.max.y?t:this.max.y-l.y),(a||r)&&this.scrollToPoint(cc.p(l.x+a,l.y+r))},calcNodeDelta:function(e,t){var s=cleverapps.extend({left:1,right:1,top:1,bottom:1},t&&t.visibleBox),n=e.getBoundingBox(),i=cc.p(n.x,n.y),o=cc.p(n.x+n.width,n.y+n.height);i=this.centerNode.convertToNodeSpace(e.getParent().convertToWorldSpace(i)),o=this.centerNode.convertToNodeSpace(e.getParent().convertToWorldSpace(o))
;var a=cc.p(-this.width/this.zoom/2*s.left,-this.height/this.zoom/2*s.bottom),r=cc.p(this.width/this.zoom/2*s.right,this.height/this.zoom/2*s.top),l=cc.p(0,0);return i.x<a.x&&(l.x=-(a.x-i.x)),o.x>r.x&&(l.x=o.x-r.x),i.y<a.y&&(l.y=-(a.y-i.y)),o.y>r.y&&(l.y=o.y-r.y),l},isNodeVisible:function(e,t){var s=this.calcNodeDelta(e,t);return 0===s.x&&0===s.y},scrollToMakeNodeVisible:function(e,t,s){var n=this.calcNodeDelta(e,s);this.scrollHandler.startAutoScroll(n,t,s)},scrollTo:function(e,t,s){var n=(s=s||{}).callback;if(void 0!==e){switch(e){case cleverapps.UI.ScrollView.SCROLLS.UPPER_LEFT:e=cc.p(this.min.x,this.max.y);break;case cleverapps.UI.ScrollView.SCROLLS.CENTER:e=cc.p(0,0);break;case cleverapps.UI.ScrollView.SCROLLS.LOWER_RIGHT:e=cc.p(this.max.x,this.min.y);break;default:cleverapps.isGameObject(e)&&(e=this.innerContent.convertToNodeSpace(e.getParent().convertToWorldSpace(e.getPosition()))),e.x-=this.innerContent.width/2,e.y-=this.innerContent.height/2}e=this.normalizePoint(e),
t?this.scrollHandler.startAutoScroll(cc.pSub(e,this.getContainerPosition()),t,s):(this.scrollToPoint(e),n&&n())}else n&&n()},scrollBy:function(e,t,s){var n=cc.pAdd(e,this.getContainerPosition());n.x+=this.innerContent.width/2,n.y+=this.innerContent.height/2,this.scrollTo(n,t,s)},zoomTo:function(e,t){this.zoomHandler.zoomTo(e,t)},update:function(e){this._super(e),this.scrollHandler.processAutoScroll(e),this.zoomHandler&&this.zoomHandler.processZoom(e)},getCurScrollPercent:function(){if(!this.innerContent)return{x:0,y:0};var e=this.max.x-this.min.x,t=this.max.y-this.min.y;return{x:0!==e?(this.innerContent.x-this.min.x)/e*100:0,y:0!==t?(this.innerContent.y-this.min.y)/t*100:0}},normalizePoint:function(e){return{x:Math.max(this.min.x,Math.min(this.max.x,e.x)),y:Math.max(this.min.y,Math.min(this.max.y,e.y))}},getContainerPosition:function(){return cc.p(-this.innerContent.x,-this.innerContent.y)},getCurrentPosition:function(){var e=this.innerContent.getPosition();return{
x:-e.x+this.innerContent.width/2,y:-e.y+this.innerContent.height/2}},scrollToPoint:function(e){this.innerContent.setPosition(-e.x,-e.y),this.updateVisibility(),this.barHandler&&this.barHandler.updatePos(),this.options.containerMovedListener&&this.options.containerMovedListener(),this.onUpdatePositionListener()},scrollToPercent:function(e,t){var s;if(e=Math.min(100,Math.max(0,e)),this.dir&cleverapps.UI.ScrollView.DIR_VERTICAL){var n=(this.max.y-this.min.y)*e/100+this.min.y;s=cc.p(this.innerContent.x,n)}else{var i=(this.max.x-this.min.x)*e/100+this.min.x;s=cc.p(i,this.innerContent.y)}t?this.scrollHandler.startAutoScroll(cc.pSub(s,this.getContainerPosition()),t):this.scrollToPoint(s)},stopAutoScroll:function(){this.scrollHandler.stopAutoScroll()},setDirection:function(){this.options.direction?this.dir=this.options.direction:(this.dir=cleverapps.UI.ScrollView.DIR_BOTH,this.min.y===this.max.y&&(this.dir^=cleverapps.UI.ScrollView.DIR_VERTICAL),this.min.x===this.max.x&&(
this.dir^=cleverapps.UI.ScrollView.DIR_HORIZONTAL))},getInnerContainer:function(){return this.innerContent},setBarPadding:function(e){this.barHandler&&this.barHandler.setPadding(e)}}),cleverapps.UI.ScrollView.SCROLLS={UPPER_LEFT:0,CENTER:1,LOWER_RIGHT:2},cleverapps.UI.ScrollView.DIR_NONE=0,cleverapps.UI.ScrollView.DIR_VERTICAL=1,cleverapps.UI.ScrollView.DIR_HORIZONTAL=2,cleverapps.UI.ScrollView.DIR_BOTH=cleverapps.UI.ScrollView.DIR_VERTICAL|cleverapps.UI.ScrollView.DIR_HORIZONTAL,cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_NONE=0,cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_LINEAR=1,cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_FULLCHECK=2;var ScrollBarHandler=function(e){this.scroll=e};ScrollBarHandler.prototype.reset=function(){!this.barY&&this.scroll.dir&cleverapps.UI.ScrollView.DIR_VERTICAL&&this.scroll.min.y!==this.scroll.max.y&&(this.barY=new ScrollBar(this.scroll,cleverapps.UI.ScrollView.DIR_VERTICAL)),
!this.barX&&this.scroll.dir&cleverapps.UI.ScrollView.DIR_HORIZONTAL&&this.scroll.min.x!==this.scroll.max.x&&(this.barX=new ScrollBar(this.scroll,cleverapps.UI.ScrollView.DIR_HORIZONTAL)),this.barX&&this.barX.reset(),this.barY&&this.barY.reset(),this.updatePos()},ScrollBarHandler.prototype.setAutoHide=function(e){this.barX&&this.barX.setAutoHideEnabled(e),this.barY&&this.barY.setAutoHideEnabled(e)},ScrollBarHandler.prototype.setPadding=function(e){this.barPadding=e,this.barX&&this.barX.setPadding(this.barPadding),this.barY&&this.barY.setPadding(this.barPadding)},ScrollBarHandler.prototype.updatePos=function(){var e=this.scroll.scrollHandler.getHowMuchOutOfBoundary();this.barY&&this.barY.onScrolled(e),this.barX&&this.barX.onScrolled(e)},ScrollBarHandler.prototype.onTouchBegan=function(){this.barY&&this.barY.onTouchBegan(),this.barX&&this.barX.onTouchBegan()},ScrollBarHandler.prototype.onTouchEnded=function(){this.barY&&this.barY.onTouchEnded(),this.barX&&this.barX.onTouchEnded()}
;var ScrollBar=cc.Node.extend({ctor:function(e,t){this._super(),this.scroll=e,this.dir=t,this._touching=!1,this._autoHideRemainingTime=0,this._marginFromBoundary=ScrollBar.DEFAULT_MARGIN,this._marginForLength=ScrollBar.DEFAULT_MARGIN,this.opacity=255*ScrollBar.DEFAULT_SCROLLBAR_OPACITY,this.autoHideTime=ScrollBar.DEFAULT_AUTO_HIDE_TIME,this._autoHideEnabled=!0,this.init(),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),e.barContainer.addChild(this),this.setAutoHideEnabled(!1),this.setPadding(this.scroll.barHandler.barPadding),this.addControls(),this.setWidth(cleverapps.styles.ScrollBar.barWidth)},init:function(){this.bar=new cc.Scale9Sprite(bundles.scrollbar.frames.scrollbar_png),this.bar.setAnchorPoint2(.5,0),this.addChild(this.bar),this.setColor(ScrollBar.DEFAULT_COLOR),this.onScrolled(cc.p(0,0)),cc.Node.prototype.setOpacity.call(this,0),this._autoHideRemainingTime=0,this.dir===cleverapps.UI.ScrollView.DIR_HORIZONTAL&&this.setRotation(90)},
setPositionFromCorner:function(e){this.dir===cleverapps.UI.ScrollView.DIR_VERTICAL?(this._marginForLength=e.y,this._marginFromBoundary=e.x):(this._marginForLength=e.x,this._marginFromBoundary=e.y)},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.scheduleUpdate()},getPositionFromCorner:function(){return this.dir===cleverapps.UI.ScrollView.DIR_VERTICAL?cc.p(this._marginFromBoundary,this._marginForLength):cc.p(this._marginForLength,this._marginFromBoundary)},setWidth:function(e){this.bar.width=e},setAutoHideEnabled:function(e){this._autoHideEnabled=e,!this._autoHideEnabled&&!this._touching&&this._autoHideRemainingTime<=0?cc.Node.prototype.setOpacity.call(this,this.opacity):cc.Node.prototype.setOpacity.call(this,0)},isAutoHideEnabled:function(){return this._autoHideEnabled},setOpacity:function(e){this._opacity=e},getOpacity:function(){return this._opacity},_updateLength:function(e){this.bar.height=e},_processAutoHide:function(e){
!this._autoHideEnabled||this._autoHideRemainingTime<=0||this._touching||(this._autoHideRemainingTime-=e,this._autoHideRemainingTime<=this.autoHideTime&&(this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime),cc.Node.prototype.setOpacity.call(this,this._opacity*(this._autoHideRemainingTime/this.autoHideTime))))},update:function(e){this._processAutoHide(e)},onTouchBegan:function(){this._autoHideEnabled&&(this._touching=!0)},onTouchEnded:function(){this._autoHideEnabled&&(this._touching=!1,this._autoHideRemainingTime<=0||(this._autoHideRemainingTime=this.autoHideTime))},_calculateLength:function(e,t,s){var n=e;if(0!==s){n+=20*(0<s?s:-s)}var i=t/n;return Math.abs(t-2*this._marginForLength)*i},_calculatePosition:function(e,t,s,n,i){var o=e-t;0!==n&&(o+=Math.abs(n));var a=0;0!==o&&(a=s/o,a=Math.max(a,0),a=Math.min(a,1));var r=(t-i-2*this._marginForLength)*a+this._marginForLength;return this.dir===cleverapps.UI.ScrollView.DIR_VERTICAL?cc.p(
this.scroll.width-this._marginFromBoundary,r):cc.p(r,this._marginFromBoundary)},setPadding:function(e){e=e||{};var t=cleverapps.styles.ScrollBar,s=void 0!==e.cornerPadding?e.cornerPadding:t.cornerPadding,n=void 0!==e.sidePadding?e.sidePadding:t.sidePadding,i=cc.p(this.dir===cleverapps.UI.ScrollView.DIR_VERTICAL?n:s,this.dir===cleverapps.UI.ScrollView.DIR_VERTICAL?s:n);this.setPositionFromCorner(i),this.onScrolled(this.scroll.scrollHandler.getHowMuchOutOfBoundary())},reset:function(){this.scroll.dir&this.dir?this.setVisible(!0):this.setVisible(!1)},onScrolled:function(e){this._autoHideEnabled&&(this._autoHideRemainingTime=this.autoHideTime,cc.Node.prototype.setOpacity.call(this,this.opacity));var t=this.scroll.getInnerContainer(),s=0,n=0,i=0,o=0;this.dir===cleverapps.UI.ScrollView.DIR_VERTICAL?(s=t.height,n=this.scroll.height,i=e.y,o=-t.getPositionY()+(this.scroll.max.y-this.scroll.min.y)/2):this.dir===cleverapps.UI.ScrollView.DIR_HORIZONTAL&&(s=t.width,n=this.scroll.width,i=e.x,
o=-t.getPositionX()+(this.scroll.max.x-this.scroll.min.x)/2);var a=this._calculateLength(s,n,i),r=this._calculatePosition(s,n,o,i,a);this._updateLength(a),this.setPosition(r)},getActualContentSize:function(){return this.bar.getContentSize()},addControls:function(){cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onBarTouchBegan.bind(this),onTouchMoved:this.onBarTouchMoved.bind(this),onTouchEnded:this.onBarTouchEnded.bind(this),onTouchCancelled:this.onTouchEnded.bind(this)},this)},onBarTouchBegan:function(e){if(!this.visible)return!1;var t=this.convertTouchToNodeSpace(e),s=this.getActualContentSize();return cc.rectContainsPoint(cc.rect(-s.width/2,0,s.width,s.height),t)?(this.scroll.scrollHandler.stopAutoScroll(),!0):void 0},onBarTouchMoved:function(e){var t=this.convertToNodeSpace(e.getLocation()),s=this.convertToNodeSpace(e.getPreviousLocation()),n=cc.pSub(t,s),i=this.getPosToPercent(n);this.scroll.scrollToPercent(i)},
getPosToPercent:function(e){if(this.dir===cleverapps.UI.ScrollView.DIR_VERTICAL){var t=this.scroll.height-2*this.getPositionFromCorner().y-this.getActualContentSize().height;return(this.y+e.y-this.getPositionFromCorner().y)/t*100}t=this.scroll.width-2*this.getPositionFromCorner().x-this.getActualContentSize().height;return(this.x+e.y-this.getPositionFromCorner().x)/t*100},onBarTouchEnded:function(e){}});Object.defineProperty(ScrollBar.prototype,"opacity",{get:function(){return this.getOpacity()},set:function(e){this.setOpacity(e)}}),cleverapps.styles.ScrollBar={barWidth:12,cornerPadding:20,sidePadding:20},ScrollBar.DEFAULT_COLOR=new cc.Color(52,65,87),ScrollBar.DEFAULT_MARGIN=20,ScrollBar.DEFAULT_AUTO_HIDE_TIME=.2,ScrollBar.DEFAULT_SCROLLBAR_OPACITY=.4,ScrollBar.BASE_WIDTH=12;var ScrollChildrenLinearVisibility=function(e){this.scroll=e};ScrollChildrenLinearVisibility.prototype.visibleIds=function(){var e,t;if(this.scroll.innerContent.children.length<=1)e=0,
t=this.scroll.innerContent.children.length;else{var s,n,i=this.scroll.innerContent.children.length-1,o=this.scroll.innerContent.children[0].getPosition(),a=this.scroll.innerContent.children[i].getPosition();a.x-=o.x,a.x/=i,a.y-=o.y,a.y/=i,0!==a.y?(s=a.y,n=this.scroll.innerContent.children[0].height/2,e=(-this.scroll.innerContent.y-o.y+this.scroll.innerContent.height/2-this.scroll.height/2)/s,t=(this.scroll.height+2*n)/s):(s=a.x,n=this.scroll.innerContent.children[0].width/2,e=(-this.scroll.innerContent.x-o.x+this.scroll.innerContent.width/2-this.scroll.width/2)/s,t=(this.scroll.width+2*n)/s),t<0&&(e-=t=-t),e=Math.ceil(e-n/Math.abs(s)),t=Math.floor(t+2*n/Math.abs(s))}for(var r=[],l=0;l<t;l++)this.scroll.innerContent.children[e+l]&&r.push(e+l);return r};var ScrollChildrenFullCheckVisibility=function(e){this.scroll=e};ScrollChildrenFullCheckVisibility.prototype.visibleIds=function(){for(var e=[],t=this.scroll.zoom,s=this.scroll.options.childrenVisibilityPadding||0,
n=0;n<this.scroll.innerContent.children.length;n++){var i=this.scroll.innerContent.children[n],o=i.x-this.scroll.innerContent.width/2,a=i.y-this.scroll.innerContent.height/2;-this.scroll.innerContent.x-this.scroll.width/t/2-i.width/2-s<=o&&o<=-this.scroll.innerContent.x+this.scroll.width/t/2+i.width/2+s&&-this.scroll.innerContent.y-this.scroll.height/t/2-i.height/2-s<=a&&a<=-this.scroll.innerContent.y+this.scroll.height/t/2+i.height/2+s&&e.push(n)}return e},cleverapps.UI.HideHandler=function(e,t){switch(this.target=e,this.initialized=!1,this.direction=t||cleverapps.UI.HORIZONTAL,this.isShow=!0,this.paused=!1,e.hide||(e.hide=e.createListener(this.hide.bind(this))),e.show||(e.show=e.createListener(this.show.bind(this))),e.isShown=e.createListener(function(){return this.isShow}.bind(this)),this.direction){case cleverapps.UI.SCALE_ANIMATION:e.hideAnimation||(e.hideAnimation=e.createListener(this.scaleHideAnimation.bind(this))),e.showAnimation||(e.showAnimation=e.createListener(
this.scaleShowAnimation.bind(this)));break;case cleverapps.UI.OPACITY_ANIMATION:e.hideAnimation||(e.hideAnimation=e.createListener(this.opacityHideAnimation.bind(this))),e.showAnimation||(e.showAnimation=e.createListener(this.opacityShowAnimation.bind(this)));break;default:e.hideAnimation||(e.hideAnimation=e.createListener(this.hideAnimation.bind(this))),e.showAnimation||(e.showAnimation=e.createListener(this.showAnimation.bind(this)))}e.showForDuration=e.createListener(this.showForDuration.bind(this)),e.toggle=e.createListener(this.toggle.bind(this)),e.pauseHideHandler=e.createListener(this.pauseHideHandler.bind(this)),e.resumeHideHandler=e.createListener(this.resumeHideHandler.bind(this)),e.parent&&this.initialize()},cleverapps.UI.HideHandler.prototype.pauseHideHandler=function(){this.paused=!0},cleverapps.UI.HideHandler.prototype.resumeHideHandler=function(){this.paused=!1},cleverapps.UI.HideHandler.prototype.toggle=function(e,t){e?this.show(t):this.hide(t)},
cleverapps.UI.HideHandler.prototype.showForDuration=function(e,t){t=t||{};this.clearTimeouts(),this.show(),this.callbackTimeout=setTimeout(function(){e&&e()},500),this.hideTimeout=setTimeout(function(){this.hide(),this.clearTimeouts()}.bind(this),2e3)},cleverapps.UI.HideHandler.prototype.postponeHiding=function(e){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.hide(),this.clearTimeouts()}.bind(this),e))},cleverapps.UI.HideHandler.prototype.clearTimeouts=function(){this.callbackTimeout&&(clearTimeout(this.callbackTimeout),delete this.callbackTimeout),this.hideTimeout&&(clearTimeout(this.hideTimeout),delete this.hideTimeout)},cleverapps.UI.HideHandler.prototype.showAnimation=function(e,t,s){if(s=s||{},this.target.stopAllActions(),e)return this.target.setPosition(this.originalPosition),void(this.target.visible=!0);var n=new cc.MoveTo(s.duration||.3,this.originalPosition);s.easing&&n.easing(new cc.easeBackOut),this.target.visible=!0,
this.target.runAction(new cc.Sequence(new cc.DelayTime(t||0),n))},cleverapps.UI.HideHandler.prototype.hideAnimation=function(e,t,s){if(s=s||{},this.target.stopAllActions(),e)return this.target.setPosition(this.hidePosition),void(this.target.visible=!1);var n=new cc.MoveTo(s.duration||.15,this.hidePosition);s.easing&&n.easing(new cc.easeBackIn),this.target.runAction(new cc.Sequence(new cc.DelayTime(t||0),n,new cc.CallFunc(function(){this.target.visible=!1}.bind(this))))},cleverapps.UI.HideHandler.prototype.opacityShowAnimation=function(e,t){this.target.stopAllActions();var s=this.target.baseOpacity||255;if(e)return this.target.visible=!0,void this.target.setOpacity(s);this.target.visible=!0,this.target.runAction(new cc.Sequence(new cc.DelayTime(t||0),new cc.FadeTo(.3,s)))},cleverapps.UI.HideHandler.prototype.opacityHideAnimation=function(e,t){if(this.target.stopAllActions(),e)return this.target.setOpacity(0),void(this.target.visible=!1);this.target.runAction(new cc.Sequence(
new cc.DelayTime(t||0),new cc.FadeTo(.15,0),new cc.CallFunc(function(){this.target.visible=!1}.bind(this))))},cleverapps.UI.HideHandler.prototype.scaleShowAnimation=function(e,t){this.target.stopAllActions();var s=this.target.baseScale||1;if(e)return this.target.visible=!0,void this.target.setScale(s);this.target.visible=!0,this.target.runAction(new cc.Sequence(new cc.DelayTime(t||0),new cc.ScaleTo(.3,s)))},cleverapps.UI.HideHandler.prototype.scaleHideAnimation=function(e,t){if(this.target.stopAllActions(),e)return this.target.setScale(0),void(this.target.visible=!1);this.target.runAction(new cc.Sequence(new cc.DelayTime(t||0),new cc.ScaleTo(.15,0),new cc.CallFunc(function(){this.target.visible=!1}.bind(this))))},cleverapps.UI.HideHandler.prototype.show=function(e,t,s){(!0!==this.isShow||e)&&(this.isShow=!0,this.initialized&&!this.paused&&(this.clearTimeouts(),this.target.showAnimation(e,t,s)))},cleverapps.UI.HideHandler.prototype.hide=function(e,t,s){(!1!==this.isShow||e)&&(
this.isShow=!1,this.initialized&&!this.paused&&this.target.hideAnimation(e,t,s))},cleverapps.UI.HideHandler.prototype.initialize=function(){if(!this.initialized){if(this.initialized=!0,this.target.originalPosition?this.originalPosition=this.target.originalPosition:this.originalPosition=this.target.getPosition(),this.target.hidePosition)this.hidePosition=this.target.calculatePositionRound(this.target.hidePosition);else{var e,t=this.target.getParent().convertToWorldSpace(this.originalPosition),s=cc.director.getWinSize();this.direction===cleverapps.UI.VERTICAL?(e=t.y>s.height/2?s.height-t.y:-t.y,this.hidePosition=cc.p(this.originalPosition.x,this.originalPosition.y+2*e)):(e=t.x>s.width/2?s.width-t.x:-t.x,this.hidePosition=cc.p(this.originalPosition.x+2*e,this.originalPosition.y))}this.paused||(!1===this.isShow?this.target.hideAnimation(!0):this.target.showAnimation(!0))}},cleverapps.UI.ScrollHandler=function(e,t){t=t||{},this.target=e,this.bounceEnabled=!0,
this.outOfBoundaryScale=t.outOfBoundaryScale||.5,this.inertialScrollFactor=t.inertialScrollFactor||1,this.touchPadding=t.touchPadding,this.initAutoScrollParams(),!1!==t.mouseScroll&&this.enableMouseWheelScroll(),this.enableTouchScroll()},cleverapps.UI.ScrollHandler.prototype.enableMouseWheelScroll=function(){"mouse"in cc.sys.capabilities&&cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseScroll:function(e){this.target.isDisplayed()&&cc.rectContainsPoint(cc.rect(0,0,this.target.width,this.target.height),this.target.convertToNodeSpace(e.getLocation()))&&(this.handleMouseWheel(e.getScrollY()),e.stopPropagation())}.bind(this)},this.target)},cleverapps.UI.ScrollHandler.prototype.handleMouseWheel=function(e){if(0!=(this.target.dir&cleverapps.UI.ScrollView.DIR_VERTICAL)){var t=this.getHowMuchOutOfBoundary();!this.fltEqualZero(t)&&(t.y<0&&0<e||0<t.y&&e<0)||this.lastMouseWheelTime&&this.lastMouseWheelTime>Date.now()-100||((!this.mouseWheelSpeed||this.lastMouseWheelTime<Date.now(
)-500||e*this.mouseWheelSpeed<0)&&(this.mouseWheelSpeed=0),Math.abs(e)<65&&this.lastMouseWheelTime&&this.lastMouseWheelTime>Date.now()-2e3||(this.mouseWheelSpeed+=cleverapps.styles.ScrollHandler.mouseWheelAcceleration*Math.sign(e),Math.abs(this.mouseWheelSpeed)>cleverapps.styles.ScrollHandler.mouseWheelMaxSpeed&&(this.mouseWheelSpeed=Math.sign(this.mouseWheelSpeed)*cleverapps.styles.ScrollHandler.mouseWheelMaxSpeed),Math.abs(this.mouseWheelSpeed)<cleverapps.styles.ScrollHandler.mouseWheelMinSpeed&&(this.mouseWheelSpeed=Math.sign(this.mouseWheelSpeed)*cleverapps.styles.ScrollHandler.mouseWheelMinSpeed),this.startInertialScroll(cc.p(0,this.mouseWheelSpeed)),this.lastMouseWheelTime=Date.now()))}},cleverapps.UI.ScrollHandler.prototype.enableTouchScroll=function(){var e=cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this),
onTouchCancelled:this.onTouchEnded.bind(this)},this.target);this.target.scrollListener=e},cleverapps.UI.ScrollHandler.prototype.onTouchBegan=function(e){var t=0,s=this.target.width,n=0,i=this.target.height;if(this.touchPadding&&(this.touchPadding.top&&(i-=this.touchPadding.top),this.touchPadding.bottom&&(n+=this.touchPadding.bottom,i-=this.touchPadding.bottom),this.touchPadding.right&&(s-=this.touchPadding.right),this.touchPadding.left&&(t+=this.touchPadding.left,s-=this.touchPadding.left)),!this.target.touchScrollDisabled&&this.target.isDisplayed()&&cc.rectContainsPoint(cc.rect(t,n,s,i),this.target.convertTouchToNodeSpace(e)))return this.handlePress(),!0},cleverapps.UI.ScrollHandler.prototype.onTouchMoved=function(e){this.handleMove(this.getTouchDelta(e))},cleverapps.UI.ScrollHandler.prototype.onTouchEnded=function(e){this.handleRelease(this.getTouchDelta(e,!0))},cleverapps.UI.ScrollHandler.prototype.getTouchDelta=function(e,t){var s=this.target.convertToNodeSpace(e.getLocation()),
n=this.target.convertToNodeSpace(e.getPreviousLocation());t&&!cc.rectContainsPoint(cc.rect(0,0,this.target.width,this.target.height),s)&&(s=n);var i=cc.pMult(cc.pSub(n,s),1/this.target.zoom);return 0==(this.target.dir&cleverapps.UI.ScrollView.DIR_HORIZONTAL)&&(i.x=0),0==(this.target.dir&cleverapps.UI.ScrollView.DIR_VERTICAL)&&(i.y=0),i},cleverapps.UI.ScrollHandler.prototype.initAutoScrollParams=function(){this._outOfBoundaryAmountDirty=!0,this._outOfBoundaryAmount=cc.p(0,0)},cleverapps.UI.ScrollHandler.prototype.afterContainerScale=function(){this._outOfBoundaryAmountDirty=!0;var e=this.getHowMuchOutOfBoundary();this.fltEqualZero(e)||this.startAutoScroll(e,0)},cleverapps.UI.ScrollHandler.prototype.afterContainerMove=function(){this._outOfBoundaryAmountDirty=!0,this.target.barHandler&&this.target.barHandler.updatePos(),!this.bounceEnabled||this.inTouch||this._autoScrolling||this.startBounceBackIfNeeded()},cleverapps.UI.ScrollHandler.prototype.startBounceBackIfNeeded=function(){if(
!this.bounceEnabled)return!1;var e=this.getHowMuchOutOfBoundary();if(this.fltEqualZero(e))return!1;return this.startAutoScroll(e,1),!0},cleverapps.UI.ScrollHandler.prototype.handlePress=function(){this.inTouch=!0,this.stopAutoScroll(),this._touchMovePreviousTimestamp=(new Date).getTime(),this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[],this.target.barHandler&&this.target.barHandler.onTouchBegan()},cleverapps.UI.ScrollHandler.prototype.handleMove=function(e){if(this.bounceEnabled){var t=this.getHowMuchOutOfBoundary(e);e.x*=0===t.x?1:this.outOfBoundaryScale,e.y*=0===t.y?1:this.outOfBoundaryScale}else{t=this.getHowMuchOutOfBoundary(e);e.x+=t.x,e.y+=t.y}this.gatherMoveData(e);var s=cc.pAdd(this.target.getContainerPosition(),e);this.moveContainer(s)},cleverapps.UI.ScrollHandler.prototype.gatherMoveData=function(e){for(;5<=this._touchMoveDisplacements.length;)this._touchMoveDisplacements.splice(0,1),this._touchMoveTimeDeltas.splice(0,1);this._touchMoveDisplacements.push(e)
;var t=(new Date).getTime();this._touchMoveTimeDeltas.push((t-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=t},cleverapps.UI.ScrollHandler.prototype.handleRelease=function(e){if(this.inTouch=!1,this.gatherMoveData(e),!this.startBounceBackIfNeeded()){var t=this.calcTouchVelocity();0===t.x&&0===t.y||this.startInertialScroll(t)}this.target.barHandler&&this.target.barHandler.onTouchEnded()},cleverapps.UI.ScrollHandler.prototype.calcAutoScrollPercentage=function(){var e=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);return this._autoScrollEasing?e=this._autoScrollEasing.easing(e):this._autoScrollAttenuate&&(e=(e-=1)*e*e*e*e+1),e},cleverapps.UI.ScrollHandler.prototype.processAutoScroll=function(e){if(this._autoScrolling&&!this.inTouch){var t=1,s=this.calcAutoScrollPercentage();0<=s&&s<=1&&this.isNecessaryAutoScrollBrake()&&(t=.05),this._autoScrollAccumulatedTime+=e*(1/t),s=this.calcAutoScrollPercentage(),Math.abs(s-1)<=1e-4&&(s=1,
this.stopAutoScroll());var n=cc.pAdd(this._autoScrollStartPosition,cc.pMult(this._autoScrollTargetDelta,s));n=cc.pAdd(this._autoScrollBrakingStartPosition,cc.pMult(cc.pSub(n,this._autoScrollBrakingStartPosition),t)),this.moveContainer(n)}},cleverapps.UI.ScrollHandler.prototype.moveContainer=function(e){this.target.scrollToPoint(e),this.afterContainerMove()},cleverapps.UI.ScrollHandler.prototype.isOutOfBoundary=function(){var e=this.getHowMuchOutOfBoundary();return!this.fltEqualZero(e)},cleverapps.UI.ScrollHandler.prototype.calcTouchVelocity=function(){var e=this._touchMoveTimeDeltas.reduce(function(e,t){return e+t},0);if(0===e||.5<=e)return cc.p(0,0);var t=cc.p(0,0);return this._touchMoveDisplacements.forEach(function(e){t.x+=e.x,t.y+=e.y}),cc.pMult(t,1/e)},cleverapps.UI.ScrollHandler.prototype.isNecessaryAutoScrollBrake=function(){if(this._autoScrollBraking)return!0;if(this.isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,
this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.target.getContainerPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},cleverapps.UI.ScrollHandler.prototype.startInertialScroll=function(e){var t=.7*this.inertialScrollFactor,s=cc.pMult(e,t),n=this.calculateAutoScrollTimeByInitialSpeed(cc.pLength(e));this.startAutoScroll(s,n)},cleverapps.UI.ScrollHandler.prototype.calculateAutoScrollTimeByInitialSpeed=function(e){return Math.sqrt(Math.sqrt(e/5))*this.inertialScrollFactor},cleverapps.UI.ScrollHandler.prototype.fltEqualZero=function(e){return Math.abs(e.x)<=1e-4&&Math.abs(e.y)<=1e-4},cleverapps.UI.ScrollHandler.prototype.startAutoScroll=function(e,t,s){s=s||{},this._autoScrolling=!0,this._autoScrollTargetDelta=e,this._autoScrollAttenuate=!0,this._autoScrollStartPosition=this.target.getContainerPosition(),this._autoScrollTotalTime=t,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.p(0,0),
this._autoScrollCallback=s.callback,this._autoScrollEasing=s.easing;var n=this.getHowMuchOutOfBoundary();if(!this.fltEqualZero(n)){this._autoScrollCurrentlyOutOfBoundary=!0;var i=this.getHowMuchOutOfBoundary(e);(0<n.x*i.x||0<n.y*i.y)&&(this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.target.getContainerPosition())}},cleverapps.UI.ScrollHandler.prototype.stopAutoScroll=function(){this._autoScrolling=!1,this._autoScrollCallback&&(this._autoScrollCallback(),delete this._autoScrollCallback)},cleverapps.UI.ScrollHandler.prototype.getHowMuchOutOfBoundary=function(e){if(void 0===e&&(e=cc.p(0,0)),0===e.x&&0===e.y&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var t=cc.p(0,0),s=this.target.getContainerPosition();return s.x+e.x>this.target.max.x?t.x=this.target.max.x-(s.x+e.x):s.x+e.x<this.target.min.x&&(t.x=this.target.min.x-(s.x+e.x)),s.y+e.y<this.target.min.y?t.y=this.target.min.y-(s.y+e.y):s.y+e.y>this.target.max.y&&(t.y=this.target.max.y-(s.y+e.y)),
0===e.x&&0===e.y&&(this._outOfBoundaryAmount=t,this._outOfBoundaryAmountDirty=!1),t},cleverapps.UI.ScrollHandler.prototype.isProcessing=function(){return this.inTouch||this._autoScrolling},cleverapps.styles.ScrollHandler={mouseWheelAcceleration:200,mouseWheelMinSpeed:500,mouseWheelMaxSpeed:2e3},cleverapps.UI.MapScrollHandler=function(e,t){t=t||{},this.target=e,this.bounceEnabled=!1,this.initAutoScrollParams()},cleverapps.UI.MapScrollHandler.prototype.initAutoScrollParams=function(){this._outOfBoundaryAmountDirty=!0,this._outOfBoundaryAmount=cc.p(0,0)},cleverapps.UI.MapScrollHandler.prototype.afterContainerMove=function(){this._outOfBoundaryAmountDirty=!0},cleverapps.UI.MapScrollHandler.prototype.handlePress=function(){this._autoScrolling=!1,this._touchMovePreviousTimestamp=(new Date).getTime(),this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[]},cleverapps.UI.MapScrollHandler.prototype.gatherMoveData=function(e){var t=this.getHowMuchOutOfBoundary(e);for(e.x+=t.x,
e.y+=t.y;5<=this._touchMoveDisplacements.length;)this._touchMoveDisplacements.splice(0,1),this._touchMoveTimeDeltas.splice(0,1);this._touchMoveDisplacements.push(e);var s=(new Date).getTime();this._touchMoveTimeDeltas.push((s-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=s},cleverapps.UI.MapScrollHandler.prototype.handleRelease=function(e){this.gatherMoveData(e);var t=this.calcTouchVelocity();0===t.x&&0===t.y||this.startInertialScroll(t)},cleverapps.UI.MapScrollHandler.prototype.processAutoScroll=function(e){if(this._autoScrolling){var t=this.isNecessaryAutoScrollBrake()?.05:1;this._autoScrollAccumulatedTime+=e*(1/t);var s=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(s=(s-=1)*s*s*s*s+1);var n=cc.pAdd(this._autoScrollStartPosition,cc.pMult(this._autoScrollTargetDelta,s)),i=Math.abs(s-1)<=1e-4,o=cc.pSub(n,this.target.getContainerPosition()),a=this.getHowMuchOutOfBoundary(o);this.fltEqualZero(a)||(n.x+=a.x,
n.y+=a.y,i=!0),i&&(this._autoScrolling=!1),this.target.moveContainer(cc.pSub(n,this.target.getContainerPosition()))}},cleverapps.UI.MapScrollHandler.prototype.isOutOfBoundary=function(){var e=this.getHowMuchOutOfBoundary();return!this.fltEqualZero(e)},cleverapps.UI.MapScrollHandler.prototype.calcTouchVelocity=function(){var e=this._touchMoveTimeDeltas.reduce(function(e,t){return e+t},0);if(0===e||e>=this._touchTotalTimeThreshold)return cc.p(0,0);var t=cc.p(0,0);return this._touchMoveDisplacements.forEach(function(e){t.x+=e.x,t.y+=e.y}),cc.pMult(t,1/e)},cleverapps.UI.MapScrollHandler.prototype.isNecessaryAutoScrollBrake=function(){if(this._autoScrollBraking)return!0;if(this.isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getContainerPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},
cleverapps.UI.MapScrollHandler.prototype.startInertialScroll=function(e){var t=cc.pMult(e,.7),s=this.calculateAutoScrollTimeByInitialSpeed(cc.pLength(e));this.startAutoScroll(t,s,!0)},cleverapps.UI.MapScrollHandler.prototype.calculateAutoScrollTimeByInitialSpeed=function(e){return Math.sqrt(Math.sqrt(e/5))},cleverapps.UI.MapScrollHandler.prototype.fltEqualZero=function(e){return Math.abs(e.x)<=1e-4&&Math.abs(e.y)<=1e-4},cleverapps.UI.MapScrollHandler.prototype.startAutoScroll=function(e,t){this._autoScrolling=!0,this._autoScrollTargetDelta=e,this._autoScrollAttenuate=!0,this._autoScrollStartPosition=this.target.getContainerPosition(),this._autoScrollTotalTime=t,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.p(0,0);var s=this.getHowMuchOutOfBoundary();if(!this.fltEqualZero(s)){this._autoScrollCurrentlyOutOfBoundary=!0;var n=this.getHowMuchOutOfBoundary(e);(0<s.x*n.x||0<s.y*n.y)&&(this._autoScrollBraking=!0)}},
cleverapps.UI.MapScrollHandler.prototype.stopAutoScroll=function(){this._autoScrolling=!1},cleverapps.UI.MapScrollHandler.prototype.getHowMuchOutOfBoundary=function(e){if(void 0===e&&(e=cc.p(0,0)),0===e.x&&0===e.y&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var t=cc.p(0,0),s=this.target.container.getBoundingBox();return 0<s.x+e.x?t.x=-(s.x+e.x):s.width+s.x+e.x<this.target.width&&(t.x=this.target.width-(s.width+s.x+e.x)),s.height+s.y+e.y<this.target.height?t.y=this.target.height-(s.height+s.y+e.y):0<s.y+e.y&&(t.y=-(s.y+e.y)),0===e.x&&0===e.y&&(this._outOfBoundaryAmount=t,this._outOfBoundaryAmountDirty=!1),t},cleverapps.UI.Button=cc.Node.extend({ctor:function(r){this._super(),this.setAnchorPoint2(),(this.settings=r).styles&&(r.width=r.width||r.styles.width,r.height=r.height||r.styles.height,r.padding=r.padding||r.styles.padding,r.contentOffset=r.contentOffset||r.styles.contentOffset),r.button_images&&(
this.settings.button_png=this.settings.button_png||r.button_images.button_png,this.settings.button_on_png=this.settings.button_on_png||r.button_images.button_on_png,this.settings.button_off_png=this.settings.button_off_png||r.button_images.button_off_png);var e=cleverapps.styles.UI.Button;this.bright=!0,this.createBackground(),r.disabled&&this.disable();var l=r.contentOffset&&void 0!==r.contentOffset.x?r.contentOffset.x:e.contentOffset.x,c=r.contentOffset&&void 0!==r.contentOffset.y?r.contentOffset.y:e.contentOffset.y,p=void 0!==r.contentPadding?r.contentPadding:e.contentPadding,d=r.contentPaddingY||0;if(r.content)["content","contentOff"].forEach(function(e,t){if(r[e]){if(r.padding&&void 0!==r.padding.left&&void 0!==r.padding.bottom){var s=cc.rect(r.padding.left,r.padding.bottom,r.width-r.padding.left-r.padding.right,r.height-r.padding.bottom-r.padding.top);r[e].setAnchorPoint2(),r[e].setPositionRound(s.x+s.width/2,s.y+s.height/2),cleverapps.UI.fitToBox(r[e],{width:s.width,
height:s.height})}else{r[e].setPositionRound(this.width/2+l,this.height/2+c),r[e].setAnchorPoint2();var n=r[e],i=.8*this.width-p,o=.9*this.height-d;if(!1!==r.fitTo)if(n.fitTo)n.fitTo(i,o);else{var a=Math.min(i/n.width,o/n.height);a<1&&n.setScale(a)}}this[e]=r[e],this.addChild(this[e]),0<t&&this[e].setVisible(!1)}},this);else if(r.text){var t=this.text=cleverapps.UI.generateTTFText(r.text,r.font||cleverapps.styles.FONTS.BUTTON_TEXT),s=t.width;r.padding&&r.padding.x&&(s+=2*r.padding.x),s>r.maxWidth&&(s=r.maxWidth),s>this.width&&this.resize(s,this.height);var n=Math.min(s,.8*this.width);r.padding&&r.padding.x&&(n-=2*r.padding.x);var i=this.height;r.padding&&r.padding.y&&(i-=2*r.padding.y),t.fitTo(n,i),t.setPositionRound(this.width/2+l,this.height/2+c),this.addChild(t)}if(r.onMouseOver&&(this.onMouseOver=r.onMouseOver),r.onMouseOut&&(this.onMouseOut=r.onMouseOut),cleverapps.UI.applyHover(this,{filter:r.filter}),cleverapps.UI.onClick(this,this.action.bind(this),{
clickThrottle:r.clickThrottle,noThrottle:r.noThrottle,swallowTouches:r.swallowTouches,ignoreOnTouchMoved:r.ignoreOnTouchMoved,useInteractiveScale:r.useInteractiveScale,filter:r.filter}),r.mark){var o=this.mark=new cc.Sprite(e.mark.icon);o.setAnchorPoint2(),o.setPositionRound(e.mark),this.addChild(o),o.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.3,1.1),new cc.ScaleTo(.3,1))))}},showAlert:function(){!this.disabled&&this.settings.spine&&this.settings.button_alert_animation&&(this.alert=!0,this.background.setAnimation(0,this.settings.button_alert_animation,!0))},hideAlert:function(){this.settings.spine&&(this.alert=!1,this._innerUpdateBgContent())},setMarkVisible:function(e){this.mark&&this.mark.setVisible(e)},showHint:function(e){setTimeout(function(){!this.disabled&&this.isDisplayed()&&!this.hint&&this.mouseOver&&(this.hint=new cleverapps.UI.Tooltip(this.background,{text:e,size:cleverapps.styles.UI.Button.tooltipSize,
position:this.settings.hintPosition||cleverapps.styles.UI.Tooltip.LOCATION.above}),this.addChild(this.hint),this.hint.setPositionRound(this.settings.hintPosition||cleverapps.styles.UI.Tooltip.LOCATION.above),this.hint.replaceParentSamePlace(cc.director.getRunningScene()))}.bind(this),1e3)},hideHint:function(){this.hint&&(this.hint.removeFromParent(),this.hint=void 0)},createBackground:function(){if(this.settings.noBg)this.setContentSize2(this.settings.width,this.settings.height);else{var e,t;if(this.settings.spine)e=this.settings.width,t=this.settings.height,this.background=new cleverapps.Spine(this.settings.spine),this.settings.skin&&this.background.setSkin(this.settings.skin),this.background.setAnimation(0,this.settings.button_animation,!0);else{var s=function(e){var t=new cc.Sprite(e).getSpriteFrame();return t.spriteFrameName=e,t};this.button_png=s(this.settings.button_png||bundles.buttons.frames.window_button_png),this.button_on_png=s(
this.settings.button_on_png||bundles.buttons.frames.window_button_on_png),this.button_off_png=s(this.settings.button_off_png||bundles.buttons.frames.window_button_disabled_png),this.background=cleverapps.UI.createScale9Sprite(this.button_png.spriteFrameName,this.settings.scale9Rect),e=this.settings.width||this.background.width,t=this.settings.height||this.background.height}this.addChild(this.background),this.resize(e,t)}},setBackgroundImage:function(e){this.button_png=new cc.Sprite(e).getSpriteFrame(),this.button_png.spriteFrameName=e,this._innerUpdateBgContent()},setBackgroundImagePressed:function(e){this.button_on_png=new cc.Sprite(e).getSpriteFrame(),this.button_on_png.spriteFrameName=e,this._innerUpdateBgContent()},resize:function(e,t){var s=cleverapps.styles.UI.Button;if(this.setContentSize2(e,t),!this.settings.spine){if(s.scaleYOnly&&!1!==this.settings.scale){var n=t/this.background.height;n<1&&(n=1),this.background.width=e/n,this.background.setScale(n)
}else this.background.setContentSize2(e,t);this.settings.mirrorX&&this.background.setScaleX(-this.background.scaleX)}this.background.setPositionRound(this.width/2,this.height/2)},onTouchBegan:function(){this.disabled||(this.settings.spine?this.settings.button_on_animation&&this.background.setAnimation(0,this.settings.button_on_animation,!0):this.background&&this.background.setSpriteFrame(this.button_on_png))},onTouchEnded:function(){this.disabled||this._innerUpdateBgContent()},action:function(){this.disabled||this._isAncestorsVisible(this)&&(cleverapps.audio.playSound(this.settings.click_effect||bundles.main.urls.click_effect),this.settings.onClicked())},setBright:function(e){this.bright=e,this._innerUpdateBgContent()},disable:function(){this.disabled||(this.disabled=!0,this._innerUpdateBgContent(),this.tmpOnMouseOver=this.onMouseOver,this.onMouseOver=function(){},this.tmpOnMouseOut=this.onMouseOut,this.onMouseOut=function(){})},enable:function(){this.disabled&&(this.disabled=!1,
this._innerUpdateBgContent(),this.tmpOnMouseOver&&(this.onMouseOver=this.tmpOnMouseOver,this.tmpOnMouseOver=void 0),this.tmpOnMouseOut&&(this.onMouseOut=this.tmpOnMouseOut,this.tmpOnMouseOut=void 0))},setLoadingState:function(e){this.settings.loadingImg&&this.parent&&this.loadingState!==e&&(this.loadingState=e,this.loading&&!this.loadingState?(this.loading.runAction(new cc.RemoveSelf),delete this.loading,this.setVisible(!0)):this.loadingState&&(this.setVisible(!1),this.loading=new cc.Sprite(this.settings.loadingImg),this.parent.addChild(this.loading),this.loading.setAnchorPoint(this.getAnchorPoint()),cleverapps.UI.fitToBox(this.loading,this.getContentSize()),this.loading.runAction(new cc.RepeatForever(new cc.RotateBy(5,360))),this.loading.setPositionRound(this.getPosition())))},_innerUpdateBgContent:function(){var e=this.bright&&!this.disabled;this.settings.spine?this.alert?this.background.setAnimation(0,this.settings.button_alert_animation,!0):this.background.setAnimation(0,
this.settings.button_off_animation&&!e?this.settings.button_off_animation:this.settings.button_animation,!0):(this.background&&this.background.setSpriteFrame(e?this.button_png:this.button_off_png),this.content&&this.contentOff&&(e?(this.content.setVisible(!0),this.contentOff.setVisible(!1)):(this.content.setVisible(!1),this.contentOff.setVisible(!0))))},_isAncestorsVisible:function(e){if(null==e)return!0;var t=e.getParent();return!(t&&!t.isVisible())&&this._isAncestorsVisible(t)}}),cleverapps.styles.UI.Button={contentPadding:15,contentOffset:{x:0,y:0},tooltipSize:{width:180,height:80},mark:{icon:bundles.toolbar.frames.toolbar_attention_icon_png,x:{align:"right",dx:10},y:{align:"center"}}},cleverapps.UI.Button.Images={},cleverapps.UI.LabelTTF=cc.LabelTTF.extend({ctor:function(e,t){this.___enabled=!0,this._strokeOpacity=0,this._super("",t)},onEnter:function(){this.___enabled=!0,this._super()},onExit:function(){this.___enabled=!1,this._super()},fitToHeight:function(e){for(;this.height>e;
)this.setFontSize(this.getFontSize()-1)},fitTo:function(e,t){if(this._autoDimensions&&(this.setDimensions(0,0),2048<this.width)){var s=this.getString();cleverapps.throwAsync("Text width > 2048 - "+s)}cleverapps.UI.ImageFont.prototype.fitTo.apply(this,arguments)},canAttachLastLine:function(){if(cleverapps.isPixiJs())return!1;var e=this._renderCmd._strings;return!(!e||e.length<=1)&&(10<=e[e.length-2].length&&e[e.length-1].length<=2)},setDimensions:function(){var e=cc.configuration.getMaxTextureSize()/cc.view.getDevicePixelRatio();1<arguments.length?arguments[0]>e&&(arguments[0]=e):1===arguments.length&&arguments[0].width&&arguments[0].width>e&&(arguments[0].width=e),this._super.apply(this,arguments),this._autoDimensions=!1},setFontSize:function(e){cleverapps.styles.UI.glyphScale&&-1!==["ja","zh","ko"].indexOf(cleverapps.settings.language)&&(e=Math.round(e*cleverapps.styles.UI.glyphScale.scale)),this._super(e)},setFont:function(e){if(this.___enabled){this.setFontFillColor(
e.color||cleverapps.styles.COLORS.WHITE),this.setFontSize(e.size);var t=cleverapps.styles.UI.TTFText,s=t.verticalAlignment;this.safariCheck()&&(s=t.safari.verticalAlignment),void 0!==s&&this.setVerticalAlignment(s),e.shadow?this.enableShadow(e.shadow.color,e.shadow.direction,e.shadow.blur):this.disableShadow(),e.stroke?this.enableStroke(e.stroke.color,e.stroke.size):this.disableStroke(),e.lineHeight&&this.setLineHeight(e.lineHeight);var n=this.getString();cc.LabelTTF.prototype.setString.call(this,""),cc.LabelTTF.prototype.setString.call(this,n)}},enableStroke:function(e,t){if(this._super(e,t),!cleverapps.isPixiJs()){var s=e.a/255;this._strokeOpacity!==s&&(this._strokeOpacity=s,this._renderCmd._setColorsString())}},byLetterAnimation:function(e){var n=(e=e||{}).speed||.03,t=e.delay||.1;if(cc.sys.isMobile&&!cc.sys.isNative)return this.setOpacity(0),this.runAction(new cc.Sequence(new cc.DelayTime(t),new cc.FadeIn(.3))),void(e.callback&&e.callback());this._fullString=this.getString()
;var i=0;this._byLetterAnimationRunning&&this.stopAllActions(),this._byLetterAnimationRunning=!0,this._byLetterAnimationDone=function(){this._byLetterAnimationRunning&&(this.stopAllActions(),this._byLetterAnimationRunning=!1,cc.LabelTTF.prototype.setString.call(this,this._fullString),this._byLetterAnimationDone=void 0,e.callback&&e.callback())}.bind(this),cc.LabelTTF.prototype.setString.call(this,"");var o=void 0,a=function(e){this.runAction(new cc.Sequence(new cc.DelayTime(e),new cc.CallFunc(function(){var e=0<i?this._fullString[i-1]:void 0;i++;var t=this._fullString[i-1];if(" "===e&&" "!==t){for(var s=i;s<this._fullString.length&&" "!==this._fullString[s];)s++;cc.LabelTTF.prototype.setString.call(this,this._fullString.substr(0,s)),o&&this.height!==o&&(this._fullString=this._fullString.substr(0,i-2)+"\n"+this._fullString.substr(i-1))}cc.LabelTTF.prototype.setString.call(this,this._fullString.substr(0,i)),i<this._fullString.length?(a(n),o=this.height
):this._byLetterAnimationDone&&this._byLetterAnimationDone()}.bind(this))))}.bind(this);a(t)},byLetterAnimationFinish:function(){this._byLetterAnimationRunning&&this._byLetterAnimationDone()},countToAnimation:function(e,t){for(var s=e-this.getString(),n=0<s?1:-1,i=t/Math.abs(s),o=[],a=0;a<Math.abs(s);a++)o.push(new cc.Sequence(new cc.CallFunc(function(){this.setString(+this.getString()+n)}.bind(this)),new cc.DelayTime(i)));this.runAction(new cc.Sequence(o))},setString:function(e,t){this.___enabled&&(e=cleverapps.UI.LabelTTF.GetLocalizedText(e,t),cc.LabelTTF.prototype.setString.call(this,e))},setTextureRect:function(){this._super.apply(this,arguments),this._offsetPosition=cc.p(0,this.getBaseline())},safariCheck:function(){var e=cleverapps.UI.getBrowserName();return"Safari"===e||"Mobile Safari"===e||cc.sys.isWebView&&cc.sys.OS_IOS===cc.sys.os},getBaseline:function(){var e=cleverapps.styles.UI.TTFText,t=e.baseline;return this.safariCheck()&&(t=e.safari.baseline),this.getFontSize(
)<=40?Math.floor(t*this.getFontSize()/3):t*this.getFontSize()}}),cleverapps.UI.LabelTTF.GetLocalizedText=function(e,t){return"number"==typeof e?e+"":"string"!=typeof e||0!==e.indexOf("messages:")?(e||"")+"":Messages.get(e.substring("messages:".length),t)},cleverapps.UI.StateButton=cc.Node.extend({ctor:function(e){this._super(),this.buttonLabelStyles=[cleverapps.styles.FONTS.SWITCH_BUTTON_OFF,cleverapps.styles.FONTS.SWITCH_BUTTON_ON];var t=new cc.Sprite(bundles.switch_state_button.frames.switch_state_button),s=new cc.Sprite(bundles.switch_state_button.frames.switch_state_2_button||bundles.switch_state_button.frames.switch_state_button);bundles.switch_state_button.frames.switch_state_2_button||(s.setScaleX(-1),this.buttonLabelStyles.reverse()),this.setContentSize2(t.width,t.height),this.setAnchorPoint2(),this.onClick=e.onClick,this.fitTo=(e.fitTo||.4)*this.width,this.state=0,this.states=[t,s],s.visible=!1,this.states.forEach(function(e){e.setPosition(this.width/2,this.height/2),
this.addChild(e)},this);var i=cleverapps.styles.UI.StateButton;this.labels=[e.off,e.on].map(function(e,t){var s=new cleverapps.UI.generateTTFText(e,this.buttonLabelStyles[t]);s.setPositionRound(0===t?i.offText:i.onText),s.fitTo(this.fitTo);var n=new cc.Node;return n.setContentSize2(this.width/2,this.height),n.setAnchorPoint2(),n.setPosition(0===t?this.width/4:this.width/4*3,this.height/2),this.addChild(n),n.addChild(s),s},this),cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,this.action.bind(this))},setState:function(e){this.state!==e&&(this.states[this.state].visible=!1,this.labels[this.state].setFont(this.buttonLabelStyles[1]),this.labels[this.state].fitTo(this.fitTo),this.state=e,this.states[this.state].visible=!0,this.labels[this.state].setFont(this.buttonLabelStyles[0]),this.labels[this.state].fitTo(this.fitTo))},action:function(){cleverapps.audio.playSound(bundles.main.urls.click_effect),this.setState(0===this.state?1:0),this.onClick(this.state)}}),
cleverapps.overrideColors(cleverapps.styles.COLORS,{COLOR_SWITCH_BUTTON_OFF:new cc.Color(85,93,70,255)}),cleverapps.styles.FONTS=cleverapps.overrideFonts(cleverapps.styles.FONTS,{SWITCH_BUTTON_ON:{size:38,color:cleverapps.styles.COLORS.WHITE},SWITCH_BUTTON_OFF:{size:24,color:cleverapps.styles.COLORS.COLOR_SWITCH_BUTTON_OFF}}),cleverapps.styles.UI.StateButton={onText:{x:{align:"center",dx:-8},y:{align:"center",dy:0}},offText:{x:{align:"center",dx:8},y:{align:"center",dy:0}}},cleverapps.Layout=cc.Node.extend({ctor:function(e,t){this._super(),this.options=t,e.forEach(function(e){e&&this.addChild(t.each?e.applyStyles(t.each):e)},this),this.reshape()},reshape:function(){return cleverapps.UI.arrangeWithMargins(this.children,this.options),cleverapps.UI.wrap(this,this.options),this.options.padding&&cleverapps.UI.wrapWithPadding(this,this.options.padding,!0),this.options.dimensions&&cleverapps.UI.setDimensions(this,this.options.dimensions),this}}),cleverapps.Layout.AsyncChild=cc.Node.extend({
ctor:function(){this._super(),this.setAnchorPoint2()}}),cleverapps.Layout.AsyncChild.prototype.reshape=function(e){this.setContentSize2(e.width*e.scaleX,e.height*e.scaleY),this.addChild(e),e.setPositionRound(this.width/2,this.height/2),this.alignment&&this.setPositionRound(this.alignment),this.parent&&this.parent.reshape&&this.parent.reshape()},cleverapps.GridLayout=cc.Node.extend({ctor:function(e,t){this._super(),this.options=t||{};for(var s=0;s<e.length;++s){var n=e[s];this.addChild(n)}this.reshape()},reshape:function(){var s=this.options;s.padding=s.padding||{},s.margin=s.margin||{},s.align=s.align||{},s.separator=s.separator||{},s={columns:s.columns||1,direction:s.direction||cleverapps.GridLayout.TOP_TO_BOTTOM,margin:{x:s.margin.x||0,y:s.margin.y||0},padding:{left:s.padding.left||s.padding.x||0,right:s.padding.right||s.padding.x||0,top:s.padding.top||s.padding.y||0,bottom:s.padding.bottom||s.padding.y||0},align:{x:s.align.x||cleverapps.GridLayout.ALIGN_CENTER,
y:s.align.y||cleverapps.GridLayout.ALIGN_CENTER},cell:s.cell&&{width:s.cell.width||0,height:s.cell.height||0},separator:{vertical:s.separator.vertical,horizontal:s.separator.horizontal}};for(var e=this.children.filter(function(e){return!e.separator||(e.removeFromParent(),!1)}),t=[],n=0;n<e.length;n+=s.columns)t.push(e.slice(n,n+s.columns));s.direction&cleverapps.GridLayout.REVERSED&&t.reverse();var i=[],o=[];if(s.cell){for(n=0;n<t.length;++n)o[n]=s.cell.height;for(n=0;n<s.columns;++n)i[n]=s.cell.width}else for(n=0;n<t.length;++n)for(var a=0,r=t[n];a<r.length;++a){var l=r[a];i[a]=Math.max(l.width*l.scaleX,i[a]||0),o[n]=Math.max(l.height*l.scaleY,o[n]||0)}var c,p=s.padding.bottom;for(n=0;n<t.length;++n){for(c=s.padding.left,a=0,r=t[n];a<r.length;++a){l=r[a];var d={},u={};switch(s.align.x){case cleverapps.GridLayout.ALIGN_START:d.x=0,u.x=c;break;case cleverapps.GridLayout.ALIGN_END:d.x=1,u.x=c+i[a];break;default:d.x=.5,u.x=c+i[a]/2}switch(s.align.y){case cleverapps.GridLayout.ALIGN_START:
d.y=0,u.y=p;break;case cleverapps.GridLayout.ALIGN_END:d.y=1,u.y=p+o[n];break;default:d.y=.5,u.y=p+o[n]/2}l.setAnchorPoint2(d.x,d.y),l.setPositionRound(u.x,u.y),s.separator.horizontal&&a!==r.length-1&&this.addSeparator(s.separator.horizontal,c+i[a],p,s.margin.x,o[n]),s.separator.vertical&&n!==t.length-1&&this.addSeparator(s.separator.horizontal,c,p+o[n],i[a],s.margin.y),c+=i[a]+s.margin.x}p+=o[n]+s.margin.y}c=i.reduce(function(e,t){return e+t+s.margin.x},0)+s.padding.left+s.padding.right-s.margin.x,p+=s.padding.top-s.margin.y,this.setContentSize2(c,p)},addSeparator:function(e,t,s,n,i){var o=new cc.Sprite(e.image);o.setAnchorPoint2(),o.setPositionRound(t+(e.x?o.calculateCoordinate(e.x,"x",n):n/2),s+(e.y?o.calculateCoordinate(e.y,"y",i):i/2)),o.separator=!0,this.addChild(o)}}),cleverapps.GridLayout.REVERSED=256,cleverapps.GridLayout.BOTTOM_TO_TOP=1,cleverapps.GridLayout.TOP_TO_BOTTOM=257,cleverapps.GridLayout.ALIGN_CENTER=0,cleverapps.GridLayout.ALIGN_START=1,
cleverapps.GridLayout.ALIGN_END=2,cleverapps.Shaders={GRAYSCALE_SPRITE_KEY:"grayscaleSprite",FLICKER_SHADER_KEY:"flicker",BLUR_FADE_KEY:"blur_fade",BLUR_CURTAIN_KEY:"blur_curtain",BLUR_CURTAIN_REVERSE_KEY:"blur_curtain_reverse",VERTEX_SRC:"  attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = CC_PMatrix * a_position;  \n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}",GRAYSCALE_SRC:"varying vec2 v_texCoord;\nvarying vec4 v_fragmentColor; \nvoid main(){vec4 col = texture2D(CC_Texture0, v_texCoord);\nfloat gray = dot(col.rgb, vec3(0.25, 0.25, 0.25));\ngl_FragColor = v_fragmentColor * vec4(gray, gray, gray, col.a);\n}\n",
FLICKER_FRAGM:"precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nuniform float sineTime; \nuniform vec3 flickColor; \nvoid main() \n{ \n    vec4 c = texture2D(CC_Texture0, v_texCoord); \n    vec3 deltacolor = c.rgb * flickColor * sineTime;\n    vec3 color = clamp(c.rgb + deltacolor, 0.0, 1.0);\n    gl_FragColor = v_fragmentColor * vec4(color, c.a); \n}",
BLUR_TEMPLATE:"precision lowp float;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nuniform float u_blurOffset;\nuniform float u_extent;\nuniform float u_blurStrength;\n#define MAX_BLUR_WIDTH 4\nbool skipPixel(float y)\n{\n   %{skipFunction}}\nvoid main()\n{\n    vec2 u_blurOffset1 = vec2(0.0, float(u_blurOffset));\n    vec2 u_blurOffset2 = vec2(float(u_blurOffset), 0.0);\n    vec2 u_blurOffset3 = vec2(float(u_blurOffset) * sqrt(2.0), float(u_blurOffset) * sqrt(2.0));\n    vec2 u_blurOffset4 = vec2(float(u_blurOffset) * sqrt(2.0), -float(u_blurOffset) * sqrt(2.0));\n    vec4 color = texture2D(CC_Texture0, v_texCoord);\n    if (skipPixel(v_texCoord.y)) {\n       gl_FragColor = color;\n    } else {\n       float blurWidth = u_blurStrength * float(MAX_BLUR_WIDTH);\n       vec4 blurColor  = vec4(color.rgb, 1.0);\n       for (int i = 1; i < MAX_BLUR_WIDTH; ++ i)\n       {\n           if ( float(i) >= blurWidth ) break;           float weight = 1.0 - float(i) / blurWidth;\n           weight = weight * weight * (3.0 - 2.0 * weight); // smoothstep\n           vec4 sampleColor1 = texture2D(CC_Texture0, v_texCoord + u_blurOffset1 * float(i));\n           vec4 sampleColor2 = texture2D(CC_Texture0, v_texCoord - u_blurOffset1 * float(i));\n           vec4 sampleColor3 = texture2D(CC_Texture0, v_texCoord + u_blurOffset2 * float(i));\n           vec4 sampleColor4 = texture2D(CC_Texture0, v_texCoord - u_blurOffset2 * float(i));\n           vec4 sampleColor5 = texture2D(CC_Texture0, v_texCoord + u_blurOffset3 * float(i));\n           vec4 sampleColor6 = texture2D(CC_Texture0, v_texCoord - u_blurOffset3 * float(i));\n           vec4 sampleColor7 = texture2D(CC_Texture0, v_texCoord + u_blurOffset4 * float(i));\n           vec4 sampleColor8 = texture2D(CC_Texture0, v_texCoord - u_blurOffset4 * float(i));\n           blurColor += vec4(sampleColor1.rgb + sampleColor2.rgb + sampleColor3.rgb + sampleColor4.rgb + sampleColor5.rgb + sampleColor6.rgb + sampleColor7.rgb + sampleColor8.rgb, 8.0) * weight; \n       }\n       gl_FragColor = vec4(blurColor.rgb / blurColor.w, color.a);\n    }\n}",
BLUR_FADE_FRAGM:"",BLUR_CURTAIN_FRAGM:"",BLUR_CURTAIN_REVERSE_FRAGM:"",BLUR_FADE_SKIP:"   return false;\n",BLUR_CURTAIN_SKIP:"   return y > u_extent;\n",BLUR_CURTAIN_REVERSE_SKIP:"   return y < (1. - u_extent);\n",initialize:function(){if("undefined"!=typeof gl){var e=function(t,e,s){try{var n=new cc.GLProgram;n.initWithString(e,s),n.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),n.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS),n.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),n.link(),n.updateUniforms(),cc.shaderCache.addProgram(n,t)}catch(e){cleverapps.Shaders[t]=void 0,console.log(e)}};e(cleverapps.Shaders.GRAYSCALE_SPRITE_KEY,cleverapps.Shaders.VERTEX_SRC,cleverapps.Shaders.GRAYSCALE_SRC),e(cleverapps.Shaders.FLICKER_SHADER_KEY,cleverapps.Shaders.VERTEX_SRC,cleverapps.Shaders.FLICKER_FRAGM),cleverapps.Shaders.BLUR_FADE_FRAGM=cleverapps.Shaders.BLUR_TEMPLATE.replace("%{skipFunction}",cleverapps.Shaders.BLUR_FADE_SKIP),
cleverapps.Shaders.BLUR_CURTAIN_FRAGM=cleverapps.Shaders.BLUR_TEMPLATE.replace("%{skipFunction}",cleverapps.Shaders.BLUR_CURTAIN_SKIP),cleverapps.Shaders.BLUR_CURTAIN_REVERSE_FRAGM=cleverapps.Shaders.BLUR_TEMPLATE.replace("%{skipFunction}",cleverapps.Shaders.BLUR_CURTAIN_REVERSE_SKIP),e(cleverapps.Shaders.BLUR_FADE_KEY,cleverapps.Shaders.VERTEX_SRC,cleverapps.Shaders.BLUR_FADE_FRAGM),e(cleverapps.Shaders.BLUR_CURTAIN_KEY,cleverapps.Shaders.VERTEX_SRC,cleverapps.Shaders.BLUR_CURTAIN_FRAGM),e(cleverapps.Shaders.BLUR_CURTAIN_REVERSE_KEY,cleverapps.Shaders.VERTEX_SRC,cleverapps.Shaders.BLUR_CURTAIN_REVERSE_FRAGM)}}},cleverapps.UI.Avatar=cc.Node.extend({ctor:function(e,t){var s=e;e&&(e.avatar||e.id)&&(s=e.avatar,t=e.id),this._super();var n=t===levels.user.id,i=new cc.Sprite(n?bundles.main.frames.user_avatar:bundles.main.frames.default_avatar);this.addChild(i),this.avatar=i;var o=e&&!(e instanceof cc.SpriteFrame)&&e.frame;o||(
o=n?bundles.avatar.frames.avatar_frame2:bundles.avatar.frames.avatar_frame);var a=new cc.Sprite(o);a.setLocalZOrder(1),this.addChild(a);var r=cleverapps.styles.UI.Avatar;this.setAnchorPoint(.5,.5),this.setContentSize2(a.getContentSize()),i.setPositionRound(this.width/2,this.height/2+(r.bottom-r.top)/2),a.setPositionRound(this.width/2,this.height/2),this.adjustSize(),(this.image=s)&&"string"==typeof s&&cleverapps.social.isLoggedIn()&&t&&0<=s.indexOf("fbsbx.com")&&(cleverapps.social instanceof cleverapps.MobileFacebook||cleverapps.social instanceof cleverapps.Html5)&&(this.avatarFBUserId=t,this.onImageLoadErrorSafe=this.createListener(this.onImageLoadError.bind(this))),this.onImageLoadSafe=this.createListener(this.onImageLoad.bind(this))},onImageLoadError:function(){cleverapps.social.aboutUser(this.avatarFBUserId,this.createListener(this.onFBUserLoaded.bind(this)))},onFBUserLoaded:function(e){if(e&&e.picture&&e.picture.data&&e.picture.data.url){this.image=e.picture.data.url,
this.onImageLoadErrorSafe=void 0,this.setImage(this.image);var t={avatar:this.image};cleverapps.RestClient.post("/info/"+this.avatarFBUserId,t,function(e){},function(){console.log("Failed updating user avatar: "+t.avatar)})}},onEnter:function(){if(this._super(),this.image){var t=!0;["stub_128x128.gif","camera_200.png"].forEach(function(e){"string"==typeof this.image&&-1!==this.image.indexOf(e)&&(t=!1)}.bind(this)),t&&this.setImage(this.image)}},adjustSize:function(){this.avatar.setScale((this.width-2*cleverapps.styles.UI.Avatar.x)/this.avatar.width,(this.height-cleverapps.styles.UI.Avatar.top-cleverapps.styles.UI.Avatar.bottom)/this.avatar.height)},onImageLoad:cleverapps.whenShow(function(e,t){if(e)this.onImageLoadErrorSafe&&this.onImageLoadErrorSafe(),console.log("Error loading avatar image!");else try{var s=new cc.Sprite(t);s.setPositionRound(this.width/2,this.height/2),this.avatar.removeFromParent(),this.addChild(s),this.avatar=s,this.adjustSize()}catch(e){console.log(
"Cross-domain??",e)}}),loadGif:function(i){if(cc.sys.isNative||(i=i.replace("https:","").replace("http:","")),i!==this.imageUrl){this.imageUrl=i;try{var o=new SuperGif;o.load_url(i,this.createListener(function(){if(i===this.imageUrl){var e=o.getFrames();if(Array.isArray(e)&&0<e.length){var t=new cc.Sprite(e[0]);t.setPositionRound(this.width/2,this.height/2),this.avatar.removeFromParent(),this.addChild(t),this.avatar=t,this.adjustSize();var s=[];e.forEach(function(e){s.push(new cc.Sprite(e).getSpriteFrame())});var n=new cc.Animation(s,.075);this.avatar.runAction(new cc.RepeatForever(new cc.Animate(n)))}}}.bind(this)))}catch(e){i===this.imageUrl&&delete this.imageUrl,console.log("Cross-domain??",e),this.onImageLoadErrorSafe&&this.onImageLoadErrorSafe()}}},getImageSpriteFrame:function(e){if(0===e.indexOf("#"))return cc.spriteFrameCache.getSpriteFrame(e)||cc.spriteFrameCache.getSpriteFrame(e.replace(/\//g,"-"))||cc.spriteFrameCache.getSpriteFrame(e.replace(/\//g,"-").replace("#","#main-"))
},setImage:cleverapps.whenShow(function(s){if(s instanceof cc.SpriteFrame)this.avatar.setSpriteFrame(s),this.adjustSize();else if(0===s.indexOf("#")&&this.getImageSpriteFrame(s))this.avatar.setSpriteFrame(this.getImageSpriteFrame(s)),this.adjustSize();else if(-1!==s.indexOf(".gif"))this.loadGif(s);else{var e=cleverapps.UI.Avatar.cache.get(s);if(e)return void this.onImageLoadSafe(0,e);var n=cleverapps.environment.onShowCounter;cc.loader.loadImg(s,cleverapps.whenShow(function(e,t){if(n!==cleverapps.environment.onShowCounter&&cc.sys.isNative)return cc.textureCache.removeTextureForKey(s),void this.setImage(s);this.onImageLoadSafe(e,t)}.bind(this)))}})}),cleverapps.UI.Avatar.cache=new cleverapps.Cache,cleverapps.UI.Avatar.preload=function(s,n){if(n=n||function(){},Array.isArray(s)){var t=cleverapps.wait(s.length,n);s.forEach(function(e){cleverapps.UI.Avatar.preload(e.avatar||e,t)})}else if("string"==typeof s&&0!==s.indexOf("#")&&-1===s.indexOf(".gif")){var e=cleverapps.UI.Avatar.cache.get(s
);e?n(e):cc.loader.loadImg(s,function(e,t){e||cleverapps.UI.Avatar.cache.set(s,t),n(!e&&t)})}else n()},cleverapps.Parallax={apply:function(e){e.scene&&(e=e.scene),e.parallaxContainer=new cc.Node,e.parallaxContainer.setAnchorPoint(.5,.5),e.parallaxContainer.setLocalZOrder(cleverapps.styles.parallax.zOrder),e.addChild(e.parallaxContainer),e._parallaxContainerPosition={x:0,y:0},this.isAvailable()&&(cc.sys.isNative||(cc.sys.BROWSER_TYPE_MOBILE_QQ=cc.sys.browserType),cleverapps.Parallax.onChangeSize(e),cleverapps.Parallax.refresh=cleverapps.Parallax._refresh.bind(e),cleverapps.Parallax.setEnabled=cleverapps.Parallax._changeEnabled.bind(e),e._parallaxEnabled=!0,cc.inputManager.setAccelerometerInterval(1/60),cc.inputManager.setAccelerometerEnabled(!0),cc.eventManager.addListener({event:cc.EventListener.ACCELERATION,callback:cleverapps.Parallax._handleOrientation.bind(e)},e))},isAvailable:function(){return cc.sys.isMobile&&cc.sys.capabilities.hasOwnProperty("accelerometer"
)&&"board"===!cleverapps.config.type},onChangeSize:function(e){if(e.scene&&(e=e.scene),this.isAvailable()&&e.parallaxContainer){var t=(cleverapps.styles.SCENE_HEIGHT+2*cleverapps.styles.parallax.height)/cleverapps.styles.SCENE_HEIGHT;e.width+2*cleverapps.styles.parallax.width>cleverapps.styles.SQUARE_MODE_WIDTH&&(t=Math.max(t,(cleverapps.styles.SQUARE_MODE_WIDTH+2*cleverapps.styles.parallax.width)/cleverapps.styles.SQUARE_MODE_WIDTH)),e.parallaxContainer.setScale(t),e._parallaxContainerPosition={x:(e.width-e.width*t)/2,y:(e.height-e.height*t)/2},e.parallaxContainer.setPosition(e._parallaxContainerPosition)}},setEnabled:function(){},refresh:function(){},_changeEnabled:function(e){e||this.parallaxContainer.stopAllActions(),e!==this._parallaxEnabled&&(this._parallaxEnabled=e,this._parallaxEnabled&&cleverapps.Parallax.refresh())},_refresh:function(){this._parallaxEnabled&&(delete this._parallaxBaseAngle,delete this._parallaxDx,delete this._parallaxDy,this._parallaxEnabled=!1,
this.parallaxContainer.stopAllActions(),this.parallaxContainer.runAction(new cc.Sequence(new cc.MoveTo(.3,this._parallaxContainerPosition),new cc.CallFunc(function(){this._parallaxEnabled=!0}.bind(this)))))},_handleOrientation:function(e){if(this._parallaxEnabled&&!(Math.abs(e.x)<1e-4&&Math.abs(e.y)<1e-4)){var t=90*e.x,s=90*e.y;this._parallaxBaseAngle||(this._parallaxBaseAngle={x:t,y:s},this._parallaxDx=t,this._parallaxDy=s),this._parallaxDx=.1*t+.9*this._parallaxDx,this._parallaxDy=.1*s+.9*this._parallaxDy,t=this._parallaxDx-this._parallaxBaseAngle.x,s=this._parallaxDy-this._parallaxBaseAngle.y,Math.abs(t)<cleverapps.Parallax.PARALLAX_MAX_ANGLE&&(this.parallaxContainer.x=this._parallaxContainerPosition.x+t*cleverapps.styles.parallax.width/cleverapps.Parallax.PARALLAX_MAX_ANGLE),Math.abs(s)<cleverapps.Parallax.PARALLAX_MAX_ANGLE&&(this.parallaxContainer.y=this._parallaxContainerPosition.y+s*cleverapps.styles.parallax.height/cleverapps.Parallax.PARALLAX_MAX_ANGLE)}},
PARALLAX_MAX_ANGLE:30},cleverapps.styles.parallax={width:40,height:40,zOrder:0},cleverapps.FixedWidthScene=cc.Scene.extend({ctor:function(e){cleverapps.wideMode.refresh(),this._super(),cleverapps.environment.setScene(e);var t=cc.director.getWinSize();this.setContentSize(t),this.scene=new cc.Node,this.scene.resizeScale=1,this.scene.sceneName=e,this.scene.setPositionRound(this.width/2,this.height/2),this.scene.setAnchorPoint(.5,.5),this.scene.setContentSize2(cleverapps.UI.getSceneSize());var s=new ShadowView;s.setPosition(0,-cleverapps.UI.getSceneOffsetY()),this.scene.addChild(s,20),this.addChild(new DailyTaskNotificationsView),this.addChild(this.scene),cleverapps.Parallax.apply(this),this.backgroundStyles=this.getBackgroundStyles(),this.setBackground(),this.ctorCustomize(),this.needDisplayIntro=!0,this.addMenuBar(),cleverapps.windows.reset();var n=this.getAudioStyles();"playable"!==cleverapps.config.source&&this.runAction(new cc.Sequence(new cc.DelayTime(n.delay||0),new cc.CallFunc(
function(){cleverapps.audio.insertDisk(n.res),cleverapps.audio.fadeIn(n.fadeIn||0)}))),this.currentOrientation=this.calcOrientation()},calcOrientation:function(){return cc.sys.isNative||void 0===typeof window?0:window.innerHeight<window.innerWidth?0:1},getAudioStyles:function(){return cleverapps.styles.FixedWidthScene.sound},_playIntro:function(){this.needDisplayIntro=!1,cleverapps.metha.display({focus:"Scene.intro",action:this.displayIntro.bind(this)})},displayIntro:function(e){e()},addMenuBar:function(){if(this.upMenuButtons&&(this.upMenuButtons.removeFromParent(),delete this.upMenuButtons),!MenuControlButton.needToAddInsidePanel()){var e=this.upMenuButtons=new SceneControlButtonsView;e.deltaY=cleverapps.UI.getSceneOffsetY()-cleverapps.styles.MenuBar.minOffest,e.deltaY<0&&(e.deltaY=0),e.alignment=cleverapps.clone(e.alignment,!0),e.alignment.y.dy+=e.deltaY,this.scene.addChild(e)}var t=Boolean(this.upMenuBar);this.upMenuBar&&this.upMenuBar.removeFromParent()
;var s=this.upMenuButtons?this.upMenuButtons.x-this.upMenuButtons.width/2:this.scene.width;this.upMenuBar=new MenuBarView(s,this.scene),t&&cleverapps.menuBar.getSceneItems().forEach(function(e){cleverapps.metha.isControlEnabled(e.getControlName())&&cleverapps.metha.showControlsWhileFocused(e.getControlName(),!0)})},getBackgroundStyles:function(){return cleverapps.skins.getSlot("sceneBg")||cleverapps.styles.FixedWidthScene.background},setBackground:function(){var e=this.backgroundStyles;if(e)if(e.pattern){var t=cc.director.getWinSize();t.height+=2,(n=this.background=new cc.Node).setAnchorPoint(.5,.5),n.setPosition(t.width/2,t.height/2-cleverapps.UI.getSceneOffsetY()),n.setContentSize(t);var s=cleverapps.UI.createPatternSprite(e.background||e.pattern,t);n.addChild(s),n.setLocalZOrder(-10),this.updateBackgroundScale(),this.scene.addChild(n)}else{var n=this.background=new cc.Sprite(e.background);if(e.animation){var i=this.background.animation=new cleverapps.Spine(e.animation)
;i.setAnimation(0,"animation",!0),e.skin&&i.setSkin(e.skin),i.setPositionRound(n.width/2,n.height/2),n.addChild(i)}n.setPosition(this.scene.width/2,this.scene.height/2),this.updateBackgroundScale();var o=this.scene.parallaxContainer;!1===e.parallax?(o=this.scene,n.setLocalZOrder(-10)):o.setLocalZOrder(-10),o.addChild(n)}},getRefreshSceneActionOnChangeSize:function(){return!1},onChangeSize:function(e){var t=this.calcOrientation();if(t!==this.currentOrientation||e){if(t===this.currentOrientation&&(cleverapps.MobileOK.isAppropriate()||cleverapps.MobileMyMailRu.isAppropriate()))return;this.currentOrientation=t;var s=this.getRefreshSceneActionOnChangeSize();if(s){var n=function(e){cleverapps.eventLogger.logEvent("refreshscene_changesize"),s(e)};return void(cleverapps.metha.isFocused()?cleverapps.FixedWidthScene.canDistractChangeSize?(cleverapps.FixedWidthScene.canDistractChangeSize=!1,cleverapps.metha.distract({focus:"refreshSceneOnChangeSize"+Date.now(),action:n})
):cleverapps.FixedWidthScene.changedOrientation=!0:(cleverapps.FixedWidthScene.canDistractChangeSize=!1,cleverapps.metha.display({focus:"refreshSceneOnChangeSize"+Date.now(),action:n})))}}cleverapps.metha.isFocused()&&!cleverapps.FixedWidthScene.canDistractChangeSize&&(cleverapps.FixedWidthScene.changedSize=!0),this.setContentSize(cc.view.getDesignResolutionSize()),this.setContentSize2(this.getContentSize()),!1!==this.changeSizeResizeScale?(this.scene.resizeScale=Math.min(1,this.getContentSize().width/this.scene.width),this.scene.setScale(this.scene.resizeScale)):(this.scene.setContentSize2(cleverapps.UI.getSceneSize()),cleverapps.wideMode.refresh()),this.scene.setPositionRound(this.width/2,this.height/2),this.updateBackgroundScale(),this.background&&this.background.setPosition(this.scene.width/2,this.scene.height/2);var i,o=cleverapps.UI.getSceneOffsetY(),a=o-cleverapps.styles.MenuBar.minOffest;a<0&&(a=0),this.upMenuBar&&(i=a-this.upMenuBar.deltaY,this.upMenuBar.y+=i,
this.upMenuBar.hideHandler&&(this.upMenuBar.hideHandler.originalPosition.y+=i,this.upMenuBar.hideHandler.hidePosition.y+=i),this.upMenuBar.deltaY=a),this.upMenuButtons&&(i=a-this.upMenuButtons.deltaY,this.upMenuButtons.y+=i,this.upMenuButtons.hideHandler&&(this.upMenuButtons.hideHandler.originalPosition.y+=i,this.upMenuButtons.hideHandler.hidePosition.y+=i),this.upMenuButtons.deltaY=a),this.downToolBar&&(i=o-this.downToolBar.deltaY,this.downToolBar.y-=i,this.downToolBar.hideHandler&&(this.downToolBar.hideHandler.originalPosition.y-=i,this.downToolBar.hideHandler.hidePosition.y-=i),this.downToolBar.deltaY=o),cleverapps.Notification.remove(!0),cleverapps.eventBus.trigger("changeSceneSize")},getBackgroundScaleCoef:function(){return 1},updateBackgroundScale:function(){if(this.background){var e=this.backgroundStyles;if("number"==typeof e.scale)this.background.setScale(e.scale);else{var t=this.bgScaleMargin||1,s=Math.max(this.width/this.background.width*t/this.scene.scale,
this.height/this.background.height*t/this.scene.scale)*this.getBackgroundScaleCoef();if(this.background.setScale(s),cleverapps.isInstant()){var n=this.background.height/t*s;n>this.height&&(this.background.y=this.height/2+(n-this.height)/3)}this.background.stopAllActions()}}},onExit:function(){this._super(),cleverapps.bundleLoader.clearUnusedResources()},onEnter:function(){this._super(),cc.sys.garbageCollect()},onTransitionAnimationDidStart:function(){cleverapps.audio.fadeOut()},visit:function(e){this.shadowVisitQueue=[],this._super.apply(this,arguments),this.afterVisitShadow()},afterVisitShadow:function(){this.afterVisitShadowProcessing=!0;var e=this.shadowVisitQueue||[];this.shadowVisitQueue=[],e.forEach(cleverapps.callFunc),this.afterVisitShadowProcessing=!1},closeAction:function(){cleverapps.metha.display({focus:"closeScene",action:function(e){cleverapps.metha.gotoMainScene(e)}})}}),cleverapps.FixedWidthScene.prototype.createFilmEffect=function(e){(e=e||{}
).layerSizeKoef=void 0!==e.layerSizeKoef?e.layerSizeKoef:.1,e.layerTimeout=e.layerTimeout||.3,e.onComplete=e.onComplete||function(){},this.scene.stopAllActions(),this.scene.basePosition=this.scene.getPosition();var t={x:this.scene.basePosition.x,y:this.scene.basePosition.y};if(e.scale=e.scale||1.3,this.upperFilmLayer=new cc.LayerColor(cc.color.BLACK,this.scene.width,this.scene.height*e.layerSizeKoef+(e.layerSizeKoef?3:0)),this.downFilmLayer=new cc.LayerColor(cc.color.BLACK,this.scene.width,this.scene.height*e.layerSizeKoef+(e.layerSizeKoef?3:0)),e.moveBy&&(e.moveBy.x&&(t.x+=e.moveBy.x),e.moveBy.y)){if(e.moveBy.y<0){var s=this.upperFilmLayer.height+this.scene.height*(e.scale-1)/2;e.moveBy.y<-s&&(e.moveBy.y=-s)}else{s=this.downFilmLayer.height+this.scene.height*(e.scale-1)/2;e.moveBy.y>s&&(e.moveBy.y=s)}t.y+=e.moveBy.y}this.upperFilmLayer.setPositionRound(0,this.height-this.upperFilmLayer.height+2),this.downFilmLayer.setPositionRound(0,-1),this.downFilmLayer.setLocalZOrder(50),
this.upperFilmLayer.setLocalZOrder(50),this.addChild(this.upperFilmLayer),this.addChild(this.downFilmLayer),e.silent?(this.scene.setScale(e.scale),this.scene.setPositionRound(t),e.onComplete()):(e.scaleTimeout=e.scaleTimeout||1,this.upperFilmLayer.setOpacity(0),this.downFilmLayer.setOpacity(0),this.scene.runAction(new cc.Sequence(new cc.DelayTime(e.layerTimeout),new cc.Spawn(new cc.MoveTo(e.scaleTimeout,t),new cc.ScaleTo(e.scaleTimeout,e.scale)),new cc.CallFunc(e.onComplete))),this.upperFilmLayer.runAction(new cc.FadeTo(e.layerTimeout,255)),this.downFilmLayer.runAction(new cc.FadeTo(e.layerTimeout,255))),e.noControls||(cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(){return!0},onTouchEnded:function(){return e.onClick&&e.onClick(),!0}},this.upperFilmLayer),cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseScroll:function(e){return e&&e.stopPropagation&&e.stopPropagation(),!0},onMouseMove:function(e){
return e&&e.stopPropagation&&e.stopPropagation(),!0}},this.upperFilmLayer))},cleverapps.FixedWidthScene.prototype.removeFilmEffect=function(e){var t;(e=e||{}).scaleTimeout=void 0===e.scaleTimeout?1:e.scaleTimeout,e.layerTimeout=e.layerTimeout||.3,this.scene.stopAllActions(),this.stopAllActions(),this.scene.runAction(new cc.Spawn(new cc.MoveTo(e.scaleTimeout,this.scene.basePosition),new cc.ScaleTo(e.scaleTimeout,1))),this.runAction(new cc.Sequence(new cc.DelayTime(e.scaleTimeout),new cc.CallFunc(function(){this.scene.setScale(1),this.scene.setPositionRound(this.scene.basePosition),e.onComplete&&e.onComplete()}.bind(this)))),e.scaleLayerSameTime&&(e.layerTimeout=e.scaleTimeout,e.scaleTimeout=0),this.upperFilmLayer&&(this.upperFilmLayer.stopAllActions(),t=e.layerSlide?new cc.MoveBy(e.layerTimeout,{x:0,y:this.upperFilmLayer.height}):new cc.FadeTo(e.layerTimeout,0),this.upperFilmLayer.runAction(new cc.Sequence(new cc.DelayTime(e.scaleTimeout),t,new cc.RemoveSelf)),this.upperFilmLayer=void 0
),this.downFilmLayer&&(this.downFilmLayer.stopAllActions(),t=e.layerSlide?new cc.MoveBy(e.layerTimeout,{x:0,y:-this.downFilmLayer.height}):new cc.FadeTo(e.layerTimeout,0),this.downFilmLayer.runAction(new cc.Sequence(new cc.DelayTime(e.scaleTimeout),t,new cc.RemoveSelf)),this.downFilmLayer=void 0)};var SceneProxy=function(e,t,arguments){this.superClass=e,this.self=t,this.arguments=arguments,cleverapps.newSceneStack=(new Error).stack,this.instance=void 0,this.callbacks=[]};SceneProxy.prototype.instantiate=function(){var e=cc.Node.superClassCreateFunction(this.superClass);this.instance=e.apply(this.self,this.arguments),this.instance.bundles=this.bundles,this.instance.isWide=this.isWide,this.onLoad()},SceneProxy.prototype.onLoad=function(){this.callbacks.forEach(function(e){e(this.instance)},this),this.callbacks=[]},SceneProxy.prototype.whenLoaded=function(e){this.instance?e(this.instance):this.callbacks.push(e)},cleverapps.FixedWidthScene.superExtend=cleverapps.FixedWidthScene.extend,
cleverapps.FixedWidthScene.extend=function(){var s=cleverapps.FixedWidthScene.superExtend.apply(this,arguments),n=function(){cleverapps.eventManager.setCurrentFeatures(),cleverapps.skins.update(),cleverapps.gameSceneLogs=[],cleverapps.gameSceneLogs.push("arguments in SceneClass arg0: "+!!arguments[0]+" arg1: "+!!arguments[1]+" argsLength: "+arguments.length);var e=new SceneProxy(s,this,arguments);e.bundles=cleverapps.bundleLoader.getClassBundles(n,this,arguments).filter(function(e){return bundles[e]}),e.isWide=n.IS_WIDE,cleverapps.config.debugMode&&e.bundles.push("dev_resources"),e.bundles.push("main"),this.onSuccess=cleverapps.accumulate(0,e.instantiate.bind(e)),cleverapps.bundleLoader.loadBundles(e.bundles,{onSuccess:this.onSuccess.bind(this),onFailure:function(){new RestartWindow}});var t=cc.director.getRunningScene();return t&&t.bundles&&(t.performRecursive(function(e){e.stopAllActions()}),cleverapps.bundleLoader.deleteBundles(t.bundles),delete t.bundles),cc.pool.drainAllPools(),e}
;return n.DebugConstructor=s,n.prototype=s.prototype,n.extend=cleverapps.FixedWidthScene.extend,n},cleverapps.FixedWidthScene.prototype.ctorCustomize=function(){},cleverapps.styles.FixedWidthScene={background:!1,sound:{res:bundles.main.urls.background_music_map,delay:.5}};var Windows=function(){this.list=[],this.bundles=0,this.onHideShadow=function(e){},this.onShowShadow=function(e){},this.onMoveShadowUp=function(){},this.onMoveShadowDown=function(){},this.onOpenListeners={},this.onCloseListeners={},this.onAllClosed=[],this.onceNoWindowsListener=void 0};Windows.prototype.isActive=function(){return 0<this.list.length||0<this.bundles},Windows.prototype.reset=function(){this.list=[],this.onAllClosed=[],this.bundles=0,this.onHideShadow()},Windows.prototype.currentWindow=function(){if(0!==this.list.length)return this.list[this.list.length-1]},Windows.prototype.add=function(e){if(cleverapps.metha.isFocused()||-1!==["promptwindow"].indexOf(e.name)||cleverapps.metha.debugMessage(
"Trying to show window without user focus!"),e instanceof WaitWindow)e.displaySelf();else{if(0<this.list.length){var t=this.list[this.list.length-1];e.windowForce?this.onMoveShadowUp():(t.setVisible(!1),this.onHideShadow(),t.initializedSuccess&&t.onHide())}if(this.list.push(e),this.showWindow(),1===this.list.length&&!(this.list[0]instanceof Force))for(var s in this.onOpenListeners)this.onOpenListeners[s]()}},Windows.prototype.hideWindow=function(){var e=this.currentWindow();e&&e.hideSelf()},Windows.prototype.showWindow=function(){var e=this.currentWindow();e&&e.displaySelf()},Windows.prototype.whenAllClosed=function(e){cleverapps.windows.isActive()?cleverapps.windows.onAllClosed.push(e):e()},Windows.prototype.notifyMetha=function(){if(!this.isActive()&&cleverapps.metha.onceNoWindowsListener){var e=cleverapps.metha.onceNoWindowsListener;cleverapps.metha.onceNoWindowsListener=void 0,e()}},Windows.prototype.closeCallback=function(e){for(this.delete(e),e.onClose&&e.onClose(),
cleverapps.environment&&cleverapps.environment.onCloseWindow(e.name),e.closeAnimationCallbacks&&(e.closeAnimationCallbacks.forEach(function(e){e()}),e.closeAnimationCallbacks=[]),e.shareCheckBox&&e.shareCheckBox.onWindowClose(),e.removeFromParent();!this.isActive()&&0<this.onAllClosed.length;){this.onAllClosed.shift()()}setTimeout(this.notifyMetha.bind(this),0)},Windows.prototype.remove=function(e){e.closed||(e.closed=!0,e.stop(),e.beforeCloseAnimation(function(){e===this.currentWindow()?e.closeAnimation(this.closeCallback.bind(this,e)):this.closeCallback(e)}.bind(this)))},Windows.prototype.delete=function(e){var t=e===this.currentWindow(),s=this.list.indexOf(e);if(-1!==s&&this.list.splice(s,1),t)if(0===this.list.length){this.onHideShadow(),cleverapps.Parallax.setEnabled(!0);var n=cc.director.getRunningScene();n&&n.onShow&&n.onShow(),setTimeout(function(){0===this.list.length&&cleverapps.values(this.onCloseListeners).forEach(cleverapps.callFunc)}.bind(this),e.closeDuration())
}else e.windowForce?this.onMoveShadowDown():this.showWindow()};var ShadowView=cc.Node.extend({ctor:function(){if(this._super(),this.shadow=new ShadowLayer,this.shadow.setOpacity(0),this.addChild(this.shadow),this.shadow.visible=!1,this.show=!1,!cleverapps.windows)throw new Error("No cleverapps.windows cleverapps.allInitialized - "+cleverapps.allInitialized);cleverapps.windows.onHideShadow=this.createListener(this.deleteShadow.bind(this)),cleverapps.windows.onShowShadow=this.createListener(this.createShadow.bind(this)),cleverapps.windows.onMoveShadowUp=this.createListener(this.moveUp.bind(this)),cleverapps.windows.onMoveShadowDown=this.createListener(this.moveDown.bind(this))}});ShadowView.prototype.createShadow=function(e){if(!this.show){this.show=!0,this.shadow.stopAllActions(),this.shadow.visible=!0,e.color&&this.shadow.setColor(e.color);var t=cleverapps.styles.ShadowView;this.shadow.runAction(new cc.FadeTo(t.duration,e.opacity||t.opacity))}},
ShadowView.prototype.deleteShadow=function(){if(this.show){this.show=!1,this.shadow.stopAllActions();var e=cleverapps.styles.ShadowView;this.shadow.runAction(new cc.Sequence(new cc.FadeTo(e.duration,0),new cc.CallFunc(function(){this.shadow.visible=!1}.bind(this))))}},ShadowView.prototype.moveUp=function(){this.setLocalZOrder(30)},ShadowView.prototype.moveDown=function(){this.setLocalZOrder(20)},cleverapps.styles.ShadowView={duration:.3,opacity:110};var BaseWindow=cc.Node.extend({listBundles:function(){return[]},ctor:function(e){if(!cleverapps.environment.isEditorScene()||this.editorWindow){this._super(),this.isBundlesLoaded=!1;var t=arguments;e=void 0!==e?e:{};var s=cc.director.getRunningScene();if(e.parentScene||s.windowsContainer||(s=s.scene),cleverapps.config.wysiwygMode){var n=cc.director.getRunningScene();s=this.wysiwygComponentNode=e.parentScene||n.emulatorScene||n}if(s.addChild(this),this.adjustBaseWindow(),this.setLocalZOrder(BaseWindow.WINDOWS_ZORDER),cleverapps.windows.add(
this),this.applyTouch(),cleverapps.eventBus.on("changeSceneSize",this.adjustBaseWindow.bind(this),this),this.bundles=this.listBundles.apply(this,arguments)||[],cleverapps.skins.getBundle()&&this.bundles.push(cleverapps.skins.getBundle()),this.bundles.push("windows"),this.bundles=cleverapps.unique(this.bundles),this.bundles=this.bundles.filter(function(e){return bundles[e]}),0!==this.bundles.length){this.showLoading();var i=[this.createListener(function(){this.hideLoading(),this.runWindow(t)}.bind(this)),this.createListener(function(){this.deleteSelf(),new RestartWindow}.bind(this))];Array.prototype.push.apply(i,arguments),this.load.apply(this,i)}else this.runWindow(t)}},load:function(e,t,s){cleverapps.bundleLoader.loadBundles(this.bundles,{onSuccess:e,onFailure:t})},adjustBaseWindow:function(){var e=cc.director.getRunningScene();cleverapps.config.wysiwygMode&&(e=this.wysiwygComponentNode);var t=e.width,s=e.height;this.setScale(1/this.parent.getScale()),this.setContentSize(t,s),
this.setPositionRound((this.parent.width*this.parent.getScale()-t)/2,(this.parent.height*this.parent.getScale()-s)/2),this.loading&&this.loading.setPositionRound(t/2,s/2)},applyTouch:function(){cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchStart.bind(this),onTouchEnded:this.onTouchEnd.bind(this)},this),cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:function(e){return!!this.isVisible()&&(e&&e.stopPropagation&&e.stopPropagation(),!0)}.bind(this),onMouseScroll:function(e){return!!this.isVisible()&&(e&&e.stopPropagation&&e.stopPropagation(),!0)}.bind(this)},this)},showLoading:function(){var e=this.loading=WaitWindow.prototype.showLoading.call(this);e.setPositionRound(this.width/2,this.height/2),this.addChild(e),e.visible=!1,e.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.CallFunc(function(){e.visible=!0})))},hideLoading:function(){this.loading&&(this.loading.removeFromParent(),
delete this.loading)},hasAppeared:function(){return this.isBundlesLoaded},runWindow:function(e){this.isBundlesLoaded=!0,this.onWindowLoaded.apply(this,e),this.initializedSuccess?this.displaySelf():this.deleteSelf()},hideSelf:function(){cleverapps.windows.currentWindow()===this&&(this.setVisible(!1),this.styles.shadow&&cleverapps.windows.onHideShadow(),this.onHide())},displaySelf:function(){this.hasAppeared()&&cleverapps.windows.currentWindow()===this&&(this.setVisible(!0),this.styles.shadow&&cleverapps.windows.onShowShadow(this.styles.shadow),cleverapps.environment&&cleverapps.environment.onOpenWindow(this.name),this.popUpAnimation(),this.onShow())},deleteSelf:function(){cleverapps.windows.delete(this),this.removeFromParent()},stop:function(){cc.eventManager.removeListeners(this,!0)},beforeCloseAnimation:function(e){e()},close:function(){!0===this.closed&&cleverapps.throwAsync("Closing already closed window: "+this.name),this.isBundlesLoaded&&!this.closed&&(
cleverapps.bundleLoader.deleteBundles(this.bundles),cleverapps.windows.remove(this))}});BaseWindow.WINDOWS_ZORDER=21;var Window=BaseWindow.extend({addBottomButtons:function(e){var t=this.buttons=new Buttons(e);this.window.addChild(t);var s=(n=this.styles.BottomButton||cleverapps.styles.Window.BottomButton).bottomPadding;if(t.setPositionRound(this.window.width/2,t.height/2+s),this.shareCheckBox){var n=cleverapps.styles.Window.ShareCheckBox;this.shareCheckBox.setPositionRound(this.window.width/2,t.y+t.height/2+this.shareCheckBox.height/2+n.offsetBottom)}},onWindowLoaded:function(e){this.initializedSuccess=!0,cleverapps.Parallax.setEnabled(!1);var t=this.styles=e.styles||cleverapps.styles.Window;this.name=e&&e.name||e&&e.title||"window",this.onClose=e&&e.onClose||this.onClose,this.extraWidth=e.extraWidth||0,this.extraHeight=e.extraHeight||0,this.contentOffsetX=e.contentOffsetX||0,this.contentOffsetY=e.contentOffsetY||0;var s=e.content;if(s){this.customizeContent();var n=s.getContentSize()
,i=[];if(e.button){var o=this.button=new BottomButton(this,e.button);i.push(o)}e.buttons&&(i=i.concat(e.buttons)),this.withBg=!e.noBackground&&!t.noBackground,!e.shareCheckBox||cleverapps.flags.noviral||cleverapps.flags.noshares||(this.createShareCheckBox(i,e.shareCheckBox),n.height+=this.getShareCheckBoxHeight());var a=this.windowSize=this.calcBackgroundSize(n,e);this.withBg?this.window=this.createBackground(a,t,e):(this.window=new cc.Node,this.window.setContentSize2(a),this.window.setAnchorPoint2(.5,.5),this.addChild(this.window)),e.foreground&&e.adjustToContent&&this.addForeground(s,e.foreground);var r=cleverapps.skins.getSlot("windowDecors",{decors:t.decors,window:this,level:e.level});r&&(this.decors=new Decors(this,r)),this.adjustWindow(e),this.withBg&&this.createInnerBackground(),!1!==e.closeButton&&!1!==t.closeButton&&(this.withBg&&!t.bandButton||t.regularCloseButton||e.regularCloseButton?this.createCloseButton(e.closeButtonDelay):this.createCloseBandButton(!1,e.closeButtonDelay
)),e.help&&this.createHelpButton(e.help),t.Title&&e.title&&(this.addTitle(e.title),t.Title.bg&&!e.noTitleBg&&this.addTitleBg(t.Title.bg));var l=e.adjustToContent?0:t.contentOffset+this.getShareCheckBoxHeight()/2;s.setPositionRound(this.window.width/2+this.contentOffsetX,this.window.height/2+l+this.contentOffsetY),this.window.addChild(s),this.shareCheckBox&&(this.window.addChild(this.shareCheckBox),this.shareCheckBox.setPositionRound(this.window.width/2,this.shareCheckBox.height/2+t.ShareCheckBox.offsetBottom)),0<i.length&&this.addBottomButtons(i)}this.onChangeSceneSizeOptions=e,cleverapps.eventBus.on("changeSceneSize",this.onChangeSceneSize.bind(this),this),(!1!==e.closeButton||e.closeByBackButton)&&(this.closeByBackButton=this.close.bind(this));var c=this.onTouchInShadow;this.onTouchInShadow=function(){},this.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.CallFunc(function(){c?this.onTouchInShadow=c:e.notCloseByTouchInShadow||(this.onTouchInShadow=this.close.bind(this))}.bind(
this)))),this.closeAnimationCallbacks=[],this.customize(),this.checkFit(s)},adjustWindow:function(e){if(this.windowSize){var t=cc.size(this.windowSize.width,this.windowSize.height),s=cleverapps.UI.getSceneSize();cleverapps.config.wysiwygMode&&(s=this.wysiwygComponentNode.getContentSize()),t.width+2*this.styles.Background.paddingX>s.width&&(t.width=s.width-2*this.styles.Background.paddingX),t.height+2*this.styles.Background.paddingY>s.height&&(t.height=s.height-2*this.styles.Background.paddingY),this.windowScale=Math.min(t.width/this.windowSize.width,t.height/this.windowSize.height),this.styles.noWindowScale&&(this.windowScale=1),this.window.setScale(this.windowScale);var n=e.bgOffset||this.styles.bgOffset,i=n?n.x:0,o=n?n.y:0;this.window.setPositionRound(this.width/2+i,this.height/2+o),this.window.basePosition=this.window.getPosition()}},onChangeSceneSize:function(){this.adjustWindow(this.onChangeSceneSizeOptions),this.closeButton instanceof BandButton&&this.createCloseBandButton(!0)},
addTitleBg:function(e){var t,s=cleverapps.skins.getSlot("windowTitle",{image:e.image});!1===e.scale9?t=new cc.Sprite(s):(t=cleverapps.UI.createScale9Sprite(s,e.scale9),!e.adjustToWindow&&e.adjustToText&&(t.height+=e.adjustToText.height||0)),t.setLocalZOrder(e.zIndex),this.window.addChild(t),t.setPositionRound(e.x,e.y),this.titleBg=t,this.decors&&this.decors.initTitleDecorators(),this.updateTitleBg()},checkFit:function(e){var t=cleverapps.UI.getSceneSize(),s=t.width+cleverapps.styles.Window.checkFitThreshold;if(this.window&&this.window.width*this.window.scale>s){var n="Window width "+this.window.width+" scale "+this.window.scale+" windowScale "+this.windowScale+" is greater than scene width "+t.width;e&&(n+=", content width "+e.width+" scale "+e.scale),cleverapps.throwAsync(n)}},createCloseBandButton:function(e,t){this.closeButton&&this.closeButton.removeFromParent();var s=new BandButton({onClicked:this.close.bind(this)});this.addChild(s,1),e||(s.hide(!0),s.show(t||0)),
this.closeButton=s},createCloseButton:function(e){var t,s=this.styles.CloseButton;t=new cleverapps.UI.Button({button_png:bundles.main.frames.window_close_png,button_on_png:bundles.main.frames.window_close_on_png,onClicked:this.close.bind(this)}),this.styles.CloseButton.relativeToScene?(this.addChild(t),t.setPositionRound(this.styles.CloseButton.relativeToScene)):(this.window.addChild(t),t.setPositionRound(this.window.width-t.width/2+s.offsetX,this.window.height-t.height/2+s.offsetY)),t.setLocalZOrder(this.styles.CloseButton.zOrder),this.closeButton=t,e&&(t.setVisible(!1),t.setScale(.3),t.runAction(new cc.Sequence(new cc.DelayTime(e),new cc.Show,new cc.ScaleTo(.4,1).easing(cc.easeBackOut()))))},createHelpButton:function(e){var t=this.styles.HelpButton,s=new cleverapps.UI.Button({button_png:bundles.buttons_main.frames.help_button_png,button_on_png:bundles.buttons_main.frames.help_button_on_png,onClicked:e});s.setPositionRound(t),s.setLocalZOrder(t.zOrder),this.helpButton=s,
this.window.addChild(s)},createShareCheckBox:function(e,t){var s=!0;cleverapps.social.isLoggedIn()||(s=!1),e&&e.forEach(function(e){e instanceof ShareBonusButton&&e.shareBonus.type===cleverapps.ShareBonus.DIALOG&&(s=!1)}),s&&(this.shareCheckBox=new ShareCheckBox(t,this))},getShareCheckBoxHeight:function(){return this.shareCheckBox?this.shareCheckBox.height+this.styles.ShareCheckBox.offsetBottom+this.styles.ShareCheckBox.offsetTop:0},onChangeBackground:function(e){this.decors&&this.decors.updateAll(),this.titleBg&&this.titleBg.setPositionRound(this.styles.Title.bg)},customizeContent:function(){},customize:function(){},onShow:function(){this.shareCheckBox&&this.shareCheckBox.updateState()},onHide:function(){},createBackground:function(e,t,s){var n;n=s.windowBg?s.windowBg:t.Background.image?t.Background.image:bundles.windows.frames.window_bg_png;var i=cleverapps.skins.getSlot("windowBg",{image:n,level:s.level}),o=cleverapps.UI.createScale9Sprite(i,t.Background.scale9)
;return o.setContentSize2(e),t.Background.opacity&&o.setOpacity(t.Background.opacity),this.addChild(o),this.bg=o,t.Background.stitches&&new StitchesComponent(this.bg,t.Background.stitches),o},addForeground:function(e,t){"string"==typeof t&&(t={image:t});var s=this.foreground=cleverapps.UI.createScale9Sprite(t.image,cleverapps.UI.Scale9Rect.TwoPixelXY);return s.setAnchorPoint2(0,0),s.setPositionRound(0,0),s.setContentSize2(e.width,e.height),s.setLocalZOrder(1),e.addChild(s),s},createInnerBackground:function(){if(this.styles.Background.inner){var e=this.innerBg=cleverapps.UI.createScale9Sprite(bundles.main.frames.window_inner_bg_png);e.setContentSize2(this.window.width-2*this.styles.Background.inner.padding.x,this.window.height-2*this.styles.Background.inner.padding.y),this.window.addChild(e),e.setPositionRound(this.styles.Background.inner)}},calcBackgroundSize:function(e,t){var s=!this.withBg&&!(
this.styles.noBackground&&this.styles.noBackground.keepSize||t.noBackground&&t.noBackground.keepSize),n=e.width+(this.withBg&&!t.adjustToContent?2*this.styles.Border.x:0)+this.extraWidth,i=e.height+(s||t.adjustToContent?0:2*this.styles.Border.y)+this.extraHeight,o=void 0!==t.minHeight?t.minHeight:cleverapps.styles.Window.minHeight;i<o&&(i=o);var a=void 0!==t.minWidth?t.minWidth:cleverapps.styles.Window.minWidth;return n<a&&(n=a),cc.size(n,i)},touchInShadow:function(e){if(!this.initializedSuccess)return!1;if(this.window){var t=this.window.convertToNodeSpace(e.getLocation()),s=this.window.getContentSize();if(cc.rectContainsPoint(cc.rect(0,0,s.width,s.height),t))return!1}return!0},onTouchStart:function(e){return!!this.isVisible()&&(this.touchStartInShadow=this.touchInShadow(e),!0)},onTouchEnd:function(e){this.touchStartInShadow&&this.touchInShadow(e)&&this.onTouchInShadow(e)},addTitle:function(e){var t=e;e.text&&(t=e.text);var s=cleverapps.styles.FONTS.WINDOW_TITLE_TEXT;e.font&&(s=e.font)
;var n={};e.toReplace&&(n=e.toReplace);var i=this.styles.Title.offset||cleverapps.styles.Window.Title.offset;this.styles.Title.offsetY&&(i=this.styles.Title.offsetY);var o=this.styles.Title.offsetX?this.styles.Title.offsetX:0,a=cleverapps.UI.generateTTFText(t,s,n);a.setPositionRound(this.window.width/2-o,this.window.height-i),a.setAnchorPoint2(),a.setLocalZOrder(this.styles.Title.zIndex),this.window.titleText=a,this.window.addChild(a),this.setTitle(t,n)},setTitle:function(e,t){this.window.titleText&&(this.window.titleText.setString(e,t),!this.closeButton||this.closeButton instanceof BandButton?this.window.titleText.fitTo(this.window.width*this.styles.maxTitleSize.scale):this.window.titleText.fitTo(this.window.width-2*(this.closeButton.width+this.styles.titleCloseButtonMargin))),this.titleBg&&this.updateTitleBg()},updateTitleBg:function(){var e=this.styles.Title.bg;if(e.adjustToWindow){var t=this.window.width+e.adjustToWindow.width;!1===e.scale9?this.titleBg.setScale(
t/this.titleBg.width):this.titleBg.setContentSize2(t,this.titleBg.getContentSize().height),!this.closeButton||this.closeButton instanceof BandButton||!e.adjustToWindow.closeButtonOffset||this.closeButton.setPositionRound(this.titleBg.x+this.titleBg.width*this.titleBg.scaleX/2-this.closeButton.width/2+e.adjustToWindow.closeButtonOffset.x,this.titleBg.y+e.adjustToWindow.closeButtonOffset.y),this.helpButton&&e.adjustToWindow.helpButtonOffset&&this.helpButton.setPositionRound(this.titleBg.x-this.titleBg.width*this.titleBg.scaleX/2+this.helpButton.width/2+e.adjustToWindow.helpButtonOffset.x,this.titleBg.y+e.adjustToWindow.helpButtonOffset.y)}else if(e.adjustToText){this.titleBg.setContentSize(this.window.titleText.width+e.adjustToText.width,this.titleBg.height),void 0!==e.adjustToText.adjustToWindowWidth&&(this.titleBg.width=Math.min(this.titleBg.width,this.window.width+e.adjustToText.adjustToWindowWidth));var s=this.window.titleText.getPosition();e.adjustToText.offset&&(
s.x+=e.adjustToText.offset.x,s.y+=e.adjustToText.offset.y),this.titleBg.setPositionRound(s),!this.closeButton||this.closeButton instanceof BandButton||!e.adjustToText.closeButtonOffset||this.closeButton.setPositionRound(this.titleBg.x+this.titleBg.width/2-this.closeButton.width/2+e.adjustToText.closeButtonOffset.x,this.titleBg.y+e.adjustToText.closeButtonOffset.y),this.helpButton&&e.adjustToText.helpButtonOffset&&this.helpButton.setPositionRound(this.titleBg.x-this.titleBg.width/2+this.helpButton.width/2+e.adjustToText.helpButtonOffset.x,this.titleBg.y+e.adjustToText.helpButtonOffset.y)}else{t=this.window.titleText.getContentSize().width;t*=1.2;var n=this.styles.Title.bg.minWidth,i=this.styles.Title.bg.maxWidth;n&&t<n&&(t=n),i&&i<t&&(t=i),this.titleBg.scaleX=t/this.titleBg.width}this.decors&&this.decors.updateAll()}});cleverapps.styles.Window={shadow:!0,checkFitThreshold:10,maxTitleSize:{scale:.77},titleCloseButtonMargin:46,CloseButton:{offsetX:20,offsetY:20,zOrder:1},HelpButton:{
zOrder:1,x:{align:"left",dx:70},y:{align:"top",dy:-45}},BottomButton:{width:void 0,height:void 0,bottomPadding:50,padding:{x:30},marginX:30},minHeight:200,minWidth:240,contentOffset:16,windowShowUpAnimation:{name:"default",force:!1},Background:{image:bundles.windows.frames.window_bg_png,scale9:cleverapps.UI.Scale9Rect.Default,paddingX:15,paddingY:40},Title:{offset:70,zIndex:2},Border:{x:75,y:150},ShareCheckBox:{offsetBottom:15,offsetTop:-20},closeAnimation:{duration:200}},Window.prototype.onPopUpAnimationFinished=function(){},Window.prototype.popUpAnimation=function(){var e=this.chooseAnimation();e?(this.window&&this.window.stopAllActions(),e.open.call(this,this.onPopUpAnimationFinished.bind(this))):this.onPopUpAnimationFinished()},Window.prototype.stop=function(){BaseWindow.prototype.stop.apply(this),this.window&&this.window.stopAllActions()},Window.prototype.closeAnimation=function(e){cleverapps.audio.playSound(bundles.main.urls.close_window_effect||bundles.main.urls.window_effect)
;var t=this.chooseAnimation();!t||0<cleverapps.windows.list.length&&!this.styles.windowShowUpAnimation.force?e():t.close.call(this,e)},Window.prototype.chooseAnimation=function(){var e=this.styles;if(e.windowShowUpAnimation&&(this.window||this instanceof Force))return this.bg||e.windowShowUpAnimation.force?WINDOW_ANIMATIONS[e.windowShowUpAnimation.name]:WINDOW_ANIMATIONS.default},Window.prototype.closeDuration=function(){return(this.styles||cleverapps.styles.Window).closeAnimation.duration},cleverapps.overrideFonts(cleverapps.styles.FONTS,{WINDOW_TITLE_TEXT:{size:70,color:cleverapps.styles.COLORS.COLOR_BROWN}});var BottomButton=cleverapps.UI.Button.extend({ctor:function(e,t){var s=cleverapps.styles.Window.BottomButton;t.onClicked=function(){!1!==e.visible?t.onPressed?t.onPressed():e.close():console.log("Blocked onClick as invisible")}.bind(this),t.font=t.font||cleverapps.styles.FONTS.BUTTON_TEXT,t.texType=t.hasOwnProperty("texType")?t.texType:s.texType,t.width=t.width||s.width,
t.height=t.height||s.height,t.padding=t.padding||s.padding,this._super(t)}});cc.checkGLErrorDebug=function(e,t){if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var s=cc._renderContext.getError();s||"afterCreateProgramObj"!==t||e._programObj instanceof WebGLProgram||(s="notWebGLProgram"),s&&!cc.sys.isNative&&(alert("An error occurred"),window.location.reload())}};var checkBrokenLink=function(e,t){e||0===t.length||null===e||(console.log(t),cleverapps.throwAsync("broken frame: "+e))};if(cleverapps.isPixiJs()||(cc.Base=cc.Node),cc.Scale9Sprite.prototype.ctor=cleverapps.extendFunc(cc.Scale9Sprite.prototype.ctor,function(e){checkBrokenLink(e,arguments);var t,s=isVirtualLink(e)?e:e&&e.virtualFrameName;0<arguments.length&&"string"==typeof e&&(e=t=processVirtualImage(e)),this._super.apply(this,arguments),this.virtualFrameName=s,this.spriteFrameName=t}),cc.Sprite.prototype.ctor=cleverapps.extendFunc(cc.Sprite.prototype.ctor,function(e){checkBrokenLink(e,arguments);var t,s=isVirtualLink(e
)?e:e&&e.virtualFrameName;0<arguments.length&&"string"==typeof e&&(e=t=processVirtualImage(e)),this._super.apply(this,arguments),this.virtualFrameName=s,this.spriteFrameName=t}),cc.Sprite.prototype.setSpriteFrame=cleverapps.extendFunc(cc.Sprite.prototype.setSpriteFrame,function(e){return checkBrokenLink(e,arguments),this.virtualFrameName=isVirtualLink(e)?e:e&&e.virtualFrameName,"string"==typeof(e=processVirtualImage(e,this.getPreferredBundles()))&&0===e.indexOf("#")&&(e=e.substr(1,e.length-1)),this.spriteFrameName=e&&e.spriteFrameName||e,this._super.call(this,e)}),cc.Sprite.prototype.getSpriteFrame=cleverapps.extendFunc(cc.Sprite.prototype.getSpriteFrame,function(){var e=this._super.call(this);return e&&(e.spriteFrameName=this.spriteFrameName,e.virtualFrameName=this.virtualFrameName),e}),cc.Scale9Sprite.prototype.setSpriteFrame=cleverapps.extendFunc(cc.Scale9Sprite.prototype.setSpriteFrame,function(e){return checkBrokenLink(e,arguments),this.virtualFrameName=isVirtualLink(e
)?e:e&&e.virtualFrameName,this.spriteFrameName="string"==typeof e?e:e&&e.spriteFrameName,this._super.call(this,e)}),cc.spriteFrameCache.getSpriteFrame=cleverapps.extendFunc(cc.spriteFrameCache.getSpriteFrame,function(e,t){var s=isVirtualLink(n)?e:"";"string"==typeof(e=processVirtualImage(e,t))&&0===e.indexOf("#")&&(e=e.substr(1,e.length-1));var n=this._super.call(this,e);return n&&(n.spriteFrameName=e,n.virtualFrameName=s),n}),cleverapps.styles.FONTS.SYSTEM={type:{name:"Arial"},size:20,color:cleverapps.styles.COLORS.BLACK},cc.Base.prototype.replaceParent=function(e){this.removeFromParent(!1),e.addChild(this)},cc.Base.prototype.adjustScaleTo=function(e){for(var t=1;e;)t/=(e.scaleX+e.scaleY)/2,e=e.parent;for(var s=this;s;)t*=(s.scaleX+s.scaleY)/2,s=s.parent;return t},cc.Base.prototype.replaceParentSamePlace=function(e,t){t&&t.keepScale&&this.setScale(this.adjustScaleTo(e));var s=e.convertToNodeSpace(this.parent.convertToWorldSpace(this.getPosition()));this.replaceParent(e),
this.setPosition(s)},cc.Base.prototype.debugGetName=function(){var s=this.constructor,n="[unknown]";return[window,cc,ccui,cleverapps,cleverapps.UI,sp,levels].forEach(function(e){for(var t in e)if(e[t]===s){n=t;break}}),n},cc.Base.prototype.debugParents=function(){for(var e=[],t=this;t;)e.push(t.debugGetName()),t=t.parent;console.log("window.debug -> "+e.join("->"))},cc.Base.prototype.debugBorder=function(e){window.debug=this,e=e||{},"object"==typeof selectedNode&&"function"==typeof selectedNode.unselect&&selectedNode!==this&&selectedNode.unselect(),(selectedNode=this).debugBorderDx=this.debugBorderDx||0,this.debugBorderDy=this.debugBorderDy||0;var i=function(e){return+e.toFixed(2)},t=function(e){var t=this.getBoundingBox();return[this.debugGetName()+(this instanceof cc.LabelTTF?" "+this.getFontSize():""),i(t.width)+"x"+i(t.height)+" ("+this.width+"x"+this.height+")","scale: "+this.scaleX+" x "+this.scaleY,"pos: "+this.x+" x "+this.y,
"offset: "+this.debugBorderDx+" x "+this.debugBorderDy,"rotation "+this.rotation].join(e)}.bind(this),o=function(e,t){var s=0<=e?1:-1,n=i(Math.abs(e)+t);return n<=0?e:n*s},a=function(){console.log(t("\t")),this.labelSavedPtr&&e.showPosition&&this.labelSavedPtr.setString(t("\n"))}.bind(this);if(this.debugBorderKeyboardListener=cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e){if(-1!==[cc.KEY.up,cc.KEY.down,cc.KEY.right,cc.KEY.left].indexOf(e))if(this.onArrowPressed&&this.onArrowPressed(e))a();else if(window.keyboardAnchorsMode){switch(e){case cc.KEY.left:this.sprite.anchorX+=.01,this.debugBorderDx+=.01;break;case cc.KEY.right:this.sprite.anchorX-=.01,this.debugBorderDx-=.01;break;case cc.KEY.down:this.anchorY+=.01,this.debugBorderDy+=.01;break;case cc.KEY.up:this.anchorY-=.01,this.debugBorderDy-=.01}console.log("anchors: "+Math.floor(100*this.sprite.anchorX)/100+" x "+Math.floor(100*this.anchorY)/100+"\toffsets: "+Math.floor(100*this.debugBorderDx
)/100+" x "+Math.floor(100*this.debugBorderDy)/100)}else if(cleverapps.keyboardController.isPressed(cc.KEY.r)){switch(e){case cc.KEY.down:case cc.KEY.left:--this.rotation;break;case cc.KEY.up:case cc.KEY.right:++this.rotation}a()}else if(cleverapps.keyboardController.isPressed(cc.KEY.s)){var t;switch(e){case cc.KEY.up:case cc.KEY.right:t=.05;break;case cc.KEY.down:case cc.KEY.left:t=-.05}this.scaleX=o(this.scaleX,t),this.scaleY=o(this.scaleY,t),this.onChangeScale&&this.onChangeScale(t),a()}else if(cleverapps.keyboardController.isPressed(cc.KEY.w)){switch(e){case cc.KEY.up:this.width++;break;case cc.KEY.down:this.width--}a()}else if(cleverapps.keyboardController.isPressed(cc.KEY.h)){switch(e){case cc.KEY.up:this.height++;break;case cc.KEY.down:this.height--}a()}else if(cleverapps.keyboardController.isPressed(cc.KEY.f)&&this instanceof cc.LabelTTF){switch(e){case cc.KEY.up:this.setFontSize(this.getFontSize()+1);break;case cc.KEY.down:this.setFontSize(this.getFontSize()-1)}a()}else if(
cleverapps.keyboardController.isPressed(cc.KEY.d)&&this instanceof cc.LabelTTF){var s=this.getDimensions();switch(e){case cc.KEY.up:this.setDimensions(s.width,s.height+1);break;case cc.KEY.down:this.setDimensions(s.width,s.height-1);break;case cc.KEY.left:this.setDimensions(s.width-1,s.height);break;case cc.KEY.right:this.setDimensions(s.width+1,s.height)}a()}else{var n=cleverapps.keyboardController.isPressed(cc.KEY.shift)?10:1;switch(e){case cc.KEY.left:this.x-=n,this.debugBorderDx-=n;break;case cc.KEY.right:this.x+=n,this.debugBorderDx+=n;break;case cc.KEY.down:this.y-=n,this.debugBorderDy-=n;break;case cc.KEY.up:this.y+=n,this.debugBorderDy+=n}a()}}.bind(this)}),cc.eventManager.addListener(this.debugBorderKeyboardListener,this),!this.spriteSavedPtr){var s=cleverapps.UI.createScale9Sprite(bundles.dev_resources.frames.border,cleverapps.UI.Scale9Rect.TwoPixelY);s.setAnchorPoint2(0,0),s.setContentSize(this.getContentSize()),this.spriteSavedPtr=s;var n=[new cc.Color(255,0,0,255),
new cc.Color(255,0,255,0),new cc.Color(255,255,0,0)];s.setColor(cleverapps.Random.choose(n,this.debugGetName().length)),this.addChild(s),s.setLocalZOrder(10)}if(!this.labelSavedPtr){var r;r=e.labelText?e.labelText:e.showZOrder?this.getLocalZOrder():e.showPosition?t("\n"):this.getContentSize().width+" x "+this.getContentSize().height+" "+this.debugGetName();var l=cleverapps.UI.generateTTFText(r,cleverapps.styles.FONTS.SYSTEM);l.setAnchorPoint2(0,0),l.setPosition(0,this.getContentSize().height),(this.labelSavedPtr=l)._super_setString=l.setString,l.setString=function(){l._super_setString.apply(l,arguments),l.setScaleX(Math.abs(l.scaleX)*this.scaleX<0?-1:1),l.setScaleY(Math.abs(l.scaleY)*this.scaleY<0?-1:1)}.bind(this),l.setScaleX(Math.abs(l.scaleX)*this.scaleX<0?-1:1),l.setScaleY(Math.abs(l.scaleY)*this.scaleY<0?-1:1),this.addChild(l),l.setLocalZOrder(10)}e.noResLinks||this.showUnpackedRes()},cc.Base.prototype.runForAllChildren=function(t,s){var n=0,i=function(e){n++,e.getChildrenCount(
)&&e.getChildren().forEach(function(e){t(e),(!s.depth||n<s.depth)&&i(e)})};(s=s||{}).selfRun&&t(this),i(this)},cc.Base.prototype.showUnpackedRes=function(){if("undefined"!=typeof unpackedMap){var a=0,r=function(e){if(e.getChildrenCount()&&a++<10&&e.getChildren().forEach(function(e){r(e)}),e.constructor===cc.Sprite||e.constructor===cc.Scale9Sprite){var t=processVirtualImage(e.spriteFrameName);if(t)if("#"!==t[0]&&(t="#"+t),i=unpackedMap[t]){var s=i.indexOf("/"),n="https://github.com/rvvslv/"+i.substring(0,s)+"/tree/master"+i.substring(s);console.log(e.spriteFrameName+"\n"+n)}}if(e.constructor===sp.SkeletonAnimation){var i,o=processVirtualJson(e.jsonName);if(o)if(i=unpackedMap[o]){s=i.indexOf("/"),n="https://github.com/rvvslv/"+i.substring(0,s)+"/tree/master"+i.substring(s,i.lastIndexOf("/"));console.log(e.jsonName.substring(0,e.jsonName.lastIndexOf("-"))+".json\n"+n)}}};r(this)}},cc.Base.prototype.cleanupBorder=function(){this.spriteSavedPtr&&(this.spriteSavedPtr.removeFromParent(),
delete this.spriteSavedPtr),this.labelSavedPtr&&(this.labelSavedPtr.removeFromParent(),delete this.labelSavedPtr),cc.eventManager.removeListener(this.debugBorderKeyboardListener),"object"==typeof selectedNode&&selectedNode===this&&(selectedNode=void 0),window.debug===this&&(window.debug=void 0)},cc.Base.prototype.isRunningSafe=function(){return this.runningSafe&&this.isRunning()},cc.Base.listener=function(e){return function(){if(!this.stopListeners)return e.apply(this,arguments)}},cc.Base.prototype.createListener=function(e){var t=this;return this.registerCleanupCallback(function(){e=t=void 0}),function(){if(e&&t&&!t.stopListeners)return e.apply(t,arguments)}},cc.Base.prototype.cleanableValue=function(e){if(!e)return e;var t={value:e};return this.registerCleanupCallback(function(){delete t.value}),t},cc.Base.prototype.hasTouch=function(e){if(!this.visible)return!1;var t=this.convertTouchToNodeSpace(e);return cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t)},
cc.Base.prototype.createListener_onExitTransitionDidStart=cc.Base.prototype.onExitTransitionDidStart,cc.Base.prototype.onExitTransitionDidStart=function(){this.stopListeners=!0,this.runningSafe=!1,this._cropContainerDirty=!0,this.createListener_onExitTransitionDidStart()},cc.Base.RegisterShowAffected=function(e){},cleverapps.config.debugMode&&!cc.sys.isNative){var showDrawCalls=void 0;cc.Base.prototype.showDrawCall=function(e){void 0!==showDrawCalls&&((showDrawCalls[this.__instanceId]=this).numberOfDraw=cc.g_NumberOfDraws,this.drawStack=(new Error).stack,this.drawInfo=JSON.stringify(e))};var analyzeDrawCalls=function(){cleverapps.values(showDrawCalls).sort(function(e,t){return e.numberOfDraw-t.numberOfDraw}).forEach(function(e){e.debugBorder({labelText:e.numberOfDraw,noResLinks:!0});var t=e.numberOfDraw+" "+e.debugGetName();e instanceof cc.LabelTTF&&(t+=" "+e.getString()),"string"==typeof e.spriteFrameName&&(t+=" "+e.spriteFrameName),"string"==typeof e.jsonName&&(t+=" "+e.jsonName),
e.drawInfo&&(t+=" drawInfo - "+e.drawInfo,delete e.drawInfo),"SkeletonAnimation"===e.debugGetName()&&(t+=" stack - "+e.drawStack),console.log(t)}),console.log(Object.keys(showDrawCalls).length+" draw calls"),console.log(cc.g_NumberOfVertexes+" vertexes")};cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.KEYBOARD,isTextsVisible:!0,onKeyPressed:function(e){var t=cleverapps.keyboardController.isPressed(cc.KEY.ctrl);t&&e===cc.KEY.q?void 0===showDrawCalls?(showDrawCalls={},setTimeout(analyzeDrawCalls,100)):(cleverapps.values(showDrawCalls).forEach(function(e){e.cleanupBorder()}),showDrawCalls=void 0):t&&e===cc.KEY.y?(this.isTextsVisible?$(cc.LabelTTF).filter(function(e){return cc.rectIntersectsRect(e.getBoundingBoxToWorld(),cc.director.getRunningScene().getBoundingBox())}).hide():$(cc.LabelTTF).show(),this.isTextsVisible=!this.isTextsVisible):e===cc.KEY.Delete&&(window.debug&&window.debug.onDeletePressed?window.debug.onDeletePressed(
):window.debug&&window.debug.removeFromParent&&(window.debug.removeFromParent(),window.debug=void 0))}}),2);var matchedDebugNodes=[];cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,processTouch:function(t){if(t&&t.visible&&!("undefined"!=typeof EditorScene&&t instanceof EditorScene)&&(t.hasTouch(this.touch)&&!this.excluded.some(function(e){return t instanceof e})&&(this.matchedNode=t,this.preferred.some(function(e){return t instanceof e})&&(this.preferredNode=t)),t.children))for(var e=0;e<t.children.length&&!this.preferredNode;e++)this.processTouch(t.children[e])},onTouchBegan:function(e){if(!cleverapps.config.wysiwygMode){var t=cleverapps.keyboardController.isPressed(cc.KEY.ctrl),s=cleverapps.keyboardController.isPressed(cc.KEY.shift),n=cleverapps.keyboardController.isPressed(cc.KEY.c),i=cleverapps.keyboardController.isPressed(cc.KEY.a);return this.matchedNode=void 0,this.preferredNode=void 0,this.touch=e,this.excluded=[
SideBarView,cleverapps.UI.ScrollView,cleverapps.UI.ScrollBarContainer],"undefined"!=typeof CenterHint&&this.excluded.push(CenterHint),void 0!==KeypadView&&this.excluded.push(KeypadView),void 0!==FireworksAnimation&&this.excluded.push(FireworksAnimation),"undefined"!=typeof MergeTutorialView&&this.excluded.push(MergeTutorialView),i||this.excluded.push(cleverapps.Spine,sp.SkeletonAnimation),this.preferred=[],"undefined"!=typeof UnitView&&this.preferred.push(UnitView),n?(this.processTouch(cc.director.getRunningScene()),!!(this.matchedNode&&"undefined"!=typeof UnitView&&this.matchedNode instanceof UnitView)&&(Game.currentGame.addUnits(new Unit(this.matchedNode.unit)),!0)):(t||s)&&(t&&(matchedDebugNodes.forEach(function(e){e.cleanupBorder()}),matchedDebugNodes=[]),this.processTouch(cc.director.getRunningScene()),this.matchedNode)?(this.matchedNode.debugParents(),this.matchedNode.debugBorder({showPosition:!0}),matchedDebugNodes.push(this.matchedNode),!0):(matchedDebugNodes.length&&(
matchedDebugNodes.forEach(function(e){e.cleanupBorder()}),matchedDebugNodes=[]),!1)}}}),-100)}cc.Base.prototype.onEnterTransitionDidFinish=cleverapps.extendFunc(cc.Base.prototype.onEnterTransitionDidFinish,function(){this.stopListeners=!1,this.runningSafe=!0,this._super.apply(this,arguments),cc.Base.RegisterShowAffected(this)}),cc.Scale9Sprite.prototype.onEnterTransitionDidFinish=cleverapps.extendFunc(cc.Scale9Sprite.prototype.onEnterTransitionDidFinish,function(){this._super.apply(this,arguments),this.virtualFrameName&&this.setSpriteFrame(cc.spriteFrameCache.getSpriteFrame(this.virtualFrameName,this.getPreferredBundles()))}),cc.Sprite.prototype.onEnterTransitionDidFinish=cleverapps.extendFunc(cc.Sprite.prototype.onEnterTransitionDidFinish,function(){this._super.apply(this,arguments),this.virtualFrameName&&this.setSpriteFrame(this.virtualFrameName)}),cc.Base.prototype.cleanup=cleverapps.extendFunc(cc.Base.prototype.cleanup,function(){this.stopListeners=!0,this.runningSafe=!1,
this.runCleanupCallbacks(),this._super()}),cc.Base.prototype.registerTarget=function(e,t){(e[t=t||"target"]=this).registerCleanupCallback(function(){this===e[t]&&delete e[t]}.bind(this))},cc.Base.prototype.registerCleanupCallback=function(e){this.cleanupCallbacks||(this.cleanupCallbacks=[]),this.cleanupCallbacks.push(e)},cc.Base.prototype.runCleanupCallbacks=function(){(this.cleanupCallbacks||[]).forEach(function(e){e()}),this.cleanupCallbacks=[]};var oldAddChild=cc.Base.prototype.addChild;if(cc.Base.prototype.addChild=function(e){oldAddChild.apply(this,arguments),e.alignment&&e.setPositionRound(e.alignment),e.hideHandler&&e.hideHandler.initialize()},cc.Base.prototype.calculatePositionRound=function(e,t){if(Array.isArray(e)&&(e=e[cleverapps.wideMode.mode]),void 0===t&&(t=e.y,e=e.x),"object"==typeof e||"object"==typeof t){if(!this.parent)return cc.p(e,t);var s=this.parent.getContentSize();"object"==typeof e&&(e=this.calculateCoordinate(e,"x",s.width)),"object"==typeof t&&(
t=this.calculateCoordinate(t,"y",s.height))}return cc.p(Math.floor(e),Math.floor(t))},cc.Base.prototype.setPositionRound=function(e,t){var s=this.calculatePositionRound(e,t);"object"!=typeof s.x&&"object"!=typeof s.y||this.parent?this.setPosition(s.x,s.y):this.alignment=s},cc.Base.prototype.calculateCoordinate=function(t,e,s){if(t.random){var n=void 0!==t.random.start?t.random.start:0,i=void 0!==t.random.end?t.random.end:s;return Math.round(Math.random()*(i-n)+n)}var o="x"===e?this.getAnchorPoint().x:this.getAnchorPoint().y,a="x"===e?"dx":"dy",r=0;Object.keys(t).forEach(function(e){0===e.indexOf(a)&&(r+=t[e])});var l="x"===e?this.width*Math.abs(this.scaleX):this.height*Math.abs(this.scaleY);switch(t.align||"center"){case"left":case"bottom":r+=Math.abs(o)<.1?0:Math.abs(o-1)<.1?l:l/2,"center"===t.anchor&&(r-=l/2);break;case"center":r+=s/2+(Math.abs(o)<.1?-l/2:Math.abs(o-1)<.1?l/2:0);break;case"right":case"top":r+=s+(Math.abs(o)<.1?-l:Math.abs(o-1)<.1?0:-l/2),"center"===t.anchor&&(r+=l/2)
}return r},cc.Base.prototype.getRelativeCoordinates=function(e){var t=e.hideHandler&&e.hideHandler.originalPosition||e.originalPosition||e.getPosition();return this.getParent().convertToNodeSpace(e.getParent().convertToWorldSpace(t))},cc.Node.prototype.getScale=function(){if(this._scaleX!==this._scaleY)throw 1;return this._scaleX},cc.Base.prototype.setAnchorPoint2=function(e,t){void 0===e&&(e=.5),void 0===t&&(t=.5),0<this.width&&(e=Math.round(this.width*e)/this.width),0<this.height&&(t=Math.round(this.height*t)/this.height),this.setAnchorPoint(e,t)},cc.Base.prototype.setContentSize2=function(e,t){Array.isArray(e)&&(e=e[cleverapps.wideMode.mode]),void 0===t&&(t=e.height,e=e.width),this.setContentSize(2*Math.round(e/2),2*Math.round(t/2))},cc.Base.prototype.setScale2=function(e){Array.isArray(e)&&(e=e[cleverapps.wideMode.mode]),this.setScale(e)},cc.Base.prototype.isDisplayed=function(){for(var e=this;e;){if(!e.isVisible())return!1;e=e.getParent()}return!0},
cc.Base.prototype.setVisibleAsync=function(e,t){"function"!=typeof(t=t||this).setVisible&&(t=this),this.runAction(new cc.CallFunc(function(){t.setVisible(e)}))},cc.Base.prototype.runAsync=function(e){this.runAction(new cc.CallFunc(e))},cc.Base.prototype.getCenterPos=function(){var e=this.getBoundingBox();return e.x+=e.width/2,e.y+=e.height/2,{x:Math.round(e.x),y:Math.round(e.y)}},cc.Sprite.prototype.setSpriteFrameAsync=function(e){this.runAction(new cc.CallFunc(function(){this.setSpriteFrame(e)}.bind(this)))},cc.pRound=function(e,t){return void 0===t&&(t=e.y,e=e.x),"number"==typeof e&&(e=Math.floor(e)),"number"==typeof t&&(t=Math.floor(t)),cc.p(e,t)},cc.sizeRound=function(e,t){return void 0===t&&(t=e.height,e=e.width),cc.size(e,t)},cc.size2=function(e,t){return void 0===t&&(t=e.height,e=e.width),cc.size(2*Math.round(e/2),2*Math.round(t/2))},cc.Base.prototype.applyStyles=function(e){var t=new cc.Base;return e.size&&t.setContentSize2(e.size),this.setPositionRound(t.width/2,t.height/2),
t.addChild(this),t},cc.Node.superClassCreateFunction=function(t){function e(e){return cleverapps.gameSceneLogs.push("arguments in superClassCreateFunction arg0: "+!!e[0]+" arg1: "+!!e[1]+" argsLength: "+e.length),t.apply(this,e)}return e.prototype=t.prototype,function(){return new e(arguments)}},cleverapps.isPixiJs()||(cc.Base.prototype.getBoundingBox=function(){var e=this.scaleX,t=this.scaleY,s=this.baseScaleX||this.baseScale||e,n=this.baseScaleY||this.baseScale||t,i=e!==s||t!==n;i&&this.setScale(s,n);var o=cc.rect(0,0,this._contentSize.width,this._contentSize.height),a=cc._rectApplyAffineTransformIn(o,this.getNodeToParentTransform());return i&&this.setScale(e,t),a}),cc.Base.prototype.getGlobalBoundingBox=function(e,t){e||(e=this.getBoundingBox(),this.originalPosition&&(e.x+=this.originalPosition.x-this.x,e.y+=this.originalPosition.y-this.y)),t=t||this.getParent();var s=cc.director.getRunningScene().scene.convertToNodeSpace(t.convertToWorldSpace(cc.p(e.x,e.y)));return e.x=s.x,e.y=s.y,
e},cc.Base.prototype.setOverShadow=function(e){this.overShadow!==e&&(this.overShadow=e,this._renderCmd.setDirtyFlag(cc.Base._dirtyFlags.transformDirty),cc.renderer.childrenOrderDirty=!0,this.overShadow?this.visit=cc.Base.prototype.visitAfterShadow:this.visit=cc.Base.prototype.visit,this.setListenersOverShadow(e))},cc.Base.prototype.setListenersOverShadow=function(e){this.listenersOverShadow!==e&&(this.listenersOverShadow=e,cc.eventManager._setDirty(cc.EventListener.TOUCH_ONE_BY_ONE,cc.eventManager.DIRTY_SCENE_GRAPH_PRIORITY),cc.eventManager._setDirty(cc.EventListener.MOUSE,cc.eventManager.DIRTY_SCENE_GRAPH_PRIORITY),cc.eventManager._setDirty(cc.EventListener.TOUCH_ALL_AT_ONCE,cc.eventManager.DIRTY_SCENE_GRAPH_PRIORITY))},cc.Base.prototype.visitAfterShadow=function(e){var t=cc.director.getRunningScene(),s=this,n=arguments,i=function(){cc.Base.prototype.visit.apply(s,n)};if(t.afterVisitShadowProcessing||!e)i();else{var o=e._renderCmd,a=o._dirtyFlag;t.shadowVisitQueue.push(function(){
var e=o._dirtyFlag;o._dirtyFlag=a,i(),o._dirtyFlag=e})}},cc.Base.prototype.getCropContainer=function(){if(!1===this._cropContainerDirty)return this.cropContainer;for(var e=this;e&&!(e instanceof cleverapps.UI.ScrollView);)e=e.parent;return this._cropContainerDirty=!1,this.cropContainer=e,this.cropContainer},cc.Base.prototype.setCascadeOpacityEnabledRecursively=function(t){this.performRecursive(function(e){e.setCascadeOpacityEnabled(t)})},cc.Base.prototype.setRecCascadeColorEnabled=function(){this.performRecursive(function(e){e.setCascadeColorEnabled(!0)})},cc.Base.prototype.performRecursive=function(e){for(var t=[this];0<t.length;){var s=t.pop();e(s),t=t.concat(s.children)}},cc.Base.prototype.getPreferredBundles=function(){return void 0!==this.preferredBundles?this.preferredBundles:this.bundles?this.preferredBundles=this.bundles.reduce(function(e,t){var s=bundles[t];return e.concat(s.injectTo||[t])},[]):this.parent?this.preferredBundles=this.parent.getPreferredBundles():void 0},
cc.sys.isNative&&config.debugMode&&!cc.sys.isWebView&&(Function.prototype.debugBindSuper=Function.prototype.bind,Function.prototype.bind=function(e){if("object"!=typeof this.prototype)throw console.log("Function.this.prototype - is not an object",JSON.stringify((new Error).stack)),new TypeError("Function.this.prototype - is not an object");return Function.prototype.debugBindSuper.apply(this,arguments)}),config.debugMode)var previewRes=function(s){var e=(s=processVirtualImage(s)||processVirtualJson(s)).split(".").slice(-1)[0],n=function(e){var t=cc.director.getRunningScene();t.addChild(e),e.setPositionRound(t.width/2,t.height/2)};if("json"===e){var t=function(){var e=new cleverapps.Spine(s),t=Object.keys(e.data.animations);e.setAnimation(0,t[0],!0),e.setSkin(cleverapps.Spine.getSkins(s)[0]||"default"),e.debugBorder(),n(e),console.log(t)};cleverapps.Spine.isAnimationLoaded(s)?t():cleverapps.bundleLoader.loadBundle(cleverapps.Spine.listBundles(s),{onSuccess:t})
}else"png"!==e&&"jpg"!==e||n(cleverapps.UI.createScale9Sprite(s))},checkFonts=function(e){var t=[];e=e||{};for(var s=15;s<90;s+=5){var n={name:e.name||"default",size:s,fnt:!0,stroke:e.stroke,shadow:e.shadow},i=cleverapps.UI.generateOnlyText("1235",n),o=cleverapps.UI.generateImageText("1235",n),a=new cleverapps.Layout([i,o],{direction:cleverapps.UI.HORIZONTAL,margin:5});t.unshift(a)}var r=new cleverapps.Layout(t,{direction:cleverapps.UI.VERTICAL,margin:5});cc.director.getRunningScene().addChild(r),r.setPositionRound(cleverapps.UI.getSceneSize().width/2,cleverapps.UI.getSceneSize().height/2)};cc.CallFunc.prototype.initWithFunctionSuper=cc.CallFunc.prototype.initWithFunction,cc.CallFunc.prototype.initWithFunction=function(e,t,s){var n=this.initWithFunctionSuper.apply(this,arguments);return this._function&&!this._function.call&&cleverapps.throwAsync("no call method on CallFunc function"),n},cc.ACTION_TAG_SHOW=10,cc.ACTION_TAG_HIDE=11,cc.ACTION_TAG_PLAYERS_WARNING=13,
cleverapps.Particles=cc.ParticleSystem.extend({ctor:function(e,t){var s=cc.loader.getRes(processVirtualJson(e));s.textureFileName=t,this._super(s)},stop:function(e){e=e||function(){},delete this.target,this.setAutoRemoveOnFinish(!0),this.stopSystem(),this.runAction(new cc.Sequence(new cc.DelayTime(3),new cc.CallFunc(e),new cc.RemoveSelf))},followTarget:function(e){this.setPositionType(cc.ParticleSystem.TYPE_RELATIVE),this.target=e,this.updateRelativePosition(),e.registerCleanupCallback(function(){this.target===e&&this.stop()}.bind(this))},updateRelativePosition:function(){if(this.target&&this.getParent()&&this.target.getParent()){var e=this.getRelativeCoordinates(this.target);this.setPositionRound(e)}},update:function(e){this.updateRelativePosition(),this._super(e)}}),cleverapps.Spine=cc.Node.extend({ctor:function(e,t){this._super(),this.setAnchorPoint2(),e=cleverapps.skins.getSlot("spine",{json:e}),e=processVirtualJson(e);var s=cleverapps.Spine.jsonToBundle[e];if(
!cleverapps.bundleLoader.isLoaded(s)&&"loading_scene"!==s&&e&&s&&cleverapps.throwAsync("Json "+e+" bundle "+s+" not loaded"),void 0===s)throw console.log("json bundles cache",cleverapps.Spine.jsonToBundle),"Can't find bundle for json - "+e+" in bundles cache ";this.setCascadeOpacityEnabled(!0),this.setCascadeColorEnabled(!0),cc.loader.getRes(bundles[s].jsons.atlas)||cleverapps.throwAsync("Atlas "+e+" bundle "+s+" not loaded");var n=e,i=bundles[s].jsons.atlas;t=t||1,cleverapps.Spine.cache[e]&&cleverapps.Spine.cache[e][t]&&(n=cleverapps.Spine.cache[e][t].data,i=cleverapps.Spine.cache[e][t].atlas);var o=this.spine=sp.SkeletonAnimation.createWithJsonFile(n,i,t);for(var a in cleverapps.styles.SpineSkins)if(cleverapps.styles.SpineSkins[a].json===e){o.setSkin(cleverapps.styles.SpineSkins[a].skin);break}o.jsonName=e,cleverapps.Spine.cache[e]||(cleverapps.Spine.cache[e]={}),cleverapps.Spine.cache[e][t]||(cleverapps.Spine.cache[e][t]={data:o._skeletonData,atlas:!0}),this.data=cc.loader.getRes(e)
;var r=this.data.skeleton;this.setContentSize2(r.width*resolutionScale,r.height*resolutionScale),o.setPositionRound(this.width/2,this.height/2),cleverapps.isPixiJs()&&(o.y-=o.height),this.addChild(o),this.runningAnimation=void 0,this.setVisible(!1),this.startVisibleListener=function(){},cleverapps.Spine.debugSlots&&this.setDebugSlots(!0),cleverapps.Spine.debugBones&&this.setDebugBones(!0)},setStartVisibleListener:function(e){this.startVisibleListener=e},setIdle:function(e){this.idle=e,void 0===this.runningAnimation&&this.setAnimation(0,this.idle,!0)},setIdleSet:function(s){var n=0;cleverapps.values(s).forEach(function(e){n+=e});var e=function(){var e=Math.random()*n;for(var t in s)if((e-=s[t])<=0)return t};this.setAnimation(0,e(),!1),this.setCompleteListener(function(){this.setAnimation(0,e(),!1)}.bind(this))},setAnimation:function(e,t,s){this.spine.setAnimation(e,t,s);var n=this.spine.jsonName;if(!this.data.animations[t]){var i=(new Error).stack;setTimeout(function(){
throw"Not found animation "+t+" in json "+n+" .. "+i},0)}this.visible||(this.visible=!0,this.startVisibleListener())},addAnimation:function(e,t,s,n){this.spine.addAnimation(e,t,s,n)},findAnimation:function(e){return this.spine.findAnimation(e)},setTimeScale:function(e){this.spine.setTimeScale(e)},getTimeScale:function(){return this.spine.getTimeScale()},clearTrack:function(e){this.spine.clearTrack(e)},setSkin:function(e){this.spine.setSkin(e)},setStartListener:function(e){this.spine.setStartListener(e)},setCompleteListener:function(e){this.spine.setCompleteListener(e)},setCompleteListenerRemove:function(e){this.setCompleteListener(function(){e&&e(),this.runAction(new cc.RemoveSelf)}.bind(this))},setCompleteListenerOnce:function(e){this.setCompleteListener(function(){e(),this.setCompleteListener(function(){})}.bind(this))},setAnimationAndIdleAfter:function(e,t){this.setAnimation(0,e,!1),this.addAnimation(0,t,!0)},setDebugSlots:function(e){this.spine.setDebugSolots(e)},
setDebugBones:function(e){this.spine.setDebugBones(e)},rotateMesh:function(t){this.setRotation(-t),this.runForAllChildren(function(e){e===this.spine?this.spine._skeleton.getRootBone().rotation=-t:e.setRotation(t)}.bind(this),{depth:1})}}),cleverapps.Spine.updateSkin=function(e,t,s){t=processVirtualJson(t),cleverapps.styles.SpineSkins[e]={json:t,skin:s}},cleverapps.Spine.hasAnimation=function(e,t){var s=cleverapps.Spine.getSkeletonData(t);return s&&s.animations&&void 0!==s.animations[e]},cleverapps.Spine.getSkins=function(e){var t=cleverapps.Spine.getSkeletonData(e);return Object.keys(t.skins).filter(function(e){return"default"!==e})},cleverapps.Spine.getSkeletonData=function(e){return cc.loader.getRes(processVirtualJson(e))},cleverapps.Spine.isAnimationLoaded=function(e){return e=processVirtualJson(e),e=cleverapps.skins.getSlot("spine",{json:e}),cleverapps.bundleLoader.isLoaded(cleverapps.Spine.jsonToBundle[e])},cleverapps.Spine.prepare=function(){var e={};for(var t in bundles){
var s=bundles[t];if(!s.injectTo&&(0!==t.indexOf("episode_")||1!==Object.keys(s.jsons).length||!s.jsons.levels))for(var n in s.jsons){var i=s.jsons[n],o=t;if(0===n.indexOf("island_")&&0===t.indexOf("episode_")&&(o="episodes_resources"),e[i]&&e[i]!==o)throw"Already exist json: "+i;e[i]=o}}cleverapps.Spine.jsonToBundle=e},cleverapps.Spine.listBundles=function(t){Array.isArray(t)||(t=[t]);var s=[];return t.forEach(function(e){t&&cleverapps.Spine.jsonToBundle[e]&&s.push(cleverapps.Spine.jsonToBundle[e])}),cleverapps.unique(s)},cleverapps.Spine.removeSlot=function(e,t){e=processVirtualJson(e),e=cleverapps.skins.getSlot("spine",{json:e}),(e=cc.loader.getRes(e)).slots=e.slots.filter(function(e){return e.name!==t}),cleverapps.values(e.skins).forEach(function(e){delete e[t]}),cleverapps.values(e.animations).forEach(function(e){delete e.slots[t]})},cleverapps.Spine.cache={};var ShadowLayer=cc.LayerColor.extend({ctor:function(){var e=this.baseSize=cc.director.getWinSize();this._super(
cleverapps.styles.COLORS.BLACK,1.05*e.width+5,1.05*e.height+5),this.setAnchorPoint2(0,0),this.setPosition(.025*-e.width-2,.025*-e.height-2),cleverapps.eventBus.on("changeSceneSize",this.onChangeSize.bind(this),this)},onChangeSize:function(){var e=cc.director.getWinSize(),t=Math.max(e.width/this.baseSize.width,this.baseSize.width/e.width),s=Math.max(e.height/this.baseSize.height,this.baseSize.height/e.height);this.setScale(t*s),this.setPositionRound(.025*-e.width-2,.025*-e.height-2)},visit:function(e){if(this._super.apply(this,arguments),this.isVisible()){var t=cc.director.getRunningScene();t&&t.afterVisitShadow&&t.afterVisitShadow()}}});if(cc.eventManager._sortEventListenersOfSceneGraphPriorityDes=function(e,t){var s=cc.eventManager._nodePriorityMap,n=e._getSceneGraphPriority(),i=t._getSceneGraphPriority();if(!(t&&i&&s[i.__instanceId]))return-1;if(!e||!n||!s[n.__instanceId])return 1;var o=s[t._getSceneGraphPriority().__instanceId]-s[e._getSceneGraphPriority().__instanceId]
;return 0===o?e.__instanceId-t.__instanceId:o},cc.eventManager._visitTarget_processRoot=function(){var e=this._globalZOrderNodeMap,t=[];for(var s in e)t.push(s);t.sort(this._sortNumberAsc);var n,o,a=t.length,r=this._nodePriorityMap;for(i=0;i<a;i++)for(n=e[t[i]],o=0;o<n.length;o++)r[n[o]]=++this._nodePriorityIndex;this._globalZOrderNodeMap={}},cc.eventManager._visitTargetSuper=cc.eventManager._visitTarget,cc.eventManager._visitTarget=function(t,e){e&&(this.shadowVisitQueue=[]);var s=function(){this.visitQueueProcessing=!0;var e=this.shadowVisitQueue;this.shadowVisitQueue=[],e.forEach(cleverapps.callFunc),this.visitQueueProcessing=!1}.bind(this);if(!t.overShadow||this.visitQueueProcessing){if(t.listenersOverShadow&&!this.visitQueueProcessing){var n=this._globalZOrderNodeMap;this.shadowVisitQueue.push(function(){var e=n[t.getGlobalZOrder()].indexOf(t.__instanceId);-1!==e&&n[t.getGlobalZOrder()].splice(e,1),n[t.getGlobalZOrder()].push(t.__instanceId)})}
cc.eventManager._visitTargetSuper.apply(this,arguments),t instanceof ShadowLayer&&t.visible&&s(),e&&0<this.shadowVisitQueue.length&&(s(),this._visitTarget_processRoot())}else{var i=this,o=arguments;this.shadowVisitQueue.push(function(){cc.eventManager._visitTargetSuper.apply(i,o)})}},cc.game.pause=cleverapps.extendFunc(cc.game.pause,function(){this.isPaused()||(this._super.apply(this,arguments),cleverapps.eventBus.trigger("gamePause"))}),cc.game.resume=cleverapps.extendFunc(cc.game.resume,function(){this.isPaused()&&(this._super.apply(this,arguments),cleverapps.eventBus.trigger("gameResume"))}),cc.game.resumeNative=function(){this.config?this.isPaused()&&this.resume():setTimeout(this.resumeNative.bind(this),1e3)},function(){var e=function(){cleverapps.newSceneStack=cleverapps.newSceneStack||(new Error).stack,this._super.apply(this,arguments)};cc.Director.prototype.runScene=cleverapps.extendFunc(cc.Director.prototype.runScene,e),
cc.Director.prototype.popToSceneStackLevel=cleverapps.extendFunc(cc.Director.prototype.popToSceneStackLevel,e),cc.Director.prototype.pushScene=cleverapps.extendFunc(cc.Director.prototype.pushScene,e),cc.Director.prototype.popScene=cleverapps.extendFunc(cc.Director.prototype.popScene,e)}(),cc.getCenter=function(e){if(e&&0!==e.length){var t=0,s=0;return e.forEach(function(e){t+=e.x,s+=e.y}),cc.p(t/e.length,s/e.length)}},cc.getCenterPoint=function(e){if(e&&0!==e.length){var t=0,s=0;e.forEach(function(e){t+=e.x,s+=e.y});var n=cc.p(t/e.length,s/e.length),i=e[0],o=cc.pDistance(i,n);return e.forEach(function(e){var t=cc.pDistance(e,n);t<o&&(i=e,o=t)}),i}},cc.getDistanceChebyshev=function(e,t){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))},cc.rectScale=function(e,t){return cc.rect(e.x+e.width/2*(1-t),e.y+e.height/2*(1-t),e.width*t,e.height*t)},!cleverapps.isPixiJs()){cc.KEYBOARD_RETURNTYPE_DEFAULT=0,cc.KEYBOARD_RETURNTYPE_DONE=1,cc.KEYBOARD_RETURNTYPE_SEND=2,
cc.KEYBOARD_RETURNTYPE_SEARCH=3,cc.KEYBOARD_RETURNTYPE_GO=4,cc.EDITBOX_INPUT_MODE_ANY=0,cc.EDITBOX_INPUT_MODE_EMAILADDR=1,cc.EDITBOX_INPUT_MODE_NUMERIC=2,cc.EDITBOX_INPUT_MODE_PHONENUMBER=3,cc.EDITBOX_INPUT_MODE_URL=4,cc.EDITBOX_INPUT_MODE_DECIMAL=5,cc.EDITBOX_INPUT_MODE_SINGLELINE=6,cc.EDITBOX_INPUT_FLAG_PASSWORD=0,cc.EDITBOX_INPUT_FLAG_SENSITIVE=1,cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD=2,cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE=3,cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS=4,cc.EditBoxDelegate=cc.Class.extend({editBoxEditingDidBegin:function(e){},editBoxEditingDidEnd:function(e){},editBoxTextChanged:function(e,t){},editBoxReturn:function(e){}}),cc.EditBox=cc.Node.extend({_backgroundSprite:null,_delegate:null,_editBoxInputMode:cc.EDITBOX_INPUT_MODE_ANY,_editBoxInputFlag:cc.EDITBOX_INPUT_FLAG_SENSITIVE,_keyboardReturnType:cc.KEYBOARD_RETURNTYPE_DEFAULT,_maxLength:50,_text:"",_textColor:null,_placeholderText:"",_placeholderFontName:"",_placeholderFontSize:14,
_placeholderColor:null,_className:"EditBox",_touchListener:null,_touchEnabled:!0,ctor:function(e,t){cc.Node.prototype.ctor.call(this),this._anchorPoint=cc.p(.5,.5),this._textColor=cc.color.WHITE,this._placeholderColor=cc.color.GRAY,this._renderCmd._createLabels(),this.createDomElementIfNeeded(),this.initWithSizeAndBackgroundSprite(e,t),this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this._onTouchBegan.bind(this),onTouchEnded:this._onTouchEnded.bind(this)}),cc.eventManager.addListener(this._touchListener,this),this.setInputFlag(this._editBoxInputFlag)},setTouchEnabled:function(e){this._touchEnabled!==e&&(this._touchEnabled=e,this._touchEnabled?cc.eventManager.addListener(this._touchListener,this):cc.eventManager.removeListener(this._touchListener))},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.EditBox.CanvasRenderCmd(this):new cc.EditBox.WebGLRenderCmd(this)},
setContentSize:function(e,t){void 0!==e.width&&void 0!==e.height&&(t=e.height,e=e.width),cc.Node.prototype.setContentSize.call(this,e,t),this._updateEditBoxSize(e,t)},setVisible:function(e){cc.Node.prototype.setVisible.call(this,e),this._renderCmd.updateVisibility()},createDomElementIfNeeded:function(){this._renderCmd._edTxt||this._renderCmd._createDomTextArea()},setTabIndex:function(e){this._renderCmd._edTxt&&(this._renderCmd._edTxt.tabIndex=e)},getTabIndex:function(){return this._renderCmd._edTxt?this._renderCmd._edTxt.tabIndex:(cc.warn("The dom control is not created!"),-1)},setFocus:function(){this._renderCmd._edTxt&&this._renderCmd._edTxt.focus()},isFocused:function(){return this._renderCmd._edTxt?document.activeElement===this._renderCmd._edTxt:(cc.warn("The dom control is not created!"),!1)},stayOnTop:function(e){this._alwaysOnTop!==e&&(this._alwaysOnTop=e,this._renderCmd.stayOnTop(this._alwaysOnTop))},cleanup:function(){this._super(),this._renderCmd._removeDomFromGameContainer()
},_isAncestorsVisible:function(e){if(null==e)return!0;var t=e.getParent();return!(t&&!t.isVisible())&&this._isAncestorsVisible(t)},_onTouchBegan:function(e){if(this.isVisible()&&this._isAncestorsVisible(this)){var t=e.getLocation(),s=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return!!cc.rectContainsPoint(s,this.convertToNodeSpace(t))||(this._renderCmd._endEditing(),!1)}},_onTouchEnded:function(){this.isVisible()&&this._isAncestorsVisible(this)&&this._renderCmd._beginEditing()},_updateBackgroundSpriteSize:function(e,t){this._backgroundSprite&&this._backgroundSprite.setContentSize(e,t)},_updateEditBoxSize:function(e,t){var s="number"==typeof e.width?e.width:e,n="number"==typeof e.height?e.height:t;this._updateBackgroundSpriteSize(s,n),this._renderCmd.updateSize(s,n)},setLineHeight:function(e){this._renderCmd.setLineHeight(e)},setFont:function(e,t){this._renderCmd.setFont(e,t)},_setFont:function(e){this._renderCmd._setFont(e)},getBackgroundSprite:function(){
return this._backgroundSprite},setFontName:function(e){this._renderCmd.setFontName(e)},setFontSize:function(e){this._renderCmd.setFontSize(e)},setString:function(e){e.length>=this._maxLength&&(e=e.slice(0,this._maxLength)),this._text=e,this._renderCmd.setString(e)},setFontColor:function(e){this._textColor=e,this._renderCmd.setFontColor(e)},setMaxLength:function(e){isNaN(e)||(e<0&&(e=65535),this._maxLength=e,this._renderCmd.setMaxLength(e))},getMaxLength:function(){return this._maxLength},setPlaceHolder:function(e){null!==e&&(this._renderCmd.setPlaceHolder(e),this._placeholderText=e)},setPlaceholderFont:function(e,t){this._placeholderFontName=e,this._placeholderFontSize=t,this._renderCmd._updateDOMPlaceholderFontStyle()},_setPlaceholderFont:function(e){var t=cc.LabelTTF._fontStyleRE.exec(e);t&&(this._placeholderFontName=t[2],this._placeholderFontSize=parseInt(t[1]),this._renderCmd._updateDOMPlaceholderFontStyle())},setPlaceholderFontName:function(e){this._placeholderFontName=e,
this._renderCmd._updateDOMPlaceholderFontStyle()},setPlaceholderFontSize:function(e){this._placeholderFontSize=e,this._renderCmd._updateDOMPlaceholderFontStyle()},setPlaceholderFontColor:function(e){this._placeholderColor=e,this._renderCmd.setPlaceholderFontColor(e)},setInputFlag:function(e){this._editBoxInputFlag=e,this._renderCmd.setInputFlag(e)},getString:function(){return this._text},initWithSizeAndBackgroundSprite:function(e,t){return this._backgroundSprite&&this._backgroundSprite.removeFromParent(),this._backgroundSprite=t,this.setContentSize(e),this._backgroundSprite&&!this._backgroundSprite.parent&&(this._backgroundSprite.setAnchorPoint(cc.p(0,0)),this.addChild(this._backgroundSprite),this._updateBackgroundSpriteSize(e.width,e.height)),this.x=0,!(this.y=0)},setDelegate:function(e){this._delegate=e},getPlaceHolder:function(){return this._placeholderText},setInputMode:function(e){if(this._editBoxInputMode!==e){var t=this.getString();this._editBoxInputMode=e,
this._renderCmd.setInputMode(e),this._renderCmd.transform(),this.setString(t),this._renderCmd._updateLabelPosition(this.getContentSize())}},setReturnType:function(e){this._keyboardReturnType=e,this._renderCmd._updateDomInputType()},initWithBackgroundColor:function(e,t){this._edWidth=e.width,this.dom.style.width=this._edWidth.toString()+"px",this._edHeight=e.height,this.dom.style.height=this._edHeight.toString()+"px",this.dom.style.backgroundColor=cc.colorToHex(t)}});var _p=cc.EditBox.prototype;_p.font,cc.defineGetterSetter(_p,"font",null,_p._setFont),_p.fontName,cc.defineGetterSetter(_p,"fontName",null,_p.setFontName),_p.fontSize,cc.defineGetterSetter(_p,"fontSize",null,_p.setFontSize),_p.fontColor,cc.defineGetterSetter(_p,"fontColor",null,_p.setFontColor),_p.string,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p.maxLength,cc.defineGetterSetter(_p,"maxLength",_p.getMaxLength,_p.setMaxLength),_p.placeHolder,cc.defineGetterSetter(_p,"placeholder",_p.getPlaceHolder,
_p.setPlaceHolder),_p.placeHolderFont,cc.defineGetterSetter(_p,"placeholderFont",null,_p._setPlaceholderFont),_p.placeHolderFontName,cc.defineGetterSetter(_p,"placeholderFontName",null,_p.setPlaceholderFontName),_p.placeHolderFontSize,cc.defineGetterSetter(_p,"placeholderFontSize",null,_p.setPlaceholderFontSize),_p.placeHolderFontColor,cc.defineGetterSetter(_p,"placeholderFontColor",null,_p.setPlaceholderFontColor),_p.inputFlag,cc.defineGetterSetter(_p,"inputFlag",null,_p.setInputFlag),_p.delegate,cc.defineGetterSetter(_p,"delegate",null,_p.setDelegate),_p.inputMode,cc.defineGetterSetter(_p,"inputMode",null,_p.setInputMode),_p.returnType,cc.defineGetterSetter(_p,"returnType",null,_p.setReturnType),_p=null,cc.EditBox.create=function(e,t,s,n){return new cc.EditBox(e,t,s,n)},function(e){e._polyfill={zoomInvalid:!1},cc.sys.OS_ANDROID!==cc.sys.os||cc.sys.browserType!==cc.sys.BROWSER_TYPE_SOUGOU&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_360||(e._polyfill.zoomInvalid=!0)}(cc.EditBox),
function(v){function s(e){var t=e.convertToWorldSpace(cc.p(0,0)),s=cc.visibleRect.height,n=cc.visibleRect.width,i=.5;s<n&&(i=.7),setTimeout(function(){if(window.scrollY<40&&t.y<s*i){var e=s*i-t.y-window.scrollY;e<35&&(e=35),320<e&&(e=320),window.scrollTo(e,e)}},400)}var e=function(){}.prototype=Object.create(Object.prototype);e.updateMatrix=function(){if(this._edTxt){var e=this._node,t=cc.view._scaleX,s=cc.view._scaleY,n=cc.view._devicePixelRatio,i=this._worldTransform;t/=n,s/=n;var o=cc.game.container,a=i.a*t,r=i.b,l=i.c,c=i.d*s,p=o&&o.style.paddingLeft&&parseInt(o.style.paddingLeft),d=o&&o.style.paddingBottom&&parseInt(o.style.paddingBottom),u=i.tx*t+p,h=i.ty*s+d;v.zoomInvalid&&(this.updateSize(e._contentSize.width*a,e._contentSize.height*c),c=a=1);var g="matrix("+a+","+-r+","+-l+","+c+","+u+","+-h+")";this._edTxt.style.transform=g,this._edTxt.style["-webkit-transform"]=g,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"
}},e.updateVisibility=function(){this._edTxt&&(this._node.visible?this._edTxt.style.visibility="visible":this._edTxt.style.visibility="hidden")},e.stayOnTop=function(e){e?(this._removeLabels(),this._edTxt.style.display=""):(this._createLabels(),this._edTxt.style.display="none",this._showLabels())},e._beginEditingOnMobile=function(e){this.__orientationChanged=function(){s(e)},window.addEventListener("orientationchange",this.__orientationChanged),cc.view.isAutoFullScreenEnabled()?(this.__fullscreen=!0,cc.view.enableAutoFullScreen(!1),cc.screen.exitFullScreen()):this.__fullscreen=!1,this.__autoResize=cc.view.__resizeWithBrowserSize,cc.view.resizeWithBrowserSize(!1)},e._endEditingOnMobile=function(){if(this.__rotateScreen){var e=cc.game.container.style;e["-webkit-transform"]="rotate(90deg)",e.transform="rotate(90deg)";var t=cc.view,s=t._originalDesignResolutionSize.width,n=t._originalDesignResolutionSize.height;0<s&&t.setDesignResolutionSize(s,n,t._resolutionPolicy),this.__rotateScreen=!1}
window.removeEventListener("orientationchange",this.__orientationChanged),window.scrollTo(0,0),this.__fullscreen&&cc.view.enableAutoFullScreen(!0),this.__autoResize&&cc.view.resizeWithBrowserSize(!0)},e._onFocusOnMobile=function(e){if(cc.view._isRotated){var t=cc.game.container.style;t["-webkit-transform"]="rotate(0deg)",t.transform="rotate(0deg)",t.margin="0px",window.scrollTo(35,35),this.__rotateScreen=!0}else this.__rotateScreen=!1;s(e)},e._createDomInput=function(){this._removeDomFromGameContainer();var s=this,e=this._edTxt=document.createElement("input");return e.type="text",e.style.fontFamily=this._edFontName,e.style.fontSize=this._edFontSize+"px",e.style.color="#000000",e.style.border=0,e.style.background="transparent",e.style.width="100%",e.style.height="100%",e.style.active=0,e.style.outline="medium",e.style.padding="0",e.style.textTransform="uppercase",e.style.display="none",e.style.position="absolute",e.style.bottom="0px",e.style.left="2px",e.style.className="cocosEditBox",
this.setMaxLength(s._editBox._maxLength),e.addEventListener("input",function(){var e=s._editBox;this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength)),e._delegate&&e._delegate.editBoxTextChanged&&e._text!==this.value&&(e._text=this.value,s._updateDomTextCases(),e._delegate.editBoxTextChanged(e,e._text))}),e.addEventListener("keypress",function(e){var t=s._editBox;e.keyCode===cc.KEY.enter&&(e.stopPropagation(),e.preventDefault(),""===this.value&&(this.style.fontSize=t._placeholderFontSize+"px",this.style.color=cc.colorToHex(t._placeholderColor)),t._text=this.value,s._updateDomTextCases(),s._endEditing(),t._delegate&&t._delegate.editBoxReturn&&t._delegate.editBoxReturn(t),cc._canvas.focus())}),e.addEventListener("focus",function(){var e=s._editBox;this.style.fontSize=s._edFontSize+"px",this.style.color=cc.colorToHex(e._textColor),s._hiddenLabels(),cc.sys.isMobile&&s._onFocusOnMobile(e),
e._delegate&&e._delegate.editBoxEditingDidBegin&&e._delegate.editBoxEditingDidBegin(e)}),e.addEventListener("blur",function(){var e=s._editBox;e._text=this.value,s._updateDomTextCases(),e._delegate&&e._delegate.editBoxEditingDidEnd&&e._delegate.editBoxEditingDidEnd(e),""===this.value&&(this.style.fontSize=e._placeholderFontSize+"px",this.style.color=cc.colorToHex(e._placeholderColor)),s._endEditing()}),this._addDomToGameContainer(),e},e._createDomTextArea=function(){this._removeDomFromGameContainer();var s=this,e=this._edTxt=document.createElement("textarea");return e.type="text",e.style.fontFamily=this._edFontName,e.style.fontSize=this._edFontSize+"px",e.style.color="#000000",e.style.border=0,e.style.background="transparent",e.style.width="100%",e.style.height="100%",e.style.active=0,e.style.outline="medium",e.style.padding="0",e.style.resize="none",e.style.textTransform="uppercase",e.style.overflow_y="scroll",e.style.display="none",e.style.position="absolute",e.style.bottom="0px",
e.style.left="2px",e.style.className="cocosEditBox",this.setMaxLength(s._editBox._maxLength),e.addEventListener("input",function(){this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength));var e=s._editBox;e._delegate&&e._delegate.editBoxTextChanged&&e._text.toLowerCase()!==this.value.toLowerCase()&&(e._text=this.value,s._updateDomTextCases(),e._delegate.editBoxTextChanged(e,e._text))}),e.addEventListener("focus",function(){var e=s._editBox;s._hiddenLabels(),this.style.fontSize=s._edFontSize+"px",this.style.color=cc.colorToHex(e._textColor),cc.sys.isMobile&&s._onFocusOnMobile(e),e._delegate&&e._delegate.editBoxEditingDidBegin&&e._delegate.editBoxEditingDidBegin(e)}),e.addEventListener("keypress",function(e){var t=s._editBox;e.keyCode===cc.KEY.enter&&(e.stopPropagation(),t._delegate&&t._delegate.editBoxReturn&&t._delegate.editBoxReturn(t))}),e.addEventListener("blur",function(){var e=s._editBox;e._text=this.value,s._updateDomTextCases(),
e._delegate&&e._delegate.editBoxEditingDidEnd&&e._delegate.editBoxEditingDidEnd(e),""===this.value&&(this.style.fontSize=e._placeholderFontSize+"px",this.style.color=cc.colorToHex(e._placeholderColor)),s._endEditing()}),this._addDomToGameContainer(),e},e._createLabels=function(){var e=this._editBox.getContentSize();this._textLabel||(this._textLabel=new cc.LabelTTF,this._textLabel.setAnchorPoint(cc.p(0,1)),this._editBox.addChild(this._textLabel,100)),this._placeholderLabel||(this._placeholderLabel=new cc.LabelTTF,this._placeholderLabel.setAnchorPoint(cc.p(0,1)),this._placeholderLabel.setColor(cc.color.GRAY),this._editBox.addChild(this._placeholderLabel,100)),this._updateLabelPosition(e)},e._removeLabels=function(){this._textLabel&&(this._editBox.removeChild(this._textLabel),this._textLabel=null)},e._updateLabelPosition=function(e){if(this._textLabel&&this._placeholderLabel){var t=cc.size(e.width-2,e.height);this._textLabel.setContentSize(t),this._textLabel.setDimensions(t),
this._placeholderLabel.setLineHeight(e.height);var s=this._placeholderLabel.getContentSize();this._editBox._editBoxInputMode===cc.EDITBOX_INPUT_MODE_ANY?(this._textLabel.setPosition(2,e.height),this._placeholderLabel.setPosition(2,e.height),this._placeholderLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP),this._textLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP)):(this._textLabel.setPosition(2,e.height),this._placeholderLabel.setPosition(2,(e.height+s.height)/2),this._placeholderLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this._textLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER))}},e.setLineHeight=function(e){this._textLabel&&this._textLabel.setLineHeight(e)},e._hiddenLabels=function(){this._textLabel&&this._textLabel.setVisible(!1),this._placeholderLabel&&this._placeholderLabel.setVisible(!1)},e._updateDomTextCases=function(){var e,t=this._editBox._editBoxInputFlag
;t===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS?this._editBox._text=this._editBox._text.toUpperCase():t===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD?this._editBox._text=this._editBox._text.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()}):t===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE&&(this._editBox._text=(e=this._editBox._text).charAt(0).toUpperCase()+e.slice(1))},e._updateLabelStringStyle=function(){if("password"===this._edTxt.type){for(var e="",t=this._editBox._text.length,s=0;s<t;++s)e+="●";this._textLabel&&this._textLabel.setString(e)}else this._updateDomTextCases(),this._textLabel&&this._textLabel.setString(this._editBox._text)},e._showLabels=function(){this._hiddenLabels(),""===this._edTxt.value?this._placeholderLabel&&(this._placeholderLabel.setVisible(!0),this._placeholderLabel.setString(this._editBox._placeholderText)):this._textLabel&&(this._textLabel.setVisible(!0),this._textLabel.setString(this._editBox._text)),this._updateLabelStringStyle()},
e._beginEditing=function(){this._editBox._alwaysOnTop||"none"===this._edTxt.style.display&&(this._edTxt.style.display="",this._edTxt.focus()),cc.sys.isMobile&&!this._editingMode&&this._beginEditingOnMobile(this._editBox),this._editingMode=!0},e._endEditing=function(){if(this._editBox._alwaysOnTop||(this._edTxt.style.display="none"),this._showLabels(),cc.sys.isMobile&&this._editingMode){var e=this;setTimeout(function(){e._endEditingOnMobile()},400)}this._editingMode=!1},e._setFont=function(e){var t=cc.LabelTTF._fontStyleRE.exec(e),s=t[2],n=parseInt(t[1]);t&&this.setFont(s,n)},e.setFont=function(e,t){this._edFontName=e||this._edFontName,this._edFontSize=t||this._edFontSize,this._updateDOMFontStyle()},e.setFontName=function(e){this._edFontName=e||this._edFontName,this._updateDOMFontStyle()},e.setFontSize=function(e){this._edFontSize=e||this._edFontSize,this._updateDOMFontStyle()},e.setFontColor=function(e){this._edTxt&&(this._edTxt.value!==this._editBox._placeholderText&&(
this._edTxt.style.color=cc.colorToHex(e)),this._textLabel&&this._textLabel.setColor(e))},e.setPlaceHolder=function(e){this._placeholderLabel.setString(e)},e.setMaxLength=function(e){this._edTxt&&(this._edTxt.maxLength=e)},e._updateDOMPlaceholderFontStyle=function(){this._placeholderLabel.setFontName(this._editBox._placeholderFontName),this._placeholderLabel.setFontSize(this._editBox._placeholderFontSize)},e.setPlaceholderFontColor=function(e){this._placeholderLabel.setColor(e)},e._updateDomInputType=function(){var e=this._editBox._editBoxInputMode;e===cc.EDITBOX_INPUT_MODE_EMAILADDR?this._edTxt.type="email":e===cc.EDITBOX_INPUT_MODE_DECIMAL||e===cc.EDITBOX_INPUT_MODE_NUMERIC?this._edTxt.type="number":e===cc.EDITBOX_INPUT_MODE_PHONENUMBER?(this._edTxt.type="number",this._edTxt.pattern="[0-9]*"):e===cc.EDITBOX_INPUT_MODE_URL?this._edTxt.type="url":(this._edTxt.type="text",this._editBox._keyboardReturnType===cc.KEYBOARD_RETURNTYPE_SEARCH&&(this._edTxt.type="search")),
this._editBox._editBoxInputFlag===cc.EDITBOX_INPUT_FLAG_PASSWORD&&(this._edTxt.type="password")},e.setInputFlag=function(e){this._edTxt&&(this._updateDomInputType(),this._edTxt.style.textTransform="none",e===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS?this._edTxt.style.textTransform="uppercase":e===cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD&&(this._edTxt.style.textTransform="capitalize"),this._updateLabelStringStyle())},e.setInputMode=function(e){e===cc.EDITBOX_INPUT_MODE_ANY?this._createDomTextArea():this._createDomInput(),this._updateDomInputType();var t=this._node.getContentSize();this.updateSize(t.width,t.height)},e.setString=function(e){this._edTxt&&null!==e&&(""===(this._edTxt.value=e)?(this._placeholderLabel&&(this._placeholderLabel.setString(this._editBox._placeholderText),this._placeholderLabel.setColor(this._editBox._placeholderColor)),this._editingMode||(this._placeholderLabel&&this._placeholderLabel.setVisible(!0),this._textLabel&&this._textLabel.setVisible(!1))):(
this._edTxt.style.color=cc.colorToHex(this._editBox._textColor),this._textLabel&&this._textLabel.setColor(this._editBox._textColor),this._editingMode||(this._placeholderLabel&&this._placeholderLabel.setVisible(!1),this._textLabel&&this._textLabel.setVisible(!0)),this._updateLabelStringStyle()))},e._updateDOMFontStyle=function(){this._edTxt&&(""!==this._edTxt.value&&(this._edTxt.style.fontFamily=this._edFontName,this._edTxt.style.fontSize=this._edFontSize+"px"),this._textLabel&&(this._textLabel.setFontSize(this._edFontSize),this._textLabel.setFontName(this._edFontName)))},e.updateSize=function(e,t){var s=this._edTxt;s&&(s.style.width=e+"px",s.style.height=t+"px",this._updateLabelPosition(cc.size(e,t)))},e._addDomToGameContainer=function(){cc.game.container.appendChild(this._edTxt)},e._removeDomFromGameContainer=function(){var e=this._edTxt;if(e){("contains"in cc.game.container?cc.game.container.contains(e):cc.game.container.compareDocumentPosition(e)%16)&&cc.game.container.removeChild(e
)}this._edTxt=null},e.initializeRenderCmd=function(e){this._editBox=e,this._edFontSize=14,this._edFontName="Arial",this._textLabel=null,this._placeholderLabel=null,this._editingMode=!1,this.__fullscreen=!1,this.__autoResize=!1,this.__rotateScreen=!1,this.__orientationChanged=null},cc.EditBox.CanvasRenderCmd=function(e){this._rootCtor(e),this.initializeRenderCmd(e)};var t=cc.EditBox.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);cc.inject(e,t),t.constructor=cc.EditBox.CanvasRenderCmd,t.transform=function(e,t){this.originTransform(e,t),this.updateMatrix()},cc.EditBox.WebGLRenderCmd=function(e){this._rootCtor(e),this.initializeRenderCmd(e)};var n=cc.EditBox.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);cc.inject(e,n),n.constructor=cc.EditBox.WebGLRenderCmd,n.transform=function(e,t){this.originTransform(e,t),this.updateMatrix()}}(cc.EditBox._polyfill)}cleverapps.Plot={decideNext:function(e){if(e.isRegular()&&!e.isCurrentLevel(
)&&cleverapps.metha.getType()===Metha.HOSE&&"board"!==cleverapps.config.type&&cleverapps.config.results)return Boatswain.REPLAY_INTENT;var t=e.isRegular();if((cleverapps.metha.getType()===Metha.KNOCKOUT||cleverapps.forces.checkMainForces())&&(t=!1),t)switch(cleverapps.metha.getType()){case Metha.FARM:cleverapps.farm.isCompleted()||cleverapps.metha.withSimpleMain()||(cleverapps.farm.getBuilding().getQuest().isCompleted()&&(t=!1),cleverapps.farm.justCollectedDialogue&&(t=!1));break;case Metha.HOMEFIX:if(!cleverapps.home.isCompleted()&&!cleverapps.metha.withSimpleMain()){var s=cleverapps.home.getFurnitureToUpgrade();if(s){var n=s.getInfo().cost;cleverapps.home.stars>=n&&cleverapps.home.stars-cleverapps.home.amountLevelStars(e)<n&&(t=!1)}}break;case Metha.SIMPLE:t=0===cleverapps.user.episode&&cleverapps.user.level<3;break;case Metha.HOSE:if(e.isCurrentLevel()&&!e.isLastLevelOnEpisode()||(t=!1),t){var i=cleverapps.Plot.getDialogueAfterLevel(e),o=e.episode.levels[e.levelNo+1];(i||o.isHard()
)&&(t=!1)}}return t&&cleverapps.missionManager.skipNext()&&(t=!1),t?Boatswain.NEXT_INTENT:Boatswain.EXIT_INTENT},GameLeave:function(e,t){var s=t.level,n=this.isEpisodeFinished(s)&&cleverapps.metha.getType()===Metha.HOSE&&!cleverapps.Plot.isPassedAllEpisodes,i=[];if(this.isEpisodeFinished(s)&&!cleverapps.Plot.isPassedAllEpisodes){var o=levels.user.episode-1,a=cleverapps.styles.comicses["finishEpisode"+o]||cleverapps.styles.comicses.finishEpisode;a&&i.push(function(e){ComicsScene.showComics(e,a)})}var r,l=function(e){var t=cleverapps.missionManager.getMissionWithIntent();!n&&t&&t.logic.willUseIntent(s)?t.useMissionIntent(e):(cleverapps.rewardedAdsManager&&!cleverapps.isLocalhost()&&cleverapps.rewardedAdsManager.showInterstitial(),cleverapps.metha.gotoMainScene(e))};cleverapps.isKnockoutGame()&&s.isRegular()?((r=cleverapps.metha.getMainObject().knockoutGame.rumble).moveNextRound(),r.outcome===Rumble.OUTCOME_UNKNOWN?i.push(function(e){cleverapps.metha.getMainObject().wantsToPlay(e)}):(
r.outcome===Rumble.OUTCOME_WIN&&(i.push(function(e){cleverapps.metha.getMainObject().knockoutGame.openWindow(e)}),i.push(function(e){new KnockoutVictoryWindow,cleverapps.metha.onceNoWindowsListener=e})),i.push(l))):i.push(l);cleverapps.metha.getType()===Metha.KNOCKOUT&&s.isRegular()&&((r=cleverapps.knockout.knockoutGame.rumble)&&r.outcome===Rumble.OUTCOME_WIN&&(cleverapps.knockout.gotoNextCupAnimation=!0,i.push(function(e){cleverapps.knockout.gotoNextCup(e)}),i.push(function(e){cleverapps.knockout.gotoNextCupAnimation=!1,e()})));if(n){levels.episodes.changeEpisodeAnimation=!0;var c=levels.user.episode-1,p=c+1;i.push(function(e){cleverapps.metha.compound(e,[function(e){cleverapps.Plot.onFinishEpisode(e,{episode:levels.episodes.episodes[c]})},function(e){levels.episodes.changeEpisodeAnimation=!1,levels.episodes.gotoNextEpisode(e,!0,p)},function(e){cleverapps.Plot.onStartEpisode(e,{episode:levels.episodes.episodes[p]})}])})}s.isRegular()&&s.isPassed&&s.isCurrentLevel(
)&&cleverapps.Plot.getDialogueAfterLevel(s)&&i.push(function(e){cleverapps.Plot.finishLevelDialogue(e,s)}),cleverapps.metha.compound(e,i)},onFinishEpisode:function(e,t){cleverapps.metha.showControlsWhileFocused("mainTableView"),cleverapps.metha.compound(e,[function(e){new FinishEpisodeWindow(t),cleverapps.metha.onceNoWindowsListener=e},function(e){t.episode.animatePass(e)}])},onStartup:function(e,t){return 0===levels.user.episode&&0===levels.user.level?this.onFirstInit(e,t):t?cleverapps.metha.getMainScene():void cleverapps.metha.gotoMainScene(e)},onFirstInit:function(e,t){var s=[];if(cleverapps.styles.comicses&&cleverapps.styles.comicses.begin&&"playable"!==cleverapps.config.source){if(t)return{scene:ComicsScene,options:[cleverapps.styles.comicses.begin]};s.push(function(e){ComicsScene.showComics(e,cleverapps.styles.comicses.begin)})}else if(this.hasStartEpisodeWindow())return t?cleverapps.metha.getMainScene():(s.push(function(e){cleverapps.metha.gotoMainScene(e)}),s.push(function(e){
this.onStartEpisode(e,{episode:levels.episodes.getCurrentEpisode()})}.bind(this)),void cleverapps.metha.compound(e,s));if(cleverapps.metha.getType()!==Metha.HOSE&&cleverapps.metha.getType()!==Metha.SIMPLE&&!cleverapps.metha.withSimpleMain()||"playable"===cleverapps.config.source){if(t)return cleverapps.metha.getMainScene();s.push(function(e){cleverapps.metha.gotoMainScene(e)})}else{if(t)return GameScene;s.push(function(e){cleverapps.metha.wantsToPlay(e)})}cleverapps.metha.compound(e,s)},hasStartEpisodeWindow:function(){return cleverapps.metha.getType()===Metha.HOSE&&"riddles"===cleverapps.config.name&&"playable"!==cleverapps.config.source},onStartEpisode:function(e,t){if(t.episode.isComingSoon())new FinisherWindow,cleverapps.metha.onceNoWindowsListener=e;else{var s=[];s.push(function(e){t.episode.animateOpen(e)}),this.hasStartEpisodeWindow()&&s.push(function(e){new StartEpisodeWindow(t.episode),cleverapps.metha.onceNoWindowsListener=e}),cleverapps.metha.compound(e,s)}},
onFirstHeroesOpen:function(e,t){var s=[function(e){new HeroWindow({color:t.color},{type:"unlocked"}),cleverapps.metha.onceNoWindowsListener=e}];if(cleverapps.styles.comicses){var n=ColorCell.CODE_COLORS[t.color];cleverapps.styles.comicses[n]&&s.push(function(e){ComicsScene.showComics(e,cleverapps.styles.comicses[n])})}cleverapps.metha.compound(e,s)},isEpisodeFinished:function(e){return e.isRegular()&&e.isPassed&&e.isLastLevelOnEpisode()&&e.isCurrentLevel()},getDialogueAfterLevel:function(e){if(!cleverapps.styles.dialogues||!e.isRegular())return!1;var t=cleverapps.user.getHumanReadableNumber()-1;return cleverapps.styles.dialogues["finishLevel"+t]},finishLevelDialogue:function(e,t){var s=this.getDialogueAfterLevel(t);if(s){var n=cc.director.getRunningScene();cleverapps.metha.compound(e,[function(e){s.bundles?cleverapps.bundleLoader.loadBundles(s.bundles,{onSuccess:function(){e()},blocked:!0}):e()},function(e){var t=n.scene.height*(1.2-1);n.createFilmEffect({scale:1.2,layerTimeout:0,
scaleTimeout:1,moveBy:{y:t},onComplete:e})},function(e){var t=new Dialogue(s.dialogue,{autoClose:!0,autoScroll:3,parentScene:!0,showUp:!0});t.on("afterClose",e),new DialogueView(t,{overlay:!0}).setLocalZOrder(51),t.run()},function(e){n.removeFilmEffect({scaleTimeout:.4,scaleLayerSameTime:!0,layerSlide:!0,onComplete:e})}])}}},cleverapps.styles.comicses={};var Dialogue=function(e,t){cleverapps.EventEmitter.call(this),this.options=t||{},this.parentScene=t.parentScene,this.autoScroll=3,void 0!==this.options.autoScroll&&(this.autoScroll=this.options.autoScroll),this.data=Array.isArray(e)?e:[e],this.stage=-1,this.stageData=this.data[0],this.personSlots=[void 0,void 0],this.bundlesToLoad=["dialogues"].concat(cleverapps.unique(this.options.bundles||[]).filter(function(e){return bundles[e]})),this.onceFinishTyping=function(){}};Dialogue.prototype=Object.create(cleverapps.EventEmitter.prototype),(Dialogue.prototype.constructor=Dialogue).prototype.onBundlesLoaded=function(){
this.waitingForBundles&&(delete this.waitingForBundles,this.next())},Dialogue.prototype.run=function(){cleverapps.metha.isFocused()||(console.log("Dialogue:",this.data),cleverapps.metha.debugMessage("Trying to show dialogue without user focus!")),cleverapps.bundleLoader.isLoaded(this.bundlesToLoad)?this.next():this.waitingForBundles=!0},Dialogue.prototype.finishClose=function(){this.closeCallback&&(this.closeCallback(),delete this.closeCallback),this.trigger("afterClose")},Dialogue.prototype.close=function(e){this.closing||(this.closing=!0,this.closeCallback=e,this.trigger("beforeClose"))},Dialogue.prototype.next=function(e){if(this.typing)return this.onceFinishTyping=function(){},void this.finishTyping();e=e||0,this.stage<this.data.length-1?this.incStage(e):this.options.autoClose&&this.createTimeout(this.close.bind(this),1e3*e)},Dialogue.prototype.incStage=function(e){clearTimeout(this.incTimeout),this.onceFinishTyping=function(){},this.incTimeout=this.createTimeout(function(){
this.stage++,this.stageData=this.data[this.stage],this.onChangeStage(),this.options.showUp&&0===this.stage&&this.trigger("showUp"),this.onceFinishTyping=this.finishTyping.bind(this)}.bind(this),1e3*e)},Dialogue.prototype.createTimeout=function(e,t){return new cleverapps.CountDown(t,{onFinish:function(){this.closing||e()}.bind(this),pauseOnGameHide:!0})},Dialogue.prototype.onChangeStage=function(){this.typing=!0;var e=this.extractPersons();(e[0]&&"right"===e[0].position||e[1]&&"left"===e[1].position)&&(e=e.reverse());var n=void 0;e.forEach(function(e,t){e&&e.active&&(n=e);var s=this.personSlots[t];this.areSamePersons(e,s)?this.trigger("updatePerson",e):(s&&this.trigger("hidePerson",s.position),e&&this.trigger("showPerson",e))},this),this.trigger("updateButton",!this.stageData.noButton,this.stage===this.data.length-1),this.trigger("changeText",this.stageData.text,n,function(){this.onceFinishTyping()}.bind(this)),this.trigger("updatePersonTitle",n),this.trigger("changedStage"),
this.personSlots=e},Dialogue.prototype.extractPersons=function(){var e=this.stageData.person;void 0===e&&(e={position:"left"}),e&&(e.active=!0);var t=this.stageData.person2;return t&&(t.active=!1),[e,t]},Dialogue.prototype.areSamePersons=function(e,t){return e&&t&&e.position===t.position&&(!e.styles&&!t.styles||e.styles.json===t.styles.json)},Dialogue.prototype.finishTyping=function(){this.typing=!1,this.trigger("finishTyping"),this.autoScroll&&this.next(this.autoScroll)},Dialogue.prototype.screenClicked=function(){this.trigger("screenClicked"),this.next()},Dialogue.prototype.buttonClicked=function(){this.typing&&this.next(),this.next(),this.trigger("buttonClicked")},Dialogue.POSITIONS={TOP:"top",TOP_LOWER:"top_lower",BOTTOM:"bottom",CENTER:"center"};var Force=Window.extend({ctor:function(e,t,s){this.windowForce="function"===t.window?t.window():t.window,this.forceConfig=t,this.options=s||{},this._super(e,t)},moveNodeAndKeepScale:function(e){var t=new cc.Node;t.setScale(e.adjustScaleTo(
this)/e.scale),this.addChild(t),e.realParent=e.getParent(),e.replaceParentSamePlace(t)},returnNode:function(e){e.replaceParentSamePlace(e.realParent)},onWindowLoaded:function(e,t){this.id=t.id,this._super({name:"forcewindow"+this.id,notCloseByTouchInShadow:!0,closeButton:!1,styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.Force,!0)}),this.setLocalZOrder(31),cleverapps.toolbar.freezeUpdates(),this.element=e,this.element.realParent=void 0;var s=this.options.rects||[];if(e!==Force.NO_ELEMENT&&s.push(this.element.getGlobalBoundingBox()),this.options.highlights&&this.options.highlights.forEach(function(e){this.moveNodeAndKeepScale(e)},this),e!==Force.NO_ELEMENT&&(this.moveNodeAndKeepScale(e),!1!==t.Finger)){var n,i=this.options.scaleX||1,o=this.options.scaleY||1,a=cc.p(0,0),r=0,l=e;if(t.Finger){var c=t.Finger;"function"==typeof c&&(c=c()),c.mobile&&cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(c=c.mobile),a=cc.p(c.x||0,c.y||0),c.startY&&(n=cc.p(0,
c.startY)),c.rotation&&(r=c.rotation),c.useForceTarget&&(l=this.findForceTarget(e))}this.finger=new FingerView({scaleX:i,scaleY:o}),this.finger.setRotation(r);var p=function(){this.finger.setPosition(this.convertToNodeSpace(l.parent.convertToWorldSpace(l.getPosition())))}.bind(this);this.finger.standardLoop({fadeInPosition:a,fadeInStartPosition:n,delayOnBeginAndFinish:!0,loops:1,onIterationFinish:p}),p(),this.addChild(this.finger)}var d="function"==typeof t.text?t.text(t):t.text;if(d){var u=new MinimalDialogue({text:d,person:t.person,rects:s,parent:this,forcePosition:"function"==typeof t.position?t.position():t.position});this.addChild(u)}(e===Force.NO_ELEMENT||this.forceConfig.closeByTouchInShadow)&&this.addCloseByTouchInShadow(),t.event&&cleverapps.eventLogger.logEvent(t.event),e!==Force.NO_ELEMENT&&(this.watchElementInterval=setInterval(function(){this.element.parent&&this.element.visible||cleverapps.forces.closeRunningForce()}.bind(this),5e3))},onClose:function(){
this.watchElementInterval&&clearInterval(this.watchElementInterval),this.element.parent&&(this.finger&&this.finger.removeFromParent(!0),this.element&&this.element!==Force.NO_ELEMENT&&this.returnNode(this.element)),this.options.highlights&&this.options.highlights.forEach(function(e){e.getParent()&&this.returnNode(e)},this),cleverapps.toolbar.unfreezeUpdates()},addCloseByTouchInShadow:function(){this.clickArea=new cc.Node,this.clickArea.setContentSize(this.getContentSize()),this.addChild(this.clickArea),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(e){cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce()}.bind(this.clickArea)},this.clickArea)},stop:function(){},listBundles:function(){return["dialogues_minimal"]},findForceTarget:function(e){for(var t=[e],s=0;s<t.length;++s){var n=t[s];if(n.forceTarget)return n;t=t.concat(n.children)}return e}});cleverapps.styles.Force={windowShowUpAnimation:{name:"instant",
force:!0}},Force.NO_ELEMENT="emptyForceElement";var Forces=function(){this.shownForces=[],this.load(),this.runningForceWindow=void 0,this.onceForceClosed=void 0};Forces.prototype.isRunningForce=function(e){return void 0!==this.runningForceWindow&&(void 0===e||this.runningForceWindow.id===e.id)},Forces.prototype.whenForceClosed=function(e){this._whenForceClosedCallbacks||(this._whenForceClosedCallbacks=[]),this._whenForceClosedCallbacks.push(e)},Forces.prototype._runForceClosedCallbacks=function(){this._whenForceClosedCallbacks&&(this._whenForceClosedCallbacks.forEach(function(e){e()}),delete this._whenForceClosedCallbacks)},Forces.prototype.closeRunningForce=function(){if(this.runningForceWindow.close(),this._runForceClosedCallbacks(this.runningForceWindow.id),void 0!==this.runningForceWindow.id&&this.saveForce(this.runningForceWindow.id),this.runningForceWindow=void 0,this.onceForceClosed){var e=this.onceForceClosed;this.onceForceClosed=void 0,e()}},Forces.prototype.reset=function(){
this.shownForces=[],this.save()},Forces.prototype.load=function(){this.shownForces=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.FORCES)||[]},Forces.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.FORCES,this.shownForces),e||cleverapps.synchronizer.addUpdateTask("forces")},Forces.prototype.getInfo=function(){var t=0;return this.shownForces.forEach(function(e){t+=Math.pow(2,e)}),{forces:t}},Forces.prototype.updateInfo=function(e,t){this.shownForces=[];for(var s=e.forces,n=Forces.SYNCED_FORCES-1;0<=n;n--){var i=Math.pow(2,n);i<=s&&(s-=i,this.shownForces.push(n))}this.shownForces=this.shownForces.reverse(),this.save(t)},Forces.prototype.isAvailable=function(e,t){return!(!e||e&&e!==Force.NO_ELEMENT&&!e.isRunningSafe())&&(void 0===t.id||-1===this.shownForces.indexOf(t.id))},Forces.prototype.isShown=function(e){return void 0!==e&&(this.shownForces&&0<=this.shownForces.indexOf(e))},Forces.prototype.saveForce=function(e){e&&!this.isShown(e)&&(
this.shownForces.push(e),this.save())},Forces.prototype.clearForce=function(e){var t=this.shownForces.indexOf(e);-1!==t&&(this.shownForces.splice(t,1),this.save())},Forces.prototype.create=function(e,t,s){if(this.isAvailable(e,t))return this.runningForceWindow=new Force(e,t,s)},Forces.prototype.checkMainForces=function(){return this.checkDailyTasksForce()||this.checkPeriodicBonusForce()||this.checkBonusRoundForce()||this.checkHeroesForce()},Forces.prototype.checkDailyTasksForce=function(){return cleverapps.dailyTasks&&levels.user.checkAvailable(cleverapps.Availables.DAILY_TASKS)&&!this.isShown(Forces.DAILY_TASKS_FORCE.id)},Forces.prototype.checkPeriodicBonusForce=function(){return cleverapps.periodicBonus&&cleverapps.periodicBonus.isAvailable()&&!this.isShown(Forces.PERIODIC_BONUS_FORCE.id)},Forces.prototype.checkBonusRoundForce=function(){return cleverapps.bonusRoundChest&&cleverapps.bonusRoundChest.isActive()&&!this.isShown(Forces.BONUS_ROUND_FORCE.id)},
Forces.prototype.checkHeroesForce=function(){return"undefined"!=typeof match3&&match3.heroes.available()&&!this.isShown(Forces.HEROES_AVAILABLE.id)},Forces.SYNCED_FORCES=52,Forces.FREE_WILDCARD_FORCE={id:1,event:cleverapps.EVENTS.FREE_WILDCARD_FORCE,text:"messages:WildCardTutorialMessage"},Forces.FREE_UNDO_FORCE={id:2,event:cleverapps.EVENTS.FREE_UNDO_FORCE,text:"messages:UndoTutorialMessage"},Forces.FREE_HINT_FORCE={id:3,event:cleverapps.EVENTS.FREE_HINT_FORCE,text:"messages:hintTutorialMessage"},Forces.FIRST_BOOSTERS_BEFORE={id:4,window:!0,event:cleverapps.EVENTS.FIRST_BOOSTERS_BEFORE,text:"messages:FirstBoostersBefore.force",position:Dialogue.POSITIONS.BOTTOM},Forces.SECOND_BOOSTERS_BEFORE={id:5,window:!0,event:cleverapps.EVENTS.SECOND_BOOSTERS_BEFORE,text:"messages:SecondBoostersBefore.force",position:Dialogue.POSITIONS.BOTTOM},Forces.THIRD_BOOSTERS_BEFORE={id:6,window:!0,event:cleverapps.EVENTS.THIRD_BOOSTERS_BEFORE,text:"messages:ThirdBoostersBefore.force",
position:Dialogue.POSITIONS.BOTTOM},Forces.FREE_ADD_MOVES_FORCE={id:7,event:cleverapps.EVENTS.FREE_ADD_MOVES_FORCE,text:"messages:AddMovesTutorialMessage",Finger:{y:50}},Forces.FREE_PAINT_FORCE={id:8,event:cleverapps.EVENTS.FREE_PAINT_FORCE,text:"messages:Paint.force"},Forces.DAILY_TASKS_FORCE={id:10,event:cleverapps.EVENTS.DAILY_TASKS_FORCE,text:"messages:Forces.DailyTasks",Finger:{startY:100}},Forces.COOLDOWN_FORCE={id:11,text:"messages:CoolDownNode.force",button:{text:"messages:SkipButton"},Finger:!1},Forces.PERIODIC_BONUS_FORCE={id:12,event:cleverapps.EVENTS.PERIODIC_BONUS_FORCE,text:"messages:Forces.PeriodicBonus",Finger:{startY:100}},Forces.GUN={id:15,event:cleverapps.EVENTS.GUN_FORCE,person:"board"!==cleverapps.config.type&&-1===["differences","tripeaks"].indexOf(cleverapps.config.name)&&void 0,text:"messages:Forces.Gun",Finger:{startY:100,x:100,y:130}},Forces.HEROES_AVAILABLE={id:17,event:cleverapps.EVENTS.HEROES_AVAILABLE_FORCE,text:"messages:Forces.HeroesAvailable"},
Forces.DAILY_CUP={id:18,text:"messages:DailyCup.force"},Forces.LANTERN={id:20,event:cleverapps.EVENTS.LANTERN_FORCE,text:"messages:LanternWindow.force"},Forces.BONUS_ROUND_FORCE={id:21,event:cleverapps.EVENTS.BONUS_ROUND_FORCE,text:"messages:Forces.BonusRound",Finger:{startY:100}},Forces.UNLOCK_HEROES={text:"messages:Forces.UnlockHero",Finger:{y:-70}},Forces.UPGRADE_HEROES={text:"messages:Forces.UpgradeFirstHero",Finger:{y:-70}},Forces.METHA_PLAY_BUTTON={id:23,text:function(){return cleverapps.metha.getType()===Metha.SIMPLE?"messages:SimpleMethaPlayButton.force":"messages:MethaPlayButton.force"},position:Dialogue.POSITIONS.TOP_LOWER},Forces.KNOCKOUT_PLAYERS={id:24,text:"messages:KnockoutPlayers.force",button:{text:"messages:SkipButton"},Finger:!1},Forces.KEYPAD={id:25,text:"messages:Keypad.force",button:{text:"messages:SkipButton"},Finger:!1,position:function(){if("differences"===cleverapps.config.type)return Dialogue.POSITIONS.BOTTOM}},Forces.COMBO={id:26,text:"messages:Combo.force"},
Forces.COOKIEJAR={id:27,text:"messages:Cookiejar.force",button:{text:"messages:OK"},closeByTouchInShadow:!0},Forces.CRYPTEX={id:28,text:"messages:Cryptex.force"},Forces.FREE_SHUFFLE_FORCE={id:29,event:cleverapps.EVENTS.FREE_SHUFFLE_FORCE,text:"messages:ShuffleBooster.force"},Forces.PHOTO_CLOVER={id:30,text:"messages:PhotoClover.force"},Forces.TRICKY_LEVEL={id:31,text:"messages:TrickyLevelForce",Finger:!1},Forces.SIMPLE={id:32,text:"messages:Simple.Force",Finger:function(){return cleverapps.styles.ProgressView.force.finger}},Forces.BONUS_WORLD={id:33},Forces.SLOT_MACHINE_ICON={id:34,text:"messages:SlotMachine.IconForce"},Forces.SLOT_MACHINE={id:35,text:"messages:SlotMachine.Force",event:cleverapps.EVENTS.SLOT_MACHINE_FORCE},Forces.BUY_ENERGY_ICON={id:36,text:"messages:BuyEnergy.IconForce",Finger:{useForceTarget:!0}},Forces.UNITS_SHOP_ICON={id:37,text:"messages:UnitsShop.IconForce"},Forces.SLOT_MACHINE_HELP={id:38,text:"messages:SlotMachine.HelpForce"},Forces.BUY_ENERGY_SHOP={window:!0,
Finger:{useForceTarget:!0}};var AdsLimits=function(){AdsLimits.initialize(),this.onUpdateListeners={},this.load(),cleverapps.rewardedAdsManager.onChangeLoaderStateListeners[RewardedAdsManager.REWARDED].AdsLimits=this.update.bind(this),setInterval(this.update.bind(this),cleverapps.parseInterval(AdsLimits.CHECK_INTERVAL))};AdsLimits.prototype.runUpdateListeners=function(){for(var e in this.onUpdateListeners)this.onUpdateListeners[e]()},AdsLimits.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.ADS_LIMITS_DATA,this.data)},AdsLimits.prototype.load=function(){this.data=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.ADS_LIMITS_DATA)||{};var t=cleverapps.values(AdsLimits.TYPES).map(String);Object.keys(this.data).forEach(function(e){-1===t.indexOf(e)&&delete this.data[e]},this),this.update()},AdsLimits.prototype.update=function(){var n;cleverapps.values(AdsLimits.TYPES).forEach(function(e){var t=AdsLimits.LIMITS[e],s=this.data[e];if(s
)return cleverapps.user.checkAvailable(t.available)?void(0<s.watchCount&&s.lastRefresh+t.timeout<=Date.now()&&(n=!0,delete this.data[e])):(n=!0,void delete this.data[e])}.bind(this)),n&&this.save(),this.runUpdateListeners()},AdsLimits.prototype.state=function(e){return cleverapps.user.checkAvailable(AdsLimits.LIMITS[e].available)?0===this.getLimitLeftCount(e)?AdsLimits.STATE_LIMITED:cleverapps.rewardedAdsManager.isAvailable(RewardedAdsManager.REWARDED)?AdsLimits.STATE_READY:AdsLimits.STATE_NOADS:AdsLimits.STATE_UNAVAILABLE},AdsLimits.prototype.getLimitLeftTime=function(e){var t=this.data[e]||{lastRefresh:0};return Math.max(0,t.lastRefresh+AdsLimits.LIMITS[e].timeout-Date.now())},AdsLimits.prototype.getLimitLeftCount=function(e){var t=this.data[e]||{watchCount:0};return Math.max(0,AdsLimits.LIMITS[e].limit-t.watchCount)},AdsLimits.prototype.getLimitLevel=function(e){return cleverapps.humanReadableNumber(AdsLimits.LIMITS[e].available.episode,AdsLimits.LIMITS[e].available.level)},
AdsLimits.prototype.__reset=function(e){delete this.data[e],this.save()},AdsLimits.prototype.watch=function(e){this.data[e]?this.data[e].watchCount+=1:this.data[e]={watchCount:1,lastRefresh:Date.now()},this.save(),this.runUpdateListeners()},AdsLimits.STATE_UNAVAILABLE=0,AdsLimits.STATE_LIMITED=1,AdsLimits.STATE_NOADS=2,AdsLimits.STATE_READY=3,AdsLimits.CHECK_INTERVAL="1 minute",AdsLimits.LIMITS={},AdsLimits.TYPES={GOLD_FOR_VIDEO:1,WORKER_FOR_VIDEO:2,LIVES_FOR_VIDEO:3,ENERGY_FOR_VIDEO_SHORT:4,COINS_FOR_VIDEO:5,BARREL:6,SPEEDUP:7,SPECIAL_OFFER:8,PIXEL:9,OPEN_CHEST:10,DOUBLE_MINI_GAME:11,BOOSTERS_BEFORE_FOR_VIDEO:12,MOVES_FOR_VIDEO:13,HINT_FOR_VIDEO:14,TICKET_FOR_VIDEO:15,STAR_FOR_VIDEO:16},AdsLimits.initialize=function(){AdsLimits.LIMITS={},AdsLimits.LIMITS[AdsLimits.TYPES.GOLD_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"1 hour":"12 hours"),limit:cleverapps.flags.videoAdsMainMonetization?10:2,available:"merge"===cleverapps.config.type?{level:3}:{level:9}},
AdsLimits.LIMITS[AdsLimits.TYPES.WORKER_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"1 hour":"24 hours"),limit:3,available:{level:5}},AdsLimits.LIMITS[AdsLimits.TYPES.LIVES_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"10 minutes":"merge"===cleverapps.config.type?"1 hour":"6 hours"),limit:"merge"===cleverapps.config.type?1:3,available:"merge"===cleverapps.config.type?{level:5}:{level:14}},AdsLimits.LIMITS[AdsLimits.TYPES.ENERGY_FOR_VIDEO_SHORT]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"30 minutes":"3 hour"),limit:10,available:{level:4}},AdsLimits.LIMITS[AdsLimits.TYPES.COINS_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"1 hour":"12 hours"),limit:cleverapps.flags.videoAdsMainMonetization?10:2,available:{level:5}},AdsLimits.LIMITS[AdsLimits.TYPES.BARREL]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"3 minute":"3 hour"),limit:1,available:{level:4}},
AdsLimits.LIMITS[AdsLimits.TYPES.SPEEDUP]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode||cleverapps.flags.videoAdsMainMonetization?"1 minute":"15 minutes"),limit:1,available:{level:2}},AdsLimits.LIMITS[AdsLimits.TYPES.SPECIAL_OFFER]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode||cleverapps.flags.videoAdsMainMonetization?"1 minute":"5 minutes"),limit:1,available:{level:3}},AdsLimits.LIMITS[AdsLimits.TYPES.PIXEL]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode||cleverapps.flags.videoAdsMainMonetization?"1 minute":"5 minutes"),limit:1,available:{level:5,wondermerge:{disabled:!0}}},AdsLimits.LIMITS[AdsLimits.TYPES.OPEN_CHEST]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode||cleverapps.flags.videoAdsMainMonetization?"1 minute":"5 minutes"),limit:1,available:{level:1}},AdsLimits.LIMITS[AdsLimits.TYPES.DOUBLE_MINI_GAME]={timeout:cleverapps.parseInterval("1 second"),limit:1,available:{level:17}},
AdsLimits.LIMITS[AdsLimits.TYPES.BOOSTERS_BEFORE_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"30 minutes":"1 day"),limit:3,available:{level:23}},AdsLimits.LIMITS[AdsLimits.TYPES.MOVES_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"1 minute":"3 hours"),limit:3,available:{level:3}},AdsLimits.LIMITS[AdsLimits.TYPES.HINT_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode||cleverapps.flags.videoAdsMainMonetization?"5 minutes":"15 minutes"),limit:1,available:{level:10,types:["board","differences"]}},AdsLimits.LIMITS[AdsLimits.TYPES.TICKET_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"5 minutes":"24 hours"),limit:1,available:{episode:1,level:14,disabled:!0}},AdsLimits.LIMITS[AdsLimits.TYPES.STAR_FOR_VIDEO]={timeout:cleverapps.parseInterval(cleverapps.config.debugMode?"5 minutes":"12 hours"),limit:1,available:{episode:2,level:3,metha:["simple"]}}};var Actor=cc.Node.extend({ctor:function(e
){this._super(),this.setContentSize(e.size),this.setAnchorPoint2();var t=e;t.boostersAmountPosition&&(t=t.boostersAmountPosition[Game.currentGame.boosters.amountAvailable()]),t=t.wideModePositions?t.wideModePositions[cleverapps.wideMode.mode]:t.position,this.setPositionRound(t),this.baseScaleX=this.baseScaleY=1,e.scales&&(this.baseScaleX=this.baseScaleY=e.scales[cleverapps.wideMode.mode]),e.scaleX&&(this.baseScaleX*=e.scaleX),e.scaleY&&(this.baseScaleY*=e.scaleY),this.setScale(this.baseScaleX,this.baseScaleY),this.spine=new cleverapps.Spine(e.spine),this.currSpine=e.spine,this.currSpineId=e.spineId,this.currSfx=e.sfx,e.spinePosition?this.spine.setPositionRound(this.width/2+e.spinePosition.x,this.height/2+e.spinePosition.y):this.spine.setPositionRound(this.width/2,0),this.addChild(this.spine),e.skin&&(this.spine.setSkin(e.skin),this.currSkin=e.skin),this.spine.setAnimation(0,Actor.ANIMATIONS.IDLE,!0),this.alive=!0},shake:function(){this.stopAllActions(),this.setScale(this.baseScaleX,
this.baseScaleY),this.runAction(new cc.Sequence(new cc.ScaleTo(.1,1.07*this.baseScaleX,.93*this.baseScaleY),new cc.ScaleTo(.05,this.baseScaleX,this.baseScaleY)))},animate:function(t,s){if(s=s||{},!this.alive){if(t!==Actor.ANIMATIONS.REVIVE)return;this.alive=!0}var e;(-1!==[Actor.ANIMATIONS.DIE,Actor.ANIMATIONS.DIE_IDLE].indexOf(t)&&(this.alive=!1),-1!==[Actor.ANIMATIONS.HURT,Actor.ANIMATIONS.HURT2].indexOf(t)&&(-1!==[Actor.ANIMATIONS.ATTACK1,Actor.ANIMATIONS.ATTACK2,Actor.ANIMATIONS.ATTACK3,Actor.ANIMATIONS.ATTACK4].indexOf(this.animationRunning)&&(this.animationRunning=!1),-1!==[Actor.ANIMATIONS.HURT,Actor.ANIMATIONS.HURT2].indexOf(this.animationRunning)&&this.animationStarted<Date.now()-300&&(this.animationRunning=!1)),-1!==[Actor.ANIMATIONS.GUN,Actor.ANIMATIONS.DIE,Actor.ANIMATIONS.DIE_IDLE,Actor.ANIMATIONS.REVIVE,Actor.ANIMATIONS.HEAL,Actor.ANIMATIONS.ENEMY_ATTACK].indexOf(t)&&(this.animationRunning=!1),this.animationRunning)||(this.currSfx&&!s.noSFX&&(e=this.currSfx[t]),
e&&this.runAction(new cc.Sequence(new cc.DelayTime(s.sfxDelay||cleverapps.styles.Actor.sfx.delay),new cc.CallFunc(function(){cleverapps.audio.playSound(e)}))),this.animationRunning=t,this.animationStarted=Date.now(),this.spine.setAnimation(0,t,!1),this.spine.setCompleteListener(function(){var e;this.animationRunning=!1,this.spine.setCompleteListener(function(){}),e=s.idleAnimation?s.idleAnimation:-1!==[Actor.ANIMATIONS.DIE,Actor.ANIMATIONS.DIE_IDLE].indexOf(t)?Actor.ANIMATIONS.DIE_IDLE:Actor.ANIMATIONS.IDLE,this.spine.setAnimation(0,e,!0),s.callback&&s.callback()}.bind(this)))}});Actor.ANIMATIONS={},Actor.ANIMATIONS.ENEMY_ATTACK="attack",Actor.ANIMATIONS.ATTACK1="attack1",Actor.ANIMATIONS.ATTACK2="attack2",Actor.ANIMATIONS.ATTACK3="attack3",Actor.ANIMATIONS.ATTACK4="attack4",Actor.ANIMATIONS.IDLE="idle",Actor.ANIMATIONS.HURT="hurt",Actor.ANIMATIONS.HURT2="hurt2",Actor.ANIMATIONS.DIE="die",Actor.ANIMATIONS.DIE_IDLE="die_idle",Actor.ANIMATIONS.HEAL="heal",Actor.ANIMATIONS.REVIVE="revive"
,Actor.ANIMATIONS.GUN="punish",cleverapps.styles.Actor={sfx:{delay:.7}},cleverapps.WideMode=function(){this.refresh()},cleverapps.WideMode.prototype.refresh=function(){this.mode=cleverapps.WideMode.VERTICAL;var e=cc.director.getWinSize();e.width>cleverapps.styles.SQUARE_MODE_WIDTH&&(this.mode=cleverapps.WideMode.SQUARE),void 0!==cleverapps.styles.HORIZONTAL_MODE_WIDTH?e.width>cleverapps.styles.HORIZONTAL_MODE_WIDTH&&(this.mode=cleverapps.WideMode.HORIZONTAL):void 0!==cleverapps.styles.SCENE_HORIZONTAL_WIDTH&&e.width===cleverapps.styles.SCENE_HORIZONTAL_WIDTH&&(this.mode=cleverapps.WideMode.HORIZONTAL)},cleverapps.WideMode.VERTICAL=0,cleverapps.WideMode.SQUARE=1,cleverapps.WideMode.HORIZONTAL=2;var Competition=function(e){this.type=e.type;var t=void 0;(this.options=e).store&&((t=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.COMPETITION+"_"+this.type))||-1===[Mission.TYPE_COMBO,Mission.TYPE_COLLECT_MARK,Mission.TYPE_BURN_NEARBY,Mission.TYPE_LETTER].indexOf(this.type)||(
t=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.COMPETITION)),cleverapps.DataLoader.remove(cleverapps.DataLoaderTypes.COMPETITION));t?(this.results=t.results,e.algo.lastProcessed=t.algorithm):e.players?this.results=e.players:this.results=this.listFakePlayers(e.amount),this.player=this.getPlayerById(cleverapps.user.id),this.player||(this.player={player:!0,id:cleverapps.user.id,name:cleverapps.friends.getPlayer().name,avatar:cleverapps.friends.getPlayer().avatar,amount:0},this.results.push(this.player)),void 0!==e.playerResult&&(this.player.amount=e.playerResult),this.running=!0,this.onChangeResultsListeners={},this.onLoseListener=function(){},this.algorithm=new CompetitionAlgorithm(this,this.options.algo),0<this.countFakePlayers()&&this.onPlayersAvailable()};Competition.prototype.start=function(){this.algorithm.start()},Competition.optionsForTournament=function(e){var t="tournament",s=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.COMPETITION+"_"+t)||{};if(
e.emptySave||s.level===e.level.getHumanReadableNumber()){var n=s.results||[];if(e.emptySave){Competition.CLEAN_SAVED(t);var i=[.5,.8,1.1].sort(function(){return Math.random()<.5?-1:1});(n=cleverapps.competitionPlayers.listPlayers(3)||[]).forEach(function(e,t){e.amount=0,e.force=i[t]})}if(!(n.length<3)){cleverapps.UI.Avatar.preload(n);var o=cleverapps.competitionStatistics.getBoardGameWordOpenByKeypadLengthTime(e.keypad.amountKeys());return{type:t,amount:3,level:e.level,store:!0,lose:!1,players:n,algo:{noPlayerEpisodeCoef:!0,averageProcessTimeout:cleverapps.parseInterval(o+" seconds"),botAheadPlayerCoef:.25,botAheadPlayerBigDifferenceCoef:.3,bigDistanceLength:1,offlineProcess:!0,useRealForce:!0,duration:cleverapps.parseInterval("3 hour"),maxResult:e.totalItemsToSolve()}}}}},Competition.optionsForKnockoutGame=function(e){var t=10;"board"===cleverapps.config.type?t=cleverapps.competitionStatistics.getBoardGameWordOpenByKeypadLengthTime(e.keypad.amountKeys()
):"differences"===cleverapps.config.type&&(t=cleverapps.competitionStatistics.getOneDifferenceFindTime());var s=cleverapps.metha.getMainObject().knockoutGame.rumble,n=s.getCurrentRound().getOpponent(cleverapps.user.id);n.force=[.6,.8,1][s.rounds.length-1],n.amount=0;var i=.3,o=1.5,a=.5;switch(cleverapps.metha.getMainObject().knockoutGame.calcTournamentType()){case KnockoutGame.BOT_CANNOT_WIN_TOURNAMENT:a=0,o=2,t=Math.floor(.8*t);break;case KnockoutGame.VERY_EASY_TOURNAMENT:i=.3,o=2,t=Math.floor(2.5*t);break;case KnockoutGame.EASY_TOURNAMENT:i=.4,o=1,a=.3,t=Math.floor(1.3*t);break;case KnockoutGame.NORMAL_TOURNAMENT:i=.5,o=1.2,a=.3,t=Math.floor(1.1*t);break;case KnockoutGame.DIFFICULT_TOURNAMENT:i=.6,o=1.5,t=Math.floor(.8*t);break;case KnockoutGame.VERY_DIFFICULT_TOURNAMENT:i=.8,o=1.5,t=Math.floor(.5*t)}return{type:"knockout",amount:1,players:[n],algo:{noPlayerEpisodeCoef:!0,averageProcessTimeout:cleverapps.parseInterval(t+" seconds"),botAheadPlayerCoef:i,
botAheadPlayerBigDifferenceCoef:.5,playerAheadBotCoef:o,playerAheadBotBigDifferenceCoef:2,bigDistanceLength:1,offlineProcess:!1,useRealForce:!0,duration:cleverapps.parseInterval("3 hour"),maxResult:e.totalItemsToSolve(),botFinishCoef:a}}},Competition.optionsByMission=function(e){var t={store:!0,type:e.type,playerResult:e.result,amount:Array.isArray(e.competition.amount)?cleverapps.Random.random(e.competition.amount[0],e.competition.amount[1],!1):e.competition.amount};return t.algo={start:e.started,finish:e.finishTime()},cleverapps.extend(t.algo,e.competition),t},Competition.prototype.calcPlace=function(){return this.results.sort(function(e,t){return t.amount!==e.amount?t.amount-e.amount:e.event&&t.event&&e.event!==t.event?e.event-t.event:e===this.player?-1:t===this.player?1:0}.bind(this)),this.results.indexOf(this.player)},Competition.prototype.updatePlayerResult=function(e,t){this.options.algo.maxResult&&t>this.options.algo.maxResult&&(t=this.options.algo.maxResult);for(
var s=0;s<this.results.length;s++)if(this.results[s].id===e&&this.results[s].amount!==t){this.results[s].amount=t,this.results[s].event=Date.now(),this.runChangeResultsListeners(e);break}this.calcPlace(),this.getFinishedOpponents().length===this.options.amount&&!1!==this.options.lose&&this.onLoseListener()},Competition.prototype.getFinishedOpponents=function(){return this.results.filter(function(e){return e.id!==cleverapps.user.id&&e.amount===this.options.algo.maxResult}.bind(this))},Competition.prototype.runChangeResultsListeners=function(t){cleverapps.values(this.onChangeResultsListeners).forEach(function(e){e(t)})},Competition.prototype.stop=function(){this.running=!1,delete cleverapps.competitionPlayers.onAvailableListeners[this.type],this.algorithm.stop()},Competition.prototype.onPlayersAvailable=function(){if(delete cleverapps.competitionPlayers.onAvailableListeners[this.type],this.running){var e=cleverapps.competitionPlayers.listPlayers(Math.min(this.countFakePlayers(),
cleverapps.competitionPlayers.getAmount()));this.replaceFakePlayers(e),0<this.countFakePlayers()&&(cleverapps.competitionPlayers.onAvailableListeners[this.type]=this.onPlayersAvailable.bind(this))}},Competition.CLEAN_SAVED=function(e){cleverapps.DataLoader.remove(cleverapps.DataLoaderTypes.COMPETITION+"_"+e)},Competition.prototype.listFakePlayers=function(e){for(var t=[],s=0;s<e;s++)t.push({id:Math.round(1e6*Math.random()),name:"player"+s,fake:!0});return t},Competition.prototype.countFakePlayers=function(e){var t=0;return this.results.forEach(function(e){e.fake&&t++}),t},Competition.prototype.replaceFakePlayers=function(e){for(var t=0,s=0;s<this.results.length&&t<e.length;s++){var n=this.results[s];n.fake&&(n.id=e[t].id,n.name=e[t].name,n.avatar=e[t].avatar,delete n.fake,t++)}this.save()},Competition.prototype.getPlayerById=function(t){return this.results.filter(function(e){return e.id===t})[0]},Competition.prototype.getResults=function(){return this.results.slice()},
Competition.prototype.save=function(){this.options.store&&cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.COMPETITION+"_"+this.type,{results:this.results,algorithm:this.algorithm.getData(),level:this.options.level?this.options.level.getHumanReadableNumber():void 0})},Competition.prototype.onUserInfoChanged=function(){this.player.name=cleverapps.friends.getPlayer().name,this.player.avatar=cleverapps.friends.getPlayer().avatar,this.player.id=cleverapps.friends.getPlayer().id,this.save()};var CompetitionPlayers=function(){this.onAvailableListeners={},this.load(),this.reload(),setInterval(this.reload.bind(this),cleverapps.parseInterval(CompetitionPlayers.RELOAD_INTERVAL))};CompetitionPlayers.prototype.reload=function(){if(!this.reloading){this.reloading=!0;var e=function(e){this.reloading=!1,this.players=[];for(var t=0;t<e.length;t++)e[t].id!==levels.user.id&&e[t].name&&0<e[t].name.length&&this.players.push({id:e[t].id,name:e[t].name,avatar:e[t].avatar});if(this.save(),
0<this.players.length)for(var s in this.onAvailableListeners)this.onAvailableListeners[s]()}.bind(this),t=function(){this.reloading=!1}.bind(this),s="/competitionplayers/?locale="+cleverapps.settings.language;cleverapps.config.debugMode&&(s="https://riddles.labsystech.ru/riddles-rest"+s),cleverapps.RestClient.get(s,{},e,t)}},CompetitionPlayers.prototype.getAmount=function(){return this.players.length},CompetitionPlayers.prototype.listPlayers=function(e){var t=this.players.splice(0,e);return this.save(),this.reload(),t},CompetitionPlayers.prototype.load=function(){this.players=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.COMPETITION_PLAYERS)||[]},CompetitionPlayers.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.COMPETITION_PLAYERS,this.players)},CompetitionPlayers.RELOAD_INTERVAL="30 minutes";var CompetitionStatistics=function(){this.load()};CompetitionStatistics.prototype.onGameStarted=function(t){"board"===cleverapps.config.type&&(
t.onChangeOutcomeListeners.competitionStatistics=function(){var e=Math.floor(t.timer.getTime()/t.board.countTotalWords()/1e3);this.saveBoardGameWordOpenByKeypadLengthTime(t.keypad.amountKeys(),e)}.bind(this))},CompetitionStatistics.prototype._newData=function(e,t){this.data[e]&&this._isAppropriateValue(e,t)&&(this.data[e]=Math.round(.9*this.data[e]+.1*t),this.save())},CompetitionStatistics.prototype._isAppropriateValue=function(e,t){return t>CompetitionStatistics.DEFAULTS[e]/5&&t<5*CompetitionStatistics.DEFAULTS[e]},CompetitionStatistics.prototype.saveBoardGameWordOpenByKeypadLengthTime=function(e,t){this._newData("brd_l"+e,t)},CompetitionStatistics.prototype.getBoardGameWordOpenByKeypadLengthTime=function(e){return e=Math.min(Math.max(e,4),9),this.data["brd_l"+e]},CompetitionStatistics.prototype.saveOneDifferenceFindTime=function(e){console.log("save diff time",e),this._newData("diff_time",e)},CompetitionStatistics.prototype.getOneDifferenceFindTime=function(){
return this.data.diff_time},CompetitionStatistics.prototype.load=function(){this.updateInfo(cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.COMPETITION_STATISTICS)||{})},CompetitionStatistics.prototype.updateInfo=function(e,t){for(var s in this.data={},CompetitionStatistics.DEFAULTS)this.data[s]=e[s]&&this._isAppropriateValue(s,e[s])?e[s]:CompetitionStatistics.DEFAULTS[s];t&&this.save(!0)},CompetitionStatistics.prototype.getInfo=function(){var e={};for(var t in CompetitionStatistics.DEFAULTS)CompetitionStatistics.DEFAULTS[t]!==this.data[t]&&(e[t]=this.data[t]);return e},CompetitionStatistics.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.COMPETITION_STATISTICS,this.getInfo()),e||cleverapps.synchronizer.addUpdateTask("competitionstatistics")},CompetitionStatistics.DEFAULTS={brd_l4:8,brd_l5:15,brd_l6:20,brd_l7:30,brd_l8:40,brd_l9:50,diff_time:30};var CompetitionAlgorithm=function(e,t){this.competition=e,void 0===(this.options=t).start&&(
t.start=Date.now(),t.finish=t.start+t.duration),this.lastProcessed=t.lastProcessed||t.start};CompetitionAlgorithm.prototype.start=function(){this.isPrepared()||this.prepareFromScratch(),this.competition.running&&(this.intervalProcess(),this.runInterval=setInterval(function(){this.competition.running?this.intervalProcess():this.stop()}.bind(this),this.intervalTimeout()))},CompetitionAlgorithm.prototype.stop=function(){this.runInterval&&(clearInterval(this.runInterval),this.runInterval=void 0)},CompetitionAlgorithm.prototype.getData=function(){return this.lastProcessed},CompetitionAlgorithm.prototype.process=function(e){for(var t=[],s=0;s<this.competition.results.length;s++){var n=this.competition.results[s];if(!n.player&&Math.random()<this.botProcessProb(n,e)){if(this.options.maxResult&&n.amount===this.options.maxResult)continue;var i=n.amount+this.processAmount();this.options.maxResult&&i>this.options.maxResult&&(i=this.options.maxResult),n.amount!==i&&t.push({id:n.id,amount:i})}}if(
0<t.length){for(s=0;s<t.length;s++)this.competition.updatePlayerResult(t[s].id,t[s].amount);this.competition.save()}},CompetitionAlgorithm.prototype.isPrepared=function(){for(var e=0;e<this.competition.results.length;e++)if(!this.competition.results[e].player)return void 0!==this.competition.results[e].force;return!0},CompetitionAlgorithm.prototype.prepareFromScratch=function(){this.competition.results.forEach(function(e){e.player||(e.amount=0,e.force=Math.floor(Math.random()*(CompetitionAlgorithm.BOT_MAX_FORCE+1)),this.options.minBotForce&&(e.force=Math.max(e.force,this.options.minBotForce)),e.sleep=this.generateSleepPeriod())},this),this.competition.save()},CompetitionAlgorithm.prototype.generateSleepPeriod=function(){var e=this.options.finish-this.options.start;if(!(e<cleverapps.parseInterval("1 hour"))){var t=Math.floor(e/4+Math.random()*e/4),s=this.options.start+Math.floor(Math.random()*(e-t));return{s:s,f:s+t}}},CompetitionAlgorithm.prototype.offlineCoef=function(){return.3},
CompetitionAlgorithm.prototype.playerAheadBotCoef=function(e){return void 0!==this.options.playerAheadBotCoef?this.options.playerAheadBotCoef:1},CompetitionAlgorithm.prototype.playerAheadBot5AmountCoef=function(e){return void 0!==this.options.playerAheadBotBigDifferenceCoef?this.options.playerAheadBotBigDifferenceCoef:2},CompetitionAlgorithm.prototype.botAheadPlayerCoef=function(e){return void 0!==this.options.botAheadPlayerCoef?this.options.botAheadPlayerCoef:.3},CompetitionAlgorithm.prototype.botAheadPlayer5AmountCoef=function(e){return void 0!==this.options.botAheadPlayerBigDifferenceCoef?this.options.botAheadPlayerBigDifferenceCoef:.1},CompetitionAlgorithm.prototype.mediumAmount=function(){var e=this.options.step;return e&&0<e.length?e.reduce(function(e,t){return e+t},0)/e.length:1},CompetitionAlgorithm.prototype.processAmount=function(){var e=this.options.step;return e?2<e.length?cleverapps.Random.choose(e,!1):cleverapps.Random.random(e[0],e[1],!1):1},
CompetitionAlgorithm.prototype.getBotForceCoef=function(e){if(this.options.useRealForce)return e;var t=[0,.03,.08,.15,.25,.35,.5,.7,1,1.5,2];return(void 0!==t[e]?t[e]:2)*(this.options.forceCoef||1)},CompetitionAlgorithm.prototype.sleepNow=function(e){return!!e.sleep&&(e.sleep.s<=this.lastProcessed&&this.lastProcessed<=e.sleep.f)},CompetitionAlgorithm.prototype.bigDistanceLength=function(){return this.options.bigDistanceLength?this.options.bigDistanceLength:5},CompetitionAlgorithm.prototype.calcFromBotAmountCoef=function(e){if(!this.options.maxResult||this.options.maxResult<2)return 1;var t=(this.options.maxResult-1)/2;return 1.25-.75*(e.amount-t)/t},CompetitionAlgorithm.prototype.botProcessProb=function(e,t){if(this.sleepNow(e))return 0;var s=this.competition.player.amount,n=this.perIntervalProb(t);return e.amount>=s?(n*=this.botAheadPlayerCoef(e),e.amount>s+this.bigDistanceLength()*this.mediumAmount()&&(n*=this.botAheadPlayer5AmountCoef(e))):(n*=this.playerAheadBotCoef(e),
s>e.amount+this.bigDistanceLength()*this.mediumAmount()&&(n*=this.playerAheadBot5AmountCoef(e))),this.options.botFinishCoef&&this.options.maxResult&&e.amount+this.mediumAmount()>=this.options.maxResult&&(n*=this.options.botFinishCoef),(n*=this.calcFromBotAmountCoef(e))*this.playerEpisodeCoef()*this.getBotForceCoef(e.force)},CompetitionAlgorithm.prototype.perIntervalProb=function(e){return e?(this.offlinePerIntervalProb||(this.offlinePerIntervalProb=this.offlineCoef()*this.intervalTimeout(e)/this.maxForceBotAverageProcessTimeout()),this.offlinePerIntervalProb):(this.onlinePerIntervalProb||(this.onlinePerIntervalProb=this.intervalTimeout(e)/this.maxForceBotAverageProcessTimeout()),this.onlinePerIntervalProb)},CompetitionAlgorithm.prototype.intervalTimeout=function(e){return cleverapps.parseInterval(e?"10 minutes":"5 seconds")},CompetitionAlgorithm.prototype.freeze=function(e){var t=Date.now();this.lastProcessed>t?this.lastProcessed+=e:this.lastProcessed=t+e},
CompetitionAlgorithm.prototype.intervalProcess=function(){var e=Math.min(Date.now(),this.options.finish);if(!(this.lastProcessed>e)){var t=this.intervalTimeout(!0),s=this.intervalTimeout();if(!1!==this.options.offlineProcess)for(;this.lastProcessed<e-2*t;)this.lastProcessed+=t,this.process(!0);for(;this.lastProcessed<e-s/2;)this.lastProcessed+=s,this.process();this.lastProcessed=e,this.competition.save()}},CompetitionAlgorithm.prototype.maxForceBotAverageProcessTimeout=function(){return this.options.averageProcessTimeout?this.options.averageProcessTimeout:cleverapps.parseInterval("3 minutes")},CompetitionAlgorithm.prototype.playerEpisodelevel=function(){return 10<=levels.user.episode?2:5<=levels.user.episode?1:0},CompetitionAlgorithm.prototype.playerEpisodeCoef=function(){return this.options.noPlayerEpisodeCoef?1:[.1,.13,.15][this.playerEpisodelevel()]},CompetitionAlgorithm.BOT_MAX_FORCE=10,cleverapps.Notification=cc.Scale9Sprite.extend({ctor:function(){this._super(
bundles.main.frames.notification_bg_png),this.setLocalZOrder(cleverapps.styles.Notification.zOrder),this.baseHeight=new cc.Sprite(bundles.main.frames.notification_bg_png).height},setMessage:function(e,t){this.text&&(this.text.removeFromParent(!0),this.text=void 0),this.image&&(this.image.removeFromParent(!0),this.image=void 0);var s,n,i=cleverapps.styles.Notification,o=cleverapps.UI.generateTTFText(e,cleverapps.styles.FONTS.NOTIFICATION_TEXT?cleverapps.styles.FONTS.NOTIFICATION_TEXT:cleverapps.styles.FONTS.TEXT,t.toReplace),a=.85*cleverapps.UI.getSceneSize().width,r=!1;t.image&&(s=t.image.width*t.image.scale,n=t.image.height*t.image.scale,a-=s+i.image.margin),o.width>a&&(r=!0,o.setDimensions(a,0),o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER)),this.text=o,this.addChild(o);var l=Math.max(i.width,o.width+i.paddingX+(t.image?s+i.image.margin:0)),c=Math.max(i.height,this.baseHeight);r&&(c=Math.max(c,o.height-2*i.text.y+i.paddingY)),t.image&&(c=Math.max(c,
n+2*i.image.margin-2*i.text.y+i.paddingY)),this.setContentSize(l,c),o.setPositionRound(t.image?this.width/2+s/2+i.image.margin/2:this.width/2,this.height/2+i.text.y),t.image&&(this.image=t.image,this.addChild(t.image),t.image.setPositionRound(s/2+2*i.image.margin,this.height/2+i.text.y+i.image.y)),this.customize(),this.setPosition(this.base),cleverapps.audio.playSound(bundles.main.urls.notification_effect),this.runAction(new cc.Sequence(new cc.MoveTo(.2,this.target),new cc.DelayTime(3),new cc.MoveTo(.5,this.base),new cc.RemoveSelf))},customize:function(){var e=cc.director.getWinSize();this.base=cc.p(e.width/2,e.height+this.height/2),this.target=cc.p(e.width/2,e.height-this.height/2-cleverapps.UI.getSceneOffsetY()+cleverapps.styles.Notification.targetY)}}),cleverapps.Notification.create=function(e,t){t=t||{};var s=cc.director.getRunningScene();if(s&&Messages.isInitialized()&&e&&cleverapps.allInitialized&&!cleverapps.scenes.isLoaderScene()&&"playable"!==cleverapps.config.source){
var n=s.getChildByTag(cleverapps.Notification.TAG);n?n.stopAllActions():((n=new cleverapps.Notification).setTag(cleverapps.Notification.TAG),s.addChild(n)),this.leaveOnResize=t.leaveOnResize,n.setMessage(e,t)}},cleverapps.Notification.remove=function(e){var t=cc.director.getRunningScene();if(t&&!cleverapps.scenes.isLoaderScene()&&(!e||!this.leaveOnResize)){var s=t.getChildByTag(cleverapps.Notification.TAG);s&&s.removeFromParent()}},cleverapps.Notification.TAG=101,cleverapps.styles.Notification={zOrder:22,targetY:90,image:{margin:15,y:-10},text:{y:-30},height:200,width:150,paddingX:80,paddingY:30};var PagingScrollView=cc.Node.extend({ctor:function(e){this._super(),e=e||{},this.currentPage=e.beginPage?e.beginPage:0,this.amountPages=e.amountPages?e.amountPages:0;var t=this.styles=e.styles;this.direction=void 0!==t.direction?t.direction:PagingScrollView.DIRECTIONS.Horizontal,this.autoScroll=!t.noAutoScroll,this.visiblePages=t.visiblePages,this.prevPageShowed=t.prevEpisodeShowed,
this.firstOffset=0,this.pageHeight=e.pageHeight,this.pageWidth=e.pageWidth,this.middlePage=!1,cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:e.swallowTouches,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this),onTouchCancelled:this.onTouchEnded.bind(this)},this),e.noWheelScroll||cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseScroll:function(e){if(!this.isMoving&&!cleverapps.windows.list.length){var t=e._scrollY;if(0!=t)if(this.autoScroll)0<t?this.onNextPageListener():this.onPrevPageListener();else{t=0<t?cleverapps.styles.PagingScrollView.wheelScrollSpeed:-cleverapps.styles.PagingScrollView.wheelScrollSpeed,this.basePosition=this.container.getPosition();var s=this.getScrollLength();this.direction===PagingScrollView.DIRECTIONS.Horizontal?(t=Math.max(this.basePosition.x-this.firstOffset,Math.min(s.x+this.basePosition.x,t)),this.deltaMove([-t,0])):(t=Math.max(
this.basePosition.y-this.firstOffset,Math.min(s.y+this.basePosition.y,t)),this.deltaMove([0,-t]))}}}.bind(this)},this),this.onNextPageListener=function(){},this.onPrevPageListener=function(){},this.onScrolledToCurrentPage=function(){},this.container=new cc.Node,this.addChild(this.container),this.scheduleUpdate()},update:function(e){this._super(e),1<this.visiblePages&&this.calcCurrentPage(!0)},calcFirstOffset:function(){this.styles.firstOffset?this.firstOffset=this.styles.firstOffset:1<this.visiblePages&&(this.isHorizontal()?this.firstOffset=this.pageWidth/2:this.firstOffset=this.pageHeight/2)},getScrollLength:function(){var e={x:0,y:0};return this.direction===PagingScrollView.DIRECTIONS.Horizontal?e.x=(this.amountPages-this.visiblePages)*this.pageWidth:(e.y=(this.amountPages-this.visiblePages)*this.pageHeight+cleverapps.styles.PagingScrollView.comingSoonExtraLength[cleverapps.wideMode.mode],e.y-=2*cleverapps.UI.getSceneOffsetY()),e},onTouchBegan:function(e){if(
cleverapps.metha.isFocused())return!1;if(this.touchBeganId=e.getID(),this.isMoving){if(this.autoScroll)return!1;this.container.stopAllActions(),this.calcCurrentPage()}var t=this.convertTouchToNodeSpace(e);return this.horizontalLookDirection=void 0,this.basePoint=t,this.prevPoint=t,this.prevPointTime=0,this.prevPointCalcTimes=0,this.deltaPoint=0,this.basePosition=this.container.getPosition(),this.isMoving=!1,cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t)},deltaMove:function(e,t){var s=this.getScrollLength();if(this.isHorizontal()){if(this.basePosition.x+e[0]>this.firstOffset+1e-6||this.basePosition.x+e[0]+1e-6<-s.x)return void(this.isMoving=!1)}else if(this.basePosition.y+e[1]>this.firstOffset+1e-6||this.basePosition.y+e[1]+1e-6<-s.y)return void(this.isMoving=!1);var n=t?PagingScrollView.MOVE_TRESHOLD:0;(Math.abs(e[0])>n*this.pageWidth||Math.abs(e[1])>n*this.pageHeight)&&(this.isMoving=!0,this.showPages(e)),this.isMoving&&(cleverapps.audio.playSound(
bundles.main.urls.pagingscroll),t?(this.container.setPosition(this.basePosition.x+e[0],this.basePosition.y+e[1]),this.autoScroll||this.calcCurrentPage()):(this.showPages(e),this.container.runAction(new cc.Sequence(new cc.MoveTo(.3,{x:this.basePosition.x+e[0],y:this.basePosition.y+e[1]}),new cc.CallFunc(function(){this.isMoving=!1,this.calcCurrentPage()}.bind(this))))))},onTouchMoved:function(e){if(this.touchBeganId!==e.getID())return!1;var t=this.convertTouchToNodeSpace(e),s=[t.x-this.basePoint.x,t.y-this.basePoint.y];if(!this.autoScroll&&this.isVertical()&&this.width<cleverapps.styles.SCENE_MAX_WIDTH&&!cleverapps.styles.horizontalScrollDisabled&&(void 0===this.horizontalLookDirection&&(Math.abs(s[0])>PagingScrollView.MOVE_TRESHOLD*this.pageWidth||Math.abs(s[1])>PagingScrollView.MOVE_TRESHOLD*this.pageHeight)&&(Math.abs(s[0])>2*Math.abs(s[1])?this.horizontalLookDirection=!0:this.horizontalLookDirection=!1),this.horizontalLookDirection)){var n=s[0];return n=Math.min(n,(
cleverapps.styles.SCENE_MAX_WIDTH-this.width)/2-this.basePosition.x),n=Math.max(n,-(cleverapps.styles.SCENE_MAX_WIDTH-this.width)/2-this.basePosition.x),void this.container.setPosition(this.basePosition.x+n,this.basePosition.y)}this.isHorizontal()?s[1]=0:s[0]=0,this.autoScroll||this.calcDeltaPoint(t),this.deltaMove(s,!0)},onEnter:function(){this._super(),this.showCurrentPageOnly()},onExitTransitionDidStart:function(){this._super(),this.showCurrentPageOnly()},showPages:function(e){for(var t={},s=0;s<this.visiblePages;s++)t[this.currentPage+s]=!0;this.prevPageShowed&&(t[this.currentPage-1]=!0);var n=this.currentPage+(e[0]<0||e[1]<0?this.visiblePages:-1);if(t[n]=!0,"number"==typeof this.middlePage)t[this.middlePage]&&(t[this.middlePage+1]=!0),t[this.middlePage]=!0;else{var i=this.currentPage+(e[0]<0||e[1]<0?-1:this.visiblePages);t[i]=!0}this.getPages().forEach(function(e){e.setVisible(t[e.pageNo])}.bind(this))},getPages:function(){return this.container.getChildren().filter(function(e){
return void 0!==e.pageNo})},getVisiblePages:function(){return this.container.getChildren().filter(function(e){return void 0!==e.pageNo&&e.visible})},showCurrentPageOnly:function(){this.getPages().forEach(function(e){e.setVisible(this.currentPage+(this.prevPageShowed?-1:0)<=e.pageNo&&e.pageNo<this.currentPage+this.visiblePages||this.middlePage===e.pageNo)}.bind(this))},isHorizontal:function(){return this.direction===PagingScrollView.DIRECTIONS.Horizontal},isVertical:function(){return!this.isHorizontal()},getCurrentPagePosition:function(e){void 0===e&&(e=this.currentPage);var t=new cc.p(this.isHorizontal()?-e*this.pageWidth:0,this.isVertical()?-e*this.pageHeight:0);if(1<this.visiblePages){t=cc.p(t.x+(this.isHorizontal()?this.firstOffset:0),t.y+(this.isVertical()?this.firstOffset:0));var s=this.getScrollLength();this.isHorizontal()?t.x=Math.min(this.firstOffset,Math.max(t.x,-s.x)):t.y=Math.min(this.firstOffset,Math.max(t.y,-s.y))}return t},calcCurrentPage:function(e){
var t=this.container.getPosition(),s=this.pageWidth;this.isHorizontal()?t=t.x:(t=t.y,s=this.pageHeight),0<t&&(t=0);var n=this.currentPage;this.currentPage=cleverapps.config.rpg?Math.floor(-t/s)+1:Math.round(-t/s),e&&n===this.currentPage||(this.middlePage=this.currentPage+this.visiblePages,this.showCurrentPageOnly(),n<this.currentPage?this.onNextPageListener():n>this.currentPage&&this.onPrevPageListener())},scrollToPositionInPage:function(e,t){var s,n=this.getCurrentPagePosition();this.direction===PagingScrollView.DIRECTIONS.Horizontal?((s=this.width/2+e.x)<0&&0===this.currentPage&&(s=0),n.x=Math.max(this.container.x-s,-(this.amountPages-1)*this.width)):((s=this.height/2+e.y-.3*this.height)<0&&0===this.currentPage&&(s=0),n.y=Math.max(this.container.y-s,-(this.amountPages-1)*this.height),n.y<0&&(n.y+=cleverapps.UI.getSceneOffsetY())),this.scrollToPosition(n,t)},scrollToPosition:function(e,t,s){t?(this.container.setPosition(e),this.calcCurrentPage()):(this.container.stopAllActions(),
s=s||1,this.showPages([e.x-this.container.x,e.y-this.container.y]),this.isMoving=!0,this.container.runAction(new cc.Sequence(new cc.DelayTime(1),new cc.MoveTo(s,e),new cc.CallFunc(function(){this.calcCurrentPage(),this.isMoving=!1}.bind(this)))))},scrollToCurrentPage:function(e,t,s,n){var i=this.getCurrentPagePosition(n);if(e)this.container.setPosition(i),this.autoScroll?this.showCurrentPageOnly():this.calcCurrentPage(),this.onScrolledToCurrentPage();else{t&&(cleverapps.audio.playSound(bundles.main.urls.window_effect),"riddles"===cleverapps.config.name&&(i=cc.p(i.x+(this.isHorizontal()?.167*this.pageWidth:0),i.y+(this.isVertical()?.167*this.pageHeight:0)))),this.container.stopAllActions();var o=.25;s&&(o=cleverapps.styles.PagingScrollView.slowScroll.timeout),this.showPages([this.container.x-i.x,i.y-this.container.y]),this.isMoving=!0,this.container.runAction(new cc.Sequence(new cc.MoveTo(o,i),new cc.CallFunc(function(){this.autoScroll?this.showCurrentPageOnly():this.calcCurrentPage(),
this.onScrolledToCurrentPage(),this.isMoving=!1}.bind(this))))}},calcDeltaPoint:function(e){var t=Date.now();if(0===this.prevPointTime)return this.prevPointTime=t,void(this.prevPoint=e);this.prevPointTime<t-PagingScrollView.SCROLL_SPEED_PERIODS[this.prevPointCalcTimes]&&(this.prevPointTime<t-200&&(this.prevPoint=e),this.deltaPoint=this.isHorizontal()?e.x-this.prevPoint.x:e.y-this.prevPoint.y,this.deltaPoint=this.deltaPoint/(t-this.prevPointTime)*cleverapps.styles.PagingScrollView.touchScrollSpeedLevel,this.prevPointTime=t,this.prevPointCalcTimes<PagingScrollView.SCROLL_SPEED_PERIODS.length-1&&this.prevPointCalcTimes++,this.prevPoint=e)},onTouchEnded:function(e){if(this.touchBeganId!==e.getID())return!1;if(this.isMoving=!1,this.autoScroll){var t=this.getCurrentPagePosition(),s=this.container.getPosition();Math.abs(t.x-s.x)>PagingScrollView.SWIPE_TRESHOLD*this.pageWidth||Math.abs(t.y-s.y)>PagingScrollView.SWIPE_TRESHOLD*this.pageHeight?s.x<t.x||s.y<t.y?this.onNextPageListener(
):this.onPrevPageListener():this.scrollToCurrentPage(!1)}else{if(this.horizontalLookDirection)return this.isMoving=!0,void this.container.runAction(new cc.Sequence(new cc.MoveTo(.5,{x:0,y:this.basePosition.y}).easing(cc.easeOut(3)),new cc.CallFunc(function(){this.isMoving=!1}.bind(this))));this.calcCurrentPage(),this.calcDeltaPoint(this.convertTouchToNodeSpace(e)),this.deltaPoint=Math.max(Math.min(Math.round(this.deltaPoint),5),-5),this.showPages([this.deltaPoint,this.deltaPoint]),this.isMoving=!0;var n=this.container.getPosition(),i=Math.max(.5,Math.sqrt(Math.abs(this.deltaPoint))/2),o=this.getScrollLength();this.direction===PagingScrollView.DIRECTIONS.Horizontal?(n.x=Math.min(this.firstOffset,Math.max(n.x+this.deltaPoint*cleverapps.styles.PagingScrollView.scrollInertia,-o.x)),n.y=0):(n.x=0,n.y=Math.min(this.firstOffset,Math.max(n.y+this.deltaPoint*cleverapps.styles.PagingScrollView.scrollInertia,-o.y))),this.container.runAction(new cc.Sequence(new cc.MoveTo(i,n).easing(cc.easeOut(2))
,new cc.CallFunc(function(){this.calcCurrentPage(),this.isMoving=!1}.bind(this))))}},addPage:function(e){this.container.addChild(e),e.onShow&&e.onShow(),this.isMoving||this.showCurrentPageOnly()}});cleverapps.styles.PagingScrollView={touchScrollSpeedLevel:2,wheelScrollSpeed:700,scrollInertia:200,comingSoonExtraLength:[0,0,0],slowScroll:{timeout:.8}},PagingScrollView.DIRECTIONS={Horizontal:0,Vertical:1},PagingScrollView.MOVE_TRESHOLD=.01,PagingScrollView.SWIPE_TRESHOLD=.05,PagingScrollView.SCROLL_SPEED_PERIODS=[25,50,75,100];var MapScrollView=cc.Node.extend({ctor:function(){this._super(),this.container=new cc.Node,this.addChild(this.container),this.scheduleUpdate(),this.scrollHandler=new cleverapps.UI.MapScrollHandler(this),this.zoom=1,this.updateChildren=cleverapps.throttle(25,this.checkChildrenVisibility.bind(this))},zoomTo:function(t){var s=this.zoom,n=Date.now(),i=(t.zoom-s)/t.timeout;this._zoomInterval=setInterval(this.createListener(function(){var e=Date.now()-n;if(e>=t.timeout
)return this.setZoom(t.zoom),clearInterval(this._zoomInterval),void(t.onComplete&&t.onComplete());this.setZoom(s+i*e,t.centerPoint)}),13)},setZoom:function(e,t){this.scrollHandler.stopAutoScroll();var s=cc.director.getWinSize(),n=this.getContainerSize();e=Math.max(e,cleverapps.styles.WorldMap.zoom.minScale,s.width/n.width,s.height/n.height),e=Math.min(e,1.1);var i=this.zoom;this.zoom=e,this.setScale(this.zoom);var o=this.getContainerPosition();this.setContentSize2(Math.ceil(s.width/this.zoom),Math.ceil(s.height/this.zoom));var a=0,r=0;if(i&&(a=Math.ceil(s.width/this.zoom)-Math.ceil(s.width/i),r=Math.ceil(s.height/this.zoom)-Math.ceil(s.height/i)),t){var l=Math.abs(t.x)+s.width/2-n.width/2;0<l&&(0<t.x?a-=l:a+=l);var c=Math.abs(t.y)+s.height/2-n.height/2;0<c&&(0<t.y?r-=c:r+=c)}this.setContainerPosition(this.availableScrollPosition({x:o.x+a/2,y:o.y+r/2}),this.zoom<i)},setContainerSize:function(e){this.innerWidth=e.width,this.innerHeight=e.height,this.container.setContentSize2(e)},
getContainerSize:function(){return this.container.getContentSize()},getContainerPosition:function(){return this.container.getPosition()},setContainerPosition:function(e,t){(e.x!==this.container.getPositionX()||e.y!==this.container.getPositionY()||t)&&(this.container.setPosition(e),this.updateChildren(),this.scrollHandler.afterContainerMove())},update:function(e){this._super(e),this.scrollHandler.processAutoScroll(e)},onEnter:function(){this._super(),this.addControls()},checkChildrenVisibility:function(){this.container.getChildren().forEach(function(e){!e.visible&&this.isInContainer(e)?e.visible=!0:e.visible&&!this.isInContainer(e)&&(e.visible=!1)},this)},isInContainer:function(e){var t=cleverapps.styles.MapScrollView.visiblePadding,s=this.getContainerPosition(),n=this.getContentSize(),i=cc.rect(-s.x,-s.y,n.width,n.height),o=e.getBoundingBox();o.x-=t.width/2,o.y-=t.height/2,o.width+=t.width/2,o.height+=t.height/2;var a=cc.rectIntersection(i,o);return 0<a.width&&0<a.height},
addControls:function(){cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseScroll:function(e){if(cleverapps.metha.isControlEnabled()){var t=e._scrollY;0!==t&&(t=0<t?.05:-.05,this.setZoom(this.zoom+t))}}.bind(this)},this),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this),onTouchCancelled:this.onTouchEnded.bind(this)},this),cc.sys.isMobile&&cc.sys.capabilities.touches&&this.addPinchZoom()},addPinchZoom:function(){var i={},o=0,a=function(){var e=Object.keys(i).slice(0,2).map(function(e){return i[e]},this),t=e[0],s=e[1];return Math.abs(t.x-s.x)+Math.abs(t.y-s.y)},e=function(e){for(var t=0;t<e.length&&t<2;t++)i[e[t].getID()]=e[t].getLocationInView();1<Object.keys(i).length&&(this.pinchZooming=!0,o=a())}.bind(this),t=function(e){for(var t=0;t<e.length&&t<2;t++)i[e[t].getID()]=e[t].getLocationInView();if(
cleverapps.metha.isControlEnabled()&&1<Object.keys(i).length){var s=a(),n=o-s;3<Math.abs(n)&&(o=s,this.setZoom(this.zoom-85e-5*n))}}.bind(this),s=function(e){for(var t=0;t<e.length;t++)delete i[e[t].getID()];Object.keys(i).length<2&&(this.pinchZooming=!1)}.bind(this);cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:e,onTouchesMoved:t,onTouchesCancelled:s,onTouchesEnded:s},this)},onTouchBegan:function(e){return!!cleverapps.metha.isControlEnabled()&&(this.container.stopAllActions(),this.scrollHandler.handlePress(),cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),this.convertTouchToNodeSpace(e)))},onTouchMoved:function(e){if(!cleverapps.metha.isControlEnabled())return!1;var t=this.convertToNodeSpace(e.getLocation()),s=this.convertToNodeSpace(e.getPreviousLocation()),n=cc.pSub(t,s);this.pinchZooming||(this.scrollHandler.gatherMoveData(n),this.moveContainer(n))},onTouchEnded:function(e){if(!cleverapps.metha.isControlEnabled())return!1;if(
!this.pinchZooming){var t=this.convertToNodeSpace(e.getLocation()),s=this.convertToNodeSpace(e.getPreviousLocation()),n=cc.pSub(t,s);this.scrollHandler.handleRelease(n)}},moveContainer:function(e){var t=cc.pAdd(this.getContainerPosition(),e);this.setContainerPosition(t)}});cleverapps.styles.MapScrollView={visiblePadding:{width:40,height:40}};var PagesViewParallax=function(e,t,s){if(this.parallaxBackgrounds=[],this.direction=s,e&&e.layers){for(var n=cleverapps.UI.getSceneSize(),i="scene"===e.width?n.width:e.width,o="scene"===e.height?n.height:e.height,a=0;a<e.layers[cleverapps.wideMode.mode];a++){var r,l=bundles.main.urls["episodes_bg_jpg_"+a],c=bundles[e.bundle];if(c&&(r=c.jsons["side_animation_"+a]),l||r){var p=new ParallaxBackground(e.speed[a],this.direction,function(e){var t=new cc.Node;if(t.setContentSize2(i,o),t.setAnchorPoint2(),l){var s=new cc.Sprite(l);s.setPositionRound(t.width/2,t.height/2),this.parallaxBackgrounds.push(s),t.addChild(s)}if(r){var n=new cleverapps.Spine(r)
;n.setAnimation(0,"animation",!0),t.addChild(n),n.setPositionRound(t.width/2,t.height/2)}return t}.bind(this));p.setLocalZOrder(e.zIndex[a]),t.addChild(p)}}this.updateScale()}};PagesViewParallax.prototype.updateScale=function(){var s=cc.director.getWinSize();this.parallaxBackgrounds.forEach(function(e){var t=Math.max(s.width/e.width,s.height/e.height);e.setScale(t)})};var ParallaxBackground=cc.Node.extend({ctor:function(e,t,s){this._super(),this.ratio=e,this.direction=t;var n=this.frame1=new ParallaxFrame(s(0),cc.p(0,0),t);this.addChild(n);var i=this.frame2=new ParallaxFrame(s(1),cc.p(n.width-2,n.height-2),t);this.addChild(i),this.scheduleUpdate()},onEnterTransitionDidFinish:function(){this._super(),this.updatePosition()},update:function(e){this._super(e),this.updatePosition()},updatePosition:function(){this.y=-this.parent.y*(1-this.ratio),this.x=-this.parent.x*(1-this.ratio),this.frame1.updatePosition(),this.frame2.updatePosition()}}),ParallaxFrame=cc.Node.extend({ctor:function(e,t,s
){this._super(),this.direction=s,this.offset=t,this.frame=e,this.addChild(e),this.setContentSize2(e.getContentSize()),this.setAnchorPoint2(),this.setPositionRound(this.width/2,this.height/2)},updatePosition:function(){var e=cleverapps.UI.getSceneSize(),t=this.frame,s=t.width,n=t.height;if(this.direction===PagingScrollView.DIRECTIONS.Horizontal){var i=-(this.parent.parent.x+this.parent.x);t.x=Math.floor(i/s)*s+s/2+this.offset.x,t.y=n/2,t.visible=0<=-i+t.x+s/2&&-i+t.x-s/2<e.width}else{var o=-(this.parent.parent.y+this.parent.y);t.x=s/2,t.y=Math.floor(o/n)*n+n/2+this.offset.y,t.visible=0<=-o+t.y+n/2&&-o+t.y-n/2<e.height}}}),Fireworks=cc.Node.extend({ctor:function(e,t){this._super(),this.loop=void 0===e||e,cleverapps.bundleLoader.loadBundle("fireworks",{onSuccess:function(){this.sound=t||bundles.fireworks.urls.fireworks_effect,this.runOnePass()}.bind(this)}),this.setLocalZOrder(100)},runOnePass:function(){var e=cleverapps.styles.Fireworks.delays,
t=cleverapps.styles.SCENE_HEIGHT*cleverapps.styles.SCENE_MAX_WIDTH,s=cleverapps.UI.getSceneSize(),n=s.height*s.width,i=Math.round(n/t*e.length);e=(e=e.sort(function(e,t){return Math.random()-.5})).slice(0,i);var o=cleverapps.wait(e.length,this.runOnePass.bind(this));e.forEach(function(e){this.runAction(new cc.Sequence(new cc.DelayTime(e/1e3),new cc.CallFunc(function(){this.createFirework(),this.loop&&o()}.bind(this))))}.bind(this))},createFirework:function(e){if(!cleverapps.flags.fireworkDisabled){var t=FireworksAnimation.Create();t.setScale(.3*Math.random()+.7),t.setAnimation(0,"animation"+(Math.floor(Math.random()*Fireworks.AMOUNT_ANIMATIONS)+1),!1),t.setCompleteListener(function(){t.runAction(new cc.CallFunc(function(){t.removeFromParent(),cc.pool.putInPool(t)}))});var s=cleverapps.UI.getSceneSize();t.setPositionRound({random:{start:0,end:s.width}},{random:{start:Math.round(s.height/3),end:s.height}}),this.addChild(t),this.runAction(new cc.Sequence(new cc.DelayTime(.5),
new cc.CallFunc(function(){cleverapps.audio.playSound(this.sound)}.bind(this))))}}}),FireworksAnimation=cleverapps.Spine.extend({ctor:function(){this._super(bundles.fireworks.jsons.fireworks_json)}});FireworksAnimation.Create=function(){return cc.pool.hasObject(FireworksAnimation)?cc.pool.getFromPool(FireworksAnimation):new FireworksAnimation},Fireworks.AMOUNT_ANIMATIONS=5,cleverapps.styles.Fireworks={delays:[0,100,200,300,400,500,3e3,3050,3130,3330,3400,4600,6e3,6030,6130,6200,6400,6420,6450]};var FingerView=cc.Node.extend({ctor:function(t){t=t||{},this._super(),this.setLocalZOrder(100),this.setAnchorPoint2(),this.setScale(t.scaleX||1,t.scaleY||1),this.finger=new cc.Sprite(t.image?t.image:bundles.finger.frames.tutorial_hand_png),this.finger.setAnchorPoint(FingerView.ANCHOR_POINT),this.moveSpeed=500,this.actions=[],t.pathColor&&(this.pathNode=new cleverapps.Path(cc.color(t.pathColor.r,t.pathColor.g,t.pathColor.b,FingerView.PATH_BASE_ALPHA)),
this.pathNode.lineWidth=FingerView.PATH_LINE_WIDTH,this.addChild(this.pathNode,-2),this.pathNode.runAction(new cc.RepeatForever(new cc.Sequence(new cc.DelayTime(.02),new cc.CallFunc(this.drawPath.bind(this)))))),this.addChild(this.finger),this.finger.setOpacity(0),t.control&&cleverapps.metha.registerControl(t.control,this.createListener(function(e){this.stopAllActions(),e&&t.showDelay?this.runAction(new cc.Sequence(new cc.DelayTime(t.showDelay),new cc.Show)):this.setVisible(e)}.bind(this)))},standardLoop:function(e){((e=e||{}).delayOnBegin||e.delayOnBeginAndFinish)&&this.delay(e.delay||1),this.fadeIn(e.fadeInPosition||{x:0,y:0},e.fadeInStartPosition),this.addPressLoops(e.loops||2,1===e.loops?.3:.1),this.fadeOut(),e.delayOnBegin&&!e.delayOnBeginAndFinish||this.delay(e.delay||1),e.runOnce?this.runOnce(function(){this.removeFromParent()}.bind(this)):this.run({looped:!0,onIterationFinish:e.onIterationFinish})},addPressLoops:function(e,t){for(var s=0;s<(e||1);s++)this.delay(.1),this.press()
,this.delay(t||.1),this.unPress()},clearActions:function(){this.actions=[]},drawPath:function(){this.pathNode.draw(this.finger.getPosition())},addAction:function(e){this.actions.push(e)},run:function(e){FingerView.currentFinger&&FingerView.currentFinger.removeFromParent(),(FingerView.currentFinger=this).registerCleanupCallback(function(){FingerView.currentFinger===this&&(FingerView.currentFinger=void 0)}.bind(this)),this.currentAction=0,this.runOptions=e||{},this.startCurrentAction()},runOnce:function(e){this.run({looped:!1,onFinish:function(){this.clearActions(),e&&e()}.bind(this)})},startCurrentAction:function(){if(0!==this.actions.length){if(this.currentAction===this.actions.length){if(!this.runOptions.looped)return void(this.runOptions.onFinish&&this.runOptions.onFinish());this.currentAction=0,this.runOptions.onIterationFinish&&this.runOptions.onIterationFinish()}this.actions[this.currentAction](this.nextAction.bind(this))}},nextAction:function(){this.currentAction++,
this.startCurrentAction()},fadeIn:function(t,s){s=s||cc.p(t.x,t.y+cleverapps.styles.FingerView.dy),this.addAction(function(e){this.finger.setOpacity(0),this.finger.setScale(1),this.finger.setRotation(FingerView.FINGER_UNPRESSED_ANGLE),this.pressed=!1,this.finger.setPosition(s),this.finger.runAction(new cc.Sequence(new cc.MoveTo(.3,cc.p(t.x+cleverapps.styles.FingerView.deltaXforCircle,t.y)),new cc.CallFunc(e))),this.finger.runAction(new cc.FadeIn(.3))}.bind(this))},fadeOut:function(){this.addAction(function(e){this.finger.runAction(new cc.MoveTo(.3,cc.p(this.finger.x,this.finger.y-cleverapps.styles.FingerView.dy))),this.finger.runAction(new cc.Sequence(new cc.FadeOut(.3),new cc.CallFunc(e)))}.bind(this))},delay:function(t){this.addAction(function(e){this.finger.runAction(new cc.Sequence(new cc.DelayTime(t),new cc.CallFunc(e)))}.bind(this))},moveTo:function(s){this.addAction(function(e){var t=Math.sqrt((s.x-this.finger.x)*(s.x-this.finger.x)+(s.y-this.finger.y)*(s.y-this.finger.y)
)/this.moveSpeed;this.finger.runAction(new cc.Sequence(new cc.MoveTo(t,s),new cc.CallFunc(function(){this.pressed&&this.pathNode&&this.pathNode.push(s),e()}.bind(this))))}.bind(this))},unPress:function(){this.addAction(function(e){this.pressed=!1,this.finger.runAction(new cc.RotateTo(.2,FingerView.FINGER_UNPRESSED_ANGLE)),this.pathNode&&this.pathNode.animateFadeOut(400),this.finger.runAction(new cc.Sequence(new cc.ScaleTo(.2,1),new cc.CallFunc(e)))}.bind(this))},press:function(n){n=n||{},this.addAction(function(s){this.pressed=!0,this.pathNode&&(this.pathNode.reset(),this.pathNode.push(this.finger.getPosition())),this.finger.runAction(new cc.RotateTo(.2,FingerView.FINGER_PRESSED_ANGLE)),this.finger.runAction(new cc.Sequence(new cc.ScaleTo(.2,.7),new cc.CallFunc(function(){if(n.noCircle)s();else{var e=new cc.Sprite(bundles.finger.frames.tutorial_click_png),t=this.finger.getPosition();e.setPosition(cc.p(t.x-cleverapps.styles.FingerView.deltaXforCircle,t.y)),e.setScale(0),this.addChild(e,
-1),e.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.FadeTo(.3,0),new cc.RemoveSelf)),e.runAction(new cc.ScaleTo(.5,1)),s()}}.bind(this))))}.bind(this))},getFingerPosition:function(){return this.finger.getPosition()}});FingerView.BUNDLES=["finger"],FingerView.ANCHOR_POINT=cc.p(.1,.9),FingerView.PATH_BASE_ALPHA=255,FingerView.PATH_SEGMENTS=100,FingerView.PATH_LINE_WIDTH=15,FingerView.FINGER_PRESSED_ANGLE=0,FingerView.FINGER_UNPRESSED_ANGLE=-7,cleverapps.styles.FingerView={dy:50,deltaXforCircle:0},cleverapps.CountDownView=cc.Node.extend({ctor:function(e,t){var s;this.style=t||{},this.countDown="number"==typeof e?this.createStaticCountdown(e):e,this.style.bar?s=this.createBar():this.style.background_content?s=this.style.background_content:this.style.background_image&&(s=cleverapps.UI.createSprite(this.style.background_image)),this._super(),this.setAnchorPoint(.5,.5),s&&(this.setContentSize2(s.getContentSize()),s.setCascadeOpacityEnabled(!0),s.setCascadeColorEnabled(!0),
s.setPositionRound(this.width/2,this.height/2),this.addChild(s));var n=this.leftTimeText=new cc.Node;n.setCascadeOpacityEnabled(!0),n.setCascadeColorEnabled(!0),this.addChild(n),this.refresh(),s||(this.setContentSize2(this.text.width*this.text.scaleX,this.text.height*this.text.scaleY),this.updatePosition()),this.countDown.onSecond=this.createListener(this.refresh.bind(this))},createBar:function(){var e=this.bar=new ScaledProgressBar(this.style.bar);e.setAnchorPoint2(),e.setDimension(this.style.bar);var t=this.countDown.getTimeLeft();return e.fullValue=this.style.bar.fullValue||t,e.setPercentage(t/e.fullValue*100),e},createStaticCountdown:function(e){return{onSecond:function(){},onFinish:function(){},getTimeLeft:function(){return e},stop:function(){},remove:function(){}}},fitTo:function(e,t){this.text&&this.text.fitTo(e,t)},recreateText:function(e){this.text&&this.text.removeFromParent(!0),cleverapps.UI.ImageFont.IsApplicable(this.style.font,e)?this.text=new cleverapps.UI.ImageFont(e,
this.style.font,{fixedNumberWidth:!0}):this.text=cleverapps.UI.generateOnlyText(e,this.style.font),this.leftTimeText.addChild(this.text)},setString:function(e){this.text?cleverapps.UI.ImageFont.intertypeSetString({textObj:this.text,string:e,font:this.style.font,recreateFunc:this.recreateText.bind(this)}):this.recreateText(e)},updatePosition:function(){var e=this.text instanceof cleverapps.UI.LabelTTF&&this.style.regularFontTimerPosition||this.style.timerPosition||cleverapps.styles.CountDownView.timerPosition;this.leftTimeText.setPositionRound(this.width/2+e.x,this.height/2+e.y)},updateBar:function(){if(this.bar.fullValue>cleverapps.CountDownView.BAR_ANIMATION_LIMIT)this.bar.setPercentage(this.countDown.getTimeLeft()/this.bar.fullValue*100);else{var e=this.countDown.getTimeLeft()/this.bar.fullValue*100-this.bar.getPercentage();this.bar.animatedChange(e,{time:1,easing:!1})}},refresh:function(){var e=cleverapps.intervalToString(this.countDown.getTimeLeft(),this.style.showHours)
;this.setString(e),this.updatePosition(),this.bar&&this.updateBar()},whatToDoOnStop:function(){this.countDown.permanent?this.countDown.onSecond=function(){}:this.countDown.remove()},cleanup:function(){this._super(),this.whatToDoOnStop()}}),cleverapps.CountDown=function(e,t){this.onSecond=function(){},t=t||{},this.onFinish=t.onFinish||function(){},this.onTick=t.onTick||function(){},this.permanent=t.permanent,this.pauseOnGameHide=t.pauseOnGameHide,e<=0?this.onFinish():this.resetTimeLeft(e),cleverapps.CountDownManager.isPaused&&this.pause()},cleverapps.CountDown.prototype.remove=function(){void 0!==this.interval&&cleverapps.CountDownManager.removeListener(this.interval),this.interval=void 0,this.onFinish=function(){},this.onSecond=function(){}},cleverapps.CountDown.prototype.stop=function(){this.remove(),this.timeStop=Date.now()},cleverapps.CountDown.prototype.pause=function(){this.pauseOnGameHide&&!this.isPaused()&&this.isRunning()&&(this.timeFinish-Date.now()<=0||(
this.timePause=Date.now(),cleverapps.CountDownManager.pause(this.interval)))},cleverapps.CountDown.prototype.resume=function(){this.isPaused()&&(this.timeFinish=Date.now()+(this.timeFinish-this.timePause),delete this.timePause,cleverapps.CountDownManager.resume(this.interval))},cleverapps.CountDown.prototype.isPaused=function(){return void 0!==this.timePause},cleverapps.CountDown.prototype.isRunning=function(){return void 0!==this.interval},cleverapps.CountDown.prototype.getTimeLeft=function(){return this.timeFinish?this.timeStop?this.timeFinish-this.timeStop:Math.max(this.timeFinish-Date.now(),0):0},cleverapps.CountDown.prototype.resetTimeLeft=function(e){this.resume(),this.timeStart=Date.now(),this.timeFinish=this.timeStart+e,void 0===this.interval&&(this.interval=cleverapps.CountDownManager.addListener(this))},cleverapps.CountDown.prototype.nextSecond=function(e){var t=this.timeFinish-e;t<0&&(t=0),this.onTick(t),this.onSecond(t),0===t&&(cleverapps.CountDownManager.removeListener(
this.interval),this.interval=void 0,this.onFinish())},cleverapps.LongTimeout=function(e,t,s){t<=cleverapps.LongTimeout.THRESHOLD?this.timeout=setTimeout(e,t):((s=s||{}).onFinish=e,cleverapps.CountDown.call(this,t,s))},cleverapps.LongTimeout.prototype=Object.create(cleverapps.CountDown.prototype),cleverapps.LongTimeout.prototype.constructor=cleverapps.CountDown,cleverapps.LongTimeout.prototype.remove=function(){void 0!==this.timeout?clearTimeout(this.timeout):cleverapps.CountDown.prototype.remove.apply(this,arguments)},cleverapps.CountDownManager={listeners:{},pausedListeners:{},uid:0,interval:!1,isPaused:!1,onTick:function(){var e=Date.now();for(var t in this.listeners)this.listeners[t]&&this.listeners[t].nextSecond(e)},initHideListeners:function(){cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){for(var e in this.isPaused=!1,this.pausedListeners)this.pausedListeners[e].resume()}.bind(this)),cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,function(){for(
var e in this.isPaused=!0,this.listeners)this.listeners[e].pause()}.bind(this))},addListener:function(e){var t=this.uid;return this.listeners[t]=e,this.uid++,!1===this.interval&&(this.interval=setInterval(this.onTick.bind(this),cleverapps.CountDown.INTERVAL),this.initHideListeners()),t},removeListener:function(e){delete this.listeners[e]},pause:function(e){this.listeners[e]&&(this.pausedListeners[e]=this.listeners[e],this.removeListener(e))},resume:function(e){this.pausedListeners[e]&&(this.listeners[e]=this.pausedListeners[e],delete this.pausedListeners[e])}},cleverapps.CountDown.INTERVAL=1e3,cleverapps.LongTimeout.THRESHOLD=cleverapps.CountDown.INTERVAL,cleverapps.CountDownView.BAR_ANIMATION_LIMIT=cleverapps.parseInterval("5 minutes"),cleverapps.styles.CountDownView={timerPosition:{x:0,y:0}};var clearTimeoutSuper=clearTimeout,clearIntervalSuper=clearInterval;clearTimeout=function(e){e instanceof cleverapps.CountDown?e.remove():clearTimeoutSuper(e)},clearInterval=function(e){
e instanceof cleverapps.CountDown?e.remove():clearIntervalSuper(e)};var ExitControlButton={onClicked:function(){cc.director.getRunningScene().closeAction()},isAvailableAtScene:function(){return cleverapps.environment.isMainScene()?!!cleverapps.administrator:!!cleverapps.environment.isEditorScene()||!cleverapps.environment.isBattleScene()&&((!cleverapps.environment.isGameScene()||-1===["riddles","heroes"].indexOf(config.projectName))&&(!cleverapps.environment.isChatScene()&&(!!cleverapps.environment.isAdministratorScene()||levels&&levels.user&&levels.user.checkAvailable({level:1}))))}},FullscreenControlButton={onClicked:function(){FullscreenControlButton.fullscreenElement()?FullscreenControlButton.exitFullscreen():FullscreenControlButton.requestFullscreen()},isAvailableAtScene:function(){if(cleverapps.config.wysiwygMode)return!1;if(cleverapps.config.editorMode&&"merge"!==cleverapps.config.type)return!1;if(cleverapps.environment.isChatScene()||cleverapps.environment.isMiniGameScene()
)return!1;if(cc.sys.isNative||cc.sys.isMobile||cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL||cleverapps.isInstant()||cleverapps.Mobage.isAppropriate()||cleverapps.MobileOK.isAppropriate()||cleverapps.Yandex.isAppropriate())return!1;var e=document.documentElement;return e.requestFullscreen||e.webkitRequestFullscreen||e.msRequestFullscreen||e.mozRequestFullscreen},fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullscreenElement},requestFullscreen:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullscreen&&e.mozRequestFullscreen()},exitFullscreen:function(e){FullscreenControlButton.isAvailableAtScene()&&FullscreenControlButton.fullscreenElement()?(document.exitFullscreen?document.exitFullscreen(
):document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozExitFullscreen&&document.mozExitFullscreen(),e&&setTimeout(e,100)):e&&e()}},MenuControlButton={onClicked:function(){cleverapps.metha.display({focus:"SettingsWindowFromMenu",action:function(e){new SettingsWindow,cleverapps.metha.onceNoWindowsListener=e}})},isAvailableAtScene:function(){return!(cleverapps.environment.isEditorScene()||cleverapps.environment.isChatScene()||cleverapps.environment.isMiniGameScene()||cleverapps.environment.isBattleScene())},needToAddInsidePanel:function(){return cleverapps.environment.isGameScene()&&"undefined"!=typeof ControlsPanel&&ControlsPanel.IS_DOWN()&&-1!==["riddles","heroes"].indexOf(cleverapps.config.name)}},SceneControlButton=cleverapps.UI.Button.extend({ctor:function(e){e=e||{},this.options=e;var t=cleverapps.styles.SceneControlButton;if(this._super({
button_png:e.button_png?e.button_png:bundles.controlbuttons.frames.button_png,button_on_png:e.button_on_png?e.button_on_png:bundles.controlbuttons.frames.button_on_png,onClicked:e.logic.onClicked,content:new cc.Sprite(e.icon),contentPadding:t.contentPadding,mark:e.mark}),e.mark){this.setMarkVisible(!1);var s=function(){this.setMarkVisible(cleverapps.chat.hasUnread&&("merge"===cleverapps.config.type||!Game.currentGame))}.bind(this);cleverapps.chat.load(s,s)}SceneDecors.add(this,cleverapps.skins.getSlot("sceneControlButton",{target:this})),this.baseScale=t.scale[cleverapps.wideMode.mode],this.setScale(this.baseScale)}});cleverapps.styles.SceneControlButton={scale:[1,1,1],contentPadding:0};var SceneControlButtonsView=cc.Node.extend({ctor:function(){this._super();var e=SceneControlButtonsView.controlButtons.filter(function(e){return e.logic.isAvailableAtScene()}).map(function(e){return new SceneControlButton(e)}),t=cleverapps.styles.SceneControlButtonsView,s=new cleverapps.Layout(e,{
direction:cleverapps.UI.HORIZONTAL,margin:t.margin});s.setAnchorPoint2(0,0),this.addChild(s),this.setContentSize(s.getContentSize()),this.setAnchorPoint2(),this.setLocalZOrder(2),this.setPositionRound(t.wideModePosition&&t.wideModePosition[cleverapps.wideMode.mode]||t.position),cleverapps.environment.isWysiwygScene()&&"merge"===cleverapps.config.type&&(this.setScale(.5),this.setPositionRound({x:{align:"right",dx:-20},y:{align:"top",dy:-10}})),cleverapps.UI.makeHideable(this,cleverapps.UI.VERTICAL),cleverapps.metha.registerControl("SceneControlButtonsView",this)}});cleverapps.styles.SceneControlButtonsView={margin:16,position:{x:{align:"right",dx:-20},y:{align:"top",dy:-10}}},SceneControlButtonsView.menuButtonData={logic:MenuControlButton,icon:bundles.controlbuttons.frames.menu_icon_png,mark:!0},SceneControlButtonsView.controlButtons=[{logic:ExitControlButton,icon:bundles.controlbuttons.frames.back_icon_png,button_png:bundles.controlbuttons.frames.back_button_png,
button_on_png:bundles.controlbuttons.frames.back_button_on_png},{logic:FullscreenControlButton,icon:bundles.controlbuttons.frames.fullscreen_icon_png},SceneControlButtonsView.menuButtonData];var MenuBar=function(){this.items=cleverapps.MenuBarItems().map(function(e){return e.modelClass?new e.modelClass(e):new MenuBarItem(e)})};MenuBar.prototype.getSceneItems=function(){var t=[];return this.items.forEach(function(e){this.isAvailableOnScene(e.config)?(e.init(),t.push(e)):e.stop()}.bind(this)),t},MenuBar.prototype.stopItems=function(){this.items.forEach(function(e){e.stop()}.bind(this))},MenuBar.prototype.isAvailableOnScene=function(e){if(e.availableOnScenes)return 0<=e.availableOnScenes.indexOf(cleverapps.environment.scene);if("GoldItem"===e.name){var t=[cleverapps.Environment.SCENE_MAIN,cleverapps.Environment.SCENE_HEROES,cleverapps.Environment.SCENE_DAILY_CUP,cleverapps.Environment.SCENE_METHA,cleverapps.Environment.SCENE_CARD_SKINS,cleverapps.Environment.SCENE_BONUS_WORLD,
cleverapps.Environment.SCENE_SLOT_MACHINE];return"match3"!==cleverapps.config.type&&t.push(cleverapps.Environment.SCENE_GAME),0<=t.indexOf(cleverapps.environment.scene)}if("LivesItem"===e.name){var s=[cleverapps.Environment.SCENE_MAIN,cleverapps.Environment.SCENE_METHA,cleverapps.Environment.SCENE_BONUS_WORLD];return cleverapps.dailyCup.cupWithLives()&&s.push(cleverapps.Environment.SCENE_DAILY_CUP),"merge"===cleverapps.config.type&&s.push(cleverapps.Environment.SCENE_GAME),cleverapps.lives&&0<=s.indexOf(cleverapps.environment.scene)}return"CryptexItem"===e.name?cleverapps.environment.isGameScene()&&Game.currentGame.cryptex:"BonusRoundTimerItem"===e.name&&(cleverapps.environment.isGameScene()&&Game.currentGame.bonusRoundCountDown)},cleverapps.MenuBarItems=function(){var e=[],t="riddles"!==cleverapps.config.name&&"merge"!==cleverapps.config.type;return"merge"===cleverapps.config.type&&e.push({name:"GameLevelItem",target:!0,viewClass:MenuBarGameLevelView,modelClass:GameLevelMenuBarItem,
availableOnScenes:[cleverapps.Environment.SCENE_GAME]}),e.push({name:"GoldItem",lottery:!0,needPayments:!RewardedAdsManager.IsEnabled(),target:!0,plusButton:t,value:function(){return cleverapps.user.gold},updater:function(e){cleverapps.user.onChangeGold=e},attentionUpdater:function(e){cleverapps.adsLimits.onUpdateListeners.MenuBarGoldItem=e},attention:function(){return-1!==ShopProductSource.listProducts(ShopWindow.TABS.HARD_CURRENCY).indexOf("goldForVideo")&&cleverapps.adsLimits.state(AdsLimits.TYPES.GOLD_FOR_VIDEO)===AdsLimits.STATE_READY||(!(-1===ShopProductSource.listProducts(ShopWindow.TABS.HARD_CURRENCY).indexOf("subsMonth")||!cleverapps.subscription||!cleverapps.subscription.isRewardReady())||!!(cleverapps.growthFund&&cleverapps.growthFund.isBought()&&cleverapps.growthFund.isRewardReady()))},icon:bundles.menubar.frames.coin_png,onClickWindow:HardCurrencyShopWindow,deltaSound:bundles.main.urls.coins_effect},{name:"LivesItem",lottery:!0,target:!0,plusButton:t,
attentionUpdater:function(e){Game.currentGame&&Game.currentGame.energyLottery&&(Game.currentGame.energyLottery.onLotteryAttentionChanged=e)},attention:function(){if(Game.currentGame&&Game.currentGame.energyLottery)return Game.currentGame.energyLottery.isReady()},force:Forces.BUY_ENERGY_ICON,viewClass:MenuBarWithTimeoutView,modelClass:LivesMenuBarItem,value:function(){return cleverapps.lives.amount},icon:bundles.menubar.frames.life_png,onClickWindow:LivesShopWindow}),"merge"===cleverapps.config.type&&e.push({name:"CoinsItem",target:!0,plusButton:t,value:function(){return Game.currentGame.coins},updater:function(e){Game.currentGame.onChangeCoinsListener=e},attentionUpdater:function(e){cleverapps.adsLimits.onUpdateListeners.MenuBarCoinsItem=e},attention:function(){return-1!==ShopProductSource.listProducts(ShopWindow.TABS.SOFT_CURRENCY).indexOf("coinsForVideo")&&cleverapps.adsLimits.state(AdsLimits.TYPES.COINS_FOR_VIDEO)===AdsLimits.STATE_READY},onClickWindow:SoftCurrencyShopWindow,
keepOpenWithWindow:"MenuBarGoldItem",icon:bundles.menubar.frames.merge_coin_png,deltaSound:bundles.collectible.urls.coins_fly_finish_effect,availableOnScenes:[cleverapps.Environment.SCENE_GAME]},{name:"WandsItem",target:!0,value:function(){return Game.currentGame.wands},updater:function(e){Game.currentGame.onChangeWandsListener=e},onClickWindow:WandsGuideWindow,icon:bundles.menubar.frames.merge_wand_png,deltaSound:bundles.collectible.urls.wand_fly_finish_effect,availableOnScenes:[cleverapps.Environment.SCENE_GAME]},{name:"WorkersItem",plusButton:t,target:!0,timerTTF:!0,viewClass:MenuBarWithTimeoutView,modelClass:WorkersMenuBarItem,value:function(){return Game.currentGame.workers.countRegularFree()},attention:function(){return Game.currentGame&&Game.currentGame.workers.isAdsWorkerAvailable()&&cleverapps.adsLimits.state(AdsLimits.TYPES.WORKER_FOR_VIDEO)===AdsLimits.STATE_READY},onClickWindow:BonusWorkerWindow,keepOpenWithWindow:"MenuBarGoldItem",
icon:bundles.menubar.frames.merge_worker_png,availableOnScenes:[cleverapps.Environment.SCENE_GAME],sticker:function(){if(Subscription.IsAvailable()&&cleverapps.subscription.isActive())return"premium"}}),cleverapps.metha.getType()===Metha.HOMEFIX&&e.push({name:"MethaStarsItem",plusButton:t,value:function(){return cleverapps.home.stars},updater:function(e){cleverapps.home.onChangeStars=e},onClickWindow:HomefixRulesWindow,icon:bundles.menubar.frames.menubar_metha_stars,availableOnScenes:[cleverapps.Environment.SCENE_METHA,cleverapps.Environment.SCENE_MAIN]}),void 0!==typeof match3&&e.push({name:"ExpItem",plusButton:t,lottery:!0,needPayments:!0,value:function(){return cleverapps.user.exp},updater:function(e){cleverapps.user.onChangeExpListeners.expview=e},onClickWindow:ExpInfoWindow,icon:bundles.menubar.frames.exp_png,availableOnScenes:[cleverapps.Environment.SCENE_HEROES]}),0<=["board","differences"].indexOf(cleverapps.config.type)&&e.push({name:"CryptexItem",centerAlign:!0,helpButton:!0,
force:Forces.CRYPTEX,icon:bundles.menubar.frames.cryptex_png,onClickWindow:CryptexWindow,modelClass:CryptexMenuBarItem}),e.push({name:"BonusRoundTimerItem",centerAlign:!0,tooltip:"BonusRoundCountdownTooltip",animation:bundles.menubar.jsons.bound_round_timer_json,modelClass:BonusRoundMenuBarItem}),e};var MenuBarItem=function(e){this.config=e,this.timerShowHours=!1,this.onRemove=function(){},this.onChangeText=function(){},this.onShowForce=function(){},this.onUpdateSticker=function(){},this.onAttentionOnListener=function(){},this.onAttentionOffListener=function(){}};MenuBarItem.prototype.init=function(){this.stopped=!1,cleverapps.extend(this,this.config),this.changeText=cleverapps.accumulate(100,function(){if(!this.stopped){var e=0;void 0!==this.currentValue&&(e=this.getCurrentValue()-this.currentValue),this.currentValue=this.getCurrentValue(),this.onChangeText(e)}}.bind(this)),this.currentValue=this.getCurrentValue(),this.config.onClickWindow&&(this.canActionNow=function(){return!(
this.config.onClickWindowAvailable&&!this.config.onClickWindowAvailable())&&(!(!this.config.force||!cleverapps.forces.isRunningForce(this.config.force))||!cleverapps.metha.isFocused())}.bind(this),this.action=function(){this.config.force&&cleverapps.forces.isRunningForce(this.config.force)&&cleverapps.forces.closeRunningForce(),cleverapps.metha.display({focus:"MenuBarItemWindow",control:this.keepOpenWithWindow?[this.getControlName(),this.keepOpenWithWindow]:this.getControlName(),action:function(e){new this.config.onClickWindow,cleverapps.metha.onceNoWindowsListener=e}.bind(this)})}.bind(this)),this.config.updater&&(this.config.updater.call(this,this.changeText.bind(this)),this.updater=void 0),this.config.attentionUpdater&&this.config.attentionUpdater.call(this,this.updateAttention.bind(this)),this.updateAttention(),this.customInit()},MenuBarItem.prototype.updateAttention=function(){if(!this.stopped&&this.config.attention){var e=this.config.attention();this.attention!==e&&((
this.attention=e)?this.onAttentionOnListener():this.onAttentionOffListener()),cleverapps.sideBar.refreshAllIcons()}},MenuBarItem.prototype.customInit=function(){},MenuBarItem.prototype.getName=function(){return this.config.name},MenuBarItem.prototype.getControlName=function(){return"MenuBar"+this.getName()},MenuBarItem.prototype.getCurrentValue=function(){return this.config.value?this.config.value():void 0},MenuBarItem.prototype.getViewClass=function(){return this.config.viewClass||MenuBarItemView},MenuBarItem.prototype.getText=function(){if(this.timer)return cleverapps.intervalToString(this.timer.getTimeLeft(),this.timerShowHours);var e=this.getCurrentValue();return void 0!==e?e+"":""},MenuBarItem.prototype.calcTimerTTF=function(){var e=this.timer&&this.timer.getTimeLeft()||0;return e>=cleverapps.ONE_DAY-1e3||!this.timerShowHours&&e>cleverapps.ONE_HOUR-1e3},MenuBarItem.prototype.timerRefresh=function(){this.timerTTF===this.calcTimerTTF()?(this.onChangeText(),
this.onRefreshTimer&&this.onRefreshTimer()):this.updateTimer()},MenuBarItem.prototype.updateTimer=function(){var e=this.timer;this.stopTimer(),this.onChangeTimer&&this.onChangeTimer(!!this.timer==!!e),this.onRefreshTimer&&this.onRefreshTimer()},MenuBarItem.prototype.stop=function(){this.stopped=!0,this.stopTimer()},MenuBarItem.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer=!1)},MenuBarItem.prototype.setTimer=function(e){this.timer=e,this.timer.onSecond=this.timerRefresh.bind(this),this.timerTTF=this.calcTimerTTF()},MenuBarItem.prototype.getSticker=function(){return this.config.sticker&&this.config.sticker()};var LivesMenuBarItem=function(e){MenuBarItem.call(this,e),this.onUpdatePlusButton=function(){},this.onUpdateTotalIcon=function(){},this.onUpdateLotteryIcon=function(){}};LivesMenuBarItem.prototype=Object.create(MenuBarItem.prototype),(LivesMenuBarItem.prototype.constructor=LivesMenuBarItem).prototype.customInit=function(){this.attention=!1,
this.keepOpenWithWindow="merge"===cleverapps.config.type?"MenuBarCoinsItem":"MenuBarGoldItem",cleverapps.lives.onChangeAmountListeners.livesview=this.updateAll.bind(this),cleverapps.lives.onStartRegenerateListener=this.updateAll.bind(this),cleverapps.lives.onBuyUnlimitedLivesListener=this.updateAll.bind(this),cleverapps.lives.onShowIconForceListener=function(e){this.onShowForce(e)}.bind(this),this.updateAll()},LivesMenuBarItem.prototype.getTotal=function(){return cleverapps.Lives.MAX_REGEN_AMOUNT},LivesMenuBarItem.prototype.updateAll=function(){this.changeText(),cleverapps.tempGoods.checkGoodBuyed(cleverapps.TempGoods.UNLIMITED_LIVES)?(this.plusButton=!1,this.totalIcon=bundles.menubar.frames.unlim_png):(this.plusButton=this.config.plusButton,this.totalIcon=!1),this.onUpdatePlusButton(),this.onUpdateTotalIcon(),this.updateTimer(),this.updateAttention()},LivesMenuBarItem.prototype.updateTimer=function(){var e=this.timer;this.stopTimer(),this.lottery=!0,
cleverapps.tempGoods.checkGoodBuyed(cleverapps.TempGoods.UNLIMITED_LIVES)?(this.lottery=!1,this.setTimer(new cleverapps.CountDown(cleverapps.tempGoods.goodLeftTime(cleverapps.TempGoods.UNLIMITED_LIVES),{onFinish:function(){cleverapps.metha.isFocused()||!cleverapps.environment.isMainScene()&&!cleverapps.environment.isDailyCupScene()||cleverapps.tempGoods.displayPromotionOnFinish(),this.updateAll()}.bind(this)}),!1)):cleverapps.lives.amount<cleverapps.Lives.MAX_REGEN_AMOUNT&&0<cleverapps.lives.calcTimeLeft()&&(this.lottery=!1,this.setTimer(new cleverapps.CountDown(cleverapps.lives.calcTimeLeft(),{onFinish:this.updateAll.bind(this)}),!1)),this.onUpdateLotteryIcon(),this.onChangeTimer&&this.onChangeTimer(!!this.timer==!!e),this.onRefreshTimer&&this.timer&&this.onRefreshTimer()};var WorkersMenuBarItem=function(e){MenuBarItem.call(this,e),this.timerShowHours=!0};WorkersMenuBarItem.prototype=Object.create(MenuBarItem.prototype),(WorkersMenuBarItem.prototype.constructor=WorkersMenuBarItem
).prototype.customInit=function(){Game.currentGame.workers.onChangeStatusListener=this.changeText.bind(this),Game.currentGame.workers.onChangeTotalAmount=function(){this.changeText(),this.updateTimer(),this.onUpdateSticker(),this.updateAttention()}.bind(this),cleverapps.adsLimits.onUpdateListeners.MenuBarWorkersItem=this.updateAttention.bind(this),this.updateTimer()},WorkersMenuBarItem.prototype.getTotal=function(){return Game.currentGame.workers.countRegularTotal()},WorkersMenuBarItem.prototype.highlightTotal=function(){return Game.currentGame&&Game.currentGame.workers.isBonusWorkerBuyed()||Subscription.IsAvailable()&&cleverapps.subscription.isActive()},WorkersMenuBarItem.prototype.updateTimer=function(){var e=this.timer;this.stopTimer(),Game.currentGame&&Game.currentGame.workers.isBonusWorkerBuyed()&&this.setTimer(new cleverapps.CountDown(Game.currentGame.workers.bonusWorkerLeftTime(),{onFinish:this.updateTimer.bind(this)}),!0),this.onChangeTimer&&this.onChangeTimer(!!this.timer==!!e
),this.onRefreshTimer&&this.timer&&this.onRefreshTimer()};var CryptexMenuBarItem=function(e){MenuBarItem.call(this,e)};CryptexMenuBarItem.prototype=Object.create(MenuBarItem.prototype),(CryptexMenuBarItem.prototype.constructor=CryptexMenuBarItem).prototype.customInit=function(){this.setTimer(Game.currentGame.cryptex.countdown),Game.currentGame.cryptex.onShowForceListener=function(){this.onShowForce(this.config.force)}.bind(this),Game.currentGame.cryptex.onStop=function(){this.onRemove()}.bind(this)};var BonusRoundMenuBarItem=function(e){MenuBarItem.call(this,e)};BonusRoundMenuBarItem.prototype=Object.create(MenuBarItem.prototype),(BonusRoundMenuBarItem.prototype.constructor=BonusRoundMenuBarItem).prototype.customInit=function(){this.setTimer(Game.currentGame.bonusRoundCountDown),Game.currentGame.onChangeOutcomeListeners.menuBarBonusRoundTimer=function(e){e===GameBase.OUTCOME_LOST&&(setTimeout(function(){cleverapps.metha.hideControlsWhileFocused(this.getControlName())}.bind(this),800),
this.onSetAnimationListener("timeout"))}.bind(this)};var GameLevelMenuBarItem=function(e){MenuBarItem.call(this,e),this.onChangeLevelNo=function(){},this.onChangeExpProgress=function(){}};GameLevelMenuBarItem.prototype=Object.create(MenuBarItem.prototype),(GameLevelMenuBarItem.prototype.constructor=GameLevelMenuBarItem).prototype.customInit=function(){Game.currentGame.gameLevel.onChangeValue=function(){this.onChangeLevelNo()}.bind(this),Game.currentGame.gameLevel.onChangeExp=function(){this.onChangeExpProgress()}.bind(this)},GameLevelMenuBarItem.prototype.debugAction=function(){Game.currentGame.gameLevel.addExp(Game.currentGame.gameLevel.nextLevelThreshold())},GameLevelMenuBarItem.prototype.getCurrentValue=function(){return{level:Game.currentGame.gameLevel.getLevel(),currentExp:cleverapps.user.exp,thresholdExp:Game.currentGame.gameLevel.nextLevelThreshold()}};var MenuBarItemView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),
this.styles=cleverapps.styles.MenuBarItem,this.item=e,this.centerAlign=this.item.centerAlign,e.tooltip&&cleverapps.tooltipManager.create(this,{text:Messages.get(e.tooltip),position:cleverapps.styles.UI.Tooltip.LOCATION.below,control:this.item.getControlName()+"Tooltip",swallowTouches:!1}),this.reset(!0),this.item.onRemove=this.createListener(this.remove.bind(this)),this.item.onChangeText=this.createListener(this.onChangeText.bind(this)),this.item.onShowForce=this.createListener(this.showForce.bind(this)),this.item.onAttentionOnListener=this.createListener(this.turnOnAttention.bind(this)),this.item.onAttentionOffListener=this.createListener(this.turnOffAttention.bind(this)),this.item.onSetAnimationListener=this.createListener(this.setAnimation.bind(this)),this.item.onUpdatePlusButton=this.createListener(this.updatePlusButton.bind(this)),this.item.onUpdateLotteryIcon=this.createListener(this.updateLotteryIcon.bind(this)),this.item.onUpdateSticker=this.createListener(
this.updateSticker.bind(this)),this.item.target&&(cleverapps.styles.MenuBar[this.item.getName()]||(cleverapps.styles.MenuBar[this.item.getName()]={}),this.registerTarget(cleverapps.styles.MenuBar[this.item.getName()]))},updatePlusButton:function(){!!this.item.plusButton!=!!this.plusButton&&(this.item.plusButton?this.addPlusButton():(this.plusButton.removeFromParent(),delete this.plusButton))},updateLotteryIcon:function(){!!this.item.lottery!=!!this.lotteryIcon&&(this.item.lottery?-1!==["board","differences"].indexOf(cleverapps.config.type)&&cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&cleverapps.environment.isGameScene()||Lottery.addIcon(this,cleverapps.styles.MenuBarItem.lotteryIconPosition):(this.lotteryIcon.removeFromParent(),delete this.lotteryIcon))},setAnimation:function(e){this.icon instanceof cleverapps.Spine&&this.icon.setAnimation(0,e,!1)},makeHideable:function(){cleverapps.UI.makeHideable(this,cleverapps.UI.VERTICAL),cleverapps.metha.registerControl(
this.item.getControlName(),this)},reset:function(){this.turnOffAttention(),this.removeAllChildren(),this.addBg(),this.addIcon(),this.bg.setPositionRound(this.bg.width/2+this.iconRealWidth/2,this.styles.bg.height/2),this.setContentSize2(this.bg.width+this.iconRealWidth/2,this.bg.height),this.addPlusButton(),this.addHelpButton(),this.addText(),this.addAction(),SceneDecors.add(this,cleverapps.skins.getSlot("menuBarItem",{target:this})),this.updateLotteryIcon(),this.item.attention&&this.turnOnAttention(),this.updateSticker(!0)},updateToSmallSize:function(e){this.useSmallSize=!0,this.needDelta=e,this.reset(!0)},remove:function(){this.pauseHideHandler(),this.runAction(new cc.Sequence(new cc.ScaleTo(.3,0),new cc.RemoveSelf))},showForce:function(e){this.show(!0),cleverapps.forces.create(this,e)},updateText:function(){this.text.setString(this.item.getText())},onChangeText:function(e){if(this.animateChange(e)){this.text.stopAllActions(),this.text.setScale(this.text.baseScale)
;var t=this.item.deltaSound;!t||cleverapps.config.wysiwygMode&&cleverapps.flags.wysiwyg.customCollectAnimation||cleverapps.audio.playSound(t),this.text.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.4*this.text.baseScale),new cc.CallFunc(function(){cleverapps.UI.animateDelta(e,{x:this.bg.width/2+this.iconRealWidth/2,y:this.styles.deltaAnimation.dy,parent:this,font:cleverapps.styles.FONTS.MENUBAR_TEXT_DELTA||cleverapps.styles.FONTS.MENUBAR_TEXT}),this.updateText(),this.text.setPositionRound(this.getTextPosition())}.bind(this)),new cc.ScaleTo(.2,this.text.baseScale),new cc.CallFunc(function(){this.textFitTo()}.bind(this)))),this.icon&&(this.icon.stopAllActions(),this.icon.setScale(this.icon.baseScale),this.icon.runAction(new cc.Sequence(new cc.ScaleTo(.15,1.2*this.icon.baseScale).easing(cc.easeIn(1)),new cc.ScaleTo(.15,this.icon.baseScale).easing(cc.easeOut(1)))))}else this.updateText(),this.textFitTo(),this.text.setPositionRound(this.getTextPosition())},animateChange:function(e){
return e&&!this.item.timer},addIcon:function(){this.item.animation?(this.icon=new cleverapps.Spine(this.item.animation),this.icon.setAnimation(0,"idle",!0)):this.icon=new cc.Sprite(this.item.icon),this.icon.baseScale=this.icon.getScale(),this.iconRealWidth=this.styles.icon.fullInsideBg?0:this.icon.getBoundingBox().width,this.addChild(this.icon),this.icon.setPositionRound({x:this.iconRealWidth/2+this.styles.icon.x,y:this.styles.bg.height/2+this.styles.icon.y})},addBg:function(){this.bg=cleverapps.UI.createScale9Sprite(bundles.menubar.frames.menubar_bg_png,cleverapps.UI.Scale9Rect.TwoPixelXY);var e=this.styles.bg.width;this.useSmallSize&&(e=this.needDelta>this.styles.bg.width-this.styles.bg.minWidth?this.styles.bg.minWidth:this.styles.bg.width-this.needDelta),this.bg.setContentSize2(e,this.styles.bg.height),this.addChild(this.bg)},textFitTo:function(){var e=this.width-this.styles.iconBlockWidth;(this.helpButton||this.plusButtonOnBg)&&(e-=this.styles.plusBlockWidth),this.text.fitTo(e),
this.text.baseScale=this.text.scale},getTextPosition:function(){var e=0;this.helpButton||this.plusButtonOnBg||(e=cleverapps.styles.MenuBarItem.noPlusDx);var t=cleverapps.styles.MenuBarItem.textOffset.y;return this.separateText?this.separateText instanceof cleverapps.UI.ImageFont&&(t=cleverapps.styles.MenuBarItem.textOffset.imageFont||0):this.text instanceof cleverapps.UI.ImageFont&&(t=cleverapps.styles.MenuBarItem.textOffset.imageFont||0),cc.p(this.width/2+this.iconRealWidth/4+cleverapps.styles.MenuBarItem.textOffset.x+e,this.height/2+t)},addText:function(){var e=this.item.getText();if(cleverapps.UI.ImageFont.IsApplicable(cleverapps.styles.FONTS.MENUBAR_TEXT,e))var t=cleverapps.UI.generateImageText(e,cleverapps.styles.FONTS.MENUBAR_TEXT);else t=cleverapps.UI.generateOnlyText(e,cleverapps.styles.FONTS.MENUBAR_TEXT);this.addChild(t),(this.text=t).baseScale=t.scale,t.setPositionRound(this.getTextPosition()),this.textFitTo()},addAction:function(){var e=!0;this.item.action||(e=!1),
this.item.needPayments&&cleverapps.flags.nopayments&&(e=!1),cleverapps.UI.onClick(this,function(){e&&this.item.action()}.bind(this),{useInteractiveScale:e,filter:this.item.canActionNow}),e&&cleverapps.UI.applyHover(this,{filter:this.item.canActionNow})},addPlusButton:function(){if(this.item.plusButton){if(!this.item.needPayments||!cleverapps.flags.nopayments){var e=this.plusButton=new cleverapps.UI.Button({button_png:bundles.menubar.frames.plus_button_png,button_on_png:bundles.menubar.frames.plus_button_on_png,onClicked:this.item.action,filter:this.item.canActionNow});e.forceTarget=!0,this.addChild(e);var t=cc.p(this.icon.x+this.iconRealWidth/2,0);this.styles.plusButton&&this.styles.plusButton.position&&(this.plusButtonOnBg=!0,t=this.styles.plusButton.position),e.setPositionRound(t)}}else this.plusButtonOnBg=!1},addHelpButton:function(){if(this.item.helpButton){var e=this.helpButton=new cleverapps.UI.Button({button_png:bundles.menubar.frames.menubar_help_button_png,
button_on_png:bundles.menubar.frames.menubar_help_button_on_png,onClicked:this.item.action});this.addChild(e),e.setPositionRound(this.styles.helpButton.position)}},turnOnAttention:function(){if(!this.attention){var e=cleverapps.styles.MenuBarItem.attention,t=this.attention=new cc.Sprite(bundles.menubar.frames.attention_png);t.setLocalZOrder(2),t.setPositionRound(this.icon.x+e.x,this.icon.y+e.y),t.setScale(e.scale),this.addChild(t),t.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.3,1.1*t.scale),new cc.ScaleTo(.3,t.scale))))}},turnOffAttention:function(){this.attention&&(this.attention.removeFromParent(),delete this.attention)},updateSticker:function(e){var t=this.item.getSticker();if(!this.sticker!=!t)switch(this.sticker&&(e?this.sticker.removeFromParent():this.sticker.runAction(new cc.Sequence(new cc.FadeOut(.6),new cc.RemoveSelf)),this.sticker=void 0),t){case"premium":this.showPremiumSticker(e)}else this.sticker&&(this.sticker.runAction(new cc.Sequence(new cc.ScaleTo(
.2,1.4*this.sticker.scale),new cc.ScaleTo(.2,this.sticker.scale))),this.text.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.4*this.text.baseScale),new cc.ScaleTo(.2,this.text.baseScale))))},showPremiumSticker:function(e){var t=cleverapps.styles.MenuBarItem.premiumSticker,s=this.sticker=new cc.Sprite(bundles.menubar.frames.premium_sticker);s.setAnchorPoint2(),s.setPositionRound(t),this.addChild(s);var n=cleverapps.UI.generateOnlyText("messages:WorkersMenuBarItem.subscription",cleverapps.styles.FONTS.MENUBAR_TIMER_TEXT);n.setAnchorPoint2(),n.setPositionRound(t.text),n.fitTo(t.text.width),n.setRotation(t.text.rotation),s.addChild(n),s.setCascadeOpacityEnabled(!0),e||(s.setOpacity(0),s.runAction(new cc.FadeIn(.6)))}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{MENUBAR_TEXT:{name:"default",size:40}}),cleverapps.styles.MenuBarItem={textOffset:{x:0,y:0},noPlusDx:14,bg:{width:200,minWidth:170,height:50},iconBlockWidth:50,plusBlockWidth:50,deltaAnimation:{dy:-5},icon:{fullInsideBg:!1,
x:-10,y:0},iconText:{position:{x:{align:"center",dx:0},y:{align:"center",dy:0}}},plusButton:{position:{x:{align:"right",dx:-5},y:{align:"center",dy:0}}},helpButton:{position:{x:{align:"right",dx:-5},y:{align:"center",dy:0}}},totalIcon:{x:{align:"center"},y:{align:"center"}},attention:{x:25,y:-42,scale:.9},premiumSticker:{x:{align:"center",dx:45},y:{align:"center",dy:58},text:{x:{align:"center",dx:-29},y:{align:"center",dy:8},width:160,rotation:-7}}};var MenuBarWithTimeoutView=MenuBarItemView.extend({ctor:function(e){this._super(e),this.item.onChangeTimer=this.createListener(this.onChangeTimer.bind(this)),this.item.onRefreshTimer=this.createListener(this.onRefreshTimer.bind(this)),this.item.onUpdateTotalIcon=this.createListener(this.updateTotalIcon.bind(this))},onChangeTimer:function(e){this.timer&&!!this.timer instanceof cleverapps.UI.ImageFont^!!this.item.timerTTF&&this.removeTimer(e),this.item.timer?this.createTimer(e):this.removeTimer(e)},updateToSmallSize:function(){},
reset:function(e){this._super(e),this.updateTotalIcon(),this.timerBlock=void 0,this.onChangeTimer(!0)},animateChange:function(e){return e},createTimer:function(e){if(!this.timerBlock){this.timerBlock=cleverapps.UI.createScale9Sprite(bundles.menubar.frames.bar_timer_png),this.timerBlock.setCascadeOpacityEnabled(!0);var t=this.bg.width-2*this.styles.timer.padding.x;if(this.timerBlock.setContentSize2(t,this.styles.timer.height),this.timerBlock.setPositionRound(this.styles.timer.position),this.addChild(this.timerBlock,-1),bundles.menubar.frames.small_timer_icon_png){var s=new cc.Sprite(bundles.menubar.frames.small_timer_icon_png);s.setPositionRound(this.styles.timer.icon),this.timerBlock.addChild(s)}this.item.timerTTF?this.timer=cleverapps.UI.generateOnlyText("",cleverapps.styles.FONTS.MENUBAR_TIMER_TEXT):this.timer=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.MENUBAR_TIMER_TEXT,{},{fixedNumberWidth:!0}),this.timerBlock.addChild(this.timer),e?this.onRefreshTimer():(
this.timerBlock.setOpacity(0),this.timerBlock.runAction(new cc.Sequence(new cc.FadeIn(.3),new cc.CallFunc(this.onRefreshTimer.bind(this)))))}},removeTimer:function(e){this.timerBlock&&(e?this.timerBlock.removeFromParent():this.timerBlock.runAction(new cc.Sequence(new cc.FadeOut(.3),new cc.RemoveSelf)),this.timerBlock=void 0)},onRefreshTimer:function(){this.timerBlock&&(this.timer.setString(this.item.getText()),this.timer.setFont(cleverapps.styles.FONTS.MENUBAR_TIMER_TEXT),this.timer.fitTo(cleverapps.styles.MenuBarItem.timer.text.width),this.item.timerTTF?this.timer.setPositionRound(this.styles.timer.ttfText):this.timer.setPositionRound(this.styles.timer.text))},updateTotalIcon:function(){this.totalIcon&&this.totalIcon.removeFromParent(),this.item.totalIcon&&(this.totalIcon=new cc.Sprite(this.item.totalIcon),this.addChild(this.totalIcon),this.totalIcon.setPositionRound(this.styles.totalIcon))},updateText:function(){if(this.text.removeAllChildren(),!this.item.totalIcon){
var e=this.item.getCurrentValue(),t=this.item.getTotal(),s=cleverapps.UI.generateImageText(e,cleverapps.styles.FONTS.MENUBAR_TEXT);this.styles.noColoredText||(t<=e?s.setColor(cleverapps.styles.COLORS.GREEN):e<.1*t&&s.setColor(cleverapps.styles.COLORS.COLOR_RED));var n=this.separateText=cleverapps.UI.generateImageText("/",cleverapps.styles.FONTS.MENUBAR_TEXT),i=cleverapps.UI.generateImageText(t,cleverapps.styles.FONTS.MENUBAR_TEXT);this.item.highlightTotal&&this.item.highlightTotal()&&i.setColor(cleverapps.styles.COLORS.COLOR_BONUS);var o=new cleverapps.Layout([s,n,i],{direction:cleverapps.UI.HORIZONTAL});this.text.setContentSize(o.getContentSize()),o.setPositionRound(this.text.width/2,this.text.height/2),this.text.addChild(o)}},textFitTo:function(){var e=this.width-this.styles.iconBlockWidth;(this.helpButton||this.plusButtonOnBg)&&(e-=this.styles.plusBlockWidth),this.text.width>e?(this.text.baseScale=e/this.text.width,this.text.setScale(this.text.baseScale)):this.text.baseScale=1},
addText:function(){var e=new cc.Node;e.setAnchorPoint2(),this.addChild(e),this.text=e,this.updateText(),e.setPositionRound(this.getTextPosition()),this.textFitTo()}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{MENUBAR_TIMER_TEXT:{name:"default",size:32,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.MenuBarItem=cleverapps.overrideStyles(cleverapps.styles.MenuBarItem,{timer:{icon:{x:{align:"left",dx:31},y:{align:"center",dy:1}},text:{x:{align:"left",dx:73},y:{align:"center",dy:4},width:125},ttfText:{x:{align:"left",dx:68},y:{align:"center",dy:0}},position:{x:{align:"center",dx:16},y:{align:"bottom",dy:-49}},padding:{x:40},height:59}});var MenuBarGameLevelView=MenuBarItemView.extend({ctor:function(e){this._super(e),e.onChangeLevelNo=this.createListener(this.onChangeLevelNo.bind(this)),e.onChangeExpProgress=this.createListener(this.onChangeExpProgress.bind(this))},reset:function(){
var e=cleverapps.styles.MenuBarGameLevelView;this.removeAllChildren(),this.setContentSize2(e.width,e.height);var t=this.level=this.createLevel(),s=this.progress=this.createProgress(t);this.addChild(s),this.addChild(t),this.onChangeLevelNo(),this.updateProgress(!0),this.addAction()},updateToSmallSize:function(){},createLevel:function(){var e=cleverapps.styles.MenuBarGameLevelView,t=new cc.Scale9Sprite(bundles.menubar.frames.menubar_round_bg_png);t.setAnchorPoint2(),t.setPositionRound(t.width/2+e.level.offset.x,this.height/2+e.level.offset.y);var s=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.MENUBAR_LEVEL_TEXT);s.setAnchorPoint2(),s.setPositionRound(t.width/2+e.value.offset.x,t.height/2+e.value.offset.y);var n=this.crown=new cleverapps.Spine(bundles.menubar.jsons.crown_json);return n.setAnchorPoint2(),n.setPositionRound(e.crown.offset.x,t.height+e.crown.offset.y),n.setAnimation(0,"idle",!0),t.value=s,t.crown=n,t.addChild(s),t.addChild(n),t},createProgress:function(e){
var t=cleverapps.styles.MenuBarGameLevelView,s=new ScaledProgressBar({background:bundles.menubar.frames.menubar_progress_bg_png||bundles.menubar.frames.menubar_bg_png,progress:bundles.menubar.frames.menubar_progress_png,padding:t.bar.padding});s.setAnchorPoint(0,.5),s.setDimension(this.width-e.width-t.margin,cleverapps.styles.MenuBarItem.bg.height),s.setPositionRound(e.width+t.margin,this.height/2);var n=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.MENUBAR_PROGRESS_TEXT);return n.setAnchorPoint2(),n.setPositionRound(s.width/2+t.exp.offset.x,s.height/2+t.exp.offset.y),s.exp=n,s.addChild(n),s},updateProgress:function(e){var t=cleverapps.styles.MenuBarGameLevelView,s=this.progress,n=this.item.getCurrentValue(),i=n.currentExp,o=n.thresholdExp,a=i/o*100;e?s.setPercentage(a):s.animatedChange(a-s.getPercentage()),s.exp.setString(i+"/"+o),s.exp.setScale(1),s.exp.fitTo(s.width-t.exp.padding.x,s.height-t.exp.padding.y),s.exp.baseScale=s.exp.scale},onChangeExpProgress:function(){
this.updateProgress(),this.progress.exp.stopAllActions(),this.progress.exp.runAction(new cc.Sequence(new cc.PlaySound(bundles.collectible.urls.exp_fly_finish_effect),new cc.ScaleTo(.2,1.4*this.progress.exp.baseScale),new cc.ScaleTo(.2,this.progress.exp.baseScale))),this.animateCrowns()},onChangeLevelNo:function(){var e=cleverapps.styles.MenuBarGameLevelView,t=this.level;t.value.setString(this.item.getCurrentValue().level),t.value.fitTo(t.width-2*e.value.padding.x,t.height-2*e.value.padding.y),t.value.baseScale=t.value.scale},animateCrowns:function(){this.crown.setAnimationAndIdleAfter("animation","idle")},addAction:function(){cleverapps.config.debugMode&&cleverapps.UI.onClick(this,this.item.debugAction)}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{MENUBAR_LEVEL_TEXT:{name:"default",size:86},MENUBAR_PROGRESS_TEXT:{name:"default",size:52}}),cleverapps.styles.MenuBarGameLevelView={width:455,height:65,margin:-52,level:{offset:{x:23,y:0}},bar:{padding:{left:11,right:11,top:10,
bottom:12},offset:{x:-1,y:3}},exp:{offset:{x:16,y:3},padding:{x:130,y:13}},value:{padding:{x:20,y:13},offset:{x:1,y:10}},crown:{offset:{x:9,y:-13}}};var MenuBarView=cc.Node.extend({ctor:function(e,t){this._super();var s=cleverapps.styles.MenuBar,n=cleverapps.menuBar.getSceneItems().map(function(e){return new(e.getViewClass())(e)}),i=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:s.margin,padding:s.padding});if(i.width<e&&2===n.length&&n[1].centerAlign){var o=cleverapps.UI.getSceneSize();n[1].x<o.width/2&&o.width/2+n[1].width/2+s.padding.x<=e&&(n[1].x=o.width/2,i.width=n[1].x+n[1].width/2+s.padding.x)}if(i.width>e){var a=(i.width-e-(n.length-1)*(s.margin-s.smallMargin))/n.length;n.forEach(function(e){e.updateToSmallSize(a)}),i.options={direction:cleverapps.UI.HORIZONTAL,margin:s.smallMargin,padding:s.padding},i.reshape()}i.width>e&&i.setScale(e/i.width),this.setLocalZOrder(2),this.addChild(i),this.setContentSize(i.width*i.scale,i.height*i.scale),i.setPositionRound(
this.width/2,this.height/2);var r=s.wideModePosition&&s.wideModePosition[cleverapps.wideMode.mode]||s.position;this.setPositionRound(r),this.deltaY=cleverapps.UI.getSceneOffsetY()-s.minOffest,this.deltaY<0&&(this.deltaY=0),this.alignment=cleverapps.clone(this.alignment,!0),this.alignment.y.dy+=this.deltaY,t.addChild(this,MenuBarView.ZORDER),n.forEach(function(e){e.makeHideable()})}});MenuBarView.ZORDER=BaseWindow.WINDOWS_ZORDER+1,cleverapps.styles.MenuBar={minOffest:50,margin:16,smallMargin:12,padding:{x:20,y:0},position:{x:{align:"left",dx:0},y:{align:"top",dy:-15}}},cleverapps.UI.ImageFont=cc.Node.extend({ctor:function(e,t,s){this._super(),this.params=s||{},this.setFont(t),this.setAnchorPoint(.5,.5),this.setCascadeOpacityEnabled(!0),this.setString(e),this.setCascadeColorEnabled(!0)},setHorizontalAlignment:function(){},setVerticalAlignment:function(){},setDimensions:function(){},fitTo:function(e,t){for(var s=0;s<10;){var n=this.width*this.scale,i=this.height*this.scale,
o=this.canAttachLastLine();if(!(e&&e<n||t&&t<i||o))break;s++;var a=.9;if(e&&e<n&&a<e/n&&(a=e/n),t&&t<i&&a<t/i&&(a=t/i),1<=a&&o&&(a=.9),this.setFontSize(Math.floor(this.getFontSize()*a)),this.getFontSize()<cleverapps.UI.ImageFont.getFontSizeThreshold())return void this.setFontSize(cleverapps.UI.ImageFont.getFontSizeThreshold())}},canAttachLastLine:function(){return!1},setFont:function(e){for(var t,s=e.name?e.name:"default",n=0;n<cleverapps.config.fonts.length&&!(cleverapps.config.fonts[n].name===s&&(t=cleverapps.config.fonts[n]).size*cleverapps.UI.ImageFont.MAX_MAGNITUDE>=e.size);n++);if(void 0===t)throw console.log(e),"No image font";if(this.font=e,this.baseFont=t,this.bundle=t.bundle,this.prefix=t.name+t.originalSize+"pt_",this.setScale(e.size/t.size),!this.baseFont.zeroLetterWidth){var i=new cc.Sprite(bundles[this.bundle].frames[this.prefix+"0"]).width;this.baseFont.zeroLetterWidth=2*Math.round(i/2)}this.setColor(e.color||cleverapps.styles.COLORS.WHITE);var o=this.getString()
;o&&this.setString(o)},setString:function(e){if(!this.stopListeners){e=""+e,this.string=e,this.removeAllChildren(!0);var t=e?(""+e).split(""):[],s=cc.size();t.forEach(function(e){this.createLetter(e,s)},this),this.setContentSize2(s),this.setAnchorPoint2(this.anchorX,this.anchorY)}},createLetter:function(e,t){cleverapps.UI.ImageFont.LETTERS_MAP[e]&&(e=cleverapps.UI.ImageFont.LETTERS_MAP[e]);var s=bundles[this.bundle].frames[this.prefix+e];s||(console.log(this),console.log("No image for letter: ",e),cleverapps.throwAsync("No image for letter: "+e+", bundle - "+this.bundle+", prefix - "+this.prefix));var n=new cc.Sprite(s),i=new cc.Node;i.setCascadeColorEnabled(!0),i.setCascadeOpacityEnabled(!0),i.setAnchorPoint2();var o=2*Math.round(n.width/2),a=2*Math.round(n.height/2);this.params.fixedNumberWidth&&"0"<=e&&e<="9"&&(o=this.baseFont.zeroLetterWidth),i.setContentSize2(o,a),i.addChild(n),n.setPositionRound(i.width/2,i.height/2),t.height<a&&(t.height=a),i.setPositionRound(t.width+o/2,a/2),
t.width+=o,this.addChild(i)},getString:function(){return this.string},getFontSize:function(){return Math.floor(this.baseFont.size*this.scale)},setFontSize:function(e){this.setScale(e/this.baseFont.size)}}),cleverapps.UI.ImageFont.MAX_MAGNITUDE=1.25,cleverapps.UI.ImageFont.LETTERS_MAP={"/":"slash","+":"plus","-":"minus",":":"colon","#":"sharp",".":"point"," ":"space","[":"left_square_bracket","]":"right_square_bracket","*":"asterisk"},cleverapps.UI.ImageFont.getFontSizeThreshold=function(){var e=8;return cc.sys.isMobile||(e=5),e*resolutionScale},cleverapps.UI.ImageFont.IsApplicable=function(e,t){if(!t)return!0;for(var s,n,i=e.name?e.name:"default",o=0;o<cleverapps.config.fonts.length;o++){var a=cleverapps.config.fonts[o];a.name===i&&(s=a.bundle,n=a.name+a.originalSize+"pt_")}var r=bundles[s].injectTo||[s];if(0===cleverapps.bundleLoader.countLoaded(r))return!1;for(o=0;o<t.length;o++){var l=cleverapps.UI.ImageFont.LETTERS_MAP[t[o]]||t[o];if(!bundles[s].frames[n+l])return!1}return!0},
cleverapps.UI.ImageFont.intertypeSetString=function(e){e.textObj instanceof cleverapps.UI.ImageFont===cleverapps.UI.ImageFont.IsApplicable(e.font,e.string)?e.textObj.setString(e.string):e.recreateFunc(e.string)};var ScaledProgressBar=cc.Node.extend({ctor:function(e){this._super(),("string"==typeof e||e instanceof cc.SpriteFrame)&&(e={progress:e}),this.progressFrames=this.setProgressFrames(e);var t=e.padding||{};this.padding={left:t.left||t.x||0,right:t.right||t.x||0,top:t.top||t.y||0,bottom:t.bottom||t.y||0},this.layout=e.layout||ScaledProgressBar.HORIZONTAL,this.sizeDirty=!0,e.background&&(this.background=cleverapps.UI.createScale9Sprite(e.background),this.background.setAnchorPoint(0,0),this.addChild(this.background),this.applyCapInsets(this.background)),this.progress=cleverapps.UI.createScale9Sprite(e.progress),this.progress.setAnchorPoint(0,0),this.addChild(this.progress),this.applyCapInsets(this.progress);var s=e.background?cc.size(this.background.width,this.background.height
):cc.size(this.progress.width,this.progress.height);this.percentage=0,this.setContentSize2(s.width,s.height),e.barText&&this.createBarText(e.barText),this.onChange()},applyCapInsets:function(e){this.layout===ScaledProgressBar.HORIZONTAL?e.setCapInsets(cc.rect(e.width/2-1,e.height/3,2,e.height/3)):e.setCapInsets(cc.rect(e.width/3,e.height/2-1,e.width/3,2))},setProgressFrames:function(e){return!0===e.progressFrames?this.getDefaultProgressFrames():(e.progressFrames,e.progressFrames)},getDefaultProgressFrames:function(){if("merge"===cleverapps.config.type)return{0:bundles.discreteprogress.frames.progress_bar_red,30:bundles.discreteprogress.frames.progress_bar_orange,70:bundles.discreteprogress.frames.progress_bar_blue}},onChange:function(){this.background&&this.sizeDirty&&this.background.setContentSize2(this.width,this.height),this.barText&&this.sizeDirty&&this.barText.setPositionRound(this.width/2+this.barText.offset.x,this.height/2+this.barText.offset.y),this.updateProgressFrame()
;var e=this.padding,t=cc.size(this.width-e.left-e.right,this.height-e.top-e.bottom),s=cc.size(this.progress._spriteFrame.getOriginalSize());this.layout===ScaledProgressBar.HORIZONTAL?t.width=this.percentage?Math.max(s.width,t.width*this.percentage/100):0:t.height=this.percentage?Math.max(s.height,t.height*this.percentage/100):0,this.progress.setContentSize(t.width,t.height),this.progress.setPositionRound(e.left,e.bottom),this.sizeDirty=!1},animatedChange:function(e,t){if(0!==e){t=t||{},this.stopAnimatedChangeData(),this.updateProgressFrame();var s=new ScaledProgressBarProgressTo(t.time||.8,this.percentage+e);!1!==t.easing&&s.easing(t.easing||cc.easeCubicActionOut()),t.callback&&(s=new cc.Sequence(s,new cc.CallFunc(t.callback))),this.animatedChangeAction=this.runAction(s)}},updateProgressFrame:function(){if(this.progressFrames){var e;for(var t in this.progressFrames)this.percentage>=t&&(e=this.progressFrames[t]);e&&this.currentFrame!==e&&(this.currentFrame=e,
this.progress.setSpriteFrame(new cc.Sprite(e).getSpriteFrame()))}},setDimension:function(e,t){void 0===t&&(t=e.height,e=e.width),this.setContentSize2(e,t),this.sizeDirty=!0,this.onChange()},setLayout:function(e){this.layout=e,this.onChange()},stopAnimatedChangeData:function(){this.animatedChangeAction&&!this.animatedChangeAction.isDone()&&(this.stopAction(this.animatedChangeAction),delete this.animatedChangeAction)},setPercentage:function(e){this.stopAnimatedChangeData(),e=Math.max(Math.min(e,100),0),this.percentage!==e&&(this.percentage=e,this.onChange())},getPercentage:function(){return this.percentage},createBarText:function(e){var t=e.font||cleverapps.styles.FONTS.SMALL_WHITE_TEXT;this.barText=cleverapps.UI.generateImageText(e.text||"",t),this.barText.fontUsed=t,this.barText.offset={x:e.dx||0,y:e.dy||0},this.addChild(this.barText)},updateBarText:function(t){if(this.barText){var s=this.barText.fontUsed;cleverapps.UI.ImageFont.intertypeSetString({textObj:this.barText,string:t,font:s,
recreateFunc:function(){if(cleverapps.UI.ImageFont.IsApplicable(s,t))var e=cleverapps.UI.generateImageText(t,s);else e=cleverapps.UI.generateOnlyText(t,s);this.addChild(e),e.setPositionRound(this.barText.getPosition()),e.fontUsed=s,this.barText.runAction(new cc.RemoveSelf),this.barText=e}.bind(this)})}}});if(!cleverapps.isPixiJs())var ScaledProgressBarProgressTo=cc.ProgressTo.extend({update:function(e){this.target instanceof ScaledProgressBar&&(e=this._computeEaseTime(e),this.target.percentage=Math.max(Math.min(this._from+(this._to-this._from)*e,100),0),this.target.onChange())}});ScaledProgressBar.HORIZONTAL=0,ScaledProgressBar.VERTICAL=1,cleverapps.Chest=function(e){this.locked=!1,this.onceUnlocked=function(){},this.changeLockedListener=function(){},this.storage=e.storage,this.serverTaskName=e.serverTaskName,e.isNewUser?(this.initializeForNewUser(),this.save()):this.load()},cleverapps.Chest.prototype._receiveReward=function(e,t){cleverapps.audio.playSound(
bundles.main.urls.shop_buy_effect);var s=0;if(e.gold&&(cleverapps.user.setGold(cleverapps.user.gold+e.gold),t||(s=e.gold)),e.exp&&levels.user.expAvailable()&&cleverapps.user.setExp(cleverapps.user.exp+e.exp),e.boosters)for(var n in e.boosters)0<e.boosters[n]&&(cleverapps.boostersCounter.add(n,e.boosters[n]),t||(s+=cleverapps.config.prices.boosters[n][1]*(e.boosters[n]||1)));if(e.unlimitedLives&&(cleverapps.tempGoods.buyGood(cleverapps.TempGoods.UNLIMITED_LIVES,cleverapps.parseInterval(e.unlimitedLives.interval)),cleverapps.lives.onBuyUnlimitedLivesListener()),e.stars&&cleverapps.starChest.addStars(e.stars),e.gun&&cleverapps.gun.addAmount(e.gun),cleverapps.lives&&(e.lives||e.energy)&&cleverapps.lives.setAmount(cleverapps.lives.amount+(e.lives||e.energy)),e.herolevels&&Array.isArray(e.herolevels)&&0<e.herolevels.length)for(var i=0;i<e.herolevels.length;i++)match3.heroes.setLevel(e.herolevels[i][0],Math.max(0,Math.min(Heroes.HEROES_MAX_LEVEL,e.herolevels[i][1])));if(e.wardrobe){
var o=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_WARDROBE);if(o){var a=o.logic.getProgressForStage(e.wardrobe);o.result<a&&(o.update(a-o.result),o.logic.stageToShow=e.wardrobe)}}e.growthFund&&cleverapps.growthFund&&!cleverapps.growthFund.isBought()&&cleverapps.growthFund.afterBuy(),!t&&s&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.REWARD_RECEIVED,{amount:s})},cleverapps.Chest.prototype.fromJSON=function(e){this.locked=e},cleverapps.Chest.prototype.toJSON=function(){return this.locked},cleverapps.Chest.prototype.load=function(){var e=cleverapps.DataLoader.load(this.storage);void 0===e?(this.initializeForNewUser(),this.save()):this.fromJSON(e)},cleverapps.Chest.prototype.save=function(e){cleverapps.DataLoader.save(this.storage,this.toJSON()),this.serverTaskName&&!1!==e&&cleverapps.synchronizer.addUpdateTask(this.serverTaskName)},cleverapps.Chest.prototype.initializeForNewUser=function(){this.locked=!1},cleverapps.Chest.prototype.unlock=function(){
this.locked=!1,this.onceUnlocked(),this.changeLockedListener()},cleverapps.Chest.prototype.open=function(){this.locked=!0,this.changeLockedListener()},cleverapps.DailyChest=function(e){cleverapps.config.debugMode&&(cleverapps.DailyChest.TIMEOUT="10 minutes"),e=cleverapps.extend({storage:cleverapps.DataLoaderTypes.DAILY_CHEST,interval:cleverapps.parseInterval(cleverapps.DailyChest.TIMEOUT)},e),this.onUnlockingStarted=function(){},this.interval=e.interval,cleverapps.Chest.call(this,e)},cleverapps.DailyChest.prototype=Object.create(cleverapps.Chest.prototype),cleverapps.DailyChest.prototype.constructor=cleverapps.DailyChest,cleverapps.DailyChest.prototype.initializeForNewUser=function(){this.locked=!0,this.startUnlockFromScratch()},cleverapps.DailyChest.prototype.fromJSON=function(e){this.locked=!0,this.setWhenUnlock(e.nextTime)},cleverapps.DailyChest.prototype.toJSON=function(){return{nextTime:this.when}},cleverapps.DailyChest.prototype.startUnlockFromScratch=function(){
this.setWhenUnlock(Date.now()+this.interval)},cleverapps.DailyChest.prototype.open=function(){this.locked=!0,this.startUnlockFromScratch(),this.changeLockedListener()},cleverapps.DailyChest.prototype.resetUnlockCountdown=function(){void 0!==this.countdown?this.countdown.resetTimeLeft(this.when-Date.now()):this.countdown=new cleverapps.CountDown(this.when-Date.now(),{onFinish:this.unlock.bind(this),permanent:!0}),this.onUnlockingStarted()},cleverapps.DailyChest.prototype.setWhenUnlock=function(e){e||(e=Date.now()),this.when=Math.min(e,Date.now()+this.interval),this.save(),this.resetUnlockCountdown()},cleverapps.DailyChest.TIMEOUT="3 hours";var StoryTeller=cc.Node.extend({ctor:function(){this._super();var e=cleverapps.styles.StoryTeller;this.setContentSize2(e.width,e.height),this.setAnchorPoint2();var t=new cleverapps.Spine(e.json);t.setAnimation(0,e.animation,!0),t.setScale(e.scale),this.addChild(t),t.setPositionRound(this.width/2,this.height/2+e.offsetY)}})
;StoryTeller.listBundles=function(){return cleverapps.Spine.listBundles(cleverapps.styles.StoryTeller.json)},cleverapps.styles.StoryTeller={width:310,height:310,offsetY:0,json:bundles.dialogues?bundles.dialogues.jsons.default_json:void 0,animation:"animation",scale:1};var SideBar=function(){var e=[MethaIcon,DailyLevelIcon,PackIcon,PiggyBankIcon,DailyCupIcon];"undefined"!=typeof match3&&match3.heroes&&e.push(HeroesIcon),cleverapps.cardSkins&&e.push(CardSkinsIcon),cleverapps.starChest&&e.push(StarChestIcon),"merge"===cleverapps.config.type&&((e=[]).push(QuestsSideBarIcon),e.push(OrdersIcon),e.push(UnitsLibraryIcon),e.push(PackIcon),e.push(DailyTasksIcon),-1!==["ayodo1","iyodo1"].indexOf(cleverapps.User.calcSource())&&e.push(FreeRubiesIcon),cleverapps.config.debugMode&&e.push(RegionsSideBarIcon)),e=e.concat(this.getLockedIcons()),this.defaultIcons=e.map(function(e){return new e}),this.icons=[],this.onAddIcon=function(){},this.onMoveIcon=function(){},this.onRemoveIcon=function(e){},
this.onForceIcon=function(e){}};SideBar.prototype.getLockedIcons=function(){var e=[BonusWorldLockedIcon];return"undefined"!=typeof EnergyFeastMissionWindow&&e.push(EnergyFeastLockedIcon),e},SideBar.prototype.reset=function(){this.icons=[]},SideBar.prototype.getDefaultIconByClassName=function(e){for(var t=0;t<this.defaultIcons.length;t++)if(this.defaultIcons[t]instanceof e)return this.defaultIcons[t]},SideBar.prototype.getIconsByClassName=function(e){for(var t=[],s=0;s<this.icons.length;s++)this.icons[s]instanceof e&&t.push(this.icons[s]);return t},SideBar.prototype.resetByClassName=function(e){this.getIconsByClassName(e).forEach(function(e){e.resetState()})},SideBar.prototype.refreshAllIcons=function(){this.defaultIcons.forEach(function(e){e.resetState(),e.available?-1===this.icons.indexOf(e)&&this.addIcon(e):-1!==this.icons.indexOf(e)&&this.removeIcon(e)},this),this.icons.forEach(function(e){-1===this.defaultIcons.indexOf(e)&&e.resetState()},this)},
SideBar.prototype.anyIconWithForceIndex=function(){for(var e=0;e<this.icons.length;e++){var t=this.icons[e];if(!t.locked){var s=t.getForce();if(s&&!cleverapps.forces.isShown(s.id))return e}}},SideBar.prototype.showAnyForce=function(){var t=this.anyIconWithForceIndex();void 0!==t&&cleverapps.metha.display({focus:"sidebarIconForce",control:"sidebar",actions:[function(e){setTimeout(e,1100)},function(e){this.onForceIcon(t),cleverapps.forces.onceForceClosed=e}.bind(this)]})},SideBar.prototype.getIconsWithProgress=function(){return this.icons.filter(function(e){return 0<e.progress})},SideBar.prototype.showProgress=function(){var e=this.getIconsWithProgress()[0];e&&e.showProgress()},SideBar.prototype.addIcon=function(e){if(this.icons.length===SideBar.SLOTS.length){var t=this.icons.map(function(e){return e.mission&&e.mission.name||""});cleverapps.throwAsync("No vacant slot exists! icons - "+t.join(", "))}else{var s,n=this.icons.length;for(s=this.icons.length-1;0<=s&&!(
this.icons[s].priority>=e.priority);s--)n--;for(this.icons.push(!1),s=this.icons.length-2;n<=s;s--)this.icons[s+1]=this.icons[s],this.onMoveIcon(s+1,s);this.icons[n]=e,this.onAddIcon(n)}},SideBar.prototype.findMissionIcon=function(e,t){for(var s=0;s<this.icons.length;s++){var n=this.icons[s];if(t&&n instanceof MissionOfferIcon&&n.mission.type===e)return n;if(n instanceof MissionIcon&&n.mission.type===e)return n}},SideBar.prototype.removeIcon=function(e){var t=this.icons.indexOf(e);if(-1!==t){for(this.onRemoveIcon(t);t<this.icons.length-1;t++)this.icons[t]=this.icons[t+1],this.onMoveIcon(t,t+1);this.icons.pop()}},SideBar.LEFT_COLUMN=0,SideBar.RIGHT_COLUMN=1,SideBar.SLOTS=[{row:0,col:SideBar.LEFT_COLUMN},{row:1,col:SideBar.LEFT_COLUMN},{row:2,col:SideBar.LEFT_COLUMN},{row:0,col:SideBar.RIGHT_COLUMN},{row:1,col:SideBar.RIGHT_COLUMN},{row:2,col:SideBar.RIGHT_COLUMN},{row:3,col:SideBar.LEFT_COLUMN},{row:3,col:SideBar.RIGHT_COLUMN},{row:4,col:SideBar.LEFT_COLUMN},{row:4,
col:SideBar.RIGHT_COLUMN}],SideBar.ICONS=[];var SideBarIcon=function(e){this.available=!1,this.animation=void 0,this.locked=!1,this.lottery=!1,this.attention=!1,this.smallIcon=!1,this.title=void 0,this.leftTime=void 0,this.priority=SideBarIcon.PRIORITY_NORMAL,this.progress=0,cleverapps.extend(this,e),this.onShowIconListener=function(){},this.onUnlockListener=function(){},this.onAddLotteryListener=function(){},this.onRemoveLotteryListener=function(){},this.onAttentionOnListener=function(){},this.onAttentionOffListener=function(){},this.onChangeTitleListener=function(){},this.onStartTimerListener=function(){},this.onRemoveTimerListener=function(){},this.onShowProgressListener=function(){},this.onAddSmallIcon=function(){},this.onRemoveSmallIcon=function(){}};SideBarIcon.prototype.addProgress=function(e){this.progress+=e},SideBarIcon.prototype.showProgress=function(){this.onShowProgressListener(),this.progress=0},SideBarIcon.prototype.setAnimation=function(e){this.animation!==e&&(
this.animation=e,this.onShowIconListener())},SideBarIcon.prototype.setIcon=function(e){this.icon!==e&&(this.icon=e,this.onShowIconListener())},SideBarIcon.prototype.setLocked=function(e){e=!!e,this.locked!==e&&(this.locked=e,this.locked||this.onUnlockListener())},SideBarIcon.prototype.setLottery=function(e){e=!!e,this.lottery!==e&&((this.lottery=e)?this.onAddLotteryListener():this.onRemoveLotteryListener())},SideBarIcon.prototype.setAttention=function(e){e=!!e,this.attention!==e&&((this.attention=e)?this.onAttentionOnListener():this.onAttentionOffListener())},SideBarIcon.prototype.setSmallIcon=function(e){this.smallIcon!==e&&((this.smallIcon=e)?this.onAddSmallIcon(e):this.onRemoveSmallIcon())},SideBarIcon.prototype.setTitle=function(e){this.title!==e&&(this.title=e,this.onChangeTitleListener())},SideBarIcon.prototype.setLeftTime=function(e){this.leftTime!==e&&(this.leftTime=e),0<this.leftTime?this.onStartTimerListener():this.onRemoveTimerListener()},
SideBarIcon.prototype.resetState=function(){},SideBarIcon.prototype.getLockedTip=function(){return Messages.get("IconLocked.TipDefault",{level:this.getTipData()})},SideBarIcon.prototype.getTipData=function(){},SideBarIcon.prototype.onPressed=function(){},SideBarIcon.prototype.getForce=function(){},SideBarIcon.prototype.removeFromSideBar=function(){cleverapps.sideBar.removeIcon(this)},SideBarIcon.prototype.getTitle=function(){return this.locked?this.locked.lockedEvent?Messages.get("Soon"):Messages.get("IconLocked.TextDefault",{levelNo:cleverapps.humanReadableNumber(this.locked.episode,this.locked.level)}):this.title},SideBarIcon.PRIORITY_LOW=0,SideBarIcon.PRIORITY_NORMAL=1,SideBarIcon.PRIORITY_HIGH=2;var SideBarIconView=cc.Node.extend({ctor:function(e){this.model=e,this._super(),this.setAnchorPoint2(),this.show(),this.model.target&&this.registerTarget(cleverapps.styles.SideBarIconView,this.model.target),e.onShowIconListener=this.createListener(this.showIcon.bind(this)),
e.onUnlockListener=this.createListener(this.unlock.bind(this)),e.onAttentionOnListener=this.createListener(this.turnOnAttention.bind(this)),e.onAttentionOffListener=this.createListener(this.turnOffAttention.bind(this)),e.onChangeTitleListener=this.createListener(this.addTitle.bind(this)),e.onAddLotteryListener=this.createListener(this.addLotteryIcon.bind(this)),e.onRemoveLotteryListener=this.createListener(this.removeLotteryIcon.bind(this)),e.onStartTimerListener=this.createListener(this.runTimer.bind(this)),e.onRemoveTimerListener=this.createListener(this.hideTimer.bind(this)),e.onShowProgressListener=this.createListener(this.showProgress.bind(this)),e.onAddSmallIcon=this.createListener(this.addSmallIcon.bind(this)),e.onRemoveSmallIcon=this.createListener(this.removeSmallIcon.bind(this)),(this.model.animation||this.model.icon)&&this.showIcon(),this.model.locked&&this.setLocked(),this.model.lottery&&this.addLotteryIcon(),this.model.attention&&this.turnOnAttention(),
this.model.title&&this.addTitle(),this.model.smallIcon&&this.addSmallIcon(),0<this.model.leftTime&&this.runTimer(),this.assignPressAction(),cleverapps.UI.applyHover(this)},showProgress:function(){var e=cleverapps.styles.SideBarIconView,t=this.parent.col===SideBar.RIGHT_COLUMN,s=cleverapps.UI.generateImageText("+"+this.model.progress,cleverapps.styles.FONTS.SIDEBAR_ICON_PROGRESS_TEXT);this.addChild(s),s.setPositionRound(t?this.width/2-e.progress.text.offsetX:this.width/2+e.progress.text.offsetX,this.height/2),s.setLocalZOrder(-1),s.setOpacity(0);var n=new cleverapps.Spine(this.model.progressIconJson);this.addChild(n),n.setPositionRound(t?this.width/2-e.progress.animation.offsetX:this.width/2+e.progress.animation.offsetX,this.height/2),n.setLocalZOrder(-1);var i=s.scale;s.runAction(new cc.Sequence(new cc.DelayTime(1.5),new cc.Spawn(new cc.FadeIn(.25),new cc.ScaleTo(.25,1.15*i)),new cc.ScaleTo(.1,i),new cc.DelayTime(.3),new cc.SkewTo(.2,10,0).easing(cc.easeIn(1)),new cc.Spawn(
new cc.SkewTo(.2,-10,0).easing(cc.easeIn(2)),new cc.MoveTo(.2,cc.p(this.width/2,this.height/2)).easing(cc.easeIn(2))),new cc.RemoveSelf)),n.runAction(new cc.Sequence(new cc.DelayTime(1.2),new cc.CallFunc(function(){n.setAnimation(0,"animation",!1)}),new cc.DelayTime(.9),new cc.SkewTo(.2,10,0).easing(cc.easeIn(1)),new cc.Spawn(new cc.SkewTo(.22,-10,0).easing(cc.easeIn(2)),new cc.MoveTo(.3,cc.p(this.width/2,this.height/2)).easing(cc.easeIn(2))),new cc.RemoveSelf));var o=this.scale;this.runAction(new cc.Sequence(new cc.DelayTime(2.5),new cc.ScaleTo(.2,1.1*o),new cc.ScaleTo(.2,o)))},addLotteryIcon:function(){this.removeLotteryIcon(),Lottery.addIcon(this,"icon")},removeLotteryIcon:function(){this.lotteryIcon&&this.lotteryIcon.removeFromParent()},assignPressAction:function(){this.touchListener&&(cc.eventManager.removeListener(this.touchListener),delete this.touchListener),this.model.locked?cleverapps.tooltipManager.create(this,{position:cleverapps.styles.UI.Tooltip.LOCATION.below,
text:this.model.getLockedTip()}):(this.touchListener=cleverapps.UI.onClick(this,this.onPressed.bind(this),{useInteractiveScale:!0}),cleverapps.tooltipManager.remove(this))},onPressed:function(){cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),cleverapps.audio.playSound(bundles.main.urls.click_effect),this.model.onPressed()},showForce:function(){cleverapps.forces.create(this,this.model.getForce())},setSize:function(e){this.setContentSize2(e),this.setContentSize2(e),this.setPositionRound(this.width/2,this.height/2)},showIcon:function(){if(this.icon&&this.icon.removeFromParent(),this.model.icon){var e=this.model.icon,t=this.icon=e();cleverapps.UI.fitToBox(t,{width:.7*this.width,height:.7*this.height,maxScale:1.2}),t.setPositionRound(this.iconNode.width/2,this.iconNode.height/2),this.iconNode.addChild(t)}else if(this.model.animation){var s=this.icon=new cleverapps.Spine(this.model.animation);s.setPositionRound(this.iconNode.width/2,this.iconNode.height/2),
this.iconNode.addChild(s);s.setAnimation(0,"animation",!1),this.model.locked||s.setCompleteListener(function(){s.runAction(new cc.Sequence(new cc.DelayTime(cleverapps.Random.mathChoose(SideBarIconView.RANDOM_ANIMATION_INTERVALS)),new cc.CallFunc(function(){s.setAnimation(0,"animation",!1)})))})}},show:function(){var e=this.bg=cleverapps.UI.createScale9Sprite(cleverapps.skins.getSlot("iconBg",{image:bundles.sidebar.frames.icon_bg})),t=cleverapps.styles.SideBarIconView;t.bg&&t.bg.width&&e.setContentSize(t.bg),this.addChild(e),e.setPositionRound(e.width/2,e.height/2),this.setSize(e.getContentSize());var s=this.iconNode=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(this.getContentSize());var n=cleverapps.styles.SideBarIconView.icon;s.setPositionRound(this.width/2+n.x,this.height/2+n.y),this.addChild(s)},setLocked:function(){var e=cleverapps.styles.SideBarIconView;e.lock.color?(this.bg.setColor(e.lock.color),this.icon&&this.icon.spine&&this.icon.spine.setColor(e.lock.color)
):e.lock.greyscale&&this.icon&&this.icon.spine&&cleverapps.UI.convertToGrayScale(this.icon.spine);var t=this.lock=new cc.Sprite(bundles.sidebar.frames.lock);this.addChild(t,1),t.setPositionRound(e.lock)},unlock:function(){this.lock.removeFromParent(),this.bg.setColor(cleverapps.styles.COLORS.WHITE),this.icon&&this.icon.spine&&(this.icon.spine.setColor(cleverapps.styles.COLORS.WHITE),cleverapps.UI.convertToGrayScale(this.icon.spine,!0)),this.assignPressAction()},addTitle:function(){if(this.text&&(this.text.removeFromParent(),delete this.text),this.textBg&&(this.textBg.removeFromParent(),delete this.textBg),void 0!==this.model.title){var e=cleverapps.styles.SideBarIconView.text;this.text=cleverapps.UI.generateTTFText(this.model.title,cleverapps.styles.FONTS.SIDEBAR_ICON_TEXT);var t=this.textBg=this.getTextBg();t?(t.setPositionRound(e),this.addChild(t),t.addChild(this.text),this.text.setPositionRound(t.width/2,t.height/2)):(this.addChild(this.text),this.text.setPositionRound(e)),
this.text.y+=this.text instanceof cleverapps.UI.LabelTTF?e.regularFont.offsetY:e.offsetY,e.textWidth&&this.text.fitTo(e.textWidth),this.text.baseScale=this.text.scale}},runTimer:function(){this.hideTimer();var e=this.timer=new cleverapps.CountDown(this.model.leftTime,{onFinish:function(){this.model.resetState()}.bind(this)}),t=cleverapps.styles.SideBarIconView.text,s={font:cleverapps.styles.FONTS.SIDEBAR_ICON_TEXT,timerPosition:{x:0,y:t.offsetY},regularFontTimerPosition:{x:0,y:t.regularFont.offsetY}},n=this.getTextBg();n&&(s.background_content=n);var i=this.timerView=new cleverapps.CountDownView(e,s);this.addChild(i),t.textWidth&&i.text.fitTo(t.textWidth),i.setPositionRound(t),i.baseScale=i.scale},getTextBg:function(){var e=cleverapps.styles.SideBarIconView.text.bg;if(e){var t=new cc.Sprite(bundles.sidebar.frames.icon_text_bg);if(e.scale9&&((t=cleverapps.UI.createScale9Sprite(bundles.sidebar.frames.icon_text_bg,cleverapps.UI.Scale9Rect.TwoPixelXY)).setContentSize2(e.width,e.height),
e.arrow)){var s=new cc.Sprite(bundles.sidebar.frames.icon_text_arrow_bg);t.addChild(s),s.setPositionRound(e.arrow)}return t}},hideTimer:function(){this.timer&&(this.timer.remove(),delete this.timer),this.timerView&&(this.timerView.removeFromParent(),delete this.timerView)},turnOnAttention:function(){var e=this.mark=new cc.Sprite(bundles.sidebar.frames.attention_png);e.setLocalZOrder(2),this.addChild(e),e.setPositionRound(cleverapps.styles.SideBarIconView.mark),e.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.3,1.1),new cc.ScaleTo(.3,1))))},turnOffAttention:function(){this.mark.stopAllActions(),this.mark.removeFromParent(!0),delete this.mark},addSmallIcon:function(){this.smallIcon||(this.smallIcon=new cc.Sprite(this.model.smallIcon),this.addChild(this.smallIcon),this.smallIcon.setPositionRound(cleverapps.styles.SideBarIconView.smallIcon),this.smallIcon.setScale(.3),this.smallIcon.runAction(new cc.ScaleTo(.2,1)))},removeSmallIcon:function(){this.smallIcon&&(
this.smallIcon.runAction(new cc.Sequence(new cc.ScaleTo(.2,.2),new cc.RemoveSelf)),delete this.smallIcon)}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{SIDEBAR_ICON_TEXT:{name:"default",size:40},SIDEBAR_ICON_PROGRESS_TEXT:{name:"default",size:65,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE,color:cleverapps.styles.COLORS.YELLOW}}),cleverapps.styles.SideBarIconView={icon:{x:0,y:0},lock:{color:new cc.Color(130,130,130,255),x:{align:"right",dx:0},y:{align:"bottom",dy:0}},text:{offsetY:0,regularFont:{offsetY:0},x:{align:"center",dx:0},y:{align:"bottom",dy:0}},mark:{x:{align:"right",dx:-5},y:{align:"top",dy:-5}},smallIcon:{x:{align:"left",dx:-40},y:{align:"top",dy:30}},progress:{text:{offsetX:250},animation:{offsetX:150}}},SideBarIconView.RANDOM_ANIMATION_INTERVALS=[5,7,9,11,12];var SideBarView=cc.Node.extend({ctor:function(e){this._super();var t=(e=e||{}).size||cleverapps.UI.getSceneSize();this.setAnchorPoint2(),this.setContentSize2(t.width,t.height),
this.slots=SideBar.SLOTS.map(function(e){var t=new SideBarSlotView(e,this);return this.addChild(t),t},this),cleverapps.sideBar.onAddIcon=this.createListener(this.insert.bind(this)),cleverapps.sideBar.onMoveIcon=this.createListener(this.move.bind(this)),cleverapps.sideBar.onRemoveIcon=this.createListener(this.eject.bind(this)),cleverapps.sideBar.onToggle=this.createListener(this.toggle.bind(this)),cleverapps.sideBar.onForceIcon=this.createListener(this.onForce.bind(this)),cleverapps.metha.registerControl("sidebar",this);for(var s=0;s<cleverapps.sideBar.icons.length;s++)this.insert(s,e)}});SideBarView.prototype.onForce=function(e){this.slots[e].showForce()},SideBarView.prototype.insert=function(e,t){var s=cleverapps.sideBar.icons[e],n=new SideBarIconView(s);this.slots[e].insert(n,cleverapps.extend({},t,{visible:cleverapps.metha.lastControlsVisible.sidebar}))},SideBarView.prototype.eject=function(e,t){return this.slots[e]&&this.slots[e].eject(t)},SideBarView.prototype.move=function(e,t){
var s=this.eject(t,!0);this.slots[e].insert(s)},SideBarView.prototype.toggle=function(t){this.slots.forEach(function(e){t?e.show():e.hide()})};var SideBarSlotView=cc.Node.extend({ctor:function(e,t){this._super();var s=cleverapps.styles.SideBarSlot;this.setAnchorPoint2(),this.setContentSize2(s.width,s.height),cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&s.mobileScale&&this.setScale(s.mobileScale),s.wideModeScales&&this.setScale(s.wideModeScales[cleverapps.wideMode.mode]),this.row=e.row,this.col=e.col;var n=s.wideModePadding&&s.wideModePadding[cleverapps.wideMode.mode]||s.padding,i=this.width/2*this.scale,o=(this.width+n.horizontal)*this.scale,a=t.height-n.top-this.row*(s.margin+this.height*this.scale);this.col===SideBar.LEFT_COLUMN?(this.hidePosition={x:-i,y:a},this.showPosition={x:this.hidePosition.x+o,y:a}):(this.hidePosition={x:t.width+i,y:a},this.showPosition={x:this.hidePosition.x-o,y:a}),this.visible=!1,this.setPositionRound(this.hidePosition)},insert:function(e,t){
t=t||{},this.iconView=e,this.addChild(e),e.setPositionRound(this.width/2,this.height/2),void 0!==t.visible&&(this.hide(!0),t.visible&&this.show(t.silent))},eject:function(e){var t=this.iconView;return t.removeFromParent(!e),this.iconView=void 0,t},showForce:function(){this.show(!0),this.iconView.showForce()},show:function(e){this.iconView&&(this.stopAllActions(),e?(this.visible=!0,this.setPositionRound(this.showPosition)):this.runAction(new cc.Sequence(new cc.DelayTime(.3+.1*this.row),new cc.Show,new cc.MoveTo(.5,this.showPosition).easing(cc.easeBackOut()))))},hide:function(e){this.iconView&&(this.stopAllActions(),e?(this.visible=!1,this.setPositionRound(this.hidePosition)):this.runAction(new cc.Sequence(new cc.MoveTo(.15,this.hidePosition),new cc.Hide)))}});cleverapps.styles.SideBarSlot={width:200,height:200,margin:20,padding:{top:220,horizontal:15}};var MethaIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.metha_icon_json})};MethaIcon.prototype=Object.create(
SideBarIcon.prototype),(MethaIcon.prototype.constructor=MethaIcon).prototype.resetState=function(){this.available=cleverapps.metha.withSimpleMain();var e=!1;switch(cleverapps.metha.getType()){case Metha.FARM:!cleverapps.farm.isCompleted()&&cleverapps.farm.getBuilding().getQuest().isCompleted()&&(e=!0);break;case Metha.HOMEFIX:!cleverapps.home.isCompleted()&&cleverapps.home.getFurnitureToUpgrade()&&(e=!0)}this.setAttention(e)},MethaIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"gotoMetha",action:function(e){cleverapps.scenes.replaceScene(new NoMainMethaScene,e)}})};var DailyLevelIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.daily_level_json})};DailyLevelIcon.prototype=Object.create(SideBarIcon.prototype),(DailyLevelIcon.prototype.constructor=DailyLevelIcon).prototype.resetState=function(){this.available=cleverapps.dailyLevel.isActive(),this.setAttention(!0)},DailyLevelIcon.prototype.onPressed=function(){cleverapps.metha.display({
focus:"DailyLevel",action:function(e){cleverapps.dailyLevel.start(e)}})};var PackIcon=function(){SideBarIcon.call(this,{lottery:!0})};PackIcon.prototype=Object.create(SideBarIcon.prototype),(PackIcon.prototype.constructor=PackIcon).prototype.resetState=function(){if(this.available=cleverapps.packManager.isAvailable(),this.available){var e=cleverapps.packManager.get(),t={0:bundles.sidebar.jsons.pack_icon_json,1:bundles.sidebar.jsons.pack1_icon_json,2:bundles.sidebar.jsons.pack2_icon_json};this.setAnimation(t[e.stage])}},PackIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"PackWindow",control:["MenuBarGoldItem","MenuBarLivesItem","MenuBarCoinsItem","MenuBarWandsItem","MenuBarWorkersItem"],action:function(e){new PackWindow,cleverapps.metha.onceNoWindowsListener=e}})};var PiggyBankIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.piggybank_icon_json})};PiggyBankIcon.prototype=Object.create(SideBarIcon.prototype),(
PiggyBankIcon.prototype.constructor=PiggyBankIcon).prototype.resetState=function(){this.available=cleverapps.piggyBank.isActive(),this.setAttention(cleverapps.piggyBank.isFull()),this.setLeftTime(cleverapps.piggyBank.getLeftTime())},PiggyBankIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"PiggyBankWindow",control:"MenuBarGoldItem",action:function(e){new PiggyBankWindow,cleverapps.metha.onceNoWindowsListener=e}})};var DailyCupIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.dailycup_icon_json})};DailyCupIcon.prototype=Object.create(SideBarIcon.prototype),(DailyCupIcon.prototype.constructor=DailyCupIcon).prototype.getForce=function(){return Forces.DAILY_CUP},DailyCupIcon.prototype.resetState=function(){this.available=cleverapps.dailyCup&&DailyCup.IsAvailable(DailyCup.TYPE_DAILY,{future:!0});var e=this.available&&!DailyCup.IsAvailable(DailyCup.TYPE_DAILY);if(this.available&&!e&&(this.available=cleverapps.dailyCup.isActive()),e)this.setLocked(!0),
this.setAttention(!1),this.setTitle(Messages.get("IconLocked.TextDefault",{levelNo:this.getTipData()}));else{this.setLocked(!1),this.setAttention(!this.locked&&cleverapps.dailyCup.isFinished());var t=cleverapps.dailyCup.getTimeLeft();0<t?(this.setLeftTime(t),this.setTitle(void 0)):(this.setLeftTime(0),this.setTitle("messages:Finished"))}},DailyCupIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"DailyCupSceneFromIcon",control:["toolbar","sidebar"],action:function(e){cleverapps.scenes.replaceScene(new DailyCupScene,e)}})},DailyCupIcon.prototype.getTipData=function(){var e=DailyCupsConfig[DailyCup.TYPE_DAILY].available;return cleverapps.humanReadableNumber(e.episode,e.level)};var HeroesIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.heroes_icon_json})};HeroesIcon.prototype=Object.create(SideBarIcon.prototype),(HeroesIcon.prototype.constructor=HeroesIcon).prototype.resetState=function(){
this.available="undefined"!=typeof match3&&match3.heroes&&match3.heroes.available({future:!0}),this.available&&!match3.heroes.available()?(this.setLocked(!0),this.setAttention(!1),this.setTitle(Messages.get("IconLocked.TextDefault",{levelNo:this.getTipData()}))):(this.setLocked(!1),this.setAttention(match3.heroes.canUpgradeSomebody()),this.setTitle(void 0))},HeroesIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"HeroesSceneFromIcon",control:["toolbar","sidebar"],action:function(e){cleverapps.scenes.replaceScene(new HeroesScene,e)}})},HeroesIcon.prototype.getForce=function(){return Forces.HEROES_AVAILABLE},HeroesIcon.prototype.getTipData=function(){return cleverapps.humanReadableNumber(Heroes.AVAILABLE.episode,Heroes.AVAILABLE.level)};var CardSkinsIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.card_skin_icon_json})};CardSkinsIcon.prototype=Object.create(SideBarIcon.prototype),(CardSkinsIcon.prototype.constructor=CardSkinsIcon
).prototype.onPressed=function(){cleverapps.metha.display({focus:"CardSkinsSceneFromIcon",control:["toolbar","sidebar"],action:function(e){cleverapps.scenes.replaceScene(new CardSkinsScene,e)}})},CardSkinsIcon.prototype.resetState=function(){this.available=cleverapps.cardSkins&&cleverapps.cardSkins.available()};var QuestsSideBarIcon=function(){SideBarIcon.call(this,{target:"quests"}),this.quest=void 0};QuestsSideBarIcon.prototype=Object.create(SideBarIcon.prototype),(QuestsSideBarIcon.prototype.constructor=QuestsSideBarIcon).prototype.setQuest=function(e){return this.quest!==e&&(this.quest=e,!0)},QuestsSideBarIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"QuestsIconClicked",action:function(e){new QuestsWindow,cleverapps.metha.onceNoWindowsListener=e}.bind(this)})},QuestsSideBarIcon.GenerateIcon=function(e){if(e)return QuestIcon.getIconImage(e)},QuestsSideBarIcon.prototype.resetState=function(){if(
this.available=Game.currentGame&&Game.currentGame.quests&&Game.currentGame.quests.getSelectedQuest()&&!cleverapps.config.editorMode,this.available){var e=Game.currentGame.quests.getSelectedQuest();this.setQuest(e)&&this.setIcon(function(){return QuestsSideBarIcon.GenerateIcon(this.quest)}.bind(this)),this.setTitle(e.progress+"/"+e.goal)}};var OrdersIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.orders_json,target:"orders"})};OrdersIcon.prototype=Object.create(SideBarIcon.prototype),(OrdersIcon.prototype.constructor=OrdersIcon).prototype.onPressed=function(){cleverapps.metha.display({focus:"OrdersIconClicked",action:function(e){new OrdersWindow,cleverapps.metha.onceNoWindowsListener=e}.bind(this)})},OrdersIcon.prototype.resetState=function(){this.available=Game.currentGame&&2<=Game.currentGame.gameLevel.getLevel()&&!cleverapps.config.editorMode,this.available&&this.setAttention(Game.currentGame.orders.findCanCook()||Game.currentGame.orders.findReady())}
;var UnitsLibraryIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.units_library_json})};UnitsLibraryIcon.prototype=Object.create(SideBarIcon.prototype),(UnitsLibraryIcon.prototype.constructor=UnitsLibraryIcon).prototype.onPressed=function(){cleverapps.metha.display({control:["MenuBarCoinsItem"],focus:"UnitsLibraryIconClicked",action:function(e){new UnitsLibraryWindow,cleverapps.metha.onceNoWindowsListener=e}.bind(this)})},UnitsLibraryIcon.prototype.resetState=function(){this.available=Game.currentGame&&3<=Game.currentGame.gameLevel.getLevel()&&!cleverapps.config.editorMode,this.available&&this.setAttention(cleverapps.unitsLibrary.hasAnyFresh())};var RegionsSideBarIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.units_library_json})};RegionsSideBarIcon.prototype=Object.create(SideBarIcon.prototype),(RegionsSideBarIcon.prototype.constructor=RegionsSideBarIcon).prototype.onPressed=function(){cleverapps.metha.display({focus:"RegionsIconClicked",
action:function(e){new RegionsWindow,cleverapps.metha.onceNoWindowsListener=e}.bind(this)})},RegionsSideBarIcon.prototype.resetState=function(){this.available=Game.currentGame&&cleverapps.environment.isEditorScene()};var StarChestIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.star_chest_icon_json})};StarChestIcon.prototype=Object.create(SideBarIcon.prototype),(StarChestIcon.prototype.constructor=StarChestIcon).prototype.resetState=function(){this.available=void 0!==cleverapps.starChest;var e=cleverapps.starChest.stars+"/"+cleverapps.StarChest.GOAL_AMOUNT;this.setTitle(e),this.setAttention(cleverapps.starChest.stars>=cleverapps.StarChest.GOAL_AMOUNT)},StarChestIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"StarChestWindow",action:function(e){cleverapps.starChest.locked?new StarChestLockedWindow:new StarChestWindow,cleverapps.metha.onceNoWindowsListener=e}})};var DailyTasksIcon=function(){SideBarIcon.call(this,{
animation:bundles.sidebar.jsons.dailytasks_json})};DailyTasksIcon.prototype=Object.create(SideBarIcon.prototype),(DailyTasksIcon.prototype.constructor=DailyTasksIcon).prototype.onPressed=function(){cleverapps.metha.display({focus:"DailyTasksWindow",control:["MenuBarGameLevelItem","MenuBarCoinsItem","MenuBarGoldItem","MenuBarLivesItem"],action:function(e){new DailyTasksWindow,cleverapps.metha.onceNoWindowsListener=e}})},DailyTasksIcon.prototype.resetState=function(){if(this.available="merge"===cleverapps.config.type&&levels.user.checkAvailable(cleverapps.Availables.DAILY_TASKS,{future:!0}),this.available)if(!levels.user.checkAvailable(cleverapps.Availables.DAILY_TASKS))this.setLocked(!0),this.setAttention(!1),this.setTitle(Messages.get("IconLocked.TextDefault",{levelNo:this.getTipData()}));else{this.setLocked(!1);var e=cleverapps.dailyTasks.isRunning(),t=0<cleverapps.dailyTasks.getNotCollectedTasks().length||!e;this.setAttention(t);var s=cleverapps.dailyTasks.getCompleteAllTask()
;this.setTitle(e?s.progress+"/"+s.goal:void 0)}},DailyTasksIcon.prototype.getForce=function(){return Forces.DAILY_TASKS_FORCE},DailyTasksIcon.prototype.getTipData=function(){var e=cleverapps.Availables.DAILY_TASKS;return cleverapps.humanReadableNumber(e.episode,e.level)};var FreeRubiesIcon=function(){SideBarIcon.call(this,{animation:bundles.sidebar.jsons.free_rubies_json})};FreeRubiesIcon.prototype=Object.create(SideBarIcon.prototype),(FreeRubiesIcon.prototype.constructor=FreeRubiesIcon).prototype.onPressed=function(){cleverapps.metha.display({focus:"RubiesShopFromIcon",control:["MenuBarGoldItem"],action:function(e){new HardCurrencyShopWindow,cleverapps.metha.onceNoWindowsListener=e}})},FreeRubiesIcon.prototype.resetState=function(){this.available=cleverapps.adsLimits.state(AdsLimits.TYPES.GOLD_FOR_VIDEO)===AdsLimits.STATE_READY,this.available&&this.setAttention(!0)};var MissionOfferIcon=function(e){this.mission=e,SideBarIcon.call(this,{animation:e.missionOffer.sidebarJson}),
this.priority=SideBarIcon.PRIORITY_LOW};MissionOfferIcon.prototype=Object.create(SideBarIcon.prototype),(MissionOfferIcon.prototype.constructor=MissionOfferIcon).prototype.resetState=function(){var e=this.mission.finishTime()-Date.now();this.setLeftTime(0<e?e:0)},MissionOfferIcon.prototype.onPressed=function(){cleverapps.metha.display({focus:"MissionOfferWindow",action:function(e){new MissionOfferWindow(this.mission),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})};var AutoScrollText=cc.Node.extend({ctor:function(e,t){this._super(),this.options=t||{},this.styles=cleverapps.overrideStyles(cleverapps.styles.AutoScrollText,t.styles||{},!0),this.setAnchorPoint2(),this.styles.bg?this.bg=new cc.Scale9Sprite(this.styles.bg.image):this.bg=new cc.Node,this.addChild(this.bg),this.bg.setAnchorPoint2(),this.createTexts(e),this.createArrow(),this.currentTextIndex=0,this.texts[this.currentTextIndex].setVisible(!0)},createTexts:function(e){this.texts=[];var s=0;e.forEach(function(e){
var t=cleverapps.UI.generateTTFText(e,this.styles.font);t.setDimensions(this.styles.width,0),t.setHorizontalAlignment(this.styles.horizontalAlignment),t.fitTo(void 0,this.styles.height),t.setVisible(!1),this.texts.push(t),this.bg.addChild(t),s=Math.max(s,t.height)}.bind(this)),this.bg.setContentSize2(this.styles.width+2*this.styles.padding.x,s+2*this.styles.padding.y),this.setContentSize2(this.bg.getContentSize()),this.bg.setPositionRound(this.width/2,this.height/2),this.texts.forEach(function(e){e.setPositionRound(this.bg.width/2,this.bg.height/2)}.bind(this))},createArrow:function(){var e=cleverapps.UI.generateTTFText("▼",this.styles.font),t=new cc.Node;t.setContentSize2(3*e.width,3*e.height),t.setAnchorPoint2(),this.bg.addChild(t),t.setPositionRound(this.styles.arrow),t.addChild(e),e.setPositionRound(t.width/2,t.height/2),cleverapps.UI.onClick(t,function(){this.next(),this.reinitTimer()}.bind(this))},next:function(){this.texts[this.currentTextIndex].setVisible(!1),
this.currentTextIndex=(this.currentTextIndex+1)%this.texts.length,this.texts[this.currentTextIndex].setVisible(!0)},reinitTimer:function(){this.stopAllActions(),this.runAction(new cc.RepeatForever(new cc.Sequence(new cc.DelayTime(5),new cc.CallFunc(this.next.bind(this)))))},setTextByIndex:function(e){this.texts[this.currentTextIndex]&&this.texts[this.currentTextIndex].setVisible(!1),this.currentTextIndex=e,this.texts[this.currentTextIndex].setVisible(!0)}});cleverapps.styles.AutoScrollText={font:cleverapps.styles.FONTS.WINDOW_TEXT,horizontalAlignment:cc.TEXT_ALIGNMENT_CENTER,padding:{x:30,y:60},arrow:{x:{align:"right",dx:0},y:{align:"bottom",dy:-30}}};var FbButton=cleverapps.UI.Button.extend({ctor:function(e){this.options=e||{},this.login=e.login||!cleverapps.social.isLoggedIn()&&!cleverapps.social.nativeInviteFriends,this.options.hasOwnProperty("showIcon")||(this.options.showIcon=!0),this.options.hasOwnProperty("showText")||(this.options.showText=!0),
this.options.onSuccess=this.options.onSuccess||function(){},this.options.onFailure=this.options.onFailure||function(){},this.source=this.options.source||cleverapps.User.calcSource();var t=this.generateContent(),s=cleverapps.styles.FbButton,n={button_png:this.options.button_png||s.button_png,button_on_png:this.options.button_on_png||s.button_on_png,width:this.options.width||t.width,height:this.options.height||s.height,onClicked:this.onClicked.bind(this),content:t,contentOffset:s.iconOffset,scale:!1,fitTo:!1};this.options.multiSocials&&(n.button_png=s.multiSocials[this.source+"_button_png"]||s.multiSocials.button_png,n.button_on_png=s.multiSocials[this.source+"_button_on_png"]||s.multiSocials.button_on_png,n.width=1.1*n.height),this._super(n),this.onSuccess=e.onSuccess||function(){},cleverapps.social.isInitialized()||(this.connecting=!0,this.onMouseOver=function(){},this.onMouseOut=function(){})},generateContent:function(){var e=cleverapps.styles.FbButton
;this.text=this.login?"messages:SignIn":"messages:FBLoginOrInvite.Button.Invite",this.connecting&&(this.text="messages:FBLoginOrInvite.Button.Connecting");var t,s=[],n=e.icon;if(this.login||this.options.showIcon&&!cleverapps.social.nativeInviteFriends?(t=e.icon.image[this.source]||bundles.main.frames.fb_icon_png,this.options.multiSocials&&e.multiSocials.icons[this.source]&&(t=e.multiSocials.icons[this.source])):this.options.showIcon&&cleverapps.social.nativeInviteFriends&&(t=bundles.main.frames.native_invite_icon_png,n=e.inviteIcon||n),t){var i=new cc.Sprite(t);i.setScale(this.options.iconScale||n.scale),i.setPositionY(n.offsetY),s.push(i)}if(this.options.showText){var o=cleverapps.UI.generateTTFText(this.text,this.options.font||e.font);s.push(o)}var a=new cleverapps.Layout(s,{direction:cleverapps.UI.HORIZONTAL,margin:e.margin,padding:{x:e.padding,y:0}});return a.setCascadeOpacityEnabled(!0),a},onClicked:function(){if(cleverapps.social.isInitialized())if(this.login){var e=function(){
var e=function(){cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.LOGIN_FACEBOOK),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LOGIN,{method:this.options.source}),this.options.onSuccess()}.bind(this);cleverapps.social.login(e,this.options.onFailure,{source:this.options.source})}.bind(this);this.options.multiSocials&&cc.sys.isNative?(this.stopAllActions(),this.setScale(.95),this.runAction(new cc.Sequence(new cc.DelayTime(.05),new cc.CallFunc(e),new cc.ScaleTo(.15,1).easing(cc.easeBackInOut())))):e()}else{var t={message:Messages.get("SettingsWindow.InviteFriends.message"),title:Messages.get("SettingsWindow.InviteFriends.title"),element:this};e=function(e){e===cleverapps.Social.CODE_SUCCEED?(cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.INVITE_FRIENDS),this.options.onSuccess()):this.options.onFailure()}.bind(this);cleverapps.social.inviteFriends(t,e)}else cleverapps.Notification.create("messages:SocialManager.Initialization")}});cleverapps.styles.FbButton={
height:110,padding:70,margin:15,font:cleverapps.styles.FONTS.BUTTON_TEXT,multiSocials:{button_png:bundles.main.frames.white_outline_button_png,button_on_png:bundles.main.frames.white_outline_button_on_png,androidsocial_button_png:bundles.main.frames.white_shadow_button_png,androidsocial_button_on_png:bundles.main.frames.white_shadow_button_on_png,facebook_button_png:bundles.main.frames.blue_outline_button_png,facebook_button_on_png:bundles.main.frames.blue_outline_button_on_png,icons:{}},icon:{image:{mobile_ok:bundles.main.frames.ok_icon_png,web_ok:bundles.main.frames.ok_icon_png,xsolla:bundles.main.frames.xsolla_icon_png,facebook:bundles.main.frames.fb_icon_png,mobile_vk:bundles.main.frames.vk_icon_png,web_vk:bundles.main.frames.vk_icon_png,mbga:bundles.main.frames.mobage_icon_png,sp_mbga:bundles.main.frames.mobage_icon_png,nk:bundles.main.frames.nk_icon_png,draugiem:bundles.main.frames.draugiem_icon_png,web_mm:bundles.main.frames.mm_icon_png,mobile_mm:bundles.main.frames.mm_icon_png,
fotostrana:bundles.main.frames.fs_icon_png,androidsocial:bundles.main.frames.google_icon_png,applesocial:bundles.main.frames.apple_icon_png,yandex:bundles.main.frames.yandex_icon_png},scale:.9,offsetY:0},inviteIcon:{scale:1,offsetY:-3}};var BandButton=cc.Node.extend({ctor:function(e){this._super();var t=cleverapps.styles.BandButton;this.setAnchorPoint2(),this.setContentSize2(t);var s=cleverapps.clone(t.position,!0);this.setPositionRound(s);var n=cleverapps.UI.createScale9Sprite(bundles.buttons_main.frames.scene_exit_button,cleverapps.UI.Scale9Rect.TwoPixelXY);n.setContentSize2(t),this.addChild(n),n.setPositionRound(this.width/2,this.height/2);var i=new cc.Sprite(bundles.buttons_main.frames.exit_button_icon);this.addChild(i),i.setPositionRound(t.icon),cleverapps.UI.makeHideable(this,cleverapps.UI.VERTICAL),cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,function(){cleverapps.audio.playSound(bundles.main.urls.click_effect),e.onClicked()}.bind(this),{useInteractiveScale:!0})},
hide:function(e){if(e)return this.setPositionRound(this.hideHandler.hidePosition),void this.setVisible(!1);this._animate("close",function(){this.setVisible(!1)}.bind(this))},show:function(e){this.runAction(new cc.Sequence(new cc.DelayTime(e||0),new cc.CallFunc(function(){this.setVisible(!0),this._animate("open")}.bind(this))))},_animate:function(e,t){this.stopAllActions();var s="open"===e?cc.easeBackOut(10):cc.easeBackIn(10),n="open"===e?this.hideHandler.originalPosition:this.hideHandler.hidePosition;this.runAction(new cc.Sequence(new cc.MoveTo(.3,n).easing(s),new cc.CallFunc(function(){t&&t()})))}});cleverapps.styles.BandButton={width:85,height:190,position:{x:{align:"right",dx:-40},y:{align:"top",dy:10}},icon:{x:{align:"center"},y:{align:"bottom",dy:25}}},cleverapps.Path=cc.Node.extend({ctor:function(e,t){this._super(),this.baseColor=e,this.pathColor=cc.color(this.baseColor),this.lineWidth=t||cleverapps.styles.Path.lineWidth,this.segments=[];for(
var s=0;s<cleverapps.Path.MAX_SEGMENTS;++s)this.segments.push(cleverapps.UI.createScale9Sprite(cleverapps.styles.Path.image)),this.segments[s].setAnchorPoint2(0,.5),this.segments[s].visible=!1,this.addChild(this.segments[s]);this.path=[],this.animatingInterval=void 0,this.drawTrailing=!0,this.setCascadeOpacityEnabled(!0),this.setLocalZOrder(-1)},clear:function(){this.segments.forEach(function(e){e.visible=!1})},reset:function(){this.animatingInterval&&(clearInterval(this.animatingInterval),this.animatingInterval=void 0),this.clearFadeInInterval(),this.path=[],this.pathColor=cc.color(this.baseColor),this.opacity=255,this.draw()},clearFadeInInterval:function(){void 0!==this.animateFadeInInterval&&(clearInterval(this.animateFadeInInterval),this.animateFadeInInterval=void 0)},push:function(e){this.path.push(e),this.draw()},pop:function(){this.path.pop(),this.draw()},setPath:function(e){this.path=e.map(function(e){return e})},listPath:function(){return this.path},
onExitTransitionDidStart:function(){this.reset(),this._super()},drawSegment:function(e,t,s){var n=15*resolutionScale/2*.9,i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))+2*n,o=this.segments[s];o.setColor(this.pathColor),o.setContentSize2(i,this.lineWidth);var a=Math.round(100*Math.atan2(t.y-e.y,t.x-e.x))/100;o.setPositionRound(e.x-n*Math.cos(a),e.y-n*Math.sin(a)),o.rotation=180*-a/Math.PI,o.visible=!0},draw:function(e){if(this.clear(),0<this.path.length)for(var t=this.drawTrailing&&e?this.path.concat(e):this.path,s=0;s<t.length-1;s++)this.drawSegment(t[s],t[s+1],s)},stopAnimation:function(){this.animatingInterval&&this.reset()},animateFadeIn:function(e){e=e||300;var t=0,s=this.createListener(function(){this.opacity=Math.min(255,Math.floor(255*(1-(e-t)/e))),this.draw(),e<=(t+=16)&&this.clearFadeInInterval()});this.animateFadeInInterval=setInterval(s,16),s()},animateFadeOut:function(e){e=e||300;var t=0,s=this.createListener(function(){e<=t?this.reset():(this.opacity=Math.floor(
Math.min(155,this.baseColor.a)*(e-t)/e),this.draw(),t+=16)});this.stopAnimation(),this.animatingInterval=setInterval(s,16),s()}}),cleverapps.Path.MAX_SEGMENTS=10,cleverapps.styles.Path={lineWidth:17,image:bundles.game.frames.line_png};var Product=function(e){if(cleverapps.extend(this,e),this.title=Messages.getLocalized(this.title),this.description=Messages.getLocalized(this.description),this.id){var t="res/fbproducts/"+(cleverapps.settings.language+"/"+(0===cleverapps.config.debugMode?"production/":""))+this.id.facebook;this.id.facebook=cleverapps.config.deployment+"/"+t}};Product.SearchProductId=function(e){if(-1!==e.indexOf(".html"))for(var t in cleverapps.config.products){var s=cleverapps.config.products[t];if(s.id&&s.id.facebook===e)return t}return e},Product.FormatUnlimitedLives=function(e,t){if("object"==typeof e)return e;var s=Math.round(cleverapps.parseInterval(e)/1e3/60),n={15:"15 minutes",10:"10 minutes",30:"30 minutes",45:"45 minutes",60:"OneHour",120:"TwoHours",
180:"ThreeHours",360:"6 hours",720:"12 hours"};return{title:(t?"messages:UnlimitedLivesShort.":"messages:UnlimitedLives.")+({1:"1 day",2:"2 day",3:"3 day",5:"5 day",7:"7 day",9:"9 day",10:"10 day"}[Math.floor(s/60/24)]||n[s]),interval:e}},Product.AddUpRewards=function(e,t){for(var s in t=t||{},e){var n=e[s];if("unlimitedLives"===s)t[s]=t[s]?t[s]+cleverapps.parseInterval(n):cleverapps.parseInterval(n);else if("boosters"===s)for(var i in t.boosters||(t.boosters={}),n)t.boosters[i]=t.boosters[i]?t.boosters[i]+parseInt(n[i]):parseInt(n[i]);else t[s]=t[s]?t[s]+parseInt(n):parseInt(n)}return t},Product.UnlimitedToHours=function(e){if(e.unlimitedLives){var t=Math.round(e.unlimitedLives/1e3/60/60);e.unlimitedLives={title:Messages.get("AMOUNT_HOURS",{amount:t}),interval:t+" hours"}}return e},Product.prototype.getCurrentPrice=function(){return this.loadedPrice?this.loadedPrice:Product.CURRENCY+" "+this.price},Product.prototype.validate=function(t,e){var s={itemId:this.itemId,price:this.price,
textPrice:this.getCurrentPrice()};this.loadedPriceAmount&&this.loadedCurrencyCode&&(s.textPrice=this.loadedPriceAmount+" "+this.loadedCurrencyCode),s.price=Math.round(s.price*cleverapps.User.calcPriceCoef()*100)/100;var n=function(){if("subscription"===this.type?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SUBSCRIPTION_BOUGHT,s):(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PRODUCT_BOUGHT,s),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PRODUCT_BOUGHT_LANGUAGE,{amount:s.price}),t&&cleverapps.payments.logPurchase(t),"growthFund"!==s.itemId||cleverapps.paymentsHistory.isPayer()||cleverapps.eventLogger.logEvent(cleverapps.EVENTS.NON_PAYER_BOUGHT_FUND),cleverapps.paymentsHistory.addPayment(this),this.favoriteId=Favorite.CalcFavorite(),this.favoriteId===s.itemId&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAVORITE_REGULAR,{amount:s.price})),this.favorite)cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAVORITE_PRODUCT_BOUGHT,{amount:s.price});else if(
"gunShot"===this.itemId)cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GUN_SHOT);else if("battlepass"===this.itemId)cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BATTLE_PASS_BOUGHT);else if(-1!==["starterPack0","starterPack","starterPack2"].indexOf(this.itemId)){var e=["starterPack0","starterPack","starterPack2"].indexOf(this.itemId);cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PACK_BOUGHT_WITH_PAYMENT),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PACK_BOUGHT+"_starterPack"+(0===e?"":"_"+e))}else-1!==["piggybank500","piggybank1800","piggybank6000","piggybank25000"].indexOf(this.itemId)?(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PIGGY_BANK),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PIGGY_BANK_LEVEL+this.piggyBankLevel)):-1!==["addMoves1","addMoves2","addMoves3","addMoves5"].indexOf(this.itemId)&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BUY_MOVES+this.itemId)
;"string"==typeof cleverapps.environment.episodeNo&&0===cleverapps.environment.episodeNo.indexOf("bonus_world_")&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PRODUCT_BOUGHT_BONUS_WORLD),cleverapps.metha.getType()===Metha.FARM&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PRODUCT_BOUGHT_BUILDING+"_"+cleverapps.farm.currentBuildingId)}.bind(this);e?cleverapps.payments.compensateValidate?cleverapps.payments.compensateValidate(n):n():cleverapps.payments.validate(t,n)},Product.prototype.showBoughtMessage=function(e){var s=this.boughtMessage||"messages:Product.YouBought",n=this.boughtMessageParams||{};n.moves=this.moves,e&&(e.gold||e.coins)&&(n.coins=e.gold||e.coins);var i=cleverapps.isLocalhost()||cleverapps.isInstant()?this.image.substr(1):cleverapps.config.deployment+this.image;cc.loader.load(i,function(e){var t=void 0;e||(t=new cc.Sprite(i)).setScale(.6*resolutionScale);cleverapps.Notification.create(s,{toReplace:n,image:t,leaveOnResize:!0})}.bind(this))},
Product.prototype.compensate=function(t){var s=this.compensateReward||this.reward;if(s){this.validate(void 0,!0),this.showBoughtMessage(s);var e=[];"growthFund"===this.itemId&&cleverapps.growthFund&&!cleverapps.growthFund.isBought()&&(s={growthFund:!0}),s.gold&&e.push("MenuBarGoldItem"),(s.lives||s.energy)&&e.push("MenuBarLivesItem"),cleverapps.metha.display({focus:"purchaseRewardWindow",control:e,action:function(e){new PurchaseRewardWindow({reward:s,callback:function(){var e=cleverapps.packManager.get();e&&e.product===this.key&&cleverapps.packManager.onBuyPack(),cleverapps.piggyBank&&cleverapps.piggyBank.getProduct().itemId===this.key&&cleverapps.piggyBank.onBuy(),t&&t()}.bind(this)}),cleverapps.metha.onceNoWindowsListener=e}.bind(this)}),cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect)}},Product.prototype.onBuyed=function(e,t,s){var n=this.key;cleverapps.payments.addClientCompensateProduct(n);var i=e;e=function(){cleverapps.payments.onPaymentFinished(),i&&i(),
cleverapps.payments.processClientCompensateProduct(n)};var o=this.reward;if(s&&(o=this.videoReward),this.showBoughtMessage(o),cleverapps.user.incProgressCompare(50),o){var a={reward:o,callback:e};cleverapps.metha.isFocused()?new PurchaseRewardWindow(a):cleverapps.metha.display({focus:"purchaseRewardWindow",control:t,action:function(e){new PurchaseRewardWindow(a),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})}else e();cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect)},Product.prototype.buy=function(n,i){var o=function(e,t,s){if(e){cleverapps.Notification.create("messages:Product.PurchaseCancelled"),cleverapps.payments.onPaymentFinished(),s&&cleverapps.metha.display({focus:"ErrorWindow",action:function(e){new ErrorWindow(s),cleverapps.metha.onceNoWindowsListener=e}})}else this.validate(t),this.onBuyed(n,i)}.bind(this),a=cleverapps.metha.focus,e=function(){var n=this.waitWindow();cleverapps.payments.open(this,function(e,t,s){n&&n(),
a!==cleverapps.metha.focus&&cleverapps.metha.isFocused()?cleverapps.metha.whenFreeFocus(function(){o(e,t,s)}):o(e,t,s)}.bind(this))}.bind(this);cc.sys.isNative||!cleverapps.payments.needSocialCheckConnection()?e():cleverapps.social.checkConnection(e)},Product.prototype.waitWindow=function(){var t;return cleverapps.metha.isFocused()?t=new WaitWindow:cleverapps.metha.display({focus:"WaitWindow",action:function(e){t=new WaitWindow,e()}}),cleverapps.waitNoMore(4e3,function(){t.close()})},Product.Create=function(e){e=Product.SearchProductId(e);var t=cleverapps.clone(cleverapps.config.products[e]||VirtualProducts[e],!0);return t.itemId=e,new Product(t)},Product.CURRENCY="$",Product.CURRENCY_CODE="USD";var BaseProductTile=cc.Node.extend({ctor:function(e,t,s){this._super(),this.tileModel=e,this.styles=t,this.options=s||{};var n=t.scale[cleverapps.wideMode.mode];this.setAnchorPoint2(),this.setContentSize2(t.width*n,t.height*n),this.addBackground(),this.addDecorators(),this.updateTileState(),
this.tileModel.onGetView=this.createListener(function(){return this}.bind(this)),this.tileModel.setStateListener(this.createListener(this.updateTileState.bind(this)),this),"buyEnergy350"===e.product.key&&0===e.product.price&&(cleverapps.lives.onShowShopForceListener=this.createListener(function(e){cleverapps.forces.create(this,e)}.bind(this)))},updateTileState:function(){this.content&&this.content.removeFromParent(),this.content=this.createContent(),this.addChild(this.content),this.tileBadge&&this.tileBadge.removeFromParent(),this.tileBadge=this.createBadge(),this.tileBadge&&this.addChild(this.tileBadge),this.options.onClicked&&!this.options.noTileClick&&(this.clickListener&&(cc.eventManager.removeListener(this.clickListener),delete this.clickListener),this.tileModel.isAvailable()&&(this.clickListener=cleverapps.UI.onClick(this,function(){this.options.onClicked(this.tileModel)}.bind(this),{swallowTouches:!1,ignoreOnTouchMoved:!0,useInteractiveScale:!0})))},addBackground:function(){
var e=this.styles.background,t=cleverapps.UI.createScale9Sprite(e.tileBg||bundles.tile_shop.frames.shop_tile_bg_png,e.adjustBackgroundCapInsets?cleverapps.UI.Scale9Rect.TwoPixelXY:cleverapps.UI.Scale9Rect.Default);if(t.setContentSize2(this.width,this.height),t.setPositionRound(this.width/2,this.height/2),this.addChild(t),e.innerBg){var s=new cc.Scale9Sprite(bundles.tile_shop.frames.window_inner_bg_png);s.setContentSize2(t.width-2*e.innerBg.padding.x,t.height-2*e.innerBg.padding.y),t.addChild(s),s.setPositionRound(e.innerBg)}e.stitches&&new StitchesComponent(t,e.stitches)},addDecorators:function(){var e=this.styles.decorators;e&&e.forEach(function(e){var t=new cc.Sprite(e.image);t.setAnchorPoint2(),t.setPositionRound(e),e.fitToBox&&cleverapps.UI.fitToBox(t,e.fitToBox),e.zOrder&&t.setLocalZOrder(e.zOrder),this.addChild(t)},this)},createBadge:function(){var e=this.tileModel.getBadge();if(e){var t=new TileBadge(e);return t.setAnchorPoint2(),t.setPositionRound(this.styles.badge),
t.setLocalZOrder(2),t.setRotation(this.styles.badge.rotation),t.setScale(this.styles.badge.scale),this.tileModel.isAvailable()||t.disable(),t}},createContent:function(){var e=this.styles,t=this.createLimit(),s=this.createIcon(),n=this.createTitle(),i=this.createDescription(),o=this.createButton(),a=[o,i,n,s,t];e.content.order===BaseProductTile.ORDER.TITLE_TOP?a=[o,i,s,n,t]:e.content.order===BaseProductTile.ORDER.TITLE_BOTTOM&&(a=[o,n,i,s,t]);var r=new cleverapps.Layout(a.filter(Boolean),{direction:cleverapps.UI.VERTICAL,margin:e.content[this.tileModel.product.itemId]&&e.content[this.tileModel.product.itemId].margin||e.content.margin});return r.setAnchorPoint2(),r.setPositionRound(this.options.contentOffset||e.content),r.setLocalZOrder(1),t&&(t.y+=e.limit.y),s&&(s.y+=e.icon.y),n&&(n.x+=e.title.x,n.y+=e.title.y),i&&(i.y+=e.description.y),o&&(o.y+=e.button.y),t&&(t.y+=e.limit.y),e.scale&&r.setScale(e.scale[cleverapps.wideMode.mode]),r},createIcon:function(){var e=new TileIcon(
this.tileModel,this.tileModel.isSmall(),{animationOverride:this.options.iconAnimationOverride,skipScale:this.options.iconSkipScale,zOrder:this.options.iconZOrder});return this.tileModel.isAvailable()||e.disable(),e},createLimit:function(){var e=this.tileModel.getProductLimit();if(e){var t=this.styles.limit,s=cleverapps.styles.FONTS.PRODUCT_TILE_LIMIT_TEXT;if(e.countdown){var n=cleverapps.UI.generateOnlyText("messages:TileShop.tile.leftTime",s),i=new cleverapps.CountDownView(new cleverapps.CountDown(e.countdown,{onFinish:this.tileModel.updateModelState.bind(this.tileModel)}),{font:s});return new cleverapps.Layout([n,i].filter(Boolean),{direction:cleverapps.UI.TOP_TO_BOTTOM,dimensions:t})}if(e.left){var o=cleverapps.UI.generateOnlyText(e.left,s);return o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),o.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),o.setDimensions(t.width,t.height),o}}},createDescription:function(){},createTitle:function(){var e=this.styles.title;if(
e&&!this.options.noTitle){var t=this.options.title_png||bundles.tile_shop.frames.shop_title;this.tileModel.isAvailable()||(t=this.options.title_png_off||bundles.tile_shop.frames.shop_title_off||t);var s=cleverapps.UI.createScale9Sprite(t,e.rect);s.setAnchorPoint2(),s.setLocalZOrder(e.zOrder),e.size&&s.setContentSize2(e.size),e.pins&&e.pins.forEach(function(e){var t=new cc.Sprite(this.tileModel.isAvailable()?bundles.tile_shop.frames.pin_png:bundles.tile_shop.frames.pin_png_off);t.setAnchorPoint2(),t.setPositionRound(e),s.addChild(t)},this);var n=this.options.titleFont||cleverapps.styles.FONTS.SHOP_LIVES_PRODUCT_TILE_TITLE||cleverapps.styles.FONTS.SMALL_WHITE_TEXT;if(this.tileModel.getRewardsIcon()){var i=new cc.Sprite(this.tileModel.getRewardsIcon());i.setAnchorPoint2();var o=cleverapps.UI.ImageFont.IsApplicable(n,this.tileModel.getTitle())?cleverapps.UI.generateImageText(this.tileModel.getTitle(),n):cleverapps.UI.generateOnlyText(this.tileModel.getTitle(),n),a=new cleverapps.Layout([i,
o],{direction:cleverapps.UI.HORIZONTAL,margin:e.margin,dimensions:{width:s.width-e.paddingX}});return a.setAnchorPoint2(),a.setPositionRound(e.text),s.addChild(a),i.y+=e.icon.y,s}var r=cleverapps.UI.generateOnlyText(this.tileModel.getTitle(),n);return r.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),r.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),r.setPositionRound(e.text),r.fitTo(s.width-e.paddingX),s.addChild(r),s}},createButton:function(){if(this.styles.button&&!this.options.noButton){var e={onClicked:this.options.onClicked,button_png:this.options.button_png,button_on_png:this.options.button_on_png,button_off_png:this.options.button_off_png};"merge"===cleverapps.config.type&&(e.button_png=e.button_png||bundles.tile_shop.frames.small_shop_button,e.button_on_png=e.button_on_png||bundles.tile_shop.frames.small_shop_button_on,e.button_on_png=e.button_on_png||bundles.tile_shop.frames.small_shop_button_off);var t=new TileButton(this.tileModel,this.tileModel.isSmall(),e)
;return t.setLocalZOrder(1),this.tileModel.isAvailable()||t.disable(),t}}});BaseProductTile.ORDER={DEFAULT:0,TITLE_TOP:1,TITLE_BOTTOM:2},cleverapps.styles.BaseProductTile={width:444,height:747,scale:[1,1,1],background:{},badge:{x:{align:"left",dx:-30},y:{align:"top",dy:30},rotation:0,scale:1},content:{x:{align:"center",dx:0},y:{align:"center",dy:0}},limit:{width:370,height:70,y:0},icon:{y:0},title:{x:0,y:0,zOrder:1,text:{x:{align:"center",dx:0},y:{align:"center",dy:0}},icon:{y:0},size:{width:480,height:135},margin:10,paddingX:120,rect:cleverapps.UI.Scale9Rect.Default},description:{y:0},button:{y:0}};var CoinsProductTile=BaseProductTile.extend({ctor:function(e,t){var s;s=e.isSmall()?CoinsProductTile.smallStyles=CoinsProductTile.smallStyles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,cleverapps.styles.CoinsProductSmallTile,!0):CoinsProductTile.largeStyles=CoinsProductTile.largeStyles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,
cleverapps.styles.CoinsProductLargeTile,!0),(t=t||{}).button_png=e.isSmall()?bundles.tile_shop.frames.small_shop_button:bundles.tile_shop.frames.feature_button_png,t.button_on_png=e.isSmall()?bundles.tile_shop.frames.small_shop_button_on:bundles.tile_shop.frames.feature_button_on_png,t.button_off_png=e.isSmall()?bundles.tile_shop.frames.small_shop_button_off:bundles.tile_shop.frames.feature_button_off_png,this._super(e,s,t)},createTitle:function(){var e;return this.tileModel.isSmall()?this.tileModel.isSmall()&&-1!==["wordsoup","olympics","crocword","magicwords"].indexOf(cleverapps.config.name)&&(e=bundles.tile_shop.frames.shop_title):e=!this.tileModel.isAvailable()&&bundles.tile_shop.frames.shop_title_best_off||bundles.tile_shop.frames.shop_title_best,new TileRewardsBlock(this.tileModel,{bgImage:e})}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{PRODUCT_TILE_LIMIT_TEXT:{size:35,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}
}),cleverapps.styles.CoinsProductSmallTile={width:240,height:350,content:{margin:15},badge:{x:{align:"right",dx:35},y:{align:"top",dy:40},scale:.8}},cleverapps.styles.CoinsProductLargeTile={};var PackProductTile=BaseProductTile.extend({ctor:function(e,t){var s=PackProductTile.styles=PackProductTile.styles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,cleverapps.styles.PackProductTile,!0);(t=t||{}).titleFont=cleverapps.styles.FONTS.TILE_SHOP_WINDOW_PACK_TITLE,this._super(e,s,t)},createDescription:function(){return new TileRewardsBlock(this.tileModel,{bgSize:{height:this.tileModel.getProductLimit()&&this.styles.limit.rewardsBlock.height}})}});cleverapps.styles.PackProductTile={width:340,height:600,scale:[1,1.2,1.2],content:{y:{align:"center",dy:-20},margin:10},limit:{rewardsBlock:{height:70}}};var LivesProductTile=BaseProductTile.extend({ctor:function(e,t){var s=LivesProductTile.styles=LivesProductTile.styles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,
cleverapps.styles.LivesProductTile,!0);(t=t||{}).noTileClick=!0,t.iconSkipScale=!0,t.iconAnimationOverride=e.product.animation?{json:bundles.tile_shop.jsons.shop_lives_animations_json,delay:0}:{},this._super(e,s,t)},createDescription:function(){var e=this.tileModel.getProductDescription();if(e){if("string"==typeof e&&(e={title:e}),e.reward)return new TileRewardsBlock(this.tileModel,{noBg:this.styles.rewardsBlock.noBg,font:cleverapps.styles.FONTS.LIVES_SHOP_OFFER_TEXT_SMALL,bgSize:{width:this.styles.rewardsBlock.width,height:this.styles.rewardsBlock.height}});var t=this.styles.description,s=cleverapps.styles.FONTS.SHOP_LIVES_PRODUCT_TILE_DESCRIPTION_TEXT||cleverapps.styles.FONTS.SMALL_WHITE_TEXT;if(e.countdown){var n=cleverapps.UI.generateOnlyText("messages:TileShop.tile.leftTime",s),i=new cleverapps.CountDownView(new cleverapps.CountDown(e.countdown,{onFinish:this.tileModel.updateModelState.bind(this.tileModel)}),{font:s});if(bundles.tile_shop.frames.shop_timer_icon_png){
var o=new cc.Sprite(bundles.tile_shop.frames.shop_timer_icon_png);i=new cleverapps.Layout([o,i],{direction:cleverapps.UI.HORIZONTAL,margin:t.timer.margin})}return new cleverapps.Layout([i,n],{direction:cleverapps.UI.VERTICAL,dimensions:t})}if(e.text){var a=cleverapps.UI.generateOnlyText(e.text,s);return a.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),a.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),a.setDimensions(t.width,t.height),a}}},createLimit:function(){if("merge"!==cleverapps.config.type)return this._super();var e=this.tileModel.getProductLimit();if(e){var t=this.styles.limit;if(e.left){var s=cleverapps.UI.generateOnlyText(e.left,cleverapps.styles.FONTS.SHOP_LIVES_PRODUCT_TILE_DESCRIPTION_TEXT);return s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),s.setDimensions(t.width,t.height),s}}}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{SHOP_LIVES_PRODUCT_TILE_DESCRIPTION_TEXT:{size:30,
color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT}}),cleverapps.styles.LivesProductTile={width:340,height:550,content:{x:{align:"center"},y:{align:"bottom",dy:30},margin:20},button:{width:225,height:75},description:{width:320,height:70,timer:{margin:6}},badge:{x:{align:"right",dx:-5},y:{align:"top",dy:-58},rotation:0},limit:{width:370,height:70},rewardsBlock:{width:300,height:70}};var SoftCurrencyTile=BaseProductTile.extend({ctor:function(e,t){var s=SoftCurrencyTile.styles=SoftCurrencyTile.styles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,cleverapps.styles.SoftCurrencyTile,!0);(t=t||{}).noTileClick=!0,t.iconSkipScale=!0,t.iconAnimationOverride=e.product.animation?{json:bundles.tile_shop.jsons.shop_lives_animations_json,delay:0}:{},this._super(e,s,t)}});cleverapps.styles.SoftCurrencyTile={background:{adjustBackgroundCapInsets:!0},content:{y:{align:"bottom",dy:70},margin:15},limit:{width:370,height:70},badge:{x:{align:"right",dx:-5},y:{align:"top",dy:-58},rotation:0}}
;var SubscriptionTile=BaseProductTile.extend({ctor:function(e,t){var s=SubscriptionTile.styles=SubscriptionTile.styles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,cleverapps.styles.SubscriptionTile,!0);(t=t||{}).onClicked=this.onClick.bind(this),t.iconZOrder=s.icon.zOrder,t.iconAnimationOverride={json:bundles.tile_shop.jsons.prev_icon_light_json,delay:0,jsonzOrder:s.icon.animation.zOrder},t.titleFont=cleverapps.styles.FONTS.TILE_SHOP_WINDOW_PACK_TITLE,t.title_png=bundles.tile_shop.frames.shop_title_prem||bundles.tile_shop.frames.shop_title_best,t.title_png_off=bundles.tile_shop.frames.shop_title_prem_off||bundles.tile_shop.frames.shop_title_best_off,this._super(e,s,t)},createDescription:function(){var e=this.styles.description,t=new cc.Node;if(t.setAnchorPoint2(),t.setContentSize2(e),bundles.tile_shop.frames.prem_rewards_bg){var s=cleverapps.UI.createScale9Sprite(bundles.tile_shop.frames.prem_rewards_bg,cleverapps.UI.Scale9Rect.TwoPixelY);s.setContentSize2(e),
t.addChild(s),s.setPositionRound(t.width/2,t.height/2),this.tileModel.isAvailable()||(s.setOpacity(160),s.setColor(new cc.Color(200,200,200,255)))}var n,i=this.tileModel.getDescription();return i.title?((n=cleverapps.UI.generateOnlyText(i.title,cleverapps.styles.FONTS.TILE_REWARDS_HEADER)).setDimensions(e.NATextWidth,0),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.fitToHeight(.9*t.height)):n=new cleverapps.Layout(this.createDescriptionItems(i.rewards),{direction:cleverapps.UI.VERTICAL,margin:e.margin}),n.setPositionRound(e.content),t.addChild(n),t},createDescriptionItems:function(e){var t=this.styles.description,s=cleverapps.UI.generateOnlyText(this.tileModel.getHeader(),cleverapps.styles.FONTS.TILE_REWARDS_HEADER);s.fitTo(t.text.width);var n=cleverapps.subscription.getLeftTime();if(n){var i=new cleverapps.CountDownView(new cleverapps.CountDown(n,{onFinish:this.tileModel.updateModelState.bind(this.tileModel)}),{font:cleverapps.styles.FONTS.TILE_REWARDS}),o=new cc.Sprite(
bundles.tile_shop.frames.shop_timer_icon_png);return o.setScale(t.timer.scale),[new cleverapps.Layout([o,i],{direction:cleverapps.UI.HORIZONTAL,margin:t.timer.margin}),s]}var a=2;"merge"===cleverapps.config.type&&(a=3),"olympics"===cleverapps.config.name&&(a=1);var r={gold:bundles.reward_icons.frames.gold_small_png,boosters_10:bundles.reward_icons.frames.magnet_small_png,boosters_11:bundles.reward_icons.frames.dice_small_png,boosters_12:bundles.reward_icons.frames.joker_small_png,boosters_13:bundles.reward_icons.frames.highlight_small,boosters_14:bundles.reward_icons.frames.eye_small,boosters_15:bundles.reward_icons.frames.hint_small,boosters_0:bundles.reward_icons.frames.cellbooster_small,boosters_1:bundles.reward_icons.frames.linebooster_small,boosters_2:bundles.reward_icons.frames.colorbooster_small,boosters_8:bundles.reward_icons.frames.pot_small,boosters_9:bundles.reward_icons.frames.hat_small,unlimitedLives:bundles.reward_icons.frames.life_unlim_small,
exp:bundles.reward_icons.frames.reward_exp_small_png};return[new RewardsListComponent(e,{font:cleverapps.styles.FONTS.TILE_REWARDS,iconScale:"merge"===cleverapps.config.type?.5:1,margin:t.rewardsMargin,rowMargin:t.rowMargin,amountInRow:a,reward:{direction:cleverapps.UI.HORIZONTAL,margin:t.amountMargin},icons:r,short:!0}),s]},createButton:function(){var e=this.styles.button,t=bundles.tile_shop.frames.feature_button_png,s=bundles.tile_shop.frames.feature_button_on_png,n=bundles.tile_shop.frames.feature_button_off_png;"merge"===cleverapps.config.type&&(t=bundles.tile_shop.frames.small_shop_button,s=bundles.tile_shop.frames.small_shop_button_on,n=bundles.tile_shop.frames.small_shop_button_off);var i={button_png:t,button_on_png:s,button_off_png:n,contentOff:cleverapps.UI.generateOnlyText(this.tileModel.getDisabledPrice(),cleverapps.styles.FONTS.SUBSCRIPTION_TILE_BUTTON_TEXT||cleverapps.styles.FONTS.BUTTON_TEXT),onClicked:this.onClick.bind(this)},o=cleverapps.UI.generateOnlyText(
this.tileModel.getCurrentActionText(),cleverapps.styles.FONTS.SUBSCRIPTION_TILE_BUTTON_TEXT||cleverapps.styles.FONTS.BUTTON_TEXT);o.setDimensions(e.txtWidth,0),o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),o.fitTo(void 0,e.txtHeight),i.content=o;var a=new TileButton(this.tileModel,this.tileModel.isSmall(),i);return a.setLocalZOrder(1),this.tileModel.isAvailable()||a.disable(),a},onClick:function(){cleverapps.subscription.isRewardReady()?new SubscriptionRewardWindow:new SubscriptionWindow}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{TILE_REWARDS:{name:"default",size:45,color:cleverapps.styles.COLORS.WHITE},TILE_REWARDS_HEADER:{name:"default",size:35,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.SubscriptionTile={width:460,scale:[1,1.2,1.2],content:{margin:10},background:{adjustBackgroundCapInsets:!0,tileBg:bundles.tile_shop.frames.prem_tile_bg},description:{height:120,width:380,margin:0,rewardsMargin:5,amountMargin:0,content:{x:{align:"center"},y:{align:"center"
}},NATextWidth:300,timer:{margin:10,scale:1.3},text:{width:350}},icon:{zOrder:-1,animation:{zOrder:-1}},button:{txtWidth:165,txtHeight:75}};var GrowthFundTile=BaseProductTile.extend({ctor:function(e,t){var s=GrowthFundTile.styles=GrowthFundTile.styles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,cleverapps.styles.GrowthFundTile,!0);(t=t||{}).onClicked=this.onClick.bind(this),t.iconZOrder=s.icon.zOrder,t.iconSkipScale=!0,t.iconAnimationOverride={json:bundles.tile_shop.jsons.prev_icon_light_json,delay:0,jsonzOrder:s.icon.animation.zOrder},t.titleFont=cleverapps.styles.FONTS.TILE_SHOP_WINDOW_PACK_TITLE,this._super(e,s,t)},createDescription:function(){var e=this.styles.description,t=cleverapps.UI.createScale9Sprite(bundles.tile_shop.frames.prem_rewards_bg,cleverapps.UI.Scale9Rect.TwoPixelY);t.setContentSize2(e),this.tileModel.isAvailable()||(t.setOpacity(160),t.setColor(new cc.Color(200,200,200,255)));var s=cleverapps.UI.generateOnlyText(
this.tileModel.getProductDescription(),cleverapps.styles.FONTS.TILE_REWARDS,data);return s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(e.text.width,0),s.fitTo(void 0,e.text.height),t.addChild(s),s.setPositionRound(e.text),t},createButton:function(){var e=this.styles.button,t={button_png:bundles.tile_shop.frames.small_shop_button,button_on_png:bundles.tile_shop.frames.small_shop_button_on,button_off_png:bundles.tile_shop.frames.small_shop_button_off,onClicked:this.onClick.bind(this)},s=cleverapps.humanUnReadableNumber(GrowthFund.LEVELS.start);t.contentOff=cleverapps.UI.generateOnlyText("messages:TileShop.tile.level",cleverapps.styles.FONTS.BUTTON_TEXT,{level:cleverapps.humanReadableNumber(s.episode||0,s.level||0)});var n="TileShop.growthFund.button";cleverapps.growthFund.findFirst(GrowthFund.STATE.READY)&&cleverapps.growthFund.isBought()&&(n="Claim");var i=cleverapps.UI.generateOnlyText(Messages.get(n),cleverapps.styles.FONTS.BUTTON_TEXT);i.setDimensions(e.txtWidth,
0),i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.fitToHeight(e.txtHeight),t.content=i;var o=new TileButton(this.tileModel,this.tileModel.isSmall(),t);return o.setLocalZOrder(1),this.tileModel.isAvailable()||o.disable(),o},onClick:function(){new GrowthFundWindow}});cleverapps.styles.GrowthFundTile={width:460,content:{margin:10},background:{adjustBackgroundCapInsets:!0,tileBg:bundles.tile_shop.frames.prem_tile_bg},icon:{zOrder:-1,animation:{zOrder:-1}},description:{height:120,width:380,text:{width:325,height:90,x:{align:"center",dx:0},y:{align:"center",dy:0}}},button:{txtWidth:165,txtHeight:75}};var TileModel=function(e){this.product=e,this.isVideoProduct=this.constructor===TileModel&&cleverapps.flags.nopayments,this.onUpdateTileModel=function(){},this.onGetView=function(){}};TileModel.prototype.videoPrice=function(){return this.product.videoPrice?this.product.videoPrice:Math.ceil(10*this.product.price)},TileModel.prototype.currentVideoProgress=function(){
return cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.PRODUCT_VIDEO_PROGRESS+this.product.itemId)||0},TileModel.prototype.setStateListener=function(e){this.onUpdateTileModel=e},TileModel.prototype.updateModelState=function(){this.onUpdateTileModel()},TileModel.prototype.getCurrentPrice=function(){return this.isVideoProduct?this.currentVideoProgress()+"/"+this.videoPrice():this.product.getCurrentPrice()},TileModel.prototype.getDisabledPrice=function(){return"messages:Claimed"},TileModel.prototype.isAttention=function(){return this.isAvailable()&&this.product.attention},TileModel.prototype.getTitle=function(){return this.product.title},TileModel.prototype.getDescription=function(){return this.product.description},TileModel.prototype.getPrice=function(){return this.product.price},TileModel.prototype.getItemId=function(){return this.product.itemId},TileModel.prototype.getIcon=function(){return this.product.icon},TileModel.prototype.getViewClassName=function(){
return this.product.ViewClassName||CoinsProductTile},TileModel.prototype.getPriceIcon=function(){return this.isVideoProduct?bundles.shared.frames.adicon_png:this.product.priceIcon},TileModel.prototype.getProductDescription=function(){},TileModel.prototype.getProductLimit=function(){},TileModel.prototype.getRewardsIcon=function(){return this.product.rewardsIcon},TileModel.prototype.getReward=function(){return this.isVideoProduct&&this.product.videoReward?this.product.videoReward:this.product.reward},TileModel.prototype.isEnabled=function(){return"unlimitedLives"!==this.product.key||!cleverapps.flags.nopayments},TileModel.prototype.checkDisabledProducts=function(){if(this.product.disableProductIds)for(var e in this.product.disableProductIds){var t=TileModel.Create(Product.Create(this.product.disableProductIds[e]));if(t.isEnabled()&&t.isAvailable())return!1}return!0},TileModel.prototype.buy=function(t,s){if(!this.isVideoProduct)return this.product.buy(t,s)
;cleverapps.rewardedAdsManager.loadAndPlay(function(){var e=this.currentVideoProgress();e++,cleverapps.eventLogger.logEvent("video_product_watchad"),e>=this.videoPrice()&&(e=0,cleverapps.eventLogger.logEvent("video_product_buy"),this.product.onBuyed(t,s,!0)),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.PRODUCT_VIDEO_PROGRESS+this.product.itemId,e),this.onUpdateTileModel()}.bind(this))},TileModel.prototype.isAvailable=function(){return!0},TileModel.prototype.isAppropriate=function(){return this.badge},TileModel.prototype.getBadge=function(){return this.badge?this.badge:this.product.discount?{type:"discount",text:this.product.discount}:this.product.badge?{text:this.product.badge}:void 0},TileModel.prototype.isSmall=function(){return!(this.badge&&"bestSeller"===this.badge.type)&&"merge"!==cleverapps.config.type&&this.getViewClassName()!==PackProductTile},TileModel.prototype.getView=function(){return this.onGetView()},TileModel.Create=function(e){var t=TileModel
;return e.TileModelClass&&(t=e.TileModelClass),new t(e)};var AskLivesTileModel=function(e){TileModel.call(this,e)};AskLivesTileModel.prototype=Object.create(TileModel.prototype),(AskLivesTileModel.prototype.constructor=AskLivesTileModel).prototype.getCurrentPrice=function(){return"messages:FREE"},AskLivesTileModel.prototype.getProductDescription=function(){return{text:"messages:AskLivesProduct.description"}},AskLivesTileModel.prototype.isEnabled=function(){return-1===["huzcom","plinga","pliega"].indexOf(cleverapps.User.calcSource())},AskLivesTileModel.prototype.buy=function(s){cleverapps.social.checkConnection(function(){new SelectFriendWindow("askLives",function(e,t){cleverapps.social.sendRequest(e,"askLiveRequest",function(){e.forEach(function(e){cleverapps.friends.inApp(e)&&levels.friendRequests.sendServerRequest(e,levels.FriendRequest.TYPE_ASK_LIVE)}),t(),s()})})}.bind(this))};var RefillLivesTileModel=function(e){TileModel.call(this,e)};RefillLivesTileModel.prototype=Object.create(
TileModel.prototype),(RefillLivesTileModel.prototype.constructor=RefillLivesTileModel).prototype.getReward=function(){return{lives:cleverapps.Lives.MAX_REGEN_AMOUNT}},RefillLivesTileModel.prototype.getProductDescription=function(){return{reward:!0}},RefillLivesTileModel.prototype.getCurrentPrice=function(){return RefillLivesTileModel.PRICE},RefillLivesTileModel.prototype.buy=function(e){return!!levels.user.takeGold(RefillLivesTileModel.PRICE)&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LIVES_BOUGHT),cleverapps.lives.give(this.getReward().lives),cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect),e(),!0)},RefillLivesTileModel.PRICE=100,(UnlimitedLivesTileModel=function(e){TileModel.call(this,e)}).prototype=Object.create(TileModel.prototype),(UnlimitedLivesTileModel.prototype.constructor=UnlimitedLivesTileModel).prototype.getProductDescription=function(){return{reward:!0}};var SoftCurrencyTileModel=function(e){cleverapps.flags.softCurrencyRealProduct&&(e=Product.Create(
e.realProductId),this.realProduct=!0),TileModel.call(this,e)};SoftCurrencyTileModel.prototype=Object.create(TileModel.prototype),(SoftCurrencyTileModel.prototype.constructor=SoftCurrencyTileModel).prototype.getTitle=function(){return this.realProduct?this.product.title:Messages.getLocalized(this.product.title,{amount:this.getReward()})},SoftCurrencyTileModel.prototype.getCurrentPrice=function(){return this.realProduct?this.product.getCurrentPrice():this.getPrice()},SoftCurrencyTileModel.prototype.buy=function(e,t){if(this.realProduct)return this.product.buy(e,t);if(levels.user.takeGold(this.getPrice())){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SOFT_CURRENCY_BUY,{amount:this.getReward()}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SOFT_CURRENCY_COST,{amount:this.getPrice()});var s=Game.currentGame,n=this.getReward();return s.setCoins(s.coins+n),e(),!0}return!1};var BuyEnergyTileModel=function(e){TileModel.call(this,e),this.timeout=this.product.timeout||0,
cleverapps.config.debugMode&&this.timeout&&(this.timeout=cleverapps.parseInterval("5 minutes"))};BuyEnergyTileModel.prototype=Object.create(TileModel.prototype),(BuyEnergyTileModel.prototype.constructor=BuyEnergyTileModel).prototype.getTitle=function(){return Messages.getLocalized(this.product.title,{restoreAmount:this.getRestoreAmount()})},BuyEnergyTileModel.prototype.isEnabled=function(){return!this.isAvailable()||this.checkDisabledProducts()},BuyEnergyTileModel.prototype.getRestoreAmount=function(){return this.product.reward},BuyEnergyTileModel.prototype.getCurrentPrice=function(){return this.product.price},BuyEnergyTileModel.prototype.isAvailable=function(){return 0===this.product.price||Date.now()>=this.getNextBuyTime()},BuyEnergyTileModel.prototype.getBadge=function(){return this.badge?this.badge:this.product.price&&this.product.discount?{type:"discount",text:this.product.discount}:void 0},BuyEnergyTileModel.prototype.getProductDescription=function(){return{
text:"messages:BuyEnergyProduct.description",countdown:Math.max(0,this.getNextBuyTime()-Date.now())}},BuyEnergyTileModel.prototype.getNextBuyTime=function(){return this.timeout+cleverapps.energyProducts.getBuyTime(this.product.key)},BuyEnergyTileModel.prototype.buy=function(e){return!!this.isAvailable()&&(!!Game.currentGame.takeCoins(this.getCurrentPrice())&&(0!==this.product.price&&(this.timeout&&cleverapps.energyProducts.updateBuyTime(this.product.key),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LIVES_BOUGHT)),cleverapps.lives.give(this.getRestoreAmount()),e(),!0))};var EnergyLotteryTileModel=function(e){TileModel.call(this,e)};EnergyLotteryTileModel.prototype=Object.create(TileModel.prototype),(EnergyLotteryTileModel.prototype.constructor=EnergyLotteryTileModel).prototype.setStateListener=function(e){Game.currentGame.energyLottery.onLotteryTileChanged=e},EnergyLotteryTileModel.prototype.getTitle=function(){return Messages.getLocalized(this.product.title,{
restoreAmount:Game.currentGame.energyLottery.maxValue()})},EnergyLotteryTileModel.prototype.getCurrentPrice=function(){return"messages:Claim"},EnergyLotteryTileModel.prototype.getDisabledPrice=function(){return Game.currentGame.energyLottery.isAvailable()?"messages:Claimed":Messages.get("TileShop.tile.level",{level:cleverapps.humanReadableNumber(EnergyLottery.AVAILABLE.episode,EnergyLottery.AVAILABLE.level)})},EnergyLotteryTileModel.prototype.isAvailable=function(){return Game.currentGame.energyLottery.isReady()},EnergyLotteryTileModel.prototype.getProductDescription=function(){return{text:"messages:EnergyLotteryProduct.description",countdown:Game.currentGame.energyLottery.getTimeLeft()}},EnergyLotteryTileModel.prototype.buy=function(){return!!this.isAvailable()&&(new EnergyLotteryWindow,!0)};var LimitedVideoTileModel=function(e){TileModel.call(this,e),this.reward={},this.baseReward=cleverapps.flags.videoAdsMainMonetization&&this.product.mainMonetizationReward||this.product.reward,
this.baseReward.gold&&(this.reward.gold=this.processReward(this.baseReward.gold)),this.baseReward.lives&&(this.reward.lives=this.processReward(this.baseReward.lives)),this.baseReward.coins&&(this.reward.coins=this.processReward(this.baseReward.coins)),cleverapps.adsLimits.update()};LimitedVideoTileModel.prototype=Object.create(TileModel.prototype),(LimitedVideoTileModel.prototype.constructor=LimitedVideoTileModel).prototype.isSmall=function(){return"merge"!==cleverapps.config.type&&this.getViewClassName()===LivesProductTile},LimitedVideoTileModel.prototype.getTitle=function(){var e=this.baseReward.gold||this.baseReward.lives||this.baseReward.coins;return Array.isArray(e)?Messages.getLocalized(this.product.title,{minAmount:e[0],maxAmount:e[1]}):Messages.getLocalized(this.product.title,{restoreAmount:e})},LimitedVideoTileModel.prototype.processReward=function(e){return Array.isArray(e)?cleverapps.Random.random(e[0],e[1]):e},LimitedVideoTileModel.prototype.setStateListener=function(e){
cleverapps.adsLimits.onUpdateListeners[this.product.itemId]=e},LimitedVideoTileModel.prototype.updateModelState=function(){cleverapps.adsLimits.update()},LimitedVideoTileModel.prototype.isEnabled=function(){return RewardedAdsManager.IsEnabled()},LimitedVideoTileModel.prototype.isAvailable=function(){return cleverapps.adsLimits.state(this.product.adsLimit)===AdsLimits.STATE_READY},LimitedVideoTileModel.prototype.getReward=function(){return this.baseReward},LimitedVideoTileModel.prototype.getDisabledPrice=function(){if(cleverapps.adsLimits.state(this.product.adsLimit)===AdsLimits.STATE_UNAVAILABLE)return Messages.get("TileShop.tile.level",{level:cleverapps.adsLimits.getLimitLevel(this.product.adsLimit)})},LimitedVideoTileModel.prototype.getPriceIcon=function(){return bundles.shared.frames.adicon_png},LimitedVideoTileModel.prototype.getCurrentPrice=function(){return"messages:Watch"},LimitedVideoTileModel.prototype.getProductLimit=function(){if(-1===[AdsLimits.STATE_UNAVAILABLE,
AdsLimits.STATE_LIMITED].indexOf(cleverapps.adsLimits.state(this.product.adsLimit)))var e=Messages.getLocalized("messages:TileShop.tile.left",{amount:cleverapps.adsLimits.getLimitLeftCount(this.product.adsLimit)});if(cleverapps.adsLimits.state(this.product.adsLimit)===AdsLimits.STATE_LIMITED)var t=cleverapps.adsLimits.getLimitLeftTime(this.product.adsLimit);return{left:e,countdown:t}},LimitedVideoTileModel.prototype.getProductDescription=function(){if("merge"!==cleverapps.config.type)return{reward:!0};if(cleverapps.adsLimits.state(this.product.adsLimit)===AdsLimits.STATE_LIMITED)var e=cleverapps.adsLimits.getLimitLeftTime(this.product.adsLimit);return{text:this.product.description,countdown:e}},LimitedVideoTileModel.prototype.buy=function(e){var t=cleverapps.metha.controls;cleverapps.rewardedAdsManager.playRewarded(function(){cleverapps.adsLimits.watch(this.product.adsLimit),cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect),cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.SHOP_BOUGHT+"_"+this.product.itemId),this.reward.gold?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SHOP_BOUGHT_AMOUNT+"_"+this.product.itemId,{amount:this.reward.gold}):this.reward.coins&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SHOP_BOUGHT_AMOUNT+"_"+this.product.itemId,{amount:this.reward.coins}),cleverapps.metha.isFocused()?new RewardWindow({reward:this.reward}):cleverapps.metha.display({focus:"energyRewardWindow",control:t,action:function(e){new RewardWindow({reward:this.reward}),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})}.bind(this))},(SubscriptionTileModel=function(e){TileModel.call(this,e)}).prototype=Object.create(TileModel.prototype),(SubscriptionTileModel.prototype.constructor=SubscriptionTileModel).prototype.getReward=function(){var e=cleverapps.clone(RewardsConfig.Subscription,!0);return e.worker&&e.worker.subscription&&!e.worker.amount&&(e.worker.amount=1),e},SubscriptionTileModel.prototype.getTitle=function(){
return Messages.get("TileShop.subscription.title")},SubscriptionTileModel.prototype.getViewClassName=function(){return SubscriptionTile},SubscriptionTileModel.prototype.getHeader=function(){return cleverapps.subscription.isActive()?Messages.get(cleverapps.subscription.isRewardReady()?"TileShop.subscription.reward":"TileShop.subscription.next"):Messages.get("TileShop.subscription.everyday")},SubscriptionTileModel.prototype.getCurrentActionText=function(){return Messages.get(cleverapps.subscription.isRewardReady()?"Claim":"TileShop.subscription.details")},SubscriptionTileModel.prototype.isEnabled=function(){return Subscription.IsModelAvailable()&&cleverapps.environment.isMainScene()},SubscriptionTileModel.prototype.isAvailable=function(){return Subscription.IsAvailable()&&!cleverapps.subscription.getLeftTime()},SubscriptionTileModel.prototype.isAttention=function(){return cleverapps.subscription&&cleverapps.subscription.isRewardReady()},
SubscriptionTileModel.prototype.setStateListener=function(e){this.onUpdateTileModel=e,cleverapps.subscription.onChangeStateListeners.shopTile=e},SubscriptionTileModel.prototype.isSmall=function(){return!1},SubscriptionTileModel.prototype.getDescription=function(){var e={};return Subscription.IsAvailable()?e.rewards=this.getReward():e.title="messages:TileShop.subscription.reachLvl",e},SubscriptionTileModel.prototype.getDisabledPrice=function(){return Messages.get(Subscription.IsAvailable()?"Claim":"TileShop.tile.level",{level:cleverapps.humanReadableNumber(Subscription.AVAILABLE.episode||0,Subscription.AVAILABLE.level||0)})},SubscriptionTileModel.prototype.getRewardsIcon=function(){return bundles.tile_shop.frames.prem_crown},(GrowthFundTileModel=function(e){TileModel.call(this,e)}).prototype=Object.create(TileModel.prototype),(GrowthFundTileModel.prototype.constructor=GrowthFundTileModel).prototype.isAttention=function(){return cleverapps.growthFund&&cleverapps.growthFund.isBought(
)&&cleverapps.growthFund.isRewardReady()},GrowthFundTileModel.prototype.isEnabled=function(){return cleverapps.growthFund&&cleverapps.environment.isMainScene()},GrowthFundTileModel.prototype.isAvailable=function(){return cleverapps.growthFund&&cleverapps.growthFund.isActive()},GrowthFundTileModel.prototype.setStateListener=function(e,t){cleverapps.growthFund.on("updateState",e,t)},GrowthFundTileModel.prototype.getProductDescription=function(){var e="",t=void 0;if(cleverapps.growthFund.isBought())if(cleverapps.growthFund.findFirst(GrowthFund.STATE.READY))e="messages:TileShop.growthFund.ready";else{var s=cleverapps.growthFund.findFirst(GrowthFund.STATE.INSUFFICIENT);s?(e="messages:TileShop.growthFund.reachLevel",t={level:s.levelNo+1}):e="messages:TileShop.growthFund.allReceived"}else e="messages:TileShop.growthFund.info";return Messages.get(e,t)},GrowthFundTileModel.prototype.isSmall=function(){return!1};var MoreTileModel=function(e){TileModel.call(this,{}),this.tileModels=e}
;MoreTileModel.prototype=Object.create(TileModel.prototype),(MoreTileModel.prototype.constructor=MoreTileModel).prototype.isEnabled=function(){return bundles.tile_shop.frames.more_button_png},MoreTileModel.prototype.isAvailable=function(){return!0},MoreTileModel.prototype.isSmall=function(){return!0},MoreTileModel.prototype.getViewClassName=function(){return MoreTile},MoreTileModel.prototype.isAppropriate=function(){return!1},MoreTileModel.prototype.isAttention=function(){return this.tileModels.some(function(e){return!e.getView()&&e.isAttention()})},MoreTileModel.prototype.buy=function(e,t){return new ShopWindow({showAll:!0,tab:ShopWindow.TABS.HARD_CURRENCY}),e(),!0},MoreTileModel.prototype.getProductDescription=function(){},MoreTileModel.prototype.getProductLimit=function(){},MoreTileModel.prototype.getBadge=function(){};var VirtualProducts={askLives:{icon:"askLives_png",title:"messages:LivesShopWindow.products.askLives",TileModelClass:AskLivesTileModel,ViewClassName:LivesProductTile
},refillLives:{icon:"refillLives_5_png",title:"messages:LivesShopWindow.products.refillLives",priceIcon:bundles.reward_icons.frames.gold_small_png,TileModelClass:RefillLivesTileModel,ViewClassName:LivesProductTile},buyEnergy350:{icon:"energy_for_coins_png",title:"messages:LivesShopWindow.products.buyEnergy",priceIcon:bundles.reward_icons.frames.shop_coin_png,rewardsIcon:bundles.reward_icons.frames.shop_energy_png,price:350,reward:90,discount:"66%",timeout:cleverapps.parseInterval("24 hour"),TileModelClass:BuyEnergyTileModel,ViewClassName:LivesProductTile},buyEnergy700:{icon:"energy_for_coins_png",title:"messages:LivesShopWindow.products.buyEnergy",priceIcon:bundles.reward_icons.frames.shop_coin_png,rewardsIcon:bundles.reward_icons.frames.shop_energy_png,price:700,reward:90,discount:"33%",disableProductIds:["buyEnergy350"],timeout:cleverapps.parseInterval("24 hour"),TileModelClass:BuyEnergyTileModel,ViewClassName:LivesProductTile},buyEnergy:{icon:"energy_for_coins_png",
title:"messages:LivesShopWindow.products.buyEnergy",priceIcon:bundles.reward_icons.frames.shop_coin_png,rewardsIcon:bundles.reward_icons.frames.shop_energy_png,price:1050,reward:90,disableProductIds:["buyEnergy350","buyEnergy700"],TileModelClass:BuyEnergyTileModel,ViewClassName:LivesProductTile},livesForVideo:{icon:"lives_for_video_png",title:"messages:LivesShopWindow.products.livesForVideo",description:"messages:LivesForVideoProduct.description",rewardsIcon:bundles.reward_icons.frames.shop_energy_png,reward:{lives:"merge"===cleverapps.config.type?30:1},adsLimit:AdsLimits.TYPES.LIVES_FOR_VIDEO,TileModelClass:LimitedVideoTileModel,ViewClassName:LivesProductTile},livesForVideoShort:{icon:"lives_for_video_png",title:"messages:LivesShopWindow.products.livesForVideoShort",description:"messages:LivesForVideoProduct.description",rewardsIcon:bundles.reward_icons.frames.shop_energy_png,reward:{lives:5},adsLimit:AdsLimits.TYPES.ENERGY_FOR_VIDEO_SHORT,TileModelClass:LimitedVideoTileModel,
ViewClassName:LivesProductTile},energyLottery:{icon:"energy_lottery_png",title:"messages:LivesShopWindow.products.energyLottery",attention:!0,TileModelClass:EnergyLotteryTileModel,ViewClassName:LivesProductTile},softCurrencyVerySmall:{icon:"soft_currency_very_small_png",title:"messages:LivesShopWindow.products.softCurrencyVerySmall",priceIcon:bundles.reward_icons.frames.gold_small_png,rewardsIcon:bundles.reward_icons.frames.shop_coin_png,realProductId:"coins100",price:30,reward:100,TileModelClass:SoftCurrencyTileModel,ViewClassName:SoftCurrencyTile},softCurrencySmall:{icon:"soft_currency_small_png",title:"messages:LivesShopWindow.products.softCurrencySmall",priceIcon:bundles.reward_icons.frames.gold_small_png,rewardsIcon:bundles.reward_icons.frames.shop_coin_png,realProductId:"coins300",price:80,reward:300,TileModelClass:SoftCurrencyTileModel,ViewClassName:SoftCurrencyTile},softCurrencyMedium:{icon:"soft_currency_medium_png",title:"messages:LivesShopWindow.products.softCurrencyMedium",
priceIcon:bundles.reward_icons.frames.gold_small_png,rewardsIcon:bundles.reward_icons.frames.shop_coin_png,realProductId:"coins1000",price:250,reward:1e3,TileModelClass:SoftCurrencyTileModel,ViewClassName:SoftCurrencyTile},softCurrencyLarge:{icon:"soft_currency_large_png",title:"messages:LivesShopWindow.products.softCurrencyLarge",priceIcon:bundles.reward_icons.frames.gold_small_png,rewardsIcon:bundles.reward_icons.frames.shop_coin_png,realProductId:"coins3000",price:600,reward:3e3,discount:"50%",TileModelClass:SoftCurrencyTileModel,ViewClassName:SoftCurrencyTile},goldForVideo:{icon:"gold_for_video_png",attention:!0,title:"messages:TileShop.products.goldForVideo",rewardsIcon:bundles.reward_icons.frames.shop_gold_png,reward:{gold:"merge"===cleverapps.config.type?[1,3]:10},mainMonetizationReward:{gold:"merge"===cleverapps.config.type?[3,8]:10},adsLimit:AdsLimits.TYPES.GOLD_FOR_VIDEO,TileModelClass:LimitedVideoTileModel,ViewClassName:-1!==["crocword","olympics","wordsoup","mergecraft",
"wondermerge","magicwords"].indexOf(cleverapps.config.name)?CoinsProductTile:PackProductTile},coinsForVideo:{icon:"coins_for_video_png",attention:!0,title:"messages:TileShop.tile.range",rewardsIcon:bundles.reward_icons.frames.shop_coin_png,reward:{coins:[4,10]},mainMonetizationReward:{coins:[10,30]},adsLimit:AdsLimits.TYPES.COINS_FOR_VIDEO,TileModelClass:LimitedVideoTileModel,ViewClassName:SoftCurrencyTile}};!function(){for(var e in VirtualProducts)VirtualProducts[e].key=e}();var Terms=cc.Node.extend({ctor:function(){this._super();var e=new cc.Node;e.addChild(cleverapps.UI.generateTTFText("messages:Terms.TermsOfService",cleverapps.styles.FONTS.TERMS_LINK_TEXT)),cleverapps.UI.wrap(e),this.addChild(e);var t=cleverapps.UI.generateTTFText(" "+Messages.get("Terms.and")+" ",cleverapps.styles.FONTS.TERMS_TEXT);this.addChild(t);var s=new cc.Node;s.addChild(cleverapps.UI.generateTTFText("messages:Terms.PrivacyPolicy",cleverapps.styles.FONTS.TERMS_LINK_TEXT)),cleverapps.UI.wrap(s),this.addChild(
s),cleverapps.UI.arrangeWithMargins(this.children,{direction:cleverapps.UI.HORIZONTAL,margin:cleverapps.styles.Terms.margin}),cleverapps.UI.wrap(this),cleverapps.UI.applyHover(e),cleverapps.UI.applyHover(s),cleverapps.UI.onClick(e,function(){cc.sys.openURL(projects.default.terms)}),cleverapps.UI.onClick(s,function(){cc.sys.openURL(projects.default.privacy)})}});cleverapps.overrideColors(cleverapps.styles.COLORS,{TERMS_LINK_COLOR:new cc.Color(97,167,221,255),TERMS_TEXT_COLOR:new cc.Color(55,80,58,255)}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{TERMS_TEXT:{size:25,color:cleverapps.styles.COLORS.TERMS_TEXT_COLOR},TERMS_LINK_TEXT:{size:25,color:cleverapps.styles.COLORS.TERMS_LINK_COLOR}}),cleverapps.styles.Terms={margin:6};var Restore=cc.Node.extend({ctor:function(e){this._super(),this.parentWindow=e;var t=cleverapps.UI.generateOnlyText("messages:RestorePurchases",cleverapps.styles.FONTS.TERMS_LINK_TEXT);this.addChild(t),cleverapps.UI.wrap(this),cleverapps.UI.applyHover(this),
cleverapps.UI.onClick(this,this.onPressed.bind(this))},onPressed:function(){var e=new WaitWindow,t=cleverapps.waitNoMore(5e3,function(){e&&(e.close(),e=void 0)});cleverapps.payments.restore(),cleverapps.subscription.onChangeStateListeners.restore=this.createListener(function(){t&&t(),cleverapps.subscription.isActive()&&(this.parentWindow.close(),new SubscriptionWindow)}.bind(this))}}),BonusButton=cleverapps.UI.Button.extend({ctor:function(e){var t=cleverapps.styles.BonusButton;this.onClick=e.onClick;var s,n=new cc.Node;n.setContentSize(t.width,t.height),n.setAnchorPoint(.5,.5),this.withBonus=e.reward||e.price,e.text?(s=cleverapps.UI.generateOnlyText(e.text,cleverapps.styles.FONTS.BONUS_BUTTON_TEXT||cleverapps.styles.FONTS.BUTTON_TEXT)).fitTo(.8*n.width):s=e.content;var i=[s];if(this.withBonus){var o,a=[cleverapps.UI.generateOnlyText(e.reward?"+"+e.reward:e.price,cleverapps.styles.FONTS.SHARE_BUTTON_REWARD_TEXT)];!1!==e.rewardIcon&&((o=new cc.Sprite(
e.rewardIcon?e.rewardIcon:bundles.menubar.frames.coin_png)).setScale(t.RewardCoins.scale),this.coin=o,a.push(o)),i.push(new cleverapps.Layout(a,{direction:cleverapps.UI.HORIZONTAL,margin:t.RewardCoins.margin})),o&&(o.y+=t.RewardCoins.offsetY)}var r=new cleverapps.Layout(i.reverse(),{direction:cleverapps.UI.VERTICAL,margin:t.margin});r.setPositionRound(n.width/2+t.content.offset.x,n.height/2+t.content.offset.y),n.addChild(r),this._super({content:n,width:n.width,height:n.height,fitTo:!1,onClicked:this.doAction.bind(this)})},doAction:function(){this.onClick()},animateCollectCoin:function(e){if(this.withBonus){cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect);var t=function(){e&&e()};cleverapps.styles.MenuBar.GoldItem.target&&this.coin?WindowHelper.animateCollect(this.coin,{scale:1,target:cleverapps.styles.MenuBar.GoldItem.target},t):t()}else e&&e()}});cleverapps.styles.BonusButton={width:300,height:110,RewardCoins:{scale:.5,margin:10,offsetY:0},margin:-10,content:{offset:{x:0,
y:0}}};var CoinsPriceView=cc.Node.extend({ctor:function(e,t){this._super(),this.options=t||{},this.styles=this.options.styles||cleverapps.styles.CoinsPriceView,this.price=e,this.font=this.options.font||cleverapps.styles.FONTS.COINS_PRICE_TEXT||cleverapps.styles.FONTS.TEXT,this.setAnchorPoint2(),this.createFreePrice(),this.createPrice(),this.createBg(),this.setCascadeOpacityEnabled(!0)},createPrice:function(){this.priceNode&&(this.priceNode.removeFromParent(!0),delete this.priceNode);var e=new cc.Sprite(RewardsHelper.SMALL_ICONS.gold);this.styles.icon&&this.styles.icon.offsetY&&(e.y+=this.styles.icon.offsetY);var t=this.label=cleverapps.UI.generateImageText(this.price,this.font),s=this.styles.isLabelFirst?[t,e]:[e,t];this.priceNode=new cleverapps.Layout(s,{margin:this.styles.margin,direction:cleverapps.UI.HORIZONTAL}),this.label.y+=this.styles.label.offsetY,this.addChild(this.priceNode),this.setContentSize2(this.priceNode.getContentSize()),this.priceNode.setPositionRound(this.width/2,
this.height/2),this.priceNode.setCascadeOpacityEnabled(!0),this.priceNode.visible=!this.freePriceNode.visible},createFreePrice:function(){this.freePriceNode=cleverapps.UI.generateOnlyText("messages:FREE",this.font),this.addChild(this.freePriceNode),this.freePriceNode.fitTo(this.styles.freePrice.width),this.freePriceNode.setPositionRound(this.width/2,this.height/2),this.freePriceNode.visible=!1},createBg:function(){if(this.styles.bg){this.bg&&(this.bg.removeFromParent(),delete this.bg),this.bg=new cc.Scale9Sprite(this.options.bg||this.styles.bg.image),this.addChild(this.bg),this.bg.setLocalZOrder(-1);var e=Math.max(this.width+2*this.styles.bg.padding.x,this.bg.width),t=Math.max(this.height+2*this.styles.bg.padding.y,this.bg.height);this.bg.setContentSize2(e,t),this.bg.setPositionRound(this.width/2+this.styles.bg.dx,this.height/2+this.styles.bg.dy)}},setPrice:function(e){this.price!==e&&(this.label.setString(e),this.price=e,this.createPrice(),this.createBg())},switchToFreePrice:function(
){this.priceNode.visible=!1,this.freePriceNode.visible=!0,this.setContentSize2(this.freePriceNode.getContentSize()),this.freePriceNode.setPositionRound(this.width/2,this.height/2),this.createBg()},switchToRegularPrice:function(){this.priceNode.visible=!0,this.freePriceNode.visible=!1,this.setContentSize2(this.priceNode.getContentSize()),this.priceNode.setPositionRound(this.width/2,this.height/2),this.createBg()}});cleverapps.styles.CoinsPriceView={icon:{scale:.7},label:{offsetY:0},bg:{image:bundles.game.frames.ruby_substrate_png,padding:{x:2,y:-3},dx:4,dy:0},freePrice:{width:120},margin:0};var CoinsRewardView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),this.options=cleverapps.extend({},cleverapps.styles.CoinsRewardView,e)},collectCoins:function(e){var t=[];if((this.options.coins||cleverapps.styles.CoinsRewardView.coins).forEach(function(e){t=t.concat(this.drawCoinsInCircle(e))}.bind(this)),e){var s=cleverapps.UI.generateTTFText("+"+e,
cleverapps.styles.FONTS.COINS_REWARD_TEXT);s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setPositionRound(this.width/2,this.height/2),s.setScale(this.options.text.scale/2),s.setLocalZOrder(1000001),this.addChild(s),s.replaceParentSamePlace(cc.director.getRunningScene().scene),s.opacity=0,s.runAction(new cc.Sequence(new cc.FadeIn(.2),new cc.ScaleTo(this.options.showTextTime||CoinsRewardView.SHOW_TEXT_TIME,this.options.text.scale),new cc.FadeOut(.2),new cc.RemoveSelf))}var n=cc.director.getRunningScene().scene,i=this.options.target||cleverapps.styles.UI.RewardElementView.rewardGoldViewTarget||cleverapps.styles.MenuBar.GoldItem.target,o=n.convertToNodeSpace(i.getParent().convertToWorldSpace(i.getPosition()));if(t.sort(function(e,t){return e.getPositionX()-t.getPositionX()}).forEach(function(e,t){e.replaceParentSamePlace(n),e.runAction(new cc.Sequence(new cc.DelayTime(CoinsRewardView.APPEAR_TIME+.01*t),new cc.Spawn(new cc.MoveTo(CoinsRewardView.COLLECT_COIN_TIME,o),new cc.RotateBy(
CoinsRewardView.COLLECT_COIN_TIME,180)),new cc.RemoveSelf))}.bind(this)),this.options.sparkAnimation){var a=new cleverapps.Spine(bundles.game.jsons.coins_reward_json);a.setAnimation(0,"animation",!1),a.setPositionRound(this.width/2,this.height/2),this.addChild(a)}this.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.RemoveSelf))},drawCoinsInCircle:function(e){for(var t=[],s=0;s<e.count;s++){var n=new cc.Sprite(bundles.menubar.frames.coin_png);n.setRotation(120*(Math.random()-.5)),n.setScale(0),n.setLocalZOrder(1e6);var i=2*Math.PI*s/e.count,o=(e.baseAngle||0)*Math.PI/180,a=e.radiusX*Math.cos(i+o),r=e.radiusY*Math.sin(i+o);this.options.randomOffset&&(a+=.5*(Math.random()-.5)*a,r+=.5*(Math.random()-.5)*r),n.setPosition(this.width/2+a,this.height/2+r),n.runAction(new cc.Spawn(new cc.MoveBy(CoinsRewardView.APPEAR_TIME,new cc.p(.2*a,.2*r)),new cc.ScaleTo(CoinsRewardView.APPEAR_TIME,e.scale))),this.addChild(n),t.push(n)}return t}});cleverapps.overrideStyles(cleverapps.styles.DECORATORS,{
COINS_TEXT_STROKE:{size:3,color:cleverapps.styles.COLORS.COINS_REWARD_STROKE_COLOR}}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{COINS_REWARD_TEXT:{size:120,color:cleverapps.styles.COLORS.COINS_REWARD_YELLOW,stroke:cleverapps.styles.DECORATORS.COINS_TEXT_STROKE}}),CoinsRewardView.APPEAR_TIME=.4,CoinsRewardView.SHOW_TEXT_TIME=1.2,CoinsRewardView.COLLECT_COIN_TIME=.5,cleverapps.styles.CoinsRewardView={sparkAnimation:!0,randomOffset:!0,text:{scale:1},coins:[{radiusX:80,radiusY:80,count:6,scale:1}]};var ReloadWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.styles.ReloadWindow,s=new cc.Node,n=function(e){e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.setDimensions(cc.sizeRound(t.width,0)),s.addChild(e)};n(cleverapps.UI.generateTTFText("messages:ReloadWindow.YouHaveSavedGame",cleverapps.styles.FONTS.WINDOW_TEXT)),n(cleverapps.UI.generateTTFText("messages:ReloadWindow.WeStoreGames",cleverapps.styles.FONTS.WINDOW_TEXT,{gameTitle:Messages.get(
cleverapps.config.title)})),cleverapps.UI.arrangeWithMargins(s.children,{direction:cleverapps.UI.VERTICAL,margin:t.margin,y:t.paddingY}),cleverapps.UI.wrap(s),s.setAnchorPoint2(),s=cleverapps.UI.wrapWithPadding(s,t.padding),this.content=s,this._super({content:s,title:"messages:ReloadWindow.Title",name:"reloadwindow",button:{width:t.Button.width,height:t.Button.height,text:Messages.get("ReloadWindow.UpdateNow")},onClose:e,closeButton:!1,notCloseByTouchInShadow:!0}),cleverapps.audio.playSound(bundles.main.urls.window_effect),cleverapps.windows.list=[this]}});cleverapps.styles.ReloadWindow={width:600,margin:20,paddingY:10,padding:{x:0,y:10},Button:{}},"horizontal"===cleverapps.config.orientation&&cleverapps.increaseStylesByKoef(cleverapps.styles.ReloadWindow,1.5);var LocalStorageDisabledWindow=Window.extend({onWindowLoaded:function(){var t=cleverapps.styles.LocalStorageDisabledWindow,s=new cc.Node,e=function(e){e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.setDimensions(
cc.sizeRound(t.width,0)),s.addChild(e)};e(cleverapps.UI.generateTTFText("messages:LocalStorageDisabledWindow.text2",cleverapps.styles.FONTS.WINDOW_TEXT)),e(cleverapps.UI.generateTTFText("messages:LocalStorageDisabledWindow.text1",cleverapps.styles.FONTS.WINDOW_TEXT)),cleverapps.UI.arrangeWithMargins(s.children,{direction:cleverapps.UI.VERTICAL,margin:t.margin,y:t.paddingY}),cleverapps.UI.wrap(s),s.setAnchorPoint2(),s=cleverapps.UI.wrapWithPadding(s,t.padding),this.content=s,this._super({content:s,title:"messages:LocalStorageDisabledWindow.title",name:"localstoragedisabledwindow",button:{text:Messages.get("OK"),width:t.button.width},closeButton:!1}),cleverapps.audio.playSound(bundles.main.urls.window_effect)}});cleverapps.styles.LocalStorageDisabledWindow={width:600,margin:20,paddingY:20,padding:{x:0,y:35},button:{width:200}};var ErrorWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.UI.generateTTFText(e,cleverapps.styles.FONTS.WINDOW_TEXT);t.setDimensions(
cleverapps.styles.ErrorWindow.dimensions),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this._super({content:t,title:{text:Messages.get("RestartWindow.Title"),localized:!0},name:"errorwindow",button:{text:Messages.get("OK")}}),cleverapps.audio.playSound(bundles.main.urls.window_effect)}});cleverapps.styles.ErrorWindow={dimensions:{width:500,height:0}};var RestartWindow=Window.extend({ctor:function(e){if(!RestartWindow.showed&&!cleverapps.environment.isSceneWithPreview()&&cc.director.getRunningScene()){RestartWindow.showed=!0,this.options=e=e||{},cleverapps.versionChecker.isNewClientVersionAvailable()&&(e.title=e.title||"RestartWindow.NewVersionTitle",e.contentMessage=e.contentMessage||"RestartWindow.NewVersionAvailable");var t=e&&e.contentMessage?Messages.get(e.contentMessage):Messages.get("RestartWindow.AnErrorOccured")||"An error occurred";this.text=cleverapps.UI.generateTTFText(t,cleverapps.styles.FONTS.WINDOW_TEXT,!1),this.text.setDimensions(
cleverapps.styles.RestartWindow.width,cleverapps.styles.RestartWindow.height),this.text.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.text.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),this._super({parentScene:!0}),this.setLocalZOrder(1001)}},onWindowLoaded:function(){var e=this.options&&this.options.title?Messages.get(this.options.title):Messages.get("RestartWindow.Title")||"Try again";this._super({content:this.text,notCloseByTouchInShadow:!0,name:"RestartWindow",title:e,button:{text:Messages.get("RestartWindow.ButtonMessage")||"Reload",width:cleverapps.styles.RestartWindow.button.width,height:cleverapps.styles.RestartWindow.button.height,onPressed:function(){window.location.reload()}},closeButton:!1}),this.window&&0===this.window.height&&(this.text.removeFromParent(),this.window.titleText.removeFromParent()),cleverapps.settings&&cleverapps.audio.playSound(bundles.main.urls.window_effect)}});cleverapps.styles.RestartWindow={width:570,height:460,button:{}},
"horizontal"===cleverapps.config.orientation&&cleverapps.increaseStylesByKoef(cleverapps.styles.RestartWindow,1.4),
cc._loadingImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAU2CAMAAAD9CcM0AAADAFBMVEUCAgEDAwIEBAMFBQQGBgUHBwYICAcJCQgKCgkLCwoMDAsNDQwODg0PDw4QEA8RERASEhETExIUFBMVFRQWFhUXFxYYGBcZGRgaGhkbGxocHBsdHRweHh0fHx4gIB8hISAiIiEjIyIkJCMlJSQmJiUnJyYoKCcpKSgqKikrKyosLCstLSwuLi0vLy4wMC8xMTAyMjEzMzI0NDM1NTQ2NjU3NzY4ODc5OTg6Ojk7Ozo8PDs9PTw+Pj0/Pz5AQD9BQUBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYCCgoGDg4KEhIOFhYSGhoWHh4aIiIeJiYiKiomLi4qMjIuNjYyOjo2Pj46QkI+RkZCSkpGTk5KUlJOVlZSWlpWXl5aYmJeZmZiampmbm5qcnJudnZyenp2fn56goJ+hoaCioqGjo6KkpKOlpaSmpqWnp6aoqKepqaiqqqmrq6qsrKutrayurq2vr66wsK+xsbCysrGzs7K0tLO1tbS2trW3t7a4uLe5ubi6urm7u7q8vLu9vby+vr2/v77AwL/AwMDBwcHCwsLDw8PExMTFxcXGxsbHx8fIyMjJycnKysrLy8vMzMzNzc3Ozs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///+xGNHLAABQFUlEQVR4AezSP2vVBxQA0JumCaUpdGpLW1oaCk3JkCUdSraEfoGGDoV2bad2URwE0clVlIc4OIkuDlE3CWRwcVHQVU0IakRDJGAkSv7EdzW+32/U3fvO+QwnEvpGJOgOuoPuoDvoDrqD7qA76A66g+7oDrqD7qA76A66g+6gO+gOuoPu6A66g+6gO+gOuoPuoDvoDrqD7ugOuoPuoDvoDrqD7qA76A66g+7oDrqD7qA76A66g+6gO+gOuoPuoDu6g+6gO+gOuoPuoDvoDrqD7qA7uoPuoDvoDrqD7qA76A66g+6gO7qD7qA76A66g+6gO+gOuoPuoDu6g+6gO+gOuoPuoDvoDrqD7qA7uoPuoDvoDrqD7qA76A66g+6gO+iO7qA76A66g+6gO+gOuoPuoDvoju6gO+gOuoPuoDvoDrqD7qA76I7uoDvoDrqD7qA76A66g+6gO+iO7qA76A66g+6gO+gOuoPuoDvo/g7oDrqD7qA76A66g+6gO+gOuoPu6A66g+6gO+gOuoPuoDvoDrqD7ugOuoPuoDvoDrqD7qA76A66g+7oDrqD7qA76A66g+6gO+gOuoPu6A66g+6gO+gOuoPuoDvoDrqD7qA7uoPuoDvoDrqD7qA76A66g+6gO7qD7qA76A66g+6gO+gOuoPuoDu6g+6gO+gOuoPuoDvoDrqD7qA7uoPuoDvoDrqD7qA76A66g+6gO7qD7qA76A66g+6gO+gOuoPuoDvoju6gO+gOuoPuoDvoDrqD7qA76I7uoDvoDrqD7qA76A66g+6gO+iO7qA76A66g+6gO+gOuoPuoDvoju6gO+gOuoPuoDvoDrqD7qA76A66ozvoDrqD7qA76A66g+6gO+gOuqM76A66g+6gO+gOuoPuoDvoDrqjO+gOuoPuoDvoDrqD7qA76A66ozvoDrqD7qA76A66g+6gO+gOuqM76A66g+6gO+gOuoPuoDvoDrqD7ugOuoPuoDvoDrqD7qA76A66g+7oDrqD7qA76M7La2cvLmU/0J2l2c8ixs7sZnm683Qm9n1yLsvTnU70TK5mcbqzNRs9g/NZnO7cH4/GqSxOd258EY0DWZzuzH8ajT93szbdufxxNKY3sjbdmRuMxsRa1qY7V4ai8cNK1qY78yPR+Ope1qY717+Mxuc3szbduTMWjaG5rE131qaidTxr052d36P1dzdr053/ozW1nrXpzolofXsra9OdqyPR+Oh81qY7y6PROpi16c7Wb9GaeZ616c6xaH29mLXpzsJQNAYXsjbdefZrtDpZnO50ovVvN2vTnccT0Zh5kcXpzumB6BlfzeJ0Z/2X6Bl9kNXpzqXheOv75axOd7pHBnrdH2Z5urP5X+z7cTXr053Nw8MR8fN69gHd2bvwU8TkRvYF3Vk89N0/29kndOfJo1dZn+6gO+gOuoPu7HSzP+jO7aN//HVyJevTne3ON/HG9N1E9/fY28sP32v27sM9qmp9+/i9p6QHEgLSe0ERsABKQbEoFrEAHjlKEdCDRbGIooiooFgURfmJBVCxewRROYigIiAIIohKAQHphBJIQnrJZO73nZk9mT2TMnt6Qp7PlT/he032XnutZ+U9YoDdWAsrIST34ytnPvnU7LUnWbNZphjh0PckheResZ9ubRdrMMS1/c9K1mjz46G6PJdCcq9Iydx2UDX/v2LWXHvPgcrwIiskJPdvWqJM9JQi1lgT4XTpMVZESO67r4RG9IusqTY1hKrDH6yQkNzn1oNWnW9YQz0JVZ15rJCQ3IvvNsBNx02skbLPg2psKYXkXqGM6+BhYD5rok2N4ND1IIXkXrHjV8GDYTprouWJsDN+QiG5VyJvGDylrGEN9Etd2I3Mp5DcKzM1Cp7O2sGa58TZsLlmN4XkXqlV7VDOJYdZ88xpAESPPEghuVcu/3EjyhmWyxrHsvThh/+XSyG5V2XfNShHebyEQnI/Ff3TH+UYX6OQ3E9J+283wVPihwyTkiILheQePvmftIOn0xYwlApTN//24+fTn5n85INjbh1117inZ3yydMPujPyiUgrJPcR2jUmAh+Y/MiSKj/+xYPrd1/VtFacYDdBSohud0feG2x/7vwUbj5QwRAQoCub1gIcz1jPo9i+bMaxPi2gFVTI16T1m5o97Chkikrs48mg83J2zkcGUs2X2bd3rKNAp7szb399ZzNCQ3MXS8+GuxyYGy4mfJl91mhE+ajr0g51WhoLkLo6OVeCmzzYGQ/HqFy9vAL8Yu47/IYehILmLD1rAzUV7GLADn9zYGAFIHvJRBkNAchcbLoKbKw8yILkr7j3dgAAZL5qVThH83MXR+4zQunof/Zf5xY3JCAbjBW+doAh67qJkdlNoXbybfkr76MoYBIv5oo9OUgQ9d/FzX2j13UJ/ZH92SVWxR6c0PuPSm0ffef+kl2dMe/bR+0YOuujsVilxRlQqcfDKUopg5y5S7zRD45y19FnevCuiKy29Yc8xz7y7+p+0zHyWsRYXZB3c/PPX70wec1mbeFSo/oQDFMHOXRTOag6Ndsvom+LlN8WiQjGtB0784s+jxayCZd+iyTd0qYMKdPmwmCLYuYu1l0Cj1Y/0xbax9VGR2PPv/3BHHvUo2j//rjOjUE7s7X9SBDt3cWxcLFzO2UHdMmedgQok9Zq08hB9kTZ/cFOU0/GdXIog5y5KPmoPl+et1GnZNRX9KPd4cuUJ+qx43aNd4Cl+2HaKYOcudvxbgdNN2dRl5yN1UU6z2z87Sj/9/dw58HTuVxTBzl3kT2sA1agc6nDy7a4op8vjv5cwAP9M6wwPSc/lUQQ7d7HkfNhFzbHSu403xcCDqceMfQzUjgeT4M74n0MUwc5dHJ+YAsBwxzF6lftme3gw9HrnKINh9b/NcHfFVoqg5y5WPzx4xHsn6NXOW2PhofurBxkkJ2d0grtzv6cIfu6i0ELvFp4DD82n7GMQbR1hhptWX1BEIneR+lgy3CXdtoHBVfhma7g57Z1ihp3kLn68EO6UixYXMejW9oGbxOmlDC/JXeS/0gTuOrySzlA4dKcZWgmvh7d3yV3sGW2Gm8Q7tjBEil9Nhlbi6xaGj+QuVveFuz7/LWbIWD9oBa06cxgukrso/bg13CSHek/6D2dCq8GnDA/JXWQ/kwQ33b4uZYj9fDa0Wv7IcJDcxb7hcBNz2y6G3m/dodV9C4XkHnrr+sBNu9n5DIdN3aB11WEKyT3U5rWCm+v/ZJis7wqt/+RQSO4hVfB8ErTqTT3JsPm5HTQM06wUknsIZT4UDa1u34Y1uW8bQaPREgrJPXRO3K5A6+a/GV6zE6Fx4SEKyT1UDtwErTqTTzLMip8yQeOxYgrJPTQ2XwmtFh+WMuwyboZG8jcUkntI/NoDWt1XMBJ2dofGhWkUknsILOsErRu2MzIWpcDFMKWUQnIPum/bQCPq4QxGiHUyNJpvoJDcg21+M2ikzLQwYjKvhMbwHArJPbg+agiNlvMYSUtPg0v8JxSSe1B91AAanb9nZE2ExkVpFJJ7EH1yGjR6rmeE7e8GF+MbVgrJPWg+awKNy7Yz4mYb4dIjlUJyD5a59aHxrwOMvPSL4WJ8m0JyD5J3k6Ex/Birg89i4XLRcQrJPSjm1IXGmAxWCycHwCX6YwrJPRg+S4GL8f4sVhPz4uEyMJ9Ccg/c/MZwMT2Uw+oi60q4NFhJIbkHbElLbe1PFLL6mBsDl3ElFJJ7gH7tBJfoCQWsRo5dAJdOf1NI7oHZ0hMuhnF5rFamG1DGNINCcg/I333hYhyXw+plZyu4XJVJIbkHYM+lcDE+nMtqpnAUXFJ+ppDc/XfsWmg8UMhq53MjXJ6hkNz9ljECGqOzWP3s7gqXq3IoJHc/5d0PjZtOsBoqHQOX5usoJHc/vRQFl8GprJa+iEMZwwwKyd0/81Pg0v8Aq6ddXeEyMJtCcvfH8pZw6b2V1VTJCLh03EIhufthVze4nPs7q63XDSgTP5++k9xF9o1wab+G1dfqRLhMttJXkrsoegguDZewGkvtDpfrcukryV28EYsyiXNZnRXcCpf2/9BHkrtY2QxlTC9YWa09A5fk7+gbyV3sPB9llAeKWb19k4wyynT6RHIXhXfAZcARVnPb2sLlwRL6QnIXHyWizLl/sbo73g8u12bSB5K72NIBZZotY7VXPBIuZxygkNz1KxiKMjEzWQOMh0vjPygkd/1mm1Hm3kLWANMVlKm7lEJy1217e5S5+DhrgvnxKGOaSyG561U8FmWar2GNsCIZLtMoam/uWWu+/Pyr5ZuPFFCfhQlwiprOmuH3JnB5uJRVKDyeeqxIcj9VLb+mHqDUaXbuZTcOGz3mnvvGPfrEKx+t2ptVwoplXIMyg7JZM2w7Ey7DClmJg/974Y4repzV/cq7pq/KldxPQUtboTxDfINW3YdM/XZHAct5LxZOLdawhjjY2/t51YwVd7Uywyn+wjfTJPdTTUZ/VKHJNZMXH6WbtPPhZJ7GmiLrMrj0O8ryNj7bHe6ilkjup5oN9VG12LPHL8+hy/+Z4XRxOmuKoqvg0n0vPVjX3NoQngYeltxPNavqwquLd7FMahc4xS1kjVFyPVxO30U3Jd/fEINyrjn1apfc93aCN5ctL2GZN41wuq+YNUbhELi0cs9966gElDcolZL7Kcc6FVVr/WI6XU5cDKcWm1lz5A2DS7Nt1FjQGuVFP5xJyf0UlP1EfVQq+YrXD1Dry7pQKZNKWXPk3gqXJr/TZW4dlNf1Cysl91OS5YdHLm+ZoMCTqf4lz67IoZviUXDqtJU1SOFouDRayTK/1Ec5zZ7cQ0rup6zCI5u//b9xQ6+7vF+f3j179ep1Qf+hT3y0/lAhPW3rBJUygTVJ6Ri4NPiOTiVD4anNhF2k5C7I2VFQtV3PGuUOuCQtotOe9nATffEru2knuYuRcBpezBrldrjELabTlmbQaPvQz9l0kNzF3s5QJSxgzTIcLjHf0ymtD5zqXDvnOAWoEgtjoep+gjVK6WC4xC2jk3WmEXbN711upZDcNabA6QHWLLnXwiVhGctkP9vcqCRdPOsg3UjuonQ4VIlfsmZJvwIuSUvpUrj+g/fX5NKD5C7SL4HqzF2sWY5cDJf6Sygkd282tYfqhmLWLPt6wqXh9xSSuzf/S4bqIdYwO7rCpclyCsndm5lmqKazhvmrLeDLISzJXUyESvkva5i1DeHSbhOF5K77y2T8SoZE4a51f6QzFJYmwuWMPRSSuxeFA6Fqso0Byd/09SdLd+TQ3YmvR56e0nDAKobA5zFwOS+NQnL3Iv1yqE7fxwBkfXpDq4To+Bb9J6/KYpld0/pGwabt9wy+t81wuTSDQnL3IrUPVN2P0H8bB8dClXLhhE9/3JqRl73j67HtAaBhlwZA28V0Z2XAXlDgcn02heTuxT/nQHVJBv2V9mJTIO6ysY/de20LADAktuh8zlktogGYuj+zNXtpW6DFrAw6pc2fOGb4yCdXMyCWR6ExooBCcvdi65lQDcihn5ZdAuCCeVkkCze+dk19lEm84aNDJPlVU8B8+VsbDxaQ2X+92jceNvXv3ccAFP4HGmMtFJK7FxvbQXVzMf1yYsppQKOpR6jK2/zp2CvPP/uss7pd9uSqHDp8dwYAQ8Nzrx16y0VNUKbT11b6LWcgNJ6gkNy92dACqv/QL8v6A8Yb11DLWlxYUFBQWEKXP0YlwaXeoAcGRQNA7CMZ9Fd6P7gor1BI7t5sOC2gPQRHJyYDbWbm0av8pQ92STQBQFSbB1bks3h2fdgM3kc/7e8MF9MHFJK7N5tSoJpEn2V/2BtIvH0L9Tmxad7LT0+a9u0h2n3TADbnr6d/1jeGS8J3FJK7N9vqQfUCfXVylBHGy78ppp8+T4FNp5/ol2/j4dJoDYXk7s3mZKim0lfrEoBJGfTfG2bYNPuG/nhbgUvHzRSSuzcb60P1qJU++i0JeJkBsEyAXdN5VvpuAjR67qOQ3L35oy1UtxXSRxtPAy7MZABy74Ddad/SZ6W3QOPqNArJ3Zt9PaC6voA+2nMWYP6CgcgYDruWvvee0Rcao/MoJHdvci+Aqn8ufZQzCMDAwsB6HwK7tpvoo7/bQmOChUJy96o/VH2O0Ff3A2iwmgFJvQ52Vx2nb36qC403KCR3726Gqs02+uptE4DHShmQg1fA7nn6Zq4CF/PXFJK7D+sb8b/QV7/UBdD5EAOz9TzYdD1In0yFRoPfKCR372ZCZfoffXWgIwDDFwzQr45dwwvoi6I7odHpAIXk7t38aDgYnqOv8gcCwFALA/RhPAC8WHSghLplXguNS3MoJHfv1reCagR99igAtN3OAFmeB4DJX/W5der3+dRnX3dojLBSSO7eHQvkONOn8QCMsxiovFsBvDwAwEV7qc+GptCYSB0kd1E4CKomf9JXG5sDwJASBiq1H+pNSwEwNIv6zIuGi+FN6iG5iyegMiykr470A4B22xiw39oPeQoAnqROk6CR+D/qIbmLj01QPUpfWcYCgHEOA7d26aUAzHOpT9710GjxB/WQ3MX6RlD1L6KvZpgA4LYCBm7daQAaLKM+f58OjfMOUw/JXaT3DOC76up6ANB2DwM33QzgrB3U55s4aNxSQD0kd1E6Dio/djemtgeA6C8ZsLzBAHBjOvV5HlrPUh/JXXyiQPUYfZX/L9jcz4DtbAMAEwupS84t0Ij5kvpI7mJLB6j6ZdFXk2HTJ42B+i4GgHmOlbps7wKNlhupj+Quiq4uy2YDffVZPAAk/8xAvQgAsd9Rn2/qQOPio9RJchdToFLm0Feb2wGA4QUGqOBaADhtsz+r7riniDpJ7uLHOKhuyaePMi+FzcBAg9vWGAA6H6UumVdA6y3qJbmLfV2garKTPrKOh027rQzMwigA6F9AXX5tBo3ktdRLchfWW+E0i776wASbLxmYVxRf5lTOMECj1wnqJrmLuWaobi6gjzY2gc1DVgaiYLQvk8wKhkNrjIW6Se5iRxuoWu+gj052g02vkwzE/u4AEPcFddnSBRrmt6mf5C5KxkBleos+stwBm8a/MhAr6gJAqw3U5b0YyHhIyd1v/42D6vo8+uhN2CizGYh3YNPzCPUouR1afY/QB5K7ONEVqobr6aOlSbC5zcIAjIfNoCLqsaMLtMaV0BeSu3gATlPpo4M9YHPuMfovfzBs7qYuH0ZDwziPQnL3ycJYqLodp28sQwBdO9W9/15PoR5FI6HVejeF5O6To92giplPH70Ku1fov68TAMA4m3ps6QStmy0UkrtvJrnyKaJvfkiAza0F9NtLsEn4hnq8HwUN05sUkruPfk2CKmUdfbO3C2zapNJvd8LmtLXUoWg0tBr/TiG5+yj/RjhNoG8Kr4dNwgr6q2AAbNrupA7bukKrfwb9J7nL0nvX/X4d8VBeor+Od4dN7zTq8HEMNJSnrRSSu6/SesHp/3wsaLEjwOFF9NPWprAZUeT7N6Y631NI7r57Ef7e47GtHWy67A5sYcbwPHXY2Qla5xyikNx9t6MdVHW+pU8KBsEm+Xv6aYoCAAlfUod3jdC6x0IhufvOOgZONxbSJ+PtuRqepX/yh8Cm2W/0Lv8maJnmUUju/vjeDFXdNfTJguiAhhsdOV//w9DaRtDquJdCcvdHzpVwustKX2xvCJtOe+iXra1hc1EavbI+Cze3Wigkd7+8FQ1V4zX0RfqlsDGvoF9W1oPNjbn06tDF0Ip7n0Jy909qNz/fAK13we41+mWeGTZ3ltCrbxKh1XE7heTupzdMUDX/g754Kwo2N1sDuQ3tSXpluRtu7iygkNz9tK8rnO4vpQ/WNIRNj4P0x0TYvenrmGuY51FI7n57Hk6NfqcPDnaHTd2f6If8EbCJ+opevQ03XQ9RSO5+S+0Epwet1K/4P7AxzKAf9veDTf1V9Obk1XDzOIXkHoApcGqxlT6YZoDNsBL67te2sGm/jd78lACtuj9TSO4B2NIKTg9Yqd/KurC5II2+m58Imz6H6UXRQ3BzeRaF5B6A0glwavoX9UttAZvGv9F36gS8wV7j3dQRWoYXrRSSeyB2tILTQ9Qv71rYzaPvHobduGJ6Md0ErUbrKCT3wDyuQNVkA3WzToTd0/RZ6c2wMb9FL473g5sbMykk98BsaQune4qp22wzbK610FdZjooTv6MX8+Lg5h0rheQeoKkKVI1/oW7rWsDmrAP01f7OsGm6iVUrugZu2uygkNwDtbcznO62UK9jPWCTuJS++qs1bLoeZNW+i4ObsRYKyT1gz8Ip+RfqVTgKdu/QV8sbwuaiE6xS3hC4SVpGIbkHbl87OA0tpl7TYHdHMX20oA5sBueySssbw8312QwCyV28oECV/BP1WpTg57UGs6Jgc1sRq1L6oAFa5ncoJPcgP70PKaBOe5rDpuUmP5+dHrOyKn93hptuuxkUkrt4UYEq/gvqlH0BbKLmU+Xj0ZBprNJLJrh5msEhuYvU7nDqd4L6WB6G3cv0TcYA2H3Aqhw+D25a/s4gkdzFXBNUxlnU6W0f325VW8+CTdRSVuU1A9zcaWGQSO4i8xI4nX+Y+nyfApvzTtAnPzWBTf3fWYX9Z8FN0ncMGsldfBULp+eoT2oX2LT4jT75NBY27f5hFabC3TVZDBrJXRQMgVOrTdSl8ArYGD+mT6YrsOlxlJXb0hFuYucyiCR3saYOnMZRF+t42L1InzwGuyuyWamSyXDX8wiDSHIXltFwaryJusyG3ZBC+sA6EnbDilipPzvATfQMBpXkLtY0htNIfQEvTYZNl3T6IP8q2D1sZWVKxxngpncqg0pyF9YJcKq7iHrsPhM2Tf+gD9K7wUZ5mZVa3xoh3j8guYsDXeHU/yR1yLoUNlGf0ge7W8Am/jNWpuQuuOubxmCT3MX/maCKmksdisf5ce/2umTYNFvJyvzUCG6M7zPoJHeReQGczkmlDu/A7t951G9xPGzO2sZKpN8IdxemMfgkd7EgFk4TS+ndD/Vg0y2V+n0cBZv+h1mJ9+LhJuY9hoDkLoqHwanRWnqXeiZsWq7zfcjMiCxW7J/ecHfZEYaC5C5+S4HTkBJ6VXwRbMwf+n45/fgiVsjyBNzFzGVISO6i5CE4xX1Jr6wPwO556ma9G3YvlbJCy5vCXf9jFD4DhW+XmPZMpVdvwe526lZ0E2wM77JCJ6+Fu/gPGCqSu3g3Gk6T6NXXMbDplUe9stVbnf7HCr1mhrvrMhkqkrvI/xecmq6lN5vPgE373dTrcHfY1FnLivzZEu7qLmToSO7il4ZwuimXXmT21r3pQLXtDNg0384K5AyEhzFFDCHJXTwGlY5T10VDYTeTeq1pUcUIselmuOuwmaEkuYv9Z8Pp/KP04gXYPWqhTl/Xh80FJ1jeymZwF/UqQ0tyF5+Y4PQEvfjUCJv+WdTpnTjY3JDDcv65GB4GpDG0JHdRPAROTTayamsawaZDKnV6xgib0cX0lHMHPDRdylCT3MW6RnC6pYBVSu0Imwa/Up/ie2H3YCk9vRQDd8rkEoac5C6eUKCK+y+rlNMfNqaPqc/JQbB7hp4W1oeHaw4z9CR3kdoXTudV3ZxlPOxeYpWyDh7at/LD9//kob6we5se/uoED81WMhwkd7E4EU7jrazKW/B8Fi/KzSu2FmWlpaYe3vrz0qUL35pw13+uP6tRSnKsocuGPZ1hY/qK7vZcCA+G1xgWkruwPgyn5GWsykL1jtRM8thfi2c888zjdw4ddP3g6/tf0K1z5w6NYuDmtjVtYVN3Od0cGQhPg/IYHpK7OHIunK5IZxW2t4NNl9STb/RvkohyTFFxdVv3GjBw1KT3Pr0UTR9vDpumG6l14jZ46riV4SK5i//GQmWczipk94BNs2nXGwC0P+e8vr3O633pNTcOGTx45CMvvz7j/cUbN28+YKHN/2KUNvVgc/pOamTdbYSHOh8zbCR3UTgcTm13sXKWobCJTknomNBi8rb9abnZaalH0ovIooISusu5DgYjbM5LpUvuo1HwoIwvZPhI7mJbWzjdWcrKTYFDhw5XbaQXq5rC4bIMlimaGAVP16YxnCR3MSsWqjqLWbl3DbCLu0NHom8lwm5ALp1yJ8TAU5eNDCvJXeQPh1OfE16vjYyaVEDvcvrB7tyjtLPmrB1ohKd63zDMJHex8ww4TShlZf45EwCazKcemRfDLvq/JHP3LJx0SQLKiXuTYSe5i89joUpZxsqc6Aeg3SrqsqcLHK7+e/Fz/zo93oDyYp4uZNhJ7sJ6D5wuTGdlHgLabqA+21vDxqCYmsQZUCHD+AIKyT0CNNffPZmenlXKCuSMREt9tecf3T6nHrww35tFIblHxI9JUNUddMOND763Zv/JwlJqlK4bYWi5hlUpyfzn168/enPSkJ5tG0ShagbTvZkUknuETDNAK6FJh3P7XD5w5LhJz736+pxPFyxd0AVdluSWWOmp5PjahfPeffbeof1PPy0xxqhAl4Qp2RSSe6Tkj0IlFIPRFB2fFJ9y3nW3j5/62pvvzJ4z543pr097/M6hA3q1a1I/McpoUKCfYlQMxhtyKCT3yDncF05RqIICKAiEIdZojrkqj0Jyj6DNvZPNgKHxxfc8fE40QkeJNZujOh+mkNwjaeedBuC0+XuyCw/OvLyhWUGIGE1mU9NdFJJ7JB24RgHaHqNNxs8zx3RPMikIIkVx9h5lTPmDQnKPpI3tAHRMp5V2RYd+nHFn3yYxioLAKYbo+t2uNMNOMRsT11JI7pH0UwqA07OoUXh0/fwXhp6dYoICfynG+Kbn3vTUvA3HVjUoyz12GYXkHknfxwNok0N31uLsPasXTBvVq2mcCT5RDOaE5j2HTHx36e97M4tJbu0MB5MxagmF5B5J38YCaJLDClgt+ambVn418+F/9WzXqG5clNloUP4/lKPAYDBFxyU3Pf2S4U+8PX/5X4fySum0qz8cjEbzNxSSeyQtiQGQdIBelKT+tmThgi8+nfv+7JkvTbrr31dd1LfPBf36XzP436Pvf/rltz/4/MtFS39ev+N4ET3tGQEHg9E8n0Jyj6QVdQDEzGPI7L/XlfunFJJ7JG1pBUC5toChcnAcHBSjeRaF5B5J6QMAIHZBKUPk0IPO3A1Rr1FI7pFU8pYJAJp8V8zQ2H+XUpb7ixSSe0Qd6AKbuuP+tjAUDgyHyhA9tZRCco8k60exsFHO3hmS3vcPcuU+2UIhuUdU7v1m2BhHZzIE9vWHyhD1RAmF5B5ZJ4YpsGm+myGw5wLXr/vjxRSSe2RZPjbDpv4uhsDubnBQjFETiigk98jKGAa7NkcYAjs7luUePaGQQnKPrPVNYHdVPkNgW0tn7qaox4soJPeIKpljgo3hCYbClnrO3KOinyqhkNwjKn0M7MyfMBT+iivLPeq5UgrJPaL+OQ928csZAqW/msrWIaPfpJDcI2t9Y9glr2cIFH1rKMs95nMKyT2yfk6AXb0NDIHcWYoz9+g6iykk98haFgO7xBUMgcznnbkr0U3XUUjukbU8Fnamjy0MvpNlucNw7n4KyT2y1iTB4ZZ0Bl/+XDOczk6nkNwja1s72CmJ/yti0JVsbAenultKKST3iDo2RFF777nDwmCzZk00QWV4oYhCco+ogvejnDnen1Ya/N53XQSnnpkUkntEWf85H6ro6ekMuqJvjFAlbqaQ3CMr/9NYqOrOzbEyyKy7k6EyfGClkNwjynp8GJza/FnEYDvRBU73llBI7pFV+ldrON2XxmDLuR5O/bIpJPcIy3svHqpmvzPYiu+CU+sMCsk90o5NMsMh+isGm+URBaqkNArJPdJK918KB+O7DLaSsXCKTqWQ3CMu8244KHMYbEVD4GTcSSG5R9yhy+Bg+ozBlt8XToYNFJJ7xG1rBYfohQy2zLZwUlZRSO4R93sCHOJXMNh2JsJJWW6lkNwjba0ZDnXWMdgWGuFkWC25S+6R94sBDskbGWSWUShj2sjqQ3KX3Ov/wSDb1xRlYndRSO4Rt9KZe72g5z7XhDKNj7P6kNwl98TfGFwnL4dL71wKyT3i1hjhELXUyqD6PgZllHuLKCT3iPs9ylnklAIGU87VcDF+YqWQ3CNuRz2oOmy3MIg+i4NLgx0UknvkHekNlWHksRIGTWpfaAzKo5DcIy/vSQNUxtt2FzNISt4ww8U0x0ohuUeeZU1dOCkXbMwNUpc720Gj5d+sDiR3kXkzXFKeOVDMIMgfBQ3lgWJWB5K7sKypDxel++LsUgbs43ho1NvE6kFyF1kvmqGR8srxQHsv2XQWNJRheaweJHdhOXqzARrRD52wBJD64e+mDGoErZQfWF1I7qJk1wAFGlET00vpl4Lfp1/b0KzAjXJ7LqsNyV0U7RtugkbcB9n0mfX46indEw0KPDXbxGpEchclaS/UUeDSYYuFPsnb8f6/20QrqIDp1VJWJ5K7KMlc1FUTqzL2uJU6Fadvmj3yzAQFlei/n9WL5C6sBTvGJqCMecSSQ0Xeiy9K/WHqdW1jFVSu+U8WVjeSu7BkftUILtFnP7p4d26lqRZmHFwxbUiXeiZFQVUS3ypm9SO5C2v+uubQUKJaDXlj+fb9R45n5+YVFBWVlJK05GUdP7Dukwcva1fXqMCrmCmFrJYkd1G8qgXcKab45udePXLsoxMefeS+0Tdd1a9bh0Z1o9XQvYurvrVL7qL4l7NREUWx/fks5XULqy3JXRRtGmxEkJh6L7OyGpPchTX19aTgxH7G9GMUknv1Zs2dEYWAGS76aG++lUJyr+5SbzHAL67ne/MjBawJJHdRevQ2I3xniG3fUs3d8K8jrCEkd3H430b4QjHEnTFs5pKbFDicvZU1huQuDgwy6n5+iWp84dgPt+RZD440wqHpj6w5JHdh3XJlrAIbY4Mks1Jx54opofUV4+ZuOF5CkpmTTXBImFXCGkRyF4U/3xALO0OvN+dOGtK7Q5OUhNgos8lsjoqJS2rcrvdNT3++Zm+OhaqiL+vCIWpyPmsWyV3sfFTtXen4xcn8nIy048ePHTty9MiRtKPHMzJPFtJN0dq2cDAOzWBNI7mLI3cZ1d6TJ6eyatadVyuwU/rvZI0juYvS7QMMcEgYf8DCqmQ8YYRD502sgSR3Ufh7VzgosQ/uL2XlihclwqHFt6yRJHdRvKIRVDH3Hayi952d4JD0WQlrJsldZL4aC1XM2EOshPXg1XBImFFja5fchXX/KCNUxm4/ZlhYkROjFdhFP5fLGktyF5Yt3RSolJT+t97/xMtvfzR/4eJlK9es+6eAJI9+fU9LOEQ9WaNrl9xF8U8pcKdAMZqi4+vWa9CoYePGDRNNUJkfreG1S+4i61kzdDE+mMeaTXIXpfv+ZYAO5kdqfu2Suyje1EOBV8nvFrHmk9xF0S8t4WA0m4yKggp0+KGYQnI/FeQubIAqGfqsKqSQ3E8J1qyZdVCFmJG7Sikk91PF8VmnKaiQYojv9dERCsn91GHN+vb600wK3NhOM7W7esKioxYKyf2UUnxk9dyX7rn63A7NG9avl5zUoHGHnv966PVvDxVRSO6nsNKM339YsnTt4WIKyV0IyV0IyV0IyV0IyV3YSO5CSO5CSO5CSO5CSO5CSO5CSO5CSO5CSO5CSO5CSO5CgDWUWP9Iz/qIanbZMzsoJPdT28a+cFIGbKWobrkfX/Ts7QMuu2LUq7+WMjDC+pIJGtGvUFSn3DPfusQIp0bjDzAAwno3PNxtpaguuWc+mgg3sU8W02/iMZTzGEU1yX1RE5Rz/lH6ScyD6swBCpzmUlSH3AvvQEU6ptEvIrUe7JQnrXwKTnF/U0Q+92N9UbHeFvpBWPvD4X6SBY3g1MtCEencD7WHS5dnFy15Kh6qqfSD+AQOZxaR5DiUeZMiwrkf6YgyyR9bSfKXKDjEpdJnIq85HBbR5ieUSTlJEdHc87qjTNOtdHgIqrHUJ3XGTT3atOly998UZU/r59CuMBZlJlJENPehKJO4iarDMXBIyKYOhQ9FwSH6c9Z6aQlweJcOl6FM3UyKCOY+Cy7vssxwnxbPrkeZGPl9fwwOyfl0eB4uL1NELvc9iShzCV0WQXUDvdsMjRGs5XKS4HAXVT/CpVUpRcRyvwRlDH/QJd8MhzoWevU3NOpYWLvNgGoVVRnQWEIRqdy/gMsganWDajO9i4PGdtZq1tPh0MxKp9ZwuYUiQrnnt4DL79S6E6qP6R20vmetthKq+1hmEFwSCigik/urcOlNN29A9RS9yoHWl6zVRkO1lGWegcZCiojknt8ILp/SzWKobqNXxyX3MoWJcEgoZJl50BhFEZHcZ8AlpZBu/vZhaWY/tBaxNvsGqmvosgkaDUopIpB7aTu43Et3J6C6kl5tgdbPrM1GQDWNLgUGaPxBEYHcv4PGGrqzGuHQl15tgNavrMWKkqDaSI2W0HiJIgK5D4RLEys91IXDFfRqFbQ2sRZbClVyKTUuh8ZVFOHPPTMaLmPoqQEcBtKrRdDaw1rsgYqbvgcaCRaKsOc+q+r3y7pwGE2v5kNrP2uxTlBNptZL0PqLIuy594NLbH6luU+iVx9L7qr9cFpGrc+gNYci3LkfMMBlAD0V+3AA503JXTUHKkM2tVZD63aKcOf+MqrclnrEhz0Br0DrAGuvYVCdTjcHoNWNIty5XwCNdfS0FqpUejUVWidZe7WCajjdlBihEVtKEd7cT5rhklhCT3PhUE//eQbJ/RCcXqO75tDaRRHe3BdA4wqWc58Pi8T3Se4O/4XTSro7H1rfUIQ39zHQmMJyzoXDq/TuP5K7w/1wSqe7gdB6jiK8ubeAxmJ6Ombw4XTHLZK7x/tQU3oYI0szkcx9O7SO0dNsOLSjDjdAq4C1VWlipfvqnoJWP4qw5j4bGi0qL3gqdbgGWqy1dsDpEXqYCa3mFGHN/VZoDKSn7DjYJR73eU0T8qYKfEgPX0JLKaQIZ+5tq35TfR8Ok6lHL8nd7rHKt7SvhpsdFGHM/bCX43aXwK5zIfXoAg2FtdZ1UBkL6WEX3PxAEcbc50FrOz1YO8Om4S7q0gEadVlrtYOqIz2dQOQ2iUnuj0AjuoSeMiacriSOOOzLoqbknm+A6jp6shqg9SRFGHO/EBpdWJFC6pYCjaasrTbC6RGW0wBaoynCl7slARr/ZoDqQKMFa6tP4fQOy+kIrSsowpf7n9CayABBqz1rq8lwWuFt9aorRfhyfxda7zEwOdDqwtpqKJwOsZzroNWAIny5j4XWCgbmqJxdsDsPqgSWNxJuiijClnufoB4/+gdafVlbJUF1ttdN0jhMEa7cSxOgEV3KwPwlb2HuS+tDWN4kuPmDIly574BWBwZoFbQGsJbaUOW7/8vyWTVSuc+D1sVBGb4n4/q/gNMsljcLbj6jCFfuT0NrGAM0H1ojWUu9WOWFDp/DzUyKcOV+I7TGM0AfQOsu1lJ3welvr/8CMZUiXLl3gtZrDNAb0HqEtdSAKnez/wI34ynClHuRCVrzGaDnoPU0a6mzoWrECmyCmzEUYcp9K9ysCcqpBrkntz5UPVmB3XBzE0WYcv8KwZ3xcxe03mTtVFB1yofhpj9FmHJ/AW6yGKBh0PqEtdM/VT+Xn4Sb8yjClPtt0IphoK6D1lesnVbD6Q1WwAo3HSjClPsF0GrJQF0stwi7zRpYwIrEQKsZRZhybwatHgxUN2j9wtrpLTj9xookQ444RiL3IgO0rmKgOshNZG6fqg95P9ALI0V4ct8BNyMYqEY+30RWcHh3aiHDK3P37kyG0J1QGUtYkZZwU0gRltyXwM0DDFQ8tI6xajkf3twSAAxtRnxdzPD4Y2KvOgBQ58Ipexkig6Bqwgp1gQyOjUTu78DNMwyQBW5yWZXMCXXh0uoLhsGynnAx3HqMIdEHqh66cj9KEZbcJ8HN2wxQBtywKosaw93IYoZY5jC4a/gLQ6E9VDfomSyI/RRhyX0U3MxjgPZDqw6rMFWBpxssDKl/ToenuF8ZAnW8bAntK1MiI5J7f7j5kQHaBK3GrNwEVOBphtKuZiiv4XEGXSGcJrNCl0PfAlbWn8t+SWfA9q39YUsxKbl3gpsNDNBqaLVjpabDydj5dANU5i0MnbR2cKrfLQlOwxh0R+A0S88QfGxkhf64wghAOf9TKwNgmdkCABJH7pDck4O8Q2wxtM5iZX40QnXJXvKvhlBdx5CxXApV3LulLLoXKmUjg20bnL7WlfsqVmR5NFTDA+l9OFQJS2t77oVwl8YAfaxv7saRsr7PzyPJGVApOxmI1PceGHrbi3+xIk9CZVxCksVNymJisP0Cp3W6cv+ZFSg5HWW+pN++R5mmJbU89wNwVxTcw0xXshLXQhV/gDbpBqgeZwAWxVR+Gm6dEar7PcZJRecwyBbCaZ+u3Bd56RQ302+D4PIzg8O6d+2i+Ss2F9W03NfDTRwD9Sy0BnudfvCY5ztEJ1asdPuCWZ/t1blhp46FnkrOgirhhOdtMvMYZB94+146WEfuD8Pl3ABvRFPNZuBK1zzRPwl25i5DZ26vSbl/BzeNGahxevYknGwClekQHW6o+nkq+6EkAFCuOsAqWKKgSq9iNMDd5UZS38sgew2qJF23ceJzVuBquLSmv/ZB4/+xd+7xNpdZ/F97n8s5jsPJhUI4CCNOY6RM0qU0/Qq5dElF1CiXDBGhlEwTSiZTNEYNokEuaU4kF5LQxeUkXdwvJ4xcOIdzHOey916/1w/7u/azv+tZz7MP83v5zsz7/zGyP9/nWc9an7XWWLxQjo2sBSp1B232jNzfA4VfXUT7vJB1HgBhHsDz9OLWuhJ3w3mqrpd/Wl2XysEUCPOja5plCxQ4vvuXIApkz35jxOxczSbJBlIwR8w0VV6vQI5TXy2e+8mXe82pMjktum/lR/NWZJ1CM3nDywLD9TMD3pD7eFD4LcaOdEsPRY49ieotrt7cfxZbP+EywXX2mb6a+wd361Au/ZmoIzCqGgCktBihEUP2iHT4f5T7Cz8DsiXy3G2xrqa2XK9b/0xDH5ylSttpeWKqTPg9zky/Lw3O4m/c50uUWVsHNDSY7wm5j4CLPNKxNei2+BG/hzAVitwd3QMNVchWIdRAw7nKup7kSernpModclDDA85BEOBaTnvEQ5hVGEE3OE8HtKqq/tVoEnYlKVtCJKnDdIfzIum2LRhVGSLJWIgCUxNAT7tfPCD3/he7Jb4ZEJqTOjuRGTJGcn+UXw5ATEMdQ52QhzfkqrmSXHO5YZWY1Ph7eXBorNRm25v20LQA83SfWnqv3YG2EM2VqyW582+pD6tBNA+cRB1TfBCBv1nHdo0ggivWXfpyfxQUnsQLpS5EMsmQcZjNyL2DyZZ/+Wn5LGbKW0fLAGV+GLlvMTuK3nLF9OH42wcAKWp+/RbTWKkMUHhFkDvzgP+gArhJmGCW+/1KIN4VGH6lq72ujgMivv/ZId17+8WDQ/KiS17u7UBhIF4oFY1PsNNUvvfTkTgEwrRFjlv1dwbRVNeUNQoc+sci91r6ToDvwruXay7dteCLHFT4tWnOTn1Q6GuUezY6BAYDzx+Ncm+LxK4mwFKV93Hk1gAizQndvr4SHFI2XOpybwkKL+CF4odIMtHNDNZj0Ic9gYi5QFQrQh5nUn0PVAjVAaZV+ohR7keBuBcVFqeGLyMu7k83rf6pbTF542pe7kUPgUPFOx5oWQYcxqCbzzVy30xtZ75GHdo3BIcqO/hAkYhfiQ6HIiR0TfASl3sjUBiDF0gOKCyXz+leXNjQBTlKrjBPrzkAYV7ShuBwiN4QRr/5eiBuVL++xPNKGR4SV3cssAtmfJw1L4OVe3EH+istCSDiCXp/+T6S5u0rct/s/BWTn9l79phuDGEa5aKLokpA9FNyO/eAw6eXuNyrXeTJy3uNI/gO+cFhCjp0AirxszzDS48/yP6mfaimo8MmcDgudDZy5s7MBDiLfxKyOI+6lchzO6hU/8Ig95/CF5Wz4ixxYii6qAVpe2S53+xYoZ3Nrk3CZYjc5lLG4lP9YvWSrhQpXuJyTwaFaRfcB2r0cU8A4jsuVTHW4k/eaWhEXKImzy9nYxL6BZOEJB6X+V6ZJCQQlVfBBnQoOLhtw/IF0yeOGdqna4eqEIWv7ScBSe5bop/0KUvQ4UEavyfLvZXLCn1jLlWbygmOtJHCbujgk3Ceey5tuRfARV4jsQoUmILfLeCQUIwO9SDMLOS5xpTJwEGaz2EF/zqZBmEa2uSsg5QmCnfYjjZWd7cjhnbMGdG1Zc0UMFFrlSx3ZTmxPxOJg2WZOE+Qe+A252zPRWIMXTb5SFAlQVeEDvWlw+RSlvtRkK1KMfORyU982M8uXQ0mGfdyjQCisZxmilM7d54CYhbnZmtvI/cTTgYyfDT2Nq9jyxx9Z3kQ0cvoBrfcf0rl276o47husXQr3hjVSFZeORfOUJZltOR6uB2jCQ2iCYGXsNz3wUXu3ZsKCqdFk87DnBE5rsBmx9kuZGhIAbrCVUBs5l7Hw2W5q4/FUPiral6EGlZDqaghVF7Xnn0vOgnOlgFdXWGyrpuSDphVfk3w+jqlfHI5x7JgMXo9AQCaFV/act8CcldNzLxhGkTwEBAjlFemyaVWlALEm+im2Klxt1YtOkD4C9DhZggzB3k+gQi2RVkry++S7e6xcyMvd/plhjvZlG3aetjVIZPcTzlp0jaokpOsrao9DERNZNg55O6eOZd43v1LUNl84R4cefZhqCoQ/0CHdyHM46jjdoO55wfNNoxJQNRlp2P+LF8oSvScFf6oZsg+09hJXM7KncLMLc73/KLwZlolyL2W4kdNduVxHtR+NQOA8OehzKUq92UgZlJkCrcfN3hwqnOSJL7m/jWnoI4hQJQplCpRY7W71tpxE3FqoyR3dbZpYfgBeQfqCIxNhdhJ7fKjZCObhRhq5RyvriAxWJ31HJHcyfqZFacvKi6Iip6INyGCzz0q949AZR/aM7sKQN2RzAOeqO92VWlmZ1HtaYfdAtjPpTGkC7VTK5/iDsSuVnJfo1xfSTtQdu7ERtvMfLnBbyLiFClf3B3ClCvUD/7xl2DwesctcAqjyU3QlT9WQAQjPCr3f0Cpp1ll+riJ1u0Ngwh6AJEYYgYi1LMsYb2ELh7kpxTthAhGc1b/9+zlviOJwgl5cYdCfMM7Hn321Tcnz/14+fqNGzdu270YVP5k8jO9iCcqORWvEnQxCxyWCt3I/8K/QZjX+Gn//A+RFwdEY4/K/a+gsh9tyS7Lji+/2TCI4Nd8Q9oeq7pceSB+hy4cy1NCiXZl7wzmPPQfRg3fAEQVyO/Un4z0ealc0XXqpjN8jxExwNTg1wMHiz7T/eAwTNiLszHvciewyUU3z4NDthBarfem3F8D8yRa8cZOK3ZLTpgWnx8HxE3c2bQc9fwWiAohfWLman337GdMevJmu8TVosjWoPHSP6ofHNKHfyffG4JRqAtEcEd2svP9FCBDTc0hcxIi+XAk91UQi7TGpHHq7n9Pyv2l0so9y0epLP0ukPsFz5WSdu/rxJMB23mW2/QbMzvp59NRmHNYNdgIcqefvyRsUqx5BgVWOUXOd0JimET8zrTDsE53KXJWetuT1CMIIhnkGAXiDiDDIa0p+Zd4IPybPSn3YSDMp5bopllvnioPIpiu2ajdlHsgyXfR+/qX7HMYSQ2+7rXAUcdxO7lPi3hov2W50iFLfhXIgzWeUqJ/vyO1vcgxUpdf8ynJTnocmzyDraROoLs9KfcBoIKWZMfzjr8SkAcRDOM7+3LiyDQmMAdUE6rKcP4aPqmZSDxQOwuH2AYRjMczNcNhb56l8e4AatgMKjWEs0i6CIh5ujAkDVRka3JrbdFke5wa2nlQ7n0s5C7138XliR6cYeIWymnuPXW3osRXYkdEO/502wh8lamJhXEiW80FvQ3nGWy7Q/iMbTk7yTgi2WSh+16XJ7wMOKoUI8FfKYekjblXnvKg3H8v/KML5IYjwKaosgPkQQRN+FanPjRAVOIgRJBcons2JBRrr4RrKUj1hTtwQpYOuv4lYdemf5/l/N9yUpikwqhnDHCUyTOaW7sJW8+o8MzzZ3D4ClWyU9Sb23tyfwQU0mLNX/aTnqIUrvAnzTpXkqRBECWCiRDBj6hwTDGGEK/xgcD7cmcUk8Tr9gFQQVVkK1dmk715sNO4z9zksa0KfKqpNnAsRZ75ght8NETgW+M9ud9fOrk31wWAy+TVN6chkq2ue3g6ytQWBs2thDCd9Q++zq7xT42kLywEEdzzG3oly3xBni/hAlD5WjhUFGYZfxRooLPNE5WKUe5X5JKthUpDecMznpN7W5PcZTu3/xh3NhAzxa2Wh6PToY0CKKM4wIfrbuFXtP+JlFzLTxHMkEQcEClOiJKPMvOEk5hCD5WPtauIVeJz0TiYrLKuLYboalG6ftEwUfQ5z8n9zlLJvT+FDVFMAYVMFIwXUBzdcr8wpsuovS5Plqn/tV+MtpPdEEKJNAupCP2JvVFLIhjH5s0EFSU9KLlmfHw5VDqIuAv4KTa5TyR86zW5tyqN3AsraZOB4+VukffYpOBG61zuANAPxc3QVL+rqslE9cyPM/xilwPDXGsX9EjUUhVURgo2GGZWhNy7nsfbYAj/cdRRRhrntq+s8vAv+W+Q+xw6R4XZdtzb/hVWro/BWcrtRRNjIQLfKeVUiuev8hI/EI4ZbJffrnO+PhD2yw+eYN8u8p/cSyjoy8uzmEROrhCwUhaXJ110Cqjn2ViPyb2FUe6SUy/hFHPCSPb53lxSMDtRkaLETP1Uj7WaZvx/AUHhUk84S+MCq/UIKm3QREeLvOp1oNJe6qUi0gI2dr9c9udSC9o6MkS5BxTFlNnpLblnlELuh+P13qonZPv8vUows1FJhj4U85yDSXzX4HNC+bJ78Jy9Jv7cr/UdGrgN3ExAE9fTYiYtHUCluWQ0INpYmblzhWSz6ZXUSpB7uKPK4baQl+V+ZUybKWAUbzknjorDhCpmRXhXmp1GMzv0FgXqgZ3vHrVE9AghYtE5PfqoeVAWpcoPaKKORftALzDuTVknhO7y1VfCFkMJ/wnUcrNhPu4LEMk7XpZ7LbSgmeB6vksuFTYDhcprEVeknPvQ9se+J7AVP21gt9qFAiqPFeLpjoJ0pOYs2qMhU8ZisdtIUPEXC5VXYrVVZ5poFDG0Z9xlqJsWKovH0w7+h8uduk2rBk1PX34aNpH4SKe4c2rfjjJcpiSNralWYAewEk1615U2i/A7P2Rnugo1wVZBPX+DKPbId5m5Kfp9TUw6EFx0Rz038o4nYo3y+O/wHy73oXRQmv68JGGEs0K6eiLLUTGRzU1zbC2UJqXuP/nmJiba7xDOQD2Z5nP7IDN83SrIrG/6b3gT9dDh/Qby9IVI5ntI7o1jlnuQGjg+4rNYwsu3ErC0PVY608MiLgP6vJXcU6bHurrKvm9tuY23ZjNE4X5I5AoVLvEmus3kNFsnLy801BfylFOrZp535F4rZrmvEPPPlWUTdxowVHs7hLY8o3u3tdFV4/8MHHftQCveh2iSi+yXqnZDPacgitF6xw7xKuq5SROrvA0uTqKWH7U2HmIhRDLkP1nu3Zj8NpGkxihmufubv1WA9rwJfMdksKJuLOU4cFHpsW/QkmV8gUZmjJUQqoBKb6nASd+yltNJmjhtGqjICbiJ7FwUKaGcsM0zcq8dq9zzU6V++GJQyBA32WSsXTBvXe6FzMXJYN7PV4m2wgmL5y7cGkJrNkE0T8bwvh2PYp85u/RQjv12oZYF4DCPL4ILBxXX2Ss8tPcrPZqdvPpUrR/D7R5/BF0cB4Wm4mXS2Pzme7Z9z5lK8JAFDkofxzsU3Ypyn4cGgjO63P/yD9w4C1bCclF1jn2rAX2n0ss+KSD9vzrsNXgR+qGWA36rdtRREMlar8i9KXMci9wptkxmG9x7dZQ3jrGeleB6d53UmBS6aS320yGSKShz6Hp19dAZiGZZDN0Aq2JJ+iQGdINziIaoZW+87h/2C4jmL6hluPSYIM6kK8unQ560iJnlftAvLnreIstd/bqSQijyKte1VJW3saZrh7pmxuJpOpgevaylHIiDp+TiwPZYBrhBtuxoUgMeKTv4hBSQyVaek5eBwyYUmKsmIz0i91tFuUv9ZImchTQLFO6WNxIdRIk5Pq7N7EZ2Bz3dKuUDovGkH0oUtHB9p41ApQwaKfYL/aeCCj83O3Z6oY5didohAVtBgY4EuRu8dggFQjcpgVixB7uZzHIP1ZeraWtAoa1sqVmHAjvKsc+zx9jTbob+C/sJImmHEr3dBbQ7QaVRDCsiyqFEng9UJsu/juyfbwcO1UuECJPayDh2JFuX4Tb4IYK3vCH3TrHJ/TNw+ETO2/ETXAZKHTUKRc1J0vo0+uWugQpjxFqNrNZ/Ok76DeqoBukLFpxdDVGkJmvKFb2Mb9tERmNN1Sp/AHkCN4NDmSMo011JbRZ5Qu7dBLmL2YTaQe2EQeIRuUg53GKQDcRvFdr/4BApR3djlGdyOSwHKjHZnZdAXm8thbWtUeR3oNJeslPLiaWt5QC0k06LgZAzjMPVyeAyexQn8HQvThFrjiL/SmQHNBOzDHKfL/++xBIfVV+kuU2fRnV8pxYb0hs/oo6g87BI+lmZR68wOoZ9PY+iSD9j2qU/RLEIQ8v/2PWWjhMKkKC1kZpfJgFc1ZXjf3+m/S09V0ddET5wKJsd21HZ0hNy/5Nwuku5s/gDyDHDIPctlkWtI1c40tuPKjUY9b0t5Yo7iWMriDHsCb4UVKagkUGSo1Ao7ieUGKfmfREOBzOOIHHsWiDqFxr7y5vg8erngraRSiyXKPvq5bf2Di/I/Z1Y5F5AjpiHrMbF/x6jKIqHSE4gT6idPni4DyJ5MOpJN9aU334GNax3fuzk/fyUSHqyyHS2fL+thCi2GceIrXHuqtso/t7dGAjfcnO1KgO/YCYnvRsPRJMiNNNQcfN4Qe4LQaGO5XHky7Lau9eHdZcSS4xdl2UPaYe60czH/DLSTtZZYHPp5lE8MNg9NJ7YEEMt40MUOWAcUvqWW+5Pu1oUMysJUznZZGoGFoZj/XLh4C6/J0SQ+iPaWcGJW7wg929j8MwU1TSWO8aY5N5FPzGV+ClFGGX+NSgcUYw0l4eQYEc5JeSb8gwVTkha2YtG6siOQqK8sLCGfTjAknBlw+k83NkZIukYkPrL6YxwxH3V2ago9IHSeJOQiTzF+p8i6QwSHtmaXRkFJgOYquPPm+Q+EZTiM3IUNpW81EWqTTBT2XLQ1Ww9XIwcs5UUspCqPY5GEml9pcz1oNLZOGhmUUQ+J+659WsntYlTH/9FojOYDrVtzv+u3txNi4fXg0gS5yFD3ht3V4O6g/ehQ1B5FHzjAblHFcnjUE9huvkZPoSRu9DUEM/6rp+WBxjdAZEMRCy8TM7kdzC7s/fQD9c0IE6dLkEThyO23Mk8CoaX0yKm+r85AXT4hgaEWiJxBbk2OWqskZr64nvl8D/FZC/I/TqQH4/EOPPhjn1Mcg9ebjRvZPpko+qr0bv9MulrZc/eCcbXeBGds751YrIpBY1kkaoMjDGlZlZxo+7+opWp7hn9ILjHq5xuBho6HDG0o1Tfz3byPusFuXeTkwPEiYpyZZGrQQ7WDdgS2n120EGbtM3Ca7IPHzbMT/zZZ9qU3Af0O7vXxzqIZ7FUxJDbVbegygYgaPLUq35gSH0uz/SrKL6fIy2Ao/GnyFPMvDGUL6+zF+Q+FhRWWBSk4r63XaA7zDQZK60Ao8hvbKq6hqqr/vPjyfw4eeJaw19qKjhUch1tZxJjHMQzRa6iSQtYZ0ivbJrotKalu2V7bI5YS2QisqLRlSGKxHuWhlAHFTwSN3F9Urd7Qe6rQWESatgUpz8AiTuNci+uKv7AgfbgcE2RzTCMa+iI8WXr+9EEp9/KRHCYY/hYasVQueuNBoIpAGJR4JCun/XLXvTNJ2U8PnmbeUIrE7Kefvf/JFKW4rZhH+ciIYVEDfOdBiqimRfkrh5eMBB5AhTqlT8oN6TJcsdnhc5PJaxI3Gz3hVYB0/KA3LJSbmZLGojVs6dilHs/3aYec4awtbj9QR2Ns++TKeMnTp6zemcAGeR2XcquFG6aM3ns5CkLvzmGJmYD0Z0plGV4Qe7YEmyKBaPsvJ6NzHLPVjMLn2l7wv6KGkL1gOct2djLT7bcWQMcGuQafma4Go3cJ/kN5NRMJYwiXva7x1o6F4pxZorSXV6K5d6T+8s2YyXWxFGuXDpNapjljj3U4z3ERx3ShNTXgSXuEGrITtIe74evAoeUb41rZVqgkZZyzVhcvnRAaGUnz0SsfABRrEIZcwNT4lJamEiniAfk/q1FK+YRknGZ7SiQZiH3n5N1Wyve8EXo6jRqySkHHLfbzr5rQH/2rgi1+z409/M+jkbqKnkWkUVgcOSkCytV7VksuhXs6QhE0sLoo7KLB+Tumqvfg7vGWinLxQSSZblzKw/KhlVx6nEgav+CKlLx1my5PlZJHYsavlI+rmo0Aapn2LwY5qEeRRN7gKCtUsJapeuwNKyFKKZiqTheD4iEkbk5DZQUmTfkrnqAL3MXOgP3KSGGBNjIvejXao3v7L2YP6k6ENV2osSJSuCmQoH9ff7I2XpUVke7Msm4sIJ9jwTRxOkYdtSGyhp6pVqBSj20R5gkPA5jhV71hD9O7STwgNypZyPM6y61dwWHjHyUKJTkTmwtDwrX9nn0JsUJU/V7u72uCoNQogcolLu39z3qi7d/CLXkfvrqgJ49h767C83sld2l8gqPiobyf0W0RG5WHY6l5Js00HGrBxyRTEdklROocLoDOFTZhyK5otyJzDiQqL0VDQRugGgSZUNW0e0g8gJeJDbEEnh0hyh2o8LDoOILYSnIAeICF15nVQce31dekfv3fvVCVVIvu68Fh7SNKHPC9hSZnwh6Wh5EI9tcx8wTKHPyVtCT9M5FrNvJJmnZ0P4RypsIjmEpCPnsEzwmDrYElkHoFbnjY6DQlt5YBeNSwSFlFRooApXXUceyVNDg61eEFvzTBwqph9BAQXvQUecimlfXq34gme8Mw+Ofl1bJ21PBPsFjpGQEd1TdG/CO3A9XBoWKQ1flI+Kp1YOrAFF2FRqpZt3YuTUDWNJXoB0vMQP6ZYIvxwOHr8+pi99BYHfeBWvLq5del4bL21NXXnsWI9+77kn/4AB6R+44D1yUvTIFFCp/FXssukF61o66DFykvVKAloTeSwGiUwgt2MgF8LduwItKE6fRzoKx8un+rrudqTQ0c7czXRBL1IaRZusRvSR3HAAm6m+30lOcYjAJypH+i3VAodbLMYWmuzqHT+vEfrZfybJ26lWc0GElXmRmy0O4VM6ozbsp2dKgEmqljpHWoFIBL5RNf7gifEJ1+TyEHpN74H6QaZODVkzwxVST2fCn+xuc1V/cVe1HZ4UwRg5N7dv2jnuHzj2G9uTM6HtT5XM/VIsn5+bixWdiOYCGH6Idu+sBkboQVVZIsb0990EUQbxgQpunvDj0tanf0R/lHblj0UMgkDzeWolLr3as4bYnUeHR3UcD+P+XnJ9/zsN/F6ezdqM1eS9UDB/t3fe4bktQkV2W5qIDFXy9AuC/heDzPtBx11a0J7h8yF3X3dBm8IJCtOJ/FK947emeQ8YtyWfOfiBEg7bMYIhix3+r3Ill6cByy1L0KN7nOETxGJaGVyCKb/4ndzwz3i34Sn3Xo2fxPiGfMDZVRPZcfPpfLHciuPLp3ySQd+uul9aWoJfxPpVBpdWFONWJmf+T+3mKt30+b+7c+St/+L/s3c+Lr2MYx/HLbzqnbJ2zkTjEUqNkyAZLk5rJjvxomB02o1lMGguGklIskKSMjcxSU2NnNQtkhQ2hsaCZiYn0nW4baq57eXvKVV6vv+G9eXquPvdB4z93U2S3tBG70XlN7gVxZ2TnprkA3pA7BT0Q2RVtxH50npJ7QTweneM24M/oPCz3gliLzg+TnETeL/eCeCU6X7QRFyKbl3tBvDvNZsbtkd0s94L4eJrNjIXIrpF7QexF56024tHILpd7QexH5+U2Yj06v8m9HmaXRrbWRrwRne/lXhDnI1tuI7aj85ncC+K2yJam+QT4RO4FsRDZPW3Ej9H5UO4FsRLZrW3E7JLI3pR7QTwf2XXTfAK8JPeCeDuyq9uQucielXtB7ERnNskh8bLcC+Kr6Pw8yW7WktwL4o+LJhlFfTWye+VeEecj25vkP9Oc3Cvirsh224gvI7tR7lT0WGTbbcTvF0dyTu5U9GJk77Uh10ZyVu5U9FFkr7ch90Umdyr6Zprcnwm5U9/JmUg225B3IjuSOxXd0b/eNOTzyA7lTkVPR/JcGzI7E8lPcqeiD6Y57ro7ku/kTkW/nu1f1Jxg4/2yY7lT0kaccuGgjTm+Pk5Zb3KnpJP1q+JvV64ctlHfzsc/bthqcqeqo53NJx9cfGh165f2b3z9/uoji0tPvPDprMkd5A5yB7mD3EHuIHeQO3IHuYPcQe4gd5A7yB3kDnIHuYPckTvIHeQOcge5g9xB7iB3kDvIHeSO3EHuIHeQO8gd5A5yB7mD3EHuIHeIBnIHuYPcQe4gd5A7yB3kDnIHuYPckTvIHeQOcge5g9xB7iB3kDvIHeSO3EHuIHeQO8gd5A5yB7mD3EHuIHfkDnIHuYPcQe4gd5A7yB3kDnIHuSN3kDvIHeQOcge5g9xB7iB3kDvIHeSO3EHuIHeQO8gd5A5yB7mD3EHuIHfkDnIHuYPcQe4gd5A7yB3kDnIHuSN3kDvIHeQOcge5g9xB7iB3kDvIHbmD3EHuIHeQO8gd5A5yB7mD3EHuyP3/7q926VgAAAAAYJC/9Sx2FUPoDrqD7qA76A66g+6gO+gOuoPu6A66g+6gO+gOuoPuoDvoDrqD7ugOuoPuoDvoDrqD7qA76A66g+7oDrqD7qA76A66g+6gO+gOuoPu6A66g+6gO+gOuoPuoDvoDrqD7qA7uoPuoDvoDrqD7qA76A66g+6gO7qD7qA76A66g+6gO+gOuoPuoDu6g+6gO+gOuoPuoDus3UF30B10B91Bd9AddAfdQXfQHd1Bd9AddAfdQXfQHXQH3UF30B3dQXfQHXQH3UF30B10B91Bd9Ad3UF30B10B91Bd9AddAfdQXfQHd1Bd9AddAfdQXfQHXQH3UF30B10R3fQHXQH3UF30B10B91Bd9AddEd30B10B91Bd9AddAfdQXfQHXRHd9AddAfdQXfQHXQH3UF30B10R3fQHXQH3UF30B10B91Bd9AddEd30B10B91Bd9AddAfdQXfQHXQH3dEddAfdQXfQHXQH3UF30B10B93RHXQH3UF30B10B91Bd9AddAfd0R10B91Bd9AddAfdQXfQHXQH3dEddAfdQXfQHXQH3UF30B10B90hcCKiPodek2oAAAAASUVORK5CYII="
;var LoaderScene=cc.Scene.extend({ctor:function(e,t){this._super(),this.urls=e,this.callback=t;var s=cc.director.getWinSize();this.setContentSize(s),this.bgContainer=new cc.Node,this.bgContainer.setAnchorPoint2(),this.bgContainer.setContentSize(this.getContentSize()),this.bgContainer.setPositionRound(this.width/2,this.height/2),this.addChild(this.bgContainer,10),this.contentContainer=new cc.Node,this.contentContainer.setAnchorPoint2(),this.contentContainer.setContentSize(this.getContentSize()),this.contentContainer.setPositionRound(this.width/2,this.height/2),this.addChild(this.contentContainer,11),this.sceneName="loaderScene";var n=LoaderScene.getLoadingText();this.message=cleverapps.UI.generateOnlyText(n,cleverapps.styles.FONTS.LOADING_TEXT||cleverapps.styles.FONTS.TEXT),cleverapps.styles.LoadingScene.showMessageOnRewrite||(this.message.setPosition(cc.director.getWinSize().width/2+cleverapps.styles.LoadingScene.bar.x+cleverapps.styles.LoadingScene.message.x,
cleverapps.styles.LoadingScene.barBg.y+cleverapps.styles.LoadingScene.message.y),this.bgContainer.addChild(this.message)),this.hints=[n],this.init(),cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED,this._updateTransform.bind(this))},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.schedule(this._startLoading,.3)},rewrite:function(){var e=this.message.getString();this.message.removeFromParent(),this.message=cleverapps.UI.generateOnlyText(e,cleverapps.styles.FONTS.LOADING_TEXT||cleverapps.styles.FONTS.TEXT);var t=cc.director.getWinSize();this.message.setPosition(t.width/2+cleverapps.styles.LoadingScene.bar.x+cleverapps.styles.LoadingScene.message.x,cleverapps.styles.LoadingScene.barBg.y+cleverapps.styles.LoadingScene.message.y),this.bgContainer.addChild(this.message),this.onChangeSize()},onLoadError:function(e,t){this.message.setString("Error loading! Retry number: "+t)},createAnimations:function(){
this.animations=cleverapps.styles.LoadingScene.animations.map(this.createAnimation.bind(this)),this.updateAnimations()},createAnimation:function(e){var t=new cleverapps.Spine(e.json);e.onBg?this._logo.addChild(t):this.contentContainer.addChild(t);var s=e.name&&e.name.idle&&(e.name.idle[cleverapps.settings.language]||e.name.idle.en)||"idle",n=e.name&&e.name.start&&(e.name.start[cleverapps.settings.language]||e.name.start.en)||"start";return n&&s&&t.setAnimationAndIdleAfter(n,s),n?t.setAnimation(0,n,!1):t.setAnimation(0,s,!0),t.setLocalZOrder(e.zOrder),t.setScale(resolutionScale),t.style=e,t},beforeTransitionAnimations:function(e){cleverapps.isInstant()?e():(this.bgContainer.runAction(new cc.ScaleTo(1,1/1.1)),this.contentContainer.runAction(new cc.ScaleTo(1.3,.7)),setTimeout(e,500))},finishAnimations:function(){this.animations.forEach(function(e){if(e.style.name&&e.style.name.finish){e.setCompleteListener(function(){})
;var t=e.style.name.finish[cleverapps.settings.language]||e.style.name.finish.en;e.setAnimation(0,t,!1)}})},onTransitionAnimationDidStart:function(){this.finishAnimations()},init:function(){var e=bundles.loading_scene_backgrounds.urls,t=e["background_"+cleverapps.settings.language]||e.background_en||e.background;cc.sys.isMobile&&(t=e["background_mobile_"+cleverapps.settings.language]||e.background_mobile_en||t),cc._loaderImage=t;var n=function(){};this.animations=[],bundles.loading_scene&&cleverapps.bundleLoader.loadBundle("loading_scene",{onSuccess:function(){this._logo?this.createAnimations():n=this.createAnimations.bind(this)}.bind(this)});var i=function(s){cc.loader.loadImg(cc._loaderImage,function(e,t){s<=1||!e?(this._initStage(t),n()):i(s-1)}.bind(this))}.bind(this);"playable"===cleverapps.config.source?(this._initStage(),n()):i(3);var o=null,a=null,s=cleverapps.once(function(){if(this.drawPercent=0,this.needPercent=0,this.percentInterval=setInterval(function(){if(
this.drawPercent!==this.needPercent){var e=(this.needPercent-this.drawPercent)/20;.01<e?this.drawPercent+=e:this.drawPercent=this.needPercent,this._bar&&this._bar.setPercentage(this.drawPercent),"undefined"!=typeof FBInstant&&FBInstant.setLoadingProgress(this.drawPercent)}}.bind(this),.2),!cleverapps.isInstant()){var e=cleverapps.styles.LoadingScene,t=new cc.Sprite(o);if(e.barBg.scale9)(t=new cc.Scale9Sprite(t.getSpriteFrame())).setContentSize(Math.min(this.width-2*e.barBg.scale9.padding,e.barBg.scale9.width),e.barBg.scale9.height);this._background=t,resolutionScale&&t.setScale(resolutionScale);var s=this._bar=new ScaledProgressBar(new cc.Sprite(a).getSpriteFrame());s.setDimension(Math.min(this.width-2*e.bar.scale9.padding,e.bar.scale9.width),e.bar.scale9.height),s.x=e.bar.x/resolutionScale,e.bar.initialX&&(s.x=e.bar.initialX/resolutionScale,setTimeout(function(){s.x=e.bar.x/resolutionScale},400)),s.y=e.bar.y/resolutionScale,t.addChild(s),t.x=this.width/2,t.y=e.barBg.y,
this.bgContainer.addChild(t),this.progressBar=t}}.bind(this)),r=function(){o&&a&&s()};return cc.loader.loadImg(document.getElementById("loadingA").src,function(e,t){o=t,r()}),cc.loader.loadImg(document.getElementById("loadingB").src,function(e,t){a=t,r()}),!0},_updateLogoPosAndScale:function(){if(this._logo){this._logo.x=this.width/2,this._logo.y=this.height/2;var e=cc.director.getWinSize(),t=Math.max(1,e.height/this._logo.height,e.width/this._logo.width);this._logo.setScale(cc.contentScaleFactor()*t*1.1)}},updateAnimations:function(){this.animations.forEach(function(e){e.setPositionRound(e.style.pos||cc.p(this.width/2,this.height/2));var t=1;e.style.width&&(t=Math.min(this.width/e.style.width*.9,1)),e.setScale(t)}.bind(this))},_initStage:function(e){cleverapps.styles.LoadingScene.pattern?this._logo=cleverapps.UI.createPatternSprite(e||null,cc.director.getWinSize()):this._logo=new cc.Sprite(e||null),this._updateLogoPosAndScale(),this.bgContainer.addChild(this._logo,-1),
LoaderScene.showCanvas()},onChangeSize:function(){this.setContentSize(cc.director.getWinSize()),this.contentContainer.setContentSize(this.getContentSize()),this.contentContainer.setPositionRound(this.width/2,this.height/2),this.bgContainer.setContentSize(this.getContentSize()),this.bgContainer.setPositionRound(this.width/2,this.height/2),this._updateLogoPosAndScale(),this.updateAnimations(),this.progressBar&&(this.progressBar.x=this.width/2),this.message&&(this.message.x=this.width/2+cleverapps.styles.LoadingScene.bar.x+cleverapps.styles.LoadingScene.message.x)},onExit:function(){clearInterval(this.percentInterval),cc.Node.prototype.onExit.call(this),cc.eventManager.removeCustomListeners(cc.Director.EVENT_PROJECTION_CHANGED),cleverapps.bundleLoader.deleteBundle("loading_scene")},_startLoading:function(){this.unschedule(this._startLoading);var s=function(t){cc.loader.load(this.urls,function(e,t,s){var n=s/t*100|0;n=Math.min(Math.round(n),100),this.needPercent=n,this.rewrite()}.bind(this
),function(e){e?(t++,this.onLoadError&&this.onLoadError(e,t),t<10&&s(t)):(this.needPercent=100,this.callback())}.bind(this))}.bind(this);s(0)},_updateTransform:function(){this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._logo&&this._logo._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._bar&&this._bar._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._background&&this._background._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},closeAction:function(){}});LoaderScene.showCanvas=function(){document.getElementById("gameCanvas").style.left="0",document.getElementById("gameCanvas").style.top="0",void 0!==cleverapps&&cleverapps.canvasTop&&(document.getElementById("Cocos2dGameContainer").style["margin-top"]=cleverapps.canvasTop),document.getElementById("cocosLoading")&&document.body.removeChild(document.getElementById("cocosLoading"))},-1!==["iyodo1","ayodo1"].indexOf(cleverapps.config.source)&&(
LoaderScene.showCanvas=cleverapps.timeredThrottle(2e3,LoaderScene.showCanvas,Date.now())),LoaderScene.getLoadingText=function(){if(cleverapps.isInstant())return"";var e={en:"Loading",ru:"Загрузка",ja:"読み込み中",zh:"载入中",es:"cargando",de:"Wird geladen",pt:"Carregando",it:"Caricamento in corso",ar:"جار التحميل",ko:"로드 중",tr:"Yükleniyor",nl:"bezig met laden",fr:"chargement"};return(e[cleverapps.settings.language]||e.en)+"..."},cleverapps.styles.LoadingScene={barBg:{y:80,scale9:{width:400,height:19,padding:0}},bar:{x:0,y:0,scale9:{width:400,height:19,padding:0}},message:{x:0,y:30},animations:[]};var VictoryWindowBase=Window.extend({createAddbutton:function(e,t,s){var n=[];switch(e){case GameBase.REWARD_CLOVER:n=["x2@100","x2@200","x2@300","x3@300","+10[=]"];break;case GameBase.REWARD_PIGGY_BANK:break;case GameBase.REWARD_EXP:n=["x2@100","x2@200","x2@300","+1[=]"];break;case GameBase.REWARD_GOLD:n=["+30[=]"];break;case GameBase.REWARD_BOOSTER:n="match3"===cleverapps.config.type?["x3@200",
"x2@100"]:["x3@300","x3@400","x2@100","x2@150"]}var i=cleverapps.Random.choose(n.filter(function(e){return!(-1!==e.indexOf("[=]")&&!cleverapps.rewardedAdsManager.isAvailable(RewardedAdsManager.REWARDED))&&(-1===e.indexOf("x2")&&-1===e.indexOf("x3")||0!==t)}));if(i){var o=new RewardBuyButton({window:this,game:this.game,type:e,config:i,onRemove:s});return o&&(o.setPositionRound(cleverapps.styles.VictoryWindowBase.rewards.button),this.rewardBuyButtons.push(o)),o}},listChanges:function(){return[new VictoryChestChange({level:this.level,stars:this.starChestChange,oldChestStars:this.oldChestStars}),new LanternChange({level:this.level,lantern:Lantern.Get()}),new TournamentBookChange({game:this.game})].filter(function(e){return e.isActive()})},runChanges:function(e){this.runAction(new cc.Sequence(new cc.DelayTime(cleverapps.styles.VictoryWindowBase.changes.delay),new cc.CallFunc(function(){e.forEach(function(e){e.createView(this).animateChange(e.calculateDelta())},this)}.bind(this))))},
createRewardsBlock:function(){var l=cleverapps.styles.VictoryWindowBase.rewards;this.rewardViews={},this.rewardBuyButtons=[],this.game.collectedBoosterCell&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTER_CELL_RECEIVED),void 0!==this.game.rewards[GameBase.REWARD_CLOVER]&&(!this.game.gameMission||this.game.gameMission&&!this.game.gameMission.isRunning())&&delete this.game.rewards[GameBase.REWARD_CLOVER];var c=function(e,t){t&&t.showUp&&(e.visible=!1,e.runAction(new cc.Sequence(new cc.DelayTime(t.showUp.delay),new cc.CallFunc(function(){e.scale=0,e.visible=!0}),new cc.ScaleTo(t.showUp.duration,e.baseScale||e.baseScaleX,e.baseScale||e.baseScaleY).easing(t.easing||cc.easeBackOut()))))},e=Object.keys(this.game.rewards).filter(function(e){return e!==GameBase.REWARD_BACKGROUND_CLOVER});3<e.length&&(e=e.filter(function(e){return e!==GameBase.REWARD_PIGGY_BANK}));var t=e.map(function(e){var t,s,n=this.game.rewards[e],i=this.rewardViews[e]=this.getRewardBackground(e),
o=i.button=this.createAddbutton(e,n,function(){l.twoLinePrize.icon&&t.setPositionRound(l.twoLinePrize.icon),l.twoLinePrize.amount&&s.setPositionRound(l.twoLinePrize.amount)});t=i.icon=this.getRewardIcon(e),i.addChild(t),t.setPositionRound(l.icon),e===GameBase.REWARD_EXP&&l.Exp&&l.Exp.position&&t.setPositionRound(l.Exp.position.x,l.Exp.position.y),!o&&l.twoLinePrize.icon&&t.setPositionRound(l.twoLinePrize.icon),e===GameBase.REWARD_PIGGY_BANK&&l.Piggy&&t.setPositionRound(l.Piggy),t.show&&"function"==typeof t.show&&t.show(),i.baseScale=i.scale,c(i,l.bg),t.baseScaleX=t.scaleX,t.baseScaleY=t.scaleY,c(t,l.icon);var a,r=n;return e===GameBase.REWARD_PIGGY_BANK&&cleverapps.piggyBank.isFull()&&(r="messages:VictoryWindowBase.piggyBankFull"),s=i.amount=cleverapps.UI.generateTTFText(r,cleverapps.styles.FONTS.REWARDS_TEXT),i.addChild(s),s.setPositionRound(l.amount),!o&&l.twoLinePrize.amount&&s.setPositionRound(l.twoLinePrize.amount),s.baseScale=s.scale,c(s,l.amount),o&&(i.addChild(o),
cleverapps.UI.onClick(i,o.createListener(function(){o.action()})),o.baseScale=o.scale,c(o,l.button)),l.container?((a=new cc.Node).setAnchorPoint2(),a.setContentSize2(l.container),i.setPositionRound(l.container),a.addChild(i)):a=i,a}.bind(this));if(0!==t.length){this.existRewards=!0;var s=new cleverapps.Layout(t,{direction:cleverapps.UI.HORIZONTAL,margin:l.prizesMargin,padding:l.prizesPadding});if(s.setLocalZOrder(2),!1===l.title)return s;var n=[cleverapps.UI.generateTTFText("messages:VictoryWindowBase.rewards",cleverapps.styles.FONTS.VICTORY_REWARDS_TITLE_TEXT||cleverapps.styles.FONTS.WINDOW_SMALL_TEXT)];bundles.victorywindow.frames.level_victory_reward_line&&(n.unshift(new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_line)),n.push(new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_line)));var i=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:l.margin});return new cleverapps.Layout([s,i],{direction:cleverapps.UI.VERTICAL,margin:l.margin,
padding:l.padding})}if(l.noRewards){var o=cleverapps.UI.generateTTFText("messages:VictoryWindow.rewardsAhead",cleverapps.styles.FONTS.VICTORY_NO_REWARDS_TEXT||cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);return o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),o.setDimensions(l.noRewards.width,0),o}},getRewardBackground:function(e){var t,s=cleverapps.styles.VictoryWindowBase.rewards;if(bundles.victorywindow.jsons.level_victory_reward_bg_json)return(t=new cleverapps.Spine(bundles.victorywindow.jsons.level_victory_reward_bg_json)).setAnchorPoint2(),t.setContentSize2(cleverapps.styles.VictoryWindowBase.rewards.bg),t.setVisible(!1),s.bg&&s.bg.animation&&t.setAnimation(0,s.bg.animation,!0),t;if(bundles.victorywindow.frames.level_victory_reward_bg)return s.bg.scale9?((t=new cc.Scale9Sprite(bundles.victorywindow.frames.level_victory_reward_bg)).setContentSize2(s.bg),t):new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_bg);switch(e){case GameBase.REWARD_CLOVER:
return new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_bg1);case GameBase.REWARD_PIGGY_BANK:return new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_bg2);case GameBase.REWARD_EXP:return new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_bg3);case GameBase.REWARD_GOLD:return new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_bg1);case GameBase.REWARD_BOOSTER:return new cc.Sprite(bundles.victorywindow.frames.level_victory_reward_bg2)}},getCloverVictoryAnimation:function(){var e=this.mission.getIcon(),t=new cc.Sprite(e);return t.setScale(cleverapps.styles.VictoryWindowBase.rewards.Clover.scale),t},getGoldVictoryAnimation:function(){var e=new cc.Sprite(bundles.menubar.frames.coin_png);return e.setScale(cleverapps.styles.VictoryWindowBase.rewards.Coin.scale),e},getRewardIcon:function(e){var t=cleverapps.styles.VictoryWindowBase.rewards;switch(e){case GameBase.REWARD_CLOVER:return this.getCloverVictoryAnimation()
;case GameBase.REWARD_PIGGY_BANK:return new PiggyBankVictoryAnimation;case GameBase.REWARD_EXP:var s=new cc.Sprite(bundles.menubar.frames.exp_png);return s.setScale(t.Exp.scale),s;case GameBase.REWARD_GOLD:return this.getGoldVictoryAnimation();case GameBase.REWARD_BOOSTER:var n=new cc.Node;n.setAnchorPoint2(),n.setContentSize2(t.Booster);var i=BoosterCellView.prototype.getImage(this.game.collectedBoosterCell);return n.addChild(i),i.setPosition(n.width/2,n.height/2),void 0!==t.Booster.scaleX?n.setScale(t.Booster.scaleX,t.Booster.scaleY):n.setScale(t.Booster.scale),t.Booster.animationName&&cleverapps.settings.fpsMode!==cleverapps.Settings.FPS_MODE_LOW&&i.setAnimation(0,t.Booster.animationName,!0),n}},addButtons:function(){var e=[],t=new VictoryWindowButton({level:this.level,oldStars:this.oldStars,oldStoryStage:this.oldStoryStage,boatswain:this.boatswain,onPressed:this.close.bind(this)});if(e.push(t),this.level.isRegular()||this.level.episode.isDailyCup()){var s=this.getShareBonus(),n={
window:this,shareBonus:s,toReplace:{}};this.game.level.episode.isDailyCup()?n.toReplace.stars=this.game.getDailyCupStars():(n.score=void 0!==this.score?this.score:cleverapps.userresult.getScoresForLevel(this.level.episode.episodeNo,this.level.levelNo),n.level=this.level);var i=ShareBonusButton.create(n);i&&e.push(i)}return e},getShareBonus:function(){return this.game.level.episode.isDailyCup()?cleverapps.ShareBonus.SHARES.dailyCup:cleverapps.ShareBonus.SHARES.victory},getShareOptions:function(){var e=this.getShareBonus(),t={levelNo:this.level.episodeNo*Episode.LEVELS_PER_EPISODE+this.level.levelNo+1};if(void 0!==this.score?t.score=this.score:t.score=cleverapps.userresult.getScoresForLevel(this.level.episode.episodeNo,this.level.levelNo),this.game.level.episode.isDailyCup()){var s=this.game.getDailyCupStars(),n=s;"match3"===cleverapps.config.type&&(n=Messages.get("Share.DailyCup.stars"+s)),t={stars:n}}return{shareId:e.id,toReplace:t}},animateReward:function(e,t){
var s=this.rewardViews[e];if(s){var n=s.icon;s.amount.setString(this.game.rewards[e]);var i=s.amount.scale;s.amount.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.2*i),new cc.Sequence(new cc.ScaleTo(.2,i)))),cleverapps.UI.animateDelta(t,{x:s.amount.x,y:s.amount.y+cleverapps.styles.VictoryWindowBase.rewards.button.animation.dy,parent:s,font:cleverapps.styles.FONTS.VICTORY_WINDOW_REWARD_DELTA});var o=this.convertToNodeSpace(n.getParent().convertToWorldSpace(n.getPosition()));e===GameBase.REWARD_CLOVER&&MissionAnimationView.show(this.game.getMissionType(),this,{amount:Math.min(t,15),beginPos:o,victory:!0})}},listBundles:function(e){var t=["victorywindow","starchest_window"];return Lantern.IsActive(e.level)&&t.push("lantern"),e.game.rewards[GameBase.REWARD_PIGGY_BANK]&&t.push("piggybank_window"),t}});cleverapps.styles.VictoryWindowBase={rewards:{margin:30,prizesMargin:0,prizesPadding:{x:0,y:0},padding:{x:0,y:0},icon:{x:{align:"center"},y:{align:"center",dy:54}},amount:{x:{align:"center"},
y:{align:"center",dy:-6}},button:{x:{align:"center"},y:{align:"bottom",dy:4},animation:{dy:-30}},Exp:{scale:1},twoLinePrize:{},Coin:{scale:1},Booster:{width:100,height:100,scale:1},Clover:{scale:.9},bg:{scale9:!1}},changes:{delay:0},share:{margin:{x:20}}};var VictoryFriendView=cc.Node.extend({ctor:function(e,t){this._super(),this.setAnchorPoint(.5,.5),this.place=t;var s=new cleverapps.UI.Avatar(e);this.addChild(s),this.avatar=s,this.setContentSize(s.width*s.scale,s.height*s.scale),s.setPositionRound(this.width/2,s.height/2)},showAnimation:function(){var e=1*(.5+this.place/4);this.scale=0,this.stopAllActions(),this.runAction(new cc.Sequence(new cc.DelayTime(e+.25),new cc.ScaleTo(.25,1)))}}),VictoryWindow=VictoryWindowBase.extend({onWindowLoaded:function(e){this.game=e.game,this.boatswain=e.boatswain,this.rewarded=this.game.rewards[GameBase.REWARD_GOLD],this.game.gameMission&&(this.mission=this.game.gameMission),this.level=e.level;var t=cleverapps.styles.VictoryWindow;this.createContent(
),this.addRewardBlock(),cleverapps.isRumble()&&!cleverapps.config.adminMode&&(this.addRoundResults(),this.addRoundCountDown()),this.level.episode.isBonusRound()&&t.bonusRound&&this.addBonusRoundAnimation(),this.level.episode.isDailyCup()&&t.dailyCup&&this.addDailyCupAnimation(),t.confetti&&this.addConfettiAnimation(),cleverapps.isRumble()&&!cleverapps.config.adminMode&&this.addHero();var s={};this.game.rewards[GameBase.REWARD_BACKGROUND_CLOVER]&&(-1!==["solitaire","differences"].indexOf(cleverapps.config.type)||0<=["scramble","wordsoup","crocword","magicwords"].indexOf(cleverapps.config.name))&&(this.game.backgroundMission.type===Mission.TYPE_SLOT_MACHINE?s.slot_machine_tickets=this.game.rewards[GameBase.REWARD_BACKGROUND_CLOVER]:s.shovels=this.game.rewards[GameBase.REWARD_BACKGROUND_CLOVER]),cleverapps.metha.getType()===Metha.SIMPLE&&this.level.isRegular()&&"magicwords"!==cleverapps.config.name&&(s.stars=cleverapps.simple.amountLevelStars(this.level)),0<Object.keys(s
).length&&this.addChild(new MedallionComponent(s)),this.game.rewards[GameBase.REWARD_BACKGROUND_CLOVER]&&TreasureSearchRewardComponent.IsAvailable()&&new TreasureSearchRewardComponent(this.content);var n,i,o=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.VictoryWindow.window,!0);cleverapps.isRumble()||(n=this.addButtons(),i=this.getShareOptions()),this._super({name:"victorywindow",content:this.content,noBackground:t.noBackground,buttons:n,shareCheckBox:i,title:this.getTextTitle(),styles:o,windowBg:e.windowBg,closeButton:!this.game.round,notCloseByTouchInShadow:this.game.round,onClose:function(){VictoryWindowHero.hero&&(VictoryWindowHero.hero.hide(),delete VictoryWindowHero.hero)}}),cleverapps.metha.getType()===Metha.FARM?this.addProvidedKey():cleverapps.isKnockoutGame()&&!this.level.episode.isDailyLevel()||this.addAnimatedTitle();var a=cleverapps.styles.VictoryWindow.rewardBlock.padding||0
;this.rewardBlock&&this.rewardBlock.width*this.rewardBlock.scale+a>this.window.width&&this.rewardBlock.setScale(this.window.width/(this.rewardBlock.width+a)),this.addInviteBlock(),this.runChanges(this.listChanges()),cleverapps.metha.getType()!==Metha.HOMEFIX&&"magicwords"!==cleverapps.config.name||!this.level.isRegular()||this.window.addChild(this.flyStarAnimation()),this.game.round?cleverapps.audio.playSound(bundles.game.urls.round_win_effect):(setTimeout(function(){cleverapps.audio.playSound(bundles.game.urls.win_effect),cleverapps.audio.playSound(bundles.game.urls.win_effect_2)},t.soundDelay?t.soundDelay:0),bundles.game.urls.victory_looped_effect&&this.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.CallFunc(function(){this.runAction(new cc.RepeatForever(new cc.Sequence(new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.victory_looped_effect)}),new cc.DelayTime(4))))}.bind(this)))))},getTextTitle:function(){if("tripeaks"===cleverapps.config.name
)return"messages:VICTORY"},createContent:function(){var e=cleverapps.styles.VictoryWindow,t=cc.size(e.width,e.height);this.level.episode.isDailyCup()&&e.dailyCup&&(t=e.dailyCup),this.content=new cc.Node,this.content.setAnchorPoint2(),this.content.setContentSize(t)},flyStarAnimation:function(){var e=cleverapps.styles.VictoryWindow.flyStar,t=new cc.Node;t.setAnchorPoint2(),t.setPositionRound(e.position),t.setContentSize2(e);var s=this.level.isHard()&&e.animation_hard?e.animation_hard:"animation",n=this.level.isHard()&&e.idle_hard?e.idle_hard:"idle",i=new cleverapps.Spine(bundles.victorywindow.jsons.victory_star);if(i.setAnimation(0,s,!1),i.addAnimation(0,n,!0),i.setPosition(t.width/2,t.height/2),t.addChild(i),t.setLocalZOrder(10),this.level.isHard()&&e.text){var o=cleverapps.UI.generateTTFText("x3",cleverapps.styles.FONTS.VICTORY_STAR_AMOUNT_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT);t.addChild(o),o.setPositionRound(e.text),o.setScale(0),o.runAction(new cc.Sequence(new cc.DelayTime(2.4),
new cc.ScaleTo(.4,1).easing(new cc.easeBackOut)))}return t},addRoundResults:function(){var e=new RoundResultsComponent(this.game);e.setPositionRound(cleverapps.styles.VictoryWindow.roundResultsComponent),this.content.addChild(e)},addRoundCountDown:function(){this.roundCountdown=new RoundCountdownComponent(function(){this.hero.hide(),this.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.CallFunc(this.close.bind(this))))}.bind(this)),this.roundCountdown.setPositionRound(cleverapps.styles.VictoryWindow.roundCountdownComponent),this.content.addChild(this.roundCountdown)},addHero:function(){this.hero=new VictoryWindowHero,this.addChild(this.hero),this.hero.show()},addBonusRoundAnimation:function(){var e=cleverapps.styles.VictoryWindow,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e.bonusRound),this.content.addChild(t),t.setPositionRound(e.bonusRound);var s=new cleverapps.Spine(bundles.hero.jsons.hero_json);t.addChild(s),s.setAnimation(0,"bonus",!0),s.setPositionRound(t.width/2,
t.height/2)},addDailyCupAnimation:function(){var e=cleverapps.styles.VictoryWindow,t=new cc.Sprite(bundles.sidebar.frames.daily_cup_icon);this.content.addChild(t),t.setPositionRound(e.dailyCup)},addProvidedKey:function(){if(cleverapps.farm&&cleverapps.farm.providedKey){var e=ProvidesComponent({key:cleverapps.farm.providedKey,victory:!0,noLabel:cleverapps.styles.VictoryWindow.providesComponent.noLabel});e.setPositionRound(cleverapps.styles.VictoryWindow.providesComponent),this.content.addChild(e)}},addAnimatedTitle:function(){if(bundles.victorywindow.jsons.victory_json){var e=cleverapps.styles.VictoryWindow.title,t=new cleverapps.Spine(bundles.victorywindow.jsons.victory_json),s=t.data.animations["open_"+cleverapps.settings.language]&&"open_"+cleverapps.settings.language||"open",n=t.data.animations["idle_"+cleverapps.settings.language]&&"idle_"+cleverapps.settings.language||"idle";if(t.setAnimationAndIdleAfter(s,n),t.setPositionRound(this.content.width/2,e.y),this.content.addChild(t),
e.text){var i=this.titleText=cleverapps.UI.generateTTFText(e.text.message,e.text.font);i.setPositionRound(0,e.text.y),t.addChild(i)}return t}},addRewardBlock:function(){var e=cleverapps.styles.VictoryWindow;this.rewardBlock=this.createRewardsBlock(),this.rewardBlock&&(this.content.addChild(this.rewardBlock),e.rewardBlock.scale&&this.rewardBlock.setScale(e.rewardBlock.scale),this.rewardBlock.setPositionRound(this.content.width/2,e.rewardBlock.y))},addConfettiAnimation:function(){var e=cleverapps.styles.VictoryWindow.confetti;if(e){var t=new cleverapps.Spine(e.spine_json);t.setAnimation(0,e.animation,!1),t.setPositionRound(e.position),this.content.addChild(t)}},onShow:function(){this.buttons&&this.buttons.onShow(),this.placeText&&(this.placeText.scale=0,this.placeText.stopAllActions(),this.placeText.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.ScaleTo(.3,1).easing(cc.easeBackOut()))),this.rewardBlock&&(this.rewardBlock.opacity=0,this.rewardBlock.stopAllActions(),
this.rewardBlock.runAction(new cc.Sequence(new cc.DelayTime(.7),new cc.FadeIn(.2))))),this.roundCountdown&&this.roundCountdown.resumeCountdown()},addReward:function(e){if(this.rewardViews[GameBase.REWARD_GOLD]){var t=this.rewardViews[GameBase.REWARD_GOLD].amount,s=parseInt(t.getString())+e,n=cleverapps.styles.VictoryWindow.rewardBlock.text.format.replace("%{amount}",s);t.setString(n);var i=this.rewardViews[GameBase.REWARD_GOLD].scale;return this.rewardViews[GameBase.REWARD_GOLD].runAction(new cc.Sequence(new cc.ScaleTo(.2,1.2*i),new cc.Sequence(new cc.ScaleTo(.2,i)))),!0}},addInviteBlock:function(){InviteComponent({parent:this})}});cleverapps.styles.VictoryWindow={width:400,height:200,noBackground:!1,providesComponent:{noLabel:!1,x:{align:"center"},y:{align:"top",dy:0}},title:{y:520},rewardBlock:{y:400,x:0,margin:0,text:{y:8,format:"+%{amount}"},coin:{scale:1}},share:{margin:10},window:{decors:{}}};var LoseWindow=Window.extend({onWindowLoaded:function(e,t){
this.replayCallback=e||function(){},this.level=t.level;var s=cleverapps.styles.LoseWindow,n=this.createContent(),i=s.button.tryAgain,o=cleverapps.overrideStyles(cleverapps.clone(cleverapps.styles.Window,!0),cleverapps.styles.LoseWindow),a=cleverapps.once(function(){this.replayCallback(),this.close()}.bind(this));this._super({name:"losewindow",content:n,title:s.title,noBackground:s.noBackground,styles:o,button:{text:i?Messages.get("TryAgain"):Messages.get("OK"),width:s.button.width,height:s.button.height,onPressed:function(){if(i&&cleverapps.lives.isEmpty()){var e=new LivesShopWindow;cleverapps.lives.onChangeAmountListeners["losewindow.TryAgain"]=e.createListener(a)}else a()}.bind(this)}}),cleverapps.lives.onChangeAmountListeners.losewindow=this.createListener(this.updateWindow.bind(this)),cleverapps.audio.playSound(bundles.main.urls.window_effect);new HardLevelDecorationComponent({parent:this});this.runAction(new cc.Sequence(new cc.DelayTime(.45),new cc.CallFunc(function(){
cleverapps.audio.playSound(bundles.game.urls.lose_window_effect)})))},createAnimationNode:function(){var e=cleverapps.styles.LoseWindow,t=new cc.Node;t.setAnchorPoint2();var s=this.animation=cleverapps.UI.createAnimation(this.getAnimationStyles());return t.setContentSize2(e.animation.width,e.animation.height),s.setPositionRound(t.width/2+e.animation.x,t.height/2+e.animation.y),t.addChild(s),t},getAnimationStyles:function(){return cleverapps.styles.LoseWindow.animation},createLivesLeftBlock:function(){var e,t=cleverapps.styles.LoseWindow,s=[],n=cleverapps.styles.FONTS.LOSE_WINDOW_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT;if(cleverapps.tempGoods.checkGoodBuyed(cleverapps.TempGoods.UNLIMITED_LIVES))e=cleverapps.UI.generateTTFText("messages:LoseWindow.livesLeftUnlimited",n);else{e=cleverapps.UI.generateTTFText("messages:LoseWindow.livesLeft",n);for(var i=[],o=0;o<cleverapps.Lives.MAX_REGEN_AMOUNT;o++)if(o===cleverapps.lives.amount){var a=new cc.Sprite(t.lives.icon).getContentSize(),
r=new cc.Node;r.setAnchorPoint2(),r.setContentSize2(a);var l=cleverapps.UI.createAnimation(t.lives.animation);r.addChild(l),l.setPositionRound(r.width/2,r.height/2),i.push(r)}else{var c=o<cleverapps.lives.amount?t.lives.icon:t.lives.icon_empty,p=new cc.Sprite(c);i.push(p)}var d=this.heartsNode=new cleverapps.Layout(i,{direction:cleverapps.UI.HORIZONTAL,margin:t.heartsMargin});s.push(d)}return e.setAnchorPoint2(),s.push(e),new cleverapps.Layout(s,{direction:cleverapps.UI.VERTICAL,margin:t.lifesLeftMargin})},createContent:function(){var e=cleverapps.styles.LoseWindow,t=[],s=this.createAnimationNode();return t.push(s),this.livesLeftBlock=this.createLivesLeftBlock(),this.livesLeftBlock&&t.push(this.livesLeftBlock),new cleverapps.Layout(t.reverse(),{direction:cleverapps.UI.VERTICAL,margin:e.content.margin,y:e.content.y,padding:{x:e.content.padding.x,y:e.content.padding.y}})},updateWindow:function(){if(this.heartsNode){for(var e=[],t=cleverapps.styles.LoseWindow,
s=0;s<cleverapps.Lives.MAX_REGEN_AMOUNT;s++){var n=s<cleverapps.lives.amount?t.lives.icon:t.lives.icon_empty,i=new cc.Sprite(n);e.push(i)}var o=new cleverapps.Layout(e,{direction:cleverapps.UI.HORIZONTAL,margin:t.heartsMargin});this.livesLeftBlock.addChild(o),o.setPositionRound(this.heartsNode.getPosition()),this.heartsNode.removeFromParent(),this.heartsNode=o}}});LoseWindow.prototype.listBundles=function(){return["lose_window"]},cleverapps.styles.LoseWindow={width:650,height:550,title:"messages:LoseWindow.title",heartsMargin:5,lifesLeftMargin:15,content:{margin:40,y:25,padding:{x:0,y:10}},animation:{width:650,height:320,x:0,y:0,spine:{json:bundles.lose_window.jsons.lose_json,openAnimation:"open",idleAnimation:"idle"}},lives:{animation:{spine:{json:bundles.main.jsons.level_failed_small_hearts_json,openAnimation:"animation"}},icon:bundles.main.frames.level_failed_heart_png,icon_empty:bundles.main.frames.level_failed_heart_empty_png},button:{width:300,height:100,offset:{x:170},
tryAgain:!0},adsButton:{width:350,icon:{scale:.8,x:30,y:40},text:{x:185,y:40}},decors:{}};var LevelStartWindow=Window.extend({onWindowLoaded:function(e){this.level=e.level,this.stars=this.level.stars,BoostersBefore.isAvailable()&&(cleverapps.adsLimits.update(),this.boostersBefore=new BoostersBefore(e),cleverapps.metha.showControlsWhileFocused("MenuBarGoldItem")),this.isHardLevel=this.level.isHard()&&!this.level.episode.isDailyLevel();var t=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.LevelStartWindow,!0);e.styles&&(t=cleverapps.overrideStyles(t,e.styles)),this.isHardLevel&&(t=cleverapps.overrideStyles(t,cleverapps.styles.HardLevelStartWindow)),this.level.isTricky()&&(t=cleverapps.overrideStyles(t,cleverapps.styles.TrickyLevelStartWindow));var s=new cleverapps.Layout(this.listContent(),{direction:cleverapps.UI.VERTICAL,margin:t.margin}),n=cleverapps.UI.wrapWithPadding(s,{x:0,y:t.padding});e.replay&&(this.onClose=function(){cleverapps.metha.distract({
focus:"LevelReplayFromLevelStartWindow",action:function(e){this.level.play(e,{boostersBefore:this.boostersBefore})}.bind(this)})}.bind(this)),this._super({title:this.getTitle(),name:"levelstartwindow",content:n,button:this.getButton(),styles:t,level:this.level}),"board"!==cleverapps.config.type&&"tripeaks"!==cleverapps.config.name&&HighScoresComponent({parent:this,level:this.level}),new HardLevelDecorationComponent({parent:this}),cleverapps.audio.playSound(bundles.main.urls.window_effect),this.boostersBefore&&this.boostersBefore.showTutorialStep()},showBetForce:function(){if(!cleverapps.forces.isShown(Forces.METHA_PLAY_BUTTON.id)){var e=cleverapps.forces.create(this.button,Forces.METHA_PLAY_BUTTON);this.registerCleanupCallback(function(){cleverapps.forces.isRunningForce(e)&&cleverapps.forces.closeRunningForce()})}},getTitle:function(){var e=cleverapps.styles.FONTS.LEVEL_WINDOW_TITLE;!this.level.episode.isDailyCup()&&this.isHardLevel&&cleverapps.styles.FONTS.HARD_LEVEL_TITLE&&(
e=cleverapps.styles.FONTS.HARD_LEVEL_TITLE),this.isHardLevel&&cleverapps.styles.FONTS.BOOSTER_BEFORE_HARD_LEVEL_TITLE&&(e=cleverapps.styles.FONTS.BOOSTER_BEFORE_HARD_LEVEL_TITLE);var t="";return this.level.isRegular()&&(t=cleverapps.metha.getType()!==Metha.HOSE||this.level.isCurrentLevel()?cleverapps.user.getVirtualDisplayLevel():this.level.getHumanReadableNumber()),{text:this.getTitleText(),font:e,toReplace:{levelNo:t}}},getTitleText:function(){return this.level.episode.isDailyCup()?"messages:DailyCup.title":this.isHardLevel?"messages:message.hardLevel":this.level.isTricky()?"messages:message.trickyLevel":this.level.episode.isDailyLevel()?"messages:DailyLevelWindow.title":cleverapps.user.isPassedAll()&&cleverapps.metha.getType()===Metha.HOSE&&this.level.isCurrentLevel()?"messages:LevelStartWindow.ComingSoonTitle":"messages:LevelStartWindow.title"},getButton:function(){var e=bundles.buttons_main.frames.play_button_png,t=bundles.buttons_main.frames.play_button_on_png;this.isHardLevel&&(
e=bundles.buttons_main.frames.play_button_hard_png,t=bundles.buttons_main.frames.play_button_hard_on_png),this.level.isTricky()&&(e=bundles.buttons_main.frames.play_button_tricky_png,t=bundles.buttons_main.frames.play_button_tricky_on_png);var s=cleverapps.once(function(){cleverapps.metha.distract({focus:"LevelStartFromLevelStartWindow",action:function(e){this.onClose=function(){},this.close(),this.level.play(e,{boostersBefore:this.boostersBefore})}.bind(this)})}.bind(this)),n={width:cleverapps.styles.LevelStartWindow.Button.width,height:cleverapps.styles.LevelStartWindow.Button.height,button_png:e,button_on_png:t,padding:cleverapps.styles.LevelStartWindow.Button.padding,onPressed:function(){cleverapps.lives&&cleverapps.lives.isEmpty()?new LivesShopWindow:s()}.bind(this)};return n.text=Messages.get("Play").toUpperCase(),n.font=cleverapps.styles.FONTS.LEVEL_START_PLAY_BUTTON_TEXT,n},listContent:function(){var e=[];if(this.boostersBefore){var t=new BoostersBeforeComponent(
this.boostersBefore,this.level);e.push(t)}if(cleverapps.styles.ScoreComponent.enabled&&this.level.isRegular()){var s=ScoreComponent({level:this.level,victory:!1});s&&e.push(s)}if(this.showStarsComponent()){var n=StarsComponent({level:this.level,stars:this.stars,victory:!1});e.push(n)}return e},showStarsComponent:function(){return cleverapps.config.results&&this.level.isRegular()}});LevelStartWindow.isAvailable=function(e,t){return("board"!==cleverapps.config.type||"stacks"===cleverapps.config.subtype)&&"differences"!==cleverapps.config.name&&((0!==e||0!==t)&&("stacks"===cleverapps.config.subtype?!cleverapps.GameSaver.load(GameBase.getStoreKey(e,t))&&BoostersBefore.isAvailable():"solitaire"!==cleverapps.config.type||BoostersBefore.isAvailable()))},LevelStartWindow.prototype.listBundles=function(e){var t=[];return BoostersBefore.isAvailable()&&0<Lantern.GetStreak(e.level)&&t.push("lantern"),t},cleverapps.styles.LevelStartWindow={padding:50,Button:{width:300,height:100},margin:0,
betPrice:{text:{font:cleverapps.styles.FONTS.BIG_BUTTON_TEXT},label:{offsetY:3},icon:{scale:1,image:bundles.menubar.frames.coin_png,offsetY:13}}},cleverapps.styles.HardLevelStartWindow={},cleverapps.styles.TrickyLevelStartWindow={};var ProductPriceView=cc.Node.extend({ctor:function(e,t){this._super(),this.options=t||{},this.setCascadeOpacityEnabled(!0),this.setAnchorPoint2(),this.createContent(e)},createContent:function(e){var t,s=cleverapps.styles.ProductPriceView,n=this.options,i=n.text||e.getCurrentPrice(),o=this.options.icon,a=!1;if("string"==typeof i){var r=i.indexOf(" OK");-1!==r&&(i=i.substr(0,r),o=this.options.tileShop?bundles.tile_shop.frames.ok_icon_png:bundles.main.frames.ok_icon_png,a=!0)}if(t=cleverapps.UI.ImageFont.IsApplicable(this.options.font,i)?this.createImageText(i):this.createRegularText(i),this.content=this.text=t,o){var l=new cc.Sprite(o);l.setScale(n.iconScale||s.icon.scale);var c=[l,t];a&&c.reverse(),this.content=new cleverapps.Layout(c,{
direction:cleverapps.UI.HORIZONTAL,margin:s.icon.margin}),this.content.setCascadeOpacityEnabled(!0)}if(this.setContentSize2(this.content.width,this.content.height),o&&cleverapps.UI.fitToBox(this,{width:n.fitTo&&n.fitTo.width||this.width,height:n.fitTo&&n.fitTo.height||this.height}),this.content.setAnchorPoint2(),this.content.setPositionRound(this.width/2,this.height/2),this.addChild(this.content),n.bg){var p=new cc.Scale9Sprite(n.bg.image);p.setLocalZOrder(-1),p.setContentSize2(this.width+2*n.bg.padding.x,this.height+2*n.bg.padding.y),p.setPositionRound(n.bg),this.content.addChild(p)}},createRegularText:function(e){var t=cleverapps.styles.ProductPriceView,s=cleverapps.UI.generateOnlyText(e,this.options.font);this.options.fitTo&&s.fitTo(this.options.fitTo.width,this.options.fitTo.height);var n=new cc.Node;return n.setContentSize2(s.getContentSize()),n.setAnchorPoint2(),n.addChild(s),n.setCascadeOpacityEnabled(!0),s.setPositionRound(n.width/2,n.height/2+t.regularFontOffsetY),n},
createImageText:function(e){return cleverapps.UI.generateImageText(e,this.options.font)},setString:function(e){this.content&&(this.content.removeFromParent(!0),delete this.content),this.createContent(e)}});cleverapps.styles.ProductPriceView={regularFontOffsetY:0,icon:{margin:14,scale:.8}};var ShopUserGoldView=cc.Node.extend({ctor:function(e){this._super(),this.settings=e||{},this.setLocalZOrder(22),this.setAnchorPoint2(),cc.director.getRunningScene().scene.addChild(this)},updateContent:function(){this.content&&this.content.removeFromParent(),this.createContent();var e=cleverapps.UI.getSceneSize(),t=cleverapps.styles.ShopUserGoldView.position[cleverapps.wideMode.mode].y;for(this.setPosition(e.width/2,this.height/2+t);this.width*this.scale>=e.width;)this.setScale(.95*this.getScale())},createContent:function(){var e=cleverapps.styles.ShopUserGoldView,t=[this.createGoldBlock()];"match3"===cleverapps.config.type?t.unshift(this.createBoostersBlock()):BoostersBefore.isAvailable({
ignoreProgress:!0})&&t.unshift(this.createBoostersBeforeBlock()),e.direction===cleverapps.UI.HORIZONTAL&&t.reverse();var s=this.textNode=new cleverapps.Layout(t.filter(function(e){return void 0!==e}),{direction:e.direction,margin:e.textNode.margin});s.setCascadeOpacityEnabled(!0);var n=[this.createPerson(),s];this.settings.mirrorPerson&&n.reverse(),this.content=new cleverapps.Layout(n.filter(function(e){return void 0!==e}),{direction:cleverapps.UI.HORIZONTAL,margin:e.margin}),this.createBg(),this.setContentSize(this.content.getContentSize()),this.addChild(this.content),this.content.setPosition(this.width/2,this.height/2)},createGoldBlock:function(){var e=cleverapps.styles.ShopUserGoldView,t=cleverapps.UI.generateOnlyText("messages:YouHaveAmount",cleverapps.styles.FONTS.SHOP_USER_GOLD_TEXT),s=this.createItem(levels.user.gold,RewardsHelper.iconByRewardName("gold",!0),e.items.gold),n=new cleverapps.Layout([t,s],{direction:cleverapps.UI.HORIZONTAL,margin:e.textNode.goldItemsMargin})
;return s.y+=e.items.gold.blockDy,n.setCascadeOpacityEnabled(!0),n},createBoostersBlock:function(){var s=cleverapps.styles.ShopUserGoldView,n=[];[0,1,2].forEach(function(e){if(levels.user.checkAvailable(BaseBooster.AVAILABLE[e])){var t=this.createItem(cleverapps.boostersCounter.data[e],RewardsHelper.iconByRewardName(e,!0),s.items.boosters);n.push(t)}}.bind(this));var e=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:s.textNode.boostersItemsMargin});return e.setCascadeOpacityEnabled(!0),e},createItem:function(e,t,s){var n=cleverapps.styles.ShopUserGoldView,i=cleverapps.UI.generateImageText(cleverapps.formatAmount(e),cleverapps.styles.FONTS.SHOP_USER_GOLD_TEXT),o=new cc.Sprite(t);o.y+=s.dy||0;var a=new cleverapps.Layout([i,o],{direction:cleverapps.UI.HORIZONTAL,margin:n.items.margin});return a.setCascadeOpacityEnabled(!0),a},createBoostersBeforeBlock:function(){var t=cleverapps.styles.ShopUserGoldView.items.boostersBefore,e=BoostersBefore.GetAppropriateTypes().map(
function(e){return this.createItem(cleverapps.boostersCounter.data[e]||0,RewardsHelper.iconByRewardName(e,!0),t)},this),s=new cleverapps.Layout(e,{direction:cleverapps.UI.HORIZONTAL,margin:t.itemsMargin});return s.setCascadeOpacityEnabled(!0),s},createPerson:function(){var e=cleverapps.styles.ShopUserGoldView.person;if(e&&(!e.visibility||!1!==e.visibility[cleverapps.wideMode.mode])){var t=this.person=new cc.Node;t.setAnchorPoint2(),t.setContentSize(e);var s=new cleverapps.Spine(e.json);return s.setAnimation(0,"animation",!0),s.setPosition(t.width/2,t.height/2),t.addChild(s),t.setScale(e.scale||1),t.y+=e.dy,t.setScaleX(this.settings.mirrorPerson?-t.scaleX:t.scaleX),t}},createBg:function(){var e=cleverapps.styles.ShopUserGoldView.bg;if(e)if(this.bg)this.bg.setContentSize(this.textNode.width+e.padding.x,this.textNode.height+e.padding.y),this.bg.setPositionRound(this.textNode.x+e.dx,this.textNode.y);else{var t=this.bg=cleverapps.UI.createScale9Sprite(e.image);t.setContentSize(
this.textNode.width+e.padding.x,e.fixedHeight||this.textNode.height+e.padding.y),this.addChild(t,-1),t.setPositionRound(this.textNode.x+e.dx,this.textNode.y)}},showUp:function(){this.updateContent(),this.setVisible(!0),this.runShowUpAnimation()},runShowUpAnimation:function(){if(this.bg&&this.bg.setOpacity(0),this.textNode.setOpacity(0),this.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.CallFunc(function(){this.bg&&this.bg.runAction(new cc.FadeIn(.6)),this.textNode.runAction(new cc.FadeIn(.6))},this))),this.person){var e=this.person.getPosition();this.person.y=1.2*-this.person.height,this.person.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.MoveTo(.5,e).easing(cc.easeBackOut())))}},onHide:function(){this.setVisible(!1)},close:function(e,t){if(e=e||function(){},t)return this.removeFromParent(),void e();this.person&&this.person.runAction(new cc.ScaleTo(.2,0).easing(cc.easeBackIn())),this.bg&&this.bg.runAction(new cc.FadeOut(.4)),this.textNode.runAction(new cc.FadeOut(.4)),
this.runAction(new cc.Sequence(new cc.DelayTime(.4),new cc.RemoveSelf,new cc.CallFunc(e)))}});ShopUserGoldView.IsAvailable=function(){return BoostersBefore.isAvailable({ignoreProgress:!0})},cleverapps.overrideFonts(cleverapps.styles.FONTS,{SHOP_USER_GOLD_TEXT:{color:cleverapps.styles.COLORS.WHITE,size:30}}),cleverapps.styles.ShopUserGoldView={margin:60,position:[{y:-20},{y:40},{y:40}],direction:cleverapps.UI.VERTICAL,textNode:{margin:10,goldItemsMargin:10,boostersItemsMargin:15},bg:{image:bundles.tile_shop.frames.shopusergold_bg_png,dx:-20,padding:{x:60,y:25}},person:{json:bundles.tile_shop.jsons.yellow_money_spine_json,scale:.85,width:250,height:250,dy:-10},items:{margin:5,gold:{blockDy:0,dy:5},boosters:{dy:5},boostersBefore:{itemsMargin:15}}};var ShopWindow=Window.extend({ctor:function(e){if(this.options=e=e||{},this.tab=e.tab,this.tab===ShopWindow.TABS.HARD_CURRENCY&&cleverapps.flags.nopayments&&!RewardedAdsManager.IsEnabled())return!1;cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.TILE_SHOP_OPEN+this.tab),this._super.apply(this,arguments)},customize:function(){if(this._super(),!ShopUserGoldView.IsAvailable()||this.showAll&&this.isVertical()||this.tab===ShopWindow.TABS.LIVES||(this.goldInfo=new ShopUserGoldView(cleverapps.styles.ShopWindow.ShopUserGoldView)),bundles.tile_shop.frames.shop_bg_png){var e=new cc.Scale9Sprite(bundles.tile_shop.frames.shop_bg_png);e.setContentSize2(this.getContentSize()),this.addChild(e),e.setLocalZOrder(-1),e.setOpacity(180),e.setPositionRound(this.width/2,this.height/2)}Lottery.addText(this)},onWindowLoaded:function(e){this.showAll=this.options.showAll;var t=cleverapps.styles.ShopWindow;if(this._super({notCloseByTouchInShadow:!0,name:"shopwindow_tab"+this.tab,content:this.createContent(this.tab),title:this.getTitle(),noBackground:t.noBackground,styles:t}),this.tab===ShopWindow.TABS.LIVES&&t.Title.livesOffsetY&&(this.window.titleText.y+=t.Title.livesOffsetY,this.titleBg&&(this.titleBg.y+=t.Title.livesOffsetY)),
t.repeatablePattern){var s=new RepeatablePattern(this.width,t.repeatablePattern.image);this.addChild(s),s.setLocalZOrder(-1)}cleverapps.audio.playSound(bundles.main.urls.window_effect)},getTitle:function(){if(!this.showAll||!this.isVertical())return{text:"messages:ShopWindow.title",font:cleverapps.styles.FONTS.TILE_SHOP_WINDOW_TITLE_TEXT}},onHide:function(){this.goldInfo&&this.goldInfo.onHide(),this.hidden=!0},buyProduct:function(e,t){this.closingNow||this.hidden||e.buy(this.close.bind(this,!0),t)},isVertical:function(){return cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&"merge"!==cleverapps.config.type},adjustShopWindow:function(){this.content.scale=this.content.baseScale;var e=cleverapps.styles.ShopWindow;!this.isVertical()&&this.showAll||this.content.setScale(Math.min(this.content.scale,cc.director.getWinSize().width/(this.content.width+2*e.wrap.paddingX))),this.isVertical()&&this.showAll||this.content.setScale(Math.min(this.content.scale,cc.director.getWinSize(
).height/(this.content.height+2*e.wrap.paddingY)));var t=0;this.isVertical()||(t=e.wrap.offsetX);var s=0;"horizontal"===cleverapps.config.orientation&&cc.sys.isMobile&&(s=e.mobile.offsetY);var n=0;cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&this.showAll&&(n=e.mobile.showAllOffsetTop),this.contentWrap.setContentSize2(this.content.width*this.content.scale+t,this.content.height*this.content.scale+n),this.content.setPositionRound(this.contentWrap.width/2,this.contentWrap.height/2+s-n/2),e.contentOffset<0&&(this.contentWrap.height-=e.contentOffset,this.content.y-=e.contentOffset)},onChangeSceneSize:function(){this._super(),this.adjustShopWindow(),this.scroll.setContentSize2(cc.director.getWinSize()),this.scroll.setPositionRound(this.contentWrap.width/2,this.contentWrap.height/2),this.scrollWrap.setContentSize2(this.contentWrap.getContentSize())},createContent:function(e){var t=cleverapps.styles.ShopWindow,s=this.isVertical(
)?TileLayout.Layouts.vertical:TileLayout.Layouts.horizontal,n=(s=this.showAll?s.expanded:s.compact).map(function(e){return new TileLayout(e)}),i=ShopProductSource.listTileModels(e);this.shopLayout=LayoutAdjuster.ChooseLayout(i,n,this.showAll);var o=this.shopLayout.tileModels.large.concat(this.shopLayout.tileModels.small).map(function(e){return new(e.getViewClassName())(e,{onClicked:this.buyProduct.bind(this),cart:this.cart})},this);"horizontal"===cleverapps.config.orientation&&cc.sys.isMobile&&o.forEach(function(e){e.setScale(t.mobile.scale),e.baseScale=t.mobile.scale}),this.shopLayout.setTiles(o);var a=this.content=this.shopLayout.createLayout();a.baseScale=a.scale;var r=this.contentWrap=new cc.Node;r.setAnchorPoint2(),r.addChild(a),this.adjustShopWindow();var l=this.scroll=new cleverapps.UI.ScrollView(r,{direction:this.isVertical()?cleverapps.UI.ScrollView.DIR_VERTICAL:cleverapps.UI.ScrollView.DIR_HORIZONTAL,clipping:!1,scrollBarEnabled:!1});l.setContentSize2(cc.director.getWinSize()
);this.shopLayout.getAppropriateTile();l.scrollToDefault();var c=this.scrollWrap=new cc.Node;return c.setAnchorPoint2(),c.setContentSize2(Math.min(l.width,r.width),r.height),c.addChild(l),l.setPositionRound({align:"center"},{align:"center"}),c},onShow:function(e){this.goldInfo&&this.goldInfo.showUp(),this.hidden=void 0,this.shopLayout.onShow(e)},onClose:function(){cleverapps.windows.isActive()||(this.tab===ShopWindow.TABS.LIVES&&cleverapps.lives&&cleverapps.lives.isEmpty()?HelpFromFriendsWindow.showIfCan(HelpFromFriendsWindow.TYPES.addlivesvideo,function(e,t){cleverapps.lives.give(t.amount)}.bind(this)):this.tab===ShopWindow.TABS.HARD_CURRENCY&&levels.user.gold<100&&HelpFromFriendsWindow.showIfCan(HelpFromFriendsWindow.TYPES.addcoinsvideo,function(e,t){levels.user.setGold(levels.user.gold+t.amount)}.bind(this))),this.tab===ShopWindow.TABS.LIVES&&cleverapps.lives&&"merge"===cleverapps.config.type&&"undefined"!=typeof SpecialEnergyOfferWindow&&!cleverapps.lives.canTake(
.1*cleverapps.Lives.MAX_REGEN_AMOUNT)&&SpecialEnergyOfferWindow.CheckWantsToShow()},close:function(e){if(!this.closingNow){cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),this.goldInfo&&this.goldInfo.close(void 0,e),this.closingNow=!0;var t=this._super;if(!0===e)t.call(this);else{var s=cleverapps.styles.ShopWindow;if(this.closeButton instanceof BandButton&&this.closeButton.hide(),this.scrollBarBG&&this.scrollBarBG.runAction(new cc.FadeOut(.3)),this.window.titleText&&s.noBackground){var n=cc.p(this.window.titleText.x,cc.director.getWinSize().height+this.window.titleText.height/2),i=cc.p(this.window.titleText.x,this.window.titleText.y-s.title.hideAnimation.moveDownY);this.window.titleText.runAction(new cc.Sequence(new cc.MoveTo(.15,i),new cc.MoveTo(.3,n).easing(cc.easeIn(1)))),this.titleBg&&this.titleBg.runAction(new cc.Sequence(new cc.MoveTo(.15,i),new cc.MoveTo(.3,n).easing(cc.easeIn(1))))}this.shopLayout.onClose(t.bind(this))}}},beforeCloseAnimation:function(
e){this.goldInfo&&this.goldInfo.isRunning()?this.goldInfo.registerCleanupCallback(e):e()}}),LivesShopWindow=ShopWindow.extend({ctor:function(){this._super({showAll:"merge"===cleverapps.config.type,tab:ShopWindow.TABS.LIVES})}}),SoftCurrencyShopWindow=ShopWindow.extend({ctor:function(){this._super({showAll:"merge"===cleverapps.config.type,tab:ShopWindow.TABS.SOFT_CURRENCY})}}),HardCurrencyShopWindow=ShopWindow.extend({ctor:function(){this._super({showAll:"merge"===cleverapps.config.type,tab:ShopWindow.TABS.HARD_CURRENCY})}});ShopWindow.prototype.listBundles=function(){return["tile_shop"]},ShopWindow.TABS={HARD_CURRENCY:0,LIVES:1,SOFT_CURRENCY:2,UNITS_FRUIT:3,UNITS_RESOURCE:4,UNITS_DISCOUNT:5},cleverapps.styles.ShopWindow=cleverapps.overrideStyles(cleverapps.styles.Window,{noWindowScale:!0,noBackground:!0,contentOffset:-30,contentPadding:30,mobile:{scale:1.3,offsetY:0,showAllOffsetTop:150},scrollBarBG:{height:24,paddingX:20,y:20},wrap:{paddingX:30,paddingY:110,offsetX:100},title:{
hideAnimation:{moveDownY:30}},Title:{offsetY:-20},rowMargin:30,tileMargin:30,rowsPadding:{x:0,y:50},mouseScrollSpeed:400},!0),cleverapps.overrideStyles(cleverapps.styles.DECORATORS,{TILE_SHOP_BADGE_STROKE:{color:new cc.Color(100,34,22,255),size:2},TILE_BUTTON_SHADOW:{color:new cc.Color(8,82,40,180),direction:cc.size(0,-5),blur:1},TILE_SHOP_SHADOW:{color:new cc.Color(100,34,22,200),direction:cc.size(0,-3),blur:1},TILE_SHOP_STROKE:{color:new cc.Color(100,34,22,255),size:3}}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{TILE_SHOP_BADGE_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.TILE_SHOP_SHADOW,stroke:cleverapps.styles.DECORATORS.TILE_SHOP_BADGE_STROKE},SHOP_SMALL_TILE_BUTTON_TEXT:{size:55,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.TILE_BUTTON_SHADOW},SHOP_LARGE_TILE_BUTTON_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.TILE_BUTTON_SHADOW},TILE_SHOP_WINDOW_TEXT:{size:50,
color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.TILE_SHOP_SHADOW,stroke:cleverapps.styles.DECORATORS.TILE_SHOP_STROKE},TILE_SHOP_WINDOW_TITLE_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,stroke:{color:new cc.color(85,1,91),size:3},shadow:{color:new cc.color(85,1,91),direction:cc.size(0,-5),blur:1}}});var TileBadge=cc.Sprite.extend({ctor:function(e){e=e||{},this.info=this.chooseInfo(e),this.styles=this.info.styles,this._super(this.info.image),this.setAnchorPoint2();var t=cleverapps.UI.generateOnlyText(this.info.text,cleverapps.styles.FONTS.TILE_SHOP_BADGE_TEXT);t.setAnchorPoint2(),t.setPositionRound(this.styles),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.fitTo(this.styles.width,this.styles.height),t.setRotation(this.styles.rotation),this.addChild(t)},disable:function(){this.setSpriteFrame(this.info.imageOff)},chooseInfo:function(e){switch(e.type){case"discount":return{image:bundles.tile_shop.frames.shop_discount_png,
imageOff:bundles.tile_shop.frames.shop_discount_png_off,text:Messages.get("messages:Badge.discount",{amount:e.text}),styles:cleverapps.styles.TileBadge.discount};case"save":return{image:bundles.tile_shop.frames.shop_badge_save_png||bundles.tile_shop.frames.shop_badge_bestseller_png,imageOff:bundles.tile_shop.frames.shop_badge_save_png||bundles.tile_shop.frames.shop_badge_bestseller_png,text:"messages:Badge.save",styles:cleverapps.styles.TileBadge.default};case"bestSeller":return{image:bundles.tile_shop.frames.shop_badge_bestseller_png,imageOff:bundles.tile_shop.frames.shop_badge_bestseller_png,text:"messages:Badge.bestSeller",styles:cleverapps.styles.TileBadge.default};default:return{image:bundles.tile_shop.frames.shop_badge_save_png||bundles.tile_shop.frames.shop_badge_bestseller_png,imageOff:bundles.tile_shop.frames.shop_badge_save_png||bundles.tile_shop.frames.shop_badge_bestseller_png,text:e.text||"default",styles:cleverapps.styles.TileBadge.default}}}});cleverapps.overrideFonts(
cleverapps.styles.FONTS,{TILE_SHOP_BADGE_TEXT:{size:25,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.TILE_SHOP_BADGE_STROKE}}),cleverapps.styles.TileBadge={default:{x:{align:"center",dx:0},y:{align:"center",dy:5},width:125,rotation:-30},discount:{x:{align:"center",dx:3},y:{align:"center",dy:5},width:100,rotation:0}};var TileButton=cc.Node.extend({ctor:function(e,t,s){this._super(),this.forceTarget=!0,this.small=t,this.tileModel=e;var n=this.small?cleverapps.styles.SmallTileButton:cleverapps.styles.LargeTileButton;this.buttonWidth=s.width||n.width;var i=this.button=new cleverapps.UI.Button({content:s.content||this.getButtonContent(e,s),contentOff:s.contentOff||this.getButtonContent(e,s,!0),contentPadding:n.contentPadding,contentOffset:n.contentOffset,scale9Rect:s.scale9Rect,width:this.buttonWidth,height:s.height||n.height,button_png:s.button_png||(t?bundles.tile_shop.frames.small_shop_button:bundles.tile_shop.frames.feature_button_png),
button_on_png:s.button_on_png||(t?bundles.tile_shop.frames.small_shop_button_on:bundles.tile_shop.frames.feature_button_on_png),button_off_png:s.button_off_png||(t?bundles.tile_shop.frames.small_shop_button_off:bundles.tile_shop.frames.feature_button_off_png),onClicked:s.onClicked.bind(s,e,s.buyParams)});e.constructor===TileModel&&Lottery.addIcon(i,void 0,"gold25000"===e.product.itemId),this.setAnchorPoint2(),this.setContentSize2(i.getContentSize()),this.addChild(i),i.setPositionRound(n),this.updateAttention()},getButtonContent:function(e,t,s){var n,i=this.small?cleverapps.styles.SmallTileButton:cleverapps.styles.LargeTileButton,o=this.buttonWidth+i.text.padding,a=!s&&0===e.getCurrentPrice();if(t.buyParams&&t.buyParams.videoBonus){var r=new cc.Sprite(bundles.shared.frames.adicon_png),l=cleverapps.UI.generateImageText("x2",cleverapps.styles.FONTS.UNITSSHOPTILE_BUTTON);return new cleverapps.Layout([r,l],{direction:cleverapps.UI.HORIZONTAL})}return s?n=e.getDisabledPrice():a&&(
n="messages:FREE"),new ProductPriceView(e,{font:t.font||(this.small?cleverapps.styles.FONTS.SHOP_SMALL_TILE_BUTTON_TEXT||cleverapps.styles.FONTS.BUTTON_TEXT:cleverapps.styles.FONTS.SHOP_LARGE_TILE_BUTTON_TEXT),fitTo:{width:o},text:n,icon:!a&&(!s||!e.getDisabledPrice())&&e.getPriceIcon(),iconScale:!a&&(!s||!e.getDisabledPrice())&&e.getPriceIcon()&&(t.scale||i.icon.scale),tileShop:!0})},updateAttention:function(){var e=this.small?cleverapps.styles.SmallTileButton.attention:cleverapps.styles.LargeTileButton.attention;this.button.disabled||!this.tileModel.isAttention()?this.attention&&this.attention.removeFromParent():this.attention||(this.attention=new cc.Sprite(bundles.tile_shop.frames.attention_png),this.attention.setPositionRound(e),this.addChild(this.attention),this.attention.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.3,1.1),new cc.ScaleTo(.3,1)))))},enable:function(){this.button.enable(),this.updateAttention()},disable:function(){this.button.disable(),
this.updateAttention()}});cleverapps.styles.SmallTileButton={x:{align:"center"},y:{align:"center"},margin:10,width:205,height:70,text:{padding:-25,dy:-6},icon:{scale:.8,dy:0},attention:{x:{align:"right",dx:35},y:{align:"top",dy:25}}},cleverapps.styles.LargeTileButton={x:{align:"center"},y:{align:"center",dy:-5},margin:10,width:320,height:110,text:{padding:-25,dy:-6},icon:{scale:.8,dy:0},attention:{x:{align:"right",dx:35},y:{align:"top",dy:25}}};var TileIcon=cc.Node.extend({ctor:function(e,t,s){this._super(),s=s||{};var n=t?cleverapps.styles.SmallTileIcon:cleverapps.styles.LargeTileIcon;this.tileModel=e;var i=this.icon=new cc.Sprite(bundles.tile_shop.frames[e.getIcon()]);if(!s.skipScale)if(n.scale)i.setScale(n.scale);else if(n.height){var o=n.height/i.height;o<1&&i.setScale(o)}var a=t?{json:bundles.tile_shop.jsons.shop_sparkles_small_json}:{json:bundles.tile_shop.jsons.shop_sparkles_large_json};if(s.animationOverride&&(a=s.animationOverride),a.json){
var r=this.animation=new cleverapps.Spine(a.json);r.setPosition(i.width/2,i.height/2),r.setLocalZOrder(a.jsonzOrder||0),r.setAnimation(0,"animation",!0),r.setVisible(!1),i.addChild(r);var l=void 0!==a.delay?a.delay:Math.random();r.runAction(new cc.Sequence(new cc.DelayTime(l),new cc.Show))}var c=n[e.product.itemId]?n[e.product.itemId].wrap.dx||0:n.wrap.dx,p=n[e.product.itemId]?n[e.product.itemId].wrap.dy||0:n.wrap.dy;this.setContentSize2(i.width,n[e.product.itemId]&&n[e.product.itemId].wrap.height||n.wrap.height),this.setAnchorPoint2(),this.setLocalZOrder(s.zOrder||0),i.setAnchorPoint2(.5,0),i.setPositionRound(this.width/2+c,p),this.addChild(i)},enable:function(){this.icon.setColor(new cc.Color(255,255,255,255)),this.icon.setOpacity(255),this.animation&&this.animation.setVisible(!0)},disable:function(){this.icon.setColor(new cc.Color(200,200,200,255)),this.icon.setOpacity(180),this.animation&&(this.animation.stopAllActions(),this.animation.setVisible(!1))}})
;cleverapps.styles.SmallTileIcon={height:120,wrap:{height:110,dx:0,dy:0}},cleverapps.styles.LargeTileIcon={scale:1,wrap:{height:270,dx:0,dy:-24}};var TileRewardsBlock=cc.Node.extend({ctor:function(s,e){e=this.options=e||{},this._super();var t=s.isSmall(),n=t?cleverapps.styles.SmallTileRewardsBlock:cleverapps.styles.LargeTileRewardsBlock,i=[],o=[],a="tripeaks"===cleverapps.config.name||"scramble"===cleverapps.config.name,r=e.font||(t?cleverapps.styles.FONTS.TILE_SHOP_OFFER_TEXT_SMALL:cleverapps.styles.FONTS.TILE_SHOP_OFFER_TEXT_LARGE),l=s.getReward();for(var c in l)if("boosters"===c)for(var p in l.boosters){if(0!==(f=l.boosters[p])){var d=cleverapps.UI.generateImageText("x"+f,r),u=new cleverapps.Layout([new cc.Sprite(RewardsHelper.SMALL_ICONS[p]),d],{direction:cleverapps.UI.HORIZONTAL,margin:n.amountMargin});u.amount=d,o.push(u),i.push(u)}}else{var h=RewardsHelper.SMALL_ICONS[c];"gold"===c&&(h=bundles.reward_icons.frames.shop_gold_png||h);var g=new cc.Sprite(h),v="x"
;"merge"===cleverapps.config.type&&(v="");var m=0;if("unlimitedLives"===c){var f=cleverapps.UI.generateOnlyText(Array.isArray(l[c])?l[c][0]+"-"+l[c][1]:l[c],a&&!t?cleverapps.styles.FONTS.TILE_SHOP_HIGHLIGHTED_IMAGE_TEXT:r);m=n.regularTextOffsetY}else f=cleverapps.UI.generateImageText(v+(Array.isArray(l[c])?l[c][0]+"-"+l[c][1]:l[c]),a&&!t?cleverapps.styles.FONTS.TILE_SHOP_HIGHLIGHTED_IMAGE_TEXT:r);var _=new cleverapps.Layout(n.reverse?[f,g]:[g,f],{direction:cleverapps.UI.HORIZONTAL,margin:n.amountMargin});f.y+=m,_.amount=f,n[c]&&n[c].offsetY&&_.setPositionY(n[c].offsetY),n.iconOffsetY&&(g.y+=n.iconOffsetY),i.push(_)}for(var y=[];0<i.length;){var b=2;(0===y.length&&o.length<=2&&i.length-o.length<2||a)&&(a=!(b=1));var w=i.splice(0,b),T=new cleverapps.Layout(w,{direction:cleverapps.UI.HORIZONTAL,margin:n.colMargin});y.unshift(T)}var S=new cleverapps.Layout(y,{direction:cleverapps.UI.VERTICAL,margin:n.rowMargin,y:n.offsetY});if(this.setAnchorPoint2(),this.setContentSize2(n),
this.setLocalZOrder(n.zOrder),!n.noBg&&!e.noBg){var E=this.background=new cc.Scale9Sprite(e.bgImage||bundles.tile_shop.frames.shop_inner_bg_png),A=e.bgSize;E.setContentSize2(A&&A.width||n.width,A&&A.height||n.height),E.setAnchorPoint2(),E.setPositionRound(n.bg),this.addChild(E)}n.pins&&(this.pins=n.pins.map(function(e){var t=new cc.Sprite(s.isAvailable()?bundles.tile_shop.frames.pin_png:bundles.tile_shop.frames.pin_png_off);return t.setAnchorPoint2(),t.setPositionRound(e),E.addChild(t),t})),cleverapps.UI.fitToBox(S,{width:n.width-2*n.paddingX,height:n.height}),S.setPositionRound(this.width/2,this.height/2),this.addChild(S)}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{TILE_SHOP_OFFER_TEXT_LARGE:{name:"default",size:33,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},TILE_SHOP_OFFER_TEXT_SMALL:{name:"default",size:37,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),
cleverapps.styles.SmallTileRewardsBlock={rowMargin:10,colMargin:10,width:210,height:80,amountMargin:5,offsetY:0,zOrder:0,gold:{},bg:{x:{align:"center"},y:{align:"center"}},paddingX:0,regularTextOffsetY:-5},cleverapps.styles.LargeTileRewardsBlock={width:486,height:162,rowMargin:10,colMargin:10,amountMargin:5,offsetY:35,zOrder:0,bg:{x:{align:"center"},y:{align:"center"}},paddingX:0,regularTextOffsetY:-5};var MoreTile=BaseProductTile.extend({ctor:function(e,t){var s=MoreTile.styles=MoreTile.styles||cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,cleverapps.styles.MoreTile,!0);this._super(e,s,t)},createIcon:function(){},createTitle:function(){var e=cleverapps.UI.generateOnlyText("messages:ShopWindow.showMore",cleverapps.styles.FONTS.TILE_SHOP_WINDOW_TEXT);return e.setDimensions(this.styles.text.width,0),e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.fitTo(void 0,this.styles.text.height),e},createButton:function(){var e=new cc.Sprite(
bundles.tile_shop.frames.more_button_png);if(cleverapps.UI.applyHover(e),this.tileModel.isAttention()){var t=new cc.Sprite(bundles.tile_shop.frames.attention_png);t.setPositionRound(this.styles.attention),e.addChild(t),t.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.3,1.1),new cc.ScaleTo(.3,1))))}return e}});cleverapps.styles.MoreTile={width:240,height:350,scale:[1,1,1],content:{margin:20},attention:{x:{align:"right",dx:10},y:{align:"top",dy:10}},text:{width:150,height:200}};var LotteryIcon=cc.Sprite.extend({ctor:function(e,t,s){this._super();var n,i=this.styles=cleverapps.styles.LotteryIcon,o=cleverapps.eventManager.getFeatureEvent("lottery"),a=-1!==["mobile_ok","web_ok"].indexOf(cleverapps.User.calcSource())&&!1!==o.options.okLottery,r=a&&o.options.lottery10k&&s,l=-1!==["mobile_vk","web_vk"].indexOf(cleverapps.User.calcSource())&&o.options.vkSaleDay;a?i=cleverapps.overrideStyles(i,cleverapps.styles.OkLotteryIcon,!0):l&&(i=this.styles=cleverapps.overrideStyles(i,
cleverapps.styles.VkLotteryIcon,!0)),l?(n=bundles.lottery.frames.vk_lottery,i=cleverapps.overrideStyles(i,cleverapps.styles.VkLotteryIcon,!0)):a?(n=r?bundles.lottery.frames.ok_lottery_10k:bundles.lottery.frames.ok_lottery,i=cleverapps.overrideStyles(i,cleverapps.styles.OkLotteryIcon,!0)):n=bundles.lottery.frames["lottery_"+cleverapps.settings.language]||bundles.lottery.frames.lottery_en,this._super(n),e.addChild(this),t=t||"bottom",this.setScale(i.positions[t].scale||i.scale||1),this.baseScale=this.scale,this.setPositionRound(i.positions[t]),i.positions[t].preserveX&&(this.preservedX=this.x)}});cleverapps.styles.VkLotteryIcon={positions:{icon:{x:{align:"center",dx:-65},y:{align:"bottom",dy:-40},preserveX:!0},subscription:{x:{align:"left",dx:-10},y:{align:"bottom",dy:-40}}}},cleverapps.styles.OkLotteryIcon={},cleverapps.styles.LotteryIcon={positions:{bottom:{x:{align:"center",dx:0},y:{align:"bottom",dy:-70}},top:{x:{align:"center",dx:0},y:{align:"top",dy:55}},icon:{x:{align:"center",
dx:0},y:{align:"bottom",dy:-20}},icon_top:{x:{align:"center",dx:0},y:{align:"top",dy:0}},subscription:{x:{align:"right",dx:45},y:{align:"top",dy:40}},bottom_right:{x:{align:"right",dx:30},y:{align:"bottom",dy:-70}}}};var Lottery={isActive:function(){return cleverapps.eventManager.isActive("lottery")&&!cleverapps.flags.nopayments},addIcon:function(e,t,s){this.isActive()&&(e.lotteryIcon=new LotteryIcon(e,t,s)).runAction(new cc.RepeatForever(new cc.Sequence(new cc.DelayTime(3),new cc.RotateTo(.2,10),new cc.RotateTo(.2,-10),new cc.RotateTo(.2,10),new cc.RotateTo(.2,-10),new cc.RotateTo(.2,0))))},addText:function(e){if(this.isActive()){var t=cleverapps.styles.Lottery,s="messages:Lottery.info",n=cleverapps.eventManager.getFeatureEvent("lottery");-1!==["mobile_vk","web_vk"].indexOf(cleverapps.User.calcSource())&&n.options.vkSaleDay&&(s="messages:Lottery.infoSaleDay");var i=cleverapps.UI.generateTTFText(s,t.text.font);e.addChild(i),i.setPositionRound(t.text),i.fitTo(e.width)}}}
;cleverapps.styles.Lottery={text:{font:cleverapps.styles.FONTS.SMALL_WHITE_TEXT,x:{align:"center"},y:{align:"bottom",dy:5}}};var ShopProductSource={listProducts:function(e){var t=ShopProductSource.ITEMS[e],s=cleverapps.paymentsHistory.classify();return e===ShopWindow.TABS.HARD_CURRENCY&&s>cleverapps.PaymentsHistory.VIP_WEAK&&(t=ShopProductSource.ITEMS.CoinsPayer),e===ShopWindow.TABS.HARD_CURRENCY&&(t=t.filter(function(e){return cleverapps.config.products[e]||VirtualProducts[e]})),t},listTileModels:function(e){var t=ShopProductSource.listProducts(e),s=(t=-1!==[ShopWindow.TABS.UNITS_FRUIT,ShopWindow.TABS.UNITS_RESOURCE,ShopWindow.TABS.UNITS_DISCOUNT].indexOf(e)?cleverapps.unitsShop.tabs[e].generateProducts():t.map(function(e){return Product.Create(e)})).map(function(e){return TileModel.Create(e)}).filter(function(e){return e.isEnabled()});if(e===ShopWindow.TABS.HARD_CURRENCY&&!cleverapps.flags.nopayments){var n=0;s.forEach(function(e){e.getPrice&&e.getPrice()>n&&(n=e.getPrice())});for(
var i=0;i<s.length;i++)if(s[i].getPrice()===n){s[i].badge={type:"save"};break}}var o=cleverapps.paymentsHistory.classify();if(e!==ShopWindow.TABS.HARD_CURRENCY||!cleverapps.flags.nopayments){var a=ShopProductSource.ITEMS.bestSellersByPayerClass[o];for(i=0;i<s.length;i++)if(-1!==a.indexOf(s[i].getItemId())){s[i].badge={type:"bestSeller"};break}}var r=[];return e===ShopWindow.TABS.HARD_CURRENCY&&(r=ShopProductSource.ITEMS.optionalByPayerClass[o]),{default:s,optional:r}},ITEMS:{CoinsPayer:["goldForVideo","jamPack","tastyPack","honeyPack","epicPack","gold500","gold1800","gold3800","gold6000","gold25000","subsMonth"],optionalByPayerClass:[["gold25000","honeyPack","gold6000","tastyPack","gold3800","subsMonth","goldForVideo"],["gold25000","honeyPack","gold6000","sweetPack","gold500","subsMonth","goldForVideo"],["gold500","epicPack","gold25000","jamPack","gold1800","subsMonth","goldForVideo"],["gold500","jamPack","tastyPack","gold1800","gold3800","subsMonth","goldForVideo"],["gold500",
"jamPack","tastyPack","gold1800","gold3800","subsMonth","goldForVideo"]],bestSellersByPayerClass:[["sweetPack","gold500"],["jamPack","gold1800"],["tastyPack","gold3800"],["honeyPack","gold6000"],["honeyPack","gold25000"]]}};ShopProductSource.ITEMS[ShopWindow.TABS.HARD_CURRENCY]=["goldForVideo","sweetPack","jamPack","tastyPack","honeyPack","gold500","gold1800","gold3800","gold6000","gold25000","subsMonth"],ShopProductSource.ITEMS[ShopWindow.TABS.LIVES]=["refillLives","unlimitedLives","askLives","livesForVideo"],ShopProductSource.ITEMS[ShopWindow.TABS.SOFT_CURRENCY]=["softCurrencyVerySmall","softCurrencySmall","softCurrencyMedium","softCurrencyLarge"],"merge"===cleverapps.config.type&&(ShopProductSource.ITEMS[ShopWindow.TABS.LIVES]=["energyLottery","buyEnergy350","buyEnergy700","buyEnergy","livesForVideo","livesForVideoShort"],ShopProductSource.ITEMS[ShopWindow.TABS.SOFT_CURRENCY]=["coinsForVideo","softCurrencyVerySmall","softCurrencySmall","softCurrencyMedium","softCurrencyLarge"],
"wondermerge"!==cleverapps.config.name&&(ShopProductSource.ITEMS.CoinsPayer.push("growthFund"),ShopProductSource.ITEMS[ShopWindow.TABS.HARD_CURRENCY].push("growthFund")));var LayoutAdjuster={ChooseLayout:function(e,t,s){var n={large:[],small:[]};e.default.forEach(function(e){e.isSmall()?n.small.push(e):n.large.push(e)});for(var i,o=!1;!(i=t.filter(function(e){return e.isEnough(n)})[0]);)if(o=!0,!this.trimOptional(n.large,n.large.length-1,e.optional)){cleverapps.throwAsync("select layout error - large tiles");break}if(!i)throw"select layout error";if(o&&!s){var a=new MoreTileModel(e.default);a.isEnabled()&&n.small.push(a)}return this.trimOptional(n.small,i.countOfSmallTiles,e.optional),n.small.length>i.countOfSmallTiles&&cleverapps.throwAsync("select layout error - small tiles"),i.setTileModels(n),i},trimOptional:function(e,t,s){for(var n=!1,i=0;i<s.length&&e.length>t;i++)for(var o=0;o<e.length;o++)if(e[o].product.itemId===s[i]){e.splice(o,1),n=!0;break}return n}},TileLayout=function(e
){this.largeTiles=0,this.countOfSmallTiles=0,this.smallTilesCountByRow=[],this.tiles=[],(this.map=e).forEach(function(e,t){for(var s=this.smallTilesCountByRow[t]=0;s<e.length;s++){var n=e[s];if("x"===n)this.smallTilesCountByRow[t]++;else{var i=n.charCodeAt()-"A".charCodeAt();i+1>this.largeTiles&&(this.largeTiles=i+1)}}this.countOfSmallTiles+=this.smallTilesCountByRow[t]},this)};TileLayout.prototype.isEnough=function(e){return this.largeTiles===e.large.length},TileLayout.prototype.setTileModels=function(e){this.tileModels=e},TileLayout.prototype.setTiles=function(e){this.tiles=e},TileLayout.prototype.onShow=function(e){for(var t=(e=e||0)+.075*Math.ceil(.5*(this.tiles.length-1))+.5,s=this.tiles.length-1;0<=s;s--){var n=e+.075*Math.ceil(.5*s),i=this.tiles[s].tileBadge;i&&(i.setVisible(!1),i.runAction(new cc.Sequence(new cc.ScaleTo(0,0),new cc.DelayTime(t),new cc.PlaySound(bundles.tile_shop.urls.badge_appear_effect),new cc.Show,new cc.ScaleTo(.4,i.scale).easing(cc.easeBackOut())))),
this.tiles[s].setVisible(!1),this.tiles[s].runAction(new cc.Sequence(new cc.ScaleTo(0,0),new cc.Show,new cc.DelayTime(n),new cc.ScaleTo(.4,this.tiles[s].scale).easing(cc.easeBackOut())))}},TileLayout.prototype.onClose=function(e){for(var t=cleverapps.wait(this.tiles.length,e),s=this.tiles.length-1;0<=s;s--)this.tiles[s].runAction(new cc.Sequence(new cc.DelayTime(.075*Math.ceil(.5*s)),new cc.ScaleTo(.3,0).easing(cc.easeBackIn()),new cc.CallFunc(t.bind(this,s))))},TileLayout.prototype.isLargeChar=function(e){var t=e.charCodeAt(0);return t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)},TileLayout.prototype.createLayout=function(){for(var e=cleverapps.styles.ShopWindow,t=[],s=0;s<this.map.length;s++){for(var n=!1,i=0;i<this.map[s].length;i++)if(this.isLargeChar(this.map[s][i])){n=!0;break}var o=[];if(n){var a=0;for(i=0;i<this.map[s].length;i++)if(this.isLargeChar(this.map[s][i]))o.push(this.tileModels.large.splice(0,1)[0].getView());else{var r=this.tileModels.small.splice(0,1),
l=this.smallTilesCountByRow[s]-a-1;r=this.tileModels.small[l]?r.concat(this.tileModels.small.splice(l,1)):r.concat(this.tileModels.small.splice(this.tileModels.length-1,1));var c=new cleverapps.Layout(r.map(function(e){return e.getView()}),{margin:e.tileMargin,direction:cleverapps.UI.TOP_TO_BOTTOM});o.push(c),a++}s++}else o=this.tileModels.small.splice(0,this.map[s].length).map(function(e){return e.getView()});t.push(new cleverapps.Layout(o,{direction:cleverapps.UI.HORIZONTAL,margin:e.tileMargin}))}return new cleverapps.Layout(t,{direction:cleverapps.UI.TOP_TO_BOTTOM,margin:e.rowMargin,padding:e.rowsPadding})},TileLayout.prototype.getAppropriateTile=function(){return this.tiles.filter(function(e){return e.tileModel.isAppropriate()})[0]},TileLayout.Layouts={vertical:{compact:[["xx","xx"],["Ax","Ax","xx"],["AB","AB","xxx"],["AB","AB","xx","xx"]],expanded:[["AB","AB","CD","CD","xx","xx"],["AB","AB","CD","CD","E","E","xx","xx"],["AB","AB","C","C","xx","xx"]]},horizontal:{compact:[["xxxx"],
["Axx","Axx"],["ABxx","ABxx"]],expanded:[["ABCDxx","ABCDxx"],["ABCDExx","ABCDExx"],["ABCxx","ABCxx"]]}},"merge"===cleverapps.config.type&&(TileLayout.Layouts.horizontal.compact.push(["ABCx","ABCx"],["ABCD","ABCD"],["ABCDE","ABCDE"],["ABCDEF","ABCDEF"],["ABCDEFG","ABCDEFG"]),TileLayout.Layouts.horizontal.expanded="ABCDEFGHIJKLMNOPQRST".split("").map(function(e,t,s){var n=s.slice(0,t+1).join("");return[n,n]}));var Tabs=cleverapps.Layout.extend({ctor:function(s,n){this.buttons={};var e=cleverapps.styles.Tabs,t=Object.keys(s).map(function(e,t){return this.createButton(e,s[e],-(t+1),n)},this);this._super(t,{direction:void 0===n.direction?e.direction:n.direction,margin:void 0===n.margin?e.margin:n.margin,attention:n.attention})},createButton:function(e,t,s,n){var i,o=cleverapps.styles.Tabs.buttons,a=n.width||o.width,r=n.height||o.height;t.text&&(n.direction===cleverapps.UI.HORIZONTAL?i=cleverapps.UI.generateOnlyText(t.text,t.font||cleverapps.styles.FONTS.TABS_TEXT):(
i=cleverapps.UI.generateOnlyText(Messages.get(t.text).split("").join("\n"),t.font||cleverapps.styles.FONTS.TABS_TEXT)).fitTo(.9*a,.9*r)),t.icon&&(i=new cc.Sprite(t.icon)).setScale(t.scale||1);var l=this.buttons[e]=new cleverapps.UI.Button({button_png:bundles.main.frames.shop_tab_off,button_on_png:bundles.main.frames.shop_tab_off,button_off_png:bundles.main.frames.shop_tab_on,scale9Rect:n.scale9Rect,width:a,height:r,content:i,click_effect:bundles.main.urls.tab_click_effect,mirrorX:t.mirrorX,onClicked:this.activateTab.bind(this,e),useInteractiveScale:!0});return l.selectedScale=1.03,l.baseZOrder=s,l.info=t,l.setLocalZOrder(s),i.setPositionRound(o),l},getActive:function(){return this.selectedId},activateTab:function(t,s){t=t.toString(),this.selectedId!==t&&Object.keys(this.buttons).forEach(function(e){e===t?this.onSelectTab(e,s):this.onUnSelectTab(e)},this)},listIds:function(){return Object.keys(this.buttons)},onSelectTab:function(e,t){var s=this.buttons[e],n=s.info;s.disable(),
s.setLocalZOrder(1),s.selected=!0,s.applyInteractiveScale(),n.updateTitle&&n.updateTitle(),n.text&&s.content.setColor(cleverapps.styles.COLORS.TAB_TEXT_COLOR),n.icon&&s.content.setOpacity(255),void 0===n.content&&(n.content=n.generator()),n.content.setVisible(!0),n.content.onSelectTab&&n.content.onSelectTab(t),this.selectedId=e},onUnSelectTab:function(e){var t=this.buttons[e],s=t.info;t.enable(),t.setLocalZOrder(t.baseZOrder),t.selected=!1,t.applyInteractiveScale(),s.text&&t.content.setColor(cleverapps.styles.COLORS.DISABLED_TAB_TEXT_COLOR),s.icon&&t.content.setOpacity(127),void 0!==s.content&&(s.content.setVisible(!1),s.content.stopAllActions(),s.content.onUnSelectTab&&s.content.onUnSelectTab())},setAttention:function(e,t){var s=cleverapps.styles.Tabs.attention,n=this.buttons[e];n.attention&&(n.attention.removeFromParent(),delete n.attention),t&&(n.attention=new cc.Sprite(bundles.windows.frames.tab_attention),n.attention.setAnchorPoint2(),n.attention.setPositionRound(
this.options.attention||s),n.addChild(n.attention),n.attention.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.3,1.1),new cc.ScaleTo(.3,1)))))}});cleverapps.overrideColors(cleverapps.styles.COLORS,{TAB_TEXT_COLOR:new cc.Color(255,255,255,255),DISABLED_TAB_TEXT_COLOR:new cc.Color(200,200,200,255)}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{TABS_TEXT:{size:40}}),cleverapps.styles.Tabs={margin:0,direction:cleverapps.UI.HORIZONTAL,buttons:{x:{align:"center",dx:0},y:{align:"center",dy:0}},attention:{x:0,y:0}};var Buttons=cc.Node.extend({ctor:function(e){this._super(),0!==(e=Buttons.filter(e)).length&&(this.buttons={},e.forEach(function(e){this.buttons[e.__instanceId]=e,this.addChild(e)},this),this.arrange())},onEnterTransitionDidFinish:function(){this._super(),this.arrange()},arrange:function(){var e=cleverapps.styles.Buttons,t=e.margin.x,s=0;if(1<this.children.length&&this.parent){var n=this.parent.width-2*e.padding.x,i=0;this.children.forEach(function(e){i+=e.width,
s=Math.max(s,e.height/2)});var o=Math.round((n-i)/(this.children.length-1));t=Math.max(t,o)}this.margin=t,cleverapps.UI.arrangeWithMargins(this.children,{direction:cleverapps.UI.HORIZONTAL,margin:t,y:s}),cleverapps.UI.wrap(this),this.setAnchorPoint2()},add:function(e){0!==Buttons.filter([e]).length&&(this.buttons[e.__instanceId]=e,this.addChild(e),this.arrange())},remove:function(t){cleverapps.styles.Buttons;(t=this.buttons[t.__instanceId])&&(t.stopAllActions(),t.runAction(new cc.Sequence(new cc.ScaleTo(.3,0),new cc.RemoveSelf)),this.children.forEach(function(e){e.x>t.x&&(e.stopAllActions(),e.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.MoveBy(.3,-t.width-this.margin,0))))}),this.stopAllActions(),this.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.MoveBy(.3,(t.width+this.margin)/2,0))))},onShow:function(){this.children.forEach(function(e){e.stopAllActions();var t=e.scale;e.setScale(0),e.runAction(new cc.ScaleTo(.7,t).easing(new cc.easeBackOut))})}})
;Buttons.filter=function(e){return e.filter(function(e){return e&&e.onMouseOver})},Buttons.choose=function(e){if(0!==(e=Buttons.filter(e)).length)return e[Math.floor(Math.random()*e.length)]},Buttons.remove=function(e){if(e.parent instanceof Buttons&&e.parent.buttons[e.__instanceId]){var t=e.parent;1<t.children.length&&t.remove(e)}else e.removeFromParent()},cleverapps.styles.Buttons={margin:{x:20},padding:{x:70}};var RewardBuyButton=cleverapps.UI.Button.extend({ctor:function(e){var t=e.type,s=e.game,n=e.config,i=e.window,o=parseInt(n);-1!==n.indexOf("x2")?o="x2":-1!==n.indexOf("x3")&&(o="x3");var a=this.type=-1!==n.indexOf(RewardBuyButton.VIDEO)?RewardBuyButton.VIDEO:RewardBuyButton.COINS,r=RewardBuyButton.VIDEO===a,l="";a===RewardBuyButton.COINS&&(l=this.price=parseInt(n.substr(n.indexOf(RewardBuyButton.COINS)+RewardBuyButton.COINS.length)));var c=o;"x2"===o&&(c=s.rewards[t]),"x3"===o&&(c=2*s.rewards[t]);var p=cleverapps.styles.RewardBuyButton,d=o;"number"==typeof o&&(d="+"+o);var u=[
];if(d){var h=this.text=cleverapps.UI.generateImageText(d,cleverapps.styles.FONTS.GAME_REWARD_BUTTON_TEXT);u.push(h)}var g=new cc.Sprite(r?bundles.shared.frames.adicon_png:bundles.menubar.frames.coin_png);if(g.setScale(p.icon.scale),u.push(g),l){var v=cleverapps.UI.generateImageText(l,cleverapps.styles.FONTS.GAME_REWARD_BUTTON_TEXT);u.push(v)}var m=new cleverapps.Layout(u,{direction:p.direction,margin:p.margin});g.y+=p.icon.offsetY;var f=this.createListener(function(){s.rewards[t]+=c,cleverapps.eventLogger.logEvent(cleverapps.EVENTS.REWARD_BUY+"_"+t+"_"+(r?"video":"buy")),e.window&&e.window.animateReward&&e.window.animateReward(t,c),Buttons.remove(this),e.onRemove&&e.onRemove(),cleverapps.isRumble()&&i.roundCountdown.resumeCountdown()}.bind(this));this._super({width:p.width,height:p.height,button_png:p.button_png,button_on_png:p.button_on_png,content:m,contentOffset:p.contentOffset,contentPadding:0,onClicked:this.createListener(function(){r?(cleverapps.isRumble(
)&&i.roundCountdown.pauseCountdown(),cleverapps.rewardedAdsManager.playRewarded(f)):s.canPayReward(t)&&(levels.user.takeGold(l)?(cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect),f()):cleverapps.isRumble()&&i.roundCountdown.pauseCountdown())}.bind(this))})}});RewardBuyButton.VIDEO="[=]",RewardBuyButton.COINS="@",cleverapps.styles.RewardBuyButton={width:144,height:54,margin:4,direction:cleverapps.UI.HORIZONTAL,button_png:bundles.buttons_main.frames.small_green_button,button_on_png:bundles.buttons_main.frames.small_green_button_on,icon:{scale:.5,offsetY:0}};var VictoryWindowButton=cleverapps.UI.Button.extend({ctor:function(e){var t=e.level,s=e.boatswain,n="OK",i=void 0;if(t.episode.isDailyLevel()&&!cleverapps.dailyLevel.isStartFromPortlet())i=s.DAILY_LEVEL_BACK_TO_MAIN;else{var o=cleverapps.Plot.decideNext(t);o===Boatswain.NEXT_INTENT?(n="Next",i=s.PLAY_NEXT):o===Boatswain.REPLAY_INTENT&&(n="Replay",i=s.REPLAY)}var a=cleverapps.styles.VictoryWindowButton;this._super({
width:a.width,height:a.height,text:Messages.get(n).toUpperCase(),font:cleverapps.styles.FONTS.BUTTON_TEXT,onClicked:this.createListener(function(){i&&(s.intent=i),e.onPressed()})});var r=this.width*this.getScaleX(),l=cleverapps.styles.VictoryWindowButton.titleOffset;r<l+this.text.width&&this.text.setScale(r/(l+this.text.width))}});cleverapps.styles.VictoryWindowButton={width:220,height:110,titleOffset:40};var DoubleRewardButton=cleverapps.UI.Button.extend({ctor:function(e){this.onDouble=e;var t=cleverapps.styles.DoubleRewardButton;this._super({width:t.width,height:t.height,content:this.getContent(),onClicked:this.onClicked.bind(this)})},onClicked:function(){Buttons.remove(this),cleverapps.rewardedAdsManager.loadAndPlay(this.onDouble)},getContent:function(){var e=cleverapps.styles.DoubleRewardButton,t=new cc.Node,s=new cc.Sprite(bundles.shared.frames.adicon_png);t.addChild(s);var n=cleverapps.UI.generateOnlyText("messages:PeriodicBonus.DoubleRewardButton.Text",
cleverapps.styles.FONTS.BUTTON_TEXT);return t.addChild(n),t.setContentSize2(s.width+e.margin+n.width,s.height),s.setPositionRound(e.icon),n.setPositionRound(e.text),t}});cleverapps.styles.DoubleRewardButton={margin:10,width:300,height:100,padding:{x:20,y:0},icon:{x:{align:"left",dx:3},y:{align:"center",dy:3}},text:{x:{align:"right"},y:{align:"center"}}};var SettingsWindow=Window.extend({onWindowLoaded:function(){var e=[];e.push({label:void 0,view:this.addSoundIcons()});var t=cleverapps.User.calcSource();"undefined"!=typeof match3&&cc.sys.os!==cc.sys.OS_IOS&&e.push({label:"messages:SettingsWindow.Effects",view:this.addEffectButton()});var s="tripeaks"===cleverapps.config.name;if(1<cleverapps.Settings.getAvailableLanguages().length&&("merge"===cleverapps.config.type||!cleverapps.environment.isGameScene())&&e.push({label:s?"messages:Language":void 0,view:this.addLanguages()}),!cleverapps.social.isLoggedIn()&&-1===["mobile_vk","web_vk","plinga","huzcom","pliega","ayodo1","iyodo1"].indexOf(
t)){var n=cleverapps.social.isInitialized()?"messages:SignIn":"messages:FBLoginOrInvite.Button.Connecting";e.push({label:s?n:void 0,view:this.createLoginButtons()})}(cleverapps.social.nativeInviteFriends||cleverapps.social.isLoggedIn()&&!cleverapps.flags.noviral)&&e.push({label:s?"messages:FBLoginOrInvite.Button.Invite":void 0,view:this.createInviteButton()}),-1===["mbga","sp_mbga","plinga","huzcom","instant","amazon","pliega","ayodo1","iyodo1","yandex"].indexOf(t)&&e.push({label:s?"messages:Help":void 0,view:this.addHelpButton()}),"merge"!==cleverapps.config.type&&Game.currentGame||!Chat.IsAvailable()||-1!==["plinga","huzcom","pliega"].indexOf(t)||e.push({label:s?"messages:SupportButton":void 0,view:this.addSupportButton()}),Game.currentGame&&void 0===Game.currentGame.outcome&&cleverapps.environment.isGameScene()&&"match3"===cleverapps.config.type&&e.push({label:void 0,view:this.addGiveUpButton()}),e.reverse();var i=cleverapps.styles.SettingsWindow,o=e.map(function(e){var t=e.view;if(
e.label){if(i.Substrate)return this.singleLineWithSubstrate(t,e.label);var s=new cleverapps.UI.generateTTFText(e.label,cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);return new cleverapps.Layout([t,s],{direction:cleverapps.UI.VERTICAL,margin:i.Button.topPadding})}return t},this),a=new cleverapps.Layout(o,{direction:cleverapps.UI.VERTICAL,margin:i.Button.topPadding}),r=new cleverapps.Layout([this.createUserId(),a],{margin:i.Button.topPadding,direction:cleverapps.UI.VERTICAL}),l=i.Title.empty?void 0:"messages:SettingsWindow.title";this._super({title:l,name:"settingswindow",content:r,styles:cleverapps.overrideStyles(cleverapps.styles.Window,i.window,!0)}),cleverapps.audio.playSound(bundles.main.urls.window_effect)},createContent:function(e,t,n){if(void 0!==e&&"object"==typeof e){var s=cleverapps.User.calcSource();e=n.icon.image[s]}n=n||{};var i=cleverapps.styles.SettingsWindow,o=n.font||cleverapps.styles.FONTS.BUTTON_TEXT,a=function(e){if(e){var t=new cc.Sprite(e),s=n.Icon||{}
;return t.setScale(s.scale||1),t}};if(t){var r=cleverapps.UI.generateTTFText(t,o),l=new cleverapps.Layout([a(e),r].filter(function(e){return void 0!==e}),{direction:cleverapps.UI.HORIZONTAL,margin:i.Button.margin});return l.text=r,l}return a(e)},singleLineWithSubstrate:function(e,t){var s=cleverapps.styles.SettingsWindow.Substrate,n=cleverapps.UI.generateTTFText(t,cleverapps.styles.FONTS.BUTTON_TEXT);n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.setVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.setDimensions(s.width-e.width,0),n.fitTo(0,e.height);var i=new cleverapps.Layout([n,e],{direction:cleverapps.UI.HORIZONTAL}),o=cleverapps.UI.createScale9Sprite(s.image);return o.setLocalZOrder(-1),o.setContentSize2(s.width,s.height),o.setPosition(i.width/2-s.marginX,i.height/2-s.marginY),i.addChild(o),i},addGiveUpButton:function(){var e=cleverapps.styles.SettingsWindow,t=this.createContent(e.GiveUpButton.icon,"messages:GiveUp",e.GiveUpButton);return new cleverapps.UI.Button({
button_png:bundles.buttons_main.frames.red_button,button_on_png:bundles.buttons_main.frames.red_button_on,content:t,onClicked:function(){this.close(),cleverapps.metha.whenFreeFocus(function(){cc.director.getRunningScene().closeAction()})}.bind(this),width:e.Button.width,height:e.Button.height})},addHelpButton:function(){var e=cleverapps.styles.SettingsWindow;return new cleverapps.UI.Button({content:this.createContent(e.HelpButton.icon,!0===e.Button.noCaption?"":"messages:Help",{font:e.Button.font}),onClicked:function(){cc.sys.openURL(cleverapps.bySource(cleverapps.config.helpURL)),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.LIKE_PAGE)},width:e.Button.width,height:e.Button.height,button_png:e.HelpButton.button_png||bundles.buttons_main.frames.blue_button_png,button_on_png:e.HelpButton.button_on_png||bundles.buttons_main.frames.blue_button_on_png,contentOffset:e.HelpButton.iconOffset})},addSupportButton:function(){var e=cleverapps.styles.SettingsWindow
;return new cleverapps.UI.Button({content:this.createContent(e.SupportButton.icon,!0===e.Button.noCaption?"":"messages:SupportButton",{font:e.Button.font}),onClicked:function(){cleverapps.metha.distract({focus:"ChatScene",action:function(e){Game.currentGame&&(Game.currentGame.stop(),Game.currentGame=void 0),cleverapps.scenes.replaceScene(new ChatScene(cleverapps.chat),e)}})}.bind(this),width:e.Button.width,height:e.Button.height,button_png:e.SupportButton.button_png||bundles.buttons_main.frames.blue_button_png,button_on_png:e.SupportButton.button_on_png||bundles.buttons_main.frames.blue_button_on_png,contentOffset:e.SupportButton.iconOffset,mark:cleverapps.chat.hasUnread})},addEffectButton:function(){var e=new cleverapps.UI.StateButton({on:"messages:on",off:"messages:off",onClick:function(e){0===e?cleverapps.settings.setFpsMode(cleverapps.Settings.FPS_MODE_LOW):cleverapps.settings.setFpsMode(cleverapps.Settings.FPS_MODE_HIGH)}})
;return cleverapps.settings.fpsMode!==cleverapps.Settings.FPS_MODE_HIGH&&cleverapps.settings.fpsMode!==cleverapps.Settings.FPS_MODE_AUTO||e.setState(1),e},addLanguages:function(){var e=cleverapps.styles.SettingsWindow;return new cleverapps.UI.Button({content:this.createContent(e.LanguageButton.icon,!0===e.Button.noCaption?"":"messages:Language",e.LanguageButton),onClicked:function(){new LanguagesWindow,this.close()}.bind(this),width:e.Button.width,height:e.Button.height,contentOffset:e.LanguageButton.iconOffset,button_png:e.LanguageButton.button_png,button_on_png:e.LanguageButton.button_on_png,button_off_png:e.LanguageButton.button_off_png})},addSoundIcons:function(){var e=[{on:bundles.buttons_main.frames.sound_on_png,off:bundles.buttons_main.frames.sound_off_png,toggle:cleverapps.settings.toggleSound.bind(cleverapps.settings),settings:"sound",listener:"onChangeSoundListener"},{on:bundles.buttons_main.frames.music_on_png,off:bundles.buttons_main.frames.music_off_png,
toggle:cleverapps.settings.toggleMusic.bind(cleverapps.settings),settings:"music",listener:"onChangeMusicListener"}];"undefined"!=typeof match3&&(cc.sys.isNative||cc.sys.isMobile||"ios"===cleverapps.User.calcSource())&&e.push({on:bundles.buttons_main.frames.vibro_on_png,off:bundles.buttons_main.frames.vibro_off_png,toggle:cleverapps.settings.toggleVibro.bind(cleverapps.settings),settings:"vibro",listener:"onChangeVibroListener"});var n=cleverapps.styles.SettingsWindow.IconButton;return this.arrangeButtons(e,cleverapps.styles.SettingsWindow.Button,function(e,t){var s=new cleverapps.UI.Button({content:new cc.Sprite(e.on),contentOff:new cc.Sprite(e.off),width:t.width,height:n.height||t.height,contentOffset:n.contentOffset,onClicked:e.toggle});return s.setBright(cleverapps.settings[e.settings]),cleverapps.settings[e.listener]=s.createListener(function(){s.setBright(cleverapps.settings[e.settings])}),s})},arrangeButtons:function(e,t,s){
var n=3===e.length?t.width3:2===e.length?t.width2:t.width,i=t.height2||t.height,o=e.map(function(e){return s(e,{width:n,height:i})},this);return new cleverapps.Layout(o,{direction:cleverapps.UI.HORIZONTAL,margin:t.margin,padding:{x:t.padding||0,y:0}})},createLoginButtons:function(){var n=cleverapps.social.getCodes(),s=function(e,t){var s=cleverapps.styles.SettingsWindow;return new FbButton({multiSocials:1<n.length,width:1===n.length?t.width:void 0,height:t.height,button_png:bundles.main.frames.facebook_small_png,button_on_png:bundles.main.frames.facebook_small_connected_png,login:!0,showText:!(!0===s.Button.noCaption)&&1===n.length,source:e,onSuccess:this.close.bind(this)})}.bind(this),e=cleverapps.overrideStyles(cleverapps.clone(cleverapps.styles.SettingsWindow.Button,!0),cleverapps.styles.SettingsWindow.LoginButton);1<n.length&&(e=cleverapps.overrideStyles(cleverapps.clone(e,!0),e.multiSocials));var t=this.arrangeButtons(n,e,function(e,t){return s(e,t)});if(
!cleverapps.styles.SettingsWindow.Substrate&&1<n.length){var i=new cleverapps.UI.generateTTFText("messages:SignIn",cleverapps.styles.FONTS.SETTINGS_WINDOW_ID_TEXT||cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);return new cleverapps.Layout([t,i],{direction:cleverapps.UI.VERTICAL,margin:cleverapps.styles.SettingsWindow.Button.topPadding})}return t},createInviteButton:function(){var e=cleverapps.styles.SettingsWindow.Button;return new FbButton({width:e.width,height:e.height,button_png:bundles.main.frames.facebook_small_png,button_on_png:bundles.main.frames.facebook_small_connected_png,showText:!(!0===cleverapps.styles.SettingsWindow.Button.noCaption),onSuccess:this.close.bind(this)})},createUserId:function(){if("merge"!==cleverapps.config.type){var e=cleverapps.user.id;e=e.replace("android_","").replace("apple_","");var t=cleverapps.UI.generateTTFText("messages:SettingsWindow.UserID.text",cleverapps.styles.FONTS.SETTINGS_WINDOW_ID_TEXT||cleverapps.styles.FONTS.WINDOW_SMALL_TEXT,{id:e});if(
30<e.length&&t.setString("ID: "+e),t.fitTo(cleverapps.styles.SettingsWindow.UserId.maxWidth),!cc.sys.isNative){cleverapps.UI.onClick(t,function(){var e=document.createElement("textArea");e.value=cleverapps.user.id,e.style.hidden=!0,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),cleverapps.Notification.create("messages:SettingsWindow.UserID.copied")})}return t}},createResolutionId:function(){return new cleverapps.UI.generateTTFText("messages:SettingsWindow.ResolutionId",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT,{resolution:100*resolutionScale})}});cleverapps.styles.SettingsWindow={HelpButton:{},SupportButton:{},IconButton:{},LoginButton:{margin:40,padding:0},Button:{width:450,height:110,topPadding:20,leftPadding:0,margin:15,width2:215,width3:140},LanguageButton:{icon:bundles.buttons_main.frames.language_icon_png},GiveUpButton:{enabled:!1},ModesSlider:{margin:0},UserId:{maxWidth:500},window:{contentOffset:-50,Border:{y:100}},Title:{
empty:!1},topPadding:40,width:400,height:430},"horizontal"===cleverapps.config.orientation&&cleverapps.increaseStylesByKoef(cleverapps.styles.SettingsWindow,1.25);var LanguageButton=cc.Node.extend({ctor:function(e,t){this._super(),this.callback=t,this.language=e,this.setContentSize2(cleverapps.styles.LanguagesWindow.Button),this.setAnchorPoint2(),this.addContent(),cleverapps.UI.onClick(this,this.onClicked.bind(this)),cleverapps.UI.applyHover(this)},onClicked:function(){this.isCurrentLanguage()||this.callback(this.language)},isCurrentLanguage:function(){return cleverapps.settings.language===this.language},onTouchBegan:function(){this.isCurrentLanguage()||(this.isPressed=!0,this.updateContent())},onTouchEnded:function(){this.isCurrentLanguage()||(this.isPressed=!1,this.updateContent())},addContent:function(){this.content=this.createButtonContent(),this.addChild(this.content),this.content.setPositionRound(this.width/2,this.height/2)},onMouseOver:function(){this.isCurrentLanguage(
)||this.setScale(1.05)},updateContent:function(){this.content.removeFromParent(!0),this.addContent()},createButtonContent:function(){var e=cleverapps.styles.LanguagesWindow.Button,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e);var s=this.bg=cleverapps.UI.createScale9Sprite(this.isPressed||this.isCurrentLanguage()?bundles.languageswindow.frames.buttonbg_on_png:bundles.languageswindow.frames.buttonbg_png);s.setContentSize2(t.getContentSize()),s.setPosition(t.width/2,t.height/2),t.addChild(s);var n=cleverapps.styles.FONTS.LANGUAGE_TEXT;this.isCurrentLanguage()&&cleverapps.styles.FONTS.LANGUAGE_SELECTED_TEXT&&(n=cleverapps.styles.FONTS.LANGUAGE_SELECTED_TEXT);var i=cleverapps.UI.generateTTFText("messages:"+this.language,n);if(i.fitTo(t.width-2*e.padding.x),t.addChild(i),i.setPositionRound(t.width/2+e.text.offset.x,t.height/2+e.text.offset.y),this.isCurrentLanguage()){var o=new cc.Sprite(bundles.languageswindow.frames.buttoncheck_png);for(o.setPositionRound(e.check),t.addChild(o
);cc.rectIntersectsRect(o.getBoundingBox(),i.getBoundingBox());)i.fitTo(.95*i.width)}return t}}),LanguagesWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.LanguagesWindow,t=cleverapps.overrideStyles(cleverapps.styles.Window,e.window,!0);this._super({title:"messages:Language",name:"languageswindow",minHeight:e.minHeight,content:this.createContent(),styles:t}),cleverapps.audio.playSound(bundles.main.urls.window_effect)},createContent:function(){var e=cleverapps.styles.LanguagesWindow,t=cleverapps.clone(cleverapps.Settings.getAvailableLanguages()),s=e.amountInRow[cleverapps.wideMode.mode];this.buttonsPerLanguage={};for(var n=[];0<t.length;){var i=t.splice(0,s),o=[];i.forEach(function(e){var t=new LanguageButton(e,this.buttonClicked.bind(this));o.push(t),this.buttonsPerLanguage[e]=t}.bind(this));var a=new cleverapps.Layout(o,{direction:cleverapps.UI.HORIZONTAL,margin:e.columnMargin});n.unshift(a)}var r=new cleverapps.Layout(n,{direction:cleverapps.UI.VERTICAL,
margin:e.rowMargin,padding:e.padding});if(e.bg){var l=new cc.Scale9Sprite(bundles.languageswindow.frames.bg_png);return l.setContentSize2(r.width+2*e.bg.padding.x,r.height+2*e.bg.padding.y),l.addChild(r),r.setPositionRound(l.width/2,l.height/2),l}return r},buttonClicked:function(t){var s=cleverapps.settings.language;t!==s&&cleverapps.metha.distract({focus:"LanguageChanged",action:function(e){cleverapps.settings.setLanguage(t),t===cc.sys.LANGUAGE_RUSSIAN&&(cleverapps.dailyLevel.currentEvent||cleverapps.dailyLevel.load()),"board"===cleverapps.config.type&&levels.episodes.reset(),this.buttonsPerLanguage[s].updateContent(),this.buttonsPerLanguage[t].updateContent(),Messages.preload(t,function(){this.setTitle("messages:Language"),cleverapps.environment.isGameScene()&&"merge"!==cleverapps.config.type?cleverapps.lives?(e(),this.close()):cleverapps.metha.wantsToPlay(e):(this.close(),Game.currentGame&&Game.currentGame.stop(),cleverapps.metha.gotoMainScene(e))}.bind(this))}.bind(this)})},
listBundles:function(){return["languageswindow"]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{LANGUAGE_TEXT:{size:35,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.LanguagesWindow={Button:{width:260,height:100,padding:{x:10},text:{offset:{x:0,y:0}},check:{margin:3,x:{align:"left",dx:6},y:{align:"center",dy:0}}},window:{contentOffset:-40},columnMargin:20,rowMargin:20,padding:{x:0,y:10},amountInRow:[2,3,3]};var TutorialFinishWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.TutorialFinishWindow,t=new cc.Node;t.setAnchorPoint(.5,.5);var s=e.paddingBottom;t.setContentSize(e.width,e.height?e.height:e.paddingBottom);var n=cleverapps.UI.generateTTFText("messages:TutorialFinishWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT,{gameTitle:Messages.get(cleverapps.config.title)});n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var i=t.width+50;if(n.setDimensions(cc.size(i,0)),n.setPosition(t.width/2+e.text.x,t.height+n.height/2+e.text.y),t.addChild(n),
s+=n.height+e.paddingTop,e.character){var o=new cc.Sprite(e.character.image);o.setPosition(t.width/2+e.character.x,e.character.y),t.addChild(o),s+=o.height}e.height&&(s=e.height),t.setContentSize(t.width,s),this._super({content:t,title:"messages:TutorialFinishWindow.title",name:"tutorialfinishwindow",button:{text:Messages.get("OK")},closeButton:!1}),cleverapps.audio.playSound(bundles.main.urls.window_effect)}});cleverapps.styles.TutorialFinishWindow={width:550,paddingBottom:50,paddingTop:20,text:{x:0,y:0}};var RateWindow=Window.extend({onWindowLoaded:function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.RATE_WINDOW);var s=this.styles=cleverapps.styles.RateWindow;if(-1!==["riddles","heroes"].indexOf(cleverapps.config.name)){var e=this.createCustomizedContent();return this._super({content:e,title:"messages:RateWindow.title",name:"ratewindow",button:{width:s.button.width,height:s.button.height,text:Messages.get("RateUs"),onPressed:function(){this.openRateUrl(),this.close()}.bind(
this)}}),void cleverapps.audio.playSound(bundles.main.urls.window_effect)}for(var n=[],t=[],i=0;i<5;i++)t.push(i);var o=-1,a=function(e){if(e!==o){o=e;for(var t=0;t<5;t++)t<=e?n[t].turnOn():n[t].turnOff()}},r=function(e){if(4===e&&this.openRateUrl(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS["RATE_"+(e+1)]),e+1<=3){var t=cleverapps.bySource(cleverapps.config.dontLikeGameUrl);t&&cc.sys.openURL(t)}this.close()}.bind(this),l=function(e){var t=this.convertToNodeSpace(e.getLocation()),s=cc.rect(0,0,this.width,this.height);cc.rectContainsPoint(s,t)?a(this.order):function(e){if(e===o){o=-1;for(var t=0;t<5;t++)n[t].turnOff()}}(this.order)};n=this.stars=t.map(function(e){var t=new cc.Sprite(s.starImage);return t.turnOn=function(){cleverapps.UI.convertToGrayScale(t,!0)},t.turnOff=function(){cleverapps.UI.convertToGrayScale(t)},t.turnOff(),t.order=e,cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(e){var t=this.convertTouchToNodeSpace(e)
;return!!cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t)}.bind(t),onTouchEnded:function(e){var t=this.convertTouchToNodeSpace(e);return!!cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t)&&(a(this.order),r(this.order),!0)}.bind(t)},t),cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:l.bind(t)},t),t});var c=this.createText(),p=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL});e=new cleverapps.Layout([p,c],{direction:cleverapps.UI.VERTICAL,margin:s.margin,padding:s.padding});this._super({content:e,title:"messages:RateWindow.title",name:"ratewindow",button:{width:s.button.width,height:s.button.height,text:Messages.get("Later").toUpperCase(),onPressed:function(){this.close()}.bind(this)}}),cleverapps.audio.playSound(bundles.main.urls.window_effect),this.addFingerTip(n[n.length-1])},createCustomizedContent:function(){var e=cleverapps.styles.RateWindow.customizedContent,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize(e.width,e.height),
t.setLocalZOrder(1);var s=cleverapps.UI.createScale9Sprite(bundles.windows.frames.rate_text_bg_png);s.setContentSize(t.width,t.height-e.marginY);var n=this.createText();s.addChild(n),n.setPositionRound(s.width/2,s.height/2),t.addChild(s),s.setPositionRound(t.width/2,t.height/2);var i=new cc.Sprite(bundles.windows.frames.person_stars_png);return i.setScale(e.person.scale),t.addChild(i),i.setPositionRound(t.width/2,t.height/2+e.person.offsetY),t},openRateUrl:function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.RATE_SEND);var e=cleverapps.bySource(cleverapps.config.rate.urls);void 0===e&&(e=cleverapps.config[cleverapps.User.calcSource()]&&cleverapps.config[cleverapps.User.calcSource()].url);var t=function(){e&&cc.sys.openURL(e)};NativeReview.isAvailable()?NativeReview.requestReview(function(e){cleverapps.eventLogger.logEvent("native_review_"+e),"ok"!==e&&t()}):cleverapps.social.requestReview?cleverapps.social.requestReview(function(e){cleverapps.eventLogger.logEvent(
"yandex_review_"+e),e||t()}):t()},createText:function(){var e=cleverapps.UI.generateTTFText("messages:RateWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT,{gameTitle:Messages.get(cleverapps.config.title)});return e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.setDimensions(this.styles.width,0),e},addFingerTip:function(e){var t,s=function(){this.runAction(new cc.Sequence(new cc.DelayTime(2.2),new cc.CallFunc(function(){this.stars.forEach(function(e,t){e.runAction(new cc.Sequence(new cc.DelayTime(.25*t),new cc.CallFunc(function(){e.turnOn()})))})}.bind(this))))}.bind(this);cc.sys.isNative&&(s(),t=function(){this.stars.forEach(function(e){e.turnOff()}),s()}.bind(this)),this.fingerTip=new FingerView,this.fingerTip.setPosition(e.getPosition()),e.parent.addChild(this.fingerTip),this.fingerTip.standardLoop({delay:2,delayOnBegin:!0,onIterationFinish:t})},onClose:function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.RATED,!0,{raw:!0}),
this.fingerTip&&this.fingerTip.removeFromParent(!0)}});RateWindow.CanRate=function(){return!cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.RATED,{raw:!0})&&(!cleverapps.social.canReview||cleverapps.social.canReview())},cleverapps.styles.RateWindow={width:650,margin:40,padding:{x:15,y:70},text:{height:180},button:{width:300,height:100},customizedContent:{width:650,height:300,marginY:100,person:{scale:1.5,offsetY:409}},starImage:bundles.game.frames.ratewindow_on},RateWindow.prototype.listBundles=function(){return["game"]},RateWindow.AVAILABLE={level:3,episode:1},"merge"===cleverapps.config.type&&(RateWindow.AVAILABLE={level:6,episode:0});var WindowHelper={animateCollect:function(s,t,e){if(e=cleverapps.once(e||function(){}),s&&s.parent&&t.target&&t.target.parent){s.replaceParentSamePlace(cc.director.getRunningScene());var n=function(){var e=t.target.parent.convertToWorldSpace(t.target);return t.targetDelta&&(e.x+=t.targetDelta.x,e.y+=t.targetDelta.y),e},i=n(),
o=t.height||cleverapps.styles.WindowHelper.second.y,a=cc.p((s.x+2*i.x)/3,(s.y+2*i.y)/3+o),r=cc.p((s.x+a.x)/2,(s.y+a.y)/2);s.runAction(new cc.Sequence(new cc.Spawn(new cc.BezierTo(.7,[r,a,i]).easing(cc.easeInOut(1)),new cc.ScaleTo(.7,t.scale)),new cc.CallFunc(function(){e(),t.noSound||cleverapps.audio.playSound(bundles.main.urls.collect_coins_effect),!1!==t.remove&&s.parent&&s.removeFromParent(!0)}))),[.175,.35,.7*.75].forEach(function(t){s.runAction(new cc.Sequence(new cc.DelayTime(t),new cc.CallFunc(function(){var e=n();s.runAction(new cc.MoveBy(.7-t,e.x-i.x,e.y-i.y)),i=e})))})}else e()}};cleverapps.styles.WindowHelper={second:{y:400}};var ConfirmExitWindow=Window.extend({onWindowLoaded:function(e){this.returnOnClose=e.onClose||function(){},this.onAction=e.onAction||function(){};var t=cleverapps.styles.ConfirmExitWindow,s=new cc.Node;s.setAnchorPoint(.5,.5),s.setContentSize2(t.width,t.height);var n=cleverapps.styles.FONTS.CONFIRM_AND_EXIT_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT,
i=e.text||"messages:AreYouSure";cleverapps.environment.isGameScene()&&"merge"!==cleverapps.config.type&&(cleverapps.lives&&(i="messages:ConfirmExitWindow.message"),e.game.level.episode.isBonusRound()&&(i="messages:ConfirmExitWindow.BonusRound.message"));var o=cleverapps.UI.generateOnlyText(i,n);if(o.setAnchorPoint2(),o.setDimensions(t.text.width,0),o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.text.height&&o.fitTo(0,t.text.height),e.reward){var a=new RewardsListComponent(e.reward,{font:n,margin:t.reward.margin});a.setAnchorPoint2()}var r,l=new cleverapps.Layout([a,o],{direction:cleverapps.UI.VERTICAL,margin:t.margin});l.setPositionRound(s.width/2+t.text.x,t.text.y),s.addChild(l),!1===t.breakView.upAnimation&&"undefined"!=typeof BreakView&&Game.currentGame&&cleverapps.environment.isGameScene()&&BreakView.AddBreakViews(s,[o],t.breakView.y),this._super({closeByBackButton:!0,title:"messages:ConfirmExitWindow.title",name:"confirmexitwindow",content:s,buttons:this.getButtons(),
closeButton:!1});var c=bundles.confirmexit_window.jsons.confirmexit_window_json;"tripeaks"===cleverapps.config.name&&(c=bundles.hero.jsons.hero_json),c&&((r=new cleverapps.Spine(c,t.animation.scale)).setAnimation(0,t.animation.onScene?"lose":"sad",!0),t.animation.onScene?(r.setPositionRound(t.animation.x,cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?t.animation.y-t.animation.verticalOffset:t.animation.y),this.addChild(r)):(r.setPositionRound(s.width/2+t.animation.x,s.height/2+t.animation.y),s.addChild(r))),!0===t.breakView.upAnimation&&"undefined"!=typeof BreakView&&Game.currentGame&&cleverapps.environment.isGameScene()&&BreakView.AddBreakViews(s,[r],t.breakView.y),cleverapps.audio.playSound(bundles.main.urls.window_effect)},getButtons:function(){var e=cleverapps.styles.ConfirmExitWindow,t=new cleverapps.UI.Button({button_png:e.playButton.image,button_on_png:e.playButton.imageOn,text:Messages.get("PlayOn"),onClicked:function(){this.close()}.bind(this),width:e.button.width,
height:e.button.height}),s=new cleverapps.UI.Button({button_png:e.exitButton.image?e.exitButton.image:bundles.buttons_main.frames.red_button,button_on_png:e.exitButton.image?e.exitButton.imageOn:bundles.buttons_main.frames.red_button_on,text:Messages.get("Exit"),font:e.exitButton.font||cleverapps.styles.FONTS.BUTTON_TEXT,onClicked:function(){this.closeAnimationCallbacks.push(this.onAction),this.close()}.bind(this),width:e.button.width,height:e.button.height});return e.exitButton.scale&&(s.setScale(e.exitButton.scale),s.baseScale=s.scale),[s,t]},onClose:function(){this.returnOnClose&&this.returnOnClose()},listBundles:function(){return["confirmexit_window"]}});cleverapps.styles.ConfirmExitWindow={width:650,height:550,margin:20,animation:{x:0,y:-10,scale:1},text:{x:0,y:60,width:500},exitButton:{scale:.9},playButton:{},button:{width:300,height:100},breakView:{upAnimation:!0,y:0},reward:{margin:100}};var NewLeagueWindow=Window.extend({onWindowLoaded:function(e){this.level=e,
cleverapps.eventLogger.logEvent(cleverapps.EVENTS.NEW_LEAGUE);var t=cleverapps.styles.NewLeagueWindow;if(this.content=new cc.Node,this.content.setAnchorPoint(.5,.5),this.content.setContentSize(t.width,t.height),this.addLeague(),this._super({title:"messages:NewLeagueWindow.Title",name:"newleaguewindow",content:this.content,closeButton:!1,buttons:this.getButtons(),shareCheckBox:this.getShareOptions()}),this.addChild(new Fireworks),cleverapps.audio.playSound(bundles.main.urls.window_effect),t.hero){var s=new HeroView(t.hero);this.addChild(s)}},addLeague:function(){var e=cleverapps.styles.NewLeagueWindow,t=levels.user.league,s=cleverapps.UI.generateTTFText("messages:NewLeagueWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT,{league:Messages.get("League"+t)});s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setPositionRound(this.content.width/2,e.text.y),s.setDimensions(this.content.width,0),this.content.addChild(s)},getButtons:function(){var e=cleverapps.styles.NewLeagueWindow.button,
t=[],s=new cleverapps.UI.Button({width:e.width,height:e.height,text:Messages.get("OK"),font:cleverapps.styles.FONTS.BUTTON_TEXT,onClicked:this.close.bind(this)});if(t.push(s),this.level.isRegular())var n=ShareBonusButton.create({window:this,shareBonus:cleverapps.ShareBonus.SHARES.newLeague,toReplace:{leagueId:levels.user.league,leagueName:Messages.get("League"+levels.user.league)}});return n&&t.push(n),t},getShareOptions:function(){return{shareId:cleverapps.ShareBonus.SHARES.newLeague.id,toReplace:{leagueId:levels.user.league,leagueName:Messages.get("League"+levels.user.league)}}}});cleverapps.styles.NewLeagueWindow={width:550,height:500,button:{width:280,height:110,y:-50},text:{y:170},buttonsMargin:25,share:{width:280,height:110,Text:{offsetX:0,offsetY:25},RewardText:{offsetX:-15,offsetY:-15},RewardCoins:{scale:.5,offsetX:40,offsetY:-18}}};var LeadersLoading=cc.Node.extend({ctor:function(){this._super();var e=cleverapps.styles.WaitWindow,t=this.loading=new cleverapps.Spine(
bundles.main.jsons.wait_json,1.5);if(t.setAnimation(0,"idle",!0),this.addChild(t),e.text){var s=this.loadingText=cleverapps.UI.generateTTFText(Messages.get("Loading")||"Loading",cleverapps.styles.FONTS.WINDOW_TEXT);s.setPosition(0,e.text.y),this.addChild(s)}},remove:function(){this.loading.runAction(new cc.RemoveSelf),this.loadingText&&this.loadingText.removeFromParent()}}),LeadersWindow=Window.extend({onWindowLoaded:function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEADERS_WINDOW_OPEN),this.content=new cc.Node,this.content.setAnchorPoint2(),this.content.setContentSize(cleverapps.styles.LeadersWindow.width,cleverapps.styles.LeadersWindow.height);var e=cleverapps.overrideStyles(cleverapps.clone(cleverapps.styles.Window,!0),cleverapps.styles.LeadersWindow.window);this._super.call(this,{name:"leaderswindow",content:this.content,title:{text:"messages:LeadersWindowTitle"},styles:e}),this.addButtons(),this.tabs.activateTab(LeadersWindow.TABS.GLOBAL),cleverapps.audio.playSound(
bundles.main.urls.window_effect)},addButtons:function(){var e=cleverapps.styles.LeadersWindow.tabs,t={};t[LeadersWindow.TABS.GLOBAL]={icon:bundles.main.frames.global_icon,generator:this.generateWorldContent.bind(this),scale:e.scale},cleverapps.flags.nologin||(t[LeadersWindow.TABS.FRIENDS]={icon:bundles.main.frames.friends_icon,generator:this.generateFriendsContent.bind(this),scale:e.scale,mirrorX:e.mirrorX}),this.tabs=new Tabs(t,e),this.tabs.setPositionRound(e),this.tabs.setLocalZOrder(e.zOrder),this.window.addChild(this.tabs)},addTableHead:function(e){var t=cleverapps.styles.LeadersWindow.table,s=new cc.Node;s.setContentSize2(cleverapps.styles.LeadersWindow.player.width,t.head.height),s.setAnchorPoint2(),s.setPositionRound(e.width/2,t.head.y),e.addChild(s);var n=cleverapps.UI.generateTTFText("messages:LeadersWindow.rank",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);n.setPositionRound(t.rank.x,s.height/2),s.addChild(n);var i=cleverapps.UI.generateTTFText("messages:LeadersWindow.player",
cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);i.setPositionRound(t.player.x,s.height/2),s.addChild(i);var o=cleverapps.UI.generateTTFText("messages:LeadersWindow.rating",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);o.setPositionRound(t.rating.x,s.height/2),s.addChild(o)},generateWorldContent:function(){var e=cleverapps.styles.LeadersWindow.worldContent;this.worldContent=new cc.Node,this.worldContent.setAnchorPoint2(),this.worldContent.setContentSize(e.width,e.height),this.worldContent.setPosition(this.content.width/2+e.left,this.content.height/2+e.top),this.content.addChild(this.worldContent),this.addTableHead(this.worldContent);var n=new LeadersLoading;n.setPosition(this.worldContent.width/2,this.worldContent.height/2),this.worldContent.addChild(n),n.setVisible(!1),n.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.CallFunc(function(){n.setVisible(!0)}))),1<this.getAmountLeagues()&&(this.decLeagueButton=new cleverapps.UI.Button({button_png:e.arrow.image,button_on_png:e.arrow.image,
onClicked:this.decLeague.bind(this),clickThrottle:1,onMouseOver:function(){this.decLeagueButton.setScale(-1.05,1.05)}.bind(this),onMouseOut:function(){this.decLeagueButton.setScale(-1,1)}.bind(this)}),this.decLeagueButton.setPosition(this.worldContent.width/2-e.arrow.x,this.worldContent.height+e.arrow.y),this.decLeagueButton.setScaleX(-1),this.decLeagueButton.setLocalZOrder(1),this.worldContent.addChild(this.decLeagueButton),this.incLeagueButton=new cleverapps.UI.Button({button_png:e.arrow.image,button_on_png:e.arrow.image,onClicked:this.incLeague.bind(this),clickThrottle:1}),this.incLeagueButton.setPosition(this.worldContent.width/2+e.arrow.x,this.worldContent.height+e.arrow.y),this.incLeagueButton.setLocalZOrder(1),this.worldContent.addChild(this.incLeagueButton)),this.currentLeague=levels.user.league,this.generateWorldHead(levels.user.league);var t=this.createListener(cleverapps.timeredThrottle(300,function(t){n.remove(),this.leaguesLeaders={};for(var s=0;s<t.length;s++
)this.leaguesLeaders[t[s].leagueId]=JSON.parse(t[s].data),this.leaguesLeaders[t[s].leagueId].forEach(function(e){e.league=t[s].leagueId});for(s=0;s<this.getAmountLeagues();s++)this.leaguesLeaders[s]||(this.leaguesLeaders[s]=[]);this.generateWorldHead(levels.user.league),this.generateWorldLeague(levels.user.league)}.bind(this),Date.now())),s="/leaders/"+cleverapps.settings.language+"/";return cleverapps.config.debugMode&&(s="https://wordsoup.labsystech.ru/wordsoup-rest"+s),cleverapps.RestClient.get(s,{},t,function(){cleverapps.Notification.create("messages:LeadersLoadFailed")}),this.worldContent.onSelectTab=function(){this.updateTitle()}.bind(this),this.worldContent},decLeague:function(){0<this.currentLeague&&(this.currentLeague--,this.generateWorldHead(),this.generateWorldLeague(),this.updateTitle())},incLeague:function(){this.currentLeague<this.getAmountLeagues()-1&&(this.currentLeague++,this.generateWorldHead(),this.generateWorldLeague(),this.updateTitle())},
getAmountLeagues:function(){var e=1;return cleverapps.config.leagues&&(e=cleverapps.config.leagues.length),e},generateWorldHead:function(){this.decLeagueButton&&(this.decLeagueButton.visible=this.leaguesLeaders&&0<this.currentLeague),this.incLeagueButton&&(this.incLeagueButton.visible=this.leaguesLeaders&&this.currentLeague<this.getAmountLeagues()-1)},updateTitle:function(){this.window&&this.setTitle("messages:League"+this.currentLeague)},generateWorldLeague:function(){var e=this.currentLeague,t=this.leaguesLeaders[e];for(this.removePlayerFromTop(t),levels.user.league===e&&this.addPlayerToTop(t);t.length>LeadersWindow.TOP_LIMIT&&t[t.length-1].id!==levels.user.id;)t.pop();var s=function(){this.leagueTop&&(this.leagueTop.removeFromParent(),delete this.leagueTop)}.bind(this);s(),this.runAction(new cc.Sequence(new cc.DelayTime(.01),new cc.CallFunc(function(){e===this.currentLeague&&(s(),this.leagueTop=this.generateTop(t,this.worldContent),this.worldContent.addChild(this.leagueTop))}.bind(
this))))},removePlayerFromTop:function(e){for(var t=0;t<e.length;t++)if(e[t].id===levels.user.id){e.splice(t,1);break}},addPlayerToTop:function(e){e.push({id:levels.user.id,rating:levels.user.getVirtualLevel(),name:cleverapps.friends.getPlayer().name,avatar:cleverapps.friends.getPlayer().avatar,you:!0,league:levels.user.league}),e.sort(function(e,t){return e.rating===t.rating?e.id===levels.user.id?-1:t.id===levels.user.id?1:0:t.rating-e.rating})},generateTop:function(e,t){for(var s=[],n=0;n<e.length;n++){var i={text:e[n].name,place:n+1,id:e[n].id,avatar:{id:e[n].id,avatar:e[n].avatar},player:e[n].id===levels.user.id,amount:e[n].rating};s.push(i)}cleverapps.leadersWindowTable.resetResults("leadersWindow");var o=cleverapps.leadersWindowTable.createTableView({id:"leadersWindow",data:s,rowConstructor:cleverapps.LeadersRow,options:{styles:{width:cleverapps.styles.LeadersRow.size.width}}}),a=cleverapps.styles.LeadersWindow;return o.setPositionRound(a.table.x,a.table.y,t),o},
generateFriendsContent:function(){var e=cleverapps.styles.LeadersWindow.friendsContent;this.friendsContent=new cc.Node,this.friendsContent.setAnchorPoint2(),this.friendsContent.setContentSize(e.width,e.height),this.friendsContent.setPosition(this.content.width/2+e.left,this.content.height/2+e.top);var t=levels.progress.getLeaders();if(0<t.length){this.addPlayerToTop(t),this.addTableHead(this.friendsContent);var s=this.generateTop(t,this.friendsContent);this.friendsContent.addChild(s)}else{e=e.noFriends;var n=cleverapps.UI.generateTTFText("messages:noFriendsInLeadersText",cleverapps.styles.FONTS.WINDOW_TEXT);n.setPositionRound(this.friendsContent.width/2,this.friendsContent.height/2+e.Text.y),n.setDimensions(e.Text.width,e.Text.height),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.friendsContent.addChild(n);var i=new cleverapps.UI.Button({text:Messages.get("SettingsWindow.InviteFriends"),width:e.Button.width,height:e.Button.height,font:cleverapps.styles.FONTS.BUTTON_TEXT,
padding:e.Button.padding,onClicked:function(){cleverapps.social.inviteFriendsWindow(function(){}.bind(this))}.bind(this)});i.setPositionRound(this.friendsContent.width/2,this.friendsContent.height/2+e.Button.y),this.friendsContent.addChild(i)}return this.content.addChild(this.friendsContent),this.friendsContent.onSelectTab=function(){this.setTitle("messages:FriendsTopName")}.bind(this),this.friendsContent}});LeadersWindow.TABS={},LeadersWindow.TABS.GLOBAL=0,LeadersWindow.TABS.FRIENDS=1,LeadersWindow.prototype.listBundles=function(){return"match3"===cleverapps.config.type?["game"]:[]},cleverapps.styles.LeadersWindow={width:524,height:770,player:{height:78,width:660,margin:20,name:{width:200,height:70},avatar:{scale:.8},place:{dy:0},rating:{dy:0}},head:{y:924},table:{x:{align:"center"},y:{align:"center"},head:{y:805,height:40},rank:{x:80},player:{x:300},rating:{x:550}},friendsContent:{width:600,height:782,left:0,top:-100,noFriends:{Text:{y:100,width:400,height:200},Button:{width:300,
height:100,padding:{x:0},y:0}}},worldContent:{width:600,height:782,left:0,top:-100,arrow:{image:bundles.main.frames.league_arrow_png,x:286,y:0}},window:{decors:{}},tabs:{x:{align:"right",dx:0},y:{align:"bottom",dy:0},scale:.8,zOrder:0}},LeadersWindow.TOP_LIMIT=100,cleverapps.Promotion=function(){cleverapps.config.debugMode&&(cleverapps.Promotion.SINCE_START="10 seconds");var e=this.load();this.createdTime=Date.now(),e?this.processed=e.processed:this.reset()},cleverapps.Promotion.prototype.reset=function(){this.processed=[],this.save()},cleverapps.Promotion.prototype.getFirstAvailable=function(){var s=cleverapps.User.calcSource(),n=void 0;return this.getPromotions().forEach(function(e,t){!n&&-1===this.processed.indexOf(e.id)&&e.sources[s]&&(n=e)},this),void 0!==n?n:0<this.processed.length?(this.processed=[],this.save(),this.getFirstAvailable()):void 0},cleverapps.Promotion.prototype.listAvailablePromotions=function(){return["mergecraft","magicwords","scramble","tripeaks","olympics",
"crocword","wordsoup","riddles","heroes","adventure","differences","runes"].filter(function(e){return e!==cleverapps.config.name&&cleverapps.projectLinks[e]})},cleverapps.Promotion.prototype.getPromotions=function(){var o={gameName:cleverapps.config.name};return this.listAvailablePromotions().map(function(e){var t="promotion_"+e+"_"+cleverapps.settings.language,s="promotion_"+e+"_"+cc.sys.LANGUAGE_ENGLISH,n={id:e,title:"messages:"+e+"PromoTitle",description:"messages:"+e+"Promo",bundleName:bundles[t]?t:s,sources:{}};for(var i in cleverapps.projectLinks[e])n.sources[i]=cleverapps.projectLinks[e][i],"facebook"===i&&(n.sources[i]+=Messages.replace("?channel=%{gameName}",o)),"android"===i&&(n.sources[i]+=Messages.replace("&utm_source=%{gameName}",o));return n})},cleverapps.Promotion.prototype.isReady=function(){return!!cleverapps.user.checkAvailable(cleverapps.Promotion.AVAILABLE)&&(!(this.createdTime+cleverapps.parseInterval(cleverapps.Promotion.SINCE_START)>=Date.now()
)&&void 0!==this.getFirstAvailable())},cleverapps.Promotion.prototype.setProcessed=function(e){this.processed.push(e.id),this.save()},cleverapps.Promotion.prototype.load=function(){return cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.PROMOTION)},cleverapps.Promotion.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.PROMOTION,{processed:this.processed})},cleverapps.Promotion.ShowFirstAvailable=function(){var e=cleverapps.promotion.getFirstAvailable();new PromotionWindow(e)},cleverapps.Promotion.BONUS=10,cleverapps.Promotion.SINCE_START="10 seconds",cleverapps.Promotion.AVAILABLE={episode:1,level:10};var PromotionWindow=Window.extend({onWindowLoaded:function(e){this.promotion=e,cleverapps.eventLogger.logEvent("promo_show_"+this.promotion.id),cleverapps.promotion.setProcessed(this.promotion);var t=cleverapps.styles.PromotionWindow,s=new cc.Node;s.setAnchorPoint(.5,.5);var n=cleverapps.UI.generateOnlyText(e.description,
cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);n.setDimensions(t.text.width,0),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.addChild(n);var i=new cc.Sprite(bundles[e.bundleName].urls.image);s.addChild(i),cleverapps.UI.onClick(i,this.onPressed.bind(this)),cleverapps.UI.arrangeWithMargins(s.children,{margin:t.text.margin}),cleverapps.UI.wrap(s);var o=cleverapps.UI.wrapWithPadding(s,{x:0,y:t.margin});this._super({title:e.title,name:"promotionwindow",content:o,styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.PromotionWindow,!0),button:{width:t.Button.width,height:t.Button.height,content:this.getButtonContent(),contentOffset:t.Button.contentOffset,onPressed:this.onPressed.bind(this)}}),cleverapps.audio.playSound(bundles.main.urls.window_effect)},isRewardAvailable:function(){return!cleverapps.MobileVk.isAppropriate()},onPressed:function(){var e=cleverapps.User.calcSource(),t=this.promotion.sources[e];"instant"!==e?cc.sys.openURL(t):FBInstant.switchGameAsync(t,{
channel:cleverapps.config.name}).catch(function(e){console.log("FBInstant.switchGameAsync error",e);var t="USER_INPUT"===e.code?"cancel":"error";cleverapps.eventLogger.logEvent("promo_"+t+"_"+this.promotion.id),"error"===t&&cleverapps.eventLogger.logEvent("promo_error_"+cleverapps.config.platform)}.bind(this)),cleverapps.eventLogger.logEvent("promo_"+this.promotion.id),this.isRewardAvailable()&&(levels.user.setGold(levels.user.gold+cleverapps.Promotion.BONUS),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.REWARD_RECEIVED,{amount:cleverapps.Promotion.BONUS})),this.close()},getButtonContent:function(){var e=cleverapps.styles.PromotionWindow.Button,t=new cc.Sprite(bundles.menubar.frames.coin_png);t.setScale(e.scale),e.coinsOffsetY&&t.setPositionY(e.coinsOffsetY);var s=[];if(this.isRewardAvailable()){var n=cleverapps.UI.generateImageText("+"+cleverapps.Promotion.BONUS,cleverapps.styles.FONTS.PROMOTION_BUTTON_TEXT),i=new cleverapps.Layout([n,t],{direction:cleverapps.UI.HORIZONTAL,
margin:e.bottom.margin});s.push(i)}var o=cleverapps.UI.generateOnlyText("messages:Play",cleverapps.styles.FONTS.PROMOTION_BUTTON_TEXT);s.push(o);var a=new cleverapps.Layout(s,{direction:cleverapps.UI.VERTICAL,margin:e.margin});return a.coin=t,a},listBundles:function(e){return[e.bundleName]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{PROMOTION_BUTTON_TEXT:{name:"default",size:55,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.PromotionWindow={margin:100,text:{width:620,margin:20},Button:{width:300,height:160,scale:.9,margin:0,contentOffset:{y:0},bottom:{margin:10}}};var Decors=function(s,n){if(n=n||{},this.styles=n,this.decors={},this.parent=s,cleverapps.styles.Decorators){var e=Object.keys(n).filter(function(e){if(!0!==n[e])return!1;var t=cleverapps.styles.Decorators[e];if(!t)return!1;if(t.lovesBackground&&!s.withBg)return!1;if(t.lovesBackgroundAndForeground&&!s.withBg&&!s.foreground)return!1;if(
t.fearHigh&&s.window&&.8<s.window.height*s.window.scale/cleverapps.styles.SCENE_HEIGHT)return!1;return!t.titleDecorator});this.init(e)}};Decors.prototype.add=function(e){var t=cleverapps.styles.Decorators[e];if(t){var s;switch(t.type){case Decors.TYPE_IMAGE:s=this.addImage(t);break;case Decors.TYPE_ANIMATION:s=this.addAnimation(t);break;case Decors.TYPE_SCALE9:s=this.addScale9(t);break;case Decors.TYPE_REPEATABLE:s=this.addPattern(t)}if(s){var n=this.getPos(t);return this.getParent(t).addChild(s),s.setPositionRound(n.x,n.y),this.decors[e]=s}}},Decors.prototype.init=function(e){e.forEach(this.add,this)},Decors.prototype.initTitleDecorators=function(){var e=Object.keys(this.styles).filter(function(e){return!0===this.styles[e]&&cleverapps.styles.Decorators[e]&&cleverapps.styles.Decorators[e].titleDecorator}.bind(this));this.init(e)},Decors.prototype.getDecorById=function(e){if(this.decors[e])return this.decors[e]},Decors.prototype.setVisible=function(e,t){var s=this.getDecorById(e)
;return!!s&&(t||s.stopAllActions(),s.setVisible(t),!0)},Decors.prototype.getParent=function(e){return e.titleDecorator?this.parent.titleBg:e.lovesBackgroundAndForeground&&(this.parent.foreground||this.parent.bg)?this.parent.foreground||this.parent.bg:this.parent.window},Decors.prototype.addScale9=function(e){var t=cleverapps.UI.createScale9Sprite(bundles.main.frames[e.image]||e.image);return t.setContentSize2(e.width,e.height),Array.isArray(e.scale)?t.setScale(e.scale[cleverapps.wideMode.mode]):t.setScale(e.scale),t.baseScale=t.scale,t.setLocalZOrder(e.zOrder),void 0!==e.rotation&&t.setRotation(e.rotation),t},Decors.prototype.addImage=function(e){var t=new cc.Sprite(bundles.main.frames[e.image]||e.image),s=e.scale;return Array.isArray(s)&&(s=s[cleverapps.wideMode.mode]),"number"==typeof s?t.scale=s:(t.scaleX=s.x,t.scaleY=s.y),t.baseScale=Math.abs(t.scaleX),t.baseScaleX=t.scaleX,t.baseScaleY=t.scaleY,t.setLocalZOrder(e.zOrder),void 0!==e.rotation&&t.setRotation(e.rotation),t},
Decors.prototype.addAnimation=function(e){var t=bundles.main.jsons[e.json]||e.json,s=new cleverapps.Spine(t);e.scale&&(e.scale.x?s.setScale(e.scale.x,e.scale.y):s.setScale(e.scale));var n=void 0===e.looped||e.looped;return s.setLocalZOrder(e.zOrder),s.setVisible(!0),void 0!==e.delay?s.runAction(new cc.Sequence(new cc.DelayTime(e.delay),new cc.CallFunc(function(){s.setAnimation(0,e.animation,n)}))):s.setAnimation(0,e.animation,n),s},Decors.prototype.addPattern=function(e){var t,s,n,i=bundles.main.frames[e.image]||e.image,o=this.getParent(e);e.direction===cleverapps.UI.HORIZONTAL?(t=Math.ceil(o.width/e.step)-1,s=e.step,n=0):(t=Math.ceil(o.height/e.step)-1,s=0,n=e.step);var a=new cc.Node;a.setAnchorPoint2(),a.setLocalZOrder(e.zOrder||0);for(var r=0;r<t;++r){var l=new cc.Sprite(i);l.setAnchorPoint2(),l.setPositionRound(r*s,-r*n),a.addChild(l)}return a},Decors.prototype.getPos=function(e){return e.position&&Array.isArray(e.position)?e.position[cleverapps.wideMode.mode]:cc.p(e.x,e.y)},
Decors.prototype.updateAll=function(){for(var e in this.decors){var t=this.decors[e],s=cleverapps.styles.Decorators[e],n=this.getPos(s);t.setPositionRound(n.x,n.y)}},Decors.TYPE_IMAGE=0,Decors.TYPE_ANIMATION=1,Decors.TYPE_SCALE9=2,Decors.TYPE_REPEATABLE=3;var RulesWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.overrideStyles(cleverapps.styles.RulesWindow,e.styles,!0),s=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(t.animation.width,t.animation.height);var n=new cleverapps.Spine(t.animation.json);n.setAnimation(0,t.animation.name,!0),n.setScale(t.animation.scale),n.setPositionRound(s.width/2+t.animation.x,s.height/2+t.animation.y),s.addChild(n);var i=t.font||cleverapps.styles.FONTS.WINDOW_SMALL_TEXT,o=cleverapps.UI.generateTTFText(t.prefix+"text3",i);o.setDimensions(t.subText.width,0),o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.addChild(o),o.setPositionRound(t.subText.left.x,t.subText.left.y);var a=cleverapps.UI.generateTTFText(t.prefix+"text4",i)
;a.setDimensions(t.subText.width,0),a.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.addChild(a),a.setPositionRound(t.subText.right.x,t.subText.right.y);var r=cleverapps.UI.generateTTFText(t.prefix+"text1",i);r.setDimensions(t.text.width,0),r.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.addChild(r),r.setPositionRound(t.subText.bottom.x,t.subText.bottom.y);var l=cleverapps.UI.generateTTFText(t.prefix+"text2",cleverapps.styles.FONTS.RULES_WINDOW_TEXT||t.text.font);l.setDimensions(t.text.width,0),l.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),l.fitTo(void 0,t.text.height),l.setAnchorPoint2();var c=this.content=new cc.Node;c.addChild(l),c.addChild(s),cleverapps.UI.arrangeWithMargins(c.children,{margin:t.margin,y:t.paddingY}),cleverapps.UI.wrap(c),c.setAnchorPoint2(),this._super({title:t.prefix+"Title",name:e.name,content:c,bgOffset:t.bgOffset,button:{width:t.button.width,height:t.button.height,text:e.buttonText||Messages.get("OK"),onPressed:this.onPressed.bind(this)}})},
onPressed:function(){this.close()},listBundles:function(e){return e&&e.bundles||[]}});cleverapps.styles.RulesWindow={width:600,height:800,margin:30,textMargin:30,paddingY:40,animation:{scale:.95,width:600,height:670,y:-85,x:0,name:"animation"},subText:{width:190,left:{x:{align:"left",dx:20},y:{align:"right",dy:-180}},right:{x:{align:"right",dx:55},y:{align:"right",dy:-220}},bottom:{x:{align:"center",dx:0},y:{align:"left",dy:0}}},text:{width:640,height:300,font:cleverapps.styles.FONTS.WINDOW_TEXT},button:{width:250,height:100}};var BoostersSaleWindow=Window.extend({onWindowLoaded:function(e){this.mission=e,this.mission.logic.onRewardListener=this.createListener(this.giveReward.bind(this)),this._super({content:this.getContent(),title:{text:"messages:BoostersSaleWindow.title",font:cleverapps.styles.FONTS.BOOSTERS_SALE_WINDOW_TITLE_TEXT},name:"boosterssalewindow",windowBg:bundles.boosters_sale.frames.window_bg_png,styles:cleverapps.overrideStyles(cleverapps.styles.Window,this.getStyles(
).window,!0)}),this.addBadge(),this.addBalloons(),this.addRibbonTitle(),this.addProgressBar(),this.addRepeatablePattern(),this.addDescriptionText(),this.addHeroAnimation(),this.text.width>this.window.width&&this.text.setScale(this.window.width/this.text.width),cleverapps.audio.playSound(bundles.main.urls.sale_window_effect)},getStyles:function(){return cleverapps.styles.BoostersSaleWindow},createWinStreakBar:function(){var e=cleverapps.styles.BoostersSaleWindow.progressBar,t=cleverapps.UI.createScale9Sprite(bundles.boosters_sale.frames.boosterssale_streak_bar_bg);t.setLocalZOrder(1),e.width&&t.setContentSize2(e.width,t.height);var s=this.winStreakBar=new ScaledProgressBar(bundles.boosters_sale.frames.boosterssale_streak_bar);if(s.setDimension(e.bar.width||t.width,e.bar.height||t.height),s.setPosition(e.bar.x,e.bar.y),t.addChild(s),s.setLocalZOrder(e.bar.zOrder),e.bar.lines){var n=new cc.Sprite(bundles.boosters_sale.frames.boosterssale_streak_bar_line);n.setAnchorPoint2(),n.setPosition(
t.width/2,t.height/2),t.addChild(n)}return t},updateBoughtAmountText:function(){this.boughtAmountText&&this.boughtAmountText.setString(this.mission.result+"/5")},addProgressBar:function(){var e=this.getStyles();this.progressBarText=cleverapps.UI.generateTTFText("messages:BoostersSaleWindow.progressBarText",cleverapps.styles.FONTS.BOOSTERS_SALE_PROGRESS_BAR_TEXT||cleverapps.styles.FONTS.WHITE_TEXT),this.progressBarText.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.progressBarText.setDimensions(e.progressBar.text.width,0),this.progressBarText.fitTo(0,e.progressBar.text.height);var t=this.createWinStreakBar();this.winStreakBar.setPercentage(20*this.mission.result);var s=this.prizeNode=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(e.progressBar.prize),s.setScale(e.progressBar.prize.scale);var n=this.prizeAnimation=new cleverapps.Spine(e.progressBar.prize.animation.json);n.setAnimation(0,"green_idle_closed",!0),s.addChild(n),n.setPositionRound(e.progressBar.prize),
cleverapps.tooltipManager.create(s,{rewards:this.mission.prize,text:Messages.get("TreasureSearch.prizeTooltip"),size:e.tooltip.size,position:e.tooltip});var i=new cleverapps.Layout([t,this.progressBarText],{direction:cleverapps.UI.VERTICAL,margin:e.progressBar.textMargin});if(e.progressBar.amount){var o=this.boughtAmountText=cleverapps.UI.generateTTFText(this.mission.result+"/5",cleverapps.styles.FONTS.BOOSTERS_SALE_PROGRESS_BAR_AMOUNT_TEXT||cleverapps.styles.FONTS.WHITE_TEXT);t.addChild(o),o.setPositionRound(e.progressBar.amount)}var a=new cleverapps.Layout([i,s],{direction:cleverapps.UI.HORIZONTAL,margin:e.progressBar.prizeMargin});this.progressBarLayout=a,this.window.addChild(a);var r=e.progressBar.insideWindow?1:-1;a.setPositionRound({x:{align:"center",dx:e.progressBar.dx},y:{align:"bottom",dy:r*(a.height/2+e.progressBar.marginY)}}),e.progressBar.scale&&a.setScale(e.progressBar.scale[cleverapps.wideMode.mode])},addRibbonTitle:function(){var e=this.getStyles().title;if(e.ribbonTitle
){var t=cleverapps.UI.createScale9Sprite(bundles.main.frames.ribbon,cleverapps.UI.Scale9Rect.TwoPixelXY);this.window.addChild(t),t.setAnchorPoint2();var s=e.ribbonTitle.width;this.window.titleText.width+2*e.ribbonTitle.offsetX>s&&(s=this.window.titleText.width+2*e.ribbonTitle.offsetX),t.setContentSize2(s,e.ribbonTitle.height),t.setPositionRound(this.window.titleText.x,this.window.titleText.y+e.ribbonTitle.y),t.setLocalZOrder(this.window.titleText.getLocalZOrder()-1)}},addBadge:function(){var e=this.getStyles().badge;if(e){var t=new cc.Sprite(bundles.boosters_sale.frames.badge_png),s=cleverapps.UI.generateTTFText("messages:BoostersSaleWindow.badge.text",cleverapps.styles.FONTS.TILE_SHOP_BADGE_TEXT),n=cleverapps.UI.generateTTFText("90%",cleverapps.styles.FONTS.TILE_SHOP_BADGE_TEXT);t.setScale(e.scale),n.setScale(1.2);var i=new cleverapps.Layout([n,s],{direction:cleverapps.UI.VERTICAL,margin:e.margin});i.setRotation(e.rotation),t.addChild(i),i.setPositionRound(t.width/2,t.height/2),
this.window.addChild(t),t.setPositionRound(e),t.setLocalZOrder(10)}},addBalloons:function(){this.getStyles().balloons.forEach(function(e){var t=new cleverapps.Spine(bundles.boosters_sale.jsons.balloon_json);t.setScaleX(e.scale),t.setAnimation(0,"animation",!0),this.window.addChild(t),t.setPositionRound(this.window.width/2+e.x,this.window.height+e.y),t.setLocalZOrder(-1)}.bind(this))},addRepeatablePattern:function(){},addDescriptionText:function(){var e=cleverapps.styles.BoostersSaleWindow,t=cleverapps.UI.generateTTFText("messages:BoostersSaleWindow.descriptionText",cleverapps.styles.FONTS.BOOSTERS_SALE_DESCRIPTION_TEXT||cleverapps.styles.FONTS.WHITE_TEXT,{purchasesCount:BoostersSaleWindow.PURCHASES_TO_PRIZE});t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setDimensions(e.progressBar.descriptionText.width[cleverapps.wideMode.mode]*resolutionScale,0),t.fitTo(void 0,e.progressBar.descriptionText.height),e.progressBar.insideWindow?this.window.addChild(t
):this.progressBarLayout.addChild(t),t.setPositionRound({x:{align:"center"},y:{align:"bottom",dy:-t.height/2-e.progressBar.descriptionText.marginY}})},addHeroAnimation:function(){var e=cleverapps.styles.BoostersSaleWindow;if(e.heroAnimation){var t="idle";"tripeaks"===cleverapps.config.name&&(t="starterpack_800");var s=new cleverapps.Spine(bundles.hero.jsons.hero_json);s.setAnimation(0,t,!0),s.setPositionRound(e.heroAnimation.position[cleverapps.wideMode.mode]),s.setScale(e.heroAnimation.scale[cleverapps.wideMode.mode]),this.addChild(s)}},calcOldPrice:function(e){return cleverapps.payments.calcLoadedPrice?cleverapps.payments.calcLoadedPrice(e):Product.CURRENCY+" "+e},createIconsLayout:function(e){for(var t=bundles.boosters_sale.frames[e.icon]||bundles.reward_icons.frames[e.icon]||bundles.tile_shop.frames[e.icon]||bundles.main.frames[e.icon],s=this.getStyles(),n=[],i=0;i<5;i++){var o=new cc.Node;o.setAnchorPoint2(),o.setContentSize2(s.icons);var a=new cc.Sprite(t);o.addChild(a),
a.setRotation(s.icons.rotation),a.setScale(s.icons.scale||Math.min(o.width/a.width,o.height/a.height)),a.setLocalZOrder(-i),a.setPositionRound(o.width/2,o.height/2),n.push(o)}return new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:s.icons.margins[cleverapps.wideMode.mode].margin})},getContent:function(){var b=this.getStyles(),w=[];this.mission.logic.listProducts(this.mission).forEach(function(e){var t,s=Product.Create(e),n=this.createIconsLayout(s);if(-1!==["cellPack2","linePack3","colorPack4"].indexOf(e)){var i;(i=new cc.Node).setAnchorPoint2();var o=n.width/10,a=n.height/3;i.setContentSize2(n.width+o,n.height+a/3);var r=this.createIconsLayout(s);n.setPositionRound(i.width/2+o/2,i.height/2+a/2),r.setPositionRound(i.width/2-o/2,i.height/2-a/2),i.addChild(n),i.addChild(r)}else i=n;b.icons.bg?(t=new cc.Scale9Sprite(b.icons.bg),b.icons.bgColor&&t.setColor(b.icons.bgColor)):(t=new cc.Node).setAnchorPoint2(),t.setContentSize2(i.width+2*b.icons.padding.x,
i.height+2*b.icons.padding.y),t.addChild(i);var l=b.icons.offset;b.icons.offsetByType[this.mission.type]&&(l=b.icons.offsetByType[this.mission.type]),i.setPositionRound(t.width/2+l.x,t.height/2+l.y);var c=cleverapps.UI.generateOnlyText(s.label,cleverapps.styles.FONTS.BOOSTERS_SALE_AMOUNT_TEXT);if(b.labelBg){var p=new cc.Scale9Sprite(bundles.boosters_sale.frames.label_bg_png);p.setContentSize2(c.width+2*b.labelBg.padding.x,c.height+2*b.labelBg.padding.y),p.addChild(c),t.addChild(p),c.setPositionRound(p.width/2,p.height/2+b.labelBg.text.dy),p.setPositionRound(b.label)}else t.addChild(c),c.setPositionRound(b.label);var d=cleverapps.UI.generateTTFText(Messages.get("BoostersSaleWindow.oldPrice"),cleverapps.styles.FONTS.BOOSTERS_SALE_PRICE_TEXT);d.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),d.fitTo(b.oldPriceText.width);var u=cleverapps.UI.generateTTFText(this.calcOldPrice(s.oldPrice),cleverapps.styles.FONTS.BOOSTERS_SALE_TEXT);u.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),u.fitTo(
b.oldPriceText.price.width);var h=new cleverapps.Layout([d,u],{direction:cleverapps.UI.HORIZONTAL,margin:b.oldPriceText.margin});d.setPositionRound({y:{align:"bottom"},x:d.x});var g=new cc.Node;g.setAnchorPoint2(),g.setContentSize2(b.oldPriceText.width+b.oldPriceText.price.width,b.oldPriceText.height),g.addChild(h),h.setPositionRound(g.width/2,g.height/2);var v=new cleverapps.UI.Button({content:new ProductPriceView(s,{font:cleverapps.styles.FONTS.BOOSTERS_SALE_WINDOW_BUTTON_TEXT||cleverapps.styles.FONTS.BUTTON_TEXT}),onClicked:function(){this.mission.completed||s.buy(function(){this.mission.update(1),this.winStreakBar.setPercentage(20*this.mission.result),this.updateBoughtAmountText()}.bind(this))}.bind(this),width:b.button.width,height:b.button.height,button_on_png:bundles.buttons_main.frames.small_green_button_on,button_png:bundles.buttons_main.frames.small_green_button});Lottery.addIcon(v);var m=new cleverapps.Layout([v,g],{direction:cleverapps.UI.VERTICAL,margin:b.button.margin,
y:b.button.y}),f=new cleverapps.Layout([t,m],{direction:cleverapps.UI.HORIZONTAL,margin:b.colMargin,padding:b.row.padding[cleverapps.wideMode.mode]}),_=new cc.Scale9Sprite(bundles.boosters_sale.frames.row_bg_png||b.row.bg);if(_.setContentSize2(f.getContentSize()),b.row.innerBg){var y=new cc.Scale9Sprite(b.row.innerBg.image);y.setContentSize2(_.width-2*b.row.innerBg.padding.x,_.height-2*b.row.innerBg.padding.y),_.addChild(y),y.setPositionRound(_.width/2,_.height/2)}_.addChild(f),f.setPositionRound(_.width/2,_.height/2),w.push(_)}.bind(this));var t=0;w.forEach(function(e){t=Math.max(t,e.getContentSize().width)}),w.forEach(function(e){e.setContentSize2(t,e.getContentSize().height)});var e=this.createText(),s=new cleverapps.Layout(w,{direction:cleverapps.UI.VERTICAL,margin:b.rowMargin});return new cleverapps.Layout([s,e],{direction:cleverapps.UI.VERTICAL,margin:b.margin})},openRewardWindow:function(){new RewardWindow({reward:this.mission.logic.reward})},giveReward:function(){
this.winStreakBar.animatedChange(20),this.updateBoughtAmountText(),this.prizeAnimation.setCompleteListener(this.close.bind(this)),this.prizeAnimation.setAnimation(0,"green_open",!1),this.prizeNode.setLocalZOrder(20),this.prizeNode.replaceParentSamePlace(this);var e=this.prizeNode.getPosition(),t=cc.p(this.width/2,this.height/2),s=cc.p((e.x+t.x)/2,2*(t.y-e.y));this.prizeNode.runAction(new cc.BezierTo(.5,[e,s,t]))},onClose:function(){this.mission.logic.reward&&this.openRewardWindow()},createText:function(){var e=this.getStyles(),t=cleverapps.UI.generateTTFText("messages:BoostersSaleWindow.textTop",cleverapps.styles.FONTS.BOOSTERS_SALE_TOP_TEXT);t.setDimensions(e.textTop.width,0),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var s=[];if(Messages.has("messages:BoostersSaleWindow.textLeft."+this.mission.type)){var n=cleverapps.UI.generateTTFText("messages:BoostersSaleWindow.textLeft."+this.mission.type,cleverapps.styles.FONTS.BOOSTERS_SALE_TOP_TEXT);s.push(n)}
var i=cleverapps.UI.generateTTFText("messages:BoostersSaleWindow.textMiddle."+this.mission.type,cleverapps.styles.FONTS.BOOSTERS_SALE_TOP_RED_TEXT);s.push(i);var o=cleverapps.UI.generateTTFText("messages:BoostersSaleWindow.textRight."+this.mission.type,cleverapps.styles.FONTS.BOOSTERS_SALE_TOP_TEXT);s.push(o);var a=new cleverapps.Layout(s,{direction:cleverapps.UI.HORIZONTAL,margin:e.text.bottomMargin});return this.text=new cleverapps.Layout([a,t],{direction:cleverapps.UI.VERTICAL,margin:e.text.margin})}});BoostersSaleWindow.prototype.listBundles=function(){return["boosters_sale","reward_icons","tile_shop"]},BoostersSaleWindow.PURCHASES_TO_PRIZE=5,cleverapps.overrideFonts(cleverapps.styles.FONTS,{BOOSTERS_SALE_TEXT:{size:45,color:cleverapps.styles.COLORS.BOOSTERS_SALE_TEXT_COLOR},BOOSTERS_SALE_TOP_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE},BOOSTERS_SALE_TOP_RED_TEXT:{size:50,color:cleverapps.styles.COLORS.COLOR_RED},BOOSTERS_SALE_PRICE_TEXT:{size:45,
color:cleverapps.styles.COLORS.BOOSTERS_SALE_TEXT_COLOR},BOOSTERS_SALE_AMOUNT_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.BoostersSaleWindow={progressBar:{bar:{x:0,y:0,zOrder:0,interval:67,lines:!0},dx:0,marginY:-21,prizeMargin:-40,textMargin:30,text:{width:400,height:50},prize:{width:100,height:100,x:50,y:30,scale:1.5,animation:{json:bundles.boosters_sale.jsons.prize_json}},descriptionText:{width:[390,600,600],height:90,marginY:50}},tooltip:{rewards:{x:{align:"center",dx:-20},y:{align:"top",dy:60}},size:{width:220,height:100}},button:{width:240,height:90,margin:10,y:0},title:{ribbonTitle:{width:620,height:120,y:-10,offsetX:40,scaleY:1.3}},icons:{x:-15,width:120,height:120,rotation:0,bg:bundles.boosters_sale.frames.product_bg_png,bgColor:cleverapps.styles.COLORS.COLOR_VERYLIGHTBROWN,margins:[{margin:-80},{margin:-50},{margin:-50}],offset:{x:0,y:0},offsetByType:{12:{x:0,y:20}},padding:{x:5,y:25}},label:{x:{align:"right",dx:-5},y:{align:"bottom",dy:5}},
amount:{margin:-30},text:{margin:10,bottomMargin:8},textTop:{width:700},oldPriceText:{width:200,height:70,margin:8,price:{width:135}},badge:{x:{align:"left",dx:5},y:{align:"top",dy:100},rotation:-20,margin:-10,scale:1},row:{bg:bundles.boosters_sale.frames.row_bg_png,padding:[{x:20,y:30},{x:30,y:30},{x:30,y:30}]},rowMargin:20,colMargin:20,margin:10,balloons:[{y:-165,x:-250,scale:-1},{y:-165,x:250,scale:1}],window:{contentOffset:-30,noBackground:{keepSize:!0},bgOffset:{y:20,x:0}}};var FavoriteSaleWindow=Window.extend({onWindowLoaded:function(e){this.mission=e;var t=this.getStyles();this._super({content:this.getContent(),title:this.getTitle(),name:"favoritesalewindow",button:{width:t.button.width,height:t.button.height,button_png:t.button.button_png,button_on_png:t.button.button_on_png,content:new ProductPriceView(this.mission.logic.product,{font:cleverapps.styles.FONTS.FAVORITE_SALE_WINDOW_BUTTON_TEXT||cleverapps.styles.FONTS.BUTTON_TEXT}),onPressed:this.buyProduct.bind(this)},
styles:cleverapps.overrideStyles(cleverapps.styles.Window,this.getStyles().window,!0)}),this.addBottomAnimation();var s=this.window.scaleX*this.window.width/(this.content.scaleX*this.content.width+t.content.paddingX);s<1&&(this.content.setScaleX(this.content.getScaleX()*s),this.content.setScaleY(this.content.getScaleY()*s)),this.addRibbonTitle(),this.addHeroAnimation(),Lottery.addIcon(this.button),cleverapps.audio.playSound(bundles.main.urls.sale_window_effect)},addHeroAnimation:function(){var e=cleverapps.styles.FavoriteSaleWindow;if(e.heroAnimation){var t=new cleverapps.Spine(bundles.hero.jsons.hero_json);t.setAnimation(0,"idle",!0),t.setPositionRound(e.heroAnimation.position[cleverapps.wideMode.mode]),t.setScale(e.heroAnimation.scale[cleverapps.wideMode.mode]),this.addChild(t)}},addRibbonTitle:function(){var e=this.getStyles();if(e.title.ribbonTitle){var t=cleverapps.UI.createScale9Sprite(bundles.main.frames.ribbon,cleverapps.UI.Scale9Rect.TwoPixelXY);this.window.addChild(t),
t.setAnchorPoint2(),t.setContentSize2(e.title.ribbonTitle),t.setPositionRound(this.window.titleText.x,this.window.titleText.y+e.title.ribbonTitle.y),t.setLocalZOrder(this.window.titleText.getLocalZOrder()-1)}},getStyles:function(){return cleverapps.styles.FavoriteSaleWindow},getTitle:function(){return{text:"messages:FavoriteSaleWindow.title",font:cleverapps.styles.FONTS.FAVORITE_SALE_WINDOW_TITLE_TEXT}},buyProduct:function(){this.mission.logic.product.buy(function(){new RewardWindow({reward:this.mission.logic.getReward()}),this.close()}.bind(this))},createRewardsList:function(){var o=this.getStyles(),a=[],e=this.mission.logic.getReward(),t=function(e,t){var s=cleverapps.UI.generateTTFText(t,cleverapps.styles.FONTS.FAVORITE_SALE_WINDOW_REWARDS_TEXT),n=new cc.Sprite(o.rewards.icons[e]);n.setScale(o.rewards.iconHeight/n.height);var i=[s,n];o.rewards.reverse&&i.reverse(),a.unshift(new cleverapps.Layout(i,{margin:o.rewards.textMargin,direction:o.rewards.direction}))};for(var s in e)if(
"unlimitedLives"===s)t(s,Product.FormatUnlimitedLives(e[s]).title);else if("boosters"===s)for(var n in e[s])t(n,"x"+e[s][n]);else t(s,e[s]);return new cleverapps.Layout(a,{margin:o.rewards.margin,direction:cleverapps.UI.VERTICAL})},addBottomAnimation:function(){var e=this.getStyles();if(e.bottom){var t=new cleverapps.Spine(e.bottom.json);t.setAnimation(0,e.bottom.animation,!0);var s=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(e.bottom),s.addChild(t),t.setPositionRound(s.width/2+e.bottom.x,s.height/2+e.bottom.y),s.setScale(e.bottom.scale);var n=this.createInfoText(),i=new cc.Scale9Sprite(e.bottom.image);i.setContentSize(n.width+2*e.bottom.text.padding.x,n.height+2*e.bottom.text.padding.y),i.addChild(n),n.setPositionRound(i.width/2+e.bubble.offset.x,i.height/2+e.bubble.offset.y);var o=new cleverapps.Layout([s,i],{direction:cleverapps.UI.HORIZONTAL,margin:e.bottom.margin});this.window.addChild(o),o.setPositionRound(this.window.width/2+e.bottom.offset.x,-o.height/2+e.bottom.offset.y)
}},createInfoText:function(){var e=this.getStyles(),t=cleverapps.UI.generateTTFText("messages:FavoriteSaleWindow.text",cleverapps.styles.FONTS.FAVORITE_SALE_WINDOW_BOTTOM_TEXT);return t.setDimensions(e.bottom.text.width,0),t.fitTo(void 0,e.bottom.text.height),t},addBadge:function(){var e=this.getStyles().badge;if(e){var t=new cc.Sprite(bundles.tile_shop.frames.shop_badge_bestseller_png),s=Messages.get("messages:FavoriteSaleWindow.badge1")+"\n"+Messages.get("messages:FavoriteSaleWindow.badge2");this.content.addChild(t),t.setPositionRound(e),t.setScale(e.scale[cleverapps.wideMode.mode]),t.setRotation(e.rotation),cc.sys.isMobile&&e.mobile&&(t.setRotation(e.mobile.rotation),t.setPositionRound(t.getPositionX()+e.mobile.dx,t.getPositionY()+e.mobile.dy));var n=cleverapps.UI.generateTTFText(s,cleverapps.styles.FONTS.TILE_SHOP_BADGE_TEXT);t.addChild(n),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.setPositionRound(e.text),n.fitTo(e.text.width),e.text.rotation&&n.setRotation(
e.text.rotation),cc.sys.isMobile&&e.mobile&&e.mobile.text&&(n.setRotation(e.mobile.text.rotation),n.setScale(e.mobile.text.scale))}},getContent:function(){var e,t=this.getStyles();this.mission.logic.isPackProduct()?(e=new PackProductTile(TileModel.Create(this.mission.logic.product),{noButton:!0,noTitle:!0,size:t.packTile.size})).setScale(t.packTile.scale):e=new CoinsProductTile(TileModel.Create(this.mission.logic.product),{noButton:!0,rewardsBlockNoBg:t.rewardsBlockNoBg,contentOffset:t.tile.offset}),this.tile=e;var s=this.rewardsList=this.createRewardsList(),n=new cc.Sprite(bundles.favorite_sale.frames.plus_png);n.setScale(t.plus.scale);var i,o=this.content=new cleverapps.Layout([e,n,s],{margin:t.tilesMargin,direction:cleverapps.UI.HORIZONTAL});t.icon.light&&(t.icon.light.image?(i=new cc.Sprite(t.icon.light.image)).setScale(t.icon.light.scale):(i=new cleverapps.Spine(t.icon.light.json,t.icon.light.scale)).setAnimation(0,t.icon.light.animationName,"true"),this.content.addChild(i),
i.setPositionRound(s.x+t.icon.light.offset.x,s.y+t.icon.light.offset.y),i.setLocalZOrder(-1));return this.timerLayout=this.createTimer(),o=new cleverapps.Layout([o,this.timerLayout],{direction:cleverapps.UI.VERTICAL,margin:t.margin}),this.addBadge(),o},createTimer:function(){var e=this.mission.finishTime()-Date.now();this.finished&&(e=0);var t=this.getStyles().timer,s={background_content:!1,font:cleverapps.styles.FONTS.FAVORITE_SALE_TIMER_TEXT||cleverapps.styles.FONTS.WHITE_TEXT},n=new cleverapps.CountDownView(new cleverapps.CountDown(e,{onFinish:function(){this.finished||(this.finished=!0,cleverapps.missionManager.remove(this.mission),this.runAsync(this.addLastChance.bind(this)))}.bind(this)}),s),i=[cleverapps.UI.generateTTFText(this.finished?"messages:FavoriteSaleWindow.lastChance":"messages:FavoriteSaleWindow.Expires",cleverapps.styles.FONTS.FAVORITE_SALE_TIMER_TEXT||cleverapps.styles.FONTS.WHITE_TEXT),n],o=new cleverapps.Layout(i,{margin:t.margin,direction:cleverapps.UI.HORIZONTAL}
),a=this.timerBg=new cc.Scale9Sprite(bundles.favorite_sale.frames.timer_bg_png||bundles.main.frames.timer_bg_png);return a.setContentSize2(o.width+2*t.padding.x,o.height+2*t.padding.y),o.addChild(a),a.setLocalZOrder(-1),a.setPositionRound(o.width/2,o.height/2),o},addLastChance:function(){var e=this.timerLayout.getPosition(),t=this.timerLayout.getParent();this.timerLayout.removeFromParent(!0),this.timerLayout=this.createTimer(),t.addChild(this.timerLayout),this.timerLayout.setPositionRound(e)},listBundles:function(){return["reward_icons","tile_shop","favorite_sale","dialogues"]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{FAVORITE_SALE_WINDOW_BOTTOM_TEXT:{size:40,color:new cc.Color(130,70,40,255)},FAVORITE_SALE_WINDOW_REWARDS_TEXT:{size:40,color:new cc.Color(130,70,40,255)}}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{FAVORITE_SALE_WINDOW_TITLE_TEXT:cleverapps.styles.FONTS.WINDOW_TITLE_TEXT}),cleverapps.styles.FavoriteSaleWindow={plus:{scale:1},tilesMargin:3,margin:20,
button:{width:280,height:100},timer:{margin:15,scaleWithRewards:!0,padding:{x:10,y:5}},packTile:{scale:.9},icon:{scale:1.3,light:{json:bundles.favorite_sale.jsons.story_light_animation_json,animationName:"animation",scale:3.2,offset:{x:0,y:-20}}},bottom:{image:bundles.main.frames.tutorial_text_bg_png,margin:20,width:300,height:260,offset:{x:-50,y:0},x:0,y:0,scale:1,json:bundles.dialogues.jsons.default_json,animation:"animation",text:{padding:{x:30,y:15},width:350,height:250}},bubble:{offset:{x:20,y:0}},rewards:{margin:40,textMargin:2,iconHeight:90,icons:{unlimitedLives:bundles.reward_icons.frames.life_unlim,exp:bundles.reward_icons.frames.reward_exp_png,stars:bundles.reward_icons.frames.stars_png,gold:bundles.tile_shop.frames.shop_gold4_png,0:bundles.reward_icons.frames.cellbooster,1:bundles.reward_icons.frames.linebooster,2:bundles.reward_icons.frames.colorbooster,3:bundles.reward_icons.frames.coin_png,4:bundles.reward_icons.frames.joker_png,5:bundles.reward_icons.frames.coin_png,
6:bundles.reward_icons.frames.coin_png,7:bundles.reward_icons.frames.coin_png,8:bundles.reward_icons.frames.hat,9:bundles.reward_icons.frames.pot,10:bundles.reward_icons.frames.magnet_small_png,11:bundles.reward_icons.frames.dice_small_png,12:bundles.reward_icons.frames.joker_small_png,13:bundles.reward_icons.frames.highlight,14:bundles.reward_icons.frames.eye,15:bundles.reward_icons.frames.hint},direction:cleverapps.UI.HORIZONTAL},badge:{text:{width:120,height:120,x:{align:"center",dx:0},y:{align:"center",dy:0}},x:{align:"right",dx:60},y:{align:"center",dy:-220},scale:[.9,1.2,1.2],rotation:15},content:{paddingX:80},title:{},window:{bgOffset:{y:90,x:0},Border:{y:170},contentOffset:0},tile:{}},cleverapps.FBLike={prepareCode:function(e){var t=cleverapps.config.facebook.url,s=cleverapps.config.helpURL.default,n=cleverapps.config.title,
i='<div id=\'social\'>  <div class="fb-page" data-href="%{GROUP_LINK}" data-width="%{WIDTH}" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="%{GROUP_LINK}" class="fb-xfbml-parse-ignore"><a href="%{GROUP_LINK}">%{TITLE} Community</a></blockquote></div>  <br/>\n  <div class="fb-like" \n    data-href="%{LINK}" \n    data-layout="standard" \n    data-action="like" \n    data-show-faces="true">\n  </div></div>'.replace("%{LINK}",t);return i=(i=(i=(i=(i=i.replace("%{TITLE}",n)).replace("%{GROUP_LINK}",s)).replace("%{GROUP_LINK}",s)).replace("%{GROUP_LINK}",s)).replace("%{WIDTH}",e)},prepareCodeOK:function(){return'<div id=\'social\'>  <div class="fb-page" id="groupWidget"></div>  <br/>\n  <div id="likeWidget"></div></div>'},processCode:function(){"undefined"!=typeof FB&&FB.XFBML.parse(document.getElementById("social"))},onResize:function(){var e=document.getElementById("RightBg"),t="block";parseInt(e.style.width
)<260&&(t="none"),document.getElementById("social").style.display=t},processCodeOK:function(s){cleverapps.loadSdk("//connect.ok.ru/connect.js",{onSuccess:function(){var e=cleverapps.config.web_ok.url,t=cleverapps.config.helpURL.web_ok.match(/group\/(.*)/)[1];OK.CONNECT.insertGroupWidget("groupWidget",t,"{width:"+s+", height:335}"),OK.CONNECT.insertShareWidget("likeWidget",e,"{width:"+s+",height:100,st:'oval',sz:30,ck:1}")},onFailure:function(){console.log("Can't load ok sdk for widget!")}})},isAppropriate:function(){return-1!==["facebook","web_ok"].indexOf(cleverapps.User.calcSource())},createLikeButtons:function(){if(cleverapps.FBLike.isAppropriate()&&"undefined"!=typeof document){var e=document.getElementById("RightBg");if(!e)return;var t=parseInt(e.style.width),s=t<260;t=260,(cleverapps.isLocalhost()||"web_ok"===cleverapps.User.calcSource())&&cleverapps.config.web_ok&&cleverapps.config.web_ok.url&&cleverapps.config.helpURL&&cleverapps.config.helpURL.web_ok&&(
cleverapps.FBLike.prepareCode=cleverapps.FBLike.prepareCodeOK,cleverapps.FBLike.processCode=cleverapps.FBLike.processCodeOK),e.insertAdjacentHTML("afterbegin",cleverapps.FBLike.prepareCode(t)),cleverapps.FBLike.processCode(t),s&&(document.getElementById("social").style.display="none"),Resolution.afterResolutionChanged(cleverapps.FBLike.onResize)}}},cleverapps.NativeLinks={onResize:function(){var e=document.getElementById("LeftBg"),t="block";parseInt(e.style.width)<250&&(t="none"),document.getElementsByClassName("store-links")[0].style.display=t},createLinks:function(){if(cleverapps.NativeLinks.isAppropriate()){var n=bundles.store_links,e=["amazon","android","ios"].map(function(e){var t={android:n.urls.android_png,ios:n.urls.ios_png,amazon:n.urls.amazon_png}[e],s=cleverapps.config[e]&&cleverapps.config[e].url;if(s&&t)return{link:s,image:t}}).filter(function(e){return void 0!==e}),t=document.getElementById("LeftBg"),s=0;t&&t.style&&t.style.width&&(s=parseInt(t.style.width)),
0<document.getElementsByClassName("store-links").length||(t.insertAdjacentHTML("afterbegin",'<div class="store-links" />'),p=document.getElementsByClassName("store-links")[0],e.forEach(function(e){var t='<a target="_blank" href="%{LINK}">   <img src="%{IMAGE}"/ width=\'246px\' height=\'72px\'></a>'.replace("%{LINK}",e.link);t=t.replace("%{IMAGE}",e.image),p.insertAdjacentHTML("afterbegin",t)}),s<250&&(document.getElementsByClassName("store-links")[0].style.display="none"),Resolution.afterResolutionChanged(cleverapps.NativeLinks.onResize))}},isAppropriate:function(){return!cc.sys.isMobile&&!cleverapps.screenshotsMode&&-1===["web_mm","mobile_mm","web_ok","mobile_ok","web_vk","mobile_vk","huzcom","plinga","pliega","yandex"].indexOf(cleverapps.User.calcSource())}};var FriendView=cc.Node.extend({ctor:function(e,t){this._super(),this.setAnchorPoint(.5,.5),"invite"===e.type&&(e.avatar=bundles.main.frames.avatar_invite_friend);var s=cleverapps.styles.FriendView;this.setContentSize2(s.width,
s.height);var n,i=new cleverapps.UI.Avatar(e);i.setPositionRound(this.width/2,this.height-i.height/2-s.avatar.y),i.setScale(s.avatar.scale),i.baseScale=i.scale,i.setAnchorPoint2(),this.addChild(i),"invite"===e.type?((n=this.score=new cleverapps.UI.Button({button_png:bundles.buttons_main.frames.small_blue_button,button_on_png:bundles.buttons_main.frames.small_blue_button_on,text:Messages.get("LevelStartWindow.Button.Invite"),font:cleverapps.styles.FONTS.HIGHSCORE_INVITE_TEXT,width:s.invite.button.width,height:s.invite.button.height,onClicked:this.inviteFriend.bind(this)})).setCascadeOpacityEnabled(!0),cleverapps.UI.applyHover(i),cleverapps.UI.onClick(i,this.inviteFriend.bind(this))):(n=this.score=cleverapps.UI.generateTTFText(e.score,cleverapps.styles.FONTS.HIGH_SCORE_FONT)).setAnchorPoint2(.5,.5),n.setPositionRound(this.width/2,s.score.y),this.addChild(n),t<3&&"invite"!==e.type&&(this.cup=new cc.Sprite(bundles.main.frames["levelstart_cup_"+(t+1)]),this.cup.setLocalZOrder(1),i.addChild(
this.cup),this.cup.setPositionRound(s.cup.x,s.cup.y)),setTimeout(function(){this.showAnimation(t)}.bind(this),0)},inviteFriend:function(){cleverapps.social.inviteFriends({message:Messages.get("SettingsWindow.InviteFriends.message"),title:Messages.get("SettingsWindow.InviteFriends.title"),element:this},function(e){e===cleverapps.Social.CODE_SUCCEED&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HIGHSCORE_INVITE)}.bind(this))},showAnimation:function(e){var t=.5-.1*e,s=function(e){e.baseScale=e.scale,e.scale=0,e.opacity=0,e.runAction(new cc.Sequence(new cc.DelayTime(t+6*.1),new cc.Spawn(new cc.ScaleTo(.2,e.baseScale).easing(cc.easeBackOut()),new cc.FadeIn(.2))))};this.cup&&s(this.cup),s(this.score),this.scale=0,this.runAction(new cc.Sequence(new cc.DelayTime(t+.2),new cc.ScaleTo(.2,1)))}});cleverapps.styles.FriendView={avatar:{margin:{x:10},scale:.8,y:4},score:{margin:{x:120},y:150},cup:{x:{align:"right",dx:34},y:{align:"bottom",dy:-6}},invite:{button:{width:100,height:46}},width:100,
height:290};var HeroView=cleverapps.Spine.extend({ctor:function(e){var t=(e=e&&0<Object.keys(e).length?cleverapps.overrideStyles(cleverapps.clone(cleverapps.styles.HeroView,!0),e):cleverapps.styles.HeroView).vertical||{},s=e.scale||1;cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(s=t.scale||s),this._super(e.json,s);var n=e;cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&void 0!==t.x&&void 0!==t.y&&(n=t),this.setPositionRound(n);var i=e.start||e.name||e.animation,o=e.idle;i&&o?this.setAnimationAndIdleAfter(i,o):i?this.setAnimation(0,i,!1):o&&this.setAnimation(0,o,!0)},onEnter:function(){this._super(),this.visible=!1,this.runAction(new cc.Sequence(new cc.DelayTime(.1),new cc.CallFunc(function(){var e=this.getPosition();this.y=.5*-this.height,this.visible=!0,this.runAction(new cc.MoveTo(.5,e).easing(cc.easeBackOut()))}.bind(this))))}});cleverapps.styles.HeroView={json:bundles.hero.jsons.hero_json,idle:"starterpack_800",x:600,y:410,scale:.7,vertical:{scale:.55,x:420,
y:310}};var HighScoresComponent=function(e){var t=e.level,s=e.parent,n=cleverapps.styles.HighScoresComponent;if(n&&n.active&&t.isRegular()){var i=t.episode.friendsResults&&t.episode.friendsResults.listFriendResults(t.levelNo);if(!i||0===i.length)return InviteComponent({level:t,parent:s});var o=new cc.Node;if(n.useRibbonTitle){var a=1.2*n.width,r=n.height/2.2,l=cleverapps.UI.createScale9Sprite(bundles.main.frames.ribbon,cleverapps.UI.Scale9Rect.TwoPixelXY);l.setContentSize2(a,r),l.setPositionRound(n.width/2,n.height-.45*r);var c=cleverapps.UI.createScale9Sprite(bundles.main.frames.window_bg_light_png);c.setContentSize2(n.width,n.height),c.setAnchorPoint(0,0),c.setLocalZOrder(-1),o.addChild(c),o.addChild(l)}if(o.setAnchorPoint(.5,.5),o.setContentSize2(n.width,n.height),o.setPositionRound(s.width/2,o.height/2+cleverapps.UI.getSceneOffsetY()),s.window.y+=(o.height/2+o.y)/2+n.windowY,s.addChild(o),n.Title){var p=cleverapps.UI.generateTTFText("messages:LevelStartWindow.HighScoresTitle",
cleverapps.styles.FONTS.HIGHSCORE_TITLE_TEXT);p.setPositionRound(o.width/2,o.height-p.height/2+n.Title.y),p.setAnchorPoint2(),o.addChild(p)}o.visible=!1;var d=o.getPosition();o.setPositionRound(o.x,-2*o.height),o.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.ToggleVisibility,new cc.MoveTo(.2,d)));for(var u=t.episode.friendsResults.listTop4(t.levelNo,!0);u.length<5;)u.push({type:"invite"});var h=u.map(function(e,t){var s=new FriendView(e,t);return s.setLocalZOrder(5-t),o.addChild(s),s});cleverapps.UI.arrangeWithMargins(h,{direction:cleverapps.UI.HORIZONTAL,x:n.Friend.x,y:n.Friend.y,margin:n.Friend.margin})}};cleverapps.overrideFonts(cleverapps.styles.FONTS,{HIGHSCORE_TITLE_TEXT:{size:55,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.HighScoresComponent={active:!0,useRibbonTitle:!0,position:{x:{align:"center"},y:{align:"bottom"}},windowY:-30,width:670,height:270,Friend:{x:48,y:40,margin:20},Title:{y:-12}};var HardLevelDecorationComponent=function(e){var t=e.parent,
s=t.decors,n=cleverapps.styles.HardLevelDecorationComponent;if(n.active&&s&&t.level.isHard()){Object.keys(n.off).forEach(function(e){s.setVisible(e,!1)}),Object.keys(n.on).forEach(function(e){s.add(e)});var i=s.getDecorById("hard_level_title_bg");if(i){var o=cleverapps.styles.Decorators.hard_level_title_bg;i.setContentSize2(t.window.width-o.offsetWidth,o.height)}var a=s.getDecorById("hardLevelSign");a&&(t instanceof VictoryWindow?s.setVisible("hardLevelSign",!1):(s.setVisible("hardLevelSignVictoryWindow",!1),this.runHardLevelAnimation(a)))}};HardLevelDecorationComponent.prototype.runHardLevelAnimation=function(e){var t=e.baseScale;e.setScale(.1*t),e.setVisible(!1),e.runAction(new cc.Sequence(new cc.DelayTime(.4),new cc.CallFunc(function(){e.setVisible(!0)}),new cc.ScaleTo(.5,1.1*t).easing(cc.easeBackOut()),new cc.CallFunc(function(){e.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.5,.9*t).easing(cc.easeIn(1)),new cc.ScaleTo(.5,1.1*t))))})))},
cleverapps.styles.HardLevelDecorationComponent={active:!0,on:{},off:{}};var ScoreComponent=function(e){var t=e.level,s=e.score;if(void 0!==s||!t.isRegular()||(s=cleverapps.userresult.getScoresForLevel(t.episode.episodeNo,t.levelNo))){var n=[],i=cleverapps.UI.generateTTFText(s,cleverapps.styles.FONTS.VERY_BIG_TEXT);if(n.push(i),!e.victory){var o=cleverapps.UI.generateTTFText("messages:LevelStartWindow.YourScore",cleverapps.styles.FONTS.WINDOW_BIG_TEXT);n.push(o)}var a=new cleverapps.Spine(bundles.windows.jsons.score_animation_json||bundles.main.jsons.score_animation_json);a.setLocalZOrder(-1),a.setScale(.3),a.runAction(new cc.Sequence(new cc.DelayTime(cleverapps.styles.ScoreComponent.bg.delay),new cc.ScaleTo(.3,1).easing(new cc.easeBackOut),new cc.CallFunc(function(){a.setAnimation(0,"animation",!0)})));var r=new cleverapps.Layout(n,{direction:cleverapps.UI.VERTICAL,padding:cleverapps.styles.ScoreComponent.padding});if(r.addChild(a),a.setPosition(i.x,i.y),e.victory){var l=0
;i.updateTweenAction=function(e,t){++l%3==0&&i.setString(Math.round(e))},i.setScale(0),i.runAction(new cc.Sequence(new cc.DelayTime(1.4),new cc.Spawn(new cc.ScaleTo(.5,1).easing(cc.easeBackOut()),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.show_score_effect)}),new cc.CallFunc(function(){cc.sys.isNative||i.runAction(new cc.Sequence(new cc.ActionTween(1.7,"score",0,s).easing(cc.easeCubicActionOut()),new cc.CallFunc(function(){i.setString(s),i.setAnchorPoint2()})))}))))}return r}};cleverapps.styles.ScoreComponent={enabled:!0,padding:{x:0,y:0},bg:{delay:0}};var StarsComponent=function(e){var t=cleverapps.styles.StarsComponent,s=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(t);var n=new cleverapps.Spine(t.animation.json),i=e.stars;if(n.setAnimation(0,""+i,!1),n.setPositionRound({x:{align:"center"},y:{align:"center"}}),s.addChild(n),!e.victory)for(var o=function(e){s.runAction(new cc.Sequence(new cc.DelayTime(t.sound.duration*e),new cc.CallFunc(function(){
cleverapps.audio.playSound(bundles.main.urls["star_"+e+"_effect"])})))},a=1;a<=e.stars;a++)o(a);return s};cleverapps.styles.StarsComponent={sound:{duration:.7},animation:{json:bundles.main.jsons.levelstart_stars_json},width:560,height:220};var VictoryAnimationComponent=cc.Node.extend({ctor:function(e){var t=e.victory?cleverapps.styles.VictoryAnimationComponent.victory:cleverapps.styles.VictoryAnimationComponent.levelstart;this._super(),this.setLocalZOrder(t.zOrder||0),this.setContentSize2(t.width,t.height),this.setAnchorPoint2();var s=this.animation=new cleverapps.Spine(t.json);if(s.setPositionRound(this.width/2,this.height/2+(t.y||0)),this.addChild(s),t.idle?(cleverapps.audio.playSound(t.sound),s.setAnimation(0,t.animation,!1),s.setCompleteListener(function(){s.setAnimation(0,t.idle,!0)})):s.setAnimation(0,t.animation,!0),e.victory&&cleverapps.styles.VictoryWindow.victoryText){var n=cleverapps.UI.generateTTFText("messages:VICTORY",cleverapps.styles.FONTS.VICTORY_TEXT)
;n.setPositionRound(this.width/2,this.height/2+cleverapps.styles.VictoryWindow.victoryText.y),n.setScale(.3),n.runAction(new cc.ScaleTo(.2,1)),this.addChild(n)}}});VictoryAnimationComponent.prototype.onClose=function(e){this.animation.setCompleteListener(e),this.animation.setAnimation(0,"finish",!1)},cleverapps.styles.VictoryAnimationComponent={levelstart:{animation:"animation",json:bundles.main.jsons.victory_animation_json,width:456,height:370},victory:{json:bundles.game.jsons.victory2_spine_json,animation:"victory_start",idle:"idle",sound:bundles.game.urls.rocket_effect,zOrder:1,width:400,height:240}};var RewardsListComponent=cc.Node.extend({ctor:function(e,t){this._super(),this.reward=e,this.options=t||{},this.targets={},this.createContent()},createContent:function(){var e=cleverapps.styles.RewardsListComponent,t=this.list=this.createList();t.forEach(function(e){cleverapps.UI.wrap(e)});var s=[];if(this.options.title){var n=cleverapps.UI.generateOnlyText(
this.options.title.text||this.options.title,this.options.title.font||this.options.font);this.options.title.direction===cleverapps.UI.HORIZONTAL?t.unshift(n):s.push(n)}for(var i=0,o=this.options.amountInRow||3;i<t.length;){var a=new cleverapps.Layout(t.slice(i,i+o),{direction:this.options.direction||cleverapps.UI.HORIZONTAL,align:this.options.align||cleverapps.UI.ALIGN_CENTER,margin:void 0!==this.options.margin?this.options.margin:e.margin});s.unshift(a),i+=o}this.content=new cleverapps.Layout(s,{direction:cleverapps.UI.VERTICAL,margin:void 0!==this.options.rowMargin?this.options.rowMargin:e.margin}),this.addChild(this.content),this.setContentSize2(this.content),this.setAnchorPoint2(),this.content.setPositionRound(this.width/2,this.height/2)},createOneReward:function(e,t,s,n,i){if(void 0===n)return s.icon=s,this.targets[e]=s;var o=cleverapps.styles.RewardsListComponent,a=this.options.font||cleverapps.styles.FONTS.REWARDS_LIST_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT;"checkmark"===n?(
n=new cc.Sprite(bundles.reward_icons.frames.checkmark_png)).setColor(cleverapps.styles.COLORS.REWARDS_GREEN):n=this.options.onlyText?cleverapps.UI.generateOnlyText(n,a,i):cleverapps.UI.generateTTFText(n,a,i),this.options.iconScale&&s.setScale(this.options.iconScale),this.options.reward&&this.options.reward.iconDimensions&&cleverapps.UI.fitToBox(s,this.options.reward.iconDimensions);var r=[n,s],l=cleverapps.UI.VERTICAL;this.options.reward&&this.options.reward.direction===cleverapps.UI.HORIZONTAL&&(l=cleverapps.UI.HORIZONTAL,r=r.reverse());var c=o.box.margin;this.options.reward&&void 0!==this.options.reward.margin&&(c=this.options.reward.margin);var p=this.targets[e]=new cleverapps.Layout(r,{direction:l,margin:c});return p.icon=s,p.text=n,p.reward=t,p},createList:function(){var e=cleverapps.styles.RewardsListComponent,t=this.reward,s=[],n="x";if(this.options.reward&&void 0!==this.options.reward.amountPrefix&&(n=this.options.reward.amountPrefix),void 0!==t.boosters)for(var i in t.boosters
)if(t.boosters[i]){var o=this.options.icons&&this.options.icons["boosters_"+i]||e.boosters.icons[i];s.push(this.createOneReward("boosters_"+i,t.boosters[i],new cc.Sprite(o),n+t.boosters[i]))}if(void 0!==t.randomBoosters){o=this.options.icons&&this.options.icons.randomBoosters||bundles.reward_icons.frames.boosters_common_small_png;s.push(this.createOneReward("randomBoosters",t.randomBoosters,new cc.Sprite(o),n+t.randomBoosters.amount))}if(void 0!==t.gold){o=this.options.icons&&this.options.icons.gold||bundles.reward_icons.frames.reward_gold_png;s.push(this.createOneReward("gold",t.gold,new cc.Sprite(o),n+t.gold))}if(void 0!==t.exp&&levels.user.expAvailable()){o=this.options.icons&&this.options.icons.exp||bundles.reward_icons.frames.reward_exp_png;s.push(this.createOneReward("exp",t.exp,new cc.Sprite(o),n+t.exp))}if(void 0!==t.unlimitedLives){t.unlimitedLives=Product.FormatUnlimitedLives(t.unlimitedLives,this.options.short)
;o=this.options.icons&&this.options.icons.unlimitedLives||bundles.reward_icons.frames.life_unlim;s.push(this.createOneReward("unlimitedLives",t.unlimitedLives,new cc.Sprite(o),t.unlimitedLives.title,{amount:t.unlimitedLives.amount}))}if(void 0!==t.battlePass){var a=new cleverapps.Spine(t.battlePass.type===Mission.TYPE_PURCHASE_BATTLEPASS?bundles.battle_pass.jsons.purchase_ticket_json:bundles.battle_pass.jsons.ticket_json);a.setAnimation(0,"animation",!0),s.push(this.createOneReward("battlePass",t.battlePass,a,"messages:BattlePassProduct.Title"))}if(void 0!==t.coins){o=this.options.icons&&this.options.icons.coins||bundles.reward_icons.frames.reward_coin_png;s.push(this.createOneReward("coins",t.coins,new cc.Sprite(o),n+t.coins))}if(void 0!==t.rubies){o=this.options.icons&&this.options.icons.rubies||bundles.reward_icons.frames.reward_gold_png;s.push(this.createOneReward("rubies",t.rubies,new cc.Sprite(o),n+t.rubies))}if(void 0!==t.energy&&s.push(this.createOneReward("energy",t.energy,
new cc.Sprite(bundles.reward_icons.frames.reward_energy_png),n+t.energy)),void 0!==t.wands&&s.push(this.createOneReward("wands",t.wands,new cc.Sprite(bundles.reward_icons.frames.reward_wand_png),n+t.wands)),void 0!==t.worker)if(t.worker.subscription){var r=t.worker.amount?n+t.worker.amount:"checkmark";s.push(this.createOneReward("worker",t.worker,new cc.Sprite(bundles.reward_icons.frames.reward_worker_png),r))}else t.worker=Product.FormatUnlimitedLives(t.worker),s.push(this.createOneReward("worker",t.worker,new cc.Sprite(bundles.reward_icons.frames.reward_worker_png),t.worker.title,{amount:t.worker.amount}));if(void 0!==t.growthFund&&s.push(this.createOneReward("growthFund",t.growthFund,new cc.Sprite(bundles.reward_icons.frames.growth_fund_png),"messages:Shop.growthFund.title")),void 0!==t.unit)for(var l=0,c=cleverapps.toArray(t.unit);l<c.length;++l){var p=c[l];if(this.options.noImage){var d=Messages.get("messages:Units."+p.code+".stage"+(p.stage+1)+".name");p.amount&&1<p.amount&&(
d+=" "+n+p.amount),s.push(cleverapps.UI.generateOnlyText(d,this.options.font))}else{var u=UnitView.getUnitImage(p);u&&s.push(this.createOneReward("unit_"+Unit.GetKey(p),p,u,n+p.amount))}}if(void 0!==t.lives){o=this.options.icons&&this.options.icons.lives||bundles.main.frames.life_reward_png||bundles.main.frames.level_failed_heart_png||bundles.reward_icons.frames.reward_energy_png;s.push(this.createOneReward("lives",t.lives,new cc.Sprite(o),n+t.lives))}if(void 0!==t.stars&&s.push(this.createOneReward("stars",t.stars,new cc.Sprite(bundles.reward_icons.frames.stars_png),n+t.stars)),void 0!==t.gun){if((g=new cc.Node).setAnchorPoint2(),g.setContentSize2(e.gun.width,e.gun.height),e.gun.animation){(f=new cleverapps.Spine(e.gun.animation.json,e.gun.scale)).setContentSize2(g.getContentSize()),f.spine.setPositionRound(f.width/2+e.gun.x,f.height/2+e.gun.y),f.setAnimation(0,e.gun.animation.name,!0),g.addChild(f)}else{var h=new cc.Sprite(bundles.game.frames.gun_icon);g.addChild(h),
h.setPositionRound(g.width/2,g.height/2)}s.push(this.createOneReward("gun",t.gun,g))}if(t.wardrobe&&cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_WARDROBE)){var g,v=cleverapps.styles.WardrobeWindow.person;(g=new cc.Node).setAnchorPoint2(),g.setContentSize2(e.wardrobe.width,e.wardrobe.height);var m=new cleverapps.Spine(v.json,v.scale);m.setAnimation(0,"idle",!0),g.addChild(m),s.push(this.createOneReward("wardrobe",t.wardrobe,g))}if(void 0!==t.herolevels&&Array.isArray(t.herolevels)&&0<t.herolevels.length)for(l=0;l<t.herolevels.length;l++){var f,_=t.herolevels[l][0].toUpperCase(),y=new cc.Node;y.setAnchorPoint2(),y.setContentSize2(e.herolevel.heroBuilding.width,e.herolevel.heroBuilding.height),(f=new cleverapps.Spine(bundles.heroes.jsons[_+"_hero_spine_json"],e.herolevel.heroBuilding.scale)).setSkin(match3.heroes.getCurrentSkin()),f.setAnimation(0,"idle",!0),y.addChild(f);var b=new cleverapps.Layout([y],{direction:cleverapps.UI.VERTICAL}),w=new cc.Node
;w.setContentSize2(e.herolevel.animation.width,e.herolevel.animation.height),f.setPositionRound(y.width/2,y.height/2+e.herolevel.animation.offsetY),w.addChild(b),b.setPositionRound(w.width/2,w.height/2),w.setPositionRound({x:{align:"center"},y:{align:"center"}});var T=cleverapps.UI.createScale9Sprite(e.herolevel.levelBlock.bg);T.setContentSize2(e.herolevel.levelBlock.width,e.herolevel.levelBlock.height),T.setPositionRound(e.herolevel.levelBlock.x,e.herolevel.levelBlock.y),y.addChild(T);var S=cleverapps.UI.generateImageText(Math.max(0,Math.min(Heroes.HEROES_MAX_LEVEL,t.herolevels[l][1])),cleverapps.styles.FONTS.WINDOW_WHITE_TEXT);S.setPositionRound(T.width/2,T.height/2),T.addChild(S),s.push(w)}return s},iterateRewards:function(e){for(var t in this.targets){var s=this.targets[t];s&&(0===t.indexOf("boosters")?e(s,t,this.reward.boosters[t.split("_")[1]]):e(s,t,s.reward))}}});cleverapps.styles.COLORS=cleverapps.overrideColors(cleverapps.styles.COLORS,{REWARDS_GREEN:new cc.Color(94,210,0,255
)}),cleverapps.styles.RewardsListComponent={margin:30,box:{margin:10},boosters:{icons:{0:bundles.reward_icons.frames.cellbooster,1:bundles.reward_icons.frames.linebooster,2:bundles.reward_icons.frames.colorbooster,3:bundles.reward_icons.frames.hint_icon_png}},gun:{width:100,height:100,y:0,x:0,animation:{json:bundles.game.jsons.gun_animation_json,name:"idle"}},wardrobe:{width:150,height:150},herolevel:{levelBlock:{bg:bundles.heroes&&bundles.heroes.frames.heroes_level_bg||bundles.main.frames.heroes_level_bg,width:70,height:50,x:120,y:-40},animation:{width:200,height:250,offsetY:-40},heroBuilding:{width:120,height:120,scale:1.5},additionalText:{x:0,y:0}}};var MinigameRewardsComponent=cleverapps.Layout.extend({ctor:function(e){var t=RewardsHelper.getDisplayData(e,{itemsPrefix:"x",short:!0});if(1===cleverapps.values(t).length){var s=new RewardsListComponent(e,{direction:cleverapps.UI.VERTICAL,font:cleverapps.styles.FONTS.MINIGAME_REWARD});s.setScale(
cleverapps.styles.MinigameRewardsComponent.itemSize.width/s.width),this.items=[s]}else this.items=cleverapps.values(t).map(function(e,t){return this.createReward(e.img,e.txt,0==t)}.bind(this));this._super(this.items,{direction:cleverapps.UI.VERTICAL})},createReward:function(e,t,s){var n=cleverapps.styles.MinigameRewardsComponent,i=new cc.Node;if(i.setAnchorPoint2(),i.setContentSize2(n.itemSize),!s&&n.separator){var o=new cc.Sprite(n.separator.image);o.setAnchorPoint2(),o.setPositionRound({align:"center"},{align:"bottom"}),i.addChild(o),i.setContentSize2(n.itemSize.width,n.itemSize.height+o.height)}var a=new cc.Sprite(e);a.setAnchorPoint2(),a.setPositionRound({align:"left"},{align:"center",dy:o?o.height/2:0}),a.setScale(.8*n.iconHeight/a.height),i.addChild(a);var r=cleverapps.UI.generateTTFText(t,cleverapps.styles.FONTS.MINIGAME_REWARD),l=n.itemSize.width-a.width*a.scaleX-n.iconTextSpacing;return r.width>l&&r.fitTo(l),r.setAnchorPoint2(),r.setPositionRound({align:"right"},{
align:"center",dy:(o?o.height/2:0)+n.textOffsetY}),i.addChild(r),i}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{MINIGAME_REWARD:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.MINIGAME_REWARD_TEXT}}),cleverapps.styles.MinigameRewardsComponent={separator:{image:bundles.windows.frames.lottery_items_dots_png},itemSize:{width:160,height:60},iconHeight:60,iconTextSpacing:20,textOffsetY:0};var InviteComponent=function(e){var t=cleverapps.FBLoginOrInvite();if(t){var s=cleverapps.styles.InviteComponent;e.parent.addChild(t),e.parent.window.y+=(t.height/2+t.y)/2+s.y}};cleverapps.styles.InviteComponent={y:-10};var RoundResultsComponent=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2();var r=cleverapps.styles.RoundResultsComponent,t=e.competition.getResults().sort(function(e,t){return e.player?-1:1}),l=!1;this.perWordTime=.05,this.maxWords=Math.max(t[0].amount,t[1].amount),this.views=t.map(function(e){var t,s=new cleverapps.UI.Avatar(e),n=e.amount,i=0;0<n&&(
i=this.perWordTime*(this.maxWords/n)),.2<i&&(i=.2);var o=new AnimatedCounterComponent({from:0,to:n,font:cleverapps.styles.FONTS.ROUND_WORDS_TEXT,time:i,onFinish:function(){cleverapps.metha.getMainObject().knockoutGame.rumble.getCurrentRound().isWinner(e.id)?this.runWinAnimation(t):this.runLoseAnimation(t)}.bind(this)});cleverapps.metha.getMainObject().knockoutGame.rumble.getCurrentRound().isWinner(e.id)||(s.setCascadeColorEnabled(!0),s.runAction(new cc.TintTo(this.perWordTime*this.maxWords,120,120,120)));var a=(t=new cleverapps.Layout([o,s],{direction:cleverapps.UI.VERTICAL,margin:r.margin})).name=cleverapps.UI.generateTTFText(GridPlayerNameView.FormatName(e.name),cleverapps.styles.FONTS.ROUND_NAME_TEXT);return a.width>r.name.width&&(l=!0),t.addChild(a),a.setPositionRound(t.width/2,t.height+r.margin+a.height/2),t.avatar=s,t.words=o,t.name=a,t.player=e,t},this),this.user=this.views[0],this.opponent=this.views[1],l&&this.views.forEach(function(e){e.name.setFont(
cleverapps.styles.FONTS.ROUND_NAME_SMALL_TEXT),e.name.setPositionRound(e.width/2,e.height+r.margin+e.name.height/2)}),this.content=new cleverapps.Layout(this.views,{direction:cleverapps.UI.HORIZONTAL,margin:r.playersMargin}),this.setContentSize2(this.content.getContentSize()),this.addChild(this.content),this.content.setPositionRound(this.width/2,this.height/2),this.runAnimation()},runAnimation:function(){this.views.forEach(function(e){e.words.runAnimation()},this)},runWinAnimation:function(e){var t=cleverapps.styles.RoundResultsComponent.animation.user;e.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.Spawn(new cc.ScaleTo(.4,1.3).easing(cc.easeOut(2)),new cc.MoveTo(.6,cc.p(this.content.width/2,e.y+t.dy)))))},runLoseAnimation:function(e){var t=cc.director.getRunningScene().scene,s=0;0===e.player.amount&&(s=this.perWordTime*this.maxWords),e.runAction(new cc.Sequence(new cc.DelayTime(s),new cc.CallFunc(function(){e.name.setVisible(!1),e.words.setVisible(!1),
e.avatar.replaceParentSamePlace(t),e.avatar.setLocalZOrder(100),e.avatar.runAction(new cc.RepeatForever(new cc.RotateBy(1,180))),e.avatar.runAction(new cc.Sequence(new cc.MoveTo(1.2,cc.p(e.avatar.x,-e.avatar.height/2)).easing(cc.easeIn(2)),new cc.RemoveSelf)),cleverapps.audio.playSound(bundles.game.urls.tournament_player_lose_effect)}.bind(this))))}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{ROUND_WORDS_TEXT:{name:"nostroke",size:60,color:cleverapps.styles.COLORS.COLOR_BROWN},ROUND_NAME_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},ROUND_NAME_SMALL_TEXT:{size:25,color:cleverapps.styles.COLORS.COLOR_BROWN}}),cleverapps.styles.RoundResultsComponent={animation:{user:{dy:-30},opponent:{}},name:{width:180},margin:10,playersMargin:90};var VictoryWindowHero=cc.Node.extend({ctor:function(){this._super();var e=cleverapps.styles.VictoryWindowHero;this.setContentSize2(e.size),this.setAnchorPoint2();var t=e;cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(t=e.mobile),
this.setPositionRound(t),this.setLocalZOrder(1),this.hero=new cleverapps.Spine(bundles.hero.jsons.hero_json,e.animation.scale),this.addChild(this.hero),this.hero.setPositionRound(this.width/2,this.height/2),this.hero.setAnimation(0,e.animation.idle,!0)},hide:function(){var e=cleverapps.styles.VictoryWindowHero;this.runAction(new cc.Sequence(new cc.MoveTo(.15,cc.p(this.x,this.y+e.moveUp.dy)).easing(cc.easeOut(2)),new cc.MoveTo(.3,cc.p(this.x,-this.height/2)).easing(cc.easeIn(3))))},show:function(){var e=cleverapps.styles.VictoryWindowHero,t=this.getPosition();this.setPositionRound(this.x,-this.height/2),this.runAction(new cc.Sequence(new cc.MoveTo(.5,t),new cc.CallFunc(function(){e.animation.name&&this.hero.setAnimationAndIdleAfter(e.animation.name,e.animation.idle),"tripeaks"===cleverapps.config.name&&this.runAction(new cc.Sequence(new cc.DelayTime(3),new cc.CallFunc(function(){this.hero.setAnimationAndIdleAfter("victory_window",e.animation.idle)}.bind(this))))}.bind(this))))}})
;cleverapps.styles.VictoryWindowHero={x:300,y:200,mobile:{x:140,y:200},size:{width:200,height:500},animation:{scale:1,name:"victory_open",idle:"victory_idle"},moveUp:{dy:40}};var AnimatedCounterComponent=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),this.options=e,this.options.scale=this.options.scale||1.3,this.options.onFinish=this.options.onFinish||function(){},this.options.time=this.options.time||.3;var t=this.options.to-this.options.from;this.increment=0<t?1:0===t?0:-1,this.text=cleverapps.UI.generateTTFText(this.options.from,this.options.font),this.addChild(this.text),this.setContentSize2(this.text.getContentSize()),this.text.setPositionRound(this.width/2,this.height/2),this.current=this.options.from,this.paused=!1,this.started=!1},runAnimation:function(){this.started=!0,this.current=this.options.from,this.paused||this._animateStep()},_animateStep:function(){!this.paused&&this.started&&(this.current!==this.options.to+this.increment?this.text.runAction(
new cc.Sequence(new cc.ScaleTo(this.options.time,this.options.scale),new cc.CallFunc(function(){this.text.setString(this.current),this.options.sfx&&cleverapps.audio.playSound(bundles.main.urls["countdown_effect_"+this.current])}.bind(this)),new cc.ScaleTo(this.options.time,1),new cc.DelayTime(this.options.time),new cc.CallFunc(function(){this.current+=this.increment,this._animateStep()}.bind(this)))):this.options.onFinish())},pauseCountdown:function(){this.paused||(this.paused=!0)},resumeCountdown:function(){this.paused&&(this.paused=!1,this._animateStep())}});cleverapps.styles.AnimatedCounterComponent={};var RoundCountdownComponent=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),this.text=cleverapps.UI.generateTTFText("messages:RoundCountdownComponent.text",cleverapps.styles.FONTS.ROUND_COUNTDOWN_TEXT),this.addChild(this.text),this.setContentSize2(this.text.getContentSize()),this.text.setPositionRound(this.width/2,this.height/2),this.text.setVisible(!1),
this.countdown=new AnimatedCounterComponent({from:3,to:1,font:cleverapps.styles.FONTS.ROUND_COUNTDOWN_TIMER_TEXT,scale:1.5,sfx:!0,onFinish:function(){e()}}),this.addChild(this.countdown),this.countdown.setPositionRound(this.width/2,this.height/2),this.countdown.setVisible(!1),this.runAction(new cc.Sequence(new cc.DelayTime(3),new cc.CallFunc(function(){this.text.setVisible(!0)}.bind(this)),new cc.DelayTime(1.5),new cc.CallFunc(function(){this.text.setVisible(!1),this.countdown.setVisible(!0),this.countdown.runAnimation()}.bind(this))))},pauseCountdown:function(){this.countdown.pauseCountdown()},resumeCountdown:function(){this.countdown.resumeCountdown()}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{ROUND_COUNTDOWN_TEXT:{size:25,color:cleverapps.styles.COLORS.COLOR_BROWN},ROUND_COUNTDOWN_TIMER_TEXT:{name:"nostroke",size:50,color:cleverapps.styles.COLORS.COLOR_BROWN}});var TreasureSearchRewardComponent=cc.Node.extend({ctor:function(e){this._super()
;var t=cleverapps.styles.TreasureSearchRewardComponent;this.setAnchorPoint2(),e.addChild(this),this.setPositionRound(t);var s=new cleverapps.Spine(bundles.game.jsons.shovel_json,1);this.addChild(s),s.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.CallFunc(function(){s.setAnimationAndIdleAfter("open","idle")})))}});TreasureSearchRewardComponent.IsAvailable=function(){return-1!==["olympics"].indexOf(cleverapps.config.name)},cleverapps.styles.TreasureSearchRewardComponent={x:{align:"center",dx:140},y:{align:"center",dy:150}};var WordsListComponent=cc.Node.extend({ctor:function(e){this._super(),this.options=e,this.setAnchorPoint2();var a=cleverapps.styles.WordsListComponent,t=this.options.words.map(function(e){var t=this.options.width-2*a.word.padding.x,s=a.word.height,n=new cc.Node;n.setAnchorPoint2(),n.setContentSize2(t,s);var i=this.createWordBg(t,s);n.addChild(i),i.setPositionRound(n.width/2,n.height/2);var o=cleverapps.UI.generateTTFText(e.toUpperCase(),
cleverapps.styles.FONTS.EXTRA_WINDOW_LETTER_TEXT);return n.addChild(o),o.setPositionRound(a.word.text),n}.bind(this)),s=new cleverapps.Layout(t,{direction:cleverapps.UI.VERTICAL,margin:a.words.margin,padding:a.words.padding}),n=new cleverapps.UI.ScrollView(s,{childrenVisibility:cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_LINEAR});n.setContentSize2(this.options.width,Math.min(this.options.height,s.height));var i=new cc.Node;if(i.setAnchorPoint2(),i.setContentSize2(n.width,this.options.height),i.addChild(n),n.setPositionRound(i.width/2,i.height-n.height/2),this.setContentSize2(i.width,i.height+2*a.topPadding),this.addChild(i),i.setPositionRound(this.width/2,this.height/2),a.bg){var o=new cc.Scale9Sprite(bundles.main.frames.light_bg_png);o.setContentSize2(this.getContentSize()),this.addChild(o),o.setLocalZOrder(-1),o.setPositionRound(this.width/2,this.height/2)}},createWordBg:function(e,t){var s=new cc.Scale9Sprite(this.getWordBgImage());if(
cleverapps.styles.WordsListComponent.word.scaleYOnly){var n=t/s.height;s.width=e/n,s.setScale(n)}else s.setContentSize2(e,t);return s},getWordBgImage:function(){return"stacks"===cleverapps.config.subtype?Game.currentGame.board.level.isTricky()?bundles.game.frames.found_word_bg_tricky_png:Game.currentGame.board.level.isHard()?bundles.game.frames.found_word_bg_bonus_png:Game.currentGame.board.level.episode.isBonusRound()?bundles.game.frames.found_word_bg_bonus_png:bundles.game.frames.found_word_bg_png:bundles.main.frames.row_player_png}});cleverapps.styles.WordsListComponent={mouseScrollSpeed:200,word:{height:70,padding:{x:12},text:{x:{align:"center"},y:{align:"center",dy:-5}}},words:{margin:5,padding:{x:0,y:5}},topPadding:4,bg:!0};var MedallionComponent=cc.Node.extend({ctor:function(e){this.options=e,this._super();var t=cleverapps.styles.MedallionComponent;this.setAnchorPoint2(),this.setContentSize2(t),this.setPositionRound(t.positions[cleverapps.wideMode.mode]),this.setLocalZOrder(1e6)
,t.backgroundAnimation&&(this.backgroundAnimation=new cleverapps.Spine(t.backgroundAnimation),this.backgroundAnimation.setAnimation(0,"idle",!0),this.backgroundAnimation.setPosition(this.width/2,this.height/2),this.addChild(this.backgroundAnimation)),this.createContent(),0!==this.content.length&&(this.visible=!1,setTimeout(this.showUp.bind(this),500))},showUp:function(){this.backgroundAnimation?this.runAction(new cc.Sequence(new cc.CallFunc(function(){this.visible=!0,this.backgroundAnimation.setAnimationAndIdleAfter("animation","idle")}.bind(this)),new cc.MoveBy(1.1,0,-cleverapps.styles.MedallionComponent.distance).easing(cc.easeBackOut()))):(this.visible=!0,this.y-=cleverapps.styles.MedallionComponent.distance);var s=function(){var e=this.content[this.contentIndex];if(this.contentView=e.spine,this.contentView.setVisible(!0),this.contentView.setPositionRound(this.width/2,this.height/2),1<e.amount&&!cleverapps.styles.MedallionComponent.noAmountText){var t=cleverapps.UI.generateTTFText(
"x"+e.amount,cleverapps.styles.FONTS.MEDALLION_TEXT);this.contentView.addChild(t),t.setPositionRound(cleverapps.styles.MedallionComponent.textPosition)}this.addChild(this.contentView),e.openAnimation?this.contentView.setAnimationAndIdleAfter(e.openAnimation,e.idleAnimation):this.contentView.setAnimation(0,e.idleAnimation,!0),1!==this.content.length?this.runAction(new cc.Sequence(new cc.DelayTime(3),new cc.CallFunc(function(){this.contentView.setVisible(!1),this.contentView.removeFromParent(),this.contentIndex++,this.contentIndex===this.content.length&&(this.contentIndex=0,this.options.showOnce)?this.hide():s()}.bind(this)))):this.options.showOnce&&setTimeout(this.hide.bind(this),3e3)}.bind(this);s()},createContent:function(){this.content=[],this.contentIndex=0,Object.keys(this.options).forEach(function(e){if("shovels"===e){var t=cleverapps.styles.MedallionComponent.animation&&cleverapps.styles.MedallionComponent.animation.shovels;this.content.push({spine:new cleverapps.Spine(
bundles.game.jsons.shovel_json),openAnimation:t&&t["open"+this.options[e]]||"open",idleAnimation:t&&t["idle"+this.options[e]]||"idle",amount:this.options[e]})}else"clovers"===e?this.content.push({spine:new cleverapps.Spine(bundles.card.jsons.marks_json),idleAnimation:"gem_idle_counter"}):"stars"===e?this.content.push({spine:new cleverapps.Spine(bundles.game.jsons.star_json),openAnimation:"open",idleAnimation:"idle",amount:this.options[e]}):"slot_machine_tickets"===e&&this.content.push({spine:new cleverapps.Spine(bundles.game.jsons.slot_machine_ticket_json),openAnimation:"open",idleAnimation:"idle",amount:this.options[e]})}.bind(this))},hide:function(){this.contentView&&(this.contentView.setVisible(!1),this.contentView.removeFromParent(),this.contentView=void 0),this.backgroundAnimation&&(this.backgroundAnimation.removeFromParent(),this.backgroundAnimation=void 0,this.removeFromParent())}});MedallionComponent.IsAvailable=function(){return-1!==["riddles","heroes","wordsoup","crocword",
"tripeaks","differences","magicwords"].indexOf(cleverapps.config.name)},cleverapps.overrideFonts(cleverapps.styles.FONTS,{MEDALLION_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.MedallionComponent={backgroundAnimation:bundles.game.jsons.medallion_json,width:200,height:200,distance:400,positions:[{x:{align:"left",dx:20},y:{align:"top",dy:300}},{x:{align:"left",dx:160},y:{align:"top",dy:200}},{x:{align:"left",dx:200},y:{align:"top",dy:200}}],textPosition:{x:{align:"center",dx:30},y:{align:"center",dy:-45}}};var RepeatablePattern=cleverapps.Layout.extend({ctor:function(e,t){for(var s=cleverapps.styles.RepeatablePattern,n=Math.ceil(e/new cc.Sprite(t).width),i=[],o=0;o<n;o++){var a=new cc.Sprite(t);i.push(a)}this._super(i,{direction:cleverapps.UI.HORIZONTAL,margin:s.margin}),this.setScale(e/this.width),this.setPositionRound(s)}});cleverapps.styles.RepeatablePattern={margin:0,x:{align:"center"},y:{align:"top",dy:5}};var Change=function(e){this.options=e}
;Change.prototype.isActive=function(){return!0},Change.prototype.calculateDelta=function(){return 0},Change.prototype.createView=function(){};var ChangeView=cc.Node.extend({ctor:function(e){this.options=e,this._super(),this.setVisible(!1),this.showUp()},showUp:function(){this.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.CallFunc(function(){this.setScale(0),this.setVisible(!0)}.bind(this)),new cc.ScaleTo(.6,1).easing(cc.easeBackOut())))},animateChange:function(e){}}),LanternChange=function(e){Change.call(this,e),this.lantern=e.lantern};LanternChange.prototype=Object.create(Change.prototype),(LanternChange.prototype.constructor=LanternChange).prototype.isActive=function(){return this.lantern&&this.lantern.isActive(this.options.level)},LanternChange.prototype.calculateDelta=function(){return 1},LanternChange.prototype.createView=function(e){this.lantern.beforeShownProgress||(this.lantern.beforeShownProgress=Math.max(0,this.lantern.getCurrentStreak()-1))
;var t=new LanternChangeView({before:this.lantern.beforeShownProgress,after:this.lantern.getCurrentStreak()});return e.window.addChild(t),this.lantern.beforeShownProgress=this.lantern.getCurrentStreak(),t};var LanternChangeView=ChangeView.extend({ctor:function(e){this._super(e);var t=cleverapps.styles.LanternChangeView,s=this.lantern=new cleverapps.Spine(bundles.lantern.jsons.lantern_game_json);s.setAnimation(0,"idle_"+this.options.before,!0),this.setLocalZOrder(t.zOrder),this.setAnchorPoint2(),this.setContentSize2(t),this.setScale(t.isInitialScaleZero?0:t.scale),this.addChild(s),s.setPositionRound(this.width/2,this.height/2),this.setPositionRound(cleverapps.clone(t.wideModePositions[cleverapps.wideMode.mode],!0)),this.setVisible(!0)},showUp:function(){},animateChange:function(e){var t=cleverapps.styles.LanternChangeView;this.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.ScaleTo(.3,1.1*t.scale),new cc.ScaleTo(.1,t.scale),new cc.CallFunc(function(){
this.options.before!==this.options.after&&this.lantern.setAnimationAndIdleAfter("charge_"+this.options.after,"idle_"+this.options.after)}.bind(this))))}});cleverapps.styles.LanternChangeView={wideModePositions:[{x:{align:"right",dx:-10},y:{align:"bottom",dy:120}},{x:{align:"right",dx:-10},y:{align:"bottom",dy:120}},{x:{align:"right",dx:-10},y:{align:"bottom",dy:120}}],zOrder:0,width:250,height:250,scale:.5};var VictoryChestChange=function(e){Change.call(this,e)};VictoryChestChange.prototype=Object.create(Change.prototype),(VictoryChestChange.prototype.constructor=VictoryChestChange).prototype.isActive=function(){return cleverapps.styles.VictoryChestChangeView.ChestBlock&&0<this.options.stars},VictoryChestChange.prototype.calculateDelta=function(){return this.options.stars},VictoryChestChange.prototype.createView=function(e){var t=new VictoryChestChangeView({oldChestStars:this.options.oldChestStars});return e.addChild(t),t};var VictoryChestChangeView=ChangeView.extend({ctor:function(e){
var t=cleverapps.styles.VictoryChestChangeView;this._super(e),this.setPositionRound(t.ChestBlock);var s=cleverapps.UI.createScale9Sprite(bundles.menubar.frames.menubar_bg_png);s.setAnchorPoint2(),s.setContentSize2(t.ChestBoard.width,t.ChestBoard.height),s.setPosition(t.ChestBoard.x,t.ChestBoard.y),this.addChild(s),this.chestBoard=s;var n=new cleverapps.Spine(bundles.starchest_window.jsons.star_chest_spine_json,t.Chest.scale);n.setPosition(t.Chest.x,t.Chest.y),n.setAnimation(0,"ready_to_open",!0),this.addChild(n),this.chest=n;var i=cleverapps.UI.generateImageText(this.options.oldChestStars+"/"+cleverapps.StarChest.GOAL_AMOUNT,cleverapps.styles.FONTS.VICTORY_CHEST_TEXT);i.setAnchorPoint(1,.5),i.setPosition(s.width+t.ChestBoard.text.x,s.height/2+t.ChestBoard.text.y),s.addChild(i),this.chestBoardText=i},animateChange:function(e){this.runAction(new cc.Sequence(new cc.DelayTime(3),new cc.CallFunc(function(){this.runAction(new cc.Sequence(new cc.ScaleTo(.3,1.3),new cc.CallFunc(function(){
cleverapps.UI.animateDelta(e,{x:this.chestBoardText.x-this.chestBoardText.width/2,y:this.chestBoardText.y,dy:cleverapps.styles.VictoryChestChangeView.ChestBoard.dy,parent:this.chestBoard}),this.chestBoardText.setString(cleverapps.starChest.stars+"/"+cleverapps.StarChest.GOAL_AMOUNT)}.bind(this)),new cc.ScaleTo(.3,1)))}.bind(this)),new cc.DelayTime(.5),new cc.CallFunc(function(){cleverapps.starChest.locked?this.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.ScaleTo(.4,0),new cc.RemoveSelf)):(this.chest.setAnimation(0,"opening",!1),this.chest.setCompleteListener(function(){this.runAction(new cc.Sequence(new cc.ScaleTo(.5,0),new cc.RemoveSelf))}.bind(this)))}.bind(this))))}});cleverapps.styles.VictoryChestChangeView={ChestBlock:{x:{align:"center",dx:0},y:{align:"top",dy:-100}},ChestBoard:{x:80,y:5,dy:30,width:270,height:55,text:{x:-25,y:1}},Chest:{x:-55,y:0,scale:.5}};var TournamentBookChange=function(e){Change.call(this,e),this.mission=void 0}
;TournamentBookChange.prototype=Object.create(Change.prototype),(TournamentBookChange.prototype.constructor=TournamentBookChange).prototype.isActive=function(){return!("board"!==cleverapps.config.type||cleverapps.isKnockoutGame()||void 0===this.mission||!this.options.game.canPayReward(GameBase.REWARD_BACKGROUND_CLOVER)||MedallionComponent.IsAvailable())},TournamentBookChange.prototype.calculateDelta=function(){return this.options.game.rewards[GameBase.REWARD_BACKGROUND_CLOVER]},TournamentBookChange.prototype.createView=function(e){var t=new TournamentBookChangeView({place:this.options.game.tournament&&this.options.game.competition&&this.options.game.competition.calcPlace()+1,isFinished:this.mission.result+this.mission.currency>=TreasureSearch.GEMS});return e.addChild(t),t};var TournamentBookChangeView=ChangeView.extend({ctor:function(e){this._super(e);var t=cleverapps.styles.TournamentBookChangeView;this.setAnchorPoint2(),this.setContentSize2(t)
;var s=this.animation=new cleverapps.Spine(bundles.main.jsons.tournament_book_json,1);s.setPosition(this.width/2,this.height/2),this.addChild(s),this.setPositionRound(t)},showUp:function(){},animateChange:function(e){this.runAction(new cc.Sequence(new cc.DelayTime(1.5),new cc.CallFunc(function(){this.setVisible(!0),this.animation.setAnimation(0,"animation",!1)}.bind(this))))}});cleverapps.styles.TournamentBookChangeView={width:300,height:400,x:{align:"center"},y:{align:"center",dy:190}},cleverapps.ConsoleStream=function(){this.messages=[],this.enabled=!1,cleverapps.config.debugMode&&(cleverapps.ConsoleStream.CONSOLE_STREAM_MAX_DURATION=cleverapps.parseInterval("2 minutes")),(cleverapps.consoleStreamPermanent||cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.CONSOLE_STREAM_START_TIME))&&this.enable()},cleverapps.ConsoleStream.prototype.enable=function(e){if(!cleverapps.config.vkcors){var t=cleverapps.castType(cleverapps.DataLoader.load(
cleverapps.DataLoaderTypes.CONSOLE_STREAM_START_TIME,{raw:!0}));if(t||(t=Date.now(),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.CONSOLE_STREAM_START_TIME,t)),cleverapps.consoleStreamPermanent||t+cleverapps.ConsoleStream.CONSOLE_STREAM_MAX_DURATION>Date.now()){if(this.enabled)return;this.enabled=!0,this.overrideConsole()}else e&&e()}},cleverapps.ConsoleStream.prototype.disable=function(){cleverapps.consoleStreamPermanent||(cleverapps.DataLoader.remove(cleverapps.DataLoaderTypes.CONSOLE_STREAM_START_TIME),this.enabled&&(this.enabled=!1,this.baseConsoleLog&&(console.log=this.baseConsoleLog,this.baseConsoleLog=void 0),this.baseConsoleError&&(console.error=this.baseConsoleError,this.baseConsoleError=void 0)))},cleverapps.ConsoleStream.prototype.sendMessages=function(){if(0!==this.messages.length){var e=new cleverapps.ReportStream("");e.data=["CONSOLE OUTPUT REDIRECT"].concat(this.messages),e.send(!0),this.baseConsoleLog&&this.baseConsoleLog(
"sended console "+this.messages.length+" messages"),this.messages=[]}},cleverapps.ConsoleStream.prototype.overrideConsole=function(){this.baseConsoleLog=console.log,this.baseConsoleError=console.error,console.error=console.log=function(){if(-1!==[cc.sys.OS_IOS,cc.sys.OS_OSX].indexOf(cc.sys.os))for(var e=0;e<arguments.length;e++)if("undefined"!=typeof isNodeOrElement&&isNodeOrElement(arguments[e]))return;var t=Array.from(arguments).map(function(e){return JSON.stringify(e,cleverapps.ConsoleStream.serializer())}).join("\n");this.messages.push(t),this.sendMessages(),this.baseConsoleLog.apply(this,arguments)}.bind(this)},cleverapps.ConsoleStream.serializer=function(n,i){var o=[],a=[];return null==i&&(i=function(e,t){return o[0]===t?"[Circular ~]":"[Circular ~."+a.slice(0,o.indexOf(t)).join(".")+"]"}),function(e,t){if(0<o.length){var s=o.indexOf(this);~s?o.splice(s+1):o.push(this),~s?a.splice(s,1/0,e):a.push(e),~o.indexOf(t)&&(t=i.call(this,e,t))}else o.push(t);return null==n?t:n.call(this,e
,t)}},cleverapps.ConsoleStream.CONSOLE_STREAM_MAX_DURATION=cleverapps.parseInterval("1 day"),cleverapps.Reports={streams:{},get:function(e){return void 0===cleverapps.Reports.streams[e]&&(cleverapps.Reports.streams[e]=new cleverapps.ReportStream(e)),cleverapps.Reports.streams[e]},push:function(e,t){cleverapps.Reports.get(e).push(t)}},cleverapps.ReportStream=function(e){this.data=["REPORT: "+e.toUpperCase()]},cleverapps.ReportStream.prototype.push=function(e){this.data.push(e)},cleverapps.ReportStream.prototype.send=function(e){var t=[new Date+""];this.data.forEach(function(e){t.push(e)}),cleverapps.environment&&t.push("Screen: "+cleverapps.environment.getScreen()),levels&&levels.user&&(t.push("Episode: "+cleverapps.environment.episodeNo),t.push("Level: "+cleverapps.environment.levelNo),t.push("User id: "+levels.user.id)),t.push("Version: "+cleverapps.config.version),t.push("Source: "+cleverapps.User.calcSource()),cleverapps.config&&cleverapps.config.name&&t.push(
"Name: "+cleverapps.config.name),t.push(window&&window.navigator?window.navigator.userAgent:"???"),t=(t=(t=t.join(" - ")).replace(/(?:\r\n|\r|\n)/g," - ")+" ").replace(/(\")/g,""),e||console.log(t),cleverapps.isLocalhost()||cleverapps.RestClient.sendRaw(cleverapps.RestClient.METHODS.POST,cleverapps.LOG_ERROR_URL,t)},cleverapps.ReportStream.send=function(e,t){var s=new cleverapps.ReportStream(e);s.push(t),s.send()},cleverapps.ReportStream.debug=cleverapps.throttle(100,function(e){var t=new cleverapps.ReportStream("DebugMessage");Array.isArray(e)||(e=[e]),e.forEach(function(e){t.push(e)}),t.send()}),cleverapps.ErrorHandler={SEND_INTERVAL:"1 hour",lastSend:0,getBaseMessage:function(){var e=[new Date+""];return cleverapps.environment&&e.push("Screen: "+cleverapps.environment.getScreen()),cleverapps.User.calcSource&&e.push("Source: "+cleverapps.User.calcSource()),cleverapps.config&&cleverapps.config.name&&e.push("Name: "+cleverapps.config.name),
cleverapps.config&&cleverapps.config.title&&e.push("Title: "+cleverapps.config.title),cleverapps.config&&cleverapps.config.version&&e.push("Version: "+cleverapps.config.version),levels&&levels.user&&(e.push("Episode: "+cleverapps.environment.episodeNo),e.push("Level: "+cleverapps.environment.levelNo),e.push("User id: "+levels.user.id)),cleverapps&&cleverapps.settings&&e.push("Language: "+cleverapps.settings.language),e.push(window&&window.navigator?window.navigator.userAgent:"???"),e},onerror:function(e,t,s,n,i){var o=cleverapps.ErrorHandler.getBaseMessage();return i&&i.arguments&&o.push("Arguments: "+i.arguments),cleverapps.newSceneStack&&i.stack&&(i.stack+=cleverapps.newSceneStack),i&&i.stack?(o.push("Message: "+e),o.push("Line: "+s),o.push("Column: "+n),o.push(i.stack)):(o.push("Message: "+e),o.push("URL: "+t),o.push("Line: "+s),o.push("Column: "+n),o.push("Error: "+JSON.stringify(i))),o=(o=o.join(" - ")).replace(/(?:\r\n|\r|\n)/g," - ")+" ",window&&window.assetsFolder&&(
o=o.replace(new RegExp(window.assetsFolder,"g"),"")),cleverapps.ErrorHandler.needIgnore(o)||(cleverapps.config.workerTaskId&&cleverapps.RestClient.post("http://localhost:3201/tasks/finish/"+cleverapps.config.workerTaskId,{result:o}),cleverapps.ErrorHandler._onerror(o)),!1},needIgnore:function(t){return cleverapps.ErrorHandler.IGNORED_ERRORS.some(function(e){return t&&-1!==t.indexOf(e)})},logError:function(e,t){var s=this.getBaseMessage();s.push("Message: "+e),t&&t.arguments&&s.push("Arguments: "+t.arguments),t&&t.stack&&s.push(t.stack),s=(s=s.join(" - ")).replace(/(?:\r\n|\r|\n)/g," - ")+" ",cleverapps.ErrorHandler._onerror(s)},_onerror:function(e){if(Date.now()-cleverapps.ErrorHandler.lastSend>=cleverapps.parseInterval(this.SEND_INTERVAL)&&(this.send(e),cleverapps.ErrorHandler.lastSend=Date.now()),cc.sys.isWebView){var t=cc.director.getTotalFrames(),s=function(){if(t===cc.director.getTotalFrames()||!cleverapps.metha)return cleverapps.eventLogger&&cleverapps.eventLogger.logEvent(
"webview_onerror_reload_silent"),cleverapps.throwAsync&&cleverapps.throwAsync("WebView error location reload silent"),void window.location.reload();var e={focus:"OnErrorRestartWindow",action:function(e){cleverapps.eventLogger&&cleverapps.eventLogger.logEvent("webview_onerror_reload_window"),cleverapps.throwAsync&&cleverapps.throwAsync("WebView error location reload window"),new RestartWindow({contentMessage:"RestartWindow.OnError"}),cleverapps.metha.onceNoWindowsListener=e}};cleverapps.metha.isFocused()?cleverapps.metha.distract(e):cleverapps.metha.display(e)};setTimeout(function(){t===cc.director.getTotalFrames()&&(cc.game.pause(),cc.game.resume(),setTimeout(s,500))},500)}},send:function(e,t){console.log(e),cleverapps.RestClient.sendRaw(cleverapps.RestClient.METHODS.POST,cleverapps.LOG_ERROR_URL,e),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.ERROR_AMOUNT)}},window.onerror=cleverapps.ErrorHandler.onerror,cleverapps.LOG_ERROR_URL="/log/",cleverapps.ErrorHandler.IGNORED_ERRORS=[
"html5.api.gamedistribution.com"],cleverapps.DataLoader={enabled:!0,corrupted:!1,_onSavedCallbacks:[],data:{},checksum:0,_queue:{},haveSavedData:function(){return void 0!==cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.ID)},save:function(e,t,s){this._queue[e]={data:t,options:s},this._runSaveTimeout()},onSaved:function(e){void 0===this._saveTimeout?e():this._onSavedCallbacks.push(e)},processSaveQueue:function(){for(var e in this._queue)this._queue[e].data===cleverapps.DataLoader.REMOVE?this._removeProcess(e,this._queue[e].options):this._saveProcess(e,this._queue[e].data,this._queue[e].options);this._queue={},this._saveTimeout=void 0;for(var t=0;t<this._onSavedCallbacks.length;t++)this._onSavedCallbacks[t]();this._onSavedCallbacks=[],this.saveChecksum()},_runSaveTimeout:function(){void 0===this._saveTimeout&&(this._saveTimeout=setTimeout(this.processSaveQueue.bind(this),1e3))},_saveProcess:function(e,t,s){var n=(s=s||{}).limit||cleverapps.DataLoader.FIFO_LIMIT,i=s.fifoKey,o=s.raw
;if(i&&!this.hasKey(e)){for(var a=this.load(i)||[];a.length>=n;)this.remove(a[0],i),a=this.load(i);a.push(e),this._saveProcess(i,a),this._saveProcess(e,t)}else{var r=o?t+"":JSON.stringify(t);if(this.addChecksum(e,this.data[e]),this.addChecksum(e,r),this.data[e]=r,!this.enabled||this.corrupted)return;if(e!==cleverapps.DataLoaderTypes.CLIENT_SESSION&&(this.checkClientSession(),this.corrupted))return;try{if(void 0!==cleverapps.DataLoader.CLIENT_SESSION&&e!==cleverapps.DataLoaderTypes.CLIENT_SESSION&&!cc.sys.localStorage.getItem(cleverapps.DataLoaderTypes.CLIENT_SESSION))throw cleverapps.eventLogger&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LOCALSTORAGE_CLEARED),1;if(r&&r.length>cleverapps.DataLoader.VALUE_LENGTH_LIMIT&&cleverapps.ErrorHandler.logError("Attempt to save huge value ("+r.length+") to localstorage key - "+e),cc.sys.localStorage.setItem(e,r),!cc.sys.isNative&&cc.sys.localStorage.getItem(e)!==r
)throw e!==cleverapps.DataLoaderTypes.CLIENT_SESSION&&cleverapps.eventLogger&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LOCALSTORAGE_ERROR_SET_ITEM),2}catch(e){cc.sys.localStorage.removeItem(cleverapps.DataLoaderTypes.SESSION_SAVE_KEY),this.corrupted=!0}}},getCharValues:function(e){for(var t,s=[],n=0;n<e.str.length;n++)t=e.str.charCodeAt(n),e.encode?s.push(t<=65517?t+18:t):s.push(t<=65535?t-18:t);return s},hasKey:function(e){var t;return this._queue[e]?t=this._queue[e].data:(this.data.hasOwnProperty(e)||(this.data[e]=cc.sys.localStorage.getItem(e)),t=this.data[e]),null!=t},checkClientSession:function(){if(void 0!==cleverapps.DataLoader.CLIENT_SESSION){var e=cc.sys.localStorage.getItem(cleverapps.DataLoaderTypes.CLIENT_SESSION);if(e!==cleverapps.DataLoader.CLIENT_SESSION&&e)return this.corrupted=!0,cleverapps.eventLogger&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LOCALSTORAGE_SESSION_EXPIRED),cleverapps.synchronizer&&cleverapps.synchronizer.clientSessionExpired(),!1}
return!0},load:function(e,t){if(this._queue[e]){if((n=this._queue[e].data)===cleverapps.DataLoader.REMOVE)return;return n=this._queue[e].options&&this._queue[e].options.raw?n+"":n,t&&t.raw?JSON.stringify(n):n}(!this.data.hasOwnProperty(e)||t&&t.forceLoad)&&this.enabled&&(this.data[e]=cc.sys.localStorage.getItem(e));var s=this.data[e];if(null!=s){if(t&&t.raw)return s;var n;if((n=JSON.parse(s)).dataCodes){var i=this.getCharValues({str:n.dataCodes});n=JSON.parse(String.fromCharCode.apply(null,i))}return n}},remove:function(e,t){this._queue[e]={data:cleverapps.DataLoader.REMOVE,options:t},this._runSaveTimeout()},_removeProcess:function(e,t){if(this._queue[e]&&delete this._queue[e],this.addChecksum(e,this.data[e]),delete this.data[e],this.enabled&&!this.corrupted&&cc.sys.localStorage.removeItem(e),t){var s=this.load(t);if(s){var n=s.indexOf(e);0<=n&&(s.splice(n,1),this.save(t,s))}}},cleanAll:function(){if(window.localStorage)for(var e in console.log(
"Clearing by prefix: "+cleverapps.config.prefix),this._queue={},this.data={},cc.sys.localStorage.setItem=function(){},window.localStorage)0===e.indexOf(cleverapps.config.prefix)&&-1===e.indexOf("_editor_episode_")&&-1===e.indexOf("_constant")&&(console.log("Clearing LOCALSTORAGE:"+e),cc.sys.localStorage.removeItem(e))},isEnabled:function(){if(!cc.sys.isNative)try{return window.localStorage.setItem("test","testValue"),"testValue"!==window.localStorage.getItem("test")?!1:(window.localStorage.removeItem("test"),!0)}catch(e){return!1}return!0},addChecksum:function(e,t){e!==cleverapps.DataLoaderTypes.CHECKSUM&&(this.checksum=this.checksum^cleverapps.hashCode(t))},loadChecksum:function(){return cleverapps.castType(cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.CHECKSUM))},saveChecksum:function(){cleverapps.DataLoader._saveProcess(cleverapps.DataLoaderTypes.CHECKSUM,this.checksum)}},cleverapps.DataLoader.REMOVE=-12345,cleverapps.DataLoader.FIFO_LIMIT=10,
cleverapps.DataLoader.VALUE_LENGTH_LIMIT=1e7,cleverapps.DataLoader.resetClientSession=function(){cleverapps.DataLoader.CLIENT_SESSION=void 0,cleverapps.DataLoader.enabled=!0,cleverapps.DataLoader.corrupted=!1,cc.sys.isNative||(cleverapps.DataLoader.CLIENT_SESSION=Math.floor(1e9*Math.random())+1+"",cleverapps.DataLoader._saveProcess(cleverapps.DataLoaderTypes.CLIENT_SESSION,cleverapps.DataLoader.CLIENT_SESSION,{raw:!0}),cleverapps.DataLoader.saveChecksum(),cleverapps.DataLoader.corrupted&&(cleverapps.DataLoader.enabled=!1,cleverapps.DataLoader.corrupted=!1,cleverapps.DataLoader.CLIENT_SESSION=void 0))},cleverapps.DataLoader.init=function(){var t=cleverapps.config.name+cleverapps.social.getLocalStoragePreffix();if(cleverapps.DataLoaderTypes={ID:t,HISTORY:t+"_history",CLIENT_SESSION:t+"_client_session",USERS_SYNCS:t+"_users_syncs",CHECKSUM:t+"_checksum",SETTINGS:t+"_settings",DAILY_CHEST:t+"_periodicBonus",FRIENDS:t+"_friends",INVITABLE_FRIENDS:t+"_invitable_friends",
BONUS_GAME_CHEST:t+"_bonus_game_chest",TUTORIAL:t+"_tutorial",LEVEL_HINTS:t+"_level_hints",PRODUCT_VIDEO_PROGRESS:t+"_v_p_",GAME_SAVE_FIFO:t+"_game_save_fifo",PAYMENTS_HISTORY:t+"_my_payments",PAYMENTS_HISTORY_5_PRICE:t+"_my_payments_5_price",SALE_MANAGER:t+"_sale_manager",SALE:t+"_sale",SERVER_VERSION:t+"_server_version",SESSION_SAVE_KEY:t+"_session",FAKE_FACEBOOK_LOGGING_TIME:t+"_fake_facebook_logging_time",PROMOTION:t+"_promotion",LOCALIZATION_MANAGER:t+"_localization_manager",CLIENT_COMPENSATE_PRODUCTS:t+"_client_compensate_products",RESULT_FIFO:t+"_result_fifo",RESULTS_FIFO:t+"_results_fifo",LIVES:t+"_lives",BOOSTERS_COUNTER:t+"_boosters_counter",STAR_CHEST:t+"_star_chest",XSOLLA_ACCESS_TOKEN:t+"_xsolla_access_token",BONUS_EPISODES_PROGRESS:t+"_bonus_episodes_progress",SERVER_FLAGS:t+"_server_flags",HELP_FROM_FRIENDS:t+"_help_from_friends",FORCES:t+"_forces",FREE_BOMB_MOVES:t+"_free_bomb_moves",TEMP_GOODS:t+"_temp_goods",SORTER:t+"_sorter",FRIEND_REQUESTS:t+"_friend_requests",
FAKE_REQUESTS:t+"_fake_request_time",ASKED_LIVES:t+"_asked_lives",ASKED_STARS:t+"_asked_stars",BOUNTY:t+"_bounty",PACK:t+"_pack",DAILY_TASKS:t+"_daily_tasks",BATTLE_PASS:t+"_battle_pass",BATTLEPASS_POINTS_SPAWN:t+"_battlepass_points_spawn",WIN_STREAK:t+"_win_seria",LOCAL_PUSHES:t+"_local_pushes",TOURNAMENT_COMPETITORS:t+"_tournament_competitors",TOURNAMENT_PLAYERS:t+"_tournament_players",TOURNAMENT_RECORD:t+"_tournament_record",PLAY_SESSION:t+"_play_session",REWARDED_ADS_MANAGER:t+"_rewarded_ads",AD_ICON:t+"_adicon",SPECIAL_ENERGY_OFFER_LAST_TIME:t+"_special_energy_offer_last_time",SPECIAL_OFFER_LAST_TIME:t+"_special_offer_last_time",LEVEL_ATTEMPTS:t+"_level_attempts",MONSTER_SPAWN:t+"_monster_spawn",MONSTER_ORDER:t+"_monster_order",LAST_VIEWED_FRIEND_REQUEST:t+"_last_viewed_friend_request",MISSIONS:t+"_missions",COMPETITION:t+"_competition",COMPETITION_PLAYERS:t+"_competition_players",COMPETITION_STATISTICS:t+"_competition_statistics",PLACEMENTS:t+"_placements",
PIGGY_BANK:t+"_piggy_bank",SUBSCRIPTION:t+"_subscription",GROWTHFUND:t+"_growthfund",GUN:t+"_gun",INSTANT_SHORTCUT_CREATED:t+"_instant_shortcut_created",INSTANT_BOT_CREATED:t+"_instant_bot_created",INSTANT_PAYMENTS:t+"_instant_payments",WEBVIEW_PAYMENTS:t+"_webview_payments",HEROES:t+"_heroes",DAILY_CUP:t+"_daily_cup",DAILY_CUP_RULES:t+"_daily_cup_rules",MINI_GAME_RECORD:t+"_mini_game_record",INFORMATION:t+"_info",SYNC:t+"_sync",FRIDAY_SALE:t+"_friday_sale",LANTERN:t+"_lantern",FARM:t+"_clockmaker_a",HOMEFIX:t+"_home",DRAUGIEM_AUTH_DATA:t+"_draugiem_auth_data",DAILY_LEVEL:t+"_daily_level",KNOCKOUT:t+"_knockout",WEEKLY_CUP:t+"_weekly_cup",WEEKLY_CUP_TOP:t+"_weekly_cup_top",COOKIE_JAR:t+"_cookie_jar",RATED:t+"_rated",APPLE_SOCIAL:t+"_apple_social",SIMPLE:t+"_simple",JACKPOT_LAST_APPEAR_TIME:t+"_jackpot_last_appear_time",CARD_SKINS:t+"_card_skins",ADMIN_CHART:t+"_admin_chart",ZOOM:t+"_zoom",SCROLL:t+"_scroll",QUESTS_LOCAL:t+"_quests_local",UNIT_SAVER_KICKOUTS:t+"_unit_saver_kickouts",
UNIT_SAVER_AMOUNT:t+"_unit_saver_amount",UNITS_LIBRARY:t+"_units_library",UNITS_SHOP:t+"_units_shop",CHAT:t+"_chat",CONSOLE_STREAM_START_TIME:t+"_console_stream_start_time",RESET_REPORT:t+"_reset_report",ADS_LIMITS_DATA:t+"_ads_limits_data",ENERGY_PRODUCTS:t+"_energy_products",CURRENT_MINI_GAME:t+"_current_mini_game"},"function"==typeof cc.sys.localStorage.getData)console.log("DataLoader.getData read single batch"),cleverapps.DataLoader.data=cc.sys.localStorage.getData();else if(cc.sys.isNative)console.log("DataLoader.getData cant read all data");else try{void 0!==window.localStorage&&window.localStorage&&Object.keys(window.localStorage).forEach(function(e){0===e.indexOf(t)&&(this.data[e]=cc.sys.localStorage.getItem(e))}.bind(this))}catch(e){console.warn("DataLoader.getData cant read all data",e)}var e=this.loadChecksum();for(var s in this.data)this.addChecksum(s,this.data[s]);var n=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.ID);(cleverapps.DataLoader.hasKey(
cleverapps.DataLoaderTypes.CHECKSUM)||Versions.compare("1.237.0",n&&n.version)<0)&&(this.checksumMatch=this.checksum===e,this.checksumMatch||console.log("checksum different")),this.saveChecksum(),cleverapps.DataLoader.resetClientSession()},cleverapps.WebViewData=function(){},cleverapps.WebViewData.prototype.init=function(e){webkitMessage("localStorage",{action:"init"}),this.initCallback=e},cleverapps.WebViewData.prototype.onInit=function(e,t){var s=JSON.parse(e);Object.keys(s).forEach(function(t){try{s[t]=decodeURIComponent(s[t])}catch(e){console.log("LocalStorage key - "+t+" decode error.")}}),this.localStorageData=s,t=JSON.parse(decodeWebViewData(t)),console.log("WebViewData.init data - "+JSON.stringify(t)),this.sourceApplicationUrl=t.sourceApplicationUrl,this.deviceVersion=t.deviceVersion,this.deviceName=t.deviceName,this.advertisingId=t.advertisingId,this.langCode=t.langCode,this.appleSocialAvailable=t.appleSocial,console.log(
"device version "+this.deviceVersion+" device name "+this.deviceName),console.log("advertisingId "+this.advertisingId),console.log("langCode "+this.langCode),console.log("appleSocialAvailable "+this.appleSocialAvailable),this.initCallback&&(this.initCallback(),delete this.initCallback)},cleverapps.Availables={PERIODIC_BONUS:{episode:0,level:4},LEADER_BOARD:{episode:1,level:3},FRIEND_REQUESTS:{episode:0,level:6},BONUS_ROUND:{episode:0,level:10},DAILY_TASKS:{episode:2,level:13},MOVES:{episode:0,level:4},CREATE_SHORTCUT:{episode:0,level:5}},"merge"===cleverapps.config.type&&(cleverapps.Availables.DAILY_TASKS={episode:0,level:7}),"wondermerge"===cleverapps.config.name&&(cleverapps.Availables.DAILY_TASKS={disabled:!0}),cleverapps.Settings=function(e){this.onChangeSoundListener=function(){},this.onChangeMusicListener=function(){},this.onChangeVibroListener=function(){},this.onChangeLanguageListener=function(){},this.load(),this.updateFrameRateByFpsMode()},
cleverapps.Settings.getAvailableLanguages=function(){return cleverapps.config.languages?cleverapps.config.languages:projects.default.languages},cleverapps.Settings.getDefaultLanguage=function(){var e=cleverapps.Settings.getAvailableLanguages();if(1===e.length)return e[0];var t=cc.sys.language;if(t===cc.sys.LANGUAGE_DUTCH&&(t="nl"),-1===e.indexOf(t)||t===cc.sys.LANGUAGE_ENGLISH){for(var s=cleverapps.social.getDefaultLanguages(),n=0;n<s.length;n++){var i=s[n];if(-1!==e.indexOf(i))return i}return cc.sys.LANGUAGE_ENGLISH}return t},cleverapps.Settings.prototype.getSaveInfo=function(e){var t={sound:this.sound,music:this.music,vibro:this.vibro,language:this.language,fpsMode:this.fpsMode};return e&&(t.height=this.height),t},cleverapps.Settings.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SETTINGS,this.getSaveInfo(!0)),cleverapps.synchronizer.addUpdateTask("settings")},cleverapps.Settings.prototype.loadData=function(e){void 0===e?(this.sound=!0,this.music=!0,
this.vibro=!0,this.language=cleverapps.Settings.getDefaultLanguage(),this.fpsMode=cleverapps.Settings.FPS_MODE_AUTO,this.save()):(this.sound=e.sound,this.music=e.music,this.vibro=void 0===e.vibro||e.vibro,this.language=e.language,this.height=e.height,this.manualResolution=e.manualResolution,this.manualResolution&&(this.resolution=this.manualResolution),this.fpsMode=void 0===e.fpsMode?cleverapps.Settings.FPS_MODE_AUTO:e.fpsMode),void 0===this.language&&(this.language=cleverapps.Settings.getDefaultLanguage())},cleverapps.Settings.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SETTINGS);this.loadData(e)},cleverapps.Settings.prototype.toggleSound=function(){this.sound=!this.sound,this.save(),this.onChangeSoundListener()},cleverapps.Settings.prototype.toggleMusic=function(){this.music=!this.music,cleverapps.audio.onChangeMusic(),this.save(),this.onChangeMusicListener()},cleverapps.Settings.prototype.toggleVibro=function(){this.vibro=!this.vibro,
this.save(),this.onChangeVibroListener()},cleverapps.Settings.prototype.setLanguage=function(e){this.language=e,this.save(),this.onChangeLanguageListener()},cleverapps.Settings.prototype.calcHeight=function(){var e=cc.view.getFrameSize().height;return cleverapps.isInstant()||"undefined"!=typeof window&&window.screen&&window.screen.height&&(e=Math.max(e,window.screen.height)),cleverapps.Mobage.isAppropriate()&&(e=cleverapps.Mobage.HEIGHT),this.height!==e&&(this.height=e,this.save()),e},cleverapps.Settings.prototype.calcResolution=function(){if(void 0!==this.resolution&&resolutions[this.resolution])return this.resolution;var e=this.calcHeight(),t=1;cc.sys.isNative||(t=Math.min(2,window.devicePixelRatio||1));var s=e*t,n=Object.keys(resolutions),i=n.filter(function(e){return resolutions[e].mobile});0<i.length&&(cc.sys.isMobile?n=i:i.length<n.length&&(n=cleverapps.substract(n,i))),n=n.sort(function(e,t){return resolutions[e].scale-resolutions[t].scale});for(var o=function(e){
var t=e.scale*cleverapps.styles.SCENE_HEIGHT;return s<=t?t-s:100*(s-t)},a=0,r=o(resolutions[n[a]]),l=1;l<n.length;l++){var c=o(resolutions[n[l]]);c<r&&(r=c,a=l)}return this.resolution=n[a]},cleverapps.Settings.prototype.setManualResolution=function(e){this.manualResolution=e;var t=this.getSaveInfo();t.manualResolution=this.manualResolution,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SETTINGS,t),cleverapps.DataLoader.processSaveQueue(),window.location.reload()},cleverapps.Settings.prototype.updateFrameRateByFpsMode=function(){},cleverapps.Settings.prototype.setFpsMode=function(e){this.fpsMode=e,this.updateFrameRateByFpsMode(),this.save()},cleverapps.Settings.SOURCE_LOAD_LOW_THRESHOLD=3e4,cleverapps.Settings.FPS_MODE_AUTO=-1,cleverapps.Settings.FPS_MODE_LOW=0,cleverapps.Settings.FPS_MODE_HIGH=1;var Event=function(e){this.features=e.features||[],this.options=e.options||{},this.projects=e.projects,this.networks=e.networks,this.start=this.convertTimezone(e.start),
this.finish=this.convertTimezone(e.finish),this.debug=e.debug,this.toolApplicable=e.toolApplicable};Event.prototype.convertTimezone=function(e){var t=new Date(e);return new Date(t.getTime()+t.getTimezoneOffset()*cleverapps.parseInterval("1 minute"))},Event.prototype.isRunning=function(){return this.start.getTime()<=Date.now()&&Date.now()<=this.finish.getTime()},Event.prototype.getTimeBeforeStart=function(){return this.start>new Date?this.start-new Date:0},Event.prototype.getTimeLeft=function(){return this.finish.getTime()-Date.now()},Event.prototype.activate=function(){};var EventManager=function(){this.currentFeatures={},this.events=cc.loader.getRes(bundles.main.jsons.friday_schedule)||[],this.setCurrentFeatures()};EventManager.prototype.isActive=function(e){return this.currentFeatures[e]&&this.currentFeatures[e].isRunning()},EventManager.prototype.listCurrentFeatures=function(){return Object.keys(this.currentFeatures).filter(function(e){return this.currentFeatures[e].isRunning()},
this)},EventManager.prototype.getFeatureEvent=function(e){return this.currentFeatures[e]},EventManager.prototype.isEventApplicable=function(e){return cleverapps.config.debugMode&&void 0!==e.toolApplicable?e.toolApplicable:!!e.isRunning()&&((!e.networks||-1!==e.networks.indexOf(cleverapps.User.calcSource()))&&((!e.projects||-1!==e.projects.indexOf(cleverapps.config.name))&&!(e.debug&&!cleverapps.config.debugMode)))},EventManager.prototype.setCurrentFeatures=function(){var e=this.events.map(function(e){return new Event(e)}).filter(this.isEventApplicable.bind(this));this.currentFeatures={},e.forEach(function(t){t.features.forEach(function(e){this.currentFeatures[e]=t}.bind(this)),t.activate()},this)},EventManager.prototype.getNextFeatureEvent=function(t){return this.events.map(function(e){return new Event(e)}).filter(function(e){return-1!==e.features.indexOf(t)&&((!e.networks||-1!==e.networks.indexOf(cleverapps.User.calcSource()))&&((!e.projects||-1!==e.projects.indexOf(
cleverapps.config.name))&&(!(e.debug&&!cleverapps.config.debugMode)&&0<e.getTimeBeforeStart())))}).sort(function(e,t){return e.start>t.start?1:-1})[0]};var CommunityManager=function(){var e=cleverapps.User.calcChannel("promo");e&&this.update(e)};CommunityManager.prototype.update=function(e){var t=function(e){this.reward=e}.bind(this);cleverapps.RestClient.post("/community/"+cleverapps.user.id+"/"+e,{},t,function(e){console.log("failed updating community",e)})},CommunityManager.prototype.isRewardAvailable=function(){return this.reward},CommunityManager.prototype.receiveReward=function(){cleverapps.metha.display({focus:"RewardedCommunityManagerReward",action:function(e){new RewardWindow({reward:this.reward}),this.reward=void 0,cleverapps.metha.onceNoWindowsListener=e}.bind(this)})};var Placements=function(){this.data=this.initialize(),this.sortKeys(),this.load(),cleverapps.whenAllInitialized(function(){this.run(Placements.STARTUP)}.bind(this)),
cleverapps.metha.onFocusLostListenerPlacements=function(){cleverapps.environment.isMainScene()?this.run(Placements.FREE_FOCUS_MAIN):cleverapps.environment.isGameScene()?this.run(Placements.FREE_FOCUS_GAME):this.run(Placements.FREE_FOCUS_OTHER),cleverapps.metha.isFocused()||cleverapps.environment.isMethaScene()&&this.run(Placements.FREE_FOCUS_METHA)}.bind(this),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,cleverapps.throttle(1e3,function(){this.run(Placements.ONSHOW_NO_FOCUS_CHECK),setTimeout(this.runWhenFreeFocus.bind(this,Placements.ONSHOW),300)}.bind(this)))};Placements.prototype.runWhenFreeFocus=function(e){cleverapps.metha.whenFreeFocus(this.run.bind(this,e))},Placements.prototype.sortKeys=function(){this.sortedKeys=Object.keys(this.data),this.sortedKeys.sort(function(e,t){return e=this.data[e],((t=this.data[t]).priority||0)-(e.priority||0)}.bind(this)),this.keysByType={}},Placements.prototype.listKeys=function(t){
return this.keysByType[t]?this.keysByType[t]:this.keysByType[t]=this.sortedKeys.filter(function(e){return 0!=(this.data[e].type&t)},this)},Placements.prototype.initialize=function(){var s="merge"===cleverapps.config.type;return{dailyCupReward:{type:Placements.FREE_FOCUS,filter:function(){return DailyCup.IsAvailable(DailyCup.TYPE_DAILY)&&void 0!==cleverapps.dailyCup.calcRewardPlace()&&cleverapps.environment.isDailyCupScene()},action:function(){cleverapps.dailyCup.giveReward()}},weeklyCupReward:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return DailyCup.IsAvailable(DailyCup.TYPE_WEEKLY)&&void 0!==cleverapps.weeklyCup.calcRewardPlace()},action:function(){cleverapps.weeklyCup.giveReward()}},xsollaLoginWindow:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return"xsolla"===cleverapps.User.calcSource()&&!cleverapps.social.isLoggedIn()&&levels.user.haveTmpId()},action:function(){cleverapps.metha.display({focus:"xsollaLogin",action:function(e){new FbConnectWindow,
cleverapps.metha.onceNoWindowsListener=e}.bind(this)})},interval:"3 day"},recalculateFlags:{type:Placements.ONSHOW_OR_STARTUP|Placements.INTERMEDIATE_OR_AFTER_FINISH,action:function(){cleverapps.flags.update()}},versionCheck:{type:Placements.ONSHOW_OR_STARTUP,action:function(){cleverapps.versionChecker.check()},interval:"1 hour"},versionCheckAlert:{type:Placements.FREE_FOCUS,priority:10,filter:function(){return cleverapps.versionChecker.needUpdate()},action:function(){cleverapps.metha.display({focus:"VersionChecker.Alert",action:function(e){new NewVersionWindow,cleverapps.metha.onceNoWindowsListener=e}.bind(this)})}},stuckwindow:{type:Placements.FREE_FOCUS_MAIN,action:StuckWindow.displayIfNeeded,priority:0,interval:"3 day"},communityManagerReward:{type:Placements.FREE_FOCUS_MAIN,priority:9,interval:"10 minutes",filter:function(){return cleverapps.communityManager.isRewardAvailable()},action:function(){cleverapps.communityManager.receiveReward()}},displaySceneIntro:{
type:Placements.FREE_FOCUS,priority:-1e3,filter:function(){return cc.director.getRunningScene().needDisplayIntro&&!cleverapps.flags.introDisabled},action:function(){cc.director.getRunningScene()._playIntro()}},packManagerLowBalance:{type:Placements.FREE_FOCUS_MAIN,priority:3,filter:function(){return cleverapps.packManager.isAvailable()&&cleverapps.user.gold<100},action:function(){cleverapps.metha.display({focus:"showPackWindow",action:function(e){new PackWindow,cleverapps.metha.onceNoWindowsListener=e}})},interval:s?"3 day":"5 minute"},packManager:{type:Placements.FREE_FOCUS_MAIN,priority:3,filter:function(){return cleverapps.packManager.isAvailable()&&100<=cleverapps.user.gold},action:function(){cleverapps.metha.display({focus:"showPackWindow",action:function(e){new PackWindow,cleverapps.metha.onceNoWindowsListener=e}})},interval:"3 day"},interstitialMerge:{type:Placements.FREE_FOCUS,priority:0,filter:function(){return s},action:function(){
cleverapps.rewardedAdsManager.showInterstitial()},interval:PlingaAds.isAppropriate()?"5 minutes":"30 minutes"},subscribeBot:{type:Placements.STARTUP,filter:function(){return cleverapps.social.createBot},action:function(){cleverapps.social.createBot()}},createShortcut:{type:Placements.FREE_FOCUS,filter:function(){return Placements.needCreateShortcut},action:function(){Placements.needCreateShortcut=!1,cleverapps.social.createShortcut()},interval:"10 minutes"},addShortcut:{type:Placements.VICTORY,filter:function(){return cleverapps.social.createShortcut&&levels.user.checkAvailable(cleverapps.Availables.CREATE_SHORTCUT)},action:function(){Placements.needCreateShortcut=!0},interval:"10 minutes"},canUpgradeHeroes:{type:Placements.FREE_FOCUS_MAIN,priority:-1,filter:function(){return"undefined"!=typeof match3&&void 0!==match3.heroes&&(match3.heroes.available()&&cleverapps.forces.isShown(Forces.HEROES_AVAILABLE.id)&&match3.heroes.canUpgradeSomebody())},action:function(){
cleverapps.metha.display({focus:"CanUpgradeHeroWindow",action:function(e){new CanUpgradeHeroWindow,cleverapps.metha.onceNoWindowsListener=e}})},interval:"10 minutes"},piggyBankFull:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return cleverapps.piggyBank&&cleverapps.piggyBank.isActive()&&cleverapps.piggyBank.isFull()},action:function(){cleverapps.metha.display({focus:"PiggyBankWindow",control:"MenuBarGoldItem",action:function(e){new PiggyBankWindow,cleverapps.metha.onceNoWindowsListener=e}})},interval:"1 hour"},VKPromo:{type:Placements.ONSHOW_OR_STARTUP,filter:function(){return cleverapps.social instanceof cleverapps.VK},action:function(){cleverapps.social.isPromoAvailable("2021-02-15","2021-02-28",["heroes"])&&cleverapps.social.processPromo(9)}},checkCompensatePayments:{type:Placements.INTERMEDIATE,filter:function(){return cleverapps.payments.canCompensate()},action:function(){cleverapps.payments.compensate()},interval:"1 second"},checkCompensatePaymentsCounter:{
type:Placements.EMPTY_COUNTER,filter:function(){return cleverapps.payments.canCompensate()},action:function(){cleverapps.payments.compensate()},interval:"5 minutes"},showCompensation:{type:Placements.FREE_FOCUS|Placements.EMPTY_COUNTER,filter:function(){return void 0!==cleverapps.payments.compensateProductCode&&(!s||cleverapps.environment.isMainScene())},action:function(){var e=Product.Create(cleverapps.payments.compensateProductCode);e.compensate(function(){cleverapps.eventLogger.logEvent("product_compensate",{amount:e.price}),cleverapps.payments.compensateProductCode=void 0})},interval:"1 second"},showClientCompensation:{type:Placements.FREE_FOCUS|Placements.EMPTY_COUNTER,filter:function(){return!!cleverapps.payments.existClientCompensateProduct()&&(!s||cleverapps.environment.isMainScene())},action:function(){var e=cleverapps.payments.getClientCompensateProduct(),t=Product.Create(e);t.compensate(function(){cleverapps.eventLogger.logEvent("product_compensate_client",{amount:t.price}),
cleverapps.payments.processClientCompensateProduct(e)})},interval:"1 second"},subscriptionOffer:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return Subscription.IsAvailable()&&!cleverapps.subscription.isActive()&&cleverapps.subscription.canBuyTrial()},action:function(){cleverapps.metha.display({focus:"SubscriptionWindow",action:function(e){new SubscriptionWindow,cleverapps.metha.onceNoWindowsListener=e}})},interval:-1!==["mobile_ok","web_ok"].indexOf(cleverapps.User.calcSource())?"1 day":"3 day"},dailyCup:{type:Placements.INTERMEDIATE_OR_AFTER_FINISH|Placements.ONSHOW_OR_STARTUP,filter:function(){return cleverapps.dailyCup&&DailyCup.IsAvailable(DailyCup.TYPE_DAILY)},action:function(){cleverapps.dailyCup.reload()}},weeklyCup:{type:Placements.INTERMEDIATE_OR_AFTER_FINISH|Placements.ONSHOW_OR_STARTUP,filter:function(){return cleverapps.weeklyCup&&DailyCup.IsAvailable(DailyCup.TYPE_WEEKLY)},action:function(){cleverapps.weeklyCup.reload()}},promotion:{type:Placements.FREE_FOCUS_MAIN,
priority:-1,filter:function(){return cleverapps.promotion.isReady()},action:function(){cleverapps.metha.display({focus:"PromotionWindow",action:function(e){cleverapps.Promotion.ShowFirstAvailable(),cleverapps.metha.onceNoWindowsListener=e}})},interval:"3 days"},starChest:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return cleverapps.starChest&&!cleverapps.starChest.locked},action:function(){cleverapps.metha.display({focus:"StarChestWindow",action:function(e){new StarChestWindow,cleverapps.metha.onceNoWindowsListener=e}})}},unlimitedLivesStart:{type:Placements.ONSHOW_OR_STARTUP,filter:function(){return cleverapps.lives},action:function(){s||0!==levels.user.episode||cleverapps.tempGoods.checkGoodBuyed(cleverapps.TempGoods.UNLIMITED_LIVES)||(cleverapps.tempGoods.buyGood(cleverapps.TempGoods.UNLIMITED_LIVES,cleverapps.parseInterval("3 hours")),cleverapps.lives.onBuyUnlimitedLivesListener())}},unlimitedLivesWindow:{type:Placements.FREE_FOCUS,priority:0,filter:function(){
return cleverapps.lives&&(cleverapps.environment.isMainScene()||cleverapps.environment.isDailyCupScene())},action:function(){cleverapps.tempGoods.displayPromotionOnFinish()}},nativeInstall:{type:Placements.FREE_FOCUS_MAIN,priority:3,filter:function(){return"match3"===cleverapps.config.type},action:function(){cc.sys.isMobile&&!cc.sys.isNative&&-1===["mobile_ok","mobile_vk","mobile_mm","instant","sp_mbga","huzcom","plinga","pliega"].indexOf(cleverapps.User.calcSource())&&cleverapps.metha.display({focus:"NativeInstallWindow",action:function(e){new NativeInstallWindow,cleverapps.metha.onceNoWindowsListener=e}})},interval:"5 day"},minigameNudge:{type:Placements.FREE_FOCUS_MAIN,priority:4,filter:function(){return 0<cleverapps.missionManager.getPlayableMissions().length},action:function(){for(var e=cleverapps.missionManager.getPlayableMissions(),t=0;t<e.length;t++){var s=e[t];if(s.nudgeWindow&&s.started&&(void 0===s.needShowStartWindow||s.needShowStartWindow)
)return void cleverapps.metha.display({focus:"NudgeWindow",action:function(e){new s.nudgeWindow(s),cleverapps.metha.onceNoWindowsListener=e}})}},interval:"10 minutes"},localstorageDisabled:{type:Placements.FREE_FOCUS_MAIN,priority:6,filter:function(){return!cleverapps.DataLoader.enabled&&!cleverapps.DataLoader.alerted},action:function(){cleverapps.DataLoader.alerted=!0,cleverapps.metha.display({focus:"LocalStorageDisabledWindow",action:function(e){new LocalStorageDisabledWindow,cleverapps.metha.onceNoWindowsListener=e}})}},sideBarRefresh:{priority:6,type:Placements.FREE_FOCUS,filter:function(){return cleverapps.environment.isMainScene()||cleverapps.environment.isEditorScene()},action:function(){cleverapps.sideBar.refreshAllIcons()}},sideBarProgress:{priority:-3,type:Placements.FREE_FOCUS_MAIN,filter:function(){return cleverapps.sideBar.getIconsWithProgress().length},action:function(){cleverapps.sideBar.showProgress()}},sideBarForce:{type:Placements.FREE_FOCUS_MAIN,filter:function(){
return void 0!==cleverapps.sideBar.anyIconWithForceIndex()},action:function(){cleverapps.sideBar.showAnyForce()}},cryptexForce:{type:Placements.FREE_FOCUS_GAME,priority:-1001,filter:function(){return Game.currentGame&&Game.currentGame.cryptex&&Game.currentGame.cryptex.canShowForce()},action:function(){Game.currentGame.cryptex.showForce()}},playChangeOutcome:{type:Placements.FREE_FOCUS_GAME,priority:0,filter:function(){return cc.director.getRunningScene().wantAnimateChangeOutcome},action:function(){cc.director.getRunningScene().playChangeOutcome()}},gunForce:{type:Placements.FREE_FOCUS_GAME,priority:5,filter:function(){return Game.currentGame&&cleverapps.gun.isForceAvailable()},action:function(){cleverapps.gun.showForce()}},heroesUnlockTutorial:{type:Placements.FREE_FOCUS_OTHER,filter:function(){return cleverapps.environment.isHeroesScene()&&"undefined"!=typeof match3&&match3.heroes.canUnlockTutorial()},action:function(){match3.heroes.unlockTutorial()}},heroesUpgradeTutorial:{
type:Placements.FREE_FOCUS_OTHER,filter:function(){return cleverapps.environment.isHeroesScene()&&"undefined"!=typeof match3&&match3.heroes.canUpgradeTutorial()&&!match3.heroes.canUnlockTutorial()},action:function(){match3.heroes.upgradeTutorial()}},homefixNewTask:{type:Placements.FREE_FOCUS_METHA,filter:function(){return cleverapps.metha.getType()==Metha.HOMEFIX&&cleverapps.home.needNewTask()},action:function(){var e=cleverapps.home.furniture.filter(function(e){return e.readyToOpen()});cleverapps.metha.display({focus:"homefixNewTask",actions:e.map(function(t){return function(e){cleverapps.home.giveNewTask(e,t)}})})}},toolbarForce:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return cleverapps.toolbar.anyItemWithForce()},action:function(){cleverapps.toolbar.showAnyForce()}},keypadForce:{priority:-1001,type:Placements.FREE_FOCUS_GAME,filter:function(){return Game.currentGame&&Game.currentGame.keypad&&Game.currentGame.keypad.isForceAvailable()},action:function(){
Game.currentGame.keypad.showForce()}},keypadTrickyForce:{priority:-1001,type:Placements.FREE_FOCUS_GAME,filter:function(){return Game.currentGame&&Game.currentGame.keypad&&Game.currentGame.keypad.isTrickyForceAvailable&&Game.currentGame.keypad.isTrickyForceAvailable()},action:function(){cleverapps.metha.display({focus:"TrickyForce",action:function(e){Game.currentGame.keypad.showTrickyForce(e)}})}},knockoutTutorial:{priority:-1001,type:Placements.FREE_FOCUS,filter:function(){return cleverapps.isKnockoutGame()&&cleverapps.knockoutTutorial.isAvailable()},action:function(){cleverapps.metha.display({focus:"KnockoutTutorialStep"+cleverapps.knockoutTutorial.step,control:cleverapps.knockoutTutorial.control,action:function(e){cleverapps.knockoutTutorial.run(e)}})}},missionFinished:{type:Placements.FREE_FOCUS_MAIN,priority:5,filter:function(){return cleverapps.missionManager.removeSilents(),cleverapps.missionManager.anyCompleted()},action:function(){var e=cleverapps.missionManager.anyCompleted()
;e&&cleverapps.missionManager.displayCompleted(e)}},missionManagerProcess:{type:Placements.FREE_FOCUS_MAIN,priority:5,action:function(){cleverapps.missionManager.run()}},missionStarted:{type:Placements.FREE_FOCUS_MAIN,priority:5,filter:function(){return cleverapps.missionManager.pendingStartWindow()},action:function(){cleverapps.missionManager.showStartWindow()}},displayBattlePassWindow:{type:Placements.FREE_FOCUS_MAIN|Placements.EMPTY_COUNTER,filter:function(){var e=cleverapps.missionManager.findByType(Mission.TYPE_BATTLEPASS)||cleverapps.missionManager.findByType(Mission.TYPE_PURCHASE_BATTLEPASS);return e&&e.logic.needDisplayWindow()},action:function(){var t=cleverapps.missionManager.findByType(Mission.TYPE_BATTLEPASS)||cleverapps.missionManager.findByType(Mission.TYPE_PURCHASE_BATTLEPASS);t.isRunning()?cleverapps.metha.display({focus:"BattlePassWindow",actions:[function(e){var t=cleverapps.sideBar.getIconsWithProgress().filter(function(e){return e instanceof MissionIcon&&-1!==[
Mission.TYPE_BATTLEPASS,Mission.TYPE_PURCHASE_BATTLEPASS].indexOf(e.mission.type)})[0];t?(cleverapps.metha.showControlsWhileFocused("sidebar"),t.showProgress(),setTimeout(e,3e3)):e()},function(e){cleverapps.metha.hideControlsWhileFocused("sidebar"),new t.view(t),cleverapps.metha.onceNoWindowsListener=e}]}):cleverapps.missionManager.displayCompleted(t)}},sceneChangeSize:{type:Placements.FREE_FOCUS,filter:function(){return cleverapps.FixedWidthScene.changedSize},action:function(){delete cleverapps.FixedWidthScene.changedSize;var e=cc.director.getRunningScene();e&&e.onChangeSize&&e.onChangeSize()}},friendsCache:{type:Placements.ONSHOW_OR_STARTUP,filter:function(){return cc.sys.isNative},action:function(){cleverapps.friends.reload(),cleverapps.invitalbleFriends.reload()}},parallax:{type:Placements.ONSHOW_OR_STARTUP,action:function(){cleverapps.Parallax.refresh()}},localPushes:{type:Placements.ONSHOW_OR_STARTUP,action:function(){cleverapps.localPushes.onShow()}},
syncClientSessionExpiredWindow:{type:Placements.FREE_FOCUS,priority:1e4,filter:function(){return cleverapps.synchronizer.needClientSessionExpiredWindow()},action:function(){cleverapps.synchronizer.showClientSessionExpiredWindow()}},syncReloadWindow:{type:Placements.FREE_FOCUS,priority:10001,filter:function(){return cleverapps.synchronizer._syncIn.needShowReloadWindow()},action:function(){cleverapps.synchronizer._syncIn.showReloadWindow()}},syncSocialConnectWindow:{type:Placements.FREE_FOCUS,priority:10,filter:function(){return cleverapps.synchronizer.wantsSocialConnectWindow},action:function(){cleverapps.synchronizer.displaySocialConnectWindow()}},sync:{type:Placements.ONSHOW_NO_FOCUS_CHECK,action:function(){cleverapps.synchronizer.syncWhenReady()},interval:"30 seconds"},nativeCheckConnection:{type:Placements.FREE_FOCUS_MAIN,filter:function(){var e={episode:1,level:2};return s&&(e={episode:0,level:5}),cc.sys.isNative&&!cleverapps.social.isLoggedIn()&&cleverapps.user.checkAvailable(e)},
action:function(){cleverapps.metha.display({focus:"nativeCheckConnection",action:function(e){cleverapps.social.checkConnection(e,e)}})},interval:"7 days"},mergeRateWindow:{type:Placements.FREE_FOCUS,filter:function(){return s&&(cc.sys.isNative||"yandex"===cleverapps.User.calcSource())&&!cleverapps.flags.norest&&levels.user.checkAvailable(RateWindow.AVAILABLE)&&RateWindow.CanRate()},action:function(){cleverapps.metha.display({focus:"nativePlacementRate",action:function(e){new RateWindow,cleverapps.metha.onceNoWindowsListener=e}})}},loginPlacementCheckConnection:{type:Placements.FREE_FOCUS,filter:function(){return cleverapps.social.loginPlacement&&!cleverapps.social.isLoggedIn()&&!cleverapps.social.placementConnectionChecked},action:function(){cleverapps.social.placementConnectionChecked=!0,cleverapps.social.checkConnection()}},bounty:{type:Placements.ONSHOW_OR_STARTUP|Placements.INTERMEDIATE,action:function(){cleverapps.bountyManager.sendIfNeed()}},subscriptionReload:{
type:Placements.ONSHOW_OR_STARTUP,filter:function(){return cleverapps.subscription},action:function(){cleverapps.subscription.reload()}},wardrobeItemReceived:{type:Placements.FREE_FOCUS_MAIN,priority:8,filter:function(){var e=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_WARDROBE);return e&&e.logic.stageToShow},action:function(){var t=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_WARDROBE),s=t.logic.stageToShow;cleverapps.metha.display({focus:"WardrobeWindow",actions:[function(e){new WardrobeReceiveWindow(t,WardrobeWindow.prizes[s]),cleverapps.metha.onceNoWindowsListener=e,cleverapps.eventLogger.logEvent("receive_"+cleverapps.styles.WardrobeWindow.eventName+"_"+s),t.logic.stageToShow=void 0},function(e){t.logic.runReceiveDialogue(e)},function(e){t.logic.givePrize(s,e)},function(e){new WardrobeWindow(t),cleverapps.metha.onceNoWindowsListener=e}]})}},appleRestore:{type:Placements.FREE_FOCUS_MAIN,filter:function(){
return cc.sys.os===cc.sys.OS_IOS&&cc.sys.isNative&&cleverapps.subscription&&!cleverapps.subscription.isActive()&&cleverapps.payments.restore},action:function(){cleverapps.payments.restore()},interval:"1 month"},appleBuyStoreProduct:{type:Placements.FREE_FOCUS,filter:function(){return cc.sys.os===cc.sys.OS_IOS&&cc.sys.isNative&&cleverapps.payments.storeProductName},action:function(){cleverapps.payments.buyStoreProduct()}},animatePassLevel:{type:Placements.FREE_FOCUS_MAIN,priority:-2,filter:function(){return PlayButton.IsAvailable()&&cleverapps.playButton.passedLevel},action:function(){cleverapps.playButton.animatePassLevel()}},simpleForce:{type:Placements.FREE_FOCUS_MAIN,priority:9,filter:function(){return cleverapps.metha.getType()===Metha.SIMPLE&&cleverapps.simple.isForceAvailable()},action:function(){cleverapps.metha.display({focus:"simpleForce",control:["play_button","progress_view"],actions:[function(e){PlayButton.IsAvailable(
)&&cleverapps.playButton.passedLevel&&cleverapps.playButton.animatePassLevel(),0<cleverapps.simple.pendingsStars?cleverapps.simple.updateProgress(e):e()},function(e){cleverapps.simple.showForce(e)}]})}},simpleUpdateProgress:{type:Placements.FREE_FOCUS_MAIN,priority:-2,filter:function(){return cleverapps.metha.getType()===Metha.SIMPLE&&0<cleverapps.simple.pendingsStars&&!cleverapps.simple.canMoveNext()},action:function(){cleverapps.simple.updateProgress()}},simpleMoveNext:{type:Placements.FREE_FOCUS_MAIN,priority:9,filter:function(){return cleverapps.metha.getType()===Metha.SIMPLE&&cleverapps.simple.canMoveNext()},action:function(){cleverapps.metha.display({focus:"simpleMoveNext",control:["play_button","progress_view"],actions:[function(e){PlayButton.IsAvailable()&&cleverapps.playButton.passedLevel&&cleverapps.playButton.animatePassLevel(),0<cleverapps.simple.pendingsStars?cleverapps.simple.updateProgress(e):e()},function(e){cleverapps.simple.moveNext(e)}]})}},bonusWorldFinished:{
type:Placements.FREE_FOCUS,filter:function(){return cleverapps.environment.isBonusWorldScene()&&cc.director.getRunningScene().bonusWorld.isFinished()},action:function(){var t=cc.director.getRunningScene().bonusWorld;cleverapps.metha.display({focus:"bonusWorldFinished",action:function(e){t.finish(e)}})}},bonusWorldReward:{type:Placements.FREE_FOCUS,priority:2,filter:function(){return cleverapps.environment.isBonusWorldScene()&&cc.director.getRunningScene().bonusWorld.getAvailableReward()},action:function(){var t=cc.director.getRunningScene().bonusWorld;cleverapps.metha.display({focus:"bonusWorldReward",actions:[function(e){t.levelPassed?(t.animateChangeProgress(),setTimeout(e,2e3)):e()},function(e){t.giveReward(e)}]})}},bonusWorldProgress:{type:Placements.FREE_FOCUS,priority:1,filter:function(){return cleverapps.environment.isBonusWorldScene()&&cc.director.getRunningScene().bonusWorld.levelPassed},action:function(){cc.director.getRunningScene().bonusWorld.animateChangeProgress()}},
runCounterStages:{type:Placements.FREE_FOCUS,priority:1,action:function(){s&&Game.currentGame&&!Game.currentGame.counter.isActive()&&Game.currentGame.counter.setTimeout(function(){},0)}},repeatedQuests:{type:Placements.ONSHOW_NO_FOCUS_CHECK|Placements.AFTER_GAME_START,priority:1,filter:function(){return s&&cleverapps.environment.isGameScene()&&Game.currentGame&&Game.currentGame.quests.isRepeatedQuestsAvailable()},action:function(){Game.currentGame.quests.runRepeatedQuests()},interval:cleverapps.config.debugMode?"10 seconds":"1 hour"},slotMachineForce:{type:Placements.FREE_FOCUS_OTHER,filter:function(){var e=cleverapps.missionManager.findByType(Mission.TYPE_SLOT_MACHINE);return cleverapps.environment.isSlotMachineScene()&&e&&e.slotMachine.isForceAvailable()},action:function(){var e=cleverapps.missionManager.findByType(Mission.TYPE_SLOT_MACHINE);e&&e.slotMachine.showForce()}},slotMachineHelpForce:{priority:-10,type:Placements.FREE_FOCUS_OTHER,filter:function(){
var e=cleverapps.missionManager.findByType(Mission.TYPE_SLOT_MACHINE);return cleverapps.environment.isSlotMachineScene()&&e&&e.slotMachine.isHelpForceAvailable()},action:function(){var e=cleverapps.missionManager.findByType(Mission.TYPE_SLOT_MACHINE);e&&e.slotMachine.showHelpForce()}},runSpecialEnergyOffer:{type:Placements.FREE_FOCUS_MAIN|Placements.EMPTY_COUNTER,filter:function(){return"undefined"!=typeof SpecialEnergyOfferWindow&&SpecialEnergyOfferWindow.wantsToShow},action:function(){cleverapps.metha.display({focus:"SpecialEnergyOfferWindow",action:function(e){SpecialEnergyOfferWindow.wantsToShow=void 0,new SpecialEnergyOfferWindow,cleverapps.metha.onceNoWindowsListener=e}})}},showChatPresents:{priority:1,type:Placements.FREE_FOCUS,filter:function(){return void 0!==cleverapps.chatPresents&&(cleverapps.environment.isMainScene()||cleverapps.environment.isGameScene())},action:function(){if(s&&cleverapps.chatPresents.reward.unit){var e=cleverapps.chatPresents.reward.unit,
t=e.amount-Game.currentGame.map.countEmptySlots();if(0<t)return delete cleverapps.chatPresents,void Game.currentGame.onHintMessage("messages:Spawn.nospace",!1,{left:t});if(!cleverapps.unitsLibrary.isOpened(e))return delete cleverapps.chatPresents,void Game.currentGame.onHintMessage("messages:RestartWindow.OnError")}cleverapps.metha.display({focus:"chatPresentsWindow",control:["MenuBarGoldItem","MenuBarLivesItem","MenuBarCoinsItem","MenuBarWandsItem","MenuBarWorkersItem","MenuBarExpItem"],action:function(e){new RewardWindow({reward:cleverapps.chatPresents.reward,callback:cleverapps.chatPresents.callback}),cleverapps.metha.onceNoWindowsListener=function(){delete cleverapps.chatPresents,e()}}})}},growthFund:{type:Placements.FREE_FOCUS_MAIN|Placements.EMPTY_COUNTER,filter:function(){return cleverapps.growthFund&&cleverapps.growthFund.wantsAttention},action:function(){cleverapps.metha.display({focus:"GrowthFundNudge",action:function(e){delete cleverapps.growthFund.wantsAttention,
new GrowthFundWindow,cleverapps.metha.onceNoWindowsListener=e}})}},flyingAd:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return cleverapps.flyingAd&&cleverapps.flyingAd.needUpdate()},action:function(){cleverapps.flyingAd.update()}},specialOffer:{type:Placements.FREE_FOCUS_MAIN,filter:function(){return Game.currentGame&&Game.currentGame.specialOffers&&Game.currentGame.specialOffers.length},action:function(){var e=Game.currentGame.specialOffers;Game.currentGame.specialOffers=[];var t=0;e.forEach(function(e){Game.currentGame.counter.setTimeout(SpecialOffer.CreateOffer.bind(SpecialOffer,e),t),t+=600})}}}},Placements.prototype.resetAllPlacements=function(){this.lastStarts={},this.save()},Placements.prototype.run=function(e){for(var t=this.listKeys(e),s=0;s<t.length;s++){var n=t[s],i=this.data[n];if(i.interval){var o=cleverapps.parseInterval(i.interval);if((this.lastStarts[n]||0)+o>Date.now())continue}if(!i.filter||i.filter()){var a=0!=(i.type&Placements.FREE_FOCUS);if(a){if(
cleverapps.metha.isFocused())continue;if(-1===i.priority&&this.lastFreeFocusStart+cleverapps.parseInterval("1 minute")>Date.now())continue}if(i.action(),this.lastStarts[n]=Date.now(),a&&cleverapps.metha.isFocused()){this.lastFreeFocusStart=Date.now();break}}}this.save()},Placements.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.PLACEMENTS);this.lastStarts={},e&&e.lastStarts&&(this.lastStarts=e.lastStarts)},Placements.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.PLACEMENTS,{lastStarts:this.lastStarts})},Placements.STARTUP=1,Placements.INTERMEDIATE=2,Placements.VICTORY=4,Placements.LOSE=16,Placements.AFTER_GAME_FINISH=32,Placements.ONSHOW=128,Placements.FREE_FOCUS_MAIN=256,Placements.FREE_FOCUS_GAME=512,Placements.FREE_FOCUS_METHA=1024,Placements.FREE_FOCUS_OTHER=2048,Placements.ONSHOW_NO_FOCUS_CHECK=4096,Placements.EMPTY_COUNTER=8192,Placements.AFTER_GAME_START=16384,
Placements.FREE_FOCUS=Placements.FREE_FOCUS_MAIN|Placements.FREE_FOCUS_GAME|Placements.FREE_FOCUS_OTHER,Placements.ONSHOW_OR_STARTUP=Placements.ONSHOW|Placements.STARTUP,Placements.INTERMEDIATE_OR_AFTER_FINISH=Placements.INTERMEDIATE|Placements.AFTER_GAME_FINISH;var PlaySession=function(){this.load(),this.onEndSessionListeners=[PlaySession.RewardedReporter,PlaySession.DailyTasksReporter,PlaySession.HelpByAttemptsReporter,PlaySession.SettingsReporter,PlaySession.DailyCupReporter,PlaySession.MiniGameReporter,PlaySession.MissionReporter,PlaySession.PaymentReporter,PlaySession.BonusWorldReporter,PlaySession.SlotMachineReporter,PlaySession.GrowthFundReporter]};PlaySession.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.PLAY_SESSION);e||(e={}),this.data=e},PlaySession.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.PLAY_SESSION,this.data)},PlaySession.prototype.endSession=function(){this.onEndSessionListeners.forEach(
function(e){e(this.data)},this),this.data={},this.save()},PlaySession.prototype.inc=function(e,t){void 0===t&&(t=1);var s=this.data[e];void 0===s&&(s=0),this.set(e,s+t)},PlaySession.prototype.set=function(e,t){this.data[e]=t,this.save()},PlaySession.prototype.notifyActive=function(){var e=this.nextSendActive||0;if(Date.now()>=e){this.nextSendActive=Date.now()+cleverapps.parseInterval(PlaySession.ACTIVE_TIME_INTERVAL);var t=cleverapps.user.getDaysSinceRegistration(),s="RETENTION_"+t;cleverapps.EVENTS[s]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.ACTIVE_TIME+"_"+t)}},PlaySession.SettingsReporter=function(e){cleverapps.eventLogger.logEvent("resolution_"+cleverapps.settings.calcResolution()),cleverapps.settings.fpsMode===cleverapps.Settings.FPS_MODE_LOW?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FPS_LOW):cleverapps.settings.fpsMode===cleverapps.Settings.FPS_MODE_HIGH?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FPS_HIGH):cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.FPS_AUTO)},PlaySession.RewardedReporter=function(t){cleverapps.whenAllInitialized(function(){t[cleverapps.EVENTS.REWARDED_AVAILABLE]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.REWARDED_AVAILABLE),t[cleverapps.EVENTS.REWARDED_WATCHED]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.REWARDED_WATCHED);var e=t[cleverapps.EVENTS.VIP_REWARDED_WATCHED];e&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.VIP_REWARDED_WATCHED,{amount:e}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.VIP_REWARDED_DAU))})},PlaySession.HelpByAttemptsReporter=function(e){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HELP_BY_ATTEMPTS_DAU);var t=e[cleverapps.EVENTS.HELP_BY_FIVE_ATTEMPTS];1<=t&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HELP_BY_ATTEMPTS_ONE_AND_MORE),3<=t&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HELP_BY_ATTEMPTS_THREE_AND_MORE),5<=t&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HELP_BY_ATTEMPTS_FIVE_AND_MORE)},
PlaySession.DailyTasksReporter=function(e){if(levels.user.checkAvailable(cleverapps.Availables.DAILY_TASKS)){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SESSION_DAILY_TASK_AVAILABLE),e[cleverapps.EVENTS.SESSION_DAILY_TASK_OPEN_WINDOW]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SESSION_DAILY_TASK_OPEN_WINDOW);var t=e[cleverapps.EVENTS.SESSION_DAILY_TASK_FINISH];t&&(t>cleverapps.DailyTasks.ACTIVE_TASKS&&(t=cleverapps.DailyTasks.ACTIVE_TASKS),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SESSION_DAILY_TASK_FINISH+"_"+t));var s=e[cleverapps.EVENTS.SESSION_DAILY_TASK_REWARD];s&&(s>cleverapps.DailyTasks.ACTIVE_TASKS&&(s=cleverapps.DailyTasks.ACTIVE_TASKS),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SESSION_DAILY_TASK_REWARD+"_"+s))}},PlaySession.DailyCupReporter=function(e){e[cleverapps.EVENTS.DAILY_CUP_DAU]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_CUP_DAU),e[cleverapps.EVENTS.DAILY_CUP_PLAYERS]&&cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.DAILY_CUP_PLAYERS)},PlaySession.MiniGameReporter=function(t){Object.keys(t).forEach(function(e){0===e.indexOf(cleverapps.EVENTS.MINIGAME_FINISH)&&t[e]&&cleverapps.eventLogger.logEvent(e+"_dau")})},PlaySession.MissionReporter=function(t){Object.keys(t).forEach(function(e){0===e.indexOf(cleverapps.EVENTS.MISSION_DAU)&&t[e]?cleverapps.eventLogger.logEvent(e):0===e.indexOf(cleverapps.EVENTS.MISSION_START_DAU)&&t[e]&&cleverapps.eventLogger.logEvent(e),0===e.indexOf(cleverapps.EVENTS.PAYER_BOUGHT_MISSION_OFFER)&&t[e]&&cleverapps.eventLogger.logEvent(e)})},PlaySession.PaymentReporter=function(t){[cleverapps.EVENTS.PAYMENT_OPEN,cleverapps.EVENTS.PAYMENT_FAILURE,cleverapps.EVENTS.PAYMENT_CANCEL,cleverapps.EVENTS.PAYMENT_NOT_REFRESHED,cleverapps.EVENTS.PAYMENT_NOT_INITIALIZED,cleverapps.EVENTS.PAYMENT_SUCCESS].forEach(function(e){t[e]&&cleverapps.eventLogger.logEvent(e)})},PlaySession.BonusWorldReporter=function(e){
e[cleverapps.EVENTS.BONUS_WORLD_DAU]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BONUS_WORLD_DAU),e[cleverapps.EVENTS.BONUS_WORLD_LEVEL_DAU]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BONUS_WORLD_LEVEL_DAU)},PlaySession.SlotMachineReporter=function(e){e[cleverapps.EVENTS.SLOT_MACHINE_DAU]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_DAU),e[cleverapps.EVENTS.SLOT_MACHINE_SPIN_DAU]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_SPIN_DAU)},PlaySession.GrowthFundReporter=function(e){e[cleverapps.EVENTS.GROWTH_FUND_DAU]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GROWTH_FUND_DAU)},PlaySession.ACTIVE_TIME_INTERVAL="1 minute";var ExecutorPool=function(e){e=e||{},this.amount=e.amount||1e3,this.interval=e.interval||"1 second",this.events=new cleverapps.EventsQueue(this.interval),this.delay=cleverapps.parseInterval(e.delay||"0 second"),this.tasks=[],this.timeout=void 0};ExecutorPool.prototype.execute=function(e){this.tasks.push({
callback:e,event:Date.now()}),this.processFirst()},ExecutorPool.prototype.processFirst=function(){if(void 0!==this.timeout&&(clearTimeout(this.timeout),delete this.timeout),0!==this.tasks.length){var e=this.tasks[0],t=Date.now();if(e.event+100<t&&t<e.event+this.delay)this.timeout=setTimeout(this.processFirst.bind(this),t-e-this.delay);else{if(this.events.size()>=this.amount){var s=this.events.getShrinkLeftTime();if(s&&0<s&&this.events.size()>=this.amount)return void(this.timeout=setTimeout(this.processFirst.bind(this),s))}this.tasks.shift(),e.callback()!==cleverapps.NO_ACTION&&this.events.add(t),this.processFirst()}}},cleverapps.Flags=function(){this.init(),cleverapps.whenAllInitialized(function(){cleverapps.paymentsHistory.onAddPaymentListeners.flags=this.update.bind(this),cleverapps.payments.onAvailableListeners.flags=this.update.bind(this),this.initAbTestFlags()}.bind(this))},cleverapps.Flags.prototype.initAbTestFlags=function(){},cleverapps.Flags.prototype.init=function(){
var e=cleverapps.User.calcSource();this.norest=-1!==["huzcom","pliega","playable"].indexOf(e),this.noLogEvents=-1!==["huzcom","pliega","playable"].indexOf(e),this.noviral=-1!==["huzcom","plinga","pliega","ayodo1","iyodo1","xsolla","playable","yandex"].indexOf(e),this.noshares=-1!==["android","amazon","ios","pliega","sp_mbga","ayodo1","iyodo1","playable","yandex"].indexOf(e),this.nologin=-1!==["huzcom","plinga","pliega","ayodo1","iyodo1","playable"].indexOf(e)||cleverapps.config.nologin,this.nocommunity=-1!==["huzcom","plinga","pliega","playable","yandex"].indexOf(e),this.doubleRewards=-1!==["huzcom","plinga","pliega"].indexOf(e),this.videoAdsMainMonetization=-1!==["plinga","ayodo1","iyodo1"].indexOf(e),this.nofirebase=-1!==["pliega","ayodo1","iyodo1","playable"].indexOf(e),this.noadjust=-1!==["pliega","playable","amazon"].indexOf(e),this.nofacebookevents=-1!==["pliega","ayodo1","iyodo1","playable"].indexOf(e),this.nosocial=-1!==["pliega","huzcom","ayodo1","iyodo1","playable"].indexOf(e
),this.softCurrencyRealProduct=-1!==["mbga","sp_mbga"].indexOf(e),this.nobattle="wondermerge"===cleverapps.config.name||-1!==["ayodo1","iyodo1"].indexOf(e),cleverapps.config.wysiwygMode&&("merge"===cleverapps.config.type?this.wysiwyg={skipSpecialOffer:!1,skipBuildingStage:!1,skipOpenChestWindow:!1,skipQuests:!0,mergeAnimation2:!1,automerge:!1,customMergeAnimation:!1,customCollectAnimation:!1,hidePrizeView:!1,hideGuideAndProgress:!1,hideFruitParticlesAnimation:!1,hideUnitPointAnimation:!1,customHighlight:!1,collectionWithSwipe:!1,customFog:!1,fastSpawnPrizes:!1,handTurnIntoSomething:!1,upgradeInTwoTurns:!1,customAnimationDidMerged:!1,unitsPulsingDisabled:!1,easyChop:!1,dontCollectWands:!1}:"match3"===cleverapps.config.type&&(this.adsField={},this.wysiwyg={silentGoals:!1,multiColorCellDisabled:!1,heroesDisabled:!1}))},cleverapps.Flags.prototype.reset=function(){this.init(),this.update()},cleverapps.Flags.prototype.update=function(){this.nopayments=!cleverapps.payments.isAvailable(),
this.nopayments&&(this.videoAdsMainMonetization=!0);var e=cleverapps.user.getProgress();(cleverapps.paymentsHistory.classify()!==cleverapps.PaymentsHistory.VIP_NONE||e<cleverapps.Flags.MIN_PROGRESS_VIRAL_ADS)&&(this.noviral=!0,levels.friendRequests.deleteFakeRequests());var t=cleverapps.User.calcSource();this.noviral||"instant"!==t||cleverapps.config.platform!==cleverapps.Instant.PLATFORM_WEB||(this.noviral=!0,levels.friendRequests.deleteFakeRequests()),this.norest=this.norest||cleverapps.user.cheater,AdsLimits.initialize()},cleverapps.Flags.MIN_PROGRESS_VIRAL_ADS="merge"===cleverapps.config.type?3:20;var SuccessWait=function(e,t){this.task=e,this.callback=cleverapps.once(t),this.active=!0,this.timeout=void 0,this.run()};SuccessWait.prototype.run=function(){this.active&&(this.timeout=clearTimeout(this.timeout),this.task({onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this)}))},SuccessWait.prototype.onSuccess=function(){this.callback(),this.clear()},
SuccessWait.prototype.onFailure=function(e){if(cleverapps.checkStatus(e,404))return console.log("receive 404"),void this.clear();this.timeout=clearTimeout(this.timeout),this.timeout=setTimeout(this.run.bind(this),cleverapps.parseInterval("30 seconds"))},SuccessWait.prototype.cancel=SuccessWait.prototype.clear=function(){this.active=!1,this.timeout=clearTimeout(this.timeout)},cleverapps.Information=function(){this.data=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.INFORMATION),void 0===this.data&&(this.data={}),this.diff={}},cleverapps.Information.prototype.onChangeUserId=function(){this.diff=this.data,this.update()},cleverapps.Information.prototype.reportMaxTextureSize=function(){if("undefined"!=typeof gl){var e=gl.getParameter(gl.MAX_TEXTURE_SIZE);this.setKeyValue("maxTextureSize",e)}},cleverapps.Information.prototype.reportPhone=function(){var e={};if(e[cc.sys.OS_ANDROID]={avatar:"#avatars/android_avatar.png",name:"Android"},e[cc.sys.OS_IOS]={avatar:"#avatars/ios_avatar.png",
name:"iOS"},e[cc.sys.os]&&cc.sys.isNative){var t=cleverapps.social.isLoggedIn()&&"applesocial"!==cleverapps.social.getCode();this.data.avatar||t||cleverapps.info.setKeyValue("avatar",e[cc.sys.os].avatar),this.data.name||cleverapps.social.isLoggedIn()||cleverapps.info.setKeyValue("name",e[cc.sys.os].name+"_"+cleverapps.user.id.substr(-3))}"plinga"===cleverapps.User.calcSource()&&cleverapps.info.setKeyValue("avatar","#avatars/game_distribution.png")},cleverapps.Information.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.INFORMATION,this.data)},cleverapps.Information.prototype.setKeyValue=function(e,t){this.data[e]&&"resolution"===e||JSON.stringify(this.data[e])!==JSON.stringify(t)&&(this.data[e]=t,this.diff[e]=t,this.update())},cleverapps.Information.prototype.update=function(){this.save(),this._updateInner()},cleverapps.Information.prototype._updateInner=cleverapps.accumulate(5e3,function(){console.log("Sending information: "+JSON.stringify(this.diff)),
cleverapps.RestClient.post("/info/"+levels.user.id,this.diff,function(e){},function(){}),this.diff={}}),cleverapps.Information.prototype.reportUserAgent=function(){var e,t;if("object"==typeof DeviceInfoPlugin)e=DeviceInfoPlugin.getDeviceName(),t=DeviceInfoPlugin.getAndroidVersion();else if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.isWebView)e=cleverapps.webViewData.deviceName,t=cleverapps.webViewData.deviceVersion;else if(cc.sys.isNative)e=cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getDeviceName","()Ljava/lang/String;"):jsb.reflection.callStaticMethod("AppController","getDeviceName"),t=cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getAndroidVersion","()Ljava/lang/String;"):jsb.reflection.callStaticMethod("AppController","getDeviceVersion");else{var s=(new UAParser).getResult(navigator.userAgent);e=s.browser.name,t=s.browser.major}this.setKeyValue("useragent",{browser:e,version:t})},
cleverapps.Information.prototype.reportAppVersion=function(){this.setKeyValue("appversion",{version:cleverapps.config.version,source:cleverapps.User.calcSource()})},cleverapps.Information.prototype.reportSysLanguage=function(){this.setKeyValue("syslanguage",cc.sys.language)},cleverapps.Information.prototype.reportInstaller=function(){cc.sys.os===cc.sys.OS_ANDROID&&this.setKeyValue("installer",cc.sys.installer)};var ActionPlayer=function(e){this.actions=[],this.add(e)};ActionPlayer.prototype.add=function(e){Array.isArray(e)?e.forEach(function(e){this.add(e)}.bind(this)):e&&this.actions.push(e)},ActionPlayer.prototype._playNext=function(){this.index===this.actions.length||this._stopped||this.actions[this.index++](this._playNext.bind(this))},ActionPlayer.prototype.play=function(e){this.index=0,e&&this.actions.push(e),this._playNext()},ActionPlayer.prototype.stop=function(){this._stopped=!0},ActionPlayer.delay=function(t){return function(e){setTimeout(e,t)}};var NoMetha={
gamePlayed:function(){}},Metha=function(){this.enabled=!0,this.focus="initialize",this.controls=[],this.onceNoWindowsListener=void 0,this.controlsVisible=!0,this.lastControlsVisible={},this.onControlsListeners={},this.pendingListeners=[]};Metha.prototype.registerControl=function(e,t){if(!cleverapps.flags.controlsHideDisabled){if("object"==typeof t){var s=t;t=s.createListener(s.toggle.bind(s))}(this.onControlsListeners[e]=t)(!1,!0),this.lastControlsVisible[e]=!1,(this.controlsVisible||-1!==this.controls.indexOf(e))&&(t(!0),this.lastControlsVisible[e]=!0)}},Metha.prototype.updateControlsVisibility=function(){for(var e in this.onControlsListeners){var t=this.controlsVisible||-1!==this.controls.indexOf(e);this.lastControlsVisible[e]!==t&&(this.onControlsListeners[e](t),this.lastControlsVisible[e]=t)}},Metha.prototype.setControlsVisible=function(e){this.controlsVisible=e,this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(this.updateControlsVisibility.bind(
this),100)},Metha.prototype.debugMessage=function(e){if(cleverapps.config.debugMode&&!cc.sys.isNative)throw e;cleverapps.throwAsync(e)},Metha.prototype.displayWhenFreeFocus=function(e){this.isFocused()?this.whenFreeFocus(this.display.bind(this,e)):this.display(e)},Metha.prototype.whenFreeFocus=function(e){this.isFocused()?this.pendingListeners.push(e):e()},Metha.prototype.distract=function(e){this.isFocused()||this.debugMessage("Distract without focus! "+e.focus),this.focus!==e.focus?(this.focus=!1,this.display(e)):this.debugMessage("Distract same focus!"+e.focus)},Metha.prototype.display=function(e){if(!this.isFocused()&&(!e.filter||e.filter())){var t=e.focus;this.grabFocus(t,e);var s=e.actions||[e.action];if(cleverapps.info&&cleverapps.info.data&&cleverapps.info.data.useragent&&"Safari"===cleverapps.info.data.useragent.browser)this.compound(this.freeFocus.bind(this,t),s);else try{this.compound(this.freeFocus.bind(this,t),s)}catch(e){if(
e instanceof RangeError||e.message&&-1!==e.message.indexOf("stack")){var n=e.message+" indexes - "+(e.indexes||[]).slice(-20)+" focuses - "+(e.focuses||[]).slice(-20)+" lengths - "+(e.actionsLength||[]).slice(-20)+" stack - "+JSON.stringify(e.stack);throw new Error(n)}throw e}}},Metha.prototype.compound=function(e,t,s,n){s=s||0,n=n||this.focus;if(this.focus===n)if(t.length!==s)if(cleverapps.info&&cleverapps.info.data&&cleverapps.info.data.useragent&&"Safari"===cleverapps.info.data.useragent.browser)t[s](this.compound.bind(this,e,t,s+1,n));else try{t[s](this.compound.bind(this,e,t,s+1,n))}catch(e){throw e.indexes=(e.indexes||[]).concat([s]),e.focuses=(e.focuses||[]).concat([n]),e.actionsLength=(e.actionsLength||[]).concat([t.length]),e}else e()},Metha.prototype.showControlsWhileFocused=function(e,t){cleverapps.toArray(e).forEach(function(e){this.isFocused()&&this.controls.indexOf(e)<0?(this.controls.push(e),!0!==this.lastControlsVisible[e]&&(
this.onControlsListeners[e]&&this.onControlsListeners[e](!0,t),this.lastControlsVisible[e]=!0)):t&&this.onControlsListeners[e]&&this.onControlsListeners[e](!0,t)},this)},Metha.prototype.controlIsHidden=function(e){return!!this.isFocused()&&this.controls.indexOf(e)<0},Metha.prototype.hideAllControls=function(){this.isFocused()&&this.controls.forEach(function(e){!1!==this.lastControlsVisible[e]&&(this.onControlsListeners[e]&&this.onControlsListeners[e](!1),this.lastControlsVisible[e]=!1)},this),this.controls=[]},Metha.prototype.hideControlsWhileFocused=function(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){this.isFocused()&&0<=this.controls.indexOf(e)&&(this.controls.splice(this.controls.indexOf(e),1),!1!==this.lastControlsVisible[e]&&(this.onControlsListeners[e]&&this.onControlsListeners[e](!1),this.lastControlsVisible[e]=!1))},this)},Metha.prototype.trigger=function(){if(!this.isFocused()){for(;0<this.pendingListeners.length;){if(this.pendingListeners.shift()(),this.isFocused()
)return}this.onFocusLostListenerPlacements()}},Metha.prototype.grabFocus=function(e,t){!1!==this.focus&&this.debugMessage("Want to grab focus: "+e+" focus is already given: "+this.focus),console.log("Grab focus: "+e),this.triggerTimeout&&(clearTimeout(this.triggerTimeout),this.triggerTimeout=void 0),this.focus=e,this.controls=[],t&&t.control&&(Array.isArray(t.control)?this.controls=t.control:this.controls=[t.control]),this.setControlsVisible(!1)},Metha.prototype.freeFocus=function(e){!1===this.focus&&this.debugMessage("Want to free focus: "+e+" focus is already free!"),this.focus===e?(console.log("Focus freed: "+this.focus),this.focus=!1,this.setControlsVisible(!0),cleverapps.bundleLoader.clearUnusedResources(),this.triggerTimeout=setTimeout(this.trigger.bind(this),0)):console.log("Wrong focus clearing: "+this.focus+" > "+e)},Metha.prototype.isFocused=function(){return!1!==this.focus},Metha.prototype.getType=function(){switch(cleverapps.config.metha){case"farm":return Metha.FARM
;case"homefix":return Metha.HOMEFIX;case"knockout":return Metha.KNOCKOUT;case"simple":return Metha.SIMPLE;case"none":return Metha.NONE}return Metha.HOSE},Metha.prototype.withSimpleMain=function(){if(-1!==["wordsoup"].indexOf(cleverapps.config.name)){var e=cleverapps.User.calcSource();if(-1!==["mobile_ok","mobile_vk","mobile_mm"].indexOf(e)||cleverapps.isLocalhost())return!0}return!1},Metha.prototype.gotoMainScene=function(e){var t=this.getMainScene();cleverapps.scenes.replaceScene(new t,e)},Metha.prototype.getMainScene=function(){if("playable"===cleverapps.config.source)return PlayableAdsScene;switch(this.getType()){case Metha.FARM:case Metha.HOMEFIX:return this.withSimpleMain()?MethaSimpleMainScene:MethaScene;case Metha.KNOCKOUT:return KnockoutScene;case Metha.SIMPLE:return SimpleMainScene;case Metha.NONE:return MergeScene;default:return levels.EpisodesScene}},Metha.prototype.getMainObject=function(){switch(this.getType()){case Metha.FARM:return cleverapps.farm;case Metha.HOMEFIX:
return cleverapps.home;case Metha.KNOCKOUT:return cleverapps.knockout;case Metha.SIMPLE:return cleverapps.simple;case Metha.NONE:return NoMetha;default:return levels.episodes}},Metha.prototype.wantsToPlay=function(e,t){if(cleverapps.lives&&cleverapps.lives.isEmpty())return new LivesShopWindow,void(cleverapps.metha.onceNoWindowsListener=e);this.getMainObject().wantsToPlay(e,t)},Metha.prototype.wantsToReplay=function(e,t){var s=t.level;BoostersBefore.isAvailable()?this.getMainObject().wantsToReplay&&s.building?this.getMainObject().wantsToReplay(e,t):(new LevelStartWindow(t),cleverapps.metha.onceNoWindowsListener=e):s.play(e,t)},Metha.prototype.isControlEnabled=function(e){return!this.isFocused()||0<=this.controls.indexOf(e)},Metha.HOSE=0,Metha.FARM=1,Metha.HOMEFIX=2,Metha.KNOCKOUT=3,Metha.SIMPLE=4,Metha.NONE=5,cleverapps.User=function(s){if(cleverapps.EventEmitter.call(this),this.onCantTakeGold=function(){cleverapps.flags.nopayments&&!RewardedAdsManager.IsEnabled(
)?cleverapps.Notification.create("messages:NotEnoughCoins"):cleverapps.metha.isFocused()?new HardCurrencyShopWindow:cleverapps.metha.display({focus:"ShopWindow",control:"MenuBarGoldItem",action:function(e){new HardCurrencyShopWindow,cleverapps.metha.onceNoWindowsListener=e}})},this.onCantTakeExp=function(){},this.onLeagueChangeListener=function(){},this.onChangeExpListeners={},this.onChangeGold=function(){},s)this.initializeNewPlayer();else{var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.ID);this.loadData(e),this.lastReportDAU=this.getDaysSinceRegistration(e.visited)}var n=cleverapps.User.calcChannel();if(n){var t=(s?"user_channel_new_":"user_channel_old_")+n;cleverapps.eventLogger.logEvent(t),this.reportChannel=cleverapps.once(function(){var e=cleverapps.getRequestParameters(location.search);e.custom_args&&(e=decodeURIComponent(e.custom_args));var t={source:this.source,channel:n,isnewuser:s,parameters:JSON.stringify(e)};cleverapps.RestClient.post(
"/users/playsession/"+this.id,t)}.bind(this)),s||(setTimeout(this.reportChannel.bind(this),0),this.channel=n,e.visited+cleverapps.parseInterval("7 days")<Date.now()&&(this.registered=Date.now()))}this.save(),this.reportDAU(),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){this.calcIdfa(),this.visited<Date.now()-cleverapps.parseInterval(cleverapps.User.ON_SHOW_CHANGE_VISITED)&&(this.updateVisited(),this.reportDAU(!0))}.bind(this))},cleverapps.User.prototype=Object.create(cleverapps.EventEmitter.prototype),cleverapps.User.prototype.constructor=cleverapps.User,cleverapps.User.prototype.updateVisited=function(){this.visited=Date.now(),this.save()},cleverapps.User.prototype.incProgressCompare=function(e,t){e=e||1,this.progressCompare+=e,t||this.save()},cleverapps.User.prototype.reportDAU=function(e){void 0!==this.lastReportDAU&&this.lastReportDAU===this.getDaysSinceRegistration()||(this.lastReportDAU=this.getDaysSinceRegistration(),
cleverapps.User.reportAmountFriendsDau=function(){if(cleverapps.friends){var e=cleverapps.friends.listIds().length;5<e&&(e=5),cleverapps.eventLogger.logEvent(cleverapps.EVENTS["DAU_WFRIENDS_"+e]),cleverapps.User.reportAmountFriendsDau=void 0}},e&&cleverapps.User.reportAmountFriendsDau(),setTimeout(function(){if(cleverapps.playSession.endSession(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAU),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAU_LANGUAGE),this.gold<=1e6&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.USER_GOLD_DAU,{amount:this.gold}),"merge"===cleverapps.config.type){var e=cleverapps.GameSaver.load(GameBase.getStoreKey(0,0)),t=e&&cleverapps.castType(e.wands||0)||0;t&&t<=5e4&&(cleverapps.eventLogger.logEvent("user_wands_dau_amount",{amount:t}),cleverapps.eventLogger.logEvent("user_wands_dau"))}if(cc.sys.isNative&&cleverapps.social.isLoggedIn()){var s=cleverapps.social.getCode();cleverapps.eventLogger.logEvent(s+"_loggedin_dau")}
void 0!==cleverapps.abTest.group&&cleverapps.eventLogger.logEvent("abtest_"+cleverapps.abTest.group+"_"+cleverapps.EVENTS.DAU),cleverapps.paymentsHistory.isPayer()&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PAYER_DAU);var n=this.getDaysSinceRegistration(),i=function(){var e="RETENTION_"+n;cleverapps.EVENTS[e]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS[e])};0<n?i():(cleverapps.User.reportRetention=function(){cleverapps.user.checkAvailable(cleverapps.User.RETENTION_0_AVAILABLE)&&(i(),cleverapps.User.reportRetention=void 0)},cleverapps.User.reportRetention())}.bind(this),0))},cleverapps.User.prototype.getDaysSinceRegistration=function(e){return Math.floor(((e||Date.now())-this.registered)/1e3/24/60/60)},cleverapps.User.prototype.loadData=function(e){this.id=e.id,this.id||(this.id=this.generateTmpId()),this.gold=e.gold,this.registered=e.registered,this.source=e.source,this.source||(this.source=cleverapps.User.calcSource()),this.channel=e.channel,this.visited=Date.now(),
this.exp=e.exp,this.league=this.calcLeague(),e.idfa1&&(this.idfa=e.idfa1),this.abtest=e.abtest,this.progressCompare=e.progressCompare||0},cleverapps.User.prototype.isBeginner=function(){return this.episode<=1},cleverapps.User.prototype.isNovice=function(){return this.episode<=3&&1<this.episode},cleverapps.User.prototype.checkAvailable=function(e){return!0},cleverapps.User.prototype.generateTmpId=function(){return"__"+Math.floor(1e15*Math.random())},cleverapps.User.prototype.haveTmpId=function(){return 2<=this.id.length&&"__"===this.id.substr(0,2)},cleverapps.User.prototype.setGold=function(e,t){0!==e-this.gold&&(this.gold=e,this.incProgressCompare(3,!0),this.save(),t||this.onChangeGold())},cleverapps.User.prototype.canTakeGold=function(e){return this.gold>=e},cleverapps.User.prototype.expAvailable=function(){return"undefined"!=typeof match3&&match3.heroes&&match3.heroes.available()||"merge"===cleverapps.config.type},cleverapps.User.prototype.canTakeExp=function(e){return this.exp>=e},
cleverapps.User.prototype.takeGold=function(e){if(0===e)return!0;if(this.canTakeGold(e)){if(cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.SPEND_GOLD,e),cleverapps.playSession.inc(cleverapps.EVENTS.SPEND_COINS,e),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SPEND_COINS,{amount:e}),-1!==cleverapps.missionManager.listAvailableTypes().indexOf(Mission.TYPE_SLOT_MACHINE)){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SPEND_GOLD_SLOT_MACHINE_AVAILABLE,{amount:e});var t=cleverapps.missionManager.findByType(Mission.TYPE_SLOT_MACHINE);t&&t.isRunning()&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SPEND_GOLD_SLOT_MACHINE_ACTIVE,{amount:e})}return this.setGold(this.gold-e),!0}return this.onCantTakeGold(e-this.gold),!1},cleverapps.User.prototype.takeExp=function(e){return 0===e||(this.canTakeExp(e)?(this.setExp(this.exp-e),!0):(this.onCantTakeExp(e-this.exp),!1))},cleverapps.User.prototype.getSaveInfo=function(){return{id:this.id,gold:this.gold,registered:this.registered,
visited:this.visited,source:this.source,channel:this.channel,exp:this.exp,idfa1:this.idfa,abtest:this.abtest,progressCompare:this.progressCompare,version:cleverapps.config.version}},cleverapps.User.prototype.afterSync=function(){this.league=this.calcLeague()},cleverapps.User.prototype.save=function(e){!1===e&&this.afterSync(),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.ID,this.getSaveInfo()),!1!==e&&cleverapps.synchronizer.addUpdateTask("users")},cleverapps.User.prototype.prepareSmallGoldReward=function(e){var t=cleverapps.paymentsHistory.getLastPayment();if(t&&t.time>Date.now()-cleverapps.parseInterval("3 day"))return e;var s=1;return 1e3<=this.gold?s=.2:500<=this.gold&&(s=.5),Math.ceil(e*s)},cleverapps.User.prototype.setRandomBoostersReward=function(e){if(!e.randomBoosters)return e;e.boosters={};for(var t=0;t<e.randomBoosters.amount;t++){var s=cleverapps.Random.choose(e.randomBoosters.types);e.boosters[s]=e.boosters[s]?e.boosters[s]+1:1}return delete e.randomBoosters,e},
cleverapps.User.prototype.prepareRewardByRich=function(e,t){if(!e.gold&&!e.boosters&&!e.randomBoosters)return e;e=cleverapps.clone(e,!0),e=this.setRandomBoostersReward(e);var s=cleverapps.paymentsHistory.getLastPayment();if(s&&s.time>Date.now()-cleverapps.parseInterval("1 day"))return e;var n=!1;if(e.gold){var i=!0;s&&s.time>Date.now()-cleverapps.parseInterval("3 day")&&(i=!1);var o=1;1e3<=this.gold&&i?(o=.1,n=!0):600<=this.gold?(n=!0,o=.25):300<=this.gold&&(o=.5),e.gold=Math.max(5*Math.ceil(e.gold*o/5),t||0)}if(n){var a=[];if("match3"===cleverapps.config.type&&(a=[{stars:3,exp:1},{stars:3},{stars:2,exp:1},{exp:2}]),!e.unlimitedLives&&cleverapps.lives&&(a=a.concat([{unlimitedLives:"10 minutes"},{unlimitedLives:"15 minutes"},{unlimitedLives:"30 minutes"}])),0<a.length){var r=cleverapps.Random.choose(a);for(var l in r)e[l]?e[l]+=r[l]:e[l]=r[l]}}return e},cleverapps.User.calcPriceCoef=function(){var e=cleverapps.User.calcSource()
;return"mobile_vk"===e||"web_vk"===e?.28:"mobile_ok"===e||"web_ok"===e?20/75:"web_mm"===e||"mobile_mm"===e?20/75:"nk"===e?10/75:"fotostrana"===e?.4:"yandex"===e?20/75:1},cleverapps.User.calcSource=function(){if(cleverapps.config.source)return cleverapps.config.source;if(cc.sys.isNative){if(cc.sys.os===cc.sys.OS_ANDROID)return"android";if(cc.sys.os===cc.sys.OS_IOS)return"ios"}var e=function(e){return-1!==window.location.href.indexOf(e)};return e("dr_auth_code")?"draugiem":e("logged_user_id")?e("mob=true")?"mobile_ok":"web_ok":e("api.vk.com")?e("vkmobile=true")?"mobile_vk":"web_vk":e("nk.pl")?"nk":e("fotostrana.ru")?"fotostrana":cleverapps.config.myMailRu&&e("app_id="+cleverapps.config.myMailRu.appId)?e("view=app_mobile")?"mobile_mm":"web_mm":e("source=spmobage")?"sp_mbga":e("mbga-platform.jp")?"mbga":!cleverapps.config.xsollaProjectId||cleverapps.isLocalhost()||!e("Xsolla")&&window.self!==window.top?e("yandex")?"yandex":"facebook":"xsolla"},cleverapps.User.calcChannel=function(e,t){if(
!cc.sys.isNative){if(void 0===e){if(e="channel",cleverapps.VK.isAppropriate())return cleverapps.User.calcChannel("hash")||cleverapps.User.calcChannel("referrer")||"";if(cleverapps.MyMailRu.isAppropriate()&&document.referrer){var s=document.createElement("a");return s.href=document.referrer,cleverapps.User.calcChannel("channel",location.search)||cleverapps.User.calcChannel("channel",s.search)||""}}var n=cleverapps.getRequestParameters(t||location.search);if(n.custom_args){var i=decodeURIComponent(n.custom_args);0<=i.indexOf(e)&&(n=cleverapps.getRequestParameters("?"+i))}if(n[e])return n[e]}return""},cleverapps.User.prototype.setChannel=function(e){this.channel!==e&&(this.channel=e,this.save())},cleverapps.User.prototype.calcIdfa=function(){if(this.idfa)cc.sys.isNative&&console.log("idfa - "+this.idfa);else{var t=cleverapps.Adversting.getIdfa();t&&(this.idfa=t,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.ID,this.getSaveInfo()),cleverapps.RestClient.post(
"/users/idfa/"+levels.user.id,{idfa:this.idfa},function(e){e.campaign&&(this.setChannel(e.campaign),cleverapps.Adversting.postbackUnity(t))}.bind(this),function(){console.log("Failed updating idfa: "+this.idfa),delete this.idfa,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.ID,this.getSaveInfo())}.bind(this)))}},cleverapps.User.prototype.initializeNewPlayerGold=function(){this.gold=100,"merge"===cleverapps.config.type&&(this.gold=15)},cleverapps.User.prototype.initializeNewPlayer=function(){this.initializeNewPlayerGold(),this.id=this.generateTmpId(),this.registered=Date.now(),this.visited=Date.now(),this.source=cleverapps.User.calcSource(),this.channel=cleverapps.User.calcChannel(),this.exp=0,this.league=this.calcLeague(),this.progressCompare=0},cleverapps.User.prototype.calcLeague=function(){var e=0;if(!cleverapps.config.leagues)return e;for(;e<cleverapps.config.leagues.length&&cleverapps.config.leagues[e]&&this.getHumanReadableNumber()+(this.progress||0
)>cleverapps.config.leagues[e];)e++;return e},cleverapps.User.prototype.setExp=function(e){if(this.exp!==e){var t=e-this.exp;this.exp=e,this.save(),cleverapps.values(this.onChangeExpListeners).forEach(function(e){e(t)})}},cleverapps.User.ON_SHOW_CHANGE_VISITED="1 hour",cleverapps.User.RETENTION_0_AVAILABLE={level:1},cleverapps.Scenes=function(){},cleverapps.Scenes.prototype.isLoaderScene=function(){var e=cc.director.getRunningScene();return e instanceof LoaderScene||!e},cleverapps.Scenes.prototype.runScene=function(e,t){cc.director.runScene(e),t()},cleverapps.Scenes.prototype.replaceScene=function(t,e,s){cleverapps.metha.isFocused()||cleverapps.metha.debugMessage("Trying to replace scene without user focus! "+t.sceneName),e=e||function(){};var n=cc.director.getRunningScene();n&&(n.onReplace&&n.onReplace(),n.replacing=!0),cleverapps.Notification.remove(),t.isWide&&!this.sceneMaxWidthToRestore&&(this.sceneMaxWidthToRestore=cleverapps.styles.SCENE_MAX_WIDTH,
Resolution.setupDesignResolution({sceneMaxWidthOverride:5e3})),!t.isWide&&this.sceneMaxWidthToRestore&&(Resolution.setupDesignResolution({sceneMaxWidthOverride:this.sceneMaxWidthToRestore}),this.sceneMaxWidthToRestore=void 0,n&&(n.scene.resizeScale=1,n.scene.width=n.width)),cleverapps.metha.compound(e,[function(e){cleverapps.FixedWidthScene.canDistractChangeSize=!1,t.isWide||cleverapps.flags.noTransitionAnimation||"playable"===cleverapps.config.source?e():TransitionAnimation.createTransitionAnimation(e,cleverapps.metha.isFocused()&&0===cleverapps.metha.focus.indexOf("refreshSceneOnChangeSize"),s)},function(e){t instanceof SceneProxy?t.whenLoaded(e):e()},function(e){t instanceof SceneProxy&&(t=t.instance),cleverapps.scenes.runScene(t,e)},function(e){t.isWide||cleverapps.flags.noTransitionAnimation||"playable"===cleverapps.config.source?e():TransitionAnimation.removeTransitionAnimation(t,function(){e(),"undefined"!=typeof ToolMenu&&(t.toolMenu=new ToolMenu,t.toolMenu.setLocalZOrder(1),
t.addChild(t.toolMenu))})},function(e){delete cleverapps.newSceneStack,cleverapps.FixedWidthScene.canDistractChangeSize=!0;var t=cleverapps.FixedWidthScene.changedOrientation;if(cleverapps.FixedWidthScene.changedOrientation||cleverapps.FixedWidthScene.changedSize){delete cleverapps.FixedWidthScene.changedOrientation,delete cleverapps.FixedWidthScene.changedSize;var s=cc.director.getRunningScene();s&&s.onChangeSize&&s.onChangeSize(t)}e()}])},cleverapps.Scenes.prototype.reset=function(){TransitionAnimation.reset()};var TransitionAnimation=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),this.setLocalZOrder(100),this.animation=new cleverapps.Spine(e.styling.json),this.addChild(this.animation),e.styling.skin&&this.animation.setSkin(e.styling.skin)},animate:function(e,t,s,n){t=cleverapps.once(t||function(){}),this.animation.setCompleteListener(function(){this.runAction(new cc.Sequence(new cc.CallFunc(t),new cc.CallFunc(function(){s||this.runAction(new cc.RemoveSelf)
}.bind(this))))}.bind(this));var i=function(){n?this.animation.setTimeScale(1e3):(this.animation.setTimeScale(1),cleverapps.config.debugMode&&cleverapps.keyboardController.isPressed(cc.KEY.d)&&this.animation.setTimeScale(.1)),this.animation.setAnimation(0,e,!1),this.background&&("open"===e?this.background.runAction(new cc.FadeOut(1)):(this.background.setOpacity(0),this.background.runAction(new cc.FadeIn(1)))),"open"===e?cleverapps.audio.playSound(bundles.main.urls.transition_open_effect):cleverapps.audio.playSound(bundles.main.urls.transition_close_effect)}.bind(this),o=cleverapps.styles.TransitionAnimation;"open"===e?this.animation.runAction(new cc.Sequence(new cc.DelayTime(o.beforeOpen.delay),new cc.CallFunc(i),new cc.DelayTime(o.open.delay),new cc.CallFunc(t))):i()}});if(TransitionAnimation.animate=function(e,t){(t=t||{}).parent||(t.parent=cc.director.getRunningScene());var s=t.spine?t.spine:new TransitionAnimation({styling:t.styling});return s.setPositionRound(t.parent.width/2,
t.parent.height/2),s.removeFromParent(),t.parent.addChild(s,1e3),s.animate(e,t.callback,t.notRemove,t.silent),s},TransitionAnimation.hideLoading=function(){var e=TransitionAnimation.closeCurtains;if(e&&e.loading){var t=.3*(1-e.loading.scale);e.loading.runAction(new cc.Sequence(new cc.ScaleTo(t,1),new cc.DelayTime(Math.max(cleverapps.styles.TransitionAnimation.loading.hideDelay-t,0)),new cc.ScaleTo(.3,.1),new cc.RemoveSelf)),delete e.loading}},TransitionAnimation.clearCloseCurtains=function(){TransitionAnimation.closeCurtains&&(TransitionAnimation.hideLoading(),delete TransitionAnimation.closeCurtains)},TransitionAnimation.removeCloseCurtains=function(){TransitionAnimation.closeCurtains&&(TransitionAnimation.closeCurtains.removeFromParent(),delete TransitionAnimation.closeCurtains)},TransitionAnimation.reset=function(){this.removeCloseCurtains()},TransitionAnimation.closeCurtainsAnimation=function(e,t,s){var n=TransitionAnimation.animate("close",{styling:s,notRemove:!0,silent:t,
callback:function(){cc.eventManager.removeListeners(n),e()}});return n},TransitionAnimation.chooseStyling=function(){var e,t=bundles.transition.jsons.transition_json,s=cleverapps.Spine.getSkins(t);return 0<s.length&&(e=s[levels.user.getVirtualLevel()%s.length]),{json:t,skin:e}},TransitionAnimation.createTransitionAnimation=function(n,i,o){var e=function(){var e=cc.director.getRunningScene();if(e){(o=o||{}).level=o.level||e.level;var t=TransitionAnimation.chooseStyling(),s=TransitionAnimation.closeCurtainsAnimation(n,i,t);e.onTransitionAnimationDidStart(),TransitionAnimation.removeCloseCurtains(),TransitionAnimation.closeCurtains=s,TransitionAnimation.swallowTouches(s),TransitionAnimation.createLoadingAnimation(s,e)}else n()}.bind(this);cleverapps.bundleLoader.loadBundle("transition",{onSuccess:e})},TransitionAnimation.createLoadingAnimation=function(e,t){var s=bundles.main.jsons.wait_transition_json,n=cleverapps.styles.TransitionAnimation.loading;if(n&&cleverapps.bundleLoader.isLoaded(
cleverapps.Spine.listBundles(s))&&!(t instanceof LoaderScene)){var i=e.loading=new cc.Node;if(i.setAnchorPoint2(),bundles.main.jsons.wait_transition_json){var o=new cleverapps.Spine(s);i.addChild(o),o.setAnimation(0,"idle",!0)}var a=cleverapps.UI.generateOnlyText(Messages.get("Loading")||"Loading",cleverapps.styles.FONTS.TRANSITION_LOADING_TEXT);i.addChild(a),a.setPositionRound(n.textPos),cleverapps.UI.wrap(i),e.runAction(new cc.Sequence(new cc.DelayTime(n.delay),new cc.CallFunc(function(){e.addChild(i),i.setPositionRound(n),i.setScale(0),i.runAction(new cc.ScaleTo(.3,1))})))}},TransitionAnimation.removeTransitionAnimation=function(e,t){var s=TransitionAnimation.animate("open",{callback:function(){cc.eventManager.removeListeners(s),t()},parent:e,spine:TransitionAnimation.closeCurtains});TransitionAnimation.clearCloseCurtains(),TransitionAnimation.swallowTouches(s)},TransitionAnimation.swallowTouches=function(e){cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,
swallowTouches:!0,onTouchBegan:function(){return!0},onTouchEnded:function(){return!0}},e),cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:function(e){return e&&e.stopPropagation&&e.stopPropagation(),!0},onMouseScroll:function(e){return e&&e.stopPropagation&&e.stopPropagation(),!0}},e)},cleverapps.overrideFonts(cleverapps.styles.FONTS,{TRANSITION_LOADING_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.TransitionAnimation={loading:{delay:.5,hideDelay:.3,x:{align:"center"},y:{align:"center",dy:-400},textPos:{x:{align:"center"},y:{align:"center",dy:60}}},open:{delay:.5},beforeOpen:{delay:.2}},cleverapps.RestClient={getBase:function(){var e=cleverapps.User.calcSource();return cc.sys.isNative||cleverapps.isInstant()||-1!==["mbga","nk","android","plinga","huzcom","pliega","yandex"].indexOf(e)||"mobile_vk"===e&&cleverapps.config.vkcors?cleverapps.config.deployment:""},sendRaw:function(e,t,s){
var n=cc.sys.isNative?cc.loader.getXMLHttpRequest():new XMLHttpRequest,i=cleverapps.RestClient.getBase()+t;n.open(e,i),n.timeout=1e4,n.send(s)},createQueryString:function(e){var t=[];for(var s in e)t.push(s+"="+("string"==typeof e[s]?e[s]:JSON.stringify(e[s])));return t.join("&")},get:function(e,t,s,n,i){this.send(cleverapps.RestClient.METHODS.GET,e,t,s,n,i)},post:function(e,t,s,n,i){this.send(cleverapps.RestClient.METHODS.POST,e,t,s,n,i)},send:function(e,t,s,n,i,o){if(!cleverapps.flags.norest){o=o||{},timeout=o.timeout||1e4;var a=cc.sys.isNative?cc.loader.getXMLHttpRequest():new XMLHttpRequest,r=setTimeout(function(){l.call({status:-1,statusText:"our timeout"})},timeout+1e3),l=function(){if(void 0!==r&&(clearTimeout(r),r=void 0),200<=this.status&&this.status<300){if(n){var e;try{e=this.responseText&&JSON.parse(this.responseText)}catch(e){throw"parse json error: path - "+t+", message - "+e.message}n(e)}}else console.log("XMLHttpRequest FAILED"),this.status&&console.log(this.status),
this.statusText&&console.log(this.statusText),this.responseText&&(this.errorMessage=(this.responseText.split("\n")[0]||"").trim(),this.errorMessage&&console.log(this.errorMessage)),i&&i(this);n=function(){},i=function(){}}.bind(a);a.ontimeout=l,a.onload=l,a.onerror=l,a.onabort=l;var c=t;"http"!==c.substr(0,4)&&(c=cleverapps.RestClient.getBase()+cleverapps.config.restApiURL+t),a.open(e,c),a.timeout=timeout,a.setRequestHeader("Content-Type","application/json"),o.authorization?a.setRequestHeader("authorization",o.authorization):a.setRequestHeader("Cache-Control","no-cache"),a.send(JSON.stringify(s))}},METHODS:{GET:"GET",POST:"POST"}},cleverapps.Tutorial=function(){this.tutorialSteps=new cleverapps.TutorialSteps,this.steps=this.tutorialSteps.list(this.nextStep.bind(this)),this.onStartedListener=function(){},this.onFinishedListener=function(){}},cleverapps.Tutorial.prototype.setGame=function(e){this.game=e,this.tutorialSteps.setGame(this.game)},cleverapps.Tutorial.prototype.stop=function(){
this.running=!1,this.step=this.steps.length},cleverapps.Tutorial.prototype.start=function(){this.running=!0,this.setStep(0),this.onStartedListener()},cleverapps.Tutorial.prototype.remindStep=function(){this.isRunning()&&this.steps[this.step].call(this,this.game)},cleverapps.Tutorial.prototype.setStep=function(e){this.step=e,this.step>=this.steps.length&&(this.running=!1);var t={step:e};if(this.isRunning()){var s="tutorial_step_"+(e+1);cleverapps.eventLogger.logEvent(s,t),0===e&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.TUTORIAL_BEGIN)}else this.onFinishedListener(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.TUTORIAL_COMPLETED,t),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.TUTORIAL_COMPLETE);this.remindStep()},cleverapps.Tutorial.prototype.nextStep=function(){this.isRunning()&&this.setStep(this.step+1)},cleverapps.Tutorial.prototype.isRunning=function(){return this.running},cleverapps.EventsLogger=function(){this.pool={names:[],data:[]}},
cleverapps.EventsLogger.prototype.logEvent=function(e,t){if(!cleverapps.flags||!cleverapps.flags.noLogEvents){40<e.length&&console.log("WARN: Invalid event name: "+e+"!. It must be between 1 and 40 characters, and must be contain only alphanumerics, , - or spaces, starting with alphanumeric or _.");var s=this.getBaseParameters();if(void 0!==t&&(s=cleverapps.extend(s,t)),cleverapps.firebase){var n=cleverapps.EventsLogger.FIREBASE_RENAMES[e]||e;-1!==["earn_virtual_currency","spend_virtual_currency"].indexOf(n)&&(s.virtual_currency_name="coins",s.value=s.amount||1),cleverapps.firebase.logEvent(n,s)}cleverapps.adjust&&cleverapps.adjust.logEvent(e);var i=cleverapps.EventsLogger.FACEBOOK_RENAMES[e]||e;cleverapps.social&&cleverapps.social.logEvent?cleverapps.social.logEvent(i,s):cleverapps.facebookEventsLogger&&cleverapps.facebookEventsLogger.logEvent(i,s),-1===cleverapps.EventsLogger.IGNORED_EVENTS.indexOf(e)&&this.addEvent(e,t)}},cleverapps.EventsLogger.prototype.addEvent=function(e,t){
void 0===t&&(t={}),e===cleverapps.EVENTS.PRODUCT_BOUGHT_LANGUAGE?e=cleverapps.EVENTS.PRODUCT_BOUGHT+"_"+cleverapps.settings.language:e===cleverapps.EVENTS.DAU_LANGUAGE?e=cleverapps.EVENTS.DAU+"_"+cleverapps.settings.language:e===cleverapps.EVENTS.BOOSTERS_BOUGHT_ITEM?e=cleverapps.EVENTS.BOOSTERS_BOUGHT+"_"+t.id:e===cleverapps.EVENTS.STAR_CHEST_OPEN_ITEM?e=cleverapps.EVENTS.STAR_CHEST_OPEN+"_"+t.id:e===cleverapps.EVENTS.SHARE_ITEM&&(e=cleverapps.EVENTS.SHARE+"_"+t.id),this.pool.names.push(e),this.pool.data.push(t);var s=this.getBaseParameters();setTimeout(this.sendEvents.bind(this,s),0)},cleverapps.EventsLogger.prototype.sendEvents=function(e){if(0<this.pool.names.length){var t=this.pool.names.join(",");console.log("Sending events - "+t),(e=cleverapps.extend(e,this.getBaseParameters())).events=t,e.params=this.pool.data,cleverapps.RestClient.post("/events/",e,function(){},function(){console.log("Failure event - "+t)}),this.pool.names=[],this.pool.data=[]}},
cleverapps.EventsLogger.prototype.getBaseParameters=function(){var e={};cleverapps.user&&cleverapps.user.id&&(e.id=cleverapps.user.id),cleverapps.environment&&(cleverapps.environment.getScreen()&&(e.screen=cleverapps.environment.getScreen()),void 0!==cleverapps.environment.levelNo&&(e.level=cleverapps.environment.levelNo),void 0!==cleverapps.environment.episodeNo&&(e.episode=cleverapps.environment.episodeNo));var t=Game.currentGame&&Game.currentGame.level;return t&&(t.content&&(e.version=t.content.version),t.hash&&(e.hash=t.hash)),cleverapps.settings&&cleverapps.settings.language&&(e.language=cleverapps.settings.language),e.source=cleverapps.User.calcSource(),levels.episodes&&(e.amountEpisodes=levels.episodes.getAmountEpisodes()),e},cleverapps.EventsLogger.FIREBASE_RENAMES={},cleverapps.EventsLogger.FIREBASE_RENAMES[cleverapps.EVENTS.REWARD_RECEIVED]="earn_virtual_currency",cleverapps.EventsLogger.FIREBASE_RENAMES[cleverapps.EVENTS.SPEND_COINS]="spend_virtual_currency",
cleverapps.EventsLogger.FACEBOOK_RENAMES={},cleverapps.EventsLogger.FACEBOOK_RENAMES[cleverapps.EVENTS.SPEND_COINS]=cleverapps.EVENTS.FB_SPEND_COINS,cleverapps.EventsLogger.IGNORED_EVENTS=[cleverapps.EVENTS.ACHIEVED_LEVEL,cleverapps.EVENTS.LEVEL_UP],cleverapps.FacebookEventsLogger=function(){this.batch=[];var e=cleverapps.User.calcSource();(-1===["android","ios"].indexOf(e)||cleverapps.flags.nofacebookevents)&&cleverapps.override(this,cleverapps.FakeFacebookEventsLogger)},cleverapps.FacebookEventsLogger.prototype.logEvent=function(e,t){var s={name:e};t&&(s.params=t),this.batch.push(s),this.logEventsBatch()},cleverapps.FacebookEventsLogger.prototype.logEventsBatch=cleverapps.accumulate(1e3,function(){cc.sys.os===cc.sys.OS_ANDROID?FacebookPlugin.logEventsBatch(JSON.stringify(this.batch)):cc.sys.os===cc.sys.OS_IOS&&(console.log("FacebookEventsLogger logEventsBatch"),webkitMessage("facebook",{action:"logEventsBatch",events:this.batch})),this.batch=[]}),cleverapps.FakeFacebookEventsLogger={
logEvent:function(){},logEventsBatch:function(){}},"undefined"!=typeof module&&void 0===cleverapps)cleverapps={config:{},isLocalhost:function(){}};cleverapps.Random={state:0,m:2147483648,a:1103515245,c:12345,seed:function(e){if("number"!=typeof e){if("string"==typeof e)return cleverapps.Random.state=cleverapps.Random.strToInt(e);var t="Expecting string as seed";if(cleverapps.config.debugMode&&cleverapps.isLocalhost())throw Error(t);console.log(t)}else cleverapps.Random.state=Math.abs(parseInt(e)||0)%cleverapps.Random.m},randomSeed:function(){cleverapps.Random.state=Math.floor(Math.random()*cleverapps.Random.m);for(var e=cleverapps.Random.state,t=[],s=0;s<100;s++){if(x=this.nextInt(),0<=t.indexOf(x))return void this.randomSeed();t.push(x)}cleverapps.Random.state=e},shuffle:function(e){for(var t=[],s=[],n=0;n<e.length;n++)s.push(n);for(n=0;n<e.length;n++){var i=cleverapps.Random.random(s.length);t.push(e[s[i]]),s.splice(i,1)}return t},strToInt:function(e){for(var t=0,s=0;s<e.length;s++
)t=(1e3*t+e.charCodeAt(s))%cleverapps.Random.m;return t},nextInt:function(){return cleverapps.Random.state=(cleverapps.Random.a*cleverapps.Random.state+cleverapps.Random.c)%cleverapps.Random.m},nextDouble:function(){return cleverapps.Random.nextInt()/cleverapps.Random.m},mathChoose:function(e){if(0!==e.length)return e[Math.floor(Math.random()*e.length)]},choose:function(e,t){if(0!==e.length)return e[cleverapps.Random.random(0,e.length-1,t)]},random:function(e,t,s){var n;void 0!==s&&(n=cleverapps.Random.state,cleverapps.Random.seed(!1!==s?s:Math.floor(1e6*Math.random()))),void 0===t&&(t=e-1,e=0);var i=t-e+1,o=cleverapps.Random.nextInt()/cleverapps.Random.m,a=e+Math.floor(o*i);return void 0!==n&&cleverapps.Random.seed(n),a}},cleverapps.Random.randomSeed(),"undefined"!=typeof module&&(module.exports=cleverapps.Random),cleverapps.Audio=function(){this.cache={},WebViewAudioEngine.IsApplicable()&&(cc.sys.isWebViewAudio=!0,cc.audioEngine=new WebViewAudioEngine),this.disk=void 0,this.muted=!1,
this.volume=1,this.currentFade=void 0,cleverapps.eventBus.on("gamePause",this.onChangeMusic.bind(this)),cleverapps.eventBus.on("gameResume",this.onChangeMusic.bind(this)),cc.sys.isNative||"undefined"==typeof window||window.addEventListener("focus",function(e){cc.Audio._context&&cc.Audio._context.resume&&cc.Audio._context.resume()})},cleverapps.Audio.prototype.insertDisk=function(e){this.setVolume(1),this.stopFade(),this.disk=processVirtualUrl(e),this.onChangeMusic()},cleverapps.Audio.prototype.eject=function(){this.setVolume(1),this.stopFade(),this.disk=void 0,this.onChangeMusic()},cleverapps.Audio.prototype.mute=function(){this.muted||(this.muted=!0,this.onChangeMusic())},cleverapps.Audio.prototype.unmute=function(){this.muted&&(this.muted=!1,this.onChangeMusic())},cleverapps.Audio.prototype.onChangeMusic=function(){this.disk&&!this.muted&&cleverapps.settings.music&&!cc.game.isPaused()?(this.logSound(this.disk),this.volume!==this.realVolume&&this.setVolume(this.volume),
cc.sys.isWebViewAudio||cc.loader.getRes(this.disk)?cc.audioEngine.playMusic(this.disk,!0):cc.loader.load(this.disk,this.onChangeMusic.bind(this))):cc.audioEngine.stopMusic()},cleverapps.Audio.prototype.stopFade=function(){this.currentFade&&(clearInterval(this.currentFade),delete this.currentFade)},cleverapps.Audio.prototype.setVolume=function(e){this.volume=e,cc.audioEngine.canChangeMusicVolume()&&!this.muted&&cleverapps.settings.music&&!cc.game.isPaused()&&(this.realVolume=e,cc.audioEngine.setMusicVolume(e))},cleverapps.Audio.prototype.fadeOut=function(e){this.setVolume(1),this.stopFade(),this.disk&&this._fade(e,-1)},cleverapps.Audio.prototype.fadeIn=function(e){this.stopFade(),e?(this.setVolume(0),this.disk&&this._fade(e,1)):this.setVolume(1)},cleverapps.Audio.prototype._fade=function(e,t){var s=(1e3*e||400)/20,n=1/s*t;this.currentFade=setInterval(function(){var e=Math.max(0,Math.min(1,this.volume+n));this.setVolume(e),0===--s&&(t<0&&this.eject(),this.stopFade())}.bind(this),20)},
cleverapps.Audio.prototype.playSound=function(e,t){if(cleverapps.settings.sound&&!cc.game.isPaused()&&!this.muted){if(e=processVirtualUrl(e,{useUnusedBundles:!0})){t=t||{},this.logSound(e,t);var s=this.cache[e],n=void 0!==t.throttle?t.throttle:cleverapps.Audio.THROTTLE_AUDIO;if(s){if(!cc.sys.isNative&&s.getPlaying()&&s.startPlaying+n>Date.now())return;cc.sys.isNative&&cc.audioEngine.stopEffect(s)}var i=(cc.audioEngine._audioPool[e]||[]).filter(function(e){return!e.getPlaying()})[0];return i&&cc.audioEngine.stopEffect(i),(s=cc.audioEngine.playEffect(e,t.loop))&&(s.startPlaying=Date.now(),this.cache[e]=s),s}cleverapps.config.debugMode}},cleverapps.Audio.prototype.stopSound=function(e){cc.audioEngine.stopEffect(e)},cleverapps.Audio.THROTTLE_AUDIO=250,cleverapps.Audio.prototype.logSound=function(e,t){cleverapps.config.debugMode&&cleverapps.keyboardController.isPressed(cc.KEY.s)&&(console.log("--------------------- sound logging ----------------------"),console.log("sound file",e),
t&&console.log("sound options",t),console.log("----------------------------------------------------------"))},cc.audioEngine.canChangeMusicVolume=function(){return cc.audioEngine._currMusic&&cc.audioEngine._currMusic.setVolume};var WebViewAudioEngine=function(){this._musicVolume=1,this._audioPool={},this.batch={},this.sendBatch=cleverapps.accumulate(0,this.sendBatch.bind(this))};WebViewAudioEngine.prototype._pausePlaying=function(){},WebViewAudioEngine.prototype._resumePlaying=function(){},WebViewAudioEngine.prototype.setMusicVolume=function(e){e-=0,isNaN(e)&&(e=1),1<e&&(e=1),e<0&&(e=0),this._musicVolume=e,this.batch.setMusicVolume={action:"setMusicVolume",volume:e},this.sendBatch()},WebViewAudioEngine.prototype.sendBatch=function(){var e=cleverapps.values(this.batch);cc.sys.os===cc.sys.OS_ANDROID&&(e=JSON.stringify(e)),AudioPlugin.sendBatch(e),this.batch={}},WebViewAudioEngine.prototype.getMusicVolume=function(){return this._musicVolume},
WebViewAudioEngine.prototype.playMusic=function(e,t){e&&(this.batch.musicAction={action:"playMusic",url:e,loop:Boolean(t)},this.sendBatch())},WebViewAudioEngine.prototype.stopMusic=function(){this.batch.musicAction={action:"stopMusic"},this.sendBatch()},WebViewAudioEngine.prototype.stopEffect=function(e){e&&e.url&&(this.batch["effect_"+e.url]={action:"stopEffect",url:e.url},this.sendBatch())},WebViewAudioEngine.prototype.stopAllEffects=function(){},WebViewAudioEngine.prototype.playEffect=function(e,t){if(e)return this.batch["effect_"+e]={action:"playEffect",url:e,loop:Boolean(t)},this.sendBatch(),new WebViewAudio(e,t)},WebViewAudioEngine.prototype.canChangeMusicVolume=function(){return!0},WebViewAudioEngine.IsApplicable=function(){return cc.sys.isWebView&&"undefined"!=typeof AudioPlugin};var WebViewAudio=function(e,t){this.url=e,this.loop=t,this.startPlaying=Date.now()};WebViewAudio.prototype.getPlaying=function(){return Date.now()<this.startPlaying+cleverapps.parseInterval(
WebViewAudio.FAKE_DURATION)},WebViewAudio.FAKE_DURATION="1 second",cleverapps.ABTest=function(){this.group=void 0,this.setGroup(cleverapps.user.abtest)},cleverapps.ABTest.prototype.isRunning=function(e){return cleverapps.ABTest.ACTIVE_TEST&&cleverapps.ABTest.ACTIVE_TEST.name===e},cleverapps.ABTest.prototype.setGroup=function(e){this.group=void 0,cleverapps.ABTest.ACTIVE_TEST&&(-1===cleverapps.ABTest.ACTIVE_TEST.groups.indexOf(e)?cleverapps.ABTest.wantAssignGroup()&&(this.group=cleverapps.Random.mathChoose(cleverapps.ABTest.ACTIVE_TEST.groups)):this.group=e),cleverapps.user.abtest!==this.group&&(cleverapps.user.abtest=this.group,this.afterGroupChosen&&this.afterGroupChosen(),cleverapps.user.save())},cleverapps.ABTest.prototype.purchaseEvent=function(e){void 0!==this.group&&cleverapps.eventLogger.logEvent("abtest_"+this.group,{amount:e})};var Alarm=function(){this.on=!1,this.alarms={},this.priority=0,this.onChangeListeners={}};Alarm.prototype.isOn=function(){return 0<this.priority},
Alarm.prototype.start=function(e,t){this.alarms[e]=t||1,this.onChange()},Alarm.prototype.stop=function(e){delete this.alarms[e],this.onChange()},Alarm.prototype.clear=function(){this.alarms={},this.onChange()},Alarm.prototype.onChange=function(){var e=0;for(var t in this.alarms)this.alarms[t]>e&&(e=this.alarms[t]);if(e!==this.priority)for(var t in this.priority=e,this.onChangeListeners)this.onChangeListeners[t](e)},(Mission=function(e,t,s){this.started=void 0,this.type=e,this.state=Mission.STATE_RUNNING,this.details={},this.result=0,this.onChangeResults=function(){},cleverapps.extend(this,Missions[this.type]),this.isMinigameMission()&&(this.currency=this.getStartCurrency()),this.type===Mission.TYPE_LANTERN&&(this.result=1);var n=!t;if(n){if(this.started=Date.now(),this.needShowStartWindow=!0,this.oncePerEvent){var i=cleverapps.eventManager.getFeatureEvent(this.feature);this.eventFinishTime=i?i.finish.getTime():Date.now()}}else this.load(t);if(this.competition){(n||s
)&&Competition.CLEAN_SAVED(this.type);var o=Competition.optionsByMission(this);this.runningCompetition=new Competition(o),this.runningCompetition.onChangeResultsListeners.mission=this.resultsChanged.bind(this),cleverapps.friends.playerInfoChangedListeners.mission=this.userInfoChanged.bind(this),this.runningCompetition.start()}this.logic&&(this.logic=new this.logic(this,n)),this.onUpdateState()}).STATE_RUNNING=0,Mission.STATE_COMPLETED=1,Mission.STATE_SHOWN_FINISHVIEW=2,Mission.prototype.onUpdateState=function(){this.countdown&&(this.countdown.remove(),delete this.countdown),this.isRunning()?this.countdown=new cleverapps.CountDown(this.getTimeLeft(),{onFinish:this.onUpdateState.bind(this),permanent:!0}):(this.complete(),this.runningCompetition&&this.runningCompetition.stop(),this.logic&&this.logic.stop&&this.logic.stop()),this.updateIcons()},Mission.prototype.updateIcons=function(){var e=cleverapps.sideBar.findMissionIcon(this.type);e&&e.resetState()
;var t=cleverapps.sideBar.findMissionIcon(this.type,!0);t&&t.resetState()},Mission.prototype.userInfoChanged=function(e){this.runningCompetition.onUserInfoChanged(e),cleverapps.missionManager.table.resetResults(this.type),this.resultsChanged()},Mission.prototype.resultsChanged=function(){this.onChangeResults(),this.logic&&this.logic.onChangeResults&&this.logic.onChangeResults()},Mission.prototype.beforeRemove=function(){this.countdown&&(this.countdown.remove(),delete this.countdown),this.runningCompetition&&this.runningCompetition.stop(),this.logic&&this.logic.beforeRemove&&this.logic.beforeRemove()},Mission.prototype.load=function(e){this.started=e.started,this.result=e.result,this.details=e.details,this.currency=e.currency,this.eventFinishTime=e.eventFinishTime},Mission.prototype.update=function(e,t){if(this.isRunning()&&(this.result+=e,t&&(this.details=t)),this.runningCompetition&&0!==e&&this.runningCompetition.updatePlayerResult(cleverapps.user.id,this.result),this.onUpdateState(),
this.onChangeResults(),cleverapps.missionManager.save(),this.logic&&this.logic.onUpdate)return this.logic.onUpdate(this)},Mission.prototype.canRemoveSilently=function(){return this.logic?!!this.logic.canRemoveSilently&&this.logic.canRemoveSilently():0===this.result||"?"===this.getSummary().place},Mission.prototype.canRemove=function(){return!this.logic||!this.logic.canRemove||this.logic.canRemove()},Mission.prototype.hasLastChance=function(){return!!this.lastChanceView&&(!(!this.logic||!this.logic.hasLastChance)&&this.logic.hasLastChance())},Mission.prototype.receiveReward=function(){var e=this.getPrize(),t="_lost";return e&&(t="_prize"),0===this.place&&this.runningCompetition&&(t="_first"),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MISSION_FINISH+t),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MISSION_FINISH+"_"+this.type+t),e},Mission.prototype.skipNext=function(){return this.logic&&this.logic.skipNext&&this.logic.skipNext()},Mission.prototype.useMissionIntent=function(e
){var t=this.getViewClass();cleverapps.scenes.replaceScene(new t(this),e)},Mission.prototype.updateCurrency=function(e,t){0!==e&&void 0!==this.currency&&(this.currency+=e,t&&(this.details=t),this.onUpdateState(),cleverapps.missionManager.save())},Mission.prototype.getSummary=function(){return this.runningCompetition?{place:this.runningCompetition.calcPlace(),points:this.runningCompetition.player.amount}:{place:"?",points:this.result}},Mission.prototype.getResults=function(){if(!this.runningCompetition)return[];var e=this.runningCompetition.getResults().map(function(e,t){return{id:e.id,player:e.player,text:e.name,avatar:{id:e.id,avatar:e.avatar},amount:e.amount}});return e.sort(function(e,t){return t.amount-e.amount}),e.forEach(function(e,t){e.place=t+1}),e},Mission.prototype.save=function(){return{started:this.started,type:this.type,result:this.result,currency:this.currency,eventFinishTime:this.eventFinishTime,details:this.details}},Mission.prototype.getName=function(){return this.name
},Mission.prototype.getWindowBundleName=function(){return this.bundle},Mission.prototype.isMinigameMission=function(){return void 0!==this.minigame},Mission.prototype.isBattlePassMission=function(){return void 0!==this.battlePass},Mission.prototype.isSlotMachineMission=function(){return void 0!==this.slotMachine},Mission.prototype.isCompetitionMission=function(){return void 0!==this.competition},Mission.prototype.getViewClass=function(){return this.view},Mission.prototype.complete=function(){this.state===Mission.STATE_RUNNING&&(this.state=Mission.STATE_COMPLETED)},Mission.prototype.getIcon=function(){return cleverapps.skins.getSlot("missionIcon",{type:this.type})},Mission.prototype.finishTime=function(){if(this.feature){if(this.oncePerEvent)return this.eventFinishTime;var e=cleverapps.eventManager.getFeatureEvent(this.feature);return e?e.finish.getTime():Date.now()}return this.started+cleverapps.parseInterval(this.duration)},Mission.prototype.getTimeLeft=function(){return Math.max(0,
this.finishTime()-Date.now())},Mission.prototype.isRunning=function(){return this.state===Mission.STATE_RUNNING&&this.finishTime()>Date.now()},Mission.prototype.isCompleted=function(){return this.state===Mission.STATE_COMPLETED},Mission.prototype.canPlayMinigame=function(){return this.isMinigameMission()&&this.currency&&this.currency>=this.getMinigamePrice()},Mission.prototype.getMinigamePrice=function(){return this.minigame.price},Mission.prototype.isMinigameReadyToFinish=function(){return this.isMinigameMission()&&this.logic&&this.logic.isMinigameReadyToFinish&&this.logic.isMinigameReadyToFinish()},Mission.prototype.getStartCurrency=function(){return void 0!==this.startCurrency?this.startCurrency:this.getMinigamePrice()},Mission.prototype.getMinigameClass=function(){return this.minigame.className},Mission.prototype.getLevelReward=function(){return-1!==[Mission.TYPE_TREASURE_SEARCH].indexOf(this.type)?[1,3,2]:-1!==[Mission.TYPE_BATTLEPASS].indexOf(this.type)?[3,6]:[1,1]},
Mission.prototype.getPrize=function(){if(this.prize){if(this.minigame){if(!this.logic.isFinished())return;return this.prize.prepareByRich?cleverapps.user.prepareRewardByRich(this.prize):this.prize}return this.place=this.getSummary().place,this.place<this.prize.length?RewardsConfig.Tournament.prepareByRich?cleverapps.user.prepareRewardByRich(this.prize[this.place]):this.prize[this.place]:void 0}},Mission.prototype.updateCompetitionResults=function(){this.runningCompetition&&this.runningCompetition.updatePlayerResult(cleverapps.user.id,this.result)},Mission.cooldownInterval=function(e){return Missions[e].cooldown};var MissionManager=function(){this.missions=[],this.lastRemoved={},this.table=new cleverapps.Table,this.load(cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.MISSIONS)),this.semaphoresOnHold=0};MissionManager.isObsoleteMissionType=function(e){return-1===[Mission.TYPE_COMBO,Mission.TYPE_COLLECT_MARK,Mission.TYPE_BURN_NEARBY,Mission.TYPE_LETTER,Mission.TYPE_TREASURE_SEARCH,
Mission.TYPE_LANTERN,Mission.TYPE_WARDROBE,Mission.TYPE_FAVORITE_SALE,Mission.TYPE_LIVES_SALE,Mission.TYPE_BOOSTERS_SALE,Mission.TYPE_COINS_SALE,Mission.TYPE_BATTLEPASS,Mission.TYPE_STICKERS_COLLECTION,Mission.TYPE_BONUS_WORLD,Mission.TYPE_ENERGY_FEAST,Mission.TYPE_SLOT_MACHINE,Mission.TYPE_COINS_FEAST,Mission.TYPE_COINS_TIME,Mission.TYPE_ENERGY_TIME,Mission.TYPE_PURCHASE_BATTLEPASS,Mission.TYPE_KRAKEN_FEAST].indexOf(e)},MissionManager.prototype.load=function(e,t){if(e){var s=this.listAvailableTypes();Missions[Mission.TYPE_KRAKEN_FEAST]&&cleverapps.user.checkAvailable(Missions[Mission.TYPE_KRAKEN_FEAST].available)&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.KRAKEN_AVAILABLE_REFRESHES),-1!==s.indexOf(Mission.TYPE_SLOT_MACHINE)&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_AVAILABLE_REFRESHES),this.missions=[],this.lastRemoved=e.lastRemoved||{};for(var n=(Array.isArray(e)?e:e.missions)||[],i=0;i<n.length;i++){var o=n[i];-1===s.indexOf(o.type
)||MissionManager.isObsoleteMissionType(o.type)||(void 0===o.lastRemoved?this.add(o.type,o,t):this.lastRemoved[o.type]=o.lastRemoved)}}},MissionManager.prototype.getPlayableMissions=function(){return this.missions.filter(function(e){return e.isRunning()&&e.canPlayMinigame()})},MissionManager.prototype.getRunningMission=function(e){for(var t=0;t<this.missions.length;t++)if(this.missions[t].isRunning()&&this.missions[t].semaphore&e)return this.missions[t]},MissionManager.prototype.skipNext=function(){return 0<this.missions.filter(function(e){return e.skipNext()}).length},MissionManager.prototype.getMissionWithIntent=function(){for(var e in this.missions){var t=this.missions[e];if(t.logic&&t.logic.hasIntent&&t.logic.hasIntent())return t}},MissionManager.prototype.dispatchEvent=function(e,t){var s=!1;for(var n in this.missions){var i=this.missions[n];i.logic&&i.logic.processEvent&&i.logic.processEvent(e,t||{})&&(s=!0)}return s},MissionManager.prototype.findByType=function(e){for(
var t=0;t<this.missions.length;t++)if(this.missions[t].type===e)return this.missions[t]},MissionManager.prototype.reset=function(e){this.missions=[],this.lastRemoved={},this.save()},MissionManager.prototype.encodeLastRemoved=function(){return this.missions.forEach(function(e){delete this.lastRemoved[e.type]},this),Object.keys(this.lastRemoved).forEach(function(e){(!Missions[e]||MissionManager.isObsoleteMissionType(+e)||this.lastRemoved[e]+cleverapps.parseInterval(Mission.cooldownInterval(e))<Date.now())&&delete this.lastRemoved[e]},this),Object.keys(this.lastRemoved).map(function(e){var t=this.lastRemoved[e];return{type:parseInt(e),lastRemoved:t}},this)},MissionManager.prototype.save=function(e){var t=this.missions.map(function(e){return e.save()});t=t.concat(this.encodeLastRemoved()),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.MISSIONS,t),e||this.addUpdateTask()},MissionManager.prototype.sendUpdateTask=function(){
Game.currentGame&&Game.currentGame.onChangeOutcomeListeners.missionsUpdate&&(Game.currentGame.onChangeOutcomeListeners.missionsUpdate=function(){}),MissionManager.sendUpdateTimeout&&(clearTimeout(MissionManager.sendUpdateTimeout),MissionManager.sendUpdateTimeout=void 0),cleverapps.synchronizer.addUpdateTask("missions")},MissionManager.prototype.addUpdateTask=function(){"merge"!==cleverapps.config.type&&Game.currentGame&&Game.currentGame.outcome===GameBase.OUTCOME_UNKNOWN?MissionManager.sendUpdateTimeout||cleverapps.environment.isSceneWithPreview()||(Game.currentGame.onChangeOutcomeListeners.missionsUpdate=this.addUpdateTask.bind(this),MissionManager.sendUpdateTimeout=setTimeout(this.sendUpdateTask.bind(this),cleverapps.parseInterval("1 minute"))):this.sendUpdateTask()},MissionManager.prototype.getInfo=function(){var e=this.missions.map(function(e){return e.save()});return e=e.concat(this.encodeLastRemoved())},MissionManager.prototype.updateInfo=function(e,t){for(
;0<this.missions.length;)this.remove(this.missions[0],t);this.lastRemoved={},this.load(e,t),this.save(t)},MissionManager.prototype.removeSilents=function(){for(;;){for(var e=!1,t=0;t<this.missions.length;t++){var s=this.missions[t];if(s.isCompleted()&&s.canRemoveSilently()){e=!0,this.remove(s);break}}if(!e)break}},MissionManager.prototype.anyCompleted=function(){for(var e=0;e<this.missions.length;e++){var t=this.missions[e];if(t.isCompleted())return t}},MissionManager.prototype.displayCompleted=function(n){cleverapps.metha.display({focus:"missionCompleted"+n.name,actions:[function(e){n.state=Mission.STATE_SHOWN_FINISHVIEW;var t=n.finishView;if(t){var s=new t(n);s instanceof cleverapps.FixedWidthScene||s instanceof SceneProxy?cleverapps.scenes.replaceScene(s,e):cleverapps.metha.onceNoWindowsListener=e}else e()},function(e){var t=n.receiveReward(),s=t&&t.unit&&cleverapps.toArray(t.unit).length-Game.currentGame.map.countEmptySlots();if(0<s)return Game.currentGame.onHintMessage(
"messages:Spawn.nospace",!0,{left:s}),void e();cleverapps.metha.compound(e,[function(e){t?(new RewardWindow({reward:t}),cleverapps.metha.onceNoWindowsListener=e):e()},function(e){n.canRemove()&&!n.lastChanceUsed&&n.hasLastChance()?(n.lastChanceUsed=!0,new n.lastChanceView(n),cleverapps.metha.onceNoWindowsListener=e):e()},function(e){n.canRemove()&&cleverapps.missionManager.remove(n),e()}])}]})},MissionManager.prototype.pendingStartWindow=function(){for(var e=0;e<this.missions.length;e++)if(this.missions[e].needShowStartWindow&&this.missions[e].startWindow)return this.missions[e]},MissionManager.prototype.showStartWindow=function(){var t=this.pendingStartWindow();t.needShowStartWindow=!1,cleverapps.metha.display({focus:"missionStartWindow_"+t.type,action:function(e){new t.startWindow(t),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})},MissionManager.prototype.getProjectAvailableTypes=function(){var e=[Mission.TYPE_FAVORITE_SALE,Mission.TYPE_BOOSTERS_SALE]
;return"board"===cleverapps.config.type?(e.push(Mission.TYPE_LETTER),e.push(Mission.TYPE_COINS_SALE),e.push(Mission.TYPE_WARDROBE)):"solitaire"===cleverapps.config.type?(e.push(Mission.TYPE_LETTER),cleverapps.config.debugMode&&e.push(Mission.TYPE_COINS_SALE)):"differences"===cleverapps.config.type?e.push(Mission.TYPE_LETTER):(e.push(Mission.TYPE_COMBO),e.push(Mission.TYPE_COLLECT_MARK),e.push(Mission.TYPE_BURN_NEARBY),cleverapps.config.editorMode||e.push(Mission.TYPE_LANTERN)),cleverapps.lives&&e.push(Mission.TYPE_LIVES_SALE),-1!==["riddles","heroes","olympics","tripeaks","differences","scramble","wordheaps"].indexOf(cleverapps.config.name)&&e.push(Mission.TYPE_TREASURE_SEARCH),-1!==["wordsoup","crocword","magicwords"].indexOf(cleverapps.config.name)&&e.push(Mission.TYPE_STICKERS_COLLECTION),-1!==["scramble","wordheaps","riddles","heroes"].indexOf(cleverapps.config.name)&&e.push(Mission.TYPE_BONUS_WORLD),-1!==["scramble","wordheaps"].indexOf(cleverapps.config.name)&&e.push(
Mission.TYPE_SLOT_MACHINE),-1!==["merge"].indexOf(cleverapps.config.type)&&(e=[Mission.TYPE_ENERGY_FEAST,Mission.TYPE_BATTLEPASS,Mission.TYPE_COINS_FEAST,Mission.TYPE_COINS_TIME,Mission.TYPE_ENERGY_TIME,Mission.TYPE_PURCHASE_BATTLEPASS,Mission.TYPE_KRAKEN_FEAST]),-1!==["wondermerge"].indexOf(cleverapps.config.name)&&(e=[]),-1!==["riddles","heroes"].indexOf(cleverapps.config.name)&&e.push(Mission.TYPE_BATTLEPASS),e},MissionManager.prototype.listAvailableTypes=function(){return-1!==["spades"].indexOf(cleverapps.config.name)?[]:this.getProjectAvailableTypes().filter(function(e){var t=Missions[e].feature;if(t&&-1===cleverapps.eventManager.listCurrentFeatures().indexOf(t))return!1;if(t){var s=(Missions[e].productsCheap||[]).concat(Missions[e].productsExpensive||[]);if(cleverapps.payments.isProductsExists&&!cleverapps.payments.isProductsExists(s))return!1}var n=Missions[e].logic;return!(n&&n.IsAvailable&&!n.IsAvailable())&&cleverapps.user.checkAvailable(Missions[e].available)}.bind(this))},
MissionManager.prototype.getUsedSemaphore=function(){for(var e=0,t=0;t<this.missions.length;t++)e|=this.missions[t].semaphore;return this.semaphoresOnHold&&(e|=this.semaphoresOnHold),e},MissionManager.prototype.canCreateTypes=function(){var e=this.listAvailableTypes(),t=cleverapps.skins.getSlot("removeMissions");if(t&&(e=cleverapps.substract(e,t)),0===e.length)return!1;var i=this.getUsedSemaphore(),o=cleverapps.competitionPlayers.getAmount();e=e.filter(function(e){var t=this.lastRemoved[e]||0,s=Missions[e].competition&&Missions[e].competition.amount[1]||0,n=!Missions[e].canCreate||Missions[e].canCreate();return 0==(i&Missions[e].semaphore)&&t+cleverapps.parseInterval(Mission.cooldownInterval(e))<=Date.now()&&s<=o&&n}.bind(this));var s=0;return e.forEach(function(e){var t=Missions[e].priority||0;s<t&&(s=t)}),e.filter(function(e){return(Missions[e].priority||0)===s})},MissionManager.prototype.run=function(){this.checkIcons();var e=this.canCreateTypes();if(0<e.length){
var t=cleverapps.Random.choose(e);this.add(t),this.save(),cleverapps.playSession.set(cleverapps.EVENTS.MISSION_START_DAU+"_"+Missions[t].name,!0)}},MissionManager.prototype.checkIcons=function(){this.missions.forEach(function(e){if(e.isRunning()){if(!cleverapps.sideBar.findMissionIcon(e.type)){var t=new MissionIcon(e);cleverapps.sideBar.addIcon(t)}if(e.missionOffer&&!cleverapps.sideBar.findMissionIcon(e.type,!0)){var s=new MissionOfferIcon(e);cleverapps.sideBar.addIcon(s)}}})},MissionManager.prototype.remove=function(e,t){e.beforeRemove();var s=this.missions.indexOf(e);if(-1!==s){this.semaphoresOnHold|=e.semaphore,setTimeout(function(){this.semaphoresOnHold&e.semaphore&&(this.semaphoresOnHold-=e.semaphore)}.bind(this),cleverapps.parseInterval("1 minute")),this.table.resetResults(e.type),this.missions.splice(s,1),this.lastRemoved[e.type]=Date.now(),e.oncePerEvent&&(this.lastRemoved[e.type]=e.eventFinishTime),t||this.save();var n=cleverapps.sideBar.findMissionIcon(e.type)
;n?n.removeFromSideBar():cleverapps.throwAsync("Removing non-existent icon of type: "+e.type);var i=cleverapps.sideBar.findMissionIcon(e.type,!0);i&&i.removeFromSideBar()}},MissionManager.prototype.add=function(e,t,s){var n=new Mission(e,t,s);this.missions.push(n);var i=new MissionIcon(n);if(cleverapps.sideBar.addIcon(i),n.missionOffer){var o=new MissionOfferIcon(n);cleverapps.sideBar.addIcon(o)}cleverapps.playSession.set(cleverapps.EVENTS.MISSION_DAU+"_"+n.getName(),!0),e===Mission.TYPE_KRAKEN_FEAST&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.KRAKEN_ACTIVE_REFRESHES),e===Mission.TYPE_SLOT_MACHINE&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_ACTIVE_REFRESHES)},cleverapps.Adversting={idfa:void 0,getIdfa:function(){return this.idfa?(cc.sys.isNative&&console.log("idfa - "+this.idfa),this.idfa):(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?"undefined"!=typeof AdverstingPlugin&&"function"==typeof AdverstingPlugin.getIdfa&&(e=AdverstingPlugin.getIdfa(),
console.log("android idfa - "+e)):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?(e=cleverapps.webViewData.advertisingId,console.log("ios idfa - "+e)):cleverapps.isLocalhost()&&(e="localhostIDFA"),this.idfa=e);var e},postbackUnity:function(e){var t=cleverapps.User.calcSource();if("amazon"===t||"android"===t){var s=cleverapps.config.android.unityGameId;"ios"===t&&(s=cleverapps.config.ios.unityGameId);var n="https://postback.unityads.unity3d.com/games/"+s+"/install?advertisingTrackingId="+e;cleverapps.RestClient.get(n,{},function(e){})}}},cleverapps.Adjust=function(){this.settings=cleverapps.config.adjust||{},this.settings.events=this.settings.events||{},this.settings.token&&cc.sys.isNative&&"undefined"!=typeof AdjustPlugin&&!cleverapps.flags.noadjust||cleverapps.override(this,cleverapps.FakeAdjust),this.initialize()},cleverapps.Adjust.prototype.initialize=function(){var e=this.settings.token;AdjustPlugin.init(e,cleverapps.Adjust.ENVIRONMENT,cleverapps.Adjust.LOG_LEVEL)},
cleverapps.Adjust.prototype.logPurchase=function(e,t,s){var n=this.settings.purchaseToken;n&&AdjustPlugin.logPurchase(n,e,t,s)},cleverapps.Adjust.prototype.logEvent=function(e){var t=this.settings.events[e];t&&AdjustPlugin.logEvent(t)},cleverapps.FakeAdjust={initialize:function(){},logPurchase:function(){},logEvent:function(){}},cleverapps.Adjust.SANDBOX="sandbox",cleverapps.Adjust.PRODUCTION="production",cleverapps.Adjust.ENVIRONMENT=cleverapps.Adjust.PRODUCTION,cleverapps.Adjust.LOG_LEVEL="VERBOSE",cleverapps.FirebaseManager={run:function(){return cc.sys.isWebView&&cc.sys.os===cc.sys.OS_IOS?cleverapps.WebViewIosFirebase:cleverapps.flags.nofirebase?cleverapps.FakeFirebase:cc.sys.isNative&&"undefined"!=typeof FirebasePlugin?cleverapps.WebViewAndroidFirebase:"undefined"!=typeof sdkbox&&sdkbox.firebase?sdkbox.firebase.Analytics:cleverapps.Xsolla.isAppropriate()&&cleverapps.config.webFirebase?cleverapps.WebFirebase:(cc.sys.isNative&&console.log("No firebase plugin found!"),
cleverapps.FakeFirebase)}},cleverapps.WebFirebase={init:function(){cleverapps.loadSdk("//www.gstatic.com/firebasejs/8.9.0/firebase-app.js",{onSuccess:function(){cleverapps.loadSdk("//www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js",{onSuccess:function(){firebase.initializeApp(cleverapps.config.webFirebase),firebase.analytics()}})}})},logEvent:function(e,t){"undefined"!=typeof firebase&&"function"==typeof firebase.analytics&&firebase.analytics().logEvent(e,t)},setScreenName:function(e,t){}},cleverapps.SdkBoxFirebase={init:function(){console.log("init firebase"),sdkbox.firebase.Analytics.init(),sdkbox.firebase.Analytics.setUserID(cleverapps.user.id)},logEvent:function(e,t){sdkbox.firebase.Analytics.logEvent(e,t)},setScreenName:function(e,t){sdkbox.firebase.Analytics.setScreenName(e,t)}},cleverapps.WebViewAndroidFirebase={batch:[],sendBatch:cleverapps.accumulate(1e3,function(){var e=cleverapps.WebViewAndroidFirebase;0<e.batch.length&&(FirebasePlugin.sendBatch(JSON.stringify(e.batch
)),e.batch=[])}),init:function(){this.batch.push({method:"setUserID",id:cleverapps.user.id}),this.sendBatch()},logEvent:function(e,t){this.batch.push({method:"logEvent",name:e,data:JSON.stringify(t)}),this.sendBatch()},setScreenName:function(e,t){this.batch.push({method:"setScreenName",screen:e,scene:t}),this.sendBatch()}},cleverapps.WebViewIosFirebase={init:function(){webkitMessage("firebase",{action:"setUserID",id:cleverapps.user.id})},logEvent:function(e,t){webkitMessage("firebase",{action:"logEvent",name:e,data:JSON.stringify(t)})},setScreenName:function(e,t){webkitMessage("firebase",{action:"setScreenName",screen:e,scene:t})}},cleverapps.FakeFirebase={init:function(){},logEvent:function(){},setScreenName:function(){}},cleverapps.LocalPushes=function(){this.initSender(),this.load(),this.queue={},Messages.onInitializedListeners.localPushes=this.processQueue.bind(this)},cleverapps.LocalPushes.prototype.getByCode=function(e){for(var t in e=cleverapps.castType(e),
cleverapps.LocalPushes.TYPES){var s=cleverapps.LocalPushes.TYPES[t];if(s.code===e)return s}},cleverapps.LocalPushes.prototype.processQueue=function(){var e=this.queue;for(var t in e){var s=e[t],n=this.getByCode(t);n&&this.sendPush(n,s)}this.queue={}},cleverapps.LocalPushes.prototype.init=function(){this.onShow(),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,cleverapps.throttle(1e3,this.onShow.bind(this)))},cleverapps.LocalPushes.prototype.onShow=function(){this.cancelSoonPushes(),cleverapps.user.checkAvailable(cleverapps.LocalPushes.LETS_PLAY_AVAILABLE)?this.sendPush(cleverapps.LocalPushes.TYPES.LETS_PLAY,cleverapps.parseInterval(cleverapps.LocalPushes.LETS_PLAY_TIMEOUT)):this.sendPush(cleverapps.LocalPushes.TYPES.LETS_PLAY,cleverapps.parseInterval(cleverapps.LocalPushes.LETS_PLAY_BEGGINERS_TIMEOUT))},cleverapps.LocalPushes.prototype.initSender=function(){
cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?this.sender=cleverapps.LocalPushes.IosWebViewSender:"object"==typeof LocalPushesPlugin?this.sender=cleverapps.LocalPushes.AndroidWebViewSender:(levels.user.haveTmpId()||cleverapps.isLocalhost()||(this.sender=cleverapps.LocalPushes.FacebookSender),[cleverapps.FakeInstant,cleverapps.FakeFacebook].forEach(function(e){cleverapps.social instanceof e&&(this.sender=void 0)},this)),this.sender||(this.sender=cleverapps.LocalPushes.FakeSender)},cleverapps.LocalPushes.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.LOCAL_PUSHES);this.data=e||{}},cleverapps.LocalPushes.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.LOCAL_PUSHES,this.data)},cleverapps.LocalPushes.prototype.sendPush=function(e,t){var s=e.code;if(t<cleverapps.parseInterval(cleverapps.LocalPushes.TIMEOUT_THRESHOLD))this.cancelPush(e);else if(Messages.isInitialized()){var n=Date.now()+t;this.data[s]&&Math.abs(
this.data[s].when-n)<Math.max(.1*t,cleverapps.parseInterval("1 minute"))||(this.data[s]={when:n},this.save(),this.sender.sendPush(e,t))}else this.queue[s]=t},cleverapps.LocalPushes.prototype.cancelPush=function(e){var t=e.code;delete this.queue[t],this.sender.cancelPush(e),this.data[t]&&(delete this.data[t],this.save())},cleverapps.LocalPushes.prototype.cancelSoonPushes=function(){for(var e in this.data){if(this.data[e].when-Date.now()<=cleverapps.parseInterval(cleverapps.LocalPushes.TIMEOUT_THRESHOLD)){var t=this.getByCode(e);t&&this.cancelPush(t)}}},cleverapps.LocalPushes.GetPushData=function(e,t){var s=Messages.get(e.message),n=Messages.get(e.title,{gameTitle:Messages.get(cleverapps.config.title)});return Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]),void 0===t&&(t=cleverapps.Random.random(0,s.length-1)),{text:s[t],title:n[t]||cleverapps.Random.mathChoose(n),index:t}},cleverapps.LocalPushes.TYPES={BOUNTY:{code:0,title:"LocalPushes.Bounty.Title",message:"LocalPushes.Bounty"},
BONUS_ROUND:{code:2,title:"LocalPushes.BonusRound.Title",message:"LocalPushes.BonusRound"},LIVES:{code:3,title:"LocalPushes.Lives.Title",message:"LocalPushes.Lives"},MINI_GAME:{code:4,title:"LocalPushes.MiniGame.Title",message:"LocalPushes.MiniGame"},LETS_PLAY:{code:5,title:"LocalPushes.LetsPlay.Title",message:"LocalPushes.LetsPlay"},FREE_CHEST:{code:6,title:"LocalPushes.FreeChest.Title",message:"LocalPushes.FreeChest"},ENERGY_LOTTERY:{code:7,title:"LocalPushes.EnergyLottery.Title",message:"LocalPushes.EnergyLottery"},FRUIT_RIPE:{code:8,title:"LocalPushes.FruitRipe.Title",message:"LocalPushes.FruitRipe"},CASTLE_PRIZE:{code:9,title:"LocalPushes.CastlePrize.Title",message:"LocalPushes.CastlePrize"},ORDER_READY:{code:10,title:"LocalPushes.OrderReady.Title",message:"LocalPushes.OrderReady"},TREE_CHOPPED:{code:11,title:"LocalPushes.TreeChopped.Title",message:"LocalPushes.TreeChopped"},BUILDING_BUILT:{code:12,title:"LocalPushes.BuildingBuilt.Title",message:"LocalPushes.BuildingBuilt"},
MAGIC_PLANT_READY:{code:13,title:"LocalPushes.MagicPlantReady.Title",message:"LocalPushes.MagicPlantReady"},MINI_GAME_PRIZE:{code:14,title:"LocalPushes.MineSweeperReady.Title",message:"LocalPushes.MineSweeperReady"},DAILY_TASKS_UNCOMPLETED:{code:15,title:"LocalPushes.DailyTasksUncompleted.Title",message:"LocalPushes.DailyTasksUncompleted"},BATTLEPASS_UNCOMPLETED:{code:16,title:"LocalPushes.BattlePassUncompleted.Title",message:"LocalPushes.BattlePassUncompleted"}},"merge"===cleverapps.config.type&&(cleverapps.LocalPushes.TYPES.LIVES={code:3,title:"LocalPushes.Energy.Title",message:"LocalPushes.Energy"}),cleverapps.LocalPushes.TIMEOUT_THRESHOLD="1 minute",cleverapps.LocalPushes.LETS_PLAY_TIMEOUT="7 days",cleverapps.LocalPushes.LETS_PLAY_BEGGINERS_TIMEOUT="1 day",cleverapps.LocalPushes.LETS_PLAY_AVAILABLE={episode:1,level:0},"merge"===cleverapps.config.type&&(cleverapps.LocalPushes.LETS_PLAY_AVAILABLE={episode:0,level:6}),cleverapps.LocalPushes.FakeSender={askPermission:function(){},
sendPush:function(e,t){if(cleverapps.config.debugMode){var s=cleverapps.LocalPushes.GetPushData(e),n=e.code;s.text&&s.title?(this.pushes||(this.pushes={}),this.pushes[e.code]=setTimeout(function(){cleverapps.config.wysiwygMode||cleverapps.Notification.create(s.text)},t),console.log("FakeSender: scheduled: "+s.text,cleverapps.intervalToString(t))):cleverapps.throwAsync("empty fake push - "+n)}},cancelPush:function(e){if(cleverapps.config.debugMode){this.pushes&&this.pushes[e.code]&&(clearTimeout(this.pushes[e.code]),this.pushes[e.code]=void 0);var t=cleverapps.LocalPushes.GetPushData(e);cleverapps.config.wysiwygMode,console.log("FakeSender: removed: "+t.text,e)}}},cleverapps.LocalPushes.AndroidWebViewSender={askPermission:function(){},sendPush:function(e,t){var s=cleverapps.LocalPushes.GetPushData(e),n=e.code,i=s.title,o=s.text;if(o&&i){var a=LocalPushesPlugin.scheduleNotification(i,o,t,n);a&&cleverapps.throwAsync("Android send push error "+a),
cleverapps.LocalPushes.FacebookSender.sendPush(e,t,s.index)}else cleverapps.throwAsync("empty android push - "+n)},cancelPush:function(e){LocalPushesPlugin.cancelNotification(e.code),cleverapps.LocalPushes.FacebookSender.cancelPush(e)}},cleverapps.LocalPushes.IosWebViewSender={askPermission:function(){webkitMessage("localPushes",{action:"askPermission"})},sendPush:function(e,t){var s=cleverapps.LocalPushes.GetPushData(e),n=s.title,i=s.text,o=e.code;i?(webkitMessage("localPushes",{action:"sendPush",title:n,message:i,timeout:t,code:o}),cleverapps.LocalPushes.FacebookSender.sendPush(e,t,s.index)):cleverapps.throwAsync("empty ios push - "+o)},cancelPush:function(e){webkitMessage("localPushes",{action:"cancelPush",code:e.code}),cleverapps.LocalPushes.FacebookSender.cancelPush(e)}},cleverapps.LocalPushes.FacebookSender={askPermission:function(){},sendPush:function(e,t,s){if(!levels.user.haveTmpId()&&!cleverapps.isLocalhost()){var n=e.code,i=levels.user.id,o=cleverapps.User.calcSource()
;"mobile_mm"!==o&&"web_mm"!==o||(i="mw_"+i),"mobile_ok"!==o&&"web_ok"!==o||(i="ok_"+i),"mobile_vk"!==o&&"web_vk"!==o||(i="vk_"+i);var a="/localpushes/send/"+i+"/"+n,r=cleverapps.LocalPushes.GetPushData(e,s),l={message:r.text,timeout:t};cleverapps.isInstant()&&(l.title=r.title),!l.message||cleverapps.isInstant()&&!l.title?cleverapps.throwAsync("empty facebook push - "+n):(console.log("Sending push - "+n,l),cleverapps.RestClient.post(a,l,function(){console.log("Success push - "+n)},function(){console.log("Failure push - "+n)}))}},cancelPush:function(e){if(!levels.user.haveTmpId()&&!cleverapps.isLocalhost()){var t=e.code,s="/localpushes/cancel/"+levels.user.id+"/"+t;console.log("Sending cancel push - "+t),cleverapps.RestClient.post(s,{},function(){console.log("Success cancel push - "+t)},function(){console.log("Failure cancel push - "+t)})}}};var NativeInvite={nativeInviteFriends:!0,inviteFriends:function(e,t){this.onInviteFriendsListener=t;var s={title:e.title,message:e.message,
link:cleverapps.config.deployment+"/res/applink.html"};if(e.element&&e.element.parent){var n=e.element.parent.convertToWorldSpace(e.element.getPosition()),i=cc.view.getFrameSize();s.element={x:n.x/i.width,y:1-n.y/i.height}}cc.sys.os===cc.sys.OS_ANDROID?MessagesPlugin.sendMessageAllVariants(JSON.stringify(s)):(s.action="sendMessageAllVariants",webkitMessage("messages",s))},onInviteFriends:function(e){this.onInviteFriendsListener&&(this.onInviteFriendsListener(e),delete this.onInviteFriendsListener)}},NativeReview={isAvailable:function(){return cc.sys.os===cc.sys.OS_ANDROID&&"undefined"!=typeof ReviewPlugin},requestReview:function(e){this.onRequestReviewListener=e,console.log("NativeReview - start"),ReviewPlugin.requestReview()},onRequestReview:function(e){console.log("NativeReview - finish, result - "+e),this.onRequestReviewListener&&(this.onRequestReviewListener(e),delete this.onRequestReviewListener)}};cleverapps.Social=function(){this.onInitializedListeners={},this.initialized=!1},
cleverapps.Social.prototype.initialize=function(e){this.init(function(){this.setInitialized(!0),e()}.bind(this))},cleverapps.Social.prototype.init=function(e){e()},cleverapps.Social.prototype.isLoggedIn=function(){},cleverapps.Social.prototype.isInitialized=function(){return!1!==this.initialized},cleverapps.Social.prototype.setInitialized=function(e){if(this.initialized=e,this.initialized){for(var t in this.onInitializedListeners){(0,this.onInitializedListeners[t])()}this.onInitializedListeners={}}},cleverapps.Social.prototype.whenInitialized=function(e,t){this.isInitialized()?t():this.onInitializedListeners[e]=t},cleverapps.Social.prototype.getLocalStoragePreffix=function(){return""},cleverapps.Social.prototype.getUserID=function(){},cleverapps.Social.prototype.getAccessToken=function(){},cleverapps.Social.prototype.login=function(e,t){},cleverapps.Social.prototype.inviteFriends=function(e,t){},cleverapps.Social.prototype.inviteFriendsShare=function(e,s){
var t=cleverapps.ShareBonus.cycleShareData("share");this.shareDialog({description:e.message?e.message:Messages.get("SettingsWindow.InviteFriends.message"),name:e.title?e.title:Messages.get("SettingsWindow.InviteFriends.title"),picture:t.picture,vk:t.vk},function(e,t){s&&s(e,t)})},cleverapps.Social.prototype.request=function(e,t){},cleverapps.Social.prototype.shareDialog=function(e,t){},cleverapps.Social.prototype.listFriends=function(e){e(cleverapps.Social.CODE_SUCCEED,[])},cleverapps.Social.prototype.listInvitableFriends=function(e){e(cleverapps.Social.CODE_SUCCEED,[])},cleverapps.Social.prototype.aboutMe=function(e){this.aboutUser("me",e)},cleverapps.Social.prototype.aboutUser=function(e,t,s){},cleverapps.Social.prototype.deleteAllRequests=function(){},cleverapps.Social.prototype.needWindowForLogin=function(){return!1},cleverapps.Social.prototype.api=function(e,t,s,n){},cleverapps.Social.isAppropriate=function(){},cleverapps.Social.prepareId=function(e){return""+e},
cleverapps.Social.prototype.checkConnection=function(e,t,s){var n=function(){cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.LOGIN_FACEBOOK),e&&e()};if(cleverapps.flags.nologin)n();else{if("object"==typeof t&&(s=t,t=function(){}),t=t||function(){},s=s||{},!this.isInitialized())return cleverapps.Notification.create("messages:SocialManager.Initialization"),void t();this.isLoggedIn()?n():cc.sys.isNative||s.withWindow||this.needWindowForLogin()?new FbConnectWindow(n,t,s):this.login(n,t)}},cleverapps.Social.prototype.sendRequest=function(i,o,a){Array.isArray(i)||(i=[i]),this.checkConnection(function(){this.request({to:i,message:Messages.get(o+".message"),title:Messages.get(o+".title")},function(e){if(e===cleverapps.Social.CODE_SUCCEED){levels.friendSorter.markUsed(i);var t=cleverapps.friends.listIds(),s=i.filter(function(e){return-1!==t.indexOf(e)});0<s.length&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MESSAGE_SENT_FRIEND,{amount:s.length}),
0<i.length-s.length&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MESSAGE_SENT_INVITE,{amount:i.length-s.length}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MESSAGE_SENT_PREFIX+o,{amount:i.length}),a&&a()}else if(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MESSAGE_CANCEL_PREFIX+o,{amount:i.length}),-1===cleverapps.Social.CANCEL_CODES.indexOf(e)){var n=cleverapps.EVENTS.MESSAGE_ERROR+"_"+cleverapps.User.calcSource();"number"==typeof e&&(n+="_"+e),cleverapps.eventLogger.logEvent(n)}})}.bind(this))},cleverapps.Social.prototype.inviteFriendsWindow=function(s,e){e||(e="SettingsWindow.InviteFriends"),this.checkConnection(function(){this.inviteFriends({message:Messages.get(e+".message"),title:Messages.get(e+".title")},function(e,t){s&&e===cleverapps.Social.CODE_SUCCEED&&s()})}.bind(this))},cleverapps.Social.prototype.inviteRandomFriends=function(t,s){this.checkConnection(function(){var e=levels.friendSorter.listInactiveFriends().map(function(e){return e.id});0<e.length?(
e.sort(function(){return Math.random()-.5}),e.length>cleverapps.Social.MAX_INVITE_RANDOM_FRIENDS&&(e=e.slice(0,cleverapps.Social.MAX_INVITE_RANDOM_FRIENDS)),this.sendRequest(e,s,t)):this.inviteFriendsWindow(t,s)}.bind(this))},cleverapps.Social.prototype.requestFullScreen=function(e){e()},cleverapps.Social.prototype.getDefaultLanguages=function(){return[]},cleverapps.Social.prototype.getCodes=function(){return this.getCode().split("-").sort()},cleverapps.Social.prototype.getCode=function(){return cleverapps.User.calcSource()},cleverapps.Social.CODE_SUCCEED=0,cleverapps.Social.CODE_FAILED=1,cleverapps.Social.CODE_CANCELLED=2,cleverapps.Social.MAX_INVITE_RANDOM_FRIENDS=10,cleverapps.Social.CANCEL_CODES=[cleverapps.Social.CODE_CANCELLED],cleverapps.Social.ACTIVITY={LVL_PASSED:0,DAILY_TASK:1,PASSED_FRIEND:2},cleverapps.Social.ACTIVITIES_CONFIG={},cleverapps.Social.ACTIVITIES_CONFIG[cleverapps.Social.ACTIVITY.LVL_PASSED]={probability:.25,messages:[{title:"messages:Activity.PassLevel.title",
body:"messages:Activity.PassLevel.body1"},{title:"messages:Activity.PassLevel.title",body:"messages:Activity.PassLevel.body2"},{title:"messages:Activity.PassLevel.title",body:"messages:Activity.PassLevel.body3"}]},cleverapps.Social.ACTIVITIES_CONFIG[cleverapps.Social.ACTIVITY.DAILY_TASK]={probability:.5,messages:[{title:"messages:Activity.DailyTask.title",body:"messages:Activity.DailyTask.body1"},{title:"messages:Activity.DailyTask.title",body:"messages:Activity.DailyTask.body2"}]},cleverapps.Social.ACTIVITIES_CONFIG[cleverapps.Social.ACTIVITY.PASSED_FRIEND]={probability:1,messages:[{title:"messages:Activity.BeatFriend.title",body:"messages:Activity.BeatFriend.body1"}]},cleverapps.BaseFB=function(){cleverapps.Social.call(this),cleverapps.Social.CANCEL_CODES.push(cleverapps.BaseFB.FACEBOOK_CANCEL_DIALOG)},cleverapps.BaseFB.prototype=Object.create(cleverapps.Social.prototype),cleverapps.BaseFB.prototype.constructor=cleverapps.BaseFB,cleverapps.BaseFB.prototype.pagingLoading=function(s,n,
i,e,o){o||(o=[]),e||(e=""),i||(i=0),i>=cleverapps.BaseFB.MAX_PAGE?n(cleverapps.Social.CODE_SUCCEED,o):this.api(s+"&limit=100"+e,function(e,t){e===cleverapps.Social.CODE_SUCCEED?(t.data&&(o=o.concat(t.data)),t.paging&&t.paging.cursors&&t.paging.next&&t.paging.cursors.after?this.pagingLoading(s,n,i+1,"&after="+t.paging.cursors.after,o):n(cleverapps.Social.CODE_SUCCEED,o)):o.length?n(cleverapps.Social.CODE_SUCCEED,o):n(e,o)}.bind(this))},cleverapps.BaseFB.prototype.getShareDialogLink=function(e){return cleverapps.config.deployment+cleverapps.config.restApiURL+"/share/?name="+encodeURIComponent(e.name)+"&description="+encodeURIComponent(e.description)+"&picture="+encodeURIComponent(cleverapps.config.deployment+e.picture)},cleverapps.BaseFB.prototype.listFriends=function(e){this.pagingLoading("/me/friends?fields=first_name,id,picture.type(large)",e)},cleverapps.BaseFB.prototype.listInvitableFriends=function(e){e([])},cleverapps.BaseFB.prototype.aboutMe=function(e){this.aboutUser("me",e)},
cleverapps.BaseFB.prototype.aboutUser=function(n,i,o){this.api("/"+n+"/?fields=currency,first_name,name,picture.type(large)",function(e,t){if(e===cleverapps.Social.CODE_SUCCEED)i(t);else if(console.log("Error: "+e),console.log(t),o&&o(e,t),0<=cleverapps.BaseFB.USERS_BLACK_LIST_ERROR_CODES.indexOf(e)){t.error_message;var s={code:e,data:t};cleverapps.RestClient.post("/users/blacklist/add/"+n,s,function(){console.log("Success add to black list:"+n)},function(){console.log("Failure add to black list:"+n)})}})},cleverapps.BaseFB.prototype.deleteAllRequests=function(){this.api("me/apprequests",function(e,t){if(e===cleverapps.Social.CODE_SUCCEED){if(t.data)for(var s=0;s<t.data.length;s++)console.log("START DELETE REQUEST",t.data[s].id),this.api(t.data[s].id,"delete",function(e,t){console.log("DELETE REQUEST",e,t)})}else console.log("Error: "+e),console.log(t)}.bind(this))},cleverapps.BaseFB.MAX_PAGE=20,cleverapps.BaseFB.USERS_BLACK_LIST_ERROR_CODES=[100],
cleverapps.BaseFB.FACEBOOK_CANCEL_DIALOG=4201,cleverapps.BaseFB.PERMISSIONS=["public_profile","user_friends"].join(","),0<=["wordheaps","spades","mergeriddles","mergeheroes","mergecraft"].indexOf(cleverapps.config.name)&&(cleverapps.BaseFB.PERMISSIONS="public_profile"),cleverapps.SelectSocial=function(){console.log("Choosing SelectSocial"),this.socials={},cleverapps.Social.call(this)},cleverapps.SelectSocial.prototype=Object.create(cleverapps.Social.prototype),cleverapps.SelectSocial.prototype.constructor=cleverapps.SelectSocial,cleverapps.SelectSocial.prototype.onInit=function(e){if(console.log("SelectSocial.onInit - "+this.socialInitializing),this.socialInitializing){var t=this.socials[this.socialInitializing];delete this.socialInitializing,t.onInit.apply(t,arguments)}},cleverapps.SelectSocial.prototype.init=function(s){this.initSocials();var t=function(){for(var e in this.socials){var t=this.socials[e];if(t.isLoggedIn()){cleverapps.social=t,console.log("Change social to "+e);break}}
s()}.bind(this),n=Object.keys(this.socials),i=function(){if(0!==n.length){var e=this.socialInitializing=n.shift();this.socials[e].initialize(i)}else t()}.bind(this);i()},cleverapps.SelectSocial.prototype.initSocials=function(){var e=cleverapps.user.haveTmpId(),t=cleverapps.AndroidSocial.isAndroidUserId(cleverapps.user.id),s=cleverapps.AppleSocial.isAppleUserId(cleverapps.user.id);(e||!e&&!t&&!s)&&(this.socials.facebook=cleverapps.SelectSocial.selectMobileFB()),(e&&cleverapps.AndroidSocial.isAvailable()||t)&&(this.socials.androidsocial=new cleverapps.AndroidSocial),(e&&cleverapps.AppleSocial.isAvailable()||s)&&(this.socials.applesocial=new cleverapps.AppleSocial),console.log("SelectSocial.initSocials - "+cleverapps.user.id+" - "+Object.keys(this.socials).join(","))},cleverapps.SelectSocial.selectMobileFB=function(){return cc.sys.os===cc.sys.OS_ANDROID?new cleverapps.AndroidWebViewFacebook:new cleverapps.iOSWebViewFacebook},cleverapps.SelectSocial.prototype.onLogin=function(e){if(
this.socialLogining){var t=this.socials[this.socialLogining];e===cleverapps.Social.CODE_SUCCEED&&(cleverapps.social=t,console.log("Change social to "+this.socialLogining)),delete this.socialLogining,t.onLogin.apply(t,arguments)}},cleverapps.SelectSocial.prototype.login=function(e,t,s){this.socialLogining=s.source,this.socials[this.socialLogining].login(e,t)},cleverapps.SelectSocial.prototype.getCode=function(){return Object.keys(this.socials).sort().join("-")},cc.sys.isNative&&cleverapps.override(cleverapps.SelectSocial.prototype,NativeInvite);var FriendsCache=function(e){this.data={},this.player=void 0,this.lastUpdateTime=0,this.isInvitable=e,this.load(),this.onFriendsUpdatedListeners=[],this.onUserUpdatedListener=function(){},this.playerInfoChangedListeners={}};FriendsCache.prototype.getStoreKey=function(){return this.isInvitable?cleverapps.DataLoaderTypes.INVITABLE_FRIENDS:cleverapps.DataLoaderTypes.FRIENDS},FriendsCache.prototype.reset=function(){this.data={},this.player=void 0,
this.lastUpdateTime=0,this.save()},FriendsCache.prototype.load=function(){var e=cleverapps.DataLoader.load(this.getStoreKey());e&&(this.data=e.data,this.player=e.player,this.lastUpdateTime=e.when)},FriendsCache.prototype.save=function(){var e={data:this.data,player:this.player,when:this.lastUpdateTime};cleverapps.DataLoader.save(this.getStoreKey(),e)},FriendsCache.prototype.isEmpty=function(){return 0===this.lastUpdateTime||0===this.data.length},FriendsCache.prototype.haveData=function(){return 0!==this.lastUpdateTime},FriendsCache.prototype.addFriendsUpdatedListener=function(e){this.onFriendsUpdatedListeners.push(e)},FriendsCache.prototype.setData=function(e){var t=Object.keys(this.data).length;this.data={},e.forEach(function(e){this.data[e.id]={id:e.id,name:e.first_name,avatar:e.picture&&e.picture.data&&e.picture.data.url}},this);var s=Object.keys(this.data).length;this.lastUpdateTime=Date.now(),this.save(),t<s&&this.onFriendsUpdatedListeners.forEach(function(e){e()})},
FriendsCache.prototype.getPlayer=function(){return void 0!==this.player?this.player:FriendsCache.DEFAULT_PLAYER_INFO()},FriendsCache.prototype.updatePlayerInfo=function(e){var t=this.getPlayer();this.player={id:cleverapps.user.id,self:!0,name:e.first_name,avatar:e.picture&&e.picture.data&&e.picture.data.url},this.save(),t.id===this.player.id&&t.name===this.player.name&&t.avatar===this.player.avatar||(this.onUserUpdatedListener(),cleverapps.values(this.playerInfoChangedListeners).forEach(function(e){e(t.id)}.bind(this)))},FriendsCache.prototype.getById=function(e){return this.data[e]},FriendsCache.prototype.listIds=function(){return Object.keys(this.data)},FriendsCache.prototype.listFriends=function(){return cleverapps.values(this.data)},FriendsCache.prototype.inApp=function(e){return void 0!==this.data[e]},FriendsCache.prototype.reload=function(){cleverapps.social.isLoggedIn()?this.isInvitable?cleverapps.social.listInvitableFriends(function(e,t){void 0!==t&&this.setData(t)}.bind(this)
):cleverapps.social.listFriends(function(e,t){void 0!==t&&(this.setData(t),cleverapps.User.reportAmountFriendsDau&&cleverapps.User.reportAmountFriendsDau())}.bind(this)):cleverapps.User.reportAmountFriendsDau&&cleverapps.User.reportAmountFriendsDau()},FriendsCache.RELOAD_INTERVAL=cleverapps.parseInterval("1 hour"),FriendsCache.DEFAULT_PLAYER_INFO=function(){return{id:cleverapps.user.id,self:!0,name:Messages.get("Friends.You"),avatar:bundles.main.frames.user_avatar}},cleverapps.AndroidSocial=function(){console.log("Choosing Android Social"),cleverapps.Social.call(this),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,this.refresh.bind(this)),setInterval(this.refresh.bind(this),cleverapps.parseInterval("10 minutes"))},cleverapps.AndroidSocial.prototype=Object.create(cleverapps.Social.prototype),cleverapps.AndroidSocial.prototype.constructor=cleverapps.AndroidSocial,cleverapps.AndroidSocial.prototype.init=function(e){this.onInitCallback=cleverapps.once(e),
this.socialInitializing=cleverapps.AndroidSocial.CODE,AndroidSocialPlugin.init()},cleverapps.AndroidSocial.prototype.onInit=function(){console.log("AndroidSocial.onInit"),delete this.socialInitializing,this.onInitCallback&&(this.onInitCallback(),delete this.onInitCallback,console.log("AndroidSocial.onInit callback execute"))},cleverapps.AndroidSocial.prototype.refresh=function(){AndroidSocialPlugin.refresh()},cleverapps.AndroidSocial.prototype.isLoggedIn=function(){return AndroidSocialPlugin.isLoggedIn()},cleverapps.AndroidSocial.prototype.getUserID=function(){var e=AndroidSocialPlugin.getUserID();if(e)return"android_"+e},cleverapps.AndroidSocial.isAndroidUserId=function(e){return e&&0===e.indexOf("android_")},cleverapps.AndroidSocial.prototype.getAccessToken=function(){return AndroidSocialPlugin.getAccessToken()},cleverapps.AndroidSocial.prototype.onLogin=function(e){this.onLoginListener&&(this.onLoginListener(e),delete this.onLoginListener)},
cleverapps.AndroidSocial.prototype.login=function(t,s){this.onLoginListener=function(e){e===cleverapps.Social.CODE_SUCCEED?(cleverapps.SocialManager.onLogin(),t()):(cleverapps.SocialManager.onFailedLogin(),s&&s())},AndroidSocialPlugin.login()},cleverapps.AndroidSocial.prototype.aboutMe=function(e){var t=AndroidSocialPlugin.aboutMe();t=decodeWebViewData(t),(t=JSON.parse(t))&&t.picture&&t.picture.data&&t.picture.data.url&&(t.picture.data.url=decodeWebViewData(t.picture.data.url)),console.log("AndroidSocial.aboutMe - "+JSON.stringify(t)),e(t)},cleverapps.AndroidSocial.prototype.getCode=function(){return cleverapps.AndroidSocial.CODE},cleverapps.AndroidSocial.isAvailable=function(){return cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID&&"android"===cleverapps.User.calcSource()},cleverapps.override(cleverapps.AndroidSocial.prototype,NativeInvite),cleverapps.AndroidSocial.CODE="androidsocial",cleverapps.AppleSocial=function(){console.log("Choosing Apple Social"),cleverapps.Social.call(this)},
cleverapps.AppleSocial.prototype=Object.create(cleverapps.Social.prototype),cleverapps.AppleSocial.prototype.constructor=cleverapps.AppleSocial,cleverapps.AppleSocial.prototype.updateNameFromServer=function(s){var e=function(e){var t=e.name||"";console.log("AppleSocial.updateNameFromServer success - "+t),this.name=t,this.save(),s()}.bind(this),t=function(e){console.log("AppleSocial.updateNameFromServer failure - "+e),s()}.bind(this);console.log("AppleSocial.updateNameFromServer"),cleverapps.RestClient.get("/info/name/"+this.getUserID(),{},e,t)},cleverapps.AppleSocial.prototype.prepareData=function(e,t){e=decodeWebViewData(e),e=JSON.parse(e),console.log("AppleSocial.prepareData - "+JSON.stringify(e)),this.id=e.id||"",this.token=e.token||"",e.name&&(this.name=e.name),this.save(),this.id&&!this.name?this.updateNameFromServer(t):t()},cleverapps.AppleSocial.prototype.onInit=function(e){var t=function(){this.onInitCallback&&(console.log("AppleSocial.onInit"),this.onInitCallback(),
delete this.onInitCallback)}.bind(this);this.prepareData(e,t)},cleverapps.AppleSocial.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.APPLE_SOCIAL,{id:this.id,token:this.token,name:this.name})},cleverapps.AppleSocial.prototype.init=function(e){var t=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.APPLE_SOCIAL);this.onInitCallback=e,webkitMessage("appleSocial",{action:"init",data:t}),console.log("AppleSocial.init - "+JSON.stringify(t))},cleverapps.AppleSocial.prototype.isLoggedIn=function(){return this.getUserID()&&this.getAccessToken()},cleverapps.AppleSocial.prototype.getUserID=function(){if(this.id)return"apple_"+this.id},cleverapps.AppleSocial.isAppleUserId=function(e){return e&&0===e.indexOf("apple_")},cleverapps.AppleSocial.prototype.getAccessToken=function(){return this.token},cleverapps.AppleSocial.prototype.onLogin=function(e,t){var s=function(){this.onLoginListener&&(console.log("AppleSocial.onLogin - "+e),this.onLoginListener(e),
delete this.onLoginListener)}.bind(this);this.prepareData(t,s)},cleverapps.AppleSocial.prototype.login=function(t,s){this.onLoginListener=function(e){e===cleverapps.Social.CODE_SUCCEED?(cleverapps.SocialManager.onLogin(),t()):(cleverapps.SocialManager.onFailedLogin(),s&&s())},webkitMessage("appleSocial",{action:"login"}),console.log("AppleSocial.login")},cleverapps.AppleSocial.prototype.aboutMe=function(e){var t={id:this.getUserID(),first_name:this.name,name:this.name};console.log("AppleSocial.aboutMe - "+JSON.stringify(t)),e(t)},cleverapps.AppleSocial.prototype.getCode=function(){return cleverapps.AppleSocial.CODE},cleverapps.AppleSocial.isAvailable=function(){return cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&cleverapps.webViewData&&cleverapps.webViewData.appleSocialAvailable&&"ios"===cleverapps.User.calcSource()},cleverapps.override(cleverapps.AppleSocial.prototype,NativeInvite),cleverapps.AppleSocial.CODE="applesocial",cleverapps.StartFacebook=function(){plugin.extend("facebook",{
name:"",version:"",_userInfo:null,_isLoggedIn:void 0,HttpMethod:{GET:"get",POST:"post",DELETE:"delete"},CODE_SUCCEED:0,AppEvent:{ACTIVATED_APP:FB.AppEvents.EventNames.ACTIVATED_APP,COMPLETED_REGISTRATION:FB.AppEvents.EventNames.COMPLETED_REGISTRATION,VIEWED_CONTENT:FB.AppEvents.EventNames.VIEWED_CONTENT,SEARCHED:FB.AppEvents.EventNames.SEARCHED,RATED:FB.AppEvents.EventNames.RATED,COMPLETED_TUTORIAL:FB.AppEvents.EventNames.COMPLETED_TUTORIAL,ADDED_TO_CART:FB.AppEvents.EventNames.ADDED_TO_CART,ADDED_TO_WISHLIST:FB.AppEvents.EventNames.ADDED_TO_WISHLIST,INITIATED_CHECKOUT:FB.AppEvents.EventNames.INITIATED_CHECKOUT,ADDED_PAYMENT_INFO:FB.AppEvents.EventNames.ADDED_PAYMENT_INFO,PURCHASED:FB.AppEvents.EventNames.PURCHASED,ACHIEVED_LEVEL:FB.AppEvents.EventNames.ACHIEVED_LEVEL,UNLOCKED_ACHIEVEMENT:FB.AppEvents.EventNames.UNLOCKED_ACHIEVEMENT,SPENT_CREDITS:FB.AppEvents.EventNames.SPENT_CREDITS},AppEventParam:{CURRENCY:FB.AppEvents.ParameterNames.CURRENCY,
REGISTRATION_METHOD:FB.AppEvents.ParameterNames.REGISTRATION_METHOD,CONTENT_TYPE:FB.AppEvents.ParameterNames.CONTENT_TYPE,CONTENT_ID:FB.AppEvents.ParameterNames.CONTENT_ID,SEARCH_STRING:FB.AppEvents.ParameterNames.SEARCH_STRING,SUCCESS:FB.AppEvents.ParameterNames.SUCCESS,MAX_RATING_VALUE:FB.AppEvents.ParameterNames.MAX_RATING_VALUE,PAYMENT_INFO_AVAILABLE:FB.AppEvents.ParameterNames.PAYMENT_INFO_AVAILABLE,NUM_ITEMS:FB.AppEvents.ParameterNames.NUM_ITEMS,LEVEL:FB.AppEvents.ParameterNames.LEVEL,DESCRIPTION:FB.AppEvents.ParameterNames.DESCRIPTION},AppEventParamValue:{VALUE_YES:"1",VALUE_NO:"0"},_checkLoginStatus:function(e){var t=this;FB.getLoginStatus(function(e){e&&"connected"===e.status?(t._isLoggedIn=!0,t._userInfo=e.authResponse):(t._isLoggedIn=!1,t._userInfo={})})},ctor:function(e){this.name="facebook",this.version="1.0",this._userInfo={},this._isLoggedIn=void 0,FB&&(FB.init(e),this._checkLoginStatus(!0),plugin.FacebookAgent=this)},getInstance:function(){return this},login:function(e,
s){var t={scope:e,return_scopes:!0};cleverapps.social.loginPopup&&(t.display="popup"),FB.login(function(e){if(e.authResponse){this._isLoggedIn=!0,this._userInfo=e.authResponse;var t=e.authResponse.grantedScopes.split(",");"function"==typeof s&&s(0,{accessToken:e.authResponse.accessToken,permissions:t})}else this._isLoggedIn=!1,this._userInfo={},"function"==typeof s&&s(e.error_code||1,{error_message:e.error_message||"Unknown error"})}.bind(this),t)},isLoggedIn:function(){return this._isLoggedIn},logout:function(t){var s=this;FB.logout(function(e){e.authResponse?(s._isLoggedIn=!1,s._userInfo={},"function"==typeof t&&t(0,{isLoggedIn:!1})):"function"==typeof t&&t(e.error_code||1,{error_message:e.error_message||"Unknown error"})})},_requestPermissions:function(e,s){var t=e.join(","),n=this;FB.login(function(e){if(e.authResponse){var t=e.authResponse.grantedScopes.split(",");n._isLoggedIn=!0,n._userInfo=e.authResponse,"function"==typeof s&&s(0,{permissions:t})}else n._isLoggedIn=!1,
n._userInfo={},"function"==typeof s&&s(e.error_code||1,{error_message:e.error_message||"Unknown error"})},{scope:t,return_scopes:!0})},getAccessToken:function(){return this._userInfo?this._userInfo.accessToken:null},getUserID:function(){return this._userInfo?this._userInfo.userID:null},_share:function(e,t){FB.ui({method:"share",caption:e.caption,href:e.link},function(e){e?e.post_id?"function"==typeof t&&t(0,{didComplete:!0,post_id:e.post_id}):"function"==typeof t&&t(e.error_code||1,{error_message:e.error_message||"Unknown error"}):"function"==typeof t&&t(1,{error_message:"Unknown error"})})},dialog:function(e,t){if(e)if(this.canPresentDialog(e)){e.name=e.name||e.site,delete e.site,e.href=e.href||e.link||e.siteUrl,delete e.siteUrl,delete e.link,e.picture=e.picture||e.image||e.photo||e.imageUrl||e.imagePath,delete e.imageUrl,delete e.imagePath,delete e.photo,delete e.image,e.caption=e.title||e.caption,delete e.title,e.description=e.text||e.description,delete e.text;var s=e.dialog;if(
delete e.dialog,"shareLink"===s||"feedDialog"==s)e.method="share";else if("messageLink"==s)e.method="send",e.link=e.href;else if("shareOpenGraph"==s&&(e.method="share_open_graph",e.url)){var n={};for(var i in e.preview_property_name?n[e.preview_property_name]=e.url:n.object=e.url,e)"method"!=i&&"action_type"!=i&&"action_properties"!=i&&(e[i]&&(n[i]=e[i]),delete e[i]);e.action_properties=JSON.stringify(n)}FB.ui(e,function(e){e&&"function"==typeof t?e.post_id||e.success?t(0,{didComplete:!0,post_id:e.post_id||""}):e.error_code?t(e.error_code,{error_message:e.error_message||"Unknown error"}):t(0,e):null==e&&"function"==typeof t&&t(1,{error_message:"Unknown error"})})}else"function"==typeof t&&t(1,{error_message:"The requested dialog: "+e.dialog+" can not be presented on Web"});else"function"==typeof t&&t(1,{error_message:"No info parameter provided"})},canPresentDialog:function(e){return!(
!e||!e.dialog||"shareLink"!==e.dialog&&"feedDialog"!==e.dialog&&"shareOpenGraph"!==e.dialog&&"messageLink"!==e.dialog)},api:function(e,t,s,n){"function"==typeof s&&(n=s,s={}),FB.api(e,t,s,function(e){e.error?"function"==typeof n&&n(e.error.code,{error_message:e.error.message||"Unknown error"}):"function"==typeof n&&n(0,e)})},_getPermissionList:function(n){FB.api("/me/permissions",function(e){if(e.data){for(var t=[],s=0;s<e.data.length;s++)"granted"==e.data[s].status&&t.push(e.data[s].permission);"function"==typeof n&&n(0,{permissions:t})}else e.error||(e.error={}),"function"==typeof n&&n(e.error.code||1,{error_message:e.error.message||"Unknown error"})})},destroyInstance:function(){},canvas:{pay:function(e,t){var s={method:"pay",action:"purchaseitem",product:e.product};"subscription"===e.type&&(s.action="create_subscription"),-1!==["cancel_subscription","reactivate_subscription","change_subscription"].indexOf(e.action)&&(s.action=e.action,s.subscription_id=e.subscription_id),FB.ui(s,
function(e){e.error_code?t(e.error_code||1,{error_message:e.error_message||e.error_msg||"Unknown error"}):t(0,e)})}},appRequest:function(e,t){e?(e.method="apprequests",FB.ui(e,function(e){e?e.error_code?"function"==typeof t&&t(e.error_code,{error_message:e.error_message||"Unknown error"}):"function"==typeof t&&t(0,e):"function"==typeof t&&t(1,{error_message:"Unknown error"})})):"function"==typeof t&&t(1,{error_message:"No info parameter provided"})},logEvent:function(e,t,s){null!=e&&(void 0===t&&void 0===s?FB.AppEvents.logEvent(e,null,null):"number"==typeof t&&void 0===s?FB.AppEvents.logEvent(e,t):"object"==typeof t&&void 0===s?FB.AppEvents.logEvent(e,null,t):FB.AppEvents.logEvent(e,t,s))},activateApp:function(){FB.AppEvents.activateApp()},logPurchase:function(e,t,s){FB.AppEvents.logPurchase(e,t,s)}})},cleverapps.VK=function(){this instanceof cleverapps.MobileVk||console.log("Choosing html5-Vk"),cleverapps.Social.MAX_INVITE_RANDOM_FRIENDS=1,cleverapps.Social.call(this),
cleverapps.config.debugMode&&!cleverapps.VK.DEBUG_USERS[this.getUserID()]&&(document.body.innerHTML="приложение не доступно"),cleverapps.VK.DEBUG_USERS[this.getUserID()]&&(cleverapps.consoleStreamPermanent=!0)},cleverapps.VK.prototype=Object.create(cleverapps.Social.prototype),cleverapps.VK.prototype.constructor=cleverapps.VK,cleverapps.VK.prototype.getLocalStoragePreffix=function(){return"_VK"},cleverapps.VK.prototype.init=function(e){var t=cleverapps.once(function(){VK.addCallback("onRequestSuccess",function(e){console.log("onRequestSuccess",e),this.listeners.onRequest(cleverapps.Social.CODE_SUCCEED,e)}.bind(this)),VK.addCallback("onRequestCancel",function(e){console.log("onRequestCancel",e),this.listeners.onRequest(cleverapps.Social.CODE_CANCELLED,e)}.bind(this)),VK.addCallback("onRequestFail",function(e){console.log("onRequestFail",e),this.listeners.onRequest(cleverapps.Social.CODE_FAIL,e)}.bind(this)),e()}.bind(this));this.listeners={onRequest:function(){}};var s=function(e){
plugin.FacebookAgent=cleverapps.FakeFacebookAgent,t(),"timeout"===e?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_TIMEOUT):cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_SCRIPT_ERROR)}.bind(this),n=cleverapps.config.vkcors?"cleverapps/res/xd_connection.js":"//vk.com/js/api/xd_connection.js?2";cleverapps.loadSdk(n,{onSuccess:function(){VK.init(t,s,cleverapps.VK.API_VERSION)},onFailure:s})},cleverapps.VK.prototype.sendActivity=function(e,t){if(e===cleverapps.Social.ACTIVITY.LVL_PASSED){var s=void 0,n=0,i=levels.user.getHumanReadableNumber();cleverapps.VK.MISSIONS.forEach(function(e){i===e.level&&(s=e.id)}),void 0===s&&(s=1,n=t.levelNo,cleverapps.Random.mathChoose([0,1])&&void 0!==t.score&&(s=2,n=t.score));var o={user_id:this.getUserID(),activity_id:s,value:n,v:cleverapps.VK.API_VERSION},a=[];for(var r in o)a.push(r+"="+o[r]);cleverapps.RestClient.get("/vkappevents?"+a.join("&"),{})}},cleverapps.VK.prototype.createShortcut=function(){VK.api(
"account.getAppPermissions",{user_id:this.getUserID()},function(e){console.log("getAppPermissions: "+e.response),0==(256&e.response)&&FullscreenControlButton.exitFullscreen(function(){VK.callMethod("showSettingsBox",256)})})},cleverapps.VK.prototype.isLoggedIn=function(){return!0},cleverapps.VK.prototype.getUserID=function(){return cleverapps.getRequestParameters().viewer_id},cleverapps.VK.prototype.getAccessToken=function(){return"VK_"+cleverapps.getRequestParameters().auth_key},cleverapps.VK.prototype.login=function(e){e()},cleverapps.VK.prototype.inviteFriends=function(e,t){FullscreenControlButton.exitFullscreen(function(){VK.callMethod("showInviteBox"),t(cleverapps.Social.CODE_SUCCEED)})},cleverapps.VK.prototype.requestToOne=function(e,t,s){this.listeners.onRequest=s,FullscreenControlButton.exitFullscreen(function(){VK.callMethod("showRequestBox",parseInt(e),t.message)})},cleverapps.VK.prototype.request=function(e,s){var n=e.to;Array.isArray(n)||(n=[n]);var i=[],o=function(t){
t===n.length?s(i.length>Math.floor(n.length/2)?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED,i):this.requestToOne(n[t],e,function(e){e===cleverapps.Social.CODE_SUCCEED&&i.push(n[t]),o(t+1)})}.bind(this);o(0)},cleverapps.VK.prototype.shareDialog=function(e,t){if(!e.vk)throw"No vk data to share!";FullscreenControlButton.exitFullscreen(function(){VK.api("wall.post",{message:e.description+"\n"+cleverapps.config.vk.url,attachments:[e.vk,"https://vk.com/app"+cleverapps.config.vk.appId].join(",")},function(e){e.error?t(cleverapps.Social.CODE_CANCELLED,e.error):t(cleverapps.Social.CODE_SUCCEED)})})},cleverapps.VK.prototype.processPromo=function(t){cleverapps.eventLogger.logEvent("vk_promo_check"),VK.api("apps.promoHasActiveGift",{promo_id:t},function(e){if(cleverapps.eventLogger.logEvent("vk_promo_response"),e&&1===e.response){if(this.givePromoReward(),-1!==["4252816","74852834","559432346","9938687","4615499"].indexOf(cleverapps.user.id))return;VK.api("apps.promoUseGift",{
promo_id:t})}}.bind(this))},cleverapps.VK.prototype.isPromoAvailable=function(e,t,s){return this.isInitialized()&&-1!==s.indexOf(cleverapps.config.name)&&(null===e||Date.now()>new Date(e).getTime())&&(null===t||Date.now()<new Date(t).getTime())},cleverapps.VK.prototype.givePromoReward=function(){cleverapps.metha.displayWhenFreeFocus({focus:"VKPromoRewardWindow",action:function(e){new RewardWindow({reward:cleverapps.VK.PROMO_REWARD,rewardName:"vkpromo"}),cleverapps.metha.onceNoWindowsListener=e}}),cleverapps.eventLogger.logEvent("vk_promo_reward")},cleverapps.VK.prototype.listFriendsByApp=function(s,n){VK.api("friends.getAppUsers",{},function(e){if(e.error)n(cleverapps.Social.CODE_FAILED,[]);else if(e.response){var t=e.response.map(cleverapps.VK.prepareId);VK.api("friends.get",{extended:1,count:1e3,fields:"photo_200"},function(e){e.error?n(cleverapps.Social.CODE_FAILED,[]):n(cleverapps.Social.CODE_SUCCEED,this.prepareFriendsData(e.response&&e.response.items,t,s))}.bind(this))}else n(
cleverapps.Social.CODE_FAILED,[])}.bind(this))},cleverapps.VK.prototype.prepareFriendsData=function(e,t,s){return(e||[]).filter(function(e){return void 0===e.deactivated}).map(cleverapps.VK.formatUserData).filter(function(e){return s===(-1!==t.indexOf(e.id))})},cleverapps.VK.prototype.listFriends=function(e){this.listFriendsByApp(!0,e)},cleverapps.VK.prototype.listInvitableFriends=function(e){this.listFriendsByApp(!1,e)},cleverapps.VK.prepareId=function(e){return""+e},cleverapps.VK.formatUserData=function(e){return{id:cleverapps.VK.prepareId(e.id),name:e.first_name+" "+e.last_name,first_name:e.first_name,picture:{data:{url:e.photo_200&&-1===e.photo_200.indexOf("camera_200.png")?e.photo_200:void 0}}}},cleverapps.VK.prototype.aboutMe=function(s){VK.api("users.get",{fields:"photo_200"},function(e){if(e&&e.response){var t=e.response[0];s(cleverapps.VK.formatUserData(t))}else console.log("Error: "+JSON.stringify(e))})},cleverapps.VK.prototype.logEvent=function(e,t){},
cleverapps.VK.prototype.getDefaultLanguages=function(){return[cc.sys.LANGUAGE_RUSSIAN]},cleverapps.VK.isAppropriate=function(){return!cc.sys.isNative&&"web_vk"===cleverapps.User.calcSource()},cleverapps.VK.PROMO_REWARD={gold:50},"match3"===cleverapps.config.type&&cleverapps.config.results?cleverapps.VK.PROMO_REWARD={unlimitedLives:"12 hours",stars:10}:"match3"===cleverapps.config.type?cleverapps.VK.PROMO_REWARD={unlimitedLives:"12 hours",gold:20}:"stacks"===cleverapps.config.subtype&&(cleverapps.VK.PROMO_REWARD={gold:100}),cleverapps.VK.DEFAULT_HEIGHT=720,cleverapps.VK.DEFAULT_WIDTH=800,cleverapps.VK.MIN_HEIGHT=480,cleverapps.VK.SCREEN_HEIGHT_RESERVED=230,cleverapps.VK.API_VERSION="5.107",cleverapps.VK.DEBUG_USERS=cleverapps.createSet(["8593874","519644122","559432346","74852834","120601236","13506358","662073098","55069957","4252816","620258708","575473277","512342080","201054870"]),cleverapps.VK.MISSIONS=[{id:3,level:1},{id:4,level:2},{id:5,level:3},{id:6,level:4},{id:7,level:5},{
id:8,level:6},{id:9,level:10},{id:10,level:20},{id:11,level:50},{id:12,level:100},{id:13,level:150},{id:14,level:200},{id:15,level:300},{id:16,level:500},{id:17,level:750},{id:18,level:1e3},{id:19,level:1500},{id:20,level:2e3}],cleverapps.MobileVk=function(){console.log("Choosing html5-VkConnect"),cc.sys.openURL=function(e){var t=document.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("href",e),t.click()},cleverapps.VK.call(this)},cleverapps.MobileVk.prototype=Object.create(cleverapps.VK.prototype),cleverapps.MobileVk.prototype.constructor=cleverapps.MobileVk,cleverapps.MobileVk.getPlatfrom=function(){return cleverapps.getRequestParameters().platform},cleverapps.MobileVk.prototype.init=function(t){var s=function(e){plugin.FacebookAgent=cleverapps.FakeFacebookAgent,"vkConnect"===e&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_SCRIPT_ERROR),t()},n=function(){var e=function(e,t){e===cleverapps.Social.CODE_SUCCEED&&(this.accessToken=t.access_token,
this.scope=t.scope)}.bind(this);this.subscribe("VKWebAppAccessTokenReceived","VKWebAppAccessTokenFailed",e),vkConnect.send("VKWebAppGetAuthToken",{app_id:parseInt(cleverapps.config.vk.appId),scope:"friends"})}.bind(this),e=function(){vkConnect.isWebView()&&this.subscribe("VKWebAppInitResult","VKWebAppInitFailed",function(e){e===cleverapps.Social.CODE_SUCCEED?(t(),n()):s()}.bind(this)),vkConnect.send("VKWebAppInit",{}),vkConnect.isWebView()||(t(),n())}.bind(this);cleverapps.loadSdk(cleverapps.config.staticUrl+"cleverapps/res/vk-connect.js",{onSuccess:e,onFailure:function(){s("vkConnect")}})},cleverapps.MobileVk.prototype.createShortcut=function(){},cleverapps.MobileVk.prototype.aboutMe=function(s){this.subscribe("VKWebAppGetUserInfoResult","VKWebAppGetUserInfoFailed",function(e,t){e===cleverapps.Social.CODE_SUCCEED&&s(cleverapps.VK.formatUserData(t))}),vkConnect.send("VKWebAppGetUserInfo",{})},cleverapps.MobileVk.prototype.subscribe=function(t,s,n){var i=function(e){
cleverapps.config.debugMode&&cleverapps.RestClient.post("/applogs/"+cleverapps.user.id,{event:JSON.stringify(e),type:e.detail.type,error_type:e.detail.data.error_type,error_code:e.detail.data.error_data&&e.detail.data.error_data.error_code,error_reason:e.detail.data.error_data&&e.detail.data.error_data.error_reason,detailData:e.detail.data?JSON.stringify(e.detail.data):"none",accessToken:this.accessToken,scope:this.scope}),e.detail.type===t&&(n(cleverapps.Social.CODE_SUCCEED,e.detail.data),vkConnect.unsubscribe(i)),e.detail.type===s&&(n(cleverapps.Social.CODE_FAILED,e.detail.data),vkConnect.unsubscribe(i))}.bind(this);vkConnect.subscribe(i)},cleverapps.MobileVk.prototype.showLeaderBoardBox=function(e,t){this.subscribe("VKWebAppShowLeaderBoardBoxResult","VKWebAppShowLeaderBoardBoxFailed",t),vkConnect.send("VKWebAppShowLeaderBoardBox",{user_result:e.userResult})},cleverapps.MobileVk.prototype.showOrderBox=function(e,t){this.subscribe("VKWebAppShowOrderBoxResult",
"VKWebAppShowOrderBoxFailed",t),vkConnect.send("VKWebAppShowOrderBox",{type:e.type,item:e.item})},cleverapps.MobileVk.prototype.inviteFriends=function(e,t){this.subscribe("VKWebAppShowInviteBoxResult","VKWebAppShowInviteBoxFailed",t),vkConnect.send("VKWebAppShowInviteBox",{})},cleverapps.MobileVk.prototype.requestToOne=function(e,t,s){(function(){this.subscribe("VKWebAppShowRequestBoxResult","VKWebAppShowRequestBoxFailed",s),cleverapps.config.debugMode&&cleverapps.RestClient.post("/applogs/"+cleverapps.user.id,{method:"VKWebAppShowRequestBox",uid:parseInt(e),message:t.message}),vkConnect.send("VKWebAppShowRequestBox",{uid:parseInt(e),message:t.message,requestKey:"key"})}).bind(this)()},cleverapps.MobileVk.prototype.shareDialog=function(e,t){if(!e.vk)throw"No vk data to share!";this.subscribe("VKWebAppShowWallPostBoxResult","VKWebAppShowWallPostBoxFailed",t),vkConnect.send("VKWebAppShowWallPostBox",{message:e.description+"\n"+cleverapps.config.vk.url,
attachments:e.vk+",https://vk.com/app"+cleverapps.config.vk.appId})},cleverapps.MobileVk.prototype.listInvitableFriends=function(e){e(cleverapps.Social.CODE_SUCCEED,[])},cleverapps.MobileVk.prototype.listFriendsByApp=function(i,o){var e=function(e,t){if(e===cleverapps.Social.CODE_SUCCEED)if(t&&t.response&&t.response.map){var s=t.response.map(cleverapps.VK.prepareId),n=function(e,t){e===cleverapps.Social.CODE_SUCCEED?o(cleverapps.Social.CODE_SUCCEED,this.prepareFriendsData(t.response&&t.response.items,s,i)):o(cleverapps.Social.CODE_FAILED,[])}.bind(this);this.subscribe("VKWebAppCallAPIMethodResult","VKWebAppCallAPIMethodFailed",n),vkConnect.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{v:cleverapps.MobileVk.API_VERSION,access_token:this.accessToken,count:1e3,fields:"photo_200"}})}else o(cleverapps.Social.CODE_FAILED,[]);else o(cleverapps.Social.CODE_FAILED,[])}.bind(this);this.subscribe("VKWebAppCallAPIMethodResult","VKWebAppCallAPIMethodFailed",e),vkConnect.send(
"VKWebAppCallAPIMethod",{method:"friends.getAppUsers",params:{v:cleverapps.MobileVk.API_VERSION,access_token:this.accessToken}})},cleverapps.MobileVk.prototype.processPromo=function(s){cleverapps.eventLogger.logEvent("vk_promo_check");var e=function(e,t){e===cleverapps.Social.CODE_SUCCEED&&(cleverapps.eventLogger.logEvent("vk_promo_response"),t&&1===t.response&&(this.givePromoReward(),vkConnect.send("VKWebAppCallAPIMethod",{method:"apps.promoUseGift",params:{v:cleverapps.MobileVk.API_VERSION,access_token:this.accessToken,promo_id:s}})))}.bind(this);this.subscribe("VKWebAppCallAPIMethodResult","VKWebAppCallAPIMethodFailed",e),vkConnect.send("VKWebAppCallAPIMethod",{method:"apps.promoHasActiveGift",params:{v:cleverapps.MobileVk.API_VERSION,access_token:this.accessToken,promo_id:s}})},cleverapps.MobileVk.isAppropriate=function(){return!cc.sys.isNative&&"mobile_vk"===cleverapps.User.calcSource()},cleverapps.MobileVk.API_VERSION="5.107",cleverapps.OK=function(){
this instanceof cleverapps.MobileOK||console.log("Choosing html5-ok"),cleverapps.Social.call(this)},cleverapps.OK.prototype=Object.create(cleverapps.Social.prototype),cleverapps.OK.prototype.constructor=cleverapps.OK,cleverapps.OK.prototype.getLocalStoragePreffix=function(){return"_OK"},cleverapps.OK.prototype.updateSize=function(){this.listeners.getPageInfo=function(e,t){var s;try{s=JSON.parse(t).innerHeight}catch(e){s=window&&window.innerHeight||document&&document.body&&document.body.clientHeight||800}var n=s-75;n<600&&(n=600),FAPI.UI.setWindowSize(760,n),cc.view.setFrameSize(cc.view.getFrameSize().width,n)}.bind(this),[0,5,10,20,60].forEach(function(e){setTimeout(FAPI.UI.getPageInfo,1e3*e)})},cleverapps.OK.prototype.init=function(e){var t=cleverapps.once(function(){window.API_callback=function(e,t,s){if(console.log("Received "+e,t,s),this.listeners[e]){var n=this.listeners[e];this.listeners[e]=void 0,n.call(this,t,s)}}.bind(this),this.updateSize(),e(),this.isLoggedIn(
)&&cleverapps.OK.DEBUG_USERS[this.getUserID()]&&(cleverapps.consoleStreamPermanent=!0,cleverapps.consoleStream.enable())}.bind(this));this.listeners={};var s=function(e){"undefined"==typeof FAPI&&(FAPI=cleverapps.FakeFAPI),t(),"timeout"===e?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_TIMEOUT):cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_SCRIPT_ERROR)}.bind(this);cleverapps.loadSdk("//api.ok.ru/js/fapi5.js",{onSuccess:function(){var e=FAPI.Util.getRequestParameters();FAPI.init(e.api_server,e.apiconnection,t,s)},onFailure:s})},cleverapps.OK.prototype.isLoggedIn=function(){return FAPI!==cleverapps.FakeFAPI},cleverapps.OK.prototype.setStatus=function(e,i){console.log("setStatus",e,i),FAPI.Client.call({method:"sdk.setStatus",event:e,status:i},function(e,t,s){console.log("sdk.setStatus response",JSON.stringify(arguments));var n="set_status_"+i+"_ok";e!==cleverapps.OK.CODE_SUCCEED&&(cleverapps.throwAsync("sdk.setStatus '"+i+"'error: "+JSON.stringify(s)),
n="set_status_"+i+"_error"),cleverapps.eventLogger.logEvent(n)})},cleverapps.OK.prototype.getUserID=function(){return FAPI.Util.getRequestParameters().logged_user_id},cleverapps.OK.prototype.getAccessToken=function(){return"OK_"+FAPI.Util.getRequestParameters().session_key+"_"+FAPI.Util.getRequestParameters().auth_sig},cleverapps.OK.prototype.login=function(e){e()},cleverapps.OK.prototype.inviteFriends=function(e,s){this.listeners.showInvite=function(e,t){"noUsers"===t&&cleverapps.Notification.create("messages:inviteFriends.noUsers"),e===cleverapps.OK.CODE_SUCCEED?s(cleverapps.Social.CODE_SUCCEED):s(cleverapps.Social.CODE_CANCELLED,t)},FullscreenControlButton.exitFullscreen(function(){FAPI.UI.showInvite(e.message)})},cleverapps.OK.prototype.request=function(e,s){"object"==typeof e.to&&(e.to=e.to.join(";")),this.listeners.showNotification=function(e,t){"error"!==e||"noUsers"!==t?e===cleverapps.OK.CODE_SUCCEED?(t=t.split(","),s(cleverapps.Social.CODE_SUCCEED,t)):s(
cleverapps.Social.CODE_CANCELLED,t):s(cleverapps.Social.CODE_SUCCEED,[])},FullscreenControlButton.exitFullscreen(function(){FAPI.UI.showNotification(e.message,"",e.to)})},cleverapps.OK.prototype.shareDialog=function(e,s){var t=cleverapps.config.deployment+e.picture;0<=t.indexOf("?")&&(t=t.substr(0,t.indexOf("?")));var n=[{type:"app",text:e.description,images:[{url:t,title:e.name}],actions:[{text:e.name,mark:e.name}]}];this.listeners.postMediatopic=function(e,t){e===cleverapps.OK.CODE_SUCCEED?s(cleverapps.Social.CODE_SUCCEED):s(cleverapps.Social.CODE_CANCELLED,t)},FullscreenControlButton.exitFullscreen(function(){FAPI.UI.postMediatopic({media:n},!0)})},cleverapps.OK.prototype.loadFriendsPerPage=function(e,t){e=e.slice(0,1e3);for(var s=[],n=0;n<e.length;n+=100)s.push(e.slice(n,n+100));var i=s.length,o=[],a=function(e){e!==cleverapps.Social.CODE_CANCELLED&&(o=o.concat(e)),0===--i&&t(cleverapps.Social.CODE_SUCCEED,o)};s.forEach(function(e){this.aboutUser(e,a,a)}.bind(this))},
cleverapps.OK.prototype.listFriends=function(i){FAPI.Client.call({method:"friends.getAppUsers"},function(e,t,s){if(e!==cleverapps.OK.CODE_SUCCEED)return console.log("list friends error: "+s),void i(cleverapps.Social.CODE_CANCELLED);var n=t.uids;cleverapps.social.loadFriendsPerPage(n,i)})},cleverapps.OK.prototype.listInvitableFriends=function(o){FAPI.Client.call({method:"friends.get",sort_type:"PRESENT"},function(e,t,s){if(e!==cleverapps.OK.CODE_SUCCEED)return console.log("list ivitable friends error: "+s),void o(cleverapps.Social.CODE_CANCELLED);var i=t;FAPI.Client.call({method:"friends.getAppUsers"},function(e,t,s){if(e!==cleverapps.OK.CODE_SUCCEED)return console.log("list friends error: "+s),void o(cleverapps.Social.CODE_CANCELLED);var n=t.uids;cleverapps.social.loadFriendsPerPage(cleverapps.substract(i,n),o)})})},cleverapps.OK.formatUserData=function(e){return-1!==e.pic128x128.indexOf("stub_128x128.gif")&&(e.pic128x128=""),-1!==e.pic128x128.indexOf("stub/user")&&(e.pic128x128=""),{
id:e.uid,name:e.first_name+" "+e.last_name,first_name:e.first_name,picture:{data:{url:e.pic128x128}}}},cleverapps.OK.prototype.aboutUser=function(e,i,o){var a=!Array.isArray(e);a||(e=e.join(",")),FAPI.Client.call({uids:e,fields:"first_name,last_name,uid,pic128x128",method:"users.getInfo"},function(e,t,s){if(e===cleverapps.OK.CODE_SUCCEED){var n=t.map(function(e){return cleverapps.OK.formatUserData(e)});i(a?n[0]:n)}else o&&o(cleverapps.Social.CODE_CANCELLED,s)})},cleverapps.OK.prototype.aboutMe=function(e){this.aboutUser(this.getUserID(),e)},cleverapps.OK.prototype.logEvent=function(e,t){},cleverapps.OK.prototype.getDefaultLanguages=function(){return[cc.sys.LANGUAGE_RUSSIAN]},cleverapps.OK.isAppropriate=function(){return!cc.sys.isNative&&"web_ok"===cleverapps.User.calcSource()},cleverapps.OK.CODE_SUCCEED="ok",cleverapps.OK.DEBUG_USERS=cleverapps.createSet(["576593702177","580731438762","577203420866","585959187481","564566964211","573870870859","590442871830"]),cleverapps.FakeFAPI={UI:{
getPageInfo:function(){},showInvite:function(){},showNotification:function(){},postMediatopic:function(){},setWindowSize:function(){},showPayment:function(){}},invokeUIMethod:function(){},Util:{getRequestParameters:function(){return{}}},Client:{call:function(){}}},cleverapps.MobileOK=function(){console.log("Choosing mobile-ok"),cleverapps.OK.call(this),this.isFullScreen=!1,cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,function(){this.isFullScreen=!1}.bind(this)),this.isInApp()&&(cleverapps.Promotion.prototype.isReady=function(){return!1})},cleverapps.MobileOK.prototype=Object.create(cleverapps.OK.prototype),cleverapps.MobileOK.prototype.constructor=cleverapps.MobileOK,cleverapps.MobileOK.prototype.updateSize=function(){},cleverapps.MobileOK.prototype.createShortcut=function(){"undefined"!=typeof OKApp&&"function"==typeof OKApp.suggestDesktopIcon&&OKApp.suggestDesktopIcon()},cleverapps.MobileOK.prototype.isInApp=function(){
var e=window&&window.navigator&&window.navigator.userAgent;return!!(e&&0<=e.indexOf("OkApp"))},cleverapps.MobileOK.isAppropriate=function(){return!cc.sys.isNative&&"mobile_ok"===cleverapps.User.calcSource()},cleverapps.MobileOK.prototype.isFullScreenAvailable=function(){return this.isInitialized()&&!this.isInApp()&&cc.sys.os===cc.sys.OS_ANDROID},cleverapps.MobileOK.prototype.requestFullScreen=function(s){s=s||function(){},this.isFullScreenAvailable()&&!this.isFullScreen?(this.listeners.requestFullscreen=cleverapps.once(function(e,t){"ok"===e?Resolution.whenResolutionStable(function(){s(),this.isFullScreen=!0}.bind(this)):s()}.bind(this)),FAPI.invokeUIMethod("requestFullscreen")):s()},cleverapps.MyMailRu=function(){this instanceof cleverapps.MobileMyMailRu||console.log("Choosing html5-MyMailRu"),cleverapps.UI.SOCIAL_CLICK_THROTTLE=3e3,cleverapps.Social.call(this)},cleverapps.MyMailRu.prototype=Object.create(cleverapps.Social.prototype),
cleverapps.MyMailRu.prototype.constructor=cleverapps.MyMailRu,cleverapps.MyMailRu.prototype.getLocalStoragePreffix=function(){return"_MM"},cleverapps.MyMailRu.prototype.init=function(t){this.listeners={friendsInvitation:function(){},friendsRequest:function(){},streamPublish:function(){}};var s=cleverapps.once(function(){if(this instanceof cleverapps.MobileMyMailRu)this.createHeaderAndFooter(t);else{if("undefined"!=typeof window&&window.outerHeight&&window.innerHeight){var e=window.outerHeight-250;mailru.app.utils.setHeight(e),cc.view.setFrameSize(window.innerWidth,e)}mailru.events.listen(mailru.app.events.friendsInvitation,function(e){this.listeners.friendsInvitation(e)}.bind(this)),mailru.events.listen(mailru.app.events.friendsRequest,function(e){this.listeners.friendsRequest(e)}.bind(this)),mailru.events.listen(mailru.common.events.streamPublish,function(e){this.listeners.streamPublish(e)}.bind(this)),mailru.events.listen(mailru.app.events.readHash,function(e){
e&&e.channel&&levels.user.setChannel(e.channel)}),mailru.app.utils.hash.read(),setTimeout(t,300)}}.bind(this)),e=function(e){"undefined"==typeof mailru&&(mailru=cleverapps.FakeMailRU),s(),"timeout"===e?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_TIMEOUT):cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_SCRIPT_ERROR)}.bind(this);cleverapps.loadSdk("//connect.mail.ru/js/loader.js",{onSuccess:function(){mailru.loader.require("api",function(){mailru.app.init(cleverapps.config.myMailRu.privateKey),s()})},onFailure:e})},cleverapps.MyMailRu.prototype.getRequestParameters=function(){var e={},t=window.location.search;if(t)for(var s=(t=t.substr(1)).split("&"),n=0;n<s.length;n++){var i=s[n].split("="),o=i[0],a=i[1];a=decodeURIComponent(a.replace(/\+/g," ")),e[o]=a}return e},cleverapps.MyMailRu.prototype.isLoggedIn=function(){return!0},cleverapps.MyMailRu.prototype.getUserID=function(){return this.getRequestParameters().vid},
cleverapps.MyMailRu.prototype.getAccessToken=function(){var e=[],t=this.getRequestParameters();for(var s in t)"sig"!==s&&e.push(s);e.sort();for(var n="",i=0;i<e.length;i++)n+=e[i]+"="+t[e[i]];return"MM_"+t.sig+"_"+n},cleverapps.MyMailRu.prototype.login=function(e){e()},cleverapps.MyMailRu.prototype.inviteFriends=function(e,t){this.listeners.friendsInvitation=function(e){"opened"!==e.status&&t(e.data&&e.data.length?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)},FullscreenControlButton.exitFullscreen(function(){mailru.app.friends.invite({text:e.message})})},cleverapps.MyMailRu.prototype.request=function(e,t){this.listeners.friendsRequest=function(e){"opened"!==e.status&&(e.data&&e.data.length?t(cleverapps.Social.CODE_SUCCEED,e.data):t(cleverapps.Social.CODE_CANCELLED))},FullscreenControlButton.exitFullscreen(function(){mailru.app.friends.request({text:e.message,image_url:cleverapps.config.deployment+cleverapps.ShareBonus.cycleShareData("share").picture,friends:e.to})})
},cleverapps.MyMailRu.prototype.shareDialog=function(e,t){this.listeners.streamPublish=function(e){"opened"!==e.status&&("publishSuccess"===e.status?t(cleverapps.Social.CODE_SUCCEED):(console.log(e.status),t(cleverapps.Social.CODE_CANCELLED)))};var s={title:e.name,text:e.description,img_url:cleverapps.config.deployment+e.picture};FullscreenControlButton.exitFullscreen(function(){mailru.common.stream.post(s)})},cleverapps.MyMailRu.prototype.listFriends=function(n){mailru.common.friends.getAppUsers(function(e){for(var t=[],s=0;s<e.length;s++)t.push(cleverapps.MyMailRu.formatUserData(e[s]));n(cleverapps.Social.CODE_SUCCEED,t)},!0)},cleverapps.MyMailRu.prototype.listInvitableFriends=function(n){mailru.common.friends.getExtended(function(e){for(var t=[],s=0;s<e.length;s++)e[s].app_installed||t.push(cleverapps.MyMailRu.formatUserData(e[s]));n(cleverapps.Social.CODE_SUCCEED,t)})},cleverapps.MyMailRu.formatUserData=function(e){return{id:e.uid,name:e.first_name+" "+e.last_name,
first_name:e.first_name,picture:{data:{url:e.pic_128}}}},cleverapps.MyMailRu.prototype.aboutUser=function(e,s,n){var i=!Array.isArray(e);mailru.common.users.getInfo(function(e){if(e.error)n&&n(cleverapps.Social.CODE_FAILED,e.error);else{e&&"function"==typeof e.map||cleverapps.throwAsync("MailRU aboutUser response - "+JSON.stringify(e));var t=e.map(function(e){return cleverapps.MyMailRu.formatUserData(e)});s(i?t[0]:t)}},e)},cleverapps.MyMailRu.prototype.aboutMe=function(e){this.aboutUser(this.getUserID(),e)},cleverapps.MyMailRu.prototype.logEvent=function(e,t){},cleverapps.MyMailRu.prototype.getDefaultLanguages=function(){return[cc.sys.LANGUAGE_RUSSIAN]},cleverapps.MyMailRu.isAppropriate=function(){return!cc.sys.isNative&&"web_mm"===cleverapps.User.calcSource()},cleverapps.FakeMailRU={events:{listen:function(){}},app:{friends:{invite:function(){},request:function(){}},utils:{setHeight:function(){},hash:{read:function(){}}},events:{},init:function(){}},common:{stream:{post:function(){}},
friends:{getAppUsers:function(){},getExtended:function(){}},users:{getInfo:function(){}},events:{}},loader:{require:function(){}}},cleverapps.MobileMyMailRu=function(){console.log("Choosing mobile-MyMailRu"),cleverapps.MyMailRu.call(this)},cleverapps.MobileMyMailRu.prototype=Object.create(cleverapps.MyMailRu.prototype),cleverapps.MobileMyMailRu.prototype.constructor=cleverapps.MobileMyMailRu,cleverapps.MobileMyMailRu.prototype.createHeaderAndFooter=function(n){var e=this.getRequestParameters();mailru.callhf=function(e){var t=document.createElement("div");t.innerHTML=e.header,document.body.insertBefore(t,document.body.firstChild);var s=document.createElement("div");s.style.position="absolute",s.style.top=window.innerHeight-27+"px",s.style.left="0px",s.style.height="27px",s.style.width="100%",s.style.zIndex="-1",s.innerHTML=e.footer,document.body.appendChild(s),cleverapps.canvasTop="43px",cleverapps.decCanvasHeight=70,Resolution.setupDesignResolution(),n()};var t={
method:"mobile.getCanvas",app_id:e.app_id,cb:"mailru.callhf",session_key:e.session_key,mobile_spec:e.mobile_spec};t=mailru.utils.sign(t),mailru.utils.apiOverJSONP(t,"https://appsmail.ru/platform/api")},cleverapps.MobileMyMailRu.prototype.inviteFriends=function(e,t){cleverapps.Notification.create("messages:mobileNotAvailable"),t(cleverapps.Social.CODE_CANCELLED)},cleverapps.MobileMyMailRu.prototype.request=function(e,t){cleverapps.Notification.create("messages:mobileNotAvailable"),t(cleverapps.Social.CODE_CANCELLED)},cleverapps.MobileMyMailRu.prototype.shareDialog=function(e,t){cleverapps.Notification.create("messages:mobileNotAvailable"),t(cleverapps.Social.CODE_CANCELLED)},cleverapps.MobileMyMailRu.isAppropriate=function(){return!cc.sys.isNative&&"mobile_mm"===cleverapps.User.calcSource()},cleverapps.Mobage=function(){this instanceof cleverapps.SPMobage||console.log("Choosing html5-mobage"),cleverapps.Social.call(this),this.increaseViralBonuses()},
cleverapps.Mobage.prototype=Object.create(cleverapps.Social.prototype),cleverapps.Mobage.prototype.constructor=cleverapps.Mobage,cleverapps.Mobage.prototype.increaseViralBonuses=function(){HelpFromFriendsWindow.TYPES.addmoves.amount=5,BountyManager.PRIZES.forEach(function(e){e.amount*=2})},cleverapps.Mobage.prototype.getLocalStoragePreffix=function(){return"_mbga"},cleverapps.Mobage.HEIGHT=860,cleverapps.Mobage.prototype.init=function(n){cleverapps.once(function(){gadgets.window.adjustHeight(cleverapps.Mobage.HEIGHT);var e=opensocial.newDataRequest();e.add(e.newFetchPersonRequest(opensocial.IdSpec.PersonId.VIEWER),"viewer"),e.send(function(e){if(e.hadError());else{var t=e.get("viewer");if(t.hadError());else{var s=t.getData();this.user=cleverapps.Mobage.formatUserData(s),console.log(this.user),n()}}}.bind(this))}.bind(this))()},cleverapps.Mobage.prototype.isLoggedIn=function(){return!0},cleverapps.Mobage.prototype.getUserID=function(){return this.user.id},
cleverapps.Mobage.prototype.getAccessToken=function(){return"mbga"},cleverapps.Mobage.prototype.login=function(e){e()},cleverapps.Mobage.prototype.sendActivity=function(e,t){var s=cleverapps.Social.ACTIVITIES_CONFIG[e];if(s.probability>Math.random()){var n=cleverapps.Random.mathChoose(s.messages),i={};i[opensocial.Activity.Field.TITLE]=Messages.get(n.title),i[opensocial.Activity.Field.BODY]=Messages.get(n.body,t);var o=opensocial.newActivity(i);opensocial.requestCreateActivity(o,opensocial.CreateActivityPriority.LOW,function(e){e.hadError()})}},cleverapps.Mobage.prototype.inviteFriends=function(e,t){var s={};s[opensocial.Message.Field.TITLE]=e.title;var n=opensocial.newMessage(e.message,s);FullscreenControlButton.exitFullscreen(function(){opensocial.requestShareApp("VIEWER_FRIENDS",n,function(e){e.hadError()?t(cleverapps.Social.CODE_CANCELLED,e):t(cleverapps.Social.CODE_SUCCEED)})})},cleverapps.Mobage.prototype.requestToOne=function(e,t,s){var n={}
;n[opensocial.Message.Field.TITLE]=t.title;var i=t.message,o=opensocial.newMessage(i,n),a=e;FullscreenControlButton.exitFullscreen(function(){opensocial.requestSendMessage(a,o,function(e){if(e.hadError())s(cleverapps.Social.CODE_CANCELLED);else{var t=e.getData();t.recipientIds&&0<t.recipientIds.length?s(cleverapps.Social.CODE_SUCCEED):s(cleverapps.Social.CODE_CANCELLED)}})})},cleverapps.Mobage.prototype.request=function(e,s){var n=e.to;Array.isArray(n)||(n=[n]);var i=[],o=function(t){t===n.length?s(0<i.length?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED,i):this.requestToOne(n[t],e,function(e){e===cleverapps.Social.CODE_SUCCEED&&i.push(n[t]),setTimeout(function(){o(t+1)},500)})}.bind(this);o(0)},cleverapps.Mobage.prototype.shareDialog=function(e,s){var t=cleverapps.config.deployment+e.picture;0<=t.indexOf("?")&&(t=t.substr(0,t.indexOf("?")));var n=opensocial.newMediaItem("image/jpg",t);n.setField(opensocial.MediaItem.Field.TYPE,opensocial.MediaItem.Type.IMAGE)
;var i={};i[mbga.Diary.Field.TITLE]=e.name,i[mbga.Diary.Field.CONTENT]=e.description,i[mbga.Diary.Field.MEDIA_ITEMS]=[n];var o=mbga.newCreateDiary(i);FullscreenControlButton.exitFullscreen(function(){mbga.requestCreateDiary(o,function(e){if(e.hadError())s(cleverapps.Social.CODE_FAILED,e);else{var t=e.getData().getEntryURL();console.log(t),s(t?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)}})})},cleverapps.Mobage.prototype.listFriendsByApp=function(s,n){var e={};e[opensocial.DataRequest.PeopleRequestFields.MAX]=1e3,e[opensocial.DataRequest.PeopleRequestFields.PROFILE_DETAILS]=[opensocial.Person.Field.HAS_APP];var t={};t[opensocial.IdSpec.Field.USER_ID]=opensocial.IdSpec.PersonId.VIEWER,t[opensocial.IdSpec.Field.GROUP_ID]=opensocial.IdSpec.GroupId.FRIENDS;var i=opensocial.newIdSpec(t),o=opensocial.newDataRequest();o.add(o.newFetchPeopleRequest(i,e),"friends"),o.send(function(e){if(e.hadError())n(cleverapps.Social.CODE_FAILED);else{var t=e.get("friends").getData(
).asArray();t=t.filter(function(e){return e.getField(opensocial.Person.Field.HAS_APP)===s}),n(cleverapps.Social.CODE_SUCCEED,t.map(cleverapps.Mobage.formatUserData))}})},cleverapps.Mobage.prototype.listFriends=function(e){this.listFriendsByApp(!0,e)},cleverapps.Mobage.prototype.listInvitableFriends=function(e){this.listFriendsByApp(!1,e)},cleverapps.Mobage.formatUserData=function(e){var t="",s={id:e.getId(),name:e.getDisplayName(),first_name:e.getDisplayName()};try{return t=cleverapps.Mobage.proxyAvatar(e.getField(opensocial.Person.Field.THUMBNAIL_URL)),s.picture={data:{url:t}},s}catch(e){if(e instanceof TypeError||e.message&&-1!==e.message.indexOf("of null")){var n=e.message+" avatarUrl - "+t+" reqUserId - "+s.id+" reqUserName - "+s.name+" stack - "+JSON.stringify(e.stack);throw new Error(n)}throw e}},cleverapps.Mobage.proxyAvatar=function(e){return cleverapps.config.deployment.replace("https","http")+"/proxy"+e.match(/.*profile(.*)/)[1]},cleverapps.Mobage.prototype.aboutMe=function(e
){e(this.user)},cleverapps.Mobage.prototype.logEvent=function(e,t){},cleverapps.Mobage.prototype.getDefaultLanguages=function(){return[cc.sys.LANGUAGE_JAPANESE]},cleverapps.Mobage.isAppropriate=function(){return!cc.sys.isNative&&"mbga"===cleverapps.User.calcSource()},cleverapps.Mobage.CODE_SUCCEED="ok",cleverapps.SPMobage=function(){console.log("Choosing sp-mobage"),cleverapps.Mobage.call(this),this.clientData=cleverapps.SPMobage.CLIEND_DATA;var e=cleverapps.config.deployment.replace("https","http");this.clientData.redirectUrl=e+"/publish/html5"+(cleverapps.config.debugMode?"-staging":"")+"/index.html"},cleverapps.SPMobage.prototype=Object.create(cleverapps.Mobage.prototype),cleverapps.SPMobage.prototype.constructor=cleverapps.SPMobage,cleverapps.SPMobage.prototype.getLocalStoragePreffix=function(){return"_sp_mbga"},cleverapps.SPMobage.prototype.needTokenRefresh=function(){return!this.clientData.token||!this.clientData.token.expireTime||this.clientData.token.expireTime<=Date.now()},
cleverapps.SPMobage.prototype.checkAccessToken=function(n){n=n||function(){};var e=function(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s+"="+e[s]);cleverapps.RestClient.get(e.path+"?"+t.join("&"),{},function(e){this.clientData.token.accessToken=e.accessToken,this.clientData.token.refreshToken=e.refreshToken,this.clientData.token.expireTime=Date.now()+1e3*e.expiresIn,n()}.bind(this))}.bind(this),t={redirect_uri:this.clientData.redirectUrl};this.clientData.token?this.needTokenRefresh()?(t.path="/spmbgatoken/refresh",t.refresh_token=this.clientData.token.refreshToken,e(t)):n():(this.clientData.token={},t.path="/spmbgatoken/get",t.code=this.clientData.code,e(t))},cleverapps.SPMobage.prototype.init=function(t){this.loggedIn=!1;var e=function(){AddSPMobageFooter(),this.checkLoginStatus(t),setInterval(this.periodicCheck.bind(this),cleverapps.parseInterval(cleverapps.SPMobage.CHECK_STATUS_INTERVAL))}.bind(this),s=function(e){"undefined"==typeof mobage&&(
mobage=cleverapps.FakeSPMobage),"timeout"===e?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_TIMEOUT):cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_SCRIPT_ERROR),t()}.bind(this),n=cleverapps.config.debugMode?cleverapps.SPMobage.MOBAGE_API.SANDBOX:cleverapps.SPMobage.MOBAGE_API.PRODUCTION;cleverapps.loadSdk(n,{onFailure:s}),document.addEventListener("mobageReady",function(){try{mobage.init({clientId:this.clientData.clientId,redirectUri:this.clientData.redirectUrl}),e()}catch(e){console.log("Mobage init fail",e),s()}}.bind(this))},cleverapps.SPMobage.prototype.getPlayerInfo=function(s){mobage.api.people.get({userId:"@me",groupId:"@self",fields:["id","displayName","thumbnailUrl"]},function(e,t){e?console.log("Failed requesting user info",e):this.user=cleverapps.SPMobage.formatUserData(t),s()}.bind(this))},cleverapps.SPMobage.prototype.login=function(e,t){e()},cleverapps.SPMobage.prototype.checkLoginStatus=function(t){t=t||function(){};var s=function(){
this.loggedIn=!0,this.getPlayerInfo(t)}.bind(this);try{mobage.oauth.getConnectedStatus({state:this.clientData.state},function(e,t){e?(this.clientData.platformLogin=e.login,this.clientData.connected=e.connected,this.processAutoLogin(s)):(this.clientData.platformLogin=!0,this.clientData.connected=!0,this.clientData.code=t.response.code,s())}.bind(this))}catch(e){console.log("Get connect status error",e),t()}},cleverapps.SPMobage.prototype.periodicCheck=function(){if(!this.checkInProcess){this.checkInProcess=!0;try{mobage.oauth.getConnectedStatus({state:this.clientData.state},function(e,t){this.checkInProcess=!1,t&&(this.clientData.code=t.response.code,this.checkAccessToken())}.bind(this))}catch(e){this.checkInProcess=!1,console.log("Get connect status error",e)}}},cleverapps.SPMobage.prototype.processAutoLogin=function(n){var i=ResourceProcessor.calcProbablyNeed(),o=setInterval(function(){if(cleverapps.bundleLoader.isLoaded(i)){clearInterval(o);var t=this.createAutoLoginScreen(n),
e=cc.director.getRunningScene().onChangeSize;if(e){var s=t.createListener(function(){var e=cc.director.getWinSize();t.setContentSize2(e),t.buttonNode.setPositionRound(e.width/2,e.height/2)}.bind(this));cc.director.getRunningScene().onChangeSize=function(){e.apply(cc.director.getRunningScene(),arguments),s()}}}}.bind(this),300)},cleverapps.SPMobage.prototype.createAutoLoginScreen=function(e){var t=cc.director.getWinSize(),s=new cc.LayerColor(cleverapps.styles.COLORS.WHITE,t.width,t.height);cc.director.getRunningScene().addChild(s,9999);var n=s.buttonNode=new SpPlatformButtons(t.width,function(){s.removeFromParent(),e()});return s.addChild(n),n.setPositionRound(t.width/2,t.height/2),s},cleverapps.SPMobage.prototype.isLoggedIn=function(){return this.loggedIn},cleverapps.SPMobage.formatUserData=function(e){return{id:e.id,name:e.displayName,first_name:e.displayName,picture:{data:{url:cleverapps.SPMobage.proxyAvatar(e.thumbnailUrl)}}}},cleverapps.SPMobage.proxyAvatar=function(e){
return cleverapps.config.deployment.replace("https","http")+"/proxy/sp"+e.match(/.*img_u(.*)/)[1]},cleverapps.SPMobage.prototype.listFriendsByApp=function(n,i){mobage.api.people.get({userId:"@me",groupId:"@friends",fields:["id","displayName","thumbnailUrl","hasApp"]},function(e,t){if(e)console.log("Failed fetching friends",e),i(cleverapps.Social.CODE_FAILED);else{var s=t.entry;s=s.filter(function(e){return e.hasApp===n}),i(cleverapps.Social.CODE_SUCCEED,s.map(cleverapps.SPMobage.formatUserData))}})},cleverapps.SPMobage.prototype.inviteFriends=function(e,s){mobage.ui.open("invitation",{},function(e,t){e?s(cleverapps.Social.CODE_CANCELLED,e):"mobage"===t.response.result.channel&&s(cleverapps.Social.CODE_SUCCEED)})},cleverapps.SPMobage.prototype.request=function(e,t){t(cleverapps.Social.CODE_SUCCEED)},cleverapps.SPMobage.prototype.shareDialog=function(e,t){t(cleverapps.Social.CODE_SUCCEED)},cleverapps.SPMobage.prototype.sendActivity=function(e,t){},
cleverapps.SPMobage.isAppropriate=function(){return!cc.sys.isNative&&"sp_mbga"===cleverapps.User.calcSource()},cleverapps.SPMobage.MOBAGE_API={SANDBOX:"https://cdn-sb-connect.mobage.jp/jssdk/mobage-jssdk-client.3.9.1.min.js",PRODUCTION:"https://cdn-connect.mobage.jp/jssdk/mobage-jssdk-client.3.9.1.min.js"},cleverapps.SPMobage.CLIEND_DATA={clientId:cleverapps.config.sp_mbga&&cleverapps.config.sp_mbga.url,state:"mobage-connect_"+Math.random().toString(36).slice(-16),code:null,connected:!1,platformLogin:!1},cleverapps.SPMobage.CHECK_STATUS_INTERVAL="10 minutes",cleverapps.FakeSPMobage={ui:{open:function(){},show:function(){}},event:{subscribe:function(){},unsubscribe:function(){}},oauth:{connect:function(){},getConnectedStatus:function(){}},api:{people:{get:function(){}}}},cleverapps.overrideFonts(cleverapps.styles.FONTS,{BLUE_LINK_TEXT:{size:30,color:new cc.Color(62,158,254)},BLACK_LINK_TEXT:{size:30,color:cleverapps.styles.COLORS.BLACK}});var AddSPMobageFooter=function(){
var e=document.createElement("div");e.style.position="absolute",e.style.zIndex="2",e.style.bottom="0",e.style.height="27px",e.style.width="100%",e.style.background="#e3e3e3",e.style.display="table",e.innerHTML=AddSPMobageFooter.getContentHtml(),document.body.appendChild(e),cleverapps.decCanvasHeight=27,Resolution.setupDesignResolution()};AddSPMobageFooter.getContentHtml=function(){var e="style='display: table-cell;\nwidth: 25%;\ntext-align: center;\nvertical-align: middle;\nborder-right: 1px solid #5f5f5f;\nfont-size: 80%;\ncolor: #5f5f5f;\nline-height: normal;\nfont-weight: bold;'";return"<div "+e+" onclick='mobage.ui.show(\"portal\", {});'>Mobage</div><div "+e+" onclick='mobage.ui.show(\"inquiry\", {});'>お問い合わせ</div><div "+e+" onclick='mobage.ui.open(\"client_configuration\", {}, function() {});'>設定変更</div><div "+e+" onclick='mobage.ui.show(\"commercial_transaction\");'>特定商取引法</div>"};var SpPlatformButtons=cleverapps.Layout.extend({ctor:function(e,t){this.buttonWidth=e,
this.callback=t,this._super(this.createItems(),{direction:cleverapps.UI.VERTICAL,margin:cleverapps.styles.SpPlatformButtons.buttonsMargin})},createItems:function(){return-1===SpPlatformButtons.EASY_REGISTRATION_UNAVAILABLE.indexOf(cleverapps.config.name)?this.createNewFormItems():this.createOldFormItems()},createNewFormItems:function(){var e=[];return cleverapps.social.clientData.platformLogin?e.push(this.createOneButton("ゲームを始める",this.createLink("同意事項等（必読)"))):(e.push(this.createOneButton("モバゲーIDで始める",this.createLink("同意事項等（必読)"))),e.push(this.createOneButton("新規かんたん会員で始める",this.createLink("会員規約等（必読)",!0),!0))),e},createOldFormItems:function(){var e=[];cleverapps.social.clientData.platformLogin?e.push(this.createOneButton("インストール")):e.push(this.createOneButton("ログイン"));var t="ゲームをスタートするには"+(cleverapps.social.clientData.platformLogin?"ゲームをインストール":"ログイン")+"してください。",s=cleverapps.UI.generateOnlyText(t,cleverapps.styles.FONTS.BLACK_LINK_TEXT);return s.setDimensions(Math.min(
cleverapps.styles.SpPlatformButtons.maxTextWidth,.7*cc.director.getWinSize().width),0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.push(s),e},createOneButton:function(e,t,s){var n=function(e,t){e?console.log("Authorization failed:",e):(cleverapps.social.clientData.platformLogin=!0,cleverapps.social.clientData.connected=!0,cleverapps.social.clientData.code=t.response.code,cleverapps.social.checkAccessToken(),this.callback())}.bind(this),i=[new cleverapps.UI.Button({text:e,maxWidth:.8*this.buttonWidth,onClicked:function(){var e={state:cleverapps.social.clientData.state};s&&(e.easyRegistration=!0,e.requestType="window"),mobage.oauth.connect(e,n)}}),t].filter(function(e){return e});return new cleverapps.Layout(i,{direction:cleverapps.UI.VERTICAL,margin:cleverapps.styles.SpPlatformButtons.linkMargin})},createLink:function(e,t){var s=cleverapps.UI.generateOnlyText(e,cleverapps.styles.FONTS.BLUE_LINK_TEXT),n=cleverapps.UI.generateOnlyText(" に同意して",
cleverapps.styles.FONTS.BLACK_LINK_TEXT),i=new cleverapps.Layout([s,n],{direction:cleverapps.UI.HORIZONTAL,margin:cleverapps.styles.SpPlatformButtons.textMargin});return cleverapps.UI.applyHover(i),cleverapps.UI.onClick(i,function(){t?mobage.ui.show("client_agreement_menu",{isEasyRegistration:!0}):mobage.ui.show("client_agreement_menu")}),i}});SpPlatformButtons.EASY_REGISTRATION_UNAVAILABLE=["riddles","heroes","tripeaks","crocword","runes"],cleverapps.styles.SpPlatformButtons={buttonsMargin:50,linkMargin:10,textMargin:5,maxTextWidth:600},cleverapps.Xsolla=function(){console.log("Choosing Xsolla"),this.accessToken=void 0,this.user=void 0,cleverapps.Social.call(this)},cleverapps.Xsolla.prototype=Object.create(cleverapps.Social.prototype),cleverapps.Xsolla.prototype.constructor=cleverapps.Xsolla,cleverapps.Xsolla.prototype.init=function(e){var t,s,n,i,o;cleverapps.config.debugMode||(t=window,s=document,t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(
arguments)},t._fbq||(t._fbq=n),(n.push=n).loaded=!0,n.version="2.0",n.queue=[],(i=s.createElement("script")).async=!0,i.src="https://connect.facebook.net/en_US/fbevents.js",(o=s.getElementsByTagName("script")[0]).parentNode.insertBefore(i,o)),fbq("init",cleverapps.config.fbPixelId),fbq("track","PageView"));var a=document.createElement("div");a.id="xsollaLoginLayout",a.style.width="100%",a.style.height="100%",a.style.left="0px",a.style.top="0px",a.style.position="absolute",a.style.backgroundColor="#00000050",a.style.zIndex="1000000000",a.style.visibility="hidden",document.body.appendChild(a),this.accessToken=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.XSOLLA_ACCESS_TOKEN),this.accessToken?this.loadUser(e,function(){this.accessToken=void 0,cleverapps.DataLoader.remove(cleverapps.DataLoaderTypes.XSOLLA_ACCESS_TOKEN),e()}):e()},cleverapps.Xsolla.prototype.loadUser=function(t,e){cleverapps.RestClient.get("https://login.xsolla.com/api/users/me",{},function(e){this.user=e,t()}.bind(
this),e,{authorization:"Bearer "+this.accessToken})},cleverapps.Xsolla.prototype.needWindowForLogin=function(){return!0},cleverapps.Xsolla.prototype.login=function(t,s){var e,n,i=function(){window.removeEventListener("message",e,!1),document.getElementById("xsollaLoginLayout").style.visibility="hidden",clearInterval(n)};e=function(e){e.origin===location.origin&&(this.accessToken=e.data,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.XSOLLA_ACCESS_TOKEN,this.accessToken),i(),this.loadUser(function(){cleverapps.SocialManager.onLogin(),t()},s))}.bind(this);var o=Math.max(800,.5*screen.width),a=Math.max(600,.6*screen.height),r=(screen.width-o)/2,l=(screen.height-a)/2,c=location.href;c=c.substr(0,c.lastIndexOf("/")+1)+"xsolla-login.html";var p=cleverapps.config.useStandAppId&&projects[cleverapps.config.name].basic.stand&&projects[cleverapps.config.name].basic.stand.xsollaLoginProject;p&&(c+="?projectId="+p);var d=window.open(c,"popup",
"toolbar=no, location=no, directories=no, status=no, menubar=no, copyhistory=no, width="+o+", height="+a+", top="+l+", left="+r);d?(window.addEventListener("message",e,!1),document.getElementById("xsollaLoginLayout").style.visibility="visible",n=setInterval(function(){d.closed&&(i(),s())},100)):s()},cleverapps.Xsolla.prototype.getUserID=function(){return this.user?this.user.id:void 0},cleverapps.Xsolla.prototype.isLoggedIn=function(){return this.user},cleverapps.Xsolla.prototype.getAccessToken=function(){return"XS_"+(this.accessToken||0)},cleverapps.Xsolla.prototype.aboutMe=function(t){cleverapps.RestClient.get("https://login.xsolla.com/api/users/me/social_providers",{},function(e){e&&0<e.length?(e=e[0],t({id:this.getUserID(),name:e.full_name,first_name:e.nickname,picture:{data:{url:e.picture}}})):console.log("Error: "+JSON.stringify(e))}.bind(this),function(){console.log("Failed loading aboutMe")},{authorization:"Bearer "+this.accessToken})},
cleverapps.Xsolla.prototype.getLocalStoragePreffix=function(){return"_xsolla"},cleverapps.Xsolla.isAppropriate=function(){return"xsolla"===cleverapps.User.calcSource()},cleverapps.Html5=function(){console.log("Choosing html5-facebook"),cleverapps.BaseFB.call(this),this.loginPlacement=!0},cleverapps.Html5.prototype=Object.create(cleverapps.BaseFB.prototype),cleverapps.Html5.prototype.constructor=cleverapps.Html5,cleverapps.Html5.prototype.init=function(e){var t,s,n=cleverapps.once(function(){setTimeout(e,500),void 0!==s&&(clearInterval(s),s=void 0),void 0!==t&&(clearTimeout(t),t=void 0),cleverapps.social.deleteAllRequests()}),i=function(e){plugin.FacebookAgent&&plugin.FacebookAgent.getInstance()&&void 0!==plugin.FacebookAgent.getInstance()._isLoggedIn?n():(plugin.FacebookAgent=cleverapps.FakeFacebookAgent,n(),"timeout"===e?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_TIMEOUT):cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_SCRIPT_ERROR))}.bind(this)
;cleverapps.loadSdk("//connect.facebook.net/en_US/sdk.js",{onSuccess:function(){t=setTimeout(function(){i("timeout")},9e4)},onFailure:i}),window.fbAsyncInit=function(){plugin.FacebookAgent||(cleverapps.StartFacebook(),s=setInterval(function(){plugin.FacebookAgent&&plugin.FacebookAgent.getInstance()&&void 0!==plugin.FacebookAgent.getInstance()._isLoggedIn&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FACEBOOK_INITED),n())},50))}},cleverapps.Html5.prototype.isLoggedIn=function(){return this.initialized&&plugin.FacebookAgent.getInstance().isLoggedIn()},cleverapps.Html5.prototype.getUserID=function(){return plugin.FacebookAgent.getInstance().getUserID()},cleverapps.Html5.prototype.getAccessToken=function(){return plugin.FacebookAgent.getInstance().getAccessToken()},cleverapps.Html5.prototype.login=function(t,s){if(!this.isInitialized())return cleverapps.Notification.create("messages:SocialManager.Initialization"),void(s&&s());FullscreenControlButton.exitFullscreen(function(){
plugin.FacebookAgent.getInstance().login(cleverapps.BaseFB.PERMISSIONS,function(e){e===cleverapps.Social.CODE_SUCCEED?(cleverapps.SocialManager.onLogin(),t()):(cleverapps.SocialManager.onFailedLogin(),s&&s())})})},cleverapps.Html5.prototype.inviteFriends=function(e,t){this.request(e,t)},cleverapps.Html5.prototype.request=function(e,t){delete e.element,"object"==typeof e.to&&(e.to=e.to.join(",")),FullscreenControlButton.exitFullscreen(function(){plugin.FacebookAgent.getInstance().appRequest(e,t)})},cleverapps.Html5.prototype.shareDialog=function(e,t){var s=this.getShareDialogLink(e);console.log("share link",s);var n={dialog:"feedDialog",link:s,caption:Messages.get(cleverapps.config.title)};FullscreenControlButton.exitFullscreen(function(){plugin.FacebookAgent.getInstance().dialog(n,t)})},cleverapps.Html5.prototype.api=function(e,t,s,n){if("function"==typeof(s=s||{})&&(n=s,s={}),!this.isLoggedIn())return console.log("Not logged in!"),void(n&&n(cleverapps.Social.CODE_CANCELLED))
;void 0===t?(t=plugin.FacebookAgent.HttpMethod.GET,n=function(){}):"function"==typeof t&&(n=t,t=plugin.FacebookAgent.HttpMethod.GET),plugin.FacebookAgent.getInstance().api(e,t,s,n)},cleverapps.Html5.prototype.logEvent=function(e,t){if(plugin.FacebookAgent&&plugin.FacebookAgent.getInstance()){var s=0;t&&1<t.amount&&(s=t.amount),plugin.FacebookAgent.getInstance().logEvent(e,s,t)}},cleverapps.Html5.isAppropriate=function(){return!cc.sys.isNative},cleverapps.FakeFacebookAgent={getInstance:function(){return this},isLoggedIn:function(){return!1},logEvent:function(){},login:function(e,t){t(cleverapps.Social.CODE_FAILED)},getAccessToken:function(){},dialog:function(e,t){t(cleverapps.Social.CODE_FAILED)},appRequest:function(e,t){t(cleverapps.Social.CODE_FAILED)},api:function(e,t,s,n){"function"==typeof s&&(n=s,s={}),n(cleverapps.Social.CODE_FAILED)},HttpMethod:{GET:"get"}},cleverapps.Instant=function(){console.log("Choosing Instant-facebook"),cleverapps.Social.call(this),
SelectFriendWindow.MAX_SELECTED=1},cleverapps.Instant.prototype=Object.create(cleverapps.Social.prototype),cleverapps.Instant.prototype.constructor=cleverapps.Instant,cleverapps.Instant.LoadSdk=function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","//connect.facebook.net/en_US/fbinstant.6.3.js"),t.onload=function(){console.log("Loaded FBInstant sdk"),e()},t.onerror=function(){console.log("Failed initialize sdk")},document.body.appendChild(t)},cleverapps.Instant.prototype.createBot=function(){FBInstant.player.canSubscribeBotAsync().then(function(e){e&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_BOT_SHOW),FBInstant.player.subscribeBotAsync().then(function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_BOT)}))}).catch(function(e){-1===["No page associated to the Instant Game.","User already subscribed to this game bot.","Exceed API policy limit."].indexOf(e.message)&&cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.INSTANT_BOT_ERROR),console.log(e.code+" "+e.message)})},cleverapps.Instant.prototype.createShortcut=function(){cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.INSTANT_SHORTCUT_CREATED)||FBInstant.canCreateShortcutAsync().then(function(e){e&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_SHORTCUT_SHOW),FBInstant.createShortcutAsync().then(function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_SHORTCUT),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.INSTANT_SHORTCUT_CREATED,1)}))})},cleverapps.Instant.prototype._update=function(s,n){var e=s.image||cleverapps.ShareBonus.cycleShareData("share").picture;this.getBase64Image(e,function(e,t){e?(console.log(e),n(cleverapps.Social.CODE_FAILED)):(n(cleverapps.Social.CODE_SUCCEED),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_UPDATE),FBInstant.updateAsync({action:"CUSTOM",image:t,text:{default:s.message},template:s.template,strategy:"IMMEDIATE",notification:"PUSH"}))})},
cleverapps.Instant.prototype.init=function(s){cleverapps.Instant.LoadSdk(function(){FBInstant.initializeAsync().then(function(){cleverapps.config.platform=FBInstant.getPlatform();var e=FBInstant.getEntryPointData(),t=e&&e.channel;t&&!cleverapps.user.channel&&0===cleverapps.user.getProgress()&&cleverapps.user.setChannel(t),s()}.bind(this))}.bind(this))},cleverapps.Instant.prototype.logEvent=function(e,t){"undefined"!=typeof FBInstant&&FBInstant.logEvent(e,1,t)},cleverapps.Instant.prototype.isLoggedIn=function(){return!0},cleverapps.Instant.prototype.getUserID=function(){return FBInstant.player.getID()},cleverapps.Instant.prototype.inviteFriends=function(e,t){t=this.waitWindowCallback(t),FBInstant.context.chooseAsync({filters:["NEW_PLAYERS_ONLY"],minSize:2,maxSize:2}).then(function(){this._update({template:"invite",message:e.message},t)}.bind(this)).catch(function(){t(cleverapps.Social.CODE_FAILED)})},cleverapps.Instant.prototype.request=function(t,s){s=this.waitWindowCallback(s),
FBInstant.context.createAsync(t.to[0]).then(function(){this._update({template:"request",message:t.message},s)}.bind(this)).catch(function(e){console.log("send request to "+t.to[0]+" failed",e),-1===["SAME_CONTEXT","INVALID_PARAM"].indexOf(e.code)?s(cleverapps.Social.CODE_FAILED):s(cleverapps.Social.CODE_SUCCEED)})},cleverapps.Instant.prototype.shareDialog=function(s,n){n=this.waitWindowCallback(n),this.getBase64Image(s.picture,function(e,t){e?(console.log(e),n(cleverapps.Social.CODE_FAILED)):FBInstant.shareAsync({intent:"SHARE",image:t,text:s.description}).then(function(){n(cleverapps.Social.CODE_SUCCEED)}).catch(function(){n(cleverapps.Social.CODE_FAILED)})})},cleverapps.Instant.prototype.waitWindowCallback=function(e){var t=new WaitWindow;return cleverapps.metha.display({focus:"waitWindowCallback",action:function(e){cleverapps.metha.onceNoWindowsListener=e}}),function(){t.close(),e.apply(this,arguments)}},cleverapps.Instant.prototype.getBase64Image=function(s,n){0===(s=s.replace(
".jpg",".txt").replace(".png","txt")).indexOf("/")&&(s=s.substr(1)),cc.loader.load(s,function(e,t){s=t&&Array.isArray(t)&&0<t.length?t[0]:void 0,n(e,s)})},cleverapps.Instant.prototype.listFriends=function(s){FBInstant.player.getConnectedPlayersAsync().then(function(e){var t=e.map(function(e){return{id:e.getID(),first_name:e.getName(),picture:{data:{url:e.getPhoto()}}}});s(cleverapps.Social.CODE_SUCCEED,t)}).catch(function(){s(cleverapps.Social.CODE_FAILED)})},cleverapps.Instant.prototype.listInvitableFriends=function(e){e(cleverapps.Social.CODE_SUCCEED,[])},cleverapps.Instant.prototype.aboutMe=function(e){e({currency:{user_currency:"USD"},name:FBInstant.player.getName(),first_name:FBInstant.player.getName(),picture:{data:{url:FBInstant.player.getPhoto()}}})},cleverapps.Instant.prototype.getAccessToken=function(){return"instant"},cleverapps.Instant.isAppropriate=function(){return cleverapps.isInstant()},cleverapps.Instant.PLATFORM_WEB="WEB",
cleverapps.Instant.PLATFORM_MOBILE_WEB="MOBILE_WEB",cleverapps.Instant.PLATFORM_IOS="IOS",cleverapps.Instant.PLATFORM_ANDROID="ANDROID",cleverapps.FakeInstant=function(){console.log("Choosing FakeInstant-facebook"),this.__mockState={initialized:!1},cleverapps.Instant.call(this)},cleverapps.FakeInstant.prototype=Object.create(cleverapps.Instant.prototype),cleverapps.FakeInstant.prototype.constructor=cleverapps.FakeInstant,cleverapps.FakeInstant.prototype.init=function(e){cleverapps.config.restApiURL=cleverapps.config.fakeRestApiURL,cleverapps.Instant.LoadSdk=function(e){e()},FBInstant={initializeAsync:function(){return new Promise(function(e,t){var s=document.createElement("link");s.href="cleverapps/res/css/mock.css",s.rel="stylesheet",s.type="text/css",document.head.appendChild(s),Utils.log("initializeAsync"),e()})},startGameAsync:function(){return new Promise(function(e,t){Utils.log("startGameAsync","Showing game start dialog"),Utils.createAlert({
message:"Game has finished loading. <br /> Play now?",cta:"Play!"},function(){cleverapps.social.__mockState.initialized=!0,e()})})},setLoadingProgress:function(s){return new Promise(function(e,t){Utils.log("progress",s,"%"),e()})},getSupportedAPIs:function(){var e=[];for(var t in FBInstant)e.push(t);for(var t in FBInstant.player)e.push("player."+t);for(var t in FBInstant.context)e.push("context."+t);return e}},cleverapps.Instant.LoadSdk(function(){FBInstant.initializeAsync().then(function(){console.log("FBInstant.initializeAsync()"),InstantLoaderScene.whenLoaded(function(){FBInstant.startGameAsync().then(e)})}.bind(this))}.bind(this))},cleverapps.FakeInstant.prototype.logEvent=function(e,t){return Utils.log("logEvent",e,1,t),null},cleverapps.FakeInstant.prototype.isLoggedIn=function(){return!0},cleverapps.FakeInstant.prototype.getUserID=function(){return Utils.returnUserData(123456789)},cleverapps.FakeInstant.prototype.inviteFriends=function(e,t){Utils.shareAsync({intent:"INVITE",
image:DEFAULT_INVITE_PICTURE,text:e.message}).then(function(){t(cleverapps.Social.CODE_SUCCEED)})},cleverapps.FakeInstant.prototype.request=function(e,t){Utils.shareAsync({intent:"REQUEST",image:e.picture,text:e.message}).then(function(){t()})},cleverapps.FakeInstant.prototype.shareDialog=function(e,t){Utils.shareAsync({intent:"SHARE",image:e.picture,text:e.description}).then(function(){t()})},cleverapps.FakeInstant.prototype.listFriends=function(t){new Promise(function(e,t){var s=[];cleverapps.social.__mockState.initialized?s=[{getID:function(){return 42},getName:function(){return"Friend 1"},getPhoto:function(){return"cleverapps/res/img/mock/friend1-f27202440f.png"}},{getID:function(){return 43},getName:function(){return"Friend 2"},getPhoto:function(){return"cleverapps/res/img/mock/friend2-607bb2c069.png"}},{getID:function(){return 44},getName:function(){return"Friend 3"},getPhoto:function(){return"cleverapps/res/img/mock/friend3-5d09776058.png"}}]:Utils.log("getConnectedPlayersAsync"
,"Connected players data is not available before startGameAsync resolves"),Utils.log("getConnectedPlayersAsync","players: ",s),e(s)}).then(function(e){t(cleverapps.Social.CODE_SUCCEED,e.map(function(e){return{id:e.getID(),name:e.getName(),first_name:e.getName(),picture:{data:{url:e.getPhoto()}}}}))})},cleverapps.FakeInstant.prototype.listInvitableFriends=function(e){return[]},cleverapps.FakeInstant.prototype.aboutMe=function(e){e({currency:{user_currency:"USD"},name:Utils.returnUserData("Player 1"),first_name:Utils.returnUserData("Player 1"),picture:{data:{url:Utils.returnUserData("cleverapps/res/img/mock/profile-2f8a5e0f94.jpg")}}})};var Utils={shareAsync:function(s){var n="Share Intent: "+s.intent;return n+="<br />",n+="Share text: "+s.text,n+="<br />",n+="Share payload: "+JSON.stringify(s.data),new Promise(function(e,t){Utils.createAlert({title:"Shared content",message:n,image:s.image,cta:"Close"},e)})},createAlert:function(e,t){var s=document.createElement("div")
;s.className="mockDialog";var n=document.createElement("h3");if(n.innerHTML="(FBFakeInstant Mock)",n.innerHTML+=" "+(e.title||""),s.appendChild(n),e.message){var i=document.createElement("p");i.innerHTML=e.message,s.appendChild(i)}if(e.image){var o=document.createElement("img");o.src=e.image,s.appendChild(o)}var a=document.createElement("input");a.type="button",a.value=e.cta||"Close",s.appendChild(a),a.onclick=function(){document.body.removeChild(s),t()},document.body.appendChild(s)},log:function(){args=[],args.push("[FBFakeInstant Mock]:");for(var e=0;e<arguments.length;e++)args.push(arguments[e]);console.log.apply(console,args)},getQueryString:function(){var i={};return location.search&&location.search.substr(1).split("&").forEach(function(e){var t=e.split("="),s=t[0],n=t[1]&&decodeURIComponent(t[1]);(i[s]=i[s]||[]).push(n)}),i},returnAndLog:function(e){return caller=Utils.returnAndLog.caller,caller?Utils.log(caller.name,e):Utils.log(e),e},returnUserData:function(e){
return cleverapps.social.__mockState.initialized?Utils.returnAndLog(e):(Utils.log("User Data is not available until startGameAsync has resolved"),null)},getFromLocalStorage:function(i,o){return new Promise(function(e,t){var s=localStorage.getItem(i),n={};s&&(s=JSON.parse(s),o.forEach(function(e){"undefined"!==s[e]&&(n[e]=s[e])})),Utils.log(n),e(n)})},writeToLocalStorage:function(s,n){return new Promise(function(e,t){Utils.log(JSON.stringify(n)),localStorage.setItem(s,JSON.stringify(n)),e()})}};cleverapps.FakeInstant.isAppropriate=function(){return!cc.sys.isNative&&"instant"===cc.game.config.source&&cleverapps.isLocalhost()},cleverapps.FakeFacebook=function(){cleverapps.BaseFB.call(this)},cleverapps.FakeFacebook.prototype=Object.create(cleverapps.BaseFB.prototype),cleverapps.FakeFacebook.prototype.constructor=cleverapps.FakeFacebook,cleverapps.FakeFacebook.prototype.init=function(e){cleverapps.config.restApiURL=cleverapps.config.fakeRestApiURL,this.DIALOG_CANCELLED=2,this.loggedIn=!1,
this.token=void 0,setTimeout(function(){this.isExpired()||(this.token="123",this.loggedIn=!0),e()}.bind(this),1e3)},cleverapps.FakeFacebook.prototype.isExpired=function(){var e=cc.sys.localStorage.getItem(cleverapps.DataLoaderTypes.FAKE_FACEBOOK_LOGGING_TIME);return null===e||parseInt(e)+cleverapps.FakeFacebook.FAKE_SESSION_TIMEOUT<Date.now()},cleverapps.FakeFacebook.prototype.logEvent=function(e,t){},cleverapps.FakeFacebook.prototype.isLoggedIn=function(){return this.loggedIn&&!this.isExpired()},cleverapps.FakeFacebook.prototype.getUserID=function(){return"1"},cleverapps.FakeFacebook.prototype.getAccessToken=function(){return this.isExpired()?void 0:this.token},cleverapps.FakeFacebook.prototype.login=function(e,t){confirm("Do you want to log in?")?(cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.FAKE_FACEBOOK_LOGGING_TIME,Date.now()),this.token="123",this.loggedIn=!0,cleverapps.SocialManager.onLogin(),(e=e||function(){})()):(cleverapps.DataLoader.remove(
cleverapps.DataLoaderTypes.FAKE_FACEBOOK_LOGGING_TIME),cleverapps.SocialManager.onFailedLogin(),t&&t())},cleverapps.FakeFacebook.prototype.inviteFriends=function(e,t){this.request(e,t)},cleverapps.FakeFacebook.prototype.request=function(e,t){delete e.element,t=t||function(){},confirm("Do you to post "+JSON.stringify(e)+"?")?t(cleverapps.Social.CODE_SUCCEED,{to:["__333"]}):t(cleverapps.Social.DIALOG_CANCELLED,"FakeFB")},cleverapps.FakeFacebook.prototype.shareDialog=function(e,t){confirm("Do you to post "+JSON.stringify(e)+"?")?t(cleverapps.Social.CODE_SUCCEED,"FakeFB"):t(cleverapps.Social.DIALOG_CANCELLED,"FakeFB")},cleverapps.FakeFacebook.prototype.listFriends=function(e){setTimeout(function(){e(cleverapps.Social.CODE_SUCCEED,[{id:"111",name:"Friend 111",first_name:"Friend1",picture:{data:{url:"https://graph.facebook.com/41803173/picture?height=200&width=200"}}},{id:"222",name:"Friend 222",first_name:"Friend2",picture:{data:{
url:"https://graph.facebook.com/692982514/picture?height=200&width=200"}}}])},500)},cleverapps.FakeFacebook.prototype.listInvitableFriends=function(e){setTimeout(function(){e(cleverapps.Social.CODE_SUCCEED,[{id:"__333",name:"Invitable1",first_name:"Invitable1",picture:{data:{url:"https://graph.facebook.com/100028444590540/picture?height=200&width=200"}}},{id:"__444",name:"Invitable2",first_name:"Invitable2",picture:{data:{url:"https://graph.facebook.com/100001008129789/picture?height=200&width=200"}}},{id:"__555",name:"Invitable3",first_name:"Invitable3",picture:{data:{url:"https://graph.facebook.com/100011706990070/picture?height=200&width=200"}}},{id:"__666",name:"Invitable4",first_name:"Invitable4",picture:{data:{url:"https://graph.facebook.com/100001575006940/picture?height=200&width=200"}}},{id:"__777",name:"Invitable5",first_name:"Invitable5",picture:{data:{url:"https://graph.facebook.com/100000318466656/picture?height=200&width=200"}}}])},500)},
cleverapps.FakeFacebook.prototype.api=function(e,t){switch(e){case"/me/?fields=is_eligible_promo":FB={ui:function(e,t){t({status:"completed"})}},t(cleverapps.Social.CODE_SUCCEED,{is_eligible_promo:1})}},cleverapps.FakeFacebook.prototype.aboutMe=function(e){setTimeout(function(){e({currency:{user_currency:"USD"},name:"FakeFB User",first_name:"FakeFB",picture:{data:{url:"https://graph.facebook.com/100001828353521/picture?height=200&width=200"}}})},500)},cleverapps.FakeFacebook.isAppropriate=function(){return!cc.sys.isNative&&cleverapps.isLocalhost()},cleverapps.FakeFacebook.FAKE_SESSION_TIMEOUT=cleverapps.parseInterval("10 minutes"),cleverapps.MobileFacebook=function(){this.constructor===cleverapps.MobileFacebook&&console.log("Choosing mobile-facebook (sdkbox)"),this.apiJobs=[],this.apiProcessing=!1,cleverapps.BaseFB.call(this)},cleverapps.MobileFacebook.prototype=Object.create(cleverapps.BaseFB.prototype),cleverapps.MobileFacebook.prototype.constructor=cleverapps.MobileFacebook,
cleverapps.MobileFacebook.prototype.init=function(e){sdkbox.PluginFacebook.init(),this.listeners={},sdkbox.PluginFacebook.setListener({onLogin:cleverapps.whenShow(this.onLogin.bind(this)),onFetchFriends:cleverapps.whenShow(this.onFetchFriends.bind(this)),onAPI:cleverapps.whenShow(this.onApi.bind(this)),onRequestInvitableFriends:cleverapps.whenShow(this.onRequestInvitableFriends.bind(this)),onInviteFriendsWithInviteIdsResult:cleverapps.whenShow(this.onInviteFriendsWithInviteIdsResult.bind(this)),onInviteFriendsResult:cleverapps.whenShow(this.onInviteFriendsResult.bind(this)),onSharedSuccess:cleverapps.whenShow(this.onShared.bind(this,cleverapps.Social.CODE_SUCCEED)),onSharedFailed:cleverapps.whenShow(function(e){this.onShared(cleverapps.Social.CODE_FAILED,e)}.bind(this)),onSharedCancel:cleverapps.whenShow(this.onShared.bind(this,cleverapps.Social.CODE_CANCELLED))}),e&&e(),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){this.deleteAllRequests()}.bind(this)),
this.deleteAllRequests()},cleverapps.MobileFacebook.prototype.onShared=function(e,t){cc.sys.os===cc.sys.OS_IOS&&2===e&&(e=cleverapps.Social.CODE_SUCCEED),e===cleverapps.Social.CODE_FAILED&&cleverapps.Notification.create("messages:ShareError"),this.listeners.onShared&&(this.listeners.onShared(e),delete this.listeners.onShared)},cleverapps.MobileFacebook.prototype.onLogin=function(e){this.listeners.onLogin&&(this.listeners.onLogin(e),delete this.listeners.onLogin)},cleverapps.MobileFacebook.prototype.onApi=function(e,t){this.listeners.onApi&&(t=decodeWebViewData(t),this.listeners.onApi(cleverapps.Social.CODE_SUCCEED,JSON.parse(t)),delete this.listeners.onApi),this.apiProcessing=!1,this.processApi()},cleverapps.MobileFacebook.prototype.onFetchFriends=function(e,t){if(this.listeners.onFetchFriends){if(e){t=decodeWebViewData(t);var s=JSON.parse(t);cc.sys.os===cc.sys.OS_IOS&&(s=s.data),this.listeners.onFetchFriends(cleverapps.Social.CODE_SUCCEED,s)}else this.listeners.onFetchFriends(
cleverapps.Social.CODE_FAILED,t);delete this.listeners.onFetchFriends}},cleverapps.MobileFacebook.prototype.onInviteFriendsWithInviteIdsResult=function(e,t){this.listeners.onInviteFriendsWithInviteIdsResult&&(this.listeners.onInviteFriendsWithInviteIdsResult(e,t),delete this.listeners.onInviteFriendsWithInviteIdsResult)},cleverapps.MobileFacebook.prototype.onRequestInvitableFriends=function(e){if(this.listeners.onRequestInvitableFriends){var t=decodeWebViewData(e.data);this.listeners.onRequestInvitableFriends(t),delete this.listeners.onRequestInvitableFriends}},cleverapps.MobileFacebook.prototype.onInviteFriendsResult=function(e,t){cleverapps.config.debugMode&&console.log("ON onInviteFriendsResult"),this.listeners.onInviteFriendsResult&&(this.listeners.onInviteFriendsResult(e,t),delete this.listeners.onInviteFriendsResult)},cleverapps.MobileFacebook.prototype.isLoggedIn=function(){return sdkbox.PluginFacebook.isLoggedIn()},cleverapps.MobileFacebook.prototype.getUserID=function(){
return sdkbox.PluginFacebook.getUserID()},cleverapps.MobileFacebook.prototype.getAccessToken=function(){return sdkbox.PluginFacebook.getAccessToken()},cleverapps.MobileFacebook.prototype.login=function(t,s){this.listeners.onLogin=function(e){e===cleverapps.Social.CODE_SUCCEED?(cleverapps.SocialManager.onLogin(),t()):(cleverapps.SocialManager.onFailedLogin(),s&&s())},sdkbox.PluginFacebook.login(cleverapps.BaseFB.PERMISSIONS)},cleverapps.MobileFacebook.prototype.inviteFriendsShare=function(e,t){cleverapps.Social.prototype.inviteFriendsShare.call(this,e,t)},cleverapps.MobileFacebook.prototype.request=function(e,t){t&&t(cleverapps.Social.CODE_SUCCEED)},cleverapps.MobileFacebook.prototype.getShareDialogData=function(e){return{type:"link",link:this.getShareDialogLink(e),title:e.name,text:e.description,image:cleverapps.config.deployment+e.picture}},cleverapps.MobileFacebook.prototype.shareDialog=function(e,t){this.listeners.onShared=t,sdkbox.PluginFacebook.dialog(this.getShareDialogData(e))},
cleverapps.MobileFacebook.prototype.api=function(e,t,s,n){if("function"==typeof(s=s||{})&&(n=s,s={}),!this.isLoggedIn())return console.log("Not logged in!"),void(n&&n(cleverapps.Social.CODE_CANCELLED));void 0===t?(t="GET",n=function(){}):"function"==typeof t&&(n=t,t="GET"),this.addApiJob(e,t,s,n),this.processApi()},cleverapps.MobileFacebook.prototype.addApiJob=function(e,t,s,n){this.apiJobs.push({apiMethod:e,httpMethod:t,params:s,callback:n})},cleverapps.MobileFacebook.prototype.processApi=function(){if(!this.apiProcessing&&0!==this.apiJobs.length){this.apiProcessing=!0;var e=this.apiJobs.shift();this.listeners.onApi=e.callback,sdkbox.PluginFacebook.api(e.apiMethod,e.httpMethod,e.params,"api")}},cleverapps.MobileFacebook.prototype.getCode=function(){return"facebook"},cleverapps.MobileFacebook.isAppropriate=function(){return cc.sys.isNative},cleverapps.override(cleverapps.MobileFacebook.prototype,NativeInvite),
cleverapps.MobileFacebook.APPINVITES_SDKBOX_ERROR="Unrecognized 'com.facebook.platform.protocol.PROTOCOL_ACTION' extra: 'com.facebook.platform.action.request.APPINVITES_DIALOG'.",cleverapps.AndroidWebViewFacebook=function(){console.log("Choosing android-facebook (webview)"),"undefined"==typeof sdkbox&&(sdkbox={}),sdkbox.PluginFacebook=FacebookPlugin,cleverapps.override(sdkbox.PluginFacebook,{setListener:function(){},init:function(){}}),cleverapps.MobileFacebook.call(this)},cleverapps.AndroidWebViewFacebook.prototype=Object.create(cleverapps.MobileFacebook.prototype),cleverapps.AndroidWebViewFacebook.prototype.constructor=cleverapps.AndroidWebViewFacebook,cleverapps.AndroidWebViewFacebook.prototype.init=function(e){cleverapps.MobileFacebook.prototype.init.apply(this,arguments)},cleverapps.AndroidWebViewFacebook.prototype.shareDialog=function(e,t){this.listeners.onShared=t,sdkbox.PluginFacebook.dialog(JSON.stringify(this.getShareDialogData(e)))},
cleverapps.AndroidWebViewFacebook.prototype.request=function(e,t){this.listeners.onRequest=t,sdkbox.PluginFacebook.inviteFriendsWithInviteIds(e.to?JSON.stringify(e.to):null,e.title,e.message)},cleverapps.AndroidWebViewFacebook.prototype.inviteFriendsShare=function(e,t){cleverapps.Social.prototype.inviteFriendsShare.call(this,e,t)},cleverapps.AndroidWebViewFacebook.prototype.onRequest=function(e){this.listeners.onRequest&&(this.listeners.onRequest(e),delete this.listeners.onRequest)},cleverapps.AndroidWebViewFacebook.prototype.addApiJob=function(e,t,s,n){cleverapps.MobileFacebook.prototype.addApiJob.call(this,e,t,JSON.stringify(s),n)},cleverapps.iOSWebViewFacebook=function(){console.log("Choosing ios-facebook (webview)"),"undefined"==typeof sdkbox&&(sdkbox={}),sdkbox.PluginFacebook={},cleverapps.override(sdkbox.PluginFacebook,{init:function(){webkitMessage("facebook",{action:"init"})},logPurchase:function(e,t){console.log("logPurchase success "+e+" "+t),webkitMessage("facebook",{
action:"logPurchase",amount:e,currency:t})},dialog:function(e){webkitMessage("facebook",{action:"dialog",jsonInfo:JSON.parse(e)})},login:function(e){webkitMessage("facebook",{action:"login",permissions:e})},logout:function(){webkitMessage("facebook",{action:"logout"})},setListener:function(){},isLoggedIn:function(){return console.log("isLoggedIn check"),void 0!==this.tokenString&&0<this.tokenString.length}.bind(this),getAccessToken:function(){return this.tokenString}.bind(this),getPermissionList:function(){return this.permissionList}.bind(this),getUserID:function(){return this.userID}.bind(this),getAppId:function(){return this.appId}.bind(this),getSDKVersion:function(){return this.sdkVersion}.bind(this),api:function(e,t,s,n){webkitMessage("facebook",{action:"api",path:e,method:t,paramsJson:JSON.parse(s),tag:n})},inviteFriendsWithInviteIds:function(e,t,s){webkitMessage("facebook",{action:"inviteFriendsWithInviteIds",inviteIdsJson:JSON.parse(e),title:t,text:s})},enableDebug:function(e){
webkitMessage("facebook",{action:"enableDebug",enable:e})}}),cleverapps.MobileFacebook.call(this)},cleverapps.iOSWebViewFacebook.prototype=Object.create(cleverapps.MobileFacebook.prototype),cleverapps.iOSWebViewFacebook.prototype.constructor=cleverapps.iOSWebViewFacebook,cleverapps.iOSWebViewFacebook.prototype.init=function(e){this.onInitListener=e,cleverapps.MobileFacebook.prototype.init.apply(this)},cleverapps.iOSWebViewFacebook.prototype.onInit=function(e){console.log("Init callback called: "+JSON.stringify(e)),this.tokenString=e.tokenString,this.permissionList=e.permissionList,this.userID=e.userID,this.sdkVersion=e.sdkVersion,this.onInitListener&&(this.onInitListener(),delete this.onInitListener)},cleverapps.iOSWebViewFacebook.prototype.onLogin=function(e,t){console.log("Login callback called: ",t),this.tokenString=t.tokenString,this.permissionList=t.permissionList,this.userID=t.userID,this.sdkVersion=t.sdkVersion,this.tokenString&&cleverapps.MobileFacebook.prototype.onLogin.call(
this,cleverapps.Social.CODE_SUCCEED,"success")},cleverapps.iOSWebViewFacebook.prototype.shareDialog=function(e,t){this.listeners.onShared=t,sdkbox.PluginFacebook.dialog(JSON.stringify(this.getShareDialogData(e)))},cleverapps.iOSWebViewFacebook.prototype.request=function(e,t){this.listeners.onRequest=t,sdkbox.PluginFacebook.inviteFriendsWithInviteIds(e.to?JSON.stringify(e.to):null,e.title,e.message)},cleverapps.iOSWebViewFacebook.prototype.inviteFriendsShare=function(e,t){cleverapps.Social.prototype.inviteFriendsShare.call(this,e,t)},cleverapps.iOSWebViewFacebook.prototype.onRequest=function(e){this.listeners.onRequest&&(this.listeners.onRequest(e),delete this.listeners.onRequest)},cleverapps.iOSWebViewFacebook.prototype.addApiJob=function(e,t,s,n){cleverapps.MobileFacebook.prototype.addApiJob.call(this,e,t,JSON.stringify(s),n)},cleverapps.SocialManager={create:function(){if(cleverapps.flags.nosocial)return new cleverapps.NoSocial;var e=cleverapps.User.calcSource();if(cc.sys.isNative
)return cleverapps.AndroidSocial.isAvailable()||cleverapps.AppleSocial.isAvailable()?new cleverapps.SelectSocial:cleverapps.SelectSocial.selectMobileFB();var t=cleverapps.isLocalhost()&&-1!==["instant","facebook"].indexOf(e)?{instant:cleverapps.FakeInstant,default:cleverapps.FakeFacebook}:{plinga:cleverapps.Plinga,instant:cleverapps.Instant,mobile_ok:cleverapps.MobileOK,web_ok:cleverapps.OK,mobile_mm:cleverapps.MobileMyMailRu,web_mm:cleverapps.MyMailRu,mobile_vk:cleverapps.MobileVk,web_vk:cleverapps.VK,sp_mbga:cleverapps.SPMobage,mbga:cleverapps.Mobage,nk:cleverapps.NK,draugiem:cleverapps.Draugiem,fotostrana:cleverapps.FotoStrana,xsolla:cleverapps.Xsolla,yandex:cleverapps.Yandex,default:cleverapps.Html5};return new(t[e]||t.default)},onFailedLogin:function(){cleverapps.Notification.create("messages:SocialManager.FailedLogging")},onLogin:function(){if(levels.user.haveTmpId()){var t=levels.user.id,e=cleverapps.social.getUserID();cleverapps.RestClient.post("/users/off/"+t,{newId:e},
function(e){console.log("Success marked off: "+t+", response "+JSON.stringify(e)),e&&e.signUp&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SIGN_UP,{method:cleverapps.social.getCode()})},function(){console.log("Failed marking off: "+t)}),levels.user.setId(e),cleverapps.synchronizer.reset(),cleverapps.info.onChangeUserId()}else levels.user.id!==cleverapps.social.getUserID()&&(console.log("second login!"),cc.sys.isNative?levels.user.setId(cleverapps.social.getUserID()):(cleverapps.DataLoader.cleanAll(),window.location.reload()));cleverapps.DataLoader.processSaveQueue(),cleverapps.social.deleteAllRequests(),cleverapps.synchronizer.syncWhenReady(),cleverapps.whenAllInitialized(this.onLoginRefreshes.bind(this))},onLoginRefreshes:function(){-1===["mobile_vk","web_vk","plinga"].indexOf(cleverapps.User.calcSource())&&cleverapps.Notification.create("messages:SocialManager.Connected"),cleverapps.social.aboutMe(this.onLoadUserInfo.bind(this)),cleverapps.localPushes.initSender(),
cleverapps.user.calcIdfa(),cleverapps.friends.reload(),cleverapps.invitalbleFriends.reload()},onLoadUserInfo:function(s){if(cleverapps.friends.updatePlayerInfo(s),s.currency&&s.currency.user_currency){var e=s.currency.user_currency,t={USD:"$",EUR:"€",GBP:"£"};t[e]&&(Product.CURRENCY=t[e],Product.CURRENCY_CODE=e)}if(s.first_name&&!cleverapps.flags.nologin&&setTimeout(function(){var e=void 0,t=cleverapps.friends.getPlayer();t.avatar&&t.avatar!==FriendsCache.DEFAULT_PLAYER_INFO().avatar&&((e=new cleverapps.UI.Avatar(t)).width&&e.height||(e=void 0)),cleverapps.Notification.create("messages:SocialManager.Welcome",{toReplace:{userName:s.first_name},image:e})},1e3),s.name){var n=s.name.substr(0,50);cleverapps.info.setKeyValue("name",n)}s.picture&&s.picture.data&&s.picture.data.url&&cleverapps.info.setKeyValue("avatar",s.picture.data.url),cleverapps.periodicBonus&&cleverapps.periodicBonus.refreshItems()}},cleverapps.NK=function(){console.log("Choosing html5-nk"),cleverapps.Social.call(this)},
cleverapps.NK.prototype=Object.create(cleverapps.Social.prototype),cleverapps.NK.prototype.constructor=cleverapps.NK,cleverapps.NK.prototype.getLocalStoragePreffix=function(){return"_NK"},cleverapps.NK.prototype.init=function(n){cleverapps.once(function(){NKOverrideRest();var e=opensocial.newDataRequest();e.add(e.newFetchPersonRequest(opensocial.IdSpec.PersonId.VIEWER),"request_id"),e.send(function(e){if(e.hadError());else{var t=e.get("request_id");if(t.hadError());else{var s=t.getData();this.user=cleverapps.NK.formatUserData(s),console.log(this.user),n()}}}.bind(this))}.bind(this))()},cleverapps.NK.prototype.isLoggedIn=function(){return!0},cleverapps.NK.prototype.getUserID=function(){return this.user.id},cleverapps.NK.prototype.getAccessToken=function(){return"NK"},cleverapps.NK.prototype.login=function(e){e()},cleverapps.NK.prototype.inviteFriends=function(e,t){FullscreenControlButton.exitFullscreen(function(){nk.requestInviteFriends(e.message,{},function(e){e.hadError()?t(
cleverapps.Social.CODE_CANCELLED,e):t(cleverapps.Social.CODE_SUCCEED)})})},cleverapps.NK.prototype.listFriendsByApp=function(e,s){var t=opensocial.newDataRequest();t.add(t.newFetchPersonRequest(opensocial.IdSpec.PersonId.VIEWER),"request_id");var n=opensocial.newIdSpec({userId:"VIEWER",groupId:"FRIENDS"});t.add(t.newFetchPeopleRequest(n,{max:1e3}),"another_id"),t.send(function(e){if(e.hadError())s(cleverapps.Social.CODE_FAILED);else{var t=e.get("another_id").getData().asArray();s(cleverapps.Social.CODE_SUCCEED,t.map(cleverapps.NK.formatUserData))}})},cleverapps.NK.formatUserData=function(e){return{id:cleverapps.Social.prepareId(e.getId()),name:e.getDisplayName(),first_name:e.getDisplayName(),picture:{data:{url:e.getField(opensocial.Person.Field.THUMBNAIL_URL)}}}},cleverapps.NK.prototype.aboutMe=function(e){e(this.user)},cleverapps.NK.prototype.requestToOne=function(e,t,s){var n={title:t.title,type:"notification"},i=opensocial.newMessage(t.message,n)
;FullscreenControlButton.exitFullscreen(function(){opensocial.requestSendMessage([e],i,function(e){e.hadError()?(console.log("error",e),s(cleverapps.Social.CODE_FAILED)):(console.log("ok",e),s(cleverapps.Social.CODE_SUCCEED))})})},cleverapps.NK.prototype.request=function(e,s){var n=e.to;Array.isArray(n)||(n=[n]);var i=[],o=function(t){t===n.length?s(0<i.length?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED,i):this.requestToOne(n[t],e,function(e){e===cleverapps.Social.CODE_SUCCEED&&i.push(n[t]),setTimeout(function(){o(t+1)},500)})}.bind(this);o(0)},cleverapps.NK.prototype.shareDialog=function(e,t){var s=cleverapps.config.deployment+e.picture;0<=s.indexOf("?")&&(s=s.substr(0,s.indexOf("?")));var n=opensocial.newMediaItem("image",s);n.setField(opensocial.MediaItem.Field.TYPE,opensocial.MediaItem.Type.IMAGE);var i={};i[opensocial.Activity.Field.TITLE]=e.name,i[opensocial.Activity.Field.MEDIA_ITEMS]=[n];var o=opensocial.newActivity(i);FullscreenControlButton.exitFullscreen(
function(){opensocial.requestCreateActivity(o,opensocial.CreateActivityPriority.HIGH,function(e){e.hadError()?(console.log("Share failed",e),t(cleverapps.Social.CODE_FAILED,e)):(console.log("Share ok"),t(cleverapps.Social.CODE_SUCCEED))})})},cleverapps.NK.prototype.joinGroup=function(s){var t=function(t){var e=opensocial.newDataRequest();e.add(nk.groups.newIsUserInAppGroupRequest(),"isInGroup"),e.send(function(e){e.hadError()?s(cleverapps.Social.CODE_FAILED):e.get("isInGroup").getData()?s(cleverapps.Social.CODE_SUCCEED):t?t():s(cleverapps.Social.CODE_FAILED)})},e=function(){nk.groups.requestAddUserToAppGroup(function(e){e.hadError()&&s(cleverapps.Social.CODE_FAILED),t()})};FullscreenControlButton.exitFullscreen(function(){t(e)})},cleverapps.NK.prototype.listFriends=function(e){this.listFriendsByApp(!0,e)},cleverapps.NK.prototype.listInvitableFriends=function(e){e(cleverapps.Social.CODE_SUCCEED,[])},cleverapps.NK.isAppropriate=function(){
return!cc.sys.isNative&&"nk"===cleverapps.User.calcSource()},cleverapps.NK.prototype.getDefaultLanguages=function(){return[cc.sys.LANGUAGE_POLISH]},cleverapps.FotoStrana=function(){console.log("Choosing fotostrana"),cleverapps.Social.call(this)},cleverapps.FotoStrana.prototype=Object.create(cleverapps.Social.prototype),cleverapps.FotoStrana.prototype.constructor=cleverapps.FotoStrana,cleverapps.FotoStrana.prototype.getLocalStoragePreffix=function(){return"_FS"},cleverapps.FotoStrana.prototype.init=function(e){var t=cleverapps.once(function(){e()}.bind(this)),s=function(e){t(),"timeout"===e?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_TIMEOUT):cleverapps.eventLogger.logEvent(cleverapps.EVENTS.FAKEFB_BY_SCRIPT_ERROR)}.bind(this),n=function(){window.FSClient=new fsapi(cleverapps.config.fotostrana.appId,cleverapps.config.fotostrana.privateKey),FSClient.init(function(){console.log("API Error!")}),t()}.bind(this);cleverapps.loadSdk(cleverapps.getRequestParameters().fsapi,{
onSuccess:n,onFailure:s})},cleverapps.FotoStrana.prototype.isLoggedIn=function(){return!0},cleverapps.FotoStrana.prototype.fromSocialUserId=function(e){return"FS_"+e},cleverapps.FotoStrana.prototype.toSocialUserId=function(e){return e.substr(3)},cleverapps.FotoStrana.prototype.getUserID=function(){return this.fromSocialUserId(cleverapps.getRequestParameters().viewerId)},cleverapps.FotoStrana.prototype.getAccessToken=function(){return"FS_"+cleverapps.getRequestParameters().authKey},cleverapps.FotoStrana.prototype.login=function(e){e()},cleverapps.FotoStrana.prototype.inviteFriends=function(e,t){FullscreenControlButton.exitFullscreen(function(){FSClient.event("invite",function(e){t(e.send?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)})})},cleverapps.FotoStrana.prototype.request=function(e,t){"object"!=typeof e.to&&(e.to=[e.to]);var s=[];e.to.forEach(function(e){s.push(this.toSocialUserId(e))}.bind(this)),FullscreenControlButton.exitFullscreen(function(){FSClient.event(
"sendMessageAndInvite",function(e){t(e.messSent||e.invSent?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)},{message:e.message,customIds:s.join(",")})})},cleverapps.FotoStrana.prototype.shareDialog=function(e,t){var s=cleverapps.config.deployment+e.picture;0<=s.indexOf("?")&&(s=s.substr(0,s.indexOf("?"))),FullscreenControlButton.exitFullscreen(function(){FSClient.event("postUserEventOnWall",function(e){t("success"===e.result?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)},{title:e.title,text:e.description,imgUrl:s})})},cleverapps.FotoStrana.prototype.loadUsersData=function(e,n){e&&e.length?FSClient.api("User.getProfiles",{userIds:e.join(","),fields:"user_name, user_lastname, photo_small"},function(e){var t=[];if(e.response){for(var s in e.response)t.push(this.formatUserData(e.response[s]));n(cleverapps.Social.CODE_SUCCEED,t)}else n(cleverapps.Social.CODE_FAILED,t)}.bind(this)):n(cleverapps.Social.CODE_CANCELLED,[])},
cleverapps.FotoStrana.prototype.listFriends=function(t){FSClient.api("User.getAppFriends",{appId:cleverapps.config.fotostrana.appId,limit:500},function(e){this.loadUsersData(e.response,t)}.bind(this))},cleverapps.FotoStrana.prototype.listInvitableFriends=function(s){FSClient.api("User.getFriends",{limit:200},function(e){if(e.response&&e.response.length){var t=e.response;FSClient.api("User.getAppFriends",{appId:cleverapps.config.fotostrana.appId,limit:500},function(e){e.response&&e.response.length&&(t=cleverapps.substract(t,e.response)),this.loadUsersData(t,s)}.bind(this))}}.bind(this))},cleverapps.FotoStrana.prototype.formatUserData=function(e){return{id:this.fromSocialUserId(e.user_id),name:e.user_name+" "+e.user_lastname,first_name:e.user_name,picture:{data:{url:e.photo_small}}}},cleverapps.FotoStrana.prototype.aboutMe=function(s){this.loadUsersData([this.toSocialUserId(this.getUserID())],function(e,t){e===cleverapps.Social.CODE_SUCCEED&&t.length&&s(t[0])})},
cleverapps.FotoStrana.prototype.logEvent=function(e,t){},cleverapps.FotoStrana.prototype.getDefaultLanguages=function(){return[cc.sys.LANGUAGE_RUSSIAN]},cleverapps.FotoStrana.isAppropriate=function(){return!cc.sys.isNative&&"fotostrana"===cleverapps.User.calcSource()},cleverapps.Plinga=function(){console.log("Choosing Plinga"),cleverapps.Social.call(this),this.eventListener=function(){},(cleverapps.isLocalhost()||cleverapps.isStagingHost())&&cleverapps.extend(this,cleverapps.FakePlinga)},cleverapps.Plinga.prototype=Object.create(cleverapps.Social.prototype),cleverapps.Plinga.prototype.constructor=cleverapps.Plinga,cleverapps.Plinga.prototype.init=function(e){window.GD_OPTIONS={gameId:cleverapps.config.plinga.appId,onEvent:function(e){switch(console.log("plinga event",JSON.stringify(e)),e.name){case"SDK_GAME_START":cc.director.resume();break;case"SDK_GAME_PAUSE":cc.director.pause()}this.eventListener(e)}.bind(this)};cleverapps.loadSdk("patch/js/gd-main.js",{
onSuccess:e,onFailure:function(){cleverapps.eventLogger.logEvent("plinga_init_error"),e()},crossorigin:!0})},cleverapps.Plinga.isAppropriate=function(){return!cc.sys.isNative&&"plinga"===cleverapps.User.calcSource()},cleverapps.Plinga.prototype.getLocalStoragePreffix=function(){return"_plinga"},cleverapps.FakePlinga={init:function(e){e()}},cleverapps.NoSocial=function(){console.log("Choosing without Social"),cleverapps.Social.call(this)},cleverapps.NoSocial.prototype=Object.create(cleverapps.Social.prototype),cleverapps.NoSocial.prototype.constructor=cleverapps.NoSocial,cleverapps.NoSocial.prototype.init=function(e){e()},cleverapps.NoSocial.isAppropriate=function(){return cleverapps.flags.nosocial},cleverapps.NoSocial.prototype.getLocalStoragePreffix=function(){return"_nosocial"};var NKOverrideRest=function(){var d=cleverapps.RestClient.send;cleverapps.RestClient.send=function(e,t,s,n,i,o){if(-1!==t.indexOf("newsync"))return a=cleverapps.RestClient.getBase(
)+cleverapps.config.restApiURL+t,r=s,l=n,c=i,(p={})[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.PUT,p[gadgets.io.RequestParameters.AUTHORIZATION]=gadgets.io.AuthorizationType.SIGNED,p[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.JSON,p[gadgets.io.RequestParameters.POST_DATA]=JSON.stringify(r),p[gadgets.io.RequestParameters.HEADERS]={"Content-Type":"application/json"},void gadgets.io.makeRequest(a,function(e){if(e.text){var t=gadgets.json.parse(e.text);void 0!==t.error?c(t.error):l(t)}else c(e)},p);var a,r,l,c,p;d(e,t,s,n,i,o)}};if(cleverapps.Draugiem=function(){console.log("Choosing html5-draugiem"),cleverapps.Social.call(this)},cleverapps.Draugiem.prototype=Object.create(cleverapps.Social.prototype),cleverapps.Draugiem.prototype.constructor=cleverapps.Draugiem,cleverapps.Draugiem.prototype.getLocalStoragePreffix=function(){return"_draugiem"},cleverapps.Draugiem.prototype.api=function(e,t,s){t.action=e,this.accessToken&&(t.apikey=this.accessToken),
cleverapps.RestClient.post("/draugiem",t,function(e){e.error?(console.log("Error response: ",e),s(cleverapps.Social.CODE_FAILED,e)):(console.log("Success api response: ",e),s(cleverapps.Social.CODE_SUCCEED,e))})},cleverapps.Draugiem.prototype.init=function(a){var e=function(){draugiem_callback_url=cleverapps.config.deployment+"/cleverapps/res/callback-e75ca99e40-e75ca99e40.html",draugiem_domain="www.draugiem.lv";var i=function(e){this.accessToken=e,cleverapps.setUrlHash({saved_token:e}),this.api("userdata",{},function(e,t){this.user=cleverapps.Draugiem.formatUserData(cleverapps.values(t.users)[0]),a()}.bind(this))}.bind(this),o=cleverapps.getRequestParameters().dr_auth_code,e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.DRAUGIEM_AUTH_DATA);e&&e.code===o?i(e.token):this.api("authorize",{code:o},function(e,t){if(t&&!t.error&&t.apikey)this.accessToken=t.apikey,this.user=cleverapps.Draugiem.formatUserData(t.users[t.uid]),cleverapps.DataLoader.save(
cleverapps.DataLoaderTypes.DRAUGIEM_AUTH_DATA,{code:o,token:this.accessToken}),cleverapps.setUrlHash({saved_token:this.accessToken});else{if(t&&t.error&&106===t.error.code){var s=cleverapps.getRequestParameters(window.location.hash).saved_token;if(s)return void i(s)}var n=JSON.stringify({arguments:arguments,auth_code:o});cleverapps.throwAsync("draugiem authorize empty result "+n),this.user=cleverapps.Draugiem.formatUserData({uid:"1"})}a()}.bind(this))}.bind(this);cleverapps.loadSdk("//draugiem.lv/applications/external/draugiem.js",{onSuccess:e,onFailure:function(){console.log("Failed to load draugiem.js api")}})},cleverapps.Draugiem.prototype.isLoggedIn=function(){return!0},cleverapps.Draugiem.prototype.getUserID=function(){return this.user.id},cleverapps.Draugiem.prototype.getAccessToken=function(){return"DRG_"+this.accessToken},cleverapps.Draugiem.prototype.login=function(e){e()},cleverapps.Draugiem.prototype.sendActivity=function(e,t){if(!(this.lastActivitySent&&Date.now(
)-this.lastActivitySent<cleverapps.parseInterval("1 day"))){var s=cleverapps.Social.ACTIVITIES_CONFIG[e];if(s.probability>Math.random()){var n=cleverapps.Random.mathChoose(s.messages),i={prefix:Messages.get(n.title),text:Messages.get(n.body,t),link:cleverapps.config.deployment};cleverapps.social.api("add_activity",i,function(e,t){t&&"OK"===t.status&&(this.lastActivitySent=Date.now())}.bind(this))}}},cleverapps.Draugiem.prototype.inviteFriends=function(e,t){draugiemSendInvite(e.message,"",function(e){t(e?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)})},cleverapps.Draugiem.prototype.requestToOne=function(s,n,i){FullscreenControlButton.exitFullscreen(function(){var e=cleverapps.config.draugiem.url,t=n.message+"\n"+e;draugiemSendMessage(s,n.title,t,function(e){i(e?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_FAILED)})})},cleverapps.Draugiem.prototype.request=function(e,s){var n=e.to;Array.isArray(n)||(n=[n]);var i=[],o=function(t){t===n.length?s(
0<i.length?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED,i):this.requestToOne(n[t],e,function(e){e===cleverapps.Social.CODE_SUCCEED&&i.push(n[t]),setTimeout(function(){o(t+1)},500)})}.bind(this);o(0)},cleverapps.Draugiem.prototype.shareDialog=function(t,s){FullscreenControlButton.exitFullscreen(function(){var e=cleverapps.config.draugiem.url;draugiemSay(t.name,e,Messages.get("PlayNow"),t.description,function(e){s(e?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_FAILED)})})},cleverapps.Draugiem.prototype.listFriendsByApp=function(e,t){},cleverapps.Draugiem.prototype.listFriends=function(n){this.api("app_friends",{},function(e,t){if(e===cleverapps.Social.CODE_SUCCEED){var s=[];0<t.total&&(s=cleverapps.values(t.users).map(cleverapps.Draugiem.formatUserData)),n(cleverapps.Social.CODE_SUCCEED,s)}else n(cleverapps.Social.CODE_FAILED)}.bind(this))},cleverapps.Draugiem.prototype.listInvitableFriends=function(e){e()},cleverapps.Draugiem.formatUserData=function(e){
return{id:""+e.uid,name:e.surname+" "+e.name,first_name:e.name,picture:{data:{url:e.img}}}},cleverapps.Draugiem.prototype.aboutMe=function(e){e(this.user)},cleverapps.Draugiem.prototype.logEvent=function(e,t){},cleverapps.Draugiem.prototype.getDefaultLanguages=function(){return[cc.sys.LANGUAGE_LATVIAN,cc.sys.LANGUAGE_RUSSIAN]},cleverapps.Draugiem.isAppropriate=function(){return!cc.sys.isNative&&"draugiem"===cleverapps.User.calcSource()},cc.sys.LANGUAGE_LATVIAN="lv",cleverapps.Yandex=function(){console.log("Choosing html5-yandex"),cleverapps.Social.call(this),this.ysdk=cleverapps.FakeYandex,this.canReviewGame=!1},cleverapps.Yandex.prototype=Object.create(cleverapps.Social.prototype),cleverapps.Yandex.prototype.constructor=cleverapps.Yandex,cleverapps.Yandex.prototype.getLocalStoragePreffix=function(){return"_yandex"},cleverapps.Yandex.prototype.init=function(t){var e=0,s=cleverapps.once(function(){0<--e||YaGames.init().then(function(e){this.ysdk=e,this.initPlayer(t).catch(function(e){
console.log("No user init"),t()})}.bind(this))}.bind(this));"undefined"==typeof Promise&&(e++,cleverapps.loadSdk("//cdn.jsdelivr.net/bluebird/latest/bluebird.core.min.js",{onSuccess:s,onFailure:function(){console.log("Failed to load bluebird")}})),cleverapps.loadSdk("//yandex.ru/games/sdk/v2",{onSuccess:s,onFailure:function(){console.log("Failed to load yandex sdk")}})},cleverapps.Yandex.prototype.initPlayer=function(t){return this.ysdk.getPlayer({signed:!0}).then(function(e){this.user=cleverapps.Yandex.formatUserData(e),this.accessToken=e.signature.replace(/\//g,"{~}"),this.ysdk.feedback.canReview().then(function(e){this.canReviewGame=e.value}.bind(this)),console.log(this.user),t()}.bind(this))},cleverapps.Yandex.prototype.login=function(e,t){this.ysdk.auth.openAuthDialog().then(function(){this.initPlayer(function(){cleverapps.SocialManager.onLogin(),e()}).catch(function(e){t()})}.bind(this)).catch(function(){t()})},cleverapps.Yandex.prototype.isLoggedIn=function(){return!!this.user},
cleverapps.Yandex.prototype.getUserID=function(){return this.user?this.user.id:void 0},cleverapps.Yandex.prototype.getAccessToken=function(){return"YA_"+(this.accessToken||0)},cleverapps.Yandex.prototype.canReview=function(){return this.canReviewGame},cleverapps.Yandex.prototype.requestReview=function(t){this.ysdk.feedback.requestReview().then(function(e){t&&t(e.feedbackSent)})},cleverapps.Yandex.prototype.getDefaultLanguages=function(){var t=[cc.sys.LANGUAGE_RUSSIAN];return cleverapps.Settings.getAvailableLanguages().forEach(function(e){this.ysdk.environment.i18n&&this.ysdk.environment.i18n.lang===e&&t.unshift(e)}.bind(this)),t},cleverapps.Yandex.prototype.needWindowForLogin=function(){return!0},cleverapps.Yandex.prototype.aboutMe=function(e){this.user&&e(this.user)},cleverapps.Yandex.formatUserData=function(e){return{id:cleverapps.Yandex.prepareUserId(e.getUniqueID()),name:e.getName(),first_name:e.getName(),picture:{data:{url:e.getPhoto("small")}}}},
cleverapps.Yandex.prepareUserId=function(e){return e.replace(/\//g,"~")},cleverapps.Yandex.isAppropriate=function(){return"yandex"===cleverapps.User.calcSource()},cleverapps.FakeYandex={environment:{},getPlayer:function(){return new Promise(function(){})}},cleverapps.Payments=function(){this.oncePaymentFinished=void 0,this.clientCompensateProducts=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.CLIENT_COMPENSATE_PRODUCTS)||[]},cleverapps.Payments.prototype.needSocialCheckConnection=function(){return!0},cleverapps.Payments.prototype.onPaymentFinished=function(){if(this.oncePaymentFinished){var e=this.oncePaymentFinished;delete this.oncePaymentFinished,e()}},cleverapps.Payments.prototype.addClientCompensateProduct=function(e){this.clientCompensateProducts.push(e),this._saveClientCompensateProducts()},cleverapps.Payments.prototype.getClientCompensateProduct=function(){if(this.existClientCompensateProduct())return this.clientCompensateProducts[0]},
cleverapps.Payments.prototype._saveClientCompensateProducts=function(){this.clientCompensateProducts.length?cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.CLIENT_COMPENSATE_PRODUCTS,this.clientCompensateProducts):cleverapps.DataLoader.remove(cleverapps.DataLoaderTypes.CLIENT_COMPENSATE_PRODUCTS)},cleverapps.Payments.prototype.processClientCompensateProduct=function(e){for(var t=0;t<this.clientCompensateProducts.length;t++)if(this.clientCompensateProducts[t]===e)return this.clientCompensateProducts.splice(t,1),void this._saveClientCompensateProducts()},cleverapps.Payments.prototype.existClientCompensateProduct=function(){return this.clientCompensateProducts.length},cleverapps.Payments.prototype.isProductsExists=function(e){return e.length===e.filter(function(e){return this.isProductExists(e)}.bind(this)).length},cleverapps.Payments.prototype.isProductExists=function(e){return cleverapps.config.products[e]},cleverapps.CompensatePayments=function(){cleverapps.Payments.call(this),
this.compensateProductCode=void 0},cleverapps.CompensatePayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.CompensatePayments.prototype.constructor=cleverapps.CompensatePayments,cleverapps.CompensatePayments.prototype.getMobile=function(){return 0},cleverapps.CompensatePayments.prototype.getBasePath=function(){return""},cleverapps.CompensatePayments.prototype.canCompensate=function(){return!1},cleverapps.CompensatePayments.prototype.stopCheckPayments=function(){this.checkPaymentTimeout&&(clearTimeout(this.checkPaymentTimeout),this.checkPaymentTimeout=void 0)},cleverapps.CompensatePayments.prototype.runCheckPayments=function(){var e=[].concat(cleverapps.CompensatePayments.CHECK_TIMEOUTS),t=function(){this.stopCheckPayments(),e.length<cleverapps.CompensatePayments.CHECK_TIMEOUTS.length&&this.checkPayment(),0<e.length&&(this.checkPaymentTimeout=setTimeout(t,cleverapps.parseInterval(e.shift())))}.bind(this);t()},
cleverapps.CompensatePayments.prototype.callPaymentCallback=function(e){this.paymentCallback&&(this.paymentCallback(cleverapps.Social.CODE_SUCCEED,e),this.paymentCallback=void 0)},cleverapps.CompensatePayments.prototype.checkPayment=function(){var e="/"+this.getBasePath()+"/check/"+this.getMobile()+"/"+levels.user.id;"subscription"===this.productType&&(e="/"+this.getBasePath()+"/checksubscription/"+levels.user.id);var t=function(e){"ok"===e&&(this.stopCheckPayments(),this.callPaymentCallback())}.bind(this);cleverapps.RestClient.get(e,{},t)},cleverapps.CompensatePayments.prototype.compensate=function(){if(!this.checkPaymentTimeout&&!this.compensateProductCode){var e="/"+this.getBasePath()+"/compensate/"+levels.user.id;cleverapps.RestClient.get(e,{},function(e){"none"!==e&&(this.compensateProductCode=e)}.bind(this))}},cleverapps.CompensatePayments.prototype.validateByPath=function(t,e){if(!cleverapps.config.debugMode||!cleverapps.Tool.compensateCheck){t=cleverapps.once(t||function(){})
;var s=[].concat(cleverapps.CompensatePayments.VALIDATE_TIMEOUTS),n=void 0,i=function(){cleverapps.RestClient.get(e,{},function(e){"ok"===e&&(t(),clearTimeout(n))}),0<s.length&&(n=setTimeout(i,cleverapps.parseInterval(s.shift())))};i()}},cleverapps.CompensatePayments.prototype.open=function(e,t){},cleverapps.CompensatePayments.prototype.isAvailable=function(){return!0},cleverapps.CompensatePayments.prototype.logPurchase=function(e){},cleverapps.CompensatePayments.prototype.compensateValidate=function(e){this.getBasePath()?this.validateByPath(e,"/"+this.getBasePath()+"/compensatevalidate/"+levels.user.id):e()},cleverapps.CompensatePayments.prototype.validate=function(e,t){this.getBasePath()?this.validateByPath(t,"/"+this.getBasePath()+"/validate/"+this.getMobile()+"/"+levels.user.id):t()},cleverapps.CompensatePayments.prototype.setPaymentChecked=function(){this.getBasePath()&&this.validateByPath(function(){},"/"+this.getBasePath()+"/check/"+this.getMobile()+"/"+levels.user.id)},
cleverapps.CompensatePayments.CHECK_TIMEOUTS=["1 second","1 second","3 seconds","5 seconds","5 seconds","5 seconds","10 seconds","10 seconds","20 seconds","20 seconds","20 seconds","20 seconds","1 minute","1 minute","3 minutes","5 minutes","5 minutes"],cleverapps.CompensatePayments.VALIDATE_TIMEOUTS=["5 seconds","10 seconds","15 seconds","30 seconds","30 seconds","30 seconds","1 minute","1 minute","1 minute","5 minutes","5 minutes","5 minutes"],cleverapps.FakePayments=function(){cleverapps.Payments.call(this)},cleverapps.FakePayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.FakePayments.prototype.constructor=cleverapps.FakePayments,cleverapps.FakePayments.prototype.open=function(e,t){setTimeout(function(){confirm(Messages.get("FakePayments.Buying")+" "+e.title+" for "+e.price)?setTimeout(function(){t(cleverapps.Social.CODE_SUCCEED)},cleverapps.FakePayments.PROCESS_TIMEOUT):setTimeout(function(){console.log(Messages.get("FakePayments.Cancelled")),t(
cleverapps.Social.CODE_CANCELLED)},cleverapps.FakePayments.PROCESS_TIMEOUT)},1e3)},cleverapps.FakePayments.prototype.isAvailable=function(){return!0},cleverapps.FakePayments.isAppropriate=function(){return!!cleverapps.isLocalhost()},cleverapps.FakePayments.prototype.validate=function(e,t){t&&t()},cleverapps.FakePayments.prototype.logPurchase=function(e){},cleverapps.FakePayments.prototype.restore=function(e){setTimeout(function(){e&&e(!0)},1e3)},cleverapps.FakePayments.PROCESS_TIMEOUT=0,cleverapps.InstantPayments=function(){cleverapps.Payments.call(this),this.ready=!1,this.consumed={},this.load(),cleverapps.social.whenInitialized("instantpayments",function(){var e=FBInstant.getSupportedAPIs();console.log("Searching payments.purchaseAsync",e),-1!==e.indexOf("payments.purchaseAsync")&&(console.log("Found payments.purchaseAsync support!"),FBInstant.payments.onReady(function(){console.log("Payments ready!"),this.ready=!0,this.loadProducts(),cleverapps.flags.update(),cleverapps.values(
this.onAvailableListeners).forEach(cleverapps.callFunc)}.bind(this)))}.bind(this)),this.onAvailableListeners={}},cleverapps.InstantPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.InstantPayments.prototype.constructor=cleverapps.InstantPayments,cleverapps.InstantPayments.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.INSTANT_PAYMENTS);e&&e.consumed&&(this.consumed=e.consumed)},cleverapps.InstantPayments.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.INSTANT_PAYMENTS,{consumed:this.consumed})},cleverapps.InstantPayments.prototype.open=function(s,n){if(this.isAvailable()){var e=function(e){console.log("success purchase",e),s.signedRequest=e.signedRequest,cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_PAYMENT+"ok"),n(cleverapps.Social.CODE_SUCCEED,s),this.consumePurchase(e)}.bind(this),t=function(e){console.log("error purchase",e);var t=cleverapps.Social.CODE_FAILED
;e&&"USER_INPUT"===e.code&&(t=cleverapps.Social.CODE_CANCELLED),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_PAYMENT+(t===cleverapps.Social.CODE_CANCELLED?"cancel":"error")),n(t,s)}.bind(this);FBInstant.payments.purchaseAsync({productID:s.id.instant}).then(e).catch(t)}else n(cleverapps.Social.CODE_FAILED,s,"messages:InstantPayments.NotAvailable")},cleverapps.InstantPayments.prototype.logPayment=function(e){var t="ok";e&&(t="error"),e&&"USER_INPUT"===e.code&&(t="canceled"),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_PAYMENT+t)},cleverapps.InstantPayments.prototype.isAvailable=function(){return-1!==["1832499670188919","1887333567973110","1920167364724450","2076714912381045","2585442014807608"].indexOf(cleverapps.user.id)||this.ready},cleverapps.InstantPayments.isAppropriate=function(){return cleverapps.isInstant()},cleverapps.InstantPayments.prototype.getProductByInstantId=function(e){for(var t in cleverapps.config.products){var s=cleverapps.config.products[t]
;if(e===s.id.instant)return s}},cleverapps.InstantPayments.prototype.loadProducts=function(){FBInstant.payments.getCatalogAsync().then(function(e){console.log(e),e.forEach(function(e){var t=this.getProductByInstantId(e.productID);t&&(t.loadedPrice=e.price)},this)}.bind(this))},cleverapps.InstantPayments.prototype.consumePurchase=function(e){var t=this.getProductByInstantId(e.productID),s={userId:cleverapps.user.id,purchase:e,productCode:e.productID,status:""};t&&(s.price=t.price,s.textPrice=t.loadedPrice,s.productCode=t.key),cleverapps.RestClient.post("/instantpayments/addpayment/",s);FBInstant.payments.consumePurchaseAsync(e.purchaseToken).then(function(){console.log("consume success",e),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_CONSUME+"ok"),s.status="consumed",cleverapps.RestClient.post("/instantpayments/addpayment/",s)}).catch(function(e){console.log("consume error",e),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.INSTANT_CONSUME+"error"),s.error=e,
s.status="consume_error",cleverapps.RestClient.post("/instantpayments/addpayment/",s)}),this.consumed[e.paymentID]=!0,this.save()},cleverapps.InstantPayments.prototype.validate=function(e,t,s){var n={signedRequest:e.signedRequest,userId:cleverapps.user.id};cleverapps.RestClient.post("/instantpayments/validate/",n,function(e){"ok"===e?(t(),console.log("Purchase validation success")):(s&&s(),console.log("Purchase validation error",e))})},cleverapps.InstantPayments.prototype.canCompensate=function(){return!0},cleverapps.InstantPayments.prototype.compensate=function(){if(!this.compensateProductCode&&!this.compensateRunning){this.compensateRunning=!0;var e=function(e){if(0!==(e=e.filter(function(e){var t=!this.consumed[e.paymentID]&&this.getProductByInstantId(e.productID);return t||this.consumePurchase(e),t},this)).length){var t=e[0];console.log("compensate validate purchase",t);var s=function(){console.log("compensate validate purchase success"),this.compensateRunning=!1,
this.compensatePurchase=t,this.compensateProductCode=this.getProductByInstantId(t.productID).key}.bind(this),n=function(){console.log("compensate validate purchase error"),this.compensateRunning=!1,this.consumed[t.paymentID]=!0,this.save()}.bind(this);this.validate(t,s,n)}else this.compensateRunning=!1}.bind(this),t=function(e){this.compensateRunning=!1,console.log("error getPurchasesAsync",e)}.bind(this);FBInstant.payments.getPurchasesAsync().then(e).catch(t)}},cleverapps.InstantPayments.prototype.compensateValidate=function(e){var t=this.compensatePurchase;t&&(delete this.compensatePurchase,e(),this.consumePurchase(t))},cleverapps.InstantPayments.prototype.logPurchase=function(e){},cleverapps.MobagePayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=cleverapps.MobagePayments.calcLoadedPrice(t.price)}},cleverapps.MobagePayments.prototype=Object.create(cleverapps.Payments.prototype),
cleverapps.MobagePayments.prototype.constructor=cleverapps.MobagePayments,cleverapps.MobagePayments.prototype.calcLoadedPrice=function(e){return cleverapps.MobagePayments.calcLoadedPrice(e)},cleverapps.MobagePayments.calcLoadedPrice=function(e){var t=100;return-1!==cleverapps.MobagePayments.TESTER_IDS.indexOf(cleverapps.user.id)&&(t=1),cleverapps.formatAmount(Math.ceil(e*t))+" MC"},cleverapps.MobagePayments.prototype.getSKU=function(e){var t=0;for(var s in cleverapps.PaymentsManager.PRODUCTS)if(t++,s===e.itemId)return t},cleverapps.MobagePayments.prototype.open=function(e,s){var t={};t[opensocial.BillingItem.Field.SKU_ID]=this.getSKU(e),t[opensocial.BillingItem.Field.PRICE]=parseInt(e.loadedPrice.replace(" ","")),t[opensocial.BillingItem.Field.COUNT]=1,t[mbga.BillingItem.Field.NAME]=e.description,t[mbga.BillingItem.Field.IMAGE_URL]=cleverapps.config.deployment.replace("https","http")+e.image;var n=opensocial.newBillingItem(t),i={};i[opensocial.Payment.Field.ITEMS]=[n],
i[opensocial.Payment.Field.AMOUNT]=t[opensocial.BillingItem.Field.PRICE]*t[opensocial.BillingItem.Field.COUNT];var o=opensocial.newPayment(i);FullscreenControlButton.exitFullscreen(function(){opensocial.requestPayment(o,function(e){if(e.hadError())s(cleverapps.Social.CODE_FAILED,e);else{var t=e.getData();s(cleverapps.Social.CODE_SUCCEED,t)}})})},cleverapps.MobagePayments.prototype.isAvailable=function(){return!0},cleverapps.MobagePayments.isAppropriate=function(){return cleverapps.Mobage.isAppropriate()},cleverapps.MobagePayments.prototype.validate=function(e,t){t&&t()},cleverapps.MobagePayments.prototype.logPurchase=function(e){},cleverapps.MobagePayments.TESTER_IDS=["mbga.jp:155776208"],cleverapps.VKPayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}this.paymentHandler=function(e){},cleverapps.social.whenInitialized("vkpayments",this.init.bind(this))},
cleverapps.VKPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.VKPayments.prototype.constructor=cleverapps.VKPayments,cleverapps.VKPayments.prototype.calcLoadedPrice=function(e){return Math.round(21*e)+" руб"},cleverapps.VKPayments.prototype.init=function(){VK.addCallback("onOrderSuccess",function(e){this.paymentHandler(cleverapps.Social.CODE_SUCCEED,e)}.bind(this)),VK.addCallback("onOrderCancel",function(){this.paymentHandler(cleverapps.Social.CODE_CANCELLED)}.bind(this)),VK.addCallback("onOrderFail",function(e){this.paymentHandler(cleverapps.Social.CODE_FAILED,e)}.bind(this))},cleverapps.VKPayments.prototype.open=function(e,s){this.paymentHandler=function(e,t){e===cleverapps.Social.CODE_FAILED?(console.log(t),s(cleverapps.Social.CODE_FAILED,t)):e===cleverapps.Social.CODE_SUCCEED&&s(cleverapps.Social.CODE_SUCCEED,t)};var t={type:"item",item:e.itemId};FullscreenControlButton.exitFullscreen(function(){VK.callMethod("showOrderBox",t)})},
cleverapps.VKPayments.prototype.isAvailable=function(){return!0},cleverapps.VKPayments.isAppropriate=function(){return cleverapps.VK.isAppropriate()},cleverapps.VKPayments.prototype.validate=function(e,t){cleverapps.RestClient.post("/vkpayments/check/",{orderId:e},function(e){"ok"===e&&t&&t()})},cleverapps.VKPayments.prototype.logPurchase=function(e){},cleverapps.MobileVkPayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}},cleverapps.MobileVkPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.MobileVkPayments.prototype.constructor=cleverapps.MobileVkPayments,cleverapps.MobileVkPayments.prototype.calcLoadedPrice=function(e){return Math.round(21*e)+" руб"},cleverapps.MobileVkPayments.prototype.open=function(e,t){this.isAvailable()?cleverapps.social.showOrderBox({type:"item",item:e.itemId},function(e){e===cleverapps.Social.CODE_SUCCEED&&t(
cleverapps.Social.CODE_SUCCEED)}):t(cleverapps.Social.CODE_FAILED,e,"messages:InstantPayments.NotAvailable")},cleverapps.MobileVkPayments.prototype.isAvailable=function(){return"html5_ios"!==cleverapps.MobileVk.getPlatfrom()},cleverapps.MobileVkPayments.isAppropriate=function(){return cleverapps.MobileVk.isAppropriate()},cleverapps.MobileVkPayments.prototype.validate=function(e,t){cleverapps.RestClient.post("/vkpayments/mobile/",{userId:cleverapps.user.id},function(e){"ok"===e&&t&&t()})},cleverapps.MobileVkPayments.prototype.logPurchase=function(e){},cleverapps.MyMailRuPayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}cleverapps.social.whenInitialized("mymailrupayments",this.init.bind(this))},cleverapps.MyMailRuPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.MyMailRuPayments.prototype.constructor=cleverapps.MyMailRuPayments,
cleverapps.MyMailRuPayments.prototype.init=function(){this instanceof cleverapps.MobileMyMailRuPayments||(this.listeners={status:function(){},income:function(){}},mailru.events.listen(mailru.app.events.paymentDialogStatus,function(e){this.listeners.status(e)}.bind(this)),mailru.events.listen(mailru.app.events.incomingPayment,function(e){this.listeners.income(e)}.bind(this)))},cleverapps.MyMailRuPayments.prototype.calcLoadedPrice=function(e){return Math.floor(20*e)+" млк"},cleverapps.MyMailRuPayments.prototype.checkPayment=function(t){cleverapps.RestClient.get("/mmrupayments/check/"+levels.user.id,{},function(e){"ok"===e&&t()})},cleverapps.MyMailRuPayments.prototype.processPayment=function(){cleverapps.RestClient.get("/mmrupayments/close/"+levels.user.id,{},function(){})},cleverapps.MyMailRuPayments.prototype.open=function(e,t){this.listeners.status=function(e){console.log("PAYMENT DIALOG",e)},this.listeners.income=function(e){console.log("INCOM",e),"success"===e.status?(t(
cleverapps.Social.CODE_SUCCEED),this.processPayment()):t(cleverapps.Social.CODE_CANCELLED)}.bind(this),FullscreenControlButton.exitFullscreen(function(){mailru.app.payments.showDialog({service_id:e.id.mymailru,service_name:e.title,mailiki_price:parseInt(e.loadedPrice)})})},cleverapps.MyMailRuPayments.prototype.isAvailable=function(){return!0},cleverapps.MyMailRuPayments.isAppropriate=function(){return cleverapps.MyMailRu.isAppropriate()},cleverapps.MyMailRuPayments.prototype.validate=function(e,t){t&&t()},cleverapps.MyMailRuPayments.prototype.logPurchase=function(e){},cleverapps.MobileMyMailRuPayments=function(){cleverapps.MyMailRuPayments.call(this)},cleverapps.MobileMyMailRuPayments.prototype=Object.create(cleverapps.MyMailRuPayments.prototype),cleverapps.MobileMyMailRuPayments.prototype.constructor=cleverapps.MobileMyMailRuPayments,cleverapps.MobileMyMailRuPayments.prototype.runChecker=function(e){var t,s=0,n=function(){
"16111471373067017624"===cleverapps.user.id&&cleverapps.ReportStream.send("mmdebug","close popup "+JSON.stringify((new Error).stack)),cleverapps.MobileMyMailRu.widgetWindow&&(cleverapps.MobileMyMailRu.widgetWindow.close(),cleverapps.MobileMyMailRu.widgetWindow=void 0),clearInterval(t)};t=setInterval(function(){3600<++s&&("16111471373067017624"===cleverapps.user.id&&cleverapps.ReportStream.send("mmdebug","close popup uid"),n());try{cleverapps.MobileMyMailRu.widgetWindow.location&&cleverapps.MobileMyMailRu.widgetWindow.location.href&&0<=cleverapps.MobileMyMailRu.widgetWindow.location.href.indexOf("vid=")&&("16111471373067017624"===cleverapps.user.id&&cleverapps.ReportStream.send("mmdebug","close by href "+cleverapps.MobileMyMailRu.widgetWindow.location.href),n(),s=0)}catch(e){}s%3==0&&this.checkPayment(function(){this.processPayment(),e(cleverapps.Social.CODE_SUCCEED),e=function(){},n()}.bind(this))}.bind(this),500)},cleverapps.MobileMyMailRuPayments.prototype.open=function(e,t){
this.processPayment();var s=cleverapps.social.getRequestParameters(),n={appid:cleverapps.config.myMailRu.appId,session_key:s.session_key,service_id:e.id.mymailru,service_name:e.title,mailiki_price:parseInt(e.loadedPrice),mob:1},i=[];for(var o in n)if(n.hasOwnProperty(o))if("service_name"===o){var a=o+"="+n[o].split("").map(function(e){return e.match(/[а-я]/i)?e:encodeURIComponent(e)}).join("");i.push(a)}else i.push(o+"="+encodeURIComponent(n[o]));i="http://m.my.mail.ru/cgi-bin/app/paymentm?"+i.join("&"),cleverapps.MobileMyMailRu.widgetWindow=window.open(i),this.runChecker(t),"16111471373067017624"===cleverapps.user.id&&(cleverapps.ReportStream.send("mmdebug","open mobile payment "+i),cleverapps.ReportStream.send("mmdebug","is window null - "+!cleverapps.MobileMyMailRu.widgetWindow))},cleverapps.MobileMyMailRuPayments.isAppropriate=function(){return"16111471373067017624"===cleverapps.user.id&&cleverapps.ReportStream.send("mmdebug","source"+cleverapps.User.calcSource()),
cleverapps.MobileMyMailRu.isAppropriate()},cleverapps.OKPayments=function(){for(var e in cleverapps.CompensatePayments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}},cleverapps.OKPayments.prototype=Object.create(cleverapps.CompensatePayments.prototype),cleverapps.OKPayments.prototype.constructor=cleverapps.OKPayments,cleverapps.OKPayments.prototype.calcLoadedPrice=function(e){var t=-1!==["580731438762","577203420866","585959187481","576593702177","8593874","573573968467","578403383621","573870870859","583443371977"].indexOf(cleverapps.user.id),s=Math.floor(20*e)+" OK";return cleverapps.config.debugMode&&t&&(s=Math.max(1,Math.round(e/3))+" OK"),s},cleverapps.OKPayments.prototype.open=function(e,t){FAPI!==cleverapps.FakeFAPI?"subscription"!==e.type?(this.paymentCallback=t,this.productType=e.type,this.runCheckPayments(),cleverapps.social.listeners.showPayment=function(e){e===cleverapps.OK.CODE_SUCCEED&&(
this.checkPayment(),this.callPaymentCallback())}.bind(this),FullscreenControlButton.exitFullscreen(function(){FAPI.UI.showPayment(e.description,e.title,e.itemId,parseInt(e.loadedPrice),null,JSON.stringify({type:this.getMobile()?"mobile":"social"}),"ok","true")}.bind(this))):this.openSubscription(e,t):t(cleverapps.Social.CODE_CANCELLED)},cleverapps.OKPayments.prototype.getBasePath=function(){return"okpayments"},cleverapps.OKPayments.prototype.canCompensate=function(){return!0},cleverapps.OKPayments.prototype.openSubscription=function(e,t){this.paymentCallback=t,this.productType=e.type,this.runCheckPayments(),FullscreenControlButton.exitFullscreen(function(){FAPI.invokeUIMethod("showPaymentSubscription",e.id.ok,parseInt(e.loadedPrice))})},cleverapps.OKPayments.prototype.isAvailable=function(){return!0},cleverapps.OKPayments.isAppropriate=function(){return cleverapps.OK.isAppropriate()},cleverapps.OKPayments.prototype.logPurchase=function(e){},cleverapps.MobileOKPayments=function(){
cleverapps.OKPayments.call(this)},cleverapps.MobileOKPayments.prototype=Object.create(cleverapps.OKPayments.prototype),cleverapps.MobileOKPayments.prototype.constructor=cleverapps.MobileOKPayments,cleverapps.MobileOKPayments.prototype.getMobile=function(){return 1},cleverapps.MobileOKPayments.isAppropriate=function(){return cleverapps.MobileOK.isAppropriate()},cleverapps.NoPayments=function(){cleverapps.CompensatePayments.call(this)},cleverapps.NoPayments.prototype=Object.create(cleverapps.CompensatePayments.prototype),cleverapps.NoPayments.prototype.constructor=cleverapps.NoPayments,cleverapps.NoPayments.isAppropriate=function(){return-1!==["huzcom","plinga","pliega","ayodo1","iyodo1"].indexOf(cleverapps.User.calcSource())},cleverapps.NoPayments.prototype.isAvailable=function(){return!1},cleverapps.SPMobagePayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e]
;t.loadedPrice=cleverapps.MobagePayments.calcLoadedPrice(t.price)}},cleverapps.SPMobagePayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.SPMobagePayments.prototype.constructor=cleverapps.SPMobagePayments,cleverapps.SPMobagePayments.calcLoadedPrice=function(e){return cleverapps.MobagePayments.calcLoadedPrice(e)},cleverapps.SPMobagePayments.prototype.getSKU=function(e){var t=0;for(var s in cleverapps.PaymentsManager.PRODUCTS)if(t++,s===e.itemId)return t},cleverapps.SPMobagePayments.prototype.open=function(e,n){cleverapps.metha.display({focus:"SPMobagePaymentsOpen",action:function(e){var t=new WaitWindow,s=t.createListener(t.close.bind(t,[!0]));setTimeout(s,4e3);var n=mobage.event.subscribe("modal.afterOpen",function(){s(),mobage.event.unsubscribe(n)});cleverapps.metha.onceNoWindowsListener=e}});var t=function(s){mobage.ui.open("payment",{transactionId:s.transactionId,orderId:s.orderId},function(e,t){e?(this.reportPaymentResult(s,e),
mobage.bank.clearPaymentBacklog(s.transactionId),n(cleverapps.Social.CODE_FAILED,t)):(this.reportPaymentResult(s),n(cleverapps.Social.CODE_SUCCEED,t))}.bind(this))}.bind(this);this.createTransaction(e,t)},cleverapps.SPMobagePayments.prototype.createTransaction=function(n,i){var e=function(){var e={userId:levels.user.id.substring(levels.user.id.indexOf(":")+1),id:this.getSKU(n),name:n.title,price:parseInt(n.loadedPrice.replace("MC","").replace(" ","")),description:"ja"===cleverapps.settings.language?n.description:n.description.substring(0,n.description.lastIndexOf("!")),imageUrl:cleverapps.config.deployment.replace("https","http")+n.image,accessToken:cleverapps.social.clientData.token.accessToken},t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s+"="+e[s]);cleverapps.RestClient.get("/spmbgapayments?"+t.join("&"),{},function(e){i(e)}.bind(this))}.bind(this);cleverapps.social.checkAccessToken(e)},cleverapps.SPMobagePayments.prototype.reportPaymentResult=function(e,t){var s={
orderId:e.orderId,transactionId:e.transactionId};t&&(s.error=!0);var n=[];for(var i in s)s.hasOwnProperty(i)&&n.push(i+"="+s[i]);cleverapps.RestClient.post("/spmbgapayments/old?"+n.join("&"),{},function(e){e&&e.transactionId&&mobage.bank.clearPaymentBacklog(e.transactionId)}.bind(this))},cleverapps.SPMobagePayments.prototype.isAvailable=function(){return!0},cleverapps.SPMobagePayments.isAppropriate=function(){return cleverapps.SPMobage.isAppropriate()},cleverapps.SPMobagePayments.prototype.validate=function(e,t){t&&t()},cleverapps.SPMobagePayments.prototype.logPurchase=function(e){},cleverapps.FacebookPayments=function(){cleverapps.CompensatePayments.call(this),cleverapps.CompensatePayments.CHECK_TIMEOUTS=["5 second","5 second","5 seconds","5 seconds","10 seconds","10 seconds"],cleverapps.CompensatePayments.VALIDATE_TIMEOUTS=["1 second","1 second","1 second","1 second","1 second","3 seconds","5 seconds","5 seconds","5 seconds","10 seconds","15 seconds","30 seconds","30 seconds",
"30 seconds"]},cleverapps.FacebookPayments.prototype=Object.create(cleverapps.CompensatePayments.prototype),cleverapps.FacebookPayments.prototype.constructor=cleverapps.FacebookPayments,cleverapps.FacebookPayments.UserCanceled=1383010,cleverapps.FacebookPayments.SuccessStatuses=["completed","active"],cleverapps.FacebookPayments.prototype.getBasePath=function(){return"fbpayments"},cleverapps.FacebookPayments.prototype.canCompensate=function(){return!0},cleverapps.FacebookPayments.prototype.open=function(s,n){var i=cleverapps.once(n),o=cleverapps.once(n);n=function(e,t){cleverapps.Social.CODE_SUCCEED===e?i(e,t):o(e,t)},this.paymentCallback=n,this.productType=s.type;var e={product:s.id.facebook,type:s.type};"subscription"===s.type?e.action="create_subscription":this.runCheckPayments(),FullscreenControlButton.exitFullscreen(function(){plugin.FacebookAgent.getInstance().canvas.pay(e,function(e,t){e===cleverapps.FacebookPayments.UserCanceled?(console.log(
"Payment "+s.itemId+" error "+t.error_message),n(cleverapps.Social.CODE_CANCELLED,t)):t&&-1===cleverapps.FacebookPayments.SuccessStatuses.indexOf(t.status)?(console.log("Payment "+s.itemId+" status: ",t.status),n(cleverapps.Social.CODE_CANCELLED,t)):(this.setPaymentChecked(),this.stopCheckPayments(),this.callPaymentCallback(t))}.bind(this))}.bind(this))},cleverapps.FacebookPayments.prototype.reactivateSubscription=function(e,t){t=t||function(){},plugin.FacebookAgent.getInstance().canvas.pay({action:"reactivate_subscription",subscription_id:e},function(e){e===cleverapps.FacebookPayments.UserCanceled&&(e=cleverapps.Social.CODE_CANCELLED),t(e)})},cleverapps.FacebookPayments.prototype.cancelSubscription=function(e,t){t=t||function(){},plugin.FacebookAgent.getInstance().canvas.pay({action:"cancel_subscription",subscription_id:e},function(e){e===cleverapps.FacebookPayments.UserCanceled&&(e=cleverapps.Social.CODE_CANCELLED),t(e)})},cleverapps.FacebookPayments.prototype.isAvailable=function(){
return!0},cleverapps.FacebookPayments.isAppropriate=function(){return!cc.sys.isNative},cleverapps.FacebookPayments.prototype.logPurchase=function(e){},cleverapps.FotoStranaPayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}},cleverapps.FotoStranaPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.FotoStranaPayments.prototype.constructor=cleverapps.FotoStranaPayments,cleverapps.FotoStranaPayments.prototype.calcLoadedPrice=function(e){return(e+" ФМ").replace(".",",")},cleverapps.FotoStranaPayments.prototype.open=function(e,t){var s=["FS_113127743","FS_76785158","FS_113139157","FS_113139202"].indexOf(cleverapps.user.id)?1:0;t=cleverapps.once(t),FSClient.event("buyItemCallback",function(e){t("success"===e.result?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)},{itemId:e.id.mymailru,name:e.description,forwardData:e.itemId,
picUrl:cleverapps.config.deployment+e.image.replace("fbproducts","fsproducts"),priceFmCents:Math.floor(100*e.price),isDebug:s})},cleverapps.FotoStranaPayments.prototype.isAvailable=function(){return!0},cleverapps.FotoStranaPayments.prototype.validate=function(e,t){t&&t()},cleverapps.FotoStranaPayments.isAppropriate=function(){return cleverapps.FotoStrana.isAppropriate()},cleverapps.FotoStranaPayments.prototype.logPurchase=function(e){},cleverapps.IAPWebViewPayments=function(){cleverapps.Payments.call(this),cc.sys.os===cc.sys.OS_IOS&&(PurchasesPlugin=cleverapps.IOSWebViewPurchasesPluginAdapter),this.consumed={},this.load(),PurchasesPlugin.init(),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,this.checkInitialized.bind(this)),setInterval(this.checkInitialized.bind(this),cleverapps.parseInterval("2 minutes")),this.startTime=Date.now(),this.purchaseCallback=function(){}},cleverapps.IAPWebViewPayments.prototype=Object.create(cleverapps.Payments.prototype),
cleverapps.IAPWebViewPayments.prototype.constructor=cleverapps.IAPWebViewPayments,cleverapps.IAPWebViewPayments.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.WEBVIEW_PAYMENTS);e&&e.consumed&&(this.consumed=e.consumed)},cleverapps.IAPWebViewPayments.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.WEBVIEW_PAYMENTS,{consumed:this.consumed})},cleverapps.IAPWebViewPayments.prototype.setConsumed=function(e){this.consumed[e]||(this.consumed[e]=1,this.save())},cleverapps.IAPWebViewPayments.prototype.checkInitialized=cleverapps.timeredThrottle(1e3,function(){this.initialized?this.refreshed?this.refreshedSubscriptions?this.refreshedSubscriptionsTokens?this.requestedStoreProduct||this.requestStoreProduct():this.refreshSubscriptionsTokens():PurchasesPlugin.refresh("subscription"):PurchasesPlugin.refresh("consumable"):PurchasesPlugin.init()}),cleverapps.IAPWebViewPayments.prototype.requestStoreProduct=function(){
PurchasesPlugin.requestStoreProduct&&PurchasesPlugin.requestStoreProduct(),console.log("IAPWebViewPayments.requestStoreProduct"),this.requestedStoreProduct=!0},cleverapps.IAPWebViewPayments.prototype.onRequestStoreProduct=function(e){this.storeProductName=e,console.log("IAPWebViewPayments.onRequestStoreProduct - "+e),this.checkInitialized(),this.buyStoreProduct()},cleverapps.IAPWebViewPayments.prototype.buyStoreProduct=function(){if(this.storeProductName&&!cleverapps.metha.isFocused()){var t=this.findProductByName(this.storeProductName);delete this.storeProductName,t&&cleverapps.metha.display({focus:"buyStoreProduct",action:function(e){cleverapps.payments.oncePaymentFinished=e,(t=Product.Create(t.key)).buy()}})}},cleverapps.IAPWebViewPayments.prototype.refreshSubscriptionsTokens=function(){if(void 0!==PurchasesPlugin.getSubscriptionsTokens&&cleverapps.subscription){var e=decodeWebViewData(PurchasesPlugin.getSubscriptionsTokens());if(e.error)return void console.log(
"IAPWebViewPayments.refreshSubscriptionsTokens error "+e.error);cleverapps.subscription.addPurchaseTokens(e)}this.refreshedSubscriptionsTokens=!0,this.checkInitialized()},cleverapps.IAPWebViewPayments.prototype.addSubscriptionTokens=function(e,t){Array.isArray(e)||(e=[e]);var n=cleverapps.User.calcSource();if(-1!==["android","ios"].indexOf(n)&&cleverapps.subscription){var s=e.map(function(e){var t=this.findProductByName(e.name);if(t&&"subscription"===t.type){var s={name:e.name};return"android"===n?(s.purchaseToken=e.receipt.purchaseToken,s.packageName=e.receipt.packageName,s.productId=e.receipt.productId):(s.purchaseToken=e.receipt,s.packageName=e.packageName,s.productId=e.productId),s}}.bind(this)).filter(function(e){return e});0<s.length&&cleverapps.subscription.addPurchaseTokens(s,t)}},cleverapps.IAPWebViewPayments.prototype.onRestoreSuccess=function(e){e=decodeWebViewData(e),console.log("IAPWebViewPayments.onRestoreSuccess"+e.length,e),e=JSON.parse(e),this.restoreCallback&&(
this.restoreCallback(cleverapps.Social.CODE_SUCCEED),delete this.restoreCallback),this.addSubscriptionTokens(e,!0)},cleverapps.IAPWebViewPayments.prototype.onPurchaseSuccess=function(e){cleverapps.playSession.set(cleverapps.EVENTS.PAYMENT_SUCCESS,!0),e=decodeWebViewData(e),console.log("IAPWebViewPayments.onPurchaseSuccess",e),e=JSON.parse(e),this.addSubscriptionTokens(e),this.purchaseCallback(cleverapps.Social.CODE_SUCCEED,e)},cleverapps.IAPWebViewPayments.prototype.logError=function(t,s){if(console.log("IAPWebViewPayments."+t,s),s){var e=function(e){cleverapps.throwAsync(t+" "+e+" "+s)};-1!==s.indexOf("client is null or not ready")?e(0):"service timeout"===s?e(1):"feature not support"===s?e(2):"service disconnected"===s?e(3):"user canceled"===s?e(4):"service unavailable"===s?e(5):"billing unavailable"===s?e(6):"item unavailable"===s?e(7):"developer error"===s?e(8):"item already owned"===s?e(9):"item not owned"===s?e(10):-1!==s.indexOf("cant find product:")?e(11):-1!==s.indexOf(
"cant find sku details:")?e(12):e("transaction failed"===s?13:"network unreachable"===s?14:"unknown error"===s?15:"client is not allowed to issue the request"===s?16:"purchase identifier was invalid"===s?17:"this device is not allowed to make the payment"===s?18:19)}},cleverapps.IAPWebViewPayments.prototype.onPurchaseFailure=function(e){cleverapps.playSession.set(cleverapps.EVENTS.PAYMENT_FAILURE,!0),this.logError("onPurchaseFailure",decodeWebViewData(e)),this.purchaseCallback(cleverapps.Social.CODE_FAILED)},cleverapps.IAPWebViewPayments.prototype.onRestoreFailure=function(e){this.restoreCallback&&(this.restoreCallback(cleverapps.Social.CODE_FAILED),delete this.restoreCallback),console.log("IAPWebViewPayments.onRestoreFailure",decodeWebViewData(e))},cleverapps.IAPWebViewPayments.prototype.onPurchaseCancelled=function(){cleverapps.playSession.set(cleverapps.EVENTS.PAYMENT_CANCEL,!0),console.log("IAPWebViewPayments.onPurchaseCancelled"),this.purchaseCallback(
cleverapps.Social.CODE_CANCELLED)},cleverapps.IAPWebViewPayments.prototype.onInitialized=function(e,t){e?(this.initialized=!0,this.checkInitialized()):(this.onInitializedError=decodeWebViewData(t),console.log("IAPWebViewPayments.onInitialized",this.onInitializedError),this.initialized=!1)},cleverapps.IAPWebViewPayments.prototype.onProductRequestSuccess=function(e,t){t=decodeWebViewData(t),console.log("IAPWebViewPayments.onProductRequestSuccess "+e,t),t=JSON.parse(t);for(var s=0;s<t.length;s++){var n=this.findProductByName(t[s].name);void 0!==n&&(n.loadedPrice=t[s].price,n.loadedCurrencyCode=t[s].price_currency_code,n.loadedPriceAmount=Math.round(t[s].price_amount_micros/1e3)/1e3,this.loadedCurrencyCode||(this.loadedCurrencyCode=n.loadedCurrencyCode),console.log("iapwebviewpayments product "+t[s].productId+" "+n.loadedPrice+" "+n.loadedCurrencyCode+" "+n.loadedPriceAmount))}"consumable"===e?this.refreshed=!0:"subscription"===e&&(this.refreshedSubscriptions=!0),this.checkInitialized()},
cleverapps.IAPWebViewPayments.prototype.isProductExists=function(e){var t=cleverapps.config.products[e];return t&&t.loadedPrice},cleverapps.IAPWebViewPayments.prototype.findProductByName=function(e){for(var t in cleverapps.config.products){var s=cleverapps.config.products[t];if((cc.sys.os===cc.sys.OS_IOS?s.id.ios:s.id.android)===e)return s}},cleverapps.IAPWebViewPayments.prototype.restore=function(e){e=e||function(){},PurchasesPlugin.restore&&this.initialized?(this.restoreCallback=e,PurchasesPlugin.restore()):e(!1)},cleverapps.IAPWebViewPayments.prototype.open=function(e,s){cleverapps.playSession.set(cleverapps.EVENTS.PAYMENT_OPEN,!0),s=s||function(){};var t=Math.floor((Date.now()-this.startTime)/1e3);if(!this.initialized)return this.logError("onInitialized "+t+"s",this.onInitializedError),cleverapps.playSession.set(cleverapps.EVENTS.PAYMENT_NOT_INITIALIZED,!0),void s(cleverapps.Social.CODE_FAILED);if(!this.refreshed||"subscription"===e.type&&!this.refreshedSubscriptions
)return this.logError("onProductRequestError "+t+"s debugMessage - "+this.onProductRequestErrorMessage,this.onProductRequestError),cleverapps.playSession.set(cleverapps.EVENTS.PAYMENT_NOT_REFRESHED,!0),void s(cleverapps.Social.CODE_FAILED);this.purchaseCallback=function(e,t){s.apply(this,arguments)}.bind(this);var n=cc.sys.os===cc.sys.OS_IOS?e.id.ios:e.id.android;PurchasesPlugin.hasProductByName(n)||cleverapps.throwAsync("Product '"+n+"' not configured correctly (please check sdkbox_config.json)");var i=this.findProductByName(n);void 0===i||i.loadedPrice||cleverapps.throwAsync("Product '"+n+"' has not loaded price"),PurchasesPlugin.purchase(n)},cleverapps.IAPWebViewPayments.prototype.onProductRequestFailure=function(e,t,s){this.onProductRequestError=decodeWebViewData(t),this.onProductRequestErrorMessage=decodeWebViewData(s)||"",console.log("IAPWebViewPayments.onProductRequestFailure "+e,this.onProductRequestError,this.onProductRequestErrorMessage)},
cleverapps.IAPWebViewPayments.prototype.isAvailable=function(){return!0},cleverapps.IAPWebViewPayments.prototype.validate=function(e,t,s){if(t=t||function(){},-1!==["android","ios"].indexOf(cleverapps.User.calcSource())){var n={userid:cleverapps.user.id,compensate:e.compensate};cc.sys.os===cc.sys.OS_IOS?(n.receipt=e.receipt,n.productId=e.productId,n.packageName=e.packageName,n.platform="apple"):cc.sys.os===cc.sys.OS_ANDROID&&(n.receipt=e.receipt.purchaseToken,n.packageName=e.receipt.packageName,n.productId=e.receipt.productId,n.platform="google");var i=this.findProductByName(e.name);n.type=i&&i.type;var o={amount:i&&i.price?Math.round(i.price):1};cleverapps.RestClient.post("/purchasevalidator/validate/",n,function(e){console.log("IAPWebViewPayments.validate - Success purchase validate - "+JSON.stringify(e)),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PURCHASE_VALIDATE_SUCCESS,o),t()},function(){console.log("IAPWebViewPayments.validate - Failure purchase validate"),
cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PURCHASE_VALIDATE_FAILURE,o),s&&s()})}else t()},cleverapps.IAPWebViewPayments.prototype.logPurchase=function(e){var t=e.orderId||e.receipt.orderId,s=this.findProductByName(e.name),n=s?s.price:0,i="USD";e.price_amount_micros&&e.price_currency_code?(n=Math.round(e.price_amount_micros/1e3)/1e3,i=e.price_currency_code):s.loadedPriceAmount&&s.loadedCurrencyCode&&(n=s.loadedPriceAmount,i=s.loadedCurrencyCode),cc.sys.os===cc.sys.OS_IOS||FacebookPlugin.logPurchase(n,i),-1!==["android","ios"].indexOf(cleverapps.User.calcSource())&&cleverapps.adjust.logPurchase(t,n,i)},cleverapps.IAPWebViewPayments.prototype.calcLoadedPrice=function(e){var t=cleverapps.EXCHANGE_RATES[this.loadedCurrencyCode];if(t){var s=Product.CURRENCY_CODE===this.loadedCurrencyCode?Product.CURRENCY:this.loadedCurrencyCode;return Math.ceil(e*t)+".00 "+s}return Product.CURRENCY+" "+e},cleverapps.IAPWebViewPayments.isAppropriate=function(){return cc.sys.isNative&&(
"undefined"!=typeof PurchasesPlugin||cc.sys.os===cc.sys.OS_IOS)},cleverapps.IAPWebViewPayments.prototype.canCompensate=function(){return void 0!==PurchasesPlugin.compensate&&cc.sys.os===cc.sys.OS_ANDROID},cleverapps.IAPWebViewPayments.prototype.compensate=function(){this.compensateProductCode||this.compensateRunning||(PurchasesPlugin.compensate(JSON.stringify(this.consumed)),this.compensateRunning=!0)},cleverapps.IAPWebViewPayments.prototype.onConsumeError=cleverapps.throttle(cleverapps.parseInterval("1 day"),function(e){cleverapps.throwAsync("IAPWebViewPayments.onConsumeError - "+e)}),cleverapps.IAPWebViewPayments.prototype.onCompensateResult=function(e,t){if(t=decodeWebViewData(t),console.log("IAPWebViewPayments.onCompensateResult - "+e+" - "+t),this.compensateRunning=!1,e)this.onConsumeError(e);else{var s=t&&JSON.parse(t),n=this.findProductByName(s&&s.name),i=s&&s.receipt&&s.receipt.orderId;if(s&&s.name&&i&&n){s.compensate=!0,this.compensateRunning=!0;var o=function(){console.log(
"IAPWebViewPayments.compensate - validate purchase success"),this.compensateRunning=!1,this.compensatePurchase=s,this.compensateProductCode=n.key}.bind(this),a=function(){console.log("IAPWebViewPayments.compensate - validate purchase error"),this.compensateRunning=!1,this.setConsumed(i)}.bind(this);this.validate(s,o,a)}}},cleverapps.IAPWebViewPayments.prototype.compensateValidate=function(e){console.log("IAPWebViewPayments.compensateValidate - start");var t=this.compensatePurchase;t&&(console.log("IAPWebViewPayments.compensateValidate - success "+t.receipt.orderId),delete this.compensatePurchase,e())},cleverapps.IOSWebViewPurchasesPluginAdapter={init:function(){console.log("IOSWebViewPurchasesPluginAdapter init"),webkitMessage("purchase",{action:"init"})},refresh:function(e){console.log("IOSWebViewPurchasesPluginAdapter refresh"),webkitMessage("purchase",{action:"refresh",type:e})},hasProductByName:function(e){return!0},purchase:function(e){webkitMessage("purchase",{action:"purchase",
productName:e})},restore:function(e){webkitMessage("purchase",{action:"restore"})},requestStoreProduct:function(){webkitMessage("purchase",{action:"requestStoreProduct"})}},void 0===cleverapps)cleverapps={config:{source:void 0}};if(void 0===config)var config={debugMode:void 0};if(void 0===LivesProductTile)LivesProductTile=void 0;if(void 0===PackProductTile)PackProductTile=void 0;if(void 0===SubscriptionTileModel)var SubscriptionTileModel=void 0;if(void 0===SubscriptionTile)SubscriptionTile=void 0;if(void 0===GrowthFundTile)GrowthFundTile=void 0;if(void 0===GrowthFundTileModel)var GrowthFundTileModel=void 0;if(void 0===UnlimitedLivesTileModel)var UnlimitedLivesTileModel=void 0;cleverapps.PaymentsManager={init:function(){var t=cleverapps.clone(cleverapps.PaymentsManager.PRODUCTS,!0);cleverapps.override(t,cleverapps.config.products||{}),Object.keys(t).forEach(function(e){!1===t[e]&&delete t[e]}),cleverapps.config.products=t;var e=null;return cleverapps.NoPayments.isAppropriate(
)?e=new cleverapps.NoPayments:cleverapps.IAPWebViewPayments.isAppropriate()?e=new cleverapps.IAPWebViewPayments:cleverapps.XsollaPayments.isAppropriate()?e=new cleverapps.XsollaPayments:cleverapps.FakePayments.isAppropriate()?e=new cleverapps.FakePayments:cleverapps.InstantPayments.isAppropriate()?e=new cleverapps.InstantPayments:cleverapps.MobileOKPayments.isAppropriate()?e=new cleverapps.MobileOKPayments:cleverapps.SPMobagePayments.isAppropriate()?e=new cleverapps.SPMobagePayments:cleverapps.OKPayments.isAppropriate()?e=new cleverapps.OKPayments:cleverapps.MobileMyMailRuPayments.isAppropriate()?e=new cleverapps.MobileMyMailRuPayments:cleverapps.MyMailRuPayments.isAppropriate()?e=new cleverapps.MyMailRuPayments:cleverapps.MobileVkPayments.isAppropriate()?e=new cleverapps.MobileVkPayments:cleverapps.VKPayments.isAppropriate()?e=new cleverapps.VKPayments:cleverapps.MobagePayments.isAppropriate()?e=new cleverapps.MobagePayments:cleverapps.FotoStrana.isAppropriate(
)?e=new cleverapps.FotoStranaPayments:cleverapps.NK.isAppropriate()?e=new cleverapps.NKPayments:cleverapps.Draugiem.isAppropriate()?e=new cleverapps.DraugiemPayments:cleverapps.YandexPayments.isAppropriate()?e=new cleverapps.YandexPayments:cleverapps.FacebookPayments.isAppropriate()&&(e=new cleverapps.FacebookPayments),e.onAvailableListeners=e.onAvailableListeners||{},e.canCompensate=e.canCompensate||function(){},e}},cleverapps.PaymentsManager.PRODUCTS={buyExp10:{id:{facebook:"buyexp10.html",android:"buyexp10",ios:"buyexp10",instant:"buyexp10",mymailru:1},title:"messages:Shop.BuyExp10.Title",description:"messages:Shop.BuyExp10.Description",boughtMessage:"messages:Shop.BuyExp10.BoughtMessage",image:"/res/fbproducts/buyexp10.png",price:9.99,reward:{exp:10}},buyExp150:{id:{facebook:"buyexp150.html",android:"buyexp150",ios:"buyexp150",instant:"buyexp150",yandex:"buyexp150",mymailru:2},title:"messages:Shop.BuyExp150.Title",description:"messages:Shop.BuyExp150.Description",
boughtMessage:"messages:Shop.BuyExp150.BoughtMessage",image:"/res/fbproducts/buyexp150.png",price:99.99,reward:{exp:150}},addMoves1:{id:{facebook:"addmoves1.html",android:"addmoves1",ios:"addmoves1",instant:"addmoves1",yandex:"addMoves1",mymailru:8},title:"messages:Shop.AddMoves1.Title",description:"messages:Shop.AddMoves1.Description",boughtMessage:"messages:Shop.AddMoves.BoughtMessage",image:"/res/fbproducts/addmoves.png",price:.99,moves:5,bonus:1,compensateReward:{gold:200}},addMoves2:{id:{facebook:"addmoves2.html",android:"addmoves2",ios:"addmoves2",instant:"addmoves2",yandex:"addMoves2",mymailru:9},title:"messages:Shop.AddMoves2.Title",description:"messages:Shop.AddMoves2.Description",boughtMessage:"messages:Shop.AddMoves.BoughtMessage",image:"/res/fbproducts/addmoves.png",price:1.99,moves:10,bonus:1,compensateReward:{gold:400}},addMoves3:{id:{facebook:"addmoves3.html",android:"addmoves3",ios:"addmoves3",instant:"addmoves3",yandex:"addMoves3",mymailru:10},
title:"messages:Shop.AddMoves3.Title",description:"messages:Shop.AddMoves3.Description",boughtMessage:"messages:Shop.AddMoves.BoughtMessage",image:"/res/fbproducts/addmoves.png",price:2.99,moves:15,bonus:1,compensateReward:{gold:600}},addMoves5:{id:{facebook:"addmoves5.html",android:"addmoves5",ios:"addmoves5",instant:"addmoves5",yandex:"addMoves5",mymailru:11},title:"messages:Shop.AddMoves5.Title",description:"messages:Shop.AddMoves5.Description",boughtMessage:"messages:Shop.AddMoves.BoughtMessage",image:"/res/fbproducts/addmoves.png",price:4.99,moves:15,bonus:2,compensateReward:{gold:1e3}},piggybank500:{id:{facebook:"piggybank500.html",android:"piggybank500",ios:"piggybank500",instant:"piggybank500",yandex:"piggybank500",mymailru:12},title:"messages:Shop.PiggyBank1.Title",description:"messages:Shop.PiggyBank1.Description",image:"/res/fbproducts/piggy_bank.png?v=1",price:2.99,reward:{gold:500}},piggybank1800:{id:{facebook:"piggybank1800.html",android:"piggybank1800",
ios:"piggybank1800",instant:"piggybank1800",yandex:"piggybank1800",mymailru:13},title:"messages:Shop.PiggyBank2.Title",description:"messages:Shop.PiggyBank2.Description",image:"/res/fbproducts/piggy_bank.png?v=1",price:9.99,reward:{gold:1800}},piggybank6000:{id:{facebook:"piggybank6000.html",android:"piggybank6000",ios:"piggybank6000",instant:"piggybank6000",yandex:"piggybank6000",mymailru:14},title:"messages:Shop.PiggyBank3.Title",description:"messages:Shop.PiggyBank3.Description",image:"/res/fbproducts/piggy_bank.png?v=1",price:29.99,reward:{gold:6e3}},piggybank25000:{id:{facebook:"piggybank25000.html",android:"piggybank25000",ios:"piggybank25000",instant:"piggybank25000",yandex:"piggybank25000",mymailru:15},title:"messages:Shop.PiggyBank4.Title",description:"messages:Shop.PiggyBank4.Description",image:"/res/fbproducts/piggy_bank.png?v=1",price:99.99,reward:{gold:25e3}},gunShot:{id:{facebook:"gunshot.html",android:"gunshot",ios:"gunshot",instant:"gunshot",yandex:"gunShot",mymailru:16
},title:"messages:Shop.GunShot.Title",description:"messages:Shop.GunShot.Description",boughtMessage:"messages:Shop.GunShot.BoughtMessage",image:"/res/fbproducts/gunshot.png?v=5",price:1.99,reward:{gun:1},compensateReward:{gold:400}},addMoves:{id:{facebook:"addmoves.html",android:"addmoves",ios:"addmoves",instant:"addmoves",yandex:"addMoves",mymailru:20},title:"messages:Shop.AddMoves.Title",description:"messages:Shop.AddMoves.Description",boughtMessage:"messages:Shop.AddMoves.BoughtMessage",image:"/res/fbproducts/addmoves0.png",price:.99,compensateReward:{gold:200}},gold500:{id:{facebook:"500gold.html",android:"500gold",ios:"500gold",instant:"500gold",yandex:"500gold",mymailru:21},title:"messages:Shop.Gold500.Title",description:"messages:Shop.Gold500.Description",image:"/res/fbproducts/gold2_200.png?v=2",price:2.99,videoPrice:10,videoReward:{gold:150},reward:{gold:500},icon:"shop_gold2_png"},gold1800:{id:{facebook:"1800gold.html",android:"1800gold",ios:"1800gold",instant:"1800gold",
yandex:"gold1800",mymailru:22},title:"messages:Shop.Gold1800.Title",description:"messages:Shop.Gold1800.Description",image:"/res/fbproducts/gold3_200.png?v=1",price:9.99,oldPrice:1.99,videoPrice:30,videoReward:{gold:500},label:1800,reward:{gold:1800},icon:"shop_gold3_png"},gold3800:{id:{facebook:"3800gold.html",android:"3800gold",ios:"3800gold",instant:"3800gold",yandex:"gold3800",mymailru:39},title:"messages:Shop.Gold3800.Title",description:"messages:Shop.Gold3800.Description",image:"/res/fbproducts/heap_gold.png?v=1",price:19.99,videoPrice:50,videoReward:{gold:1e3},reward:{gold:3800},icon:"heap_gold_png"},gold6000:{id:{facebook:"6000gold.html",android:"6000gold",ios:"6000gold",instant:"6000gold",yandex:"gold6000",mymailru:23},title:"messages:Shop.Gold6000.Title",description:"messages:Shop.Gold6000.Description",image:"/res/fbproducts/gold4_200.png?v=1",price:29.99,oldPrice:5.99,videoPrice:100,videoReward:{gold:2500},label:6e3,reward:{gold:6e3},icon:"shop_gold4_png"},gold25000:{id:{
facebook:"25000gold.html",android:"25000gold",ios:"25000gold",instant:"25000gold",yandex:"gold25000",mymailru:24},title:"messages:Shop.Gold25000.Title",description:"messages:Shop.Gold25000.Description",image:"/res/fbproducts/gold5_200.png?v=1",price:99.99,videoPrice:300,videoReward:{gold:1e4},reward:{gold:25e3},icon:"shop_gold5_png"},starterPack0:{id:{facebook:"starterpack0.html",android:"starterpack0",ios:"starterpack0",instant:"starterpack0",yandex:"StarterPack0",mymailru:25},title:"messages:StarterPack0.Title",description:"messages:StarterPack0.Description",boughtMessage:"messages:StarterPack.Bought",boughtMessageParams:{title:"messages:StarterPack0.Title"},image:"/res/fbproducts/starter_pack0.png?v=1",price:.99},starterPack:{id:{facebook:"starterpack.html",android:"starterpack",ios:"starterpack",instant:"starterpack",yandex:"starterPack",mymailru:26},title:"messages:StarterPack1.Title",description:"messages:StarterPack1.Description",boughtMessage:"messages:StarterPack.Bought",
boughtMessageParams:{title:"messages:StarterPack1.Title"},image:"/res/fbproducts/starter_pack.png?v=1",price:4.99},starterPack2:{id:{facebook:"starterpack2.html",android:"starterpack2",ios:"starterpack2",instant:"starterpack2",yandex:"starterPack2",mymailru:27},title:"messages:StarterPack2.Title",description:"messages:StarterPack2.Description",boughtMessage:"messages:StarterPack.Bought",boughtMessageParams:{title:"messages:StarterPack2.Title"},image:"/res/fbproducts/starter_pack2.png?v=1",price:29.99},subsWeek:{id:{facebook:"subsweek.html",android:"subsweek",ios:"subsweek",ok:"subsweek",mymailru:31},title:"messages:Shop.SubsWeek.Title",description:"messages:Shop.SubsWeek.Description",boughtMessage:"messages:Shop.SubsWeek.BoughtMessage",image:"/res/fbproducts/premium.png",icon:"prem_tile_icon",price:9.99,trial:"1 day",period:"2 weeks",type:"subscription",projects:["riddles","heroes","wordsoup","crocword","olympics","tripeaks","scramble","magicwords","mergecraft"]},subsMonth:{id:{
facebook:"subsmonth.html",android:"subsmonth",ios:"subsmonth",ok:"subsmonth",mymailru:32},title:"messages:Shop.SubsMonth.Title",description:"messages:Shop.SubsMonth.Description",boughtMessage:"messages:Shop.SubsMonth.BoughtMessage",image:"/res/fbproducts/premium.png",icon:"prem_tile_icon",price:14.99,period:"1 month",type:"subscription",projects:["riddles","heroes","wordsoup","crocword","olympics","tripeaks","scramble","magicwords","mergecraft"],TileModelClass:SubscriptionTileModel,ViewClassName:SubscriptionTile},subsWeekTest:{id:{facebook:"subsweektest.html",android:"subsweektest",ios:"subsweektest",ok:"subsweektest",mymailru:33},title:"messages:Shop.SubsWeek.Title",description:"messages:Shop.SubsWeek.Description",boughtMessage:"messages:Shop.SubsWeek.BoughtMessage",image:"/res/fbproducts/premium.png",icon:"prem_tile_icon",price:.05,trial:"1 day",period:"2 weeks",type:"subscription",projects:["riddles","heroes","wordsoup","crocword"]},subsMonthTest:{id:{facebook:"subsmonthtest.html",
android:"subsmonthtest",ios:"subsmonthtest",ok:"subsmonthtest",mymailru:34},title:"messages:Shop.SubsMonth.Title",description:"messages:Shop.SubsMonth.Description",boughtMessage:"messages:Shop.SubsMonth.BoughtMessage",image:"/res/fbproducts/premium.png",icon:"prem_tile_icon",price:.1,period:"1 month",type:"subscription",projects:["riddles","heroes","wordsoup","crocword"]},cellPack05:{id:{facebook:"cellpack05.html",android:"cellpack05",ios:"cellpack05",instant:"cellpack05",yandex:"cellpack05",mymailru:46},title:"messages:TileShop.cellPack05.Title",description:"messages:TileShop.cellPack05.Description",image:"/res/fbproducts/cell_pack_200.png",boughtMessage:"messages:Shop.cellPack05.boughtMessage",price:.49,oldPrice:4.99,reward:{boosters:{0:5}},icon:"cellbooster_png",label:5},linePack074:{id:{facebook:"linepack074.html",android:"linepack074",ios:"linepack074",instant:"linepack074",yandex:"linepack074",mymailru:47},title:"messages:TileShop.linePack074.Title",
description:"messages:TileShop.linePack074.Description",image:"/res/fbproducts/line_pack_200.png",boughtMessage:"messages:Shop.linePack074.boughtMessage",price:.74,oldPrice:7.49,reward:{boosters:{1:5}},icon:"linebooster_png",label:5},colorPack10:{id:{facebook:"colorpack10.html",android:"colorpack10",ios:"colorpack10",instant:"colorpack10",yandex:"colorpack10",mymailru:48},title:"messages:TileShop.colorPack10.Title",description:"messages:TileShop.colorPack10.Description",image:"/res/fbproducts/color_pack_200.png",boughtMessage:"messages:Shop.colorPack10.boughtMessage",price:.99,oldPrice:9.99,reward:{boosters:{2:5}},icon:"colorbooster_png",label:5},cellPack2:{id:{facebook:"cellpack2.html",android:"cellpack2",ios:"cellpack2",instant:"cellpack2",yandex:"cellpack2",mymailru:49},title:"messages:TileShop.cellPack10.Title",description:"messages:TileShop.cellPack10.Description",image:"/res/fbproducts/cell_pack_200.png",boughtMessage:"messages:Shop.cellPack10.boughtMessage",price:1.99,
oldPrice:19.99,reward:{boosters:{0:10}},icon:"cellbooster_png",label:10},linePack3:{id:{facebook:"linepack3.html",android:"linepack3",ios:"linepack3",instant:"linepack3",yandex:"linepack3",mymailru:50},title:"messages:TileShop.linePack15.Title",description:"messages:TileShop.linePack15.Description",image:"/res/fbproducts/line_pack_200.png",boughtMessage:"messages:Shop.linePack15.boughtMessage",price:2.99,oldPrice:29.99,reward:{boosters:{1:10}},icon:"linebooster_png",label:10},colorPack4:{id:{facebook:"colorpack4.html",android:"colorpack4",ios:"colorpack4",instant:"colorpack4",yandex:"colorpack4",mymailru:51},title:"messages:TileShop.colorPack20.Title",description:"messages:TileShop.colorPack20.Description",image:"/res/fbproducts/color_pack_200.png",boughtMessage:"messages:Shop.colorPack20.boughtMessage",price:3.99,oldPrice:39.99,reward:{boosters:{2:10}},icon:"colorbooster_png",label:10},unlimitedLives05:{id:{facebook:"unlimitedlives05.html",android:"unlimitedlives05",
ios:"unlimitedlives05",instant:"unlimitedlives05",yandex:"unlimitedlives05",mymailru:52},title:"messages:UnlimitedLives.Title",description:"messages:TileShop.unlimitedLives05.Description",image:"/res/fbproducts/unlimitedlives.png",boughtMessage:"messages:UnlimitedLivesBought",price:.49,oldPrice:2.99,reward:{unlimitedLives:"3 days"},icon:"life_unlim",label:"messages:UnlimitedLives.3 day"},lives074:{id:{facebook:"lives074.html",android:"lives074",ios:"lives074",instant:"lives074",yandex:"lives074",mymailru:53},title:"messages:TileShop.lives074.Title",description:"messages:TileShop.lives074.Description",image:"/res/fbproducts/lives.png",boughtMessage:"messages:Shop.lives074.boughtMessage",price:.74,oldPrice:7.49,reward:{lives:50},icon:"level_failed_heart_png",label:50},exp1:{id:{facebook:"exp1.html",android:"exp1",ios:"exp1",instant:"exp1",yandex:"exp1",mymailru:54},title:"messages:TileShop.exp1.Title",description:"messages:TileShop.exp1.Description",image:"/res/fbproducts/buyexp150.png",
boughtMessage:"messages:Shop.exp1.boughtMessage",price:.99,oldPrice:19.99,reward:{exp:25},icon:"exp_png",label:25},unlimitedLives2:{id:{facebook:"unlimitedlives2.html",android:"unlimitedlives2",ios:"unlimitedlives2",instant:"unlimitedlives2",yandex:"unlimitedlives2",mymailru:55},title:"messages:UnlimitedLives.Title",description:"messages:TileShop.unlimitedLives2.Description",image:"/res/fbproducts/unlimitedlives.png",boughtMessage:"messages:UnlimitedLivesBought",price:1.99,oldPrice:4.99,reward:{unlimitedLives:"5 days"},icon:"life_unlim",label:"messages:UnlimitedLives.5 day"},lives3:{id:{facebook:"lives3.html",android:"lives3",ios:"lives3",instant:"lives3",yandex:"lives3",mymailru:56},title:"messages:TileShop.lives3.Title",description:"messages:TileShop.lives3.Description",image:"/res/fbproducts/lives.png",boughtMessage:"messages:Shop.lives3.boughtMessage",price:2.99,oldPrice:29.99,reward:{lives:100},icon:"level_failed_heart_png",label:100},exp4:{id:{facebook:"exp4.html",android:"exp4",
ios:"exp4",instant:"exp4",yandex:"exp4",mymailru:57},title:"messages:TileShop.exp4.Title",description:"messages:TileShop.exp4.Description",image:"/res/fbproducts/buyexp150.png",boughtMessage:"messages:Shop.exp4.boughtMessage",price:3.99,oldPrice:39.99,reward:{exp:50},icon:"exp_png",label:50},gold500sale:{id:{facebook:"500goldsale.html",android:"500goldsale",ios:"500goldsale",instant:"500goldsale",yandex:"500goldsale",mymailru:65},title:"messages:Shop.Gold500.Title",description:"messages:Shop.Gold500.Description",image:"/res/fbproducts/gold2_200.png",price:.99,oldPrice:2.99,label:500,reward:{gold:500},icon:"shop_gold2_png"},gold1800sale:{id:{facebook:"1800goldsale.html",android:"1800goldsale",ios:"1800goldsale",instant:"1800goldsale",yandex:"1800goldsale",mymailru:59},title:"messages:Shop.Gold1800.Title",description:"messages:Shop.Gold1800.Description",image:"/res/fbproducts/gold3_200.png",price:2.99,oldPrice:9.99,label:1800,reward:{gold:1800},icon:"shop_gold3_png"},gold6000sale:{id:{
facebook:"6000goldsale.html",android:"6000goldsale",ios:"6000goldsale",instant:"6000goldsale",yandex:"6000goldsale",mymailru:60},title:"messages:Shop.Gold6000.Title",description:"messages:Shop.Gold6000.Description",image:"/res/fbproducts/gold4_200.png",price:5.99,oldPrice:29.99,label:6e3,reward:{gold:6e3},icon:"shop_gold4_png"},unlimitedLives:{id:{facebook:"unlimitedlives.html",android:"unlimitedlives",ios:"unlimitedlives",instant:"unlimitedlives",yandex:"unlimitedlives",mymailru:64},title:"messages:UnlimitedLives.Title",description:"messages:UnlimitedLives.Description",boughtMessage:"messages:UnlimitedLivesBought",image:"/res/fbproducts/unlimitedlives.png",price:2.99,reward:{unlimitedLives:"3 days"},icon:"unlimitedLives_png",animation:"animation",ViewClassName:LivesProductTile,TileModelClass:UnlimitedLivesTileModel},gold1:{id:{facebook:"gold1.html",android:"gold1",ios:"gold1",instant:"gold1",yandex:"gold1",mymailru:62},title:"messages:TileShop.gold1.Title",
description:"messages:TileShop.gold1.Description",image:"/res/fbproducts/gold2_200.png",boughtMessage:"messages:Shop.gold1.boughtMessage",price:.99,oldPrice:9.99,reward:{gold:1e3},icon:"boosters_sale_coin_png",label:"1000"},gold4:{id:{facebook:"gold4.html",android:"gold4",ios:"gold4",instant:"gold4",yandex:"gold4",mymailru:63},title:"messages:TileShop.gold4.Title",description:"messages:TileShop.gold4.Description",image:"/res/fbproducts/gold4_200.png",boughtMessage:"messages:Shop.gold4.boughtMessage",price:3.99,oldPrice:39.99,reward:{gold:5e3},icon:"boosters_sale_coin_png",label:"5000"},coins100:{id:{facebook:"100coins.html",android:"100coins",ios:"100coins",instant:"100coins",yandex:"100coins",mymailru:69},title:"messages:Shop.Coins100.Title",description:"messages:Shop.Coins100.Description",image:"/res/fbproducts/soft_currency_very_small_200.png?v=2",price:.99,reward:{coins:100},icon:"soft_currency_very_small_png",boughtMessage:"messages:Product.SoftCurrencyBought"},coins300:{id:{
facebook:"300coins.html",android:"300coins",ios:"300coins",instant:"300coins",yandex:"300coins",mymailru:70},title:"messages:Shop.Coins300.Title",description:"messages:Shop.Coins300.Description",image:"/res/fbproducts/soft_currency_small_200.png?v=2",price:1.99,reward:{coins:300},icon:"soft_currency_small_png",boughtMessage:"messages:Product.SoftCurrencyBought"},coins1000:{id:{facebook:"1000coins.html",android:"1000coins",ios:"1000coins",instant:"1000coins",yandex:"1000coins",mymailru:71},title:"messages:Shop.Coins1000.Title",description:"messages:Shop.Coins1000.Description",image:"/res/fbproducts/soft_currency_medium_200.png?v=2",price:4.99,reward:{coins:1e3},icon:"soft_currency_medium_png",boughtMessage:"messages:Product.SoftCurrencyBought"},coins3000:{id:{facebook:"3000coins.html",android:"3000coins",ios:"3000coins",instant:"3000coins",yandex:"3000coins",mymailru:72},title:"messages:Shop.Coins3000.Title",description:"messages:Shop.Coins3000.Description",
image:"/res/fbproducts/soft_currency_large_200.png?v=2",price:9.99,badge:"-50%",reward:{coins:3e3},icon:"soft_currency_large_png",boughtMessage:"messages:Product.SoftCurrencyBought"},growthFund:{id:{facebook:"growthfund.html",android:"growthfund",ios:"growthfund",instant:"growthfund",yandex:"growthfund",mymailru:73},title:"messages:Shop.growthFund.title",description:"messages:Shop.growthFund.description",boughtMessage:"messages:Shop.growthFund.boughtMessage",image:"/res/fbproducts/growth_fund.png",badge:"messages:GrowthFund.badge",icon:"growth_fund_icon",price:24.99,compensateReward:{gold:2800},TileModelClass:GrowthFundTileModel,ViewClassName:GrowthFundTile}},cleverapps.PaymentsManager.SCRAMBLE_PRODUCTS={highlightPack1:{id:{facebook:"highlightpack1.html",android:"highlightpack1",ios:"highlightpack1",instant:"highlightpack1",yandex:"highlightpack1",mymailru:66},title:"messages:TileShop.highlightPack1.Title",description:"messages:TileShop.highlightPack1.Description",
image:"/res/fbproducts/highlight_booster_200.png",boughtMessage:"messages:Shop.highlightPack1.boughtMessage",price:.99,oldPrice:1.99,reward:{boosters:{13:10}},icon:"highlight",label:"x10",ViewClassName:PackProductTile},eyePack2:{id:{facebook:"eyepack2.html",android:"eyepack2",ios:"eyepack2",instant:"eyepack2",yandex:"eyepack2",mymailru:67},title:"messages:TileShop.eyePack2.Title",description:"messages:TileShop.eyePack2.Description",image:"/res/fbproducts/eye_booster_200.png",boughtMessage:"messages:Shop.eyePack2.boughtMessage",price:1.99,oldPrice:4.99,reward:{boosters:{14:10}},icon:"eye",label:"x10",ViewClassName:PackProductTile},hintBoosterBeforePack3:{id:{facebook:"hintboosterbeforepack3.html",android:"hintboosterbeforepack3",ios:"hintboosterbeforepack3",instant:"hintboosterbeforepack3",yandex:"hintboosterbeforepack3",mymailru:68},title:"messages:TileShop.hintBoosterBeforePack3.Title",description:"messages:TileShop.hintBoosterBeforePack3.Description",
image:"/res/fbproducts/hint_booster_before_200.png",boughtMessage:"messages:Shop.hintBoosterBeforePack3.boughtMessage",price:2.99,oldPrice:6.99,reward:{boosters:{15:10}},icon:"bonus_hint_sale_png",label:"x10",ViewClassName:PackProductTile}},cleverapps.PaymentsManager.PACK_PRODUCTS={sweetPack:{id:{facebook:"sweetpack.html",android:"sweetpack",ios:"sweetpack",instant:"sweetpack",yandex:"sweetpack",mymailru:35},title:"messages:TileShop.sweetPack.Title",description:"messages:TileShop.sweetPack.Description",image:"/res/fbproducts/sweet_pack_200.png",boughtMessage:"messages:Shop.sweetPack.boughtMessage",price:5.99,reward:{gold:500,boosters:{0:1,1:1}},icon:"sweet_pack_png",ViewClassName:PackProductTile},jamPack:{id:{facebook:"jampack.html",android:"jampack",ios:"jampack",instant:"jampack",yandex:"jampack",mymailru:36},title:"messages:TileShop.jamPack.Title",description:"messages:TileShop.jamPack.Description",image:"/res/fbproducts/jam_pack_200.png",
boughtMessage:"messages:Shop.jamPack.boughtMessage",price:12.99,reward:{gold:1800,boosters:{0:1,1:1,2:1}},icon:"jam_pack_png",ViewClassName:PackProductTile},tastyPack:{id:{facebook:"tastypack.html",android:"tastypack",ios:"tastypack",instant:"tastypack",yandex:"tastypack",mymailru:40},title:"messages:TileShop.tastyPack.Title",description:"messages:TileShop.tastyPack.Description",image:"/res/fbproducts/tasty_pack_200.png?v=1",boughtMessage:"messages:Shop.tastyPack.boughtMessage",price:25.99,reward:{gold:3800,boosters:{0:3,1:3,2:3}},icon:"tasty_pack_png",ViewClassName:PackProductTile},honeyPack:{id:{facebook:"honeypack.html",android:"honeypack",ios:"honeypack",instant:"honeypack",yandex:"honeypack",mymailru:37},title:"messages:TileShop.honeyPack.Title",description:"messages:TileShop.honeyPack.Description",image:"/res/fbproducts/honey_pack_200.png?v=1",boughtMessage:"messages:Shop.honeyPack.boughtMessage",price:39.99,reward:{gold:6e3,boosters:{0:5,1:5,2:5}},icon:"honey_pack_png",
ViewClassName:PackProductTile},epicPack:{id:{facebook:"epicpack.html",android:"epicpack",ios:"epicpack",instant:"epicpack",yandex:"epicpack",mymailru:38},title:"messages:TileShop.epicPack.Title",description:"messages:TileShop.epicPack.Description",image:"/res/fbproducts/epic_pack_200.png?v=1",boughtMessage:"messages:Shop.epicPack.boughtMessage",price:129.99,reward:{gold:25e3,boosters:{0:20,1:20,2:20}},icon:"epic_pack_png",ViewClassName:PackProductTile}};var customizeProducts=function(){var e=cleverapps.extend||Object.assign;for(var t in"match3"!==cleverapps.config.type&&"differences"!==cleverapps.config.type||e(cleverapps.PaymentsManager.PRODUCTS,cleverapps.PaymentsManager.PACK_PRODUCTS),"merge"===cleverapps.config.type&&(cleverapps.PaymentsManager.PRODUCTS.gold500.reward={gold:200},cleverapps.PaymentsManager.PRODUCTS.gold500.videoReward={gold:50},cleverapps.PaymentsManager.PRODUCTS.gold1800.reward={gold:900},cleverapps.PaymentsManager.PRODUCTS.gold1800.videoReward={gold:200},
cleverapps.PaymentsManager.PRODUCTS.gold3800.reward={gold:2100},cleverapps.PaymentsManager.PRODUCTS.gold3800.videoReward={gold:600},cleverapps.PaymentsManager.PRODUCTS.gold6000.reward={gold:3500},cleverapps.PaymentsManager.PRODUCTS.gold6000.videoReward={gold:1e3},cleverapps.PaymentsManager.PRODUCTS.gold25000.reward={gold:14e3},cleverapps.PaymentsManager.PRODUCTS.gold25000.videoReward={gold:4e3}),"differences"===cleverapps.config.type&&(cleverapps.PaymentsManager.PRODUCTS.sweetPack.reward.boosters={8:2,9:2},cleverapps.PaymentsManager.PRODUCTS.jamPack.reward.boosters={8:3,9:3},cleverapps.PaymentsManager.PRODUCTS.tastyPack.reward.boosters={8:5,9:5},cleverapps.PaymentsManager.PRODUCTS.honeyPack.reward.boosters={8:7,9:7},cleverapps.PaymentsManager.PRODUCTS.epicPack.reward.boosters={8:30,9:30}),"solitaire"===cleverapps.config.type&&"spades"!==cleverapps.config.name&&(e(cleverapps.PaymentsManager.PRODUCTS,cleverapps.PaymentsManager.PACK_PRODUCTS),
cleverapps.PaymentsManager.PRODUCTS.addMoves1.price=1.49,cleverapps.PaymentsManager.PRODUCTS.sweetPack.reward.boosters={10:2,11:2,12:2},cleverapps.PaymentsManager.PRODUCTS.jamPack.reward.boosters={10:3,11:3,12:3},cleverapps.PaymentsManager.PRODUCTS.tastyPack.reward.boosters={10:5,11:5,12:5},cleverapps.PaymentsManager.PRODUCTS.honeyPack.reward.boosters={10:7,11:7,12:7},cleverapps.PaymentsManager.PRODUCTS.epicPack.reward.boosters={10:30,11:30,12:30}),"match3"===cleverapps.config.type&&(cleverapps.PaymentsManager.PRODUCTS.sweetPack.reward.boosters={5:1,6:1,7:1},cleverapps.PaymentsManager.PRODUCTS.jamPack.reward.boosters={5:2,6:2,7:2},cleverapps.PaymentsManager.PRODUCTS.tastyPack.reward.boosters={0:3,1:3,5:3,6:3,7:3},cleverapps.PaymentsManager.PRODUCTS.honeyPack.reward.boosters={0:5,1:5,5:5,6:5,7:5},cleverapps.PaymentsManager.PRODUCTS.epicPack.reward.boosters={0:18,1:18,5:18,6:18,7:18}),"ios"===cleverapps.config.source&&(cleverapps.PaymentsManager.PRODUCTS.gold25000.price=99.99),
"ios"===cleverapps.config.source&&cleverapps.PaymentsManager.PRODUCTS.epicPack&&(cleverapps.PaymentsManager.PRODUCTS.epicPack.price=99.99),-1!==["instant","ios"].indexOf(cleverapps.config.source)&&(cleverapps.PaymentsManager.PRODUCTS.cellPack05.price=.99,cleverapps.PaymentsManager.PRODUCTS.cellPack05.oldPrice=9.99,cleverapps.PaymentsManager.PRODUCTS.linePack074.price=1.99,cleverapps.PaymentsManager.PRODUCTS.linePack074.oldPrice=19.99,cleverapps.PaymentsManager.PRODUCTS.colorPack10.price=2.99,cleverapps.PaymentsManager.PRODUCTS.colorPack10.oldPrice=29.99,cleverapps.PaymentsManager.PRODUCTS.lives074.price=1.99,cleverapps.PaymentsManager.PRODUCTS.lives074.oldPrice=19.99,cleverapps.PaymentsManager.PRODUCTS.unlimitedLives05.price=.99,cleverapps.PaymentsManager.PRODUCTS.unlimitedLives05.oldPrice=9.99),-1!==["android","ios"].indexOf(cleverapps.config.source)&&(cleverapps.PaymentsManager.PRODUCTS.subsWeek.price=4.99,cleverapps.PaymentsManager.PRODUCTS.subsWeek.trial="3 days",
cleverapps.PaymentsManager.PRODUCTS.subsWeek.period="1 week",cleverapps.PaymentsManager.PRODUCTS.subsWeek.title="messages:Shop.SubsWeek.ThreeDays.Title",cleverapps.PaymentsManager.PRODUCTS.subsWeek.description="messages:Shop.SubsWeek.ThreeDays.Description"),"olympics"===cleverapps.config.name&&(cleverapps.PaymentsManager.PRODUCTS.lives3.icon="boosters_sale_energy_png",cleverapps.PaymentsManager.PRODUCTS.lives074.icon="boosters_sale_energy_png"),"scramble"!==cleverapps.config.name&&"wordheaps"!==cleverapps.config.name||(e(cleverapps.PaymentsManager.PRODUCTS,cleverapps.PaymentsManager.PACK_PRODUCTS),e(cleverapps.PaymentsManager.PRODUCTS,cleverapps.PaymentsManager.SCRAMBLE_PRODUCTS),cleverapps.PaymentsManager.PRODUCTS.sweetPack.reward.boosters={13:2,14:2,15:2},cleverapps.PaymentsManager.PRODUCTS.jamPack.reward.boosters={13:3,14:3,15:3},cleverapps.PaymentsManager.PRODUCTS.tastyPack.reward.boosters={13:5,14:5,15:5},cleverapps.PaymentsManager.PRODUCTS.honeyPack.reward.boosters={13:7,14:7,
15:7},cleverapps.PaymentsManager.PRODUCTS.epicPack.reward.boosters={13:30,14:30,15:30}),cleverapps.PaymentsManager.PRODUCTS){cleverapps.PaymentsManager.PRODUCTS[t].key=t}};"undefined"!=typeof exports?module.exports={getProducts:function(e){return Object.assign(cleverapps.config,e),customizeProducts(),cleverapps.PaymentsManager.PRODUCTS}}:customizeProducts(),cleverapps.PaymentsHistory=function(){this.load(),this.onAddPaymentListeners={}},cleverapps.PaymentsHistory.prototype.addPayment=function(e){var t={price:e.price,productId:e.id,textPrice:e.getCurrentPrice(),time:Date.now()};if(this.payments.push(t),this.save(),cleverapps.serverFlags.setFlag(cleverapps.ServerFlags.PAYER),cleverapps.abTest){var s=Math.round(e.price*cleverapps.User.calcPriceCoef()*100)/100;cleverapps.abTest.purchaseEvent(s)}var n=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_SECOND);if(n){var i=n.getName();cleverapps.eventLogger.logEvent("mission_"+i,{amount:Math.round(
e.price*cleverapps.User.calcPriceCoef()*100)/100})}cleverapps.values(this.onAddPaymentListeners).forEach(cleverapps.callFunc)},cleverapps.PaymentsHistory.prototype.isPayer=function(){return 0<this.payments.length||cleverapps.serverFlags.hasFlag(cleverapps.ServerFlags.PAYER)},cleverapps.PaymentsHistory.prototype.getLastPayment=function(){return 0<this.payments.length?this.payments[this.payments.length-1]:void 0},cleverapps.PaymentsHistory.prototype.calcFavoriteProduct=function(e){var s={},t={},n=e.filter(function(e){return cleverapps.config.products[e]});n.forEach(function(e){t[cleverapps.config.products[e].price]=e,s[e]=0}),this.payments.forEach(function(e){t[e.price]&&s[t[e.price]]++});var i=void 0,o=0;return n.forEach(function(e){var t=cleverapps.config.products[e].price;2<=s[e]&&o<t&&(i=e,o=t)}),i},cleverapps.PaymentsHistory.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.PAYMENTS_HISTORY);e||(e={payments:[]}),Array.isArray(e)&&(e={payments:e}),
this.payments=e.payments},cleverapps.PaymentsHistory.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.PAYMENTS_HISTORY,{payments:this.payments})},cleverapps.PaymentsHistory.VIP_NONE=0,cleverapps.PaymentsHistory.VIP_WEAK=1,cleverapps.PaymentsHistory.VIP_MEDIUM=2,cleverapps.PaymentsHistory.VIP_WHALE=3,cleverapps.PaymentsHistory.VIP_BIGWHALE=4,cleverapps.PaymentsHistory.BRACKETS=[2.99,9.99,29.99,99.99],cleverapps.PaymentsHistory.prototype.isVIP=function(){return!cleverapps.flags.videoAdsMainMonetization&&this.classify()>=cleverapps.PaymentsHistory.VIP_WHALE},cleverapps.PaymentsHistory.prototype.classify=function(){for(var e=0,t=this.payments.length-1;0<=t;t--){var s=this.payments[t];if(s.time+cleverapps.parseInterval("1 month")<Date.now())break;e+=s.price}for(var n=0;n<cleverapps.PaymentsHistory.BRACKETS.length&&!(e<cleverapps.PaymentsHistory.BRACKETS[n]+.001);n++);return n},cleverapps.NKPayments=function(){for(var e in cleverapps.Payments.call(this),
cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}},cleverapps.NKPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.NKPayments.prototype.constructor=cleverapps.NKPayments,cleverapps.NKPayments.prototype.calcLoadedPrice=function(e){return Math.floor(10*e)+"EGB"},cleverapps.NKPayments.prototype.open=function(e,s){var t={};t[opensocial.Payment.Field.AMOUNT]=parseInt(e.loadedPrice),t[opensocial.Payment.Field.MESSAGE]=e.description;var n=opensocial.newPayment(t);FullscreenControlButton.exitFullscreen(function(){opensocial.requestPayment(n,function(e){var t=e.getData();e.hadError()||!t.getField("responseMessage")?s(cleverapps.Social.CODE_FAILED,e):s(cleverapps.Social.CODE_SUCCEED,t)})})},cleverapps.NKPayments.prototype.isAvailable=function(){return!0},cleverapps.NKPayments.isAppropriate=function(){return cleverapps.NK.isAppropriate()},cleverapps.NKPayments.prototype.validate=function(e,t){t&&t()},
cleverapps.NKPayments.prototype.logPurchase=function(e){},cleverapps.DraugiemPayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}this.paymentTesters=["5531190","5531196","5531268"]},cleverapps.DraugiemPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.DraugiemPayments.prototype.constructor=cleverapps.DraugiemPayments,cleverapps.DraugiemPayments.prototype.calcLoadedPrice=function(e){return e+" €"},cleverapps.DraugiemPayments.prototype.stopCheckPayments=function(){this.checkPaymentInterval&&(clearInterval(this.checkPaymentInterval),this.checkPaymentInterval=void 0)},cleverapps.DraugiemPayments.prototype.runCheckPayments=function(){this.stopCheckPayments();var e=Date.now();this.checkPaymentInterval=setInterval(function(){this.checkPayment(),Date.now()-e>cleverapps.parseInterval("3 minutes")&&this.onFailedPayment()}.bind(this),1e3)},
cleverapps.DraugiemPayments.prototype.onFailedPayment=function(){this.stopCheckPayments(),this.paymentCallback&&(this.paymentCallback=void 0)},cleverapps.DraugiemPayments.prototype.onSuccessPayment=function(){this.stopCheckPayments(),this.paymentCallback&&(this.paymentCallback(cleverapps.Social.CODE_SUCCEED),this.paymentCallback=void 0)},cleverapps.DraugiemPayments.prototype.checkPayment=function(){console.log("ask transaction status: "+this.paymentId),cleverapps.social.api("transactions/check",{id:this.paymentId},function(e,t){void 0!==t&&(console.log("status: ",t.status),"FAILED"===t.status?this.onFailedPayment():"OK"===t.status&&this.onSuccessPayment())}.bind(this))},cleverapps.DraugiemPayments.prototype.isProductExists=function(e){return cleverapps.config.products[e]&&DraugiemProducts[e]},cleverapps.DraugiemPayments.prototype.open=function(s,n){if(!DraugiemProducts[s.key])return n(cleverapps.Social.CODE_FAILED),void setTimeout(function(){throw console.log(s),
"Draugiem payment configuration error for "+s.key},0);var e={price:Math.round(100*parseFloat(s.loadedPrice)),service:DraugiemProducts[s.key]};-1!==this.paymentTesters.indexOf(cleverapps.social.getUserID())&&(e.price=1),cleverapps.social.api("transactions/create",e,function(e,t){console.log(DraugiemProducts[s.key],e,t),e===cleverapps.Social.CODE_SUCCEED?(this.paymentId=t.transaction.id,this.paymentCallback=n,draugiemWindowOpen(t.transaction.link,350,400,function(){this.runCheckPayments()}.bind(this))):(console.log(DraugiemProducts[s.key],s,s.key),n(cleverapps.Social.CODE_FAILED))}.bind(this))},cleverapps.DraugiemPayments.prototype.isAvailable=function(){return!0},cleverapps.DraugiemPayments.isAppropriate=function(){return cleverapps.Draugiem.isAppropriate()},cleverapps.DraugiemPayments.prototype.validate=function(e,t){t&&t()},cleverapps.DraugiemPayments.prototype.logPurchase=function(e){},cleverapps.XsollaPayments=function(){cleverapps.Payments.call(this)},
cleverapps.XsollaPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.XsollaPayments.prototype.constructor=cleverapps.XsollaPayments,cleverapps.XsollaPayments.prototype.needSocialCheckConnection=function(){return!1},cleverapps.XsollaPayments.prototype.open=function(e,t){if(cleverapps.social.isLoggedIn()){t=cleverapps.once(t);var n=!1,i=!1,s=document.getElementById("xsollaPayStationIframe"),o=document.getElementById("xsollaPayStationCloseButton"),a=document.getElementById("xsollaPayStation"),r=document.getElementById("xsollaShadow"),l="https://store.xsolla.com/pages/buy.php?type=virtual_item&project_id="+cleverapps.config.xsollaProjectId+"&sku="+e.itemId+"&xsolla_login_token="+cleverapps.social.accessToken;cleverapps.config.debugMode&&(l+="&mode=sandbox");var c=function(){s.style.marginTop=(cc.view.getFrameSize().height-s.clientHeight)/2+"px";var e=s.getBoundingClientRect();o.style.top=45+e.top+"px",o.style.right=6+e.left+"px"};Resolution.afterResolutionChanged(c),
o.onclick=a.onclick=function(){if(!i)return setTimeout(function(){a.style.display="none",n&&!cleverapps.config.debugMode&&(fbq("track","Purchase",{currency:"USD",value:e.price}),cleverapps.firebase.logEvent("purchase",{currency:"USD",value:e.price,transaction_id:cleverapps.user.id+"_"+Date.now()})),t(n?cleverapps.Social.CODE_SUCCEED:cleverapps.Social.CODE_CANCELLED)},700),r.style.opacity="0",s.onload=void 0,s.src="",!1},s.src=l,s.onload=function(){a.style.display="block",c(),r.style.opacity="0.6";var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"==e?"onmessage":"message",function(e){if(e.data&&"string"==typeof e.data){var t=JSON.parse(e.data);if(t.data&&t.data.paymentInfo){var s=t.data.paymentInfo.status;cleverapps.config.debugMode&&console.log("Xsolla payment event: "+JSON.stringify(t.data.paymentInfo)),"invoice"===s?i=!0:"done"===s?n=!(i=!1):"troubled"===s&&(n=i=!1)}}},!1)}}else cleverapps.social.login(function(){this.open(e,t)}.bind(this),
function(){cleverapps.Notification.create("messages:xsollaLoginNeeded")})},cleverapps.XsollaPayments.prototype.isAvailable=function(){return!0},cleverapps.XsollaPayments.prototype.validate=function(e,t){t&&t()},cleverapps.XsollaPayments.isAppropriate=function(){return cleverapps.Xsolla.isAppropriate()},cleverapps.XsollaPayments.prototype.logPurchase=function(e){},cleverapps.YandexPayments=function(){for(var e in cleverapps.Payments.call(this),cleverapps.config.products){var t=cleverapps.config.products[e];t.loadedPrice=this.calcLoadedPrice(t.price)}cleverapps.social.whenInitialized("yandexpayments",this.init.bind(this))},cleverapps.YandexPayments.prototype=Object.create(cleverapps.Payments.prototype),cleverapps.YandexPayments.prototype.constructor=cleverapps.YandexPayments,cleverapps.YandexPayments.prototype.calcLoadedPrice=function(e){return Math.floor(20*e)+" YAN"},cleverapps.YandexPayments.prototype.init=function(){cleverapps.social.ysdk.getPayments({signed:!0}).then(function(e){
this.yaPayments=e,(cleverapps.config.debugMode||cleverapps.Random.nextDouble()<.001)&&this.checkPrices()}.bind(this)).catch(function(e){console.log("Payments unavailable",e)})},cleverapps.YandexPayments.prototype.checkPrices=function(){this.yaPayments.getCatalog().then(function(e){var s=[],n=[];e.forEach(function(e){var t=function(e){for(var t in cleverapps.config.products)if(cleverapps.config.products[t].id.yandex===e)return cleverapps.config.products[t]}(e.id);t?parseInt(t.loadedPrice)!==parseInt(e.priceValue)&&s.push(e.id):n.push(e.id)}),0<n.length&&cleverapps.throwAsync("Yandex missing products: "+n.join(",")),0<s.length&&cleverapps.throwAsync("Yandex inconsistent products prices: "+s.join(","))}.bind(this)).catch(function(e){console.log("Failed prices check",e)})},cleverapps.YandexPayments.prototype.open=function(e,s){if(this.yaPayments){if(!e.id.yandex)return cleverapps.throwAsync("Unregistered yandex product: "+e.itemId),void s(cleverapps.Social.CODE_FAILED);var n=function(){
clearTimeout(this.compensateCheckTimeout),this.compensateCheckTimeout=setTimeout(function(){delete this.compensateCheckTimeout}.bind(this),5e3)}.bind(this);FullscreenControlButton.exitFullscreen(function(){this.yaPayments.purchase({id:e.id.yandex,developerPayload:JSON.stringify({userId:cleverapps.social.user.id,itemId:e.itemId})}).then(function(t){n(),cleverapps.RestClient.post("/yandexpayments/addPayment/",{signature:t.signature},function(e){"ok"===e&&s(cleverapps.Social.CODE_SUCCEED,t)}.bind(this))}.bind(this)).catch(function(e){s(cleverapps.Social.CODE_FAILED)}.bind(this))}.bind(this))}else console.log("Payments unavailable")},cleverapps.YandexPayments.prototype.canCompensate=function(){return cleverapps.social.isLoggedIn()&&this.yaPayments&&!cleverapps.config.debugMode},cleverapps.YandexPayments.prototype.compensate=function(){this.checkPaymentTimeout||this.compensateProductCode||this.yaPayments.getPurchases().then(function(e){if(e.length){var t=JSON.parse(e[0].developerPayload)
;t.itemId?(this.compensateProductCode=t.itemId,this.compensatingPurchases=e):this.yaPayments.consumePurchase(purchase[0].purchaseToken)}}.bind(this))},cleverapps.YandexPayments.prototype.logPurchase=function(e){},cleverapps.YandexPayments.prototype.validate=function(e,t){e&&this.yaPayments.consumePurchase(e.purchaseToken),t&&t()},cleverapps.YandexPayments.prototype.compensateValidate=function(e){this.compensatingPurchases&&(this.yaPayments.consumePurchase(this.compensatingPurchases[0].purchaseToken),cleverapps.RestClient.post("/yandexpayments/addCompensated/",{signature:this.compensatingPurchases.signature}),delete this.compensatingPurchases),e&&e()},cleverapps.YandexPayments.prototype.isAvailable=function(){return!0},cleverapps.YandexPayments.isAppropriate=function(){return cleverapps.Yandex.isAppropriate()};var CustomSyncers={extractors:{users:function(){var e=cleverapps.user;if(e){var t={id:e.id,gold:e.gold,registered:e.registered,visited:e.visited,source:e.source,channel:e.channel,
abtest:e.abtest,progressCompare:e.progressCompare,progress:e.progress};return void 0!==e.level&&(t.level=e.level),void 0!==e.episode&&(t.episode=e.episode),void 0!==e.exp&&(t.exp=e.exp),t}},bonuses:function(){if(cleverapps.periodicBonus)return{event:cleverapps.periodicBonus.when}},bonusgames:function(){if(cleverapps.bonusRoundChest)return{event:cleverapps.bonusRoundChest.when}},games:function(){if(cleverapps.GameSyncer)return cleverapps.GameSyncer.getInfo()},settings:function(){if(cleverapps.settings)return cleverapps.settings.getSaveInfo()},serverflags:function(){if(cleverapps.serverFlags)return cleverapps.serverFlags.getInfo()},tempgoods:function(){if(cleverapps.tempGoods)return cleverapps.tempGoods.getInfo()},lives:function(){if(cleverapps.lives)return cleverapps.lives.getInfo()},boosters:function(){if(cleverapps.boostersCounter)return cleverapps.boostersCounter.data},starchests:function(){if(cleverapps.starChest)return{stars:cleverapps.starChest.stars}},packs:function(){if(
cleverapps.packManager)return{used:cleverapps.packManager.used}},dailytasks:function(){if(cleverapps.dailyTasks)return cleverapps.dailyTasks.getInfo()},missions:function(){if(cleverapps.missionManager)return cleverapps.missionManager.getInfo()},piggybank:function(){if(cleverapps.piggyBank)return cleverapps.piggyBank.getInfo()},gun:function(){if(cleverapps.gun)return cleverapps.gun.getInfo()},heroes:function(){if("undefined"!=typeof match3&&match3&&match3.heroes)return match3.heroes.getInfo()},subscription:function(){if(cleverapps.subscription)return cleverapps.subscription.getInfo()},userdailycup:function(){if(cleverapps.dailyCup)return cleverapps.dailyCup.getInfo()},userweeklycup:function(){if(cleverapps.weeklyCup)return cleverapps.weeklyCup.getInfo()},forces:function(){if(cleverapps.forces)return cleverapps.forces.getInfo()},metha:function(){if(cleverapps.metha.getType()!==Metha.HOSE&&cleverapps.metha.getMainObject().getInfo)return cleverapps.metha.getMainObject().getInfo()},
cookiejar:function(){if(levels&&levels.cookieJar)return levels.cookieJar.getCounterValue()},competitionstatistics:function(){if(cleverapps.competitionStatistics)return cleverapps.competitionStatistics.getInfo()},cardskins:function(){if(cleverapps.cardSkins)return cleverapps.cardSkins.getInfo()},growthfund:function(){if(cleverapps.growthFund)return cleverapps.growthFund.getInfo()},unitsshop:function(){return cleverapps.unitsShop&&cleverapps.unitsShop.getInfo()},unitslibrary:function(){return cleverapps.unitsLibrary&&cleverapps.unitsLibrary.getInfo()}},importerData:{users:function(e){var t=cleverapps.user;if(t){for(var s in e)t[s]=e[s];t.save(!1),cleverapps.abTest&&cleverapps.abTest.setGroup(t.abtest),levels.episodes.reset(),levels.episodes.setCurrentEpisode(cleverapps.user.episode)}},bonuses:function(e){if(cleverapps.periodicBonus){var t=cleverapps.periodicBonus;e.event<t.when||e.event>Date.now()+t.interval||(t.locked=!0,t.setWhenUnlock(e.event),t.save(!1),t.changeLockedListener())}},
bonusgames:function(e){if(cleverapps.bonusRoundChest){var t=cleverapps.bonusRoundChest;e.event<t.when||e.event>Date.now()+t.interval||(t.locked=!0,t.setWhenUnlock(e.event),t.save(!1),t.changeLockedListener())}},games:function(e){cleverapps.GameSyncer&&cleverapps.GameSyncer.saveInfo(e)},settings:function(){},boosters:function(e){cleverapps.boostersCounter&&(cleverapps.boostersCounter.data=e,cleverapps.boostersCounter.addInitAmount(!0),cleverapps.boostersCounter.save(!1))},serverflags:function(e){cleverapps.serverFlags&&cleverapps.serverFlags.updateInfo(e,!0)},tempgoods:function(e){cleverapps.tempGoods&&cleverapps.tempGoods.updateInfo(e,!0)},lives:function(e){cleverapps.lives&&cleverapps.lives.updateInfo(e,!0)},missions:function(e){cleverapps.missionManager&&cleverapps.missionManager.updateInfo(e,!0)},piggybank:function(e){cleverapps.piggyBank&&cleverapps.piggyBank.updateInfo(e,!0)},starchests:function(e){cleverapps.starChest&&(cleverapps.starChest.locked=!0,
cleverapps.starChest.setStars(e.stars),cleverapps.starChest.save(!1),cleverapps.starChest.changeLockedListener())},packs:function(e){cleverapps.packManager&&(cleverapps.packManager.used=e.used,cleverapps.packManager.save(!1))},dailytasks:function(e){cleverapps.dailyTasks&&(cleverapps.dailyTasks.load(e),cleverapps.dailyTasks.save(!1))},gun:function(e){cleverapps.gun&&cleverapps.gun.updateInfo(e,!0)},heroes:function(e){"undefined"!=typeof match3&&match3&&match3.heroes&&match3.heroes.updateInfo(e,!0)},subscription:function(e){cleverapps.subscription&&cleverapps.subscription.updateInfo(e,!0)},userdailycup:function(e){cleverapps.dailyCup&&cleverapps.dailyCup.updateInfo(e,!0)},userweeklycup:function(e){cleverapps.weeklyCup&&cleverapps.weeklyCup.updateInfo(e,!0)},forces:function(e){cleverapps.forces&&cleverapps.forces.updateInfo(e,!0)},metha:function(e){cleverapps.metha.getType()!==Metha.HOSE&&cleverapps.metha.getMainObject().updateInfo&&cleverapps.metha.getMainObject().updateInfo(e)},
cookiejar:function(e){levels&&levels.cookieJar&&levels.cookieJar.updateValue(e,!0)},competitionstatistics:function(e){cleverapps.competitionStatistics&&cleverapps.competitionStatistics.updateInfo(e,!0)},cardskins:function(e){cleverapps.cardSkins&&cleverapps.cardSkins.updateInfo(e,!0)},units:function(e){cleverapps.unitSyncer&&cleverapps.unitSyncer.updateInfo(e,!0)},growthfund:function(e){cleverapps.growthFund&&cleverapps.growthFund.updateInfo(e)},unitsshop:function(e){cleverapps.unitsShop&&cleverapps.unitsShop.updateInfo(e)},unitslibrary:function(e){cleverapps.unitsLibrary&&cleverapps.unitsLibrary.updateInfo(e)}}};if(cleverapps.Synchronizer=function(){this._session="a";var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SESSION_SAVE_KEY,{raw:!0});null!=e&&(this._session=e),this._syncIn=new cleverapps.SyncIn,this._syncOut=new cleverapps.SyncOut,this._syncInProgress=!1,this._needResync=!1,this._syncId=0,this._clientSessionExpired=!1,
this._clientChecksumDifferent=!cleverapps.isLocalhost()&&!1===cleverapps.DataLoader.checksumMatch,this.synced=!1,cleverapps.DataLoader.checkClientSession()||this.clientSessionExpired()},cleverapps.Synchronizer.prototype._startCheckInterval=function(){if(!this._checkIntervalRunned){this._checkIntervalRunned=!0;var e=0;return setInterval(function(){this.synced&&e%15!=0||this.syncWhenReady(),e++}.bind(this),6e4),!0}return!1},cleverapps.Synchronizer.prototype.needClientSessionExpiredWindow=function(){return this._clientSessionExpired},cleverapps.Synchronizer.prototype.showClientSessionExpiredWindow=function(){cleverapps.metha.display({focus:"clientSessionExpired",action:function(){new RestartWindow({title:"ClientSessionExpired.title",contentMessage:"ClientSessionExpired.message"})}})},cleverapps.Synchronizer.prototype.clientSessionExpired=function(){this._clientSessionExpired||(this.synced=!1,this._clientSessionExpired=!0,cleverapps.allInitialized&&(cleverapps.metha.isFocused(
)||this.showClientSessionExpiredWindow()))},cleverapps.Synchronizer.prototype.reset=function(){this.synced=!1,this._loadedSession=void 0,this._loadedSync=void 0,this._session="a",this._syncInProgress=!1,this._needResync=!1,cleverapps.DataLoader.remove(cleverapps.DataLoaderTypes.SESSION_SAVE_KEY),this._syncOut.reset()},cleverapps.Synchronizer.prototype.syncWhenReady=function(){cleverapps.DataLoader.checkClientSession(),this._syncInProgress?this._needResync=!0:this._sync()},cleverapps.Synchronizer.prototype.addUpdateTask=function(e){cleverapps.flags.norest||this._syncOut.addUpdateTask(e)},cleverapps.Synchronizer.prototype.on=function(){this._clientSessionExpired||(void 0!==this._loadedSession&&(this._session=this._loadedSession,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SESSION_SAVE_KEY,this._session,{raw:!0}),cleverapps.DataLoader.processSaveQueue()),this._loadedSession=void 0,this._loadedSync=void 0,this.synced=!0,this._syncOut.run(),this._onSyncLoaded(),
this.onceSyncCompletedListener&&(this.onceSyncCompletedListener(),this.onceSyncCompletedListener=void 0),this._needResync&&(this._needResync=!1,this.syncWhenReady()))},cleverapps.Synchronizer.prototype._getPath=function(e){return"/"+e+"/"+cleverapps.user.id+"/"+this._session},cleverapps.Synchronizer.prototype._syncCallback=function(e){var t=this._syncId;return function(){this._syncId!==t||this._clientSessionExpired||e.apply(this,arguments)}.bind(this)},cleverapps.Synchronizer.prototype._sync=function(){if(!this._syncInProgress&&!this._clientSessionExpired){var t=this._startCheckInterval();this._syncId++,this._syncInProgress=!0;var s=this.synced;this.synced=!1;var n=cleverapps.social.getAccessToken()||"undefined",e=this._getPath("newsync")+"/"+n,i={episode:levels.user.episode,level:levels.user.level,progress:levels.user.progress,source:levels.user.source,progressCompare:cleverapps.user.progressCompare,exp:levels.user.exp,localStorageEnabled:cleverapps.DataLoader.enabled,
localStorageCorrupted:cleverapps.DataLoader.corrupted,version:cleverapps.config.version,clientChecksumDifferent:this._clientChecksumDifferent};this._clientChecksumDifferent&&(i.syncOut=this._syncOut.getAllData());var o=this._syncCallback(function(e){this._syncInProgress=!1,delete this._clientChecksumDifferent,this._loadedSession=e.key,this._loadedSync=e.sync,this._zeroSession=e.zeroSession,e.cheater&&(cleverapps.user.cheater=!0,cleverapps.flags.update()),void 0!==this._loadedSession?this._loadedSync?(console.log("sync in"),this._syncIn.process()):this._syncOut.process():this.on()}).bind(this),a=this._syncCallback(function(e){if(this._syncInProgress=!1,e&&403===e.status){if("undefined"===n&&cleverapps.social.getAccessToken())return void this.syncWhenReady();cleverapps.social.isLoggedIn()||(this.wantsSocialConnectWindow=!0,this.displaySocialConnectWindow())}else(t||s)&&cleverapps.config.debugMode&&setTimeout(function(){cleverapps.Notification.create("Error saving project")},t?2500:0)
;this._onSyncLoaded()}).bind(this);cleverapps.RestClient.post(e,i,o,a)}},cleverapps.Synchronizer.prototype.displaySocialConnectWindow=function(){cleverapps.metha.display({focus:"SynchronizerCheckConnection",actions:[function(e){cleverapps.social.checkConnection(function(){e(),this.syncWhenReady()}.bind(this),e,{withWindow:!0,errorMessage:"messages:FbConnectWindow.TryAgain"})}.bind(this),function(e){this.wantsSocialConnectWindow=!1,e()}.bind(this)]})},cleverapps.Synchronizer.prototype._onSyncLoaded=function(){this._onceFirstSyncCompletedListener&&(this._onceFirstSyncCompletedListener(),this._onceFirstSyncCompletedListener=void 0)},cleverapps.Synchronizer.SESSION_EXPIRED=99,cleverapps.SyncIn=function(){},cleverapps.SyncIn.prototype.executeSync=function(e){for(var t in cleverapps.synchronizer._clientSessionExpired&&(cleverapps.DataLoader.resetClientSession(),cleverapps.synchronizer._clientSessionExpired=!1),cleverapps.synchronizer._syncOut.reset(),e){var s=e[t],
n=CustomSyncers.importerData[t];n?n(s):console.log("No importer for "+t)}cleverapps.DataLoader.processSaveQueue()},cleverapps.SyncIn.prototype.sceneRefresh=function(){cleverapps.flags.reset(),levels&&(levels.reset(),cleverapps.windows.reset(),cleverapps.scenes.reset(),cleverapps.isKnockoutGame()&&cleverapps.metha.getMainObject().knockoutGame.stopRumble(),cleverapps.metha.distract({focus:"afterReloadWindow",action:function(e){cleverapps.metha.gotoMainScene(e)}}))},cleverapps.SyncIn.prototype.needShowReloadWindow=function(){return cleverapps.synchronizer._loadedSync},cleverapps.SyncIn.prototype.showReloadWindow=function(){cleverapps.config.wysiwygMode||cleverapps.metha.display({focus:"ReloadWindow",action:function(e){Game.currentGame&&Game.currentGame.stop(),new ReloadWindow(function(){this.needShowReloadWindow()?(this.executeSync(cleverapps.synchronizer._loadedSync),cleverapps.synchronizer.on(),this.sceneRefresh()):e()}.bind(this))}.bind(this)})},
cleverapps.SyncIn.prototype.process=function(){cleverapps.scenes.isLoaderScene()&&!cleverapps.allInitialized?(this.executeSync(cleverapps.synchronizer._loadedSync),cleverapps.synchronizer.on()):cleverapps.metha.isFocused()||this.showReloadWindow()},cleverapps.SyncOut=function(){this.task={},this.currentTask={},this.onTasksEmptyListener=function(){},this.inProgress=!1,this.sendNextUpdate=cleverapps.accumulate(cleverapps.SyncOut.FAST_ACCUMULATE_TIMEOUT,this._sendUpdateInner.bind(this)),(cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SYNC)||[]).forEach(function(e){CustomSyncers.extractors[e]&&(this.task[e]=!0)},this)},cleverapps.SyncOut.prototype.getAccumulateTimeout=function(){var e=cleverapps.paymentsHistory.isPayer(),t=cleverapps.user.registered+cleverapps.parseInterval("3 days")>Date.now(),s=cleverapps.SyncOut.MEDIUM_ACCUMULATE_TIMEOUT;return cleverapps.config.debugMode||e||t?s=cleverapps.SyncOut.FAST_ACCUMULATE_TIMEOUT:cleverapps.synchronizer._zeroSession&&(
s=cleverapps.SyncOut.SLOW_ACCUMULATE_TIMEOUT),s},cleverapps.SyncOut.prototype.run=function(){this.sendNextUpdate()},cleverapps.SyncOut.prototype.save=function(){var e=cleverapps.extend(this.currentTask,this.task);cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SYNC,Object.keys(e))},cleverapps.SyncOut.prototype.reset=function(){this.task={},this.currentTask={},this.save()},cleverapps.SyncOut.prototype.nextTask=function(){this.currentTask=this.task,this.task={}},cleverapps.SyncOut.prototype.addUpdateTask=function(e){CustomSyncers.extractors[e]&&!this.task[e]&&(this.task[e]=!0,this.save(),cleverapps.synchronizer.synced&&cleverapps.allInitialized&&this.sendNextUpdate())},cleverapps.SyncOut.prototype.onSuccess=function(e){if(this.inProgress=!1,cleverapps.synchronizer.synced){if(e.error&&e.error===cleverapps.Synchronizer.SESSION_EXPIRED)return console.log("onUpdate: session needs renewal"),cleverapps.synchronizer.reset(),void cleverapps.synchronizer.syncWhenReady();0===e&&console.log(
"error saving object"),this.currentTask={},this.save(),this.sendNextUpdate()}},cleverapps.SyncOut.prototype.onFailure=function(e){this.inProgress=!1,cleverapps.synchronizer.synced&&(console.log("Failure: ",e),this.task=cleverapps.extend(this.currentTask,this.task),this.currentTask={},setTimeout(this.sendNextUpdate.bind(this),cleverapps.SyncOut.RETRY_TIMEOUT))},cleverapps.SyncOut.prototype._sendUpdateInner=function(){cleverapps.DataLoader.onSaved(function(){if(!this.inProgress&&cleverapps.synchronizer.synced&&(cleverapps.DataLoader.checkClientSession(),!cleverapps.synchronizer._clientSessionExpired))if(this.nextTask(),0!==Object.keys(this.currentTask).length){var e={};for(var t in this.currentTask){var s=CustomSyncers.extractors[t]();e[t]=s}this.inProgress=!0,console.log("Sending update ",e),e.version=cleverapps.config.version,cleverapps.RestClient.post(cleverapps.synchronizer._getPath("sync"),e,this.onSuccess.bind(this),this.onFailure.bind(this))}else this.onTasksEmptyListener()}.bind(
this)),this.sendNextUpdate=cleverapps.accumulate(this.getAccumulateTimeout(),this._sendUpdateInner.bind(this))},cleverapps.SyncOut.prototype.getAllData=function(){try{var e={};for(var t in CustomSyncers.extractors)e[t]=CustomSyncers.extractors[t]&&CustomSyncers.extractors[t]();return e}catch(e){cleverapps.throwAsync("SyncOut.getAllData error",e)}},cleverapps.SyncOut.prototype.process=function(){for(var e in CustomSyncers.extractors)this.task[e]=!0;cleverapps.synchronizer.on()},cleverapps.SyncOut.RETRY_TIMEOUT=6e4,cleverapps.SyncOut.FAST_ACCUMULATE_TIMEOUT=2e3,cleverapps.SyncOut.MEDIUM_ACCUMULATE_TIMEOUT=1e4,cleverapps.SyncOut.SLOW_ACCUMULATE_TIMEOUT=6e4,RewardsConfig={Packs:[],Tournament:{},DailyCup:{}},"board"!==cleverapps.config.type&&"spades"!==cleverapps.config.name||(RewardsConfig={Tournament:{prepareByRich:!0,places:[{gold:300},{gold:250},{gold:200},{gold:100},{gold:50}]},Sale:{gold:500},TreasureSearch:{prepareByRich:!0,gold:100},StickersCollection:{prepareByRich:!0,gold:100},
DailyTask:{prepareByRich:!0,0:[{gold:80}],1:[{gold:120}],2:[{gold:160}],3:[{gold:180}]},DailyCup:{places:[{gold:400},{gold:250},{gold:150},{gold:50},{gold:50},{gold:50},{gold:50},{gold:50},{gold:50},{gold:50}]},Packs:[{gold:800},{gold:2600},{gold:17e3}],Subscription:{gold:600},MiniGame:[{gold:50},{gold:100}],MiniGameNovice:[{gold:50}],Favorite:{gold1800:{gold:300},gold3800:{gold:600},gold6000:{gold:1200},gold25000:{gold:5e3}}}),"match3"===cleverapps.config.type)var RewardsConfig={MiniGame:[{gold:50},{boosters:{5:1},gold:50},{boosters:{5:1}},{gold:50},{boosters:{6:1}},{boosters:{6:1},gold:50},{gold:50},{boosters:{7:1}},{boosters:{7:1},gold:50}],MiniGameBeginner:[{unlimitedLives:"30 minutes"}],MiniGameNovice:[{gold:50}],Tournament:{prepareByRich:!0,places:[{boosters:{5:2,6:2,7:2},unlimitedLives:"12 hours"},{boosters:{6:1,7:1},unlimitedLives:"6 hour"},{boosters:{5:1,6:1},unlimitedLives:"1 hour"},{boosters:{6:1},unlimitedLives:"45 minutes",exp:5},{boosters:{5:1},
unlimitedLives:"30 minutes",exp:3}]},Sale:{boosters:{0:1,1:1,2:1}},DailyTask:{prepareByRich:!0,0:[{boosters:{5:1}},{gold:50},{stars:3}],1:[{boosters:{0:1},gold:50,exp:1},{boosters:{1:1},exp:1},{stars:4,gold:50,exp:1}],2:[{boosters:{2:1},gold:50,exp:3},{boosters:{0:1,1:1},gold:50,exp:3},{boosters:{0:1,1:1,2:1},exp:3}],3:[{boosters:{0:1,1:1,2:1},gold:100,exp:5}]},TreasureSearch:{prepareByRich:!0,unlimitedLives:"12 hours",stars:10,exp:20},DailyCup:{places:[{unlimitedLives:"1 day",boosters:{5:5,6:5,7:5}},{unlimitedLives:"6 hours",boosters:{5:4,6:4,7:4}},{unlimitedLives:"3 hours",boosters:{5:3,6:3,7:3}},{unlimitedLives:"2 hour",boosters:{5:1,6:1,7:1}},{boosters:{5:1,6:1},unlimitedLives:"2 hour"},{boosters:{5:1,6:1},unlimitedLives:"2 hour"},{boosters:{5:1,6:1},unlimitedLives:"2 hour"},{boosters:{5:1},unlimitedLives:"1 hour"},{boosters:{5:1},unlimitedLives:"1 hour"},{boosters:{5:1},unlimitedLives:"1 hour"}]},Packs:[{boosters:{0:1,1:1,2:1},gold:300,unlimitedLives:"1 day"},{boosters:{2:3},
gold:1800,unlimitedLives:"3 day"},{boosters:{0:9,1:9,2:9},gold:12e3,unlimitedLives:"9 day"}],Subscription:{gold:300,exp:1,unlimitedLives:"2 hours",randomBoosters:{types:[0,1,2],amount:3}},Favorite:{sweetPack:{unlimitedLives:"12 hours",exp:3,stars:2},jamPack:{unlimitedLives:"1 day",exp:5,stars:4},tastyPack:{unlimitedLives:"2 days",exp:15,stars:6},honeyPack:{unlimitedLives:"3 days",exp:20,stars:8},epicPack:{unlimitedLives:"5 days",exp:40,stars:12},gold1800:{unlimitedLives:"1 day",exp:5,stars:4},gold3800:{unlimitedLives:"2 day",exp:15,stars:6},gold6000:{unlimitedLives:"3 day",exp:20,stars:8},gold25000:{unlimitedLives:"5 day",exp:40,stars:10}}};-1!==["tripeaks"].indexOf(cleverapps.config.name)&&(RewardsConfig={Sale:{gold:500},MiniGame:[{gold:50,randomBoosters:{types:[10,11,12],amount:1}},{gold:50,randomBoosters:{types:[10,11,12],amount:2}},{randomBoosters:{types:[10,11,12],amount:1}},{betGold:500,randomBoosters:{types:[10,11,12],amount:2}}],MiniGameBeginner:[{gold:50},{gold:100}],
MiniGameNovice:[{gold:50,randomBoosters:{types:[10,11,12],amount:1}}],TreasureSearch:{unlimitedLives:"12 hours",boosters:{10:1,11:1,12:1}},Tournament:{prepareByRich:!0,places:[{boosters:{10:2,11:2,12:2},unlimitedLives:"3 hours"},{boosters:{11:2,12:2},unlimitedLives:"1 hour"},{boosters:{10:1,11:1,12:1},unlimitedLives:"30 minutes"},{boosters:{11:1,12:1},unlimitedLives:"15 minutes"},{boosters:{10:1,11:1},unlimitedLives:"15 minutes"}]},DailyTask:{0:[{unlimitedLives:"15 minutes"}],1:[{boosters:{11:1},gold:80}],2:[{boosters:{12:2},gold:160,unlimitedLives:"15 minutes"}],3:[{boosters:{12:2},gold:160,unlimitedLives:"15 minutes"}]},DailyCup:{places:[{unlimitedLives:"1 day",betGold:2400,boosters:{10:5,11:5,12:5}},{unlimitedLives:"6 hours",boosters:{10:4,11:4,12:4}},{unlimitedLives:"3 hours",boosters:{10:3,11:3,12:3}},{unlimitedLives:"1 hour",boosters:{10:2,11:2,12:2}},{unlimitedLives:"30 minutes",boosters:{10:1,11:1,12:1}},{unlimitedLives:"30 minutes",boosters:{10:1,11:1,12:1}},{
unlimitedLives:"30 minutes",boosters:{10:1,11:1,12:1}},{unlimitedLives:"15 minutes",betGold:50,boosters:{10:1,11:1,12:1}},{unlimitedLives:"15 minutes",betGold:50,boosters:{10:1,11:1,12:1}},{unlimitedLives:"15 minutes",betGold:50,boosters:{10:1,11:1,12:1}}]},Packs:[{boosters:{0:0,1:0,2:0,10:2,11:2,12:2},gold:200,unlimitedLives:void 0},{boosters:{0:0,1:0,2:0,10:6,11:6,12:6},gold:800},{boosters:{0:0,1:0,2:0,10:30,11:30,12:30},gold:8e3}],Subscription:{gold:250,unlimitedLives:"3 hours",boosters:{10:2,11:2,12:2}},Favorite:{gold1800:{unlimitedLives:"1 day",gold:150},gold3800:{unlimitedLives:"2 day",gold:300},gold6000:{unlimitedLives:"3 day",gold:600},gold25000:{unlimitedLives:"5 day",gold:2500},sweetPack:{unlimitedLives:"30 minutes",boosters:{10:1,11:1,12:1}},jamPack:{gold:250,boosters:{10:1,11:1,12:1},unlimitedLives:"2 hours"},tastyPack:{gold:550,boosters:{10:2,11:2,12:2},unlimitedLives:"6 hours"},honeyPack:{gold:750,boosters:{10:3,11:3,12:3},unlimitedLives:"12 hours"},epicPack:{gold:5e3,
boosters:{10:6,11:6,12:6},unlimitedLives:"1 day"}}}),"differences"===cleverapps.config.type&&(RewardsConfig={Tournament:{prepareByRich:!0,places:[{boosters:{8:3,9:3},unlimitedLives:"3 hours"},{boosters:{8:2,9:2},unlimitedLives:"1 hour"},{boosters:{8:1,9:1},unlimitedLives:"30 minutes"},{boosters:{8:1},unlimitedLives:"15 minutes"},{boosters:{9:1},unlimitedLives:"15 minutes"}]},Sale:{boosters:{8:1,9:1}},DailyTask:{0:[{unlimitedLives:"15 minutes"}],1:[{gold:80,boosters:{8:1}}],2:[{gold:160,unlimitedLives:"15 minutes",boosters:{8:1,9:1}}],3:[{gold:160,unlimitedLives:"15 minutes",boosters:{8:1,9:1}}]},MiniGame:[{gold:50,randomBoosters:{types:[8,9],amount:1}},{gold:100}],MiniGameBeginner:[{gold:50,randomBoosters:{types:[8,9],amount:1}},{gold:100}],MiniGameNovice:[{gold:50,randomBoosters:{types:[8,9],amount:1}}],TreasureSearch:{unlimitedLives:"12 hours",boosters:{8:1,9:2}},DailyCup:{places:[{unlimitedLives:"1 day",boosters:{2:1}},{unlimitedLives:"6 hours",boosters:{1:1}},{
unlimitedLives:"3 hours",boosters:{0:1}},{unlimitedLives:"1 hour"},{unlimitedLives:"30 minutes"},{unlimitedLives:"30 minutes"},{unlimitedLives:"30 minutes"},{unlimitedLives:"15 minutes"},{unlimitedLives:"15 minutes"},{unlimitedLives:"15 minutes"}]},Packs:[{boosters:{0:0,1:0,2:0,8:2,9:2},gold:200},{boosters:{0:0,1:0,2:0,8:6,9:6},gold:800},{boosters:{0:0,1:0,2:0,8:30,9:30},gold:8e3}],Subscription:{unlimitedLives:"3 hours",gold:250,boosters:{8:3,9:3}},WeeklyCup:{places:[{gold:3e3},{gold:2e3},{gold:1e3},{gold:200},{gold:200},{gold:200},{gold:200},{gold:200},{gold:200},{gold:200}]}}),"olympics"===cleverapps.config.name&&(RewardsConfig.Subscription={gold:600,unlimitedLives:"3 hours"},RewardsConfig.TreasureSearch={unlimitedLives:"12 hours"},RewardsConfig.WeeklyCup={places:[{gold:3e3},{gold:2e3},{gold:1e3},{gold:200},{gold:200},{gold:200},{gold:200},{gold:200},{gold:200},{gold:200}]},RewardsConfig.Favorite={gold1800:{unlimitedLives:"1 day",gold:150},gold3800:{unlimitedLives:"2 day",gold:300},
gold6000:{unlimitedLives:"3 day",gold:600},gold25000:{unlimitedLives:"5 day",gold:2500}}),"scramble"===cleverapps.config.name&&(RewardsConfig.Tournament={prepareByRich:!0,places:[{boosters:{13:2,14:2,15:2}},{boosters:{14:2,15:2}},{boosters:{13:1,14:1,15:1}},{boosters:{14:1,15:1}},{boosters:{13:1,14:1}}]},RewardsConfig.Packs=[{boosters:{13:2,14:2,15:2},gold:200},{boosters:{13:6,14:6,15:6},gold:800},{boosters:{13:30,14:30,15:30},gold:8e3}],RewardsConfig.DailyTask={0:[{boosters:{13:1}}],1:[{boosters:{14:1},gold:80}],2:[{boosters:{15:2},gold:160}],3:[{boosters:{13:1,14:1,15:1},gold:160}]},RewardsConfig.DailyCup={places:[{boosters:{13:5,14:5,15:5},gold:300},{boosters:{13:4,14:4,15:4},gold:200},{boosters:{13:3,14:3,15:3},gold:100},{boosters:{13:2,14:2,15:2},gold:50},{boosters:{13:1,14:1,15:1},gold:50},{boosters:{13:1,14:1,15:1},gold:50},{boosters:{13:1,14:1,15:1},gold:50},{boosters:{13:1,14:1,15:1}},{boosters:{13:1,14:1,15:1}},{boosters:{13:1,14:1,15:1}}]},RewardsConfig.MiniGame=[{gold:50,
randomBoosters:{types:[14,15],amount:1}},{gold:50,randomBoosters:{types:[14,15],amount:2}},{randomBoosters:{types:[14,15],amount:1}},{randomBoosters:{types:[14,15],amount:2}}],RewardsConfig.MiniGameBeginner=[{gold:50},{gold:100}],RewardsConfig.MiniGameNovice=[{gold:50,randomBoosters:{types:[13,14,15],amount:1}}],RewardsConfig.Subscription={gold:250,boosters:{13:2,14:2,15:2}},RewardsConfig.Favorite.sweetPack={boosters:{13:1,14:1,15:1}},RewardsConfig.Favorite.jamPack={gold:250,boosters:{13:1,14:1,15:1}},RewardsConfig.Favorite.tastyPack={gold:550,boosters:{13:2,14:2,15:2}},RewardsConfig.Favorite.honeyPack={gold:750,boosters:{13:3,14:3,15:3}},RewardsConfig.Favorite.epicPack={gold:5e3,boosters:{13:6,14:6,15:6}},RewardsConfig.TreasureSearch={gold:100,boosters:{13:1,14:1,15:1}}),-1!==["heroes","runes","riddles","adventure","mergeriddles","mergeheroes"].indexOf(cleverapps.config.name)&&(RewardsConfig.Packs=[{boosters:{5:1,6:1,7:1},gold:500,unlimitedLives:"1 day"},{boosters:{5:2,6:2,7:2},
gold:1800,unlimitedLives:"3 day"},{boosters:{5:14,6:14,7:14},gold:12e3,unlimitedLives:"9 day"}]),"merge"===cleverapps.config.type&&(RewardsConfig.Packs=[{gold:50,energy:200},{gold:100,energy:350,wands:250,worker:"3 day"},{gold:1e3,energy:1500,wands:500,coins:3e3,worker:"5 day"}],RewardsConfig.EnergyFeast={places:[{unit:{code:"energyplantchest",stage:2,amount:1}},{unit:{code:"energyplantchest",stage:1,amount:1}},{unit:{code:"energyplantchest",stage:0,amount:1}}]},RewardsConfig.CoinsFeast={places:[{unit:{code:"coinsplantchest",stage:2,amount:1}},{unit:{code:"coinsplantchest",stage:1,amount:1}},{unit:{code:"coinsplantchest",stage:0,amount:1}}]},RewardsConfig.KrakenFeast={places:[{unit:{code:"rubiesplantchest",stage:2,amount:1}},{unit:{code:"rubiesplantchest",stage:1,amount:1}},{unit:{code:"rubiesplantchest",stage:0,amount:1}}],offer:{unit:[{code:"wands",stage:2,amount:2},{code:"sacks",stage:2,amount:3}]}},RewardsConfig.Subscription={energy:100,unit:{code:"treasure",stage:2,amount:1},
worker:{subscription:!0}}),RewardsConfig.BonusWorld=[{level:3,reward:{boosters:{13:1,14:1}}},{level:8,reward:{gold:50,boosters:{13:1,14:1}}},{level:15,reward:{gold:200,boosters:{13:1,14:1,15:1}}}],"match3"===cleverapps.config.type&&(RewardsConfig.BonusWorld=[{level:3,reward:{unlimitedLives:"1 hour"}},{level:8,reward:{unlimitedLives:"1 hours",exp:5,boosters:{5:1,6:1}}},{level:15,reward:{gold:150,unlimitedLives:"24 hours",boosters:{5:1,6:1,7:1}}}]);var RewardsHelper={iconByRewardName:function(e,t){return t?RewardsHelper.SMALL_ICONS[e]:RewardsHelper.ICONS[e]},textByRewardName:function(e,t,s){var n=""+t;return"unlimitedLives"===e?n=Messages.get(Product.FormatUnlimitedLives(t,s.short).title):-1===["stars","exp","gold"].indexOf(e)&&isNaN(parseInt(e))||(n=(s.itemsPrefix||"")+n),n},getDisplayData:function(e,t){t=t||{};var s={};for(var n in e)if("boosters"===n)for(var i in e.boosters)s["booster_"+i]={img:RewardsHelper.iconByRewardName(i),txt:RewardsHelper.textByRewardName(i,e.boosters[i],t)
};else s[n]={img:RewardsHelper.iconByRewardName(n),txt:RewardsHelper.textByRewardName(n,e[n],t)};return s}};RewardsHelper.ICONS={unlimitedLives:bundles.reward_icons.frames.life_unlim_small,gold:bundles.reward_icons.frames.gold_small_png,stars:bundles.reward_icons.frames.stars_small_png,exp:bundles.reward_icons.frames.reward_exp_small_png,moves:bundles.reward_icons.frames.moves_png,lives:bundles.reward_icons.frames.life_png,0:bundles.reward_icons.frames.cellbooster,1:bundles.reward_icons.frames.linebooster,2:bundles.reward_icons.frames.colorbooster,3:bundles.reward_icons.frames.gold_small_png,4:bundles.reward_icons.frames.joker_png,5:bundles.reward_icons.frames.heroes_png,6:bundles.reward_icons.frames.moves_png,7:bundles.reward_icons.frames.multicolor_png,8:bundles.reward_icons.frames.hat,9:bundles.reward_icons.frames.pot,10:bundles.reward_icons.frames.magnet_small_png,11:bundles.reward_icons.frames.dice_small_png,12:bundles.reward_icons.frames.joker_small_png,
13:bundles.reward_icons.frames.highlight,14:bundles.reward_icons.frames.eye,15:bundles.reward_icons.frames.hint},RewardsHelper.SMALL_ICONS={unlimitedLives:bundles.reward_icons.frames.life_unlim_small,gold:bundles.reward_icons.frames.gold_small_png,stars:bundles.reward_icons.frames.stars_small_png,exp:bundles.reward_icons.frames.reward_exp_small_png,moves:bundles.reward_icons.frames.moves_small_png,lives:bundles.reward_icons.frames.life_small_png,0:bundles.reward_icons.frames.cellbooster_small,1:bundles.reward_icons.frames.linebooster_small,2:bundles.reward_icons.frames.colorbooster_small,3:bundles.reward_icons.frames.gold_small_png,4:bundles.reward_icons.frames.joker_small_png,5:bundles.reward_icons.frames.heroes_small_png,6:bundles.reward_icons.frames.moves_small_png,7:bundles.reward_icons.frames.multicolor_small_png,8:bundles.reward_icons.frames.hat_small,9:bundles.reward_icons.frames.pot_small,10:bundles.reward_icons.frames.magnet_small_png,
11:bundles.reward_icons.frames.dice_small_png,12:bundles.reward_icons.frames.joker_small_png,13:bundles.reward_icons.frames.highlight_small,14:bundles.reward_icons.frames.eye_small,15:bundles.reward_icons.frames.hint_small};var RewardedAdsManager=function(){this.plugin=void 0,PlingaAds.isAppropriate()?this.plugin=new PlingaAds:Yodo1Ads.isAppropriate()?this.plugin=new Yodo1Ads:WebViewAds.isAppropriate()?this.plugin=new WebViewAds:OKAds.isAppropriate()?this.plugin=new OKAds:VKAppAds.isAppropriate()?this.plugin=new VKAppAds:VKAds.isAppropriate()?this.plugin=new VKAds:cleverapps.Instant.isAppropriate()?this.plugin=new InstantAds:VideoAds.isAppropriate()?this.plugin=new VideoAds:YandexAds.isAppropriate()&&(this.plugin=new YandexAds),this.onStartPlayListeners={},this.onStartPlayListeners[RewardedAdsManager.REWARDED]={},this.onStartPlayListeners[RewardedAdsManager.INTERSTITIAL]={},this.onEndPlayListeners={},this.onEndPlayListeners[RewardedAdsManager.REWARDED]={},
this.onEndPlayListeners[RewardedAdsManager.INTERSTITIAL]={},this.onRewardListeners={},this.onChangeLoaderStateListeners={},this.onChangeLoaderStateListeners[RewardedAdsManager.REWARDED]={},this.onChangeLoaderStateListeners[RewardedAdsManager.INTERSTITIAL]={},void 0!==this.plugin&&(this.load(),this.plugin.onChangeLoaderState=function(e,t){console.log("onChangeLoaderState "+e,this.plugin.loaderState[e]),this.plugin.loaderState[e]===AdsPlugin.LOADER_STATE.READY?cleverapps.paymentsHistory.isVIP()||(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.AD_READY+"_"+e),cleverapps.playSession.set(cleverapps.EVENTS.AD_READY+"_"+e,!0)):"error"===t&&setTimeout(this.cacheNextAd.bind(this,e),cleverapps.parseInterval(RewardedAdsManager.RETRY_INTERVAL)),this.runListeners(this.onChangeLoaderStateListeners[e],this.plugin.loaderState[e])}.bind(this),this.plugin.onChangeVideoState=function(e){console.log("onChangeVideoState "+e,this.plugin.videoState[e]),
this.plugin.videoState[e]===AdsPlugin.VIDEO_STATE.PLAY?(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.AD_START+"_"+e),e===RewardedAdsManager.INTERSTITIAL&&(this.lastShown[RewardedAdsManager.INTERSTITIAL]=Date.now(),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.WATCH_ADS),this.save()),this.runListeners(this.onStartPlayListeners[e])):(this.removeAdOverlay(),this.runListeners(this.onEndPlayListeners[e]),this.plugin.loadAfterPlay&&this.cacheNextAd(e))}.bind(this),this.plugin._onReward=function(){RewardedAdsManager.rewardTime=this.lastShown[RewardedAdsManager.REWARDED]=Date.now(),cleverapps.paymentsHistory.isVIP()||(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.AD_FINISH+"_"+RewardedAdsManager.REWARDED),cleverapps.playSession.inc(cleverapps.EVENTS.REWARDED_WATCHED)),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.WATCH_ADS),this.runListeners(this.onRewardListeners),this.save()}.bind(this))};RewardedAdsManager.prototype.init=function(){RewardedAdsManager.IsEnabled(
)&&this.plugin.init(function(){this.plugin.inited=!0,this.checkCacheQueue(),setInterval(this.checkCacheQueue.bind(this),cleverapps.parseInterval("1 minute"))}.bind(this))},RewardedAdsManager.prototype.checkCacheQueue=function(){RewardedAdsManager.ACTIVE_ADS.forEach(function(e){this.isAvailable(e)?this.plugin.expired(e)&&(this.plugin.reset(e),this.cacheNextAd(e)):this.cacheNextAd(e)}.bind(this))},RewardedAdsManager.prototype.cacheNextAd=function(e){cleverapps.paymentsHistory.isVIP()||(console.log("RewardedAdsManager caching "+e),this.plugin.cache(e))},RewardedAdsManager.prototype.isAvailable=function(e){return!!RewardedAdsManager.IsEnabled()&&(cleverapps.paymentsHistory.isVIP()?e===RewardedAdsManager.REWARDED:!!this.plugin.isAvailable(e)&&(e!==RewardedAdsManager.INTERSTITIAL||levels.user.checkAvailable(RewardedAdsManager.INTERSTITIAL_AVAILABLE)))},RewardedAdsManager.prototype.loadAndPlay=function(e){if(this.adIsRunning())cleverapps.Notification.create("messages:AdsRunning");else if(
this.isAvailable(RewardedAdsManager.REWARDED))this.playRewarded(e);else{var t,s;cleverapps.rewardedAdsManager.cacheNextAd(RewardedAdsManager.REWARDED),cleverapps.metha.isFocused()?t=new WaitWindow:cleverapps.metha.display({focus:"LoadingAds",action:function(e){t=new WaitWindow,cleverapps.metha.onceNoWindowsListener=e}});var n=function(){delete this.onChangeLoaderStateListeners[RewardedAdsManager.REWARDED].loadAndPlay,clearTimeout(s),t.close(!0)}.bind(this);s=setTimeout(n,1e4),this.onChangeLoaderStateListeners[RewardedAdsManager.REWARDED].loadAndPlay=function(){n(),this.playRewarded(e)}.bind(this)}},RewardedAdsManager.prototype.removeAdOverlay=function(){cleverapps.audio.unmute(),this.rewardOverlay&&(this.rewardOverlay.removeFromParent(),this.rewardOverlay=void 0),RewardedAdsManager.onceOnRemoveOveraly&&(RewardedAdsManager.onceOnRemoveOveraly(),RewardedAdsManager.onceOnRemoveOveraly=void 0)},RewardedAdsManager.prototype.createVipRewarded=function(){var t=function(){
this.plugin.rewardAndFinish(!0)}.bind(this),s=function(){this.plugin.setFinished(RewardedAdsManager.REWARDED,!0)}.bind(this);this.plugin.setPlaying(RewardedAdsManager.REWARDED),cleverapps.windows.isActive()?new VIPRewardedWindow(t,s):cleverapps.metha.display({focus:"VIPRewardWindow",action:function(e){new VIPRewardedWindow(t,s),cleverapps.metha.onceNoWindowsListener=e}})},RewardedAdsManager.prototype.createAdOverlay=function(t){if(cleverapps.audio.mute(),t===RewardedAdsManager.REWARDED){var s=function(){var e=cleverapps.once(function(){t===RewardedAdsManager.REWARDED?this.plugin.rewardAndFinish():this.plugin.setFinished(t)}.bind(this));this.rewardOverlay=new RewardedAdOverlay(e),cc.director.getRunningScene().addChild(this.rewardOverlay)}.bind(this);cleverapps.windows.isActive()?s():cleverapps.metha.display({focus:"ShowReward",action:function(e){s(),RewardedAdsManager.onceOnRemoveOveraly=e}})}},RewardedAdsManager.prototype.adIsRunning=function(){if(!RewardedAdsManager.IsEnabled()
)return!1;var t=!1;return RewardedAdsManager.ACTIVE_ADS.forEach(function(e){this.plugin.adIsRunning(e)&&(t=!0)}.bind(this)),t},RewardedAdsManager.prototype.playRewarded=function(e){if(!this.adIsRunning())return cleverapps.paymentsHistory.isVIP()?(this.onRewardListeners.adReward=e,void this.createVipRewarded()):void(this.isAvailable(RewardedAdsManager.REWARDED)?(this.createAdOverlay(RewardedAdsManager.REWARDED),this.onRewardListeners.adReward=e,this.plugin.playAd(RewardedAdsManager.REWARDED),this.plugin.loadAfterPlay||this.cacheNextAd(RewardedAdsManager.REWARDED)):cleverapps.Notification.create("messages:NoAdsFound"));cleverapps.Notification.create("messages:AdsRunning")},RewardedAdsManager.prototype.canShowInterstitial=function(){return!(!RewardedAdsManager.IsEnabled()||-1===RewardedAdsManager.ACTIVE_ADS.indexOf(RewardedAdsManager.INTERSTITIAL)||!this.isAvailable(RewardedAdsManager.INTERSTITIAL))&&(!(cleverapps.paymentsHistory.classify()>=cleverapps.PaymentsHistory.VIP_WEAK)&&(!((
this.lastShown[RewardedAdsManager.REWARDED]||0)+cleverapps.parseInterval(RewardedAdsManager.INTERSTITIAL_REWARD_INTERVAL)>Date.now())&&(!((this.lastShown[RewardedAdsManager.INTERSTITIAL]||0)+cleverapps.parseInterval(RewardedAdsManager.INTERSTITIAL_INTERVAL)>Date.now())&&0<RewardedAdsManager.INTERSTITIAL_PROB[Math.min(levels.user.episode,RewardedAdsManager.INTERSTITIAL_PROB.length-1)])))},RewardedAdsManager.prototype.showInterstitial=function(){if(this.adIsRunning())cleverapps.Notification.create("messages:AdsRunning");else if(this.canShowInterstitial(RewardedAdsManager.INTERSTITIAL)){var e=RewardedAdsManager.INTERSTITIAL_PROB[Math.min(levels.user.episode,RewardedAdsManager.INTERSTITIAL_PROB.length-1)];Math.random()<e&&(this.createAdOverlay(RewardedAdsManager.INTERSTITIAL),this.plugin.playAd(RewardedAdsManager.INTERSTITIAL),this.plugin.loadAfterPlay||this.cacheNextAd(RewardedAdsManager.INTERSTITIAL))}},RewardedAdsManager.prototype.runListeners=function(e,t){for(var s in e)e[s](t)},
RewardedAdsManager.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.REWARDED_ADS_MANAGER);e||(e={}),this.lastShown=e.reward||e},RewardedAdsManager.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.REWARDED_ADS_MANAGER,this.lastShown)},RewardedAdsManager.IsEnabled=function(){return void 0!==cleverapps.rewardedAdsManager.plugin},RewardedAdsManager.REWARDED="rewarded",RewardedAdsManager.INTERSTITIAL="interstitial",RewardedAdsManager.ACTIVE_ADS=[RewardedAdsManager.REWARDED],RewardedAdsManager.RETRY_INTERVAL="30 seconds",RewardedAdsManager.INTERSTITIAL_AVAILABLE={episode:1,level:10},RewardedAdsManager.INTERSTITIAL_PROB=[0,0,.3,.3,.5,.5,.7,1],RewardedAdsManager.INTERSTITIAL_REWARD_INTERVAL="3 day",RewardedAdsManager.INTERSTITIAL_INTERVAL="10 minutes","match3"===cleverapps.config.type&&(RewardedAdsManager.INTERSTITIAL_PROB=[0,0,0,0,.3,.5,.5,.7,1]),"merge"===cleverapps.config.type&&(RewardedAdsManager.INTERSTITIAL_PROB=[1],
RewardedAdsManager.INTERSTITIAL_AVAILABLE={episode:0,level:5});var RewardedAdOverlay=cc.LayerColor.extend({ctor:function(e){var t=cc.director.getWinSize();this._super(new cc.Color(0,0,0,80),t.width,t.height),this.setContentSize2(t.width,t.height),this.setAnchorPoint2(),this.timeLeft=cleverapps.parseInterval(RewardedAdOverlay.TIMEOUT);var s=new cleverapps.CountDown(this.timeLeft,{onTick:this.onTick.bind(this),onFinish:e});cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(){return!0},onTouchEnded:function(){return this.isAutoCloseAvailable()&&e(),!0}.bind(this)},this),cleverapps.UI.disableHover=!0,this.registerCleanupCallback(function(){cleverapps.UI.disableHover=!1,s.remove()}),this.addLoadText()},onTick:function(e){this.timeLeft=e,this.isAutoCloseAvailable()&&(this.autoCloseText||this.addAutoCloseText(),this.autoCloseText.setString(Messages.get("RewardAutoClose",{timeout:Math.ceil(e/1e3)})),this.loadText&&(
this.loadText.runAction(new cc.Sequence(new cc.FadeOut(.3),new cc.CallFunc(this.addCloseText.bind(this)),new cc.RemoveSelf)),this.loadText=void 0))},addAutoCloseText:function(){this.autoCloseText=cleverapps.UI.generateOnlyText("",cleverapps.styles.FONTS.REWARDED_AD_OVERLAY_AUTO_CLOSE_TEXT),this.autoCloseText.setPositionRound(cleverapps.styles.RewardedAdOverlay.autoClose),this.addChild(this.autoCloseText),this.autoCloseText.setOpacity(0),this.autoCloseText.runAction(new cc.Sequence(new cc.DelayTime(1),new cc.FadeIn(.3)))},addLoadText:function(){this.loadText=cleverapps.UI.generateOnlyText("messages:Loading",cleverapps.styles.FONTS.REWARDED_AD_OVERLAY_TEXT),this.loadText.setPositionRound(cleverapps.styles.RewardedAdOverlay.text),this.addChild(this.loadText),this.loadText.setOpacity(0),this.loadText.runAction(new cc.FadeIn(.3))},addCloseText:function(){var e=cleverapps.UI.generateOnlyText("messages:RewardClickToClose",cleverapps.styles.FONTS.REWARDED_AD_OVERLAY_TEXT);e.fitTo(
cleverapps.styles.RewardedAdOverlay.text.width),e.setPositionRound(cleverapps.styles.RewardedAdOverlay.text),this.addChild(e),e.setOpacity(0),e.runAction(new cc.FadeIn(.3))},isAutoCloseAvailable:function(){return this.timeLeft<=cleverapps.parseInterval(RewardedAdOverlay.AUTO_CLOSE_AVAILABLE)}});RewardedAdOverlay.TIMEOUT="65 seconds",RewardedAdOverlay.AUTO_CLOSE_AVAILABLE="60 seconds",cleverapps.overrideFonts(cleverapps.styles.FONTS,{REWARDED_AD_OVERLAY_AUTO_CLOSE_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},REWARDED_AD_OVERLAY_TEXT:{size:60,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.RewardedAdOverlay={text:{width:600,x:{align:"center"},y:{align:"center"}},autoClose:{x:{align:"center"},y:{align:"center",dy:-100}}};var VIPRewardedWindow=Window.extend({onWindowLoaded:function(e,t){this.onReward=e,this.onCancel=t,this._super({name:"VIPRewardedWindow",
content:this.createContent(),noBackground:!0}),"merge"===cleverapps.config.type&&this.addPerson()},addPerson:function(){var e=cleverapps.styles.VIPRewardedWindow.person;this.person=new WindowPerson,this.person.setAnchorPoint2(),this.person.setPositionRound(e),this.person.setLocalZOrder(1),this.addChild(this.person),this.person.changePerson({json:bundles.dialogues.jsons.king_json,idle:"dialogue_smile",scale:e.scale})},onChangeSceneSize:function(){this._super(),this.person.setPositionRound(cleverapps.styles.VIPRewardedWindow.person)},createContent:function(){var e=cleverapps.styles.VIPRewardedWindow,t=new cc.Node;t.setContentSize2(e),t.setAnchorPoint2();var s=new cleverapps.Spine(bundles.vip_window.jsons.vip_title_json);s.setAnchorPoint2(),s.setPositionRound(e.title),s.setAnimation(0,"idle",!0),t.addChild(s);var n=cleverapps.UI.generateOnlyText("messages:VIPRewardedWindow.title",cleverapps.styles.FONTS.VIPREWARDEDWINDOW_TITLE_TEXT);n.setAnchorPoint2(),n.setPositionRound(e.title.text),
n.setDimensions(e.title.text.width,0),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.addChild(n);var i=new cleverapps.Spine(bundles.vip_window.jsons.vip_icon_json);i.setAnchorPoint2(),i.setPositionRound(e.icon),i.setAnimation(0,"animation",!0),t.addChild(i);var o=new cleverapps.UI.generateOnlyText("messages:VIPRewardedWindow.description",cleverapps.styles.FONTS.VIPREWARDEDWINDOW_DESCRIPTION_TEXT);o.setAnchorPoint2(),o.setPositionRound(e.description),o.setDimensions(e.description.width,0),o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.addChild(o);var a=this.createProgress();a.setAnchorPoint2(),a.setPositionRound(e.progress),t.addChild(a);var r=new cleverapps.UI.Button({styles:e.button,text:"messages:Cancel",font:cleverapps.styles.FONTS.VIPREWARDEDWINDOW_BUTTON_TEXT,onClicked:this.close.bind(this),button_images:cleverapps.UI.Button.Images.button_red});r.setAnchorPoint2(),r.setPositionRound(e.button),t.addChild(r);var l=new cleverapps.UI.generateOnlyText(
"messages:VIPRewardedWindow.note",cleverapps.styles.FONTS.VIPREWARDEDWINDOW_NOTE_TEXT,{price:Product.Create("gold6000").getCurrentPrice()});return l.setAnchorPoint2(),l.setOpacity(200),l.setPositionRound(e.note),l.setDimensions(e.note.width,0),l.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.addChild(l),t},onClose:function(){this.onCancel&&this.onCancel(),this.onReward=void 0,this.onCancel=void 0},createProgress:function(){var e=cleverapps.styles.VIPRewardedWindow.progress,t=new ScaledProgressBar({background:bundles.vip_window.frames.vip_progress_background,progress:bundles.vip_window.frames.vip_progress_bar,padding:e.padding});t.setDimension(e.width,e.height),t.setPercentage(10),t.runAction(new ScaledProgressBarProgressTo(VIPRewardedWindow.DURATION/1e3,100));var s=new cleverapps.CountDown(VIPRewardedWindow.DURATION,{onFinish:function(){this.onReward&&this.onReward(),cleverapps.playSession.inc(cleverapps.EVENTS.VIP_REWARDED_WATCHED),this.onReward=void 0,this.onCancel=void 0,
this.close()}.bind(this)}),n=new cleverapps.CountDownView(s,{font:cleverapps.styles.FONTS.VIPREWARDEDWINDOW_TIMER_TEXT});return n.setAnchorPoint2(),n.setPositionRound(e.timer),t.addChild(n),t},listBundles:function(){return["vip_window"]}});VIPRewardedWindow.DURATION=cleverapps.parseInterval("10 seconds"),cleverapps.overrideFonts(cleverapps.styles.FONTS,{VIPREWARDEDWINDOW_TITLE_TEXT:{size:80},VIPREWARDEDWINDOW_DESCRIPTION_TEXT:{size:42},VIPREWARDEDWINDOW_TIMER_TEXT:{size:60},VIPREWARDEDWINDOW_BUTTON_TEXT:{size:56},VIPREWARDEDWINDOW_NOTE_TEXT:{size:22}}),cleverapps.styles.VIPRewardedWindow={width:1200,height:1200,title:{x:{align:"center",dx:0},y:{align:"center",dy:410},text:{x:{align:"center",dx:0},y:{align:"center",dy:25},width:540}},icon:{x:{align:"center",dx:0},y:{align:"center",dy:140}},description:{x:{align:"center",dx:0},y:{align:"center",dy:-135},width:1e3},progress:{x:{align:"center",dx:0},y:{align:"center",dy:-270},width:600,height:92,timer:{x:{align:"center",dx:0},y:{
align:"center",dy:2}}},button:{x:{align:"center",dx:0},y:{align:"center",dy:-390},width:300,height:100},note:{x:{align:"center",dx:0},y:{align:"center",dy:-525},width:1e3},person:{x:{align:"center",dx:-1e3},y:{align:"bottom",dy:40},scale:1.5}};var FlyingAd=function(){cleverapps.EventEmitter.call(this)};FlyingAd.prototype=Object.create(cleverapps.EventEmitter.prototype),(FlyingAd.prototype.constructor=FlyingAd).prototype.setGame=function(e){this.game=e,this.game.userStatus.on("inactive_very_short",this.update.bind(this))},FlyingAd.prototype.reset=function(){this.purge(),this.disable(),this.type=void 0},FlyingAd.prototype.getSkin=function(){return void 0===this.type?"hint":FlyingAd.TYPES[this.type].skin},FlyingAd.prototype.needUpdate=function(){return!this.enabled},FlyingAd.prototype.update=function(){cleverapps.adsLimits.update();var e=this.selectType();void 0!==e?(this.setType(e),this.enable()):this.disable()},FlyingAd.prototype.onClick=function(){this.enabled&&(this.trigger("activate"
),this.playAds())},FlyingAd.prototype.selectType=function(){return cleverapps.config.debugMode&&void 0!==FlyingAd.DEBUG_TYPE?FlyingAd.DEBUG_TYPE:[FlyingAd.TYPE_TICKET,FlyingAd.TYPE_STAR,FlyingAd.TYPE_HINT].filter(function(e){return cleverapps.adsLimits.state(FlyingAd.TYPES[e].limit)===AdsLimits.STATE_READY&&FlyingAd.TYPES[e].filter()})[0]},FlyingAd.prototype.setType=function(e){this.type!==e&&(this.type=e,this.trigger("changeType"))},FlyingAd.prototype.playAds=function(){cleverapps.rewardedAdsManager.loadAndPlay(function(){cleverapps.adsLimits.watch(FlyingAd.TYPES[this.type].limit),this.reward()}.bind(this)),this.disable()},FlyingAd.prototype.enable=function(){this.enabled||cleverapps.metha.isFocused()||(this.enabled=!0,this.trigger("enable"))},FlyingAd.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.trigger("disable"))},FlyingAd.prototype.giveHint=function(){if("board"===cleverapps.config.type){if(this.game.outcome===GameBase.OUTCOME_UNKNOWN){
var e=this.game.hintBooster.findHint();e&&this.game.hintBooster.addHint(e)}}else"differences"===cleverapps.config.type&&(this.boosterDiscover(),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.USE_HINTS));cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HINT_FOR_VIDEO)},FlyingAd.prototype.giveTicket=function(){var e=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_REGULAR),t=e&&e.slotMachine;t&&(t.earnTickets(1),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.TICKET_FOR_VIDEO))},FlyingAd.prototype.giveStar=function(){cleverapps.simple.earnStars(1),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.STAR_FOR_VIDEO)},FlyingAd.prototype.reward=function(){this.type===FlyingAd.TYPE_TICKET?this.giveTicket():this.type===FlyingAd.TYPE_STAR?this.giveStar():this.giveHint()},FlyingAd.IsAvailable=function(){return"board"===cleverapps.config.type||"differences"===cleverapps.config.type},FlyingAd.TYPE_HINT=0,FlyingAd.TYPE_STAR=1,FlyingAd.TYPE_TICKET=2,FlyingAd.TYPES={},
FlyingAd.TYPES[FlyingAd.TYPE_HINT]={limit:AdsLimits.TYPES.HINT_FOR_VIDEO,skin:"hint",filter:function(){return cleverapps.environment.isGameScene()}},FlyingAd.TYPES[FlyingAd.TYPE_STAR]={limit:AdsLimits.TYPES.STAR_FOR_VIDEO,skin:"star",filter:function(){return cleverapps.environment.isMainScene()}},FlyingAd.TYPES[FlyingAd.TYPE_TICKET]={limit:AdsLimits.TYPES.TICKET_FOR_VIDEO,skin:"ticket",filter:function(){return cleverapps.environment.isSlotMachineScene()}};var FlyingAdView=cc.Node.extend({ctor:function(){this._super(),cleverapps.flyingAd.reset(),cleverapps.config.debugMode&&(FlyingAdView.TIMEOUT=30),this.setAnchorPoint2();var e=cleverapps.styles.FlyingAdView;this.setContentSize2(e),this.createAnimation(),this.animation.setVisible(!1),cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(this.setScale(e.mobile.scale),this.baseScale=this.scale),this.onMouseOver=function(){this.animation.setSkin(cleverapps.flyingAd.getSkin()+"_hover")}.bind(this),this.onMouseOut=function(){
this.animation.setSkin(cleverapps.flyingAd.getSkin()+"_normal")}.bind(this),cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,cleverapps.flyingAd.onClick.bind(cleverapps.flyingAd)),this.setLocalZOrder(10),cleverapps.metha.registerControl("flyingAd",function(e){this.enabled&&this.setVisible(e)}.bind(this)),this.enable(),cleverapps.flyingAd.on("disable",this.createListener(this.disable.bind(this))),cleverapps.flyingAd.on("enable",this.createListener(this.enable.bind(this))),cleverapps.flyingAd.on("activate",this.createListener(this.disappear.bind(this))),cleverapps.flyingAd.on("changeType",this.createListener(this.changeType.bind(this)))},createAnimation:function(){var e=cleverapps.styles.FlyingAdView;this.animation=new cleverapps.Spine(bundles.flying_ad.jsons.flying_ad_json),this.animation.setSkin(cleverapps.flyingAd.getSkin()+"_normal"),this.animation.setAnimation(0,"idle",!0),this.addChild(this.animation),this.animation.setPositionRound(e.animation)},changeType:function(){
this.animation.setSkin(cleverapps.flyingAd.getSkin()+"_normal")},disappear:function(){this.stopAllActions(),this.enabled=!1,this.animation.setAnimation(0,"application",!1),this.animation.setCompleteListener(function(){this.setVisible(!1),this.animation.setCompleteListener(function(){})}.bind(this))},runMoveAnimation:function(){var e=cc.director.getRunningScene().scene,t=cleverapps.styles.FlyingAdView;this.setPositionRound(e.width/2,e.height/2+t.yOffset),this._runMoveAnimation(1,0)},_runMoveAnimation:function(e,t){if(t>FlyingAdView.TOTAL_FLY_TIMEOUT)return this.disappear(),void this.runAction(new cc.Sequence(new cc.DelayTime(1),new cc.Hide,new cc.DelayTime(FlyingAdView.TIMEOUT),new cc.CallFunc(function(){this.enable()}.bind(this))));var s,n=cc.director.getRunningScene().scene,i=cleverapps.styles.FlyingAdView,o=cleverapps.environment.isMainScene()&&cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL,
a=cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?i.mobile.xBorderOffset:i.xBorderOffset,r=i.yOffsetBottom,l=i.yOffsetTop;0<e?o?s=cc.p(n.width/2,n.height-l):(s=cc.p(n.width-a,this.y),this.animation.setScaleX(1)):o?s=cc.p(n.width/2,r):(s=cc.p(a,this.y),this.animation.setScaleX(-1));var c=cleverapps.styles.FlyingAdView.speed,p=cc.pDistance(this.getPosition(),s)/c,d=Math.round(p/7),u=new cc.MoveBy(p,cc.p(s.x-this.x,s.y-this.y)),h=0,g=0;if(o?h=cleverapps.styles.FlyingAdView.animation.dx:g=cleverapps.styles.FlyingAdView.animation.dy,0<d){for(var v=[],m=p/d/2,f=0;f<d;f++)v.push(new cc.MoveBy(m/2,cc.p(h/2,g/2))),v.push(new cc.MoveBy(m,cc.p(-h,-g))),v.push(new cc.MoveBy(m/2,cc.p(h/2,g/2)));u=new cc.Spawn(u,new cc.Sequence(v))}this.runAction(new cc.Sequence(u,new cc.CallFunc(function(){this._runMoveAnimation(-e,t+p)}.bind(this))))},enable:function(){cleverapps.flyingAd.enabled&&(this.enabled=!0,this.stopAllActions(),this.setVisible(!cleverapps.metha.isFocused()),
this.animation.setAnimationAndIdleAfter("appearance","idle"),this.runMoveAnimation())},disable:function(){this.enabled=!1,this.stopAllActions(),this.setVisible(!1)}});FlyingAdView.TOTAL_FLY_TIMEOUT=45,FlyingAdView.TIMEOUT=300,cleverapps.styles.FlyingAdView={width:200,height:200,mobile:{xBorderOffset:160,scale:.8},animation:{x:{align:"center"},y:{align:"center",dy:-30},dy:60,dx:200},yOffset:375,xBorderOffset:300,yOffsetBottom:500,yOffsetTop:150,speed:80};var AdsPlugin=function(e){this.cached={},this.cachedTime={},this.inited=!1,this.loadAfterPlay=e&&e.loadAfterPlay,this.loaderState={},this.videoState={},this.onChangeLoaderState=function(){},this.onChangeVideoState=function(){},this._onReward=function(){}};AdsPlugin.prototype.setWaitLoading=function(e){this.loaderState[e]=AdsPlugin.LOADER_STATE.WAIT,this.onChangeLoaderState(e)},AdsPlugin.prototype.setErrorLoading=function(e){this.loaderState[e]=AdsPlugin.LOADER_STATE.WAIT,this.onChangeLoaderState(e,"error")},
AdsPlugin.prototype.setSuccessLoading=function(e){this.loaderState[e]=AdsPlugin.LOADER_STATE.READY,this.onChangeLoaderState(e)},AdsPlugin.prototype.setPlaying=function(e,t){this.videoState[e]=AdsPlugin.VIDEO_STATE.PLAY,t||this.onChangeVideoState(e)},AdsPlugin.prototype.whichIsPlaying=function(){for(var e=0;e<RewardedAdsManager.ACTIVE_ADS.length;e++){var t=RewardedAdsManager.ACTIVE_ADS[e];if(this.videoState[t]===AdsPlugin.VIDEO_STATE.PLAY)return t}},AdsPlugin.prototype.rewardAndFinish=function(e){this.videoState[RewardedAdsManager.REWARDED]!==AdsPlugin.VIDEO_STATE.STOP&&(this._onReward(),this.setFinished(RewardedAdsManager.REWARDED,e))},AdsPlugin.prototype.setFinished=function(e,t){this.videoState[e]!==AdsPlugin.VIDEO_STATE.STOP&&(this.videoState[e]=AdsPlugin.VIDEO_STATE.STOP,t||this.onChangeVideoState(e))},AdsPlugin.LOADER_STATE={WAIT:0,READY:1},AdsPlugin.VIDEO_STATE={STOP:0,PLAY:1},AdsPlugin.prototype.init=function(e){setTimeout(e,2e3)},AdsPlugin.prototype.expired=function(e){
return void 0!==this.cachedTime[e]&&this.cachedTime[e]<Date.now()-cleverapps.parseInterval("3 hour")},AdsPlugin.prototype.isAvailable=function(e){return this.inited&&this.cached[e]},AdsPlugin.prototype._cache=function(e,t){t(!0)},AdsPlugin.prototype.adIsRunning=function(e){return this.videoState[e]===AdsPlugin.VIDEO_STATE.PLAY},AdsPlugin.prototype.cache=function(t){this.inited&&this._cache(t,function(e){this.cached[t]=e,this.cachedTime[t]=Date.now(),this.setSuccessLoading(t)}.bind(this))},AdsPlugin.prototype._playAd=function(e){this.setFinished(e)},AdsPlugin.prototype.reset=function(e){this.cached[e]=void 0,this.cachedTime[e]=void 0,this.setWaitLoading(e)},AdsPlugin.prototype.playAd=function(e){this.inited&&this.cached[e]&&(this._playAd(e,this.cached[e]),this.reset(e))};var VideoAds=function(){AdsPlugin.call(this)};VideoAds.prototype=Object.create(AdsPlugin.prototype),(VideoAds.prototype.constructor=VideoAds).isAppropriate=function(){return cleverapps.isLocalhost()},
VideoAds.prototype._cache=function(e,t){setTimeout(function(){t(!0)},5e3)},VideoAds.prototype._playAd=function(e){this.setPlaying(e);var t=cc.director.getRunningScene(),s=t.width,n=t.height,i=new cc.LayerColor(new cc.Color(200,200,255,255),s,n);cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(){return!0}},i),t.addChild(i);var o=setTimeout(function(){a(!0,e)},3e3),a=cleverapps.once(function(e,t){e&&t===RewardedAdsManager.REWARDED?this.rewardAndFinish():this.setFinished(t),clearTimeout(o),i.removeFromParent(!0)}.bind(this)),r={font:cleverapps.styles.FONTS.BUTTON_TEXT,width:300*resolutionScale,height:100*resolutionScale,padding:20,onClicked:function(){a(!1,e)},text:"Skip ad"},l=new cleverapps.UI.Button(r);l.setPositionRound(i.width/2,200),l.disable(),l.runAction(new cc.Sequence(new cc.DelayTime(1),new cc.CallFunc(function(){l.enable()}))),i.addChild(l)};var OKAds=function(){AdsPlugin.call(this,{loadAfterPlay:!0}),
RewardedAdsManager.ACTIVE_ADS=[RewardedAdsManager.REWARDED,RewardedAdsManager.INTERSTITIAL]};OKAds.prototype=Object.create(AdsPlugin.prototype),(OKAds.prototype.constructor=OKAds).isAppropriate=function(){return cleverapps.OK.isAppropriate()||cleverapps.MobileOK.isAppropriate()},OKAds.prototype.isInitialized=function(){return!("undefined"==typeof FAPI||!FAPI.UI.showAd||!FAPI.UI.showLoadedAd)&&(!cleverapps.MobileOK.isAppropriate()||!cleverapps.isOkApp()||FAPI.UI.isNativeAdSupported&&FAPI.UI.isNativeAdSupported())},OKAds.prototype.init=function(e){cleverapps.whenAllInitialized(function(){this.isInitialized()&&e()}.bind(this))},OKAds.prototype.windowApiCallbackRewarded=function(e,t){console.log("window.API_callback "+e+" "+JSON.stringify(t)),"error"===e&&"skip"===t?this.setFinished(RewardedAdsManager.REWARDED):"error"===e?this.setErrorLoading(RewardedAdsManager.REWARDED):"ready"===t||"ad_prepared"===t?this.onLoadAdCallback(!0):"complete"!==t&&"ad_shown"!==t||this.rewardAndFinish()},
OKAds.prototype.windowApiCallbackInterstitial=function(e,t){console.log("window.API_callback "+e+" "+JSON.stringify(t)),"no_ads"===t||"error"===e?this.setErrorLoading(RewardedAdsManager.INTERSTITIAL):"ad_prepared"===t?cleverapps.social.listeners.showAd=this.windowApiCallbackInterstitial.bind(this):"ad_shown"!==t&&"skip"!==t||this.setFinished(RewardedAdsManager.INTERSTITIAL)},OKAds.prototype._cache=function(e,t){RewardedAdsManager.REWARDED===e?(this.onLoadAdCallback=t,FAPI.UI.loadAd(),cleverapps.social.listeners.loadAd=this.windowApiCallbackRewarded.bind(this)):RewardedAdsManager.INTERSTITIAL===e&&t(!0)},OKAds.prototype._playAd=function(e,t){FullscreenControlButton.exitFullscreen(function(){e===RewardedAdsManager.REWARDED?(FAPI.UI.showLoadedAd(),cleverapps.social.listeners.showLoadedAd=this.windowApiCallbackRewarded.bind(this)):e===RewardedAdsManager.INTERSTITIAL&&(FAPI.UI.showAd(),cleverapps.social.listeners.showAd=this.windowApiCallbackInterstitial.bind(this)),this.setPlaying(e)
}.bind(this))};var VKAds=function(){AdsPlugin.call(this)};VKAds.prototype=Object.create(AdsPlugin.prototype),(VKAds.prototype.constructor=VKAds).isAppropriate=function(){return cleverapps.VK.isAppropriate()||cleverapps.MobileVk.isAppropriate()&&"html5_mobile"===cleverapps.MobileVk.getPlatfrom()},VKAds.prototype.init=function(e){var t=["//ad.mail.ru/static/admanhtml/rbadman-html5.min.js","//vk.com/js/api/adman_init.js"];cleverapps.config.vkcors&&(t=["cleverapps/res/rbadman-html5.min.js","cleverapps/res/adman_init.js"]);var s=function(){"undefined"!=typeof admanInit&&(console.log("Adman loaded"),e())}.bind(this),n=t.length,i=function(){0===--n&&s()};t.forEach(function(e){cleverapps.loadSdk(e,{onSuccess:i,onFailure:function(){console.log("Failed loading vk ads dependencies")}})})},VKAds.prototype._cache=function(e,t){admanInit({user_id:cleverapps.social.getUserID(),app_id:cleverapps.config.vk.appId,type:e===RewardedAdsManager.REWARDED?"rewarded":"preloader"},function(e){console.log(
"Vk ads: have ads!"),console.log(e),t(e)}.bind(this),function(){console.log("Vk ads: NO ads!")})},VKAds.prototype._playAd=function(e,t){this.setPlaying(e);var s=cleverapps.once(this.rewardAndFinish.bind(this)),n=!1;t.onCompleted(s),t.onClicked(function(){n=!0}),t.onSkipped(cleverapps.once(function(){n?s():this.setFinished(e)}.bind(this))),t.start("preroll")};var VKAppAds=function(){VKAds.call(this)};VKAppAds.prototype=Object.create(VKAds.prototype),(VKAppAds.prototype.constructor=VKAppAds).prototype.init=function(e){cleverapps.loadSdk("//unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js",{onSuccess:function(){"undefined"!=typeof vkBridge?(vkBridge.send("VKWebAppInit",{}),e()):console.log("Loading error: vkBridge is undefined")}.bind(this),onFailure:function(){console.log("Failed loading vk app ads dependencies")}})},VKAppAds.isAppropriate=function(){return cleverapps.MobileVk.isAppropriate()&&"html5_mobile"!==cleverapps.MobileVk.getPlatfrom()},VKAppAds.prototype._cache=function(t,s){
vkBridge.sendPromise("VKWebAppGetAds",{}).then(function(e){"promo"===e.type?(s(!0),console.log("Loaded vk ad: "+t)):this.setErrorLoading(t)}.bind(this)).catch(function(e){this.setErrorLoading(t),console.log(e)}.bind(this))},VKAppAds.prototype._playAd=function(t){this.setPlaying(t),vkBridge.sendPromise("VKWebAppShowNativeAds",{ad_format:"reward"}).then(function(e){if(e.result){if(t===RewardedAdsManager.REWARDED)return void this.rewardAndFinish()}else console.log(e.result);this.setFinished(t)}.bind(this)).catch(function(e){console.log(e),this.setFinished(t)}.bind(this))};var PlingaAds=function(){RewardedAdsManager.ACTIVE_ADS=[RewardedAdsManager.REWARDED,RewardedAdsManager.INTERSTITIAL],(cleverapps.isLocalhost()||cleverapps.isStagingHost())&&cleverapps.extend(this,{onEvent:function(e){},_cache:function(e,t){t(!0)},isAvailable:function(){return!1},_playAd:function(e){}}),AdsPlugin.call(this),RewardedAdsManager.INTERSTITIAL_AVAILABLE={episode:0,level:0},
RewardedAdsManager.INTERSTITIAL_PROB=[1],RewardedAdsManager.INTERSTITIAL_REWARD_INTERVAL="0 seconds",RewardedAdsManager.INTERSTITIAL_INTERVAL="5 minutes"};PlingaAds.prototype=Object.create(AdsPlugin.prototype),(PlingaAds.prototype.constructor=PlingaAds).isAppropriate=function(){return cleverapps.social instanceof cleverapps.Plinga},PlingaAds.prototype.init=function(e){cleverapps.whenAllInitialized(function(){"undefined"!=typeof gdsdk&&"undefined"!==gdsdk.preloadAd&&"undefined"!==gdsdk.showAd&&(console.log("plinga social inited - cache ads"),cleverapps.social.eventListener=this.onEvent.bind(this),e())}.bind(this))},PlingaAds.prototype.onEvent=function(e){var t=this.whichIsPlaying();if(void 0!==t)switch(e.name){case"USER_CLOSE":case"SKIPPED":this.setFinished(t);break;case"STARTED":this.setPlaying(t);break;case"ALL_ADS_COMPLETED":t===RewardedAdsManager.REWARDED?this.rewardAndFinish():this.setFinished(t)}},PlingaAds.prototype._cache=function(t,s){try{gdsdk.preloadAd(t).then(function(e){
console.log("Plinga ads: have ads!",t,e),s(!0)}.bind(this)).catch(function(e){console.log("Plinga ads: NO ads!",e)})}catch(e){console.log("Error gdsdk.preloadAd",e);var n=new Error("Error gdsdk.preloadAd");throw n.stack+=e.stack,n}},PlingaAds.prototype._playAd=function(t){try{this.setPlaying(t),gdsdk.showAd(t).then(function(){}.bind(this)).catch(function(e){this.setFinished(t),console.log("Plinga showAd error:",e)}.bind(this))}catch(e){console.log("Error gdsdk.showAd",e);var s=new Error("Error gdsdk.showAd");throw s.stack+=e.stack,s}};var InstantAds=function(){console.log("Choose InstantAds"),AdsPlugin.call(this)};InstantAds.prototype=Object.create(AdsPlugin.prototype),(InstantAds.prototype.constructor=InstantAds).prototype.init=function(e){cleverapps.social.whenInitialized("instantads",function(){-1===FBInstant.getSupportedAPIs().indexOf("getRewardedVideoAsync")?console.log("FBInstant getRewardedVideoAsync is not supported!"):(console.log(
"Found support for FBInstant getRewardedVideoAsync"),e())}.bind(this))},InstantAds.prototype._cache=function(t,e){var s,n=cleverapps.config.instantAds[t];(t===RewardedAdsManager.REWARDED?FBInstant.getRewardedVideoAsync:FBInstant.getInterstitialAdAsync).call(FBInstant,n).then(function(e){return console.log("Loaded instant ad config: "+t),(s=e).loadAsync()}.bind(this)).then(function(){console.log("Loaded instant ad video: "+t),e(s)}.bind(this))},InstantAds.prototype._playAd=function(t,e){this.setPlaying(t),e.showAsync().then(function(){t===RewardedAdsManager.REWARDED?this.rewardAndFinish():this.setFinished(t)}.bind(this)).catch(function(e){console.error(e.message),this.setFinished(t)}.bind(this))},cc.sys.os===cc.sys.OS_IOS&&(cleverapps.IOSWebViewAdMobPluginAdapter=function(){},cleverapps.IOSWebViewAdMobPluginAdapter.prototype.init=function(){console.log("IOSWebViewAdMobPluginAdapter init"),webkitMessage("adMob",{action:"init"})},
cleverapps.IOSWebViewAdMobPluginAdapter.prototype.cache=function(e){console.log("IOSWebViewAdMobPluginAdapter cache"),webkitMessage("adMob",{action:"cache",name:e})},cleverapps.IOSWebViewAdMobPluginAdapter.prototype.show=function(e){console.log("IOSWebViewAdMobPluginAdapter show"),webkitMessage("adMob",{action:"show",name:e})},AdMobPlugin=new cleverapps.IOSWebViewAdMobPluginAdapter);var WebViewAds=function(){AdsPlugin.call(this,{loadAfterPlay:!0}),this.onAdLoadedCallback={}};WebViewAds.prototype=Object.create(AdsPlugin.prototype),(WebViewAds.prototype.constructor=WebViewAds).prototype.init=function(e){console.log("WebViewAds.init"),this.onInitCallback=e,AdMobPlugin.init()},WebViewAds.prototype.onInit=function(){console.log("WebViewAds.onInit"),this.onInitCallback&&(this.onInitCallback(),delete this.onInitCallback)},WebViewAds.prototype._cache=function(e,t){console.log("WebViewAds._cache"),this.onAdLoadedCallback[e]=t,AdMobPlugin.cache(e)},WebViewAds.prototype.onAdLoaded=function(e){
console.log("WebViewAds.onAdLoaded"),this.onAdLoadedCallback[e]&&(this.onAdLoadedCallback[e](!0),this.onAdLoadedCallback[e]=void 0)},WebViewAds.prototype.onAdClosed=function(e){console.log("WebViewAds.onAdClosed"),e===RewardedAdsManager.REWARDED&&this.success?this.rewardAndFinish():this.setFinished(e)},WebViewAds.prototype.onReward=function(){this.success=!0},WebViewAds.prototype.onAdFailedToLoad=function(e){console.log("WebViewAds.onAdFailedToLoad"),this.setErrorLoading(e)},WebViewAds.prototype.onAdLeftApplication=function(e){},WebViewAds.prototype.onAdOpened=function(e){console.log("WebViewAds.onAdOpened")},WebViewAds.prototype._playAd=function(e){console.log("WebViewAds._playAd"),this.success=!1,this.setPlaying(e),AdMobPlugin.show(e)},WebViewAds.isAppropriate=function(){var e=cleverapps.User.calcSource(),t=cleverapps.config.debugMode||-1!==WebViewAds.DEBUG_IDFA.indexOf(cleverapps.Adversting.getIdfa());return"undefined"!=typeof AdMobPlugin&&("ios"===e||"android"===e&&(
cc.sys.installer===cc.sys.INSTALLER_GOOGLE_PLAY||t))},WebViewAds.prototype.onPaidEvent=function(e,t){t=t||"USD";var s=Math.round(e/1e3)/1e3;cleverapps.eventLogger.logEvent("ad_paid_"+t,{amount:s})},WebViewAds.DEBUG_IDFA=["45f0caa5-d1ab-4b03-8e09-a0b63b17c181","17ef0ac8-71fa-47d1-941b-70924e8a031e","75f21832-7a24-47cc-9e88-8c4f461fc06d","aca92164-3f00-4115-84c3-2ab54ed7ba7b","1572cd26-1b38-4b85-8346-258e171b388c","b1ae8117-ff55-4159-b9ad-18e4d05a9da8","17ad3bef-4cd3-4292-9410-04c9b632cf60","cb3ed72f-c604-4c51-84fa-2ffaa9acb849","2105ba80-4607-4ae3-a3a8-866aa7fb63b9"];var Yodo1Ads=function(){console.log("choosing Yodo1Ads"),cc.sys.os===cc.sys.OS_IOS&&(cleverapps.IOSWebViewYodo1AdsPluginAdapter=function(){},cleverapps.IOSWebViewYodo1AdsPluginAdapter.prototype.init=function(){console.log("IOSWebViewYodo1AdsPluginAdapter init"),webkitMessage("yodo1AdsPlugin",{action:"init"})},cleverapps.IOSWebViewYodo1AdsPluginAdapter.prototype.cache=function(e){console.log(
"IOSWebViewYodo1AdsPluginAdapter cache"),webkitMessage("yodo1AdsPlugin",{action:"cache",name:e})},cleverapps.IOSWebViewYodo1AdsPluginAdapter.prototype.show=function(e){console.log("IOSWebViewYodo1AdsPluginAdapter show"),webkitMessage("yodo1AdsPlugin",{action:"show",name:e})},Yodo1AdsPlugin=new cleverapps.IOSWebViewYodo1AdsPluginAdapter),AdsPlugin.call(this),this.onAdLoadedCallback={}};Yodo1Ads.prototype=Object.create(AdsPlugin.prototype),(Yodo1Ads.prototype.constructor=Yodo1Ads).prototype.init=function(e){this.onInitCallback=e,Yodo1AdsPlugin.init()},Yodo1Ads.prototype.onInit=function(){this.onInitCallback&&(this.onInitCallback(),delete this.onInitCallback)},Yodo1Ads.prototype._cache=function(e,t){this.onAdLoadedCallback[e]=t,Yodo1AdsPlugin.cache(e)},Yodo1Ads.prototype.onAdLoaded=function(e){this.onAdLoadedCallback[e]&&(this.onAdLoadedCallback[e](!0),this.onAdLoadedCallback[e]=void 0)},Yodo1Ads.prototype.onReward=function(){this.success=!0},Yodo1Ads.prototype.onAdClosed=function(e){
e===RewardedAdsManager.REWARDED&&this.success?this.rewardAndFinish():this.setFinished(e)},Yodo1Ads.prototype.onAdFailedToLoad=function(e){this.setErrorLoading(e)},Yodo1Ads.prototype.onAdLeftApplication=function(e){},Yodo1Ads.prototype.onAdOpened=function(e){},Yodo1Ads.prototype._playAd=function(e){this.success=!1,this.setPlaying(e),Yodo1AdsPlugin.show(e)},Yodo1Ads.isAppropriate=function(){return cc.sys.isNative&&-1!==["ayodo1","iyodo1"].indexOf(cleverapps.User.calcSource())&&("undefined"!=typeof Yodo1AdsPlugin||cc.sys.os===cc.sys.OS_IOS)};var YandexAds=function(){AdsPlugin.call(this)};YandexAds.prototype=Object.create(AdsPlugin.prototype),(YandexAds.prototype.constructor=YandexAds).prototype.init=function(e){cleverapps.social.whenInitialized("yandexads",function(){e()}.bind(this))},YandexAds.prototype._cache=function(e,t){t(!0)},YandexAds.isAppropriate=function(){return cleverapps.Yandex.isAppropriate()},YandexAds.prototype._playAd=function(e){var t=!1,s=cleverapps.once(
this.rewardAndFinish.bind(this));cleverapps.social.ysdk.adv.showRewardedVideo({callbacks:{onOpen:cleverapps.once(function(){this.setPlaying(e)}.bind(this)),onRewarded:function(){t=!0},onClose:cleverapps.once(function(){t?s():this.setFinished(e)}.bind(this))}})};var BountyManager=function(){this.when=void 0,this.prizes=[],cleverapps.config.debugMode&&(BountyManager.POPUP_INTERVAL="10 minutes"),this.load(),cleverapps.friends.addFriendsUpdatedListener(this.onFriendsUpdated.bind(this))};BountyManager.openWindow=function(e){new BountyWindow(e)},BountyManager.prototype.onFriendsUpdated=function(){cleverapps.social instanceof cleverapps.MobileVk&&(this.prizes=this.prizes.filter(function(e){return e.friends=e.friends.filter(function(e){return cleverapps.friends.inApp(e.id)}),0<e.friends.length&&(void 0===e.minFriendsNo||e.friends.length>=e.minFriendsNo)}),this.save(this.when))},BountyManager.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.BOUNTY);e?(
this.when=e.when,this.prizes=e.prizes||[],this.when>Date.now()&&this.save()):this.save(-1)},BountyManager.prototype.save=function(e){this.when=e||Date.now(),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.BOUNTY,{when:this.when,prizes:this.prizes})},BountyManager.prototype.collect=function(e,t){if(t&&t.removeAllChildren(),e.type===BountyManager.TYPE_STAR)return cleverapps.starChest.addStars(e.amount),void(cleverapps.starChest.locked||cleverapps.metha.display({focus:"BountyManagerStarChestWindow",action:function(e){new StarChestWindow,cleverapps.metha.onceNoWindowsListener=e}}));e.type===BountyManager.TYPE_LIFE&&cleverapps.lives?WindowHelper.animateCollect(t,{scale:.8,target:cleverapps.styles.MenuBar.LivesItem.target},function(){cleverapps.lives.setAmount(cleverapps.lives.amount+e.amount)}):WindowHelper.animateCollect(t,{scale:.8,target:cleverapps.styles.MenuBar.GoldItem.target},function(){levels.user.setGold(levels.user.gold+e.amount)})},BountyManager.prototype.isActive=function(
){return!cleverapps.flags.noviral&&"merge"!==cleverapps.config.type},BountyManager.prototype.needRefresh=function(){return Date.now()-this.when>=cleverapps.parseInterval(BountyManager.POPUP_INTERVAL)},BountyManager.prototype.refreshPrizes=function(){if(!this.needRefresh())return!1;var e=levels.friendSorter.listActiveFriends();cleverapps.Random.shuffle(e);var t=levels.friendSorter.listInactiveFriends();cleverapps.Random.shuffle(t);var i=e.concat(t).map(function(e){if(e&&e.id)return{id:e.id,avatar:e.avatar}});return this.prizes=[],BountyManager.PRIZES.forEach(function(e,t){(e=cleverapps.clone(e,!0)).id=t;var s=i;if(!(!e.minFriendsNo&&e.friendsNo>s.length||e.minFriendsNo>s.length||!cleverapps.lives&&e.type===BountyManager.TYPE_LIFE||!cleverapps.config.results&&e.type===BountyManager.TYPE_STAR)&&BountyManager.ACTIVE_TYPES[e.type]){var n=e.friendsNo;n>s.length&&(n=s.length),e.friends=s.splice(0,n),this.prizes.push(e)}}.bind(this)),this.save(),cleverapps.localPushes.sendPush(
cleverapps.LocalPushes.TYPES.BOUNTY,cleverapps.parseInterval(BountyManager.POPUP_INTERVAL)),!0},BountyManager.prototype.sendIfNeed=function(){if(this.isActive()&&0!==cleverapps.friends.listFriends().length){var e=this.refreshPrizes();if(!(this.prizes.length<1)){var t=levels.friendRequests.notProcessed.filter(function(e){return e.from===levels.FriendRequest.SYSTEM_ID&&e.type===levels.FriendRequest.TYPE_BOUNTY_READY});0<t.length?e&&(t.forEach(function(e){levels.friendRequests.processById(e.id)}),this.createRequest()):this.createRequest()}}},BountyManager.prototype.createRequest=function(){levels.friendRequests.notProcessed.push(levels.FriendRequest.createFriendRequest({id:"__"+Math.floor(1e15*Math.random()),from:levels.FriendRequest.SYSTEM_ID,type:levels.FriendRequest.TYPE_BOUNTY_READY,fake:!0})),levels.friendRequests.save(),levels.friendRequests.onNewListener()},BountyManager.prototype.listPrizes=function(){return this.prizes},BountyManager.prototype.removePrize=function(e){for(
var t=0;t<this.prizes.length;t++)if(this.prizes[t].id===e.id){this.prizes.splice(t,1),this.save();break}},BountyManager.POPUP_INTERVAL="12 hour",BountyManager.TYPE_LIFE=0,BountyManager.TYPE_STAR=1,BountyManager.TYPE_GOLD_1=2,BountyManager.TYPE_GOLD_2=3,BountyManager.ACTIVE_TYPES={},BountyManager.ACTIVE_TYPES[BountyManager.TYPE_LIFE]=!0,BountyManager.ACTIVE_TYPES[BountyManager.TYPE_STAR]=!0,BountyManager.ACTIVE_TYPES[BountyManager.TYPE_GOLD_1]=!0,BountyManager.ACTIVE_TYPES[BountyManager.TYPE_GOLD_2]=!0,BountyManager.PRIZES=[{type:BountyManager.TYPE_GOLD_1,amount:5,friendsNo:1},{type:BountyManager.TYPE_STAR,amount:1,friendsNo:2,minFriendsNo:1},{type:BountyManager.TYPE_GOLD_2,amount:10,friendsNo:3,minFriendsNo:1},{type:BountyManager.TYPE_LIFE,amount:1,friendsNo:4,minFriendsNo:1},{type:BountyManager.TYPE_GOLD_2,amount:15,friendsNo:5,minFriendsNo:3},{type:BountyManager.TYPE_STAR,amount:1,friendsNo:10,minFriendsNo:3},{type:BountyManager.TYPE_GOLD_2,amount:15,friendsNo:10,minFriendsNo:4},{
type:BountyManager.TYPE_GOLD_2,amount:10,friendsNo:10,minFriendsNo:5}];var BountyItemView=cc.Node.extend({ctor:function(e){this._super(),this.prize=e,this.onAcceptListener=function(){};var i=cleverapps.styles.BountyItemView,t=cleverapps.UI.createScale9Sprite(i.Background.image,cleverapps.UI.Scale9Rect.TwoPixelXY),s=i.Background.width;cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL&&(s+=i.wide.Background.x),t.setContentSize2(s,i.Background.height),this.simpleBg=t,this.setAnchorPoint(.5,.5),this.setContentSize(t.getContentSize()),t.setPosition(this.width/2,this.height/2),this.addChild(t);var n=this.content=new cc.Node;n.setAnchorPoint2(),n.setPosition(cleverapps.styles.BountyItemView.icon.x,this.height/2),this.addChild(n);var o=cleverapps.styles.BountyItemView.ICONS[e.type],a=new cc.Sprite(o);a.setScale(cleverapps.styles.BountyItemView.icon.scale);var r=a.getContentSize();n.setContentSize(r.width*a.scale,r.height*a.scale),n.addChild(a),a.setPositionRound(n.width/2,n.height/2),
this.image=a,e.amount&&this.addAmountToIcon(e.amount);var l=i.avatars.width;cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL&&(l+=i.wide.avatars.width);var c=i.avatar.x,p=e.friends.length;10<p&&(p=10),l<p*c&&(c=l/p),e.friends.forEach(function(e,t){if(!(p<t)){var s=e.id;if("string"==typeof e&&(s=e,e=void 0),e=e||cleverapps.friends.getById(s)||cleverapps.invitalbleFriends.getById(s)){var n=new cleverapps.UI.Avatar(e);n.setPosition(n.width/2+i.avatars.x+t*c,this.height/2+i.avatar.y),this.addChild(n),n.setScale(.8)}}},this);var d=this.getButton(e);this.addChild(d),cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,this.onAcceptListener.bind(this))},addAmountToIcon:function(e){var t=cleverapps.styles.BountyItemView,s=cleverapps.UI.generateImageText("+"+e,cleverapps.styles.FONTS.BOUNTY_AMOUNT_TEXT||cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);s.setPosition(this.content.width/2+t.amount.x,this.content.height/2+t.amount.y),this.content.addChild(s)},onMouseOver:function(){
var e=cleverapps.styles.BountyItemView.Background;e.imageOn?this.simpleBg.setSpriteFrame(cc.spriteFrameCache.getSpriteFrame(e.imageOn)):this.simpleBg.setColor(cleverapps.styles.COLORS.COLOR_VERYLIGHTBROWN)},onMouseOut:function(){var e=cleverapps.styles.BountyItemView.Background;e.imageOn?this.simpleBg.setSpriteFrame(cc.spriteFrameCache.getSpriteFrame(e.image)):this.simpleBg.setColor(cleverapps.styles.COLORS.WHITE)},getButton:function(e){var t=cleverapps.styles.BountyItemView.Button,s=new cc.Node;s.setPosition(t.width/2,t.height/2);var n=cleverapps.UI.generateOnlyText("messages:Collect",t.font);n.fitTo(.9*t.width),n.setPosition(0,t.text.y),s.addChild(n);var i={onClicked:function(){this.onAcceptListener()}.bind(this),width:t.width,height:t.height,content:s,button_png:t.button_png,button_on_png:t.button_on_png},o=new cleverapps.UI.Button(i);return o.setPositionRound(this.width-o.width/2+cleverapps.styles.BountyItemView.Button.x,this.height/2),o},animateBuy:function(){
cleverapps.styles.MenuBar.LivesItem.target&&WindowHelper.animateCollect(this.content,{scale:.3,target:cleverapps.styles.MenuBar.LivesItem.target})}});cleverapps.styles.BountyItemView={ICONS:{},Background:{scale9:!0,width:680,height:100,image:bundles.main.frames.bounty_item_bg},wide:{Background:{x:100},avatars:{width:80}},icon:{scale:1,x:50},amount:{x:60,y:-20},avatars:{x:170,width:240},avatar:{x:100,y:-3},Button:{width:160,height:70,x:-15,button_png:bundles.buttons_main.frames.small_green_button,button_on_png:bundles.buttons_main.frames.small_green_button_on,font:cleverapps.styles.FONTS.BUTTON_SMALL_TEXT,text:{y:0}}},cleverapps.styles.BountyItemView.ICONS[BountyManager.TYPE_GOLD_1]=bundles.main.frames.coin_png,cleverapps.styles.BountyItemView.ICONS[BountyManager.TYPE_GOLD_2]=bundles.main.frames.coin_png,cleverapps.styles.BountyItemView.ICONS[BountyManager.TYPE_LIFE]=bundles.request_center.frames.accept_life_icon,
cleverapps.styles.BountyItemView.ICONS[BountyManager.TYPE_STAR]=bundles.request_center.frames.accept_star_icon;var BountyWindow=Window.extend({onWindowLoaded:function(i){var e=cleverapps.styles.BountyWindow,t=new cc.Node;t.setAnchorPoint(.5,.5),this.content=t,this.onSocialRequestResponse=this.createListener(function(e,t){t.onAcceptListener=function(){},cleverapps.bountyManager.collect(e,t.image),t.runAction(new cc.Sequence(new cc.ScaleTo(.3,0),new cc.RemoveSelf,new cc.CallFunc(function(){this.bountyViews.splice(this.bountyViews.indexOf(t),1),this.moveToPosition()},this)))});var s=cleverapps.throttle(cleverapps.UI.SOCIAL_CLICK_THROTTLE,function(e,t){var s="bountyGold";e.type===BountyManager.TYPE_STAR&&(s="bountyStar"),e.type===BountyManager.TYPE_LIFE&&(s="bountyLife");var n=e.friends.map(function(e){return e&&e.id?e.id:e});cleverapps.social.sendRequest(n,s,function(){this.onSocialRequestResponse(e,t)}.bind(this)),cleverapps.bountyManager.removePrize(e),i.remove()}.bind(this))
;cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOUNTY_OPENED),this.bountyViews=cleverapps.bountyManager.listPrizes().map(function(e){var t=new BountyItemView(e);return t.onAcceptListener=function(){s(e,t)},this.content.addChild(t),t}.bind(this));var n=this.bountyViews.map(function(e){return e});n.reverse();var o=cleverapps.UI.arrangeWithMargins(n,{y:e.items.y,margin:e.item.y,direction:cleverapps.UI.VERTICAL,x:Math.round(e.width/2)});if(this.total=o,t.setContentSize2(e.width,o+e.height),0===n.length)this.generateNoFriendsContent();else{var a=cleverapps.UI.generateTTFText("messages:BountyWindow.Text",cleverapps.styles.FONTS.WINDOW_TEXT);a.setPositionRound(t.width/2,o+e.text.y),t.addChild(a)}this._super({name:"bountywindow",title:"messages:BountyWindow.Title",content:t}),cleverapps.audio.playSound(bundles.game.urls.perfect_effect)},moveToPosition:function(){if(0!==this.bountyViews.length){var e=this.bountyViews.map(function(e){return e});e.reverse()
;var t=cleverapps.styles.BountyWindow,s=cleverapps.UI.arrangeWithMargins(e,{y:t.items.y,margin:t.item.y,direction:cleverapps.UI.VERTICAL,x:Math.round(t.width/2),iterator:function(){}});cleverapps.UI.arrangeWithMargins(e,{y:t.items.y+(this.total-s),margin:t.item.y,direction:cleverapps.UI.VERTICAL,x:Math.round(t.width/2),iterator:function(e,t,s){e.stopAllActions(),e.runAction(new cc.MoveTo(.5,t,s))}})}else this.close()},generateNoFriendsContent:function(){var e=cleverapps.styles.BountyWindow.noFriends;this.content.setContentSize(e.width,e.height);var t=cleverapps.UI.generateTTFText("messages:BountyWindow.noFriendsText",cleverapps.styles.FONTS.WINDOW_TEXT);t.setPositionRound(this.content.width/2,e.Text.y),t.setDimensions(e.Text.width,e.Text.height),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.content.addChild(t);var s=new cleverapps.UI.Button({text:Messages.get("SettingsWindow.InviteFriends"),width:e.Button.width,height:e.Button.height,font:cleverapps.styles.FONTS.BUTTON_TEXT,
onClicked:function(){cleverapps.social.inviteFriendsWindow(function(){this.close()}.bind(this))}.bind(this)});s.setPositionRound(this.content.width/2,e.Button.y),this.content.addChild(s)}});cleverapps.styles.BountyWindow={width:690,height:150,noFriends:{width:690,height:500,Text:{y:250,width:550,height:200},Button:{width:450,height:120,y:0}},text:{y:60},items:{y:-20},item:{y:10},animation:{x:300,y:200}};var PiggyBank=function(){cleverapps.config.debugMode&&(PiggyBank.LIFETIME="10 minutes",PiggyBank.INTERMISSION="2 day"),this.active=void 0,this.when=void 0,this.level=void 0,this.amount=0,this.load()};PiggyBank.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.PIGGY_BANK);void 0===e&&(e={active:!1,when:void 0,level:0,amount:0}),this.active=e.active,this.when=e.when,this.level=e.level,this.amount=e.amount,this.updateState()},PiggyBank.prototype.getInfo=function(){return{active:this.active,when:this.when,level:this.level,amount:this.amount}},
PiggyBank.prototype.updateInfo=function(e,t){this.active=e.active,this.when=e.when,this.level=e.level,this.amount=e.amount,this.save(t)},PiggyBank.prototype.getLeftTime=function(){return cleverapps.parseInterval(PiggyBank.LIFETIME)-(Date.now()-this.when)},PiggyBank.prototype.getProduct=function(){return Product.Create(["piggybank500","piggybank1800","piggybank6000","piggybank25000"][this.level])},PiggyBank.prototype.buy=function(e){var t=this.getProduct();t.reward.gold=this.amount,t.piggyBankLevel=this.level,t.buy(function(){this.onBuy(),e()}.bind(this))},PiggyBank.prototype.onBuy=function(){this.stop()},PiggyBank.prototype.updateState=function(){var e=!1;this.active&&this.when+cleverapps.parseInterval(PiggyBank.LIFETIME)<Date.now()&&(this.active=!1,this.when=this.when+cleverapps.parseInterval(PiggyBank.LIFETIME),e=!0,this.logStop()),this.active||(void 0===this.when||this.when+cleverapps.parseInterval(PiggyBank.INTERMISSION)<Date.now())&&(this.start(),e=!1),e&&this.save(),clearTimeout(
this.timer),this.timer=new cleverapps.LongTimeout(function(){cleverapps.sideBar.resetByClassName(PiggyBankIcon)}.bind(this),this.getLeftTime())},PiggyBank.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.PIGGY_BANK,{active:this.active,when:this.when,level:this.level,amount:this.amount}),e||cleverapps.synchronizer.addUpdateTask("piggybank")},PiggyBank.prototype.getBaseAmount=function(){return this.getProduct().reward.gold},PiggyBank.prototype.getAddAmount=function(){return(this.getMaxAmount()-this.getBaseAmount())/PiggyBank.WINS_TO_FULFILL},PiggyBank.prototype.getMaxAmount=function(){return Math.round(this.getBaseAmount()*PiggyBank.MAX_COEF/PiggyBank.WINS_TO_FULFILL)*PiggyBank.WINS_TO_FULFILL},PiggyBank.prototype.isFull=function(){return this.amount>=this.getMaxAmount()},PiggyBank.prototype.addGold=function(e){this.isFull()||(this.amount+=e,this.save(),this.isFull()&&cleverapps.sideBar.resetByClassName(PiggyBankIcon))},PiggyBank.MAX_COEF=1.4,
PiggyBank.prototype.start=function(){this.active=!0,this.when=Date.now(),this.level=cleverapps.paymentsHistory.classify(),this.level===cleverapps.PaymentsHistory.VIP_BIGWHALE&&(this.level=cleverapps.PaymentsHistory.VIP_WHALE);var e=this.getProduct();this.amount=e.reward.gold,this.save()},PiggyBank.prototype.logStop=function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PIGGY_BANK+"_stop"),this.isFull()&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PIGGY_BANK+"_stop_full")},PiggyBank.prototype.stop=function(){this.logStop(),this.active=!1,this.when=Date.now(),this.save(),cleverapps.sideBar.resetByClassName(PiggyBankIcon)},PiggyBank.prototype.isActive=function(){return!!levels.user.checkAvailable(PiggyBank.AVAILABLE)&&(!cleverapps.flags.nopayments&&(this.updateState(),this.active||this.start(),this.active))},PiggyBank.AVAILABLE={episode:1,level:12},PiggyBank.WINS_TO_FULFILL=10,PiggyBank.LIFETIME="3 days",PiggyBank.INTERMISSION="3 days"
;var PiggyBankVictoryAnimation=cleverapps.Spine.extend({ctor:function(){this._super(bundles.piggybank_window.jsons.piggy_bank_window_json),this.setAnimation(0,"piggy_victory",!0)}}),PiggyBankWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.piggyBank.getLeftTime();if(!(e<=0)){var t=cleverapps.styles.PiggyBankWindow,s=new cc.Node;s.setContentSize2(t.animation.width,t.animation.height),s.setAnchorPoint2();var n=new cleverapps.Spine(t.animation.json);n.setAnimation(0,cleverapps.piggyBank.isFull()?"piggy_full":"piggy_bank",!0),n.setPositionRound(s.width/2,s.height/2+t.animation.y),s.addChild(n);var i=new cc.Node,o=cleverapps.UI.generateTTFText("messages:Balance",cleverapps.styles.FONTS.WINDOW_TEXT);o.setVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER),o.setDimensions(0,t.text.height),i.addChild(o);var a=cleverapps.UI.createScale9Sprite(t.timer.bg);a.setContentSize2(t.amount.width,t.amount.height);var r=new cc.Node,l=new cc.Sprite(bundles.menubar.frames.coin_png);l.setFlippedX(
t.amount.coin.flip),l.setScale(t.amount.coin.scale),r.addChild(l);var c=cleverapps.UI.generateImageText(cleverapps.formatAmount(cleverapps.piggyBank.amount),cleverapps.styles.FONTS.PIGGY_BANK_AMOUNT_TEXT,{});r.addChild(c),cleverapps.UI.arrangeWithMargins(r.children,{direction:cleverapps.UI.HORIZONTAL,margin:t.amount.margin}),cleverapps.UI.wrap(r),c.y+=t.amount.y,r.setAnchorPoint2(),r.setPositionRound(a.width/2,a.height/2),a.addChild(r),i.addChild(a),cleverapps.UI.arrangeWithMargins(i.children,{direction:cleverapps.UI.HORIZONTAL,margin:t.timer.margin.x}),cleverapps.UI.wrap(i),i.setAnchorPoint2();var p=cleverapps.piggyBank.getProduct(),d=cleverapps.UI.generateTTFText("messages:PiggyBankWindow.text2",cleverapps.styles.FONTS.WINDOW_TEXT);d.setVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER),d.setDimensions(0,t.text.height);var u=cleverapps.UI.createScale9Sprite(t.timer.bg);u.setContentSize2(t.timer.width,t.timer.height);var h={background_content:u,
font:cleverapps.styles.FONTS.PIGGY_BANK_WINDOW_TIMER_TEXT||cleverapps.styles.FONTS.WHITE_TEXT,timerPosition:t.timer,regularFontTimerPosition:t.timer.regularFont},g=new cleverapps.CountDownView(new cleverapps.CountDown(e,{onFinish:function(){this.close()}.bind(this)}),h),v=new cc.Node;v.addChild(d),v.addChild(g),cleverapps.UI.arrangeWithMargins(v.children,{direction:cleverapps.UI.HORIZONTAL,margin:t.timer.margin.x}),cleverapps.UI.wrap(v),v.setAnchorPoint2();var m=cleverapps.piggyBank.isFull()?"messages:PiggyBankWindow.text1.Full":"messages:PiggyBankWindow.text1",f=cleverapps.UI.generateTTFText(m,cleverapps.styles.FONTS.WINDOW_TEXT,{price:p.getCurrentPrice()});f.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),f.setDimensions(t.text.width,0),f.fitTo(void 0,t.text.height);var _=new cc.Node;_.setContentSize2(0,t.amount.margin);var y=new cc.Node;y.addChild(f),y.addChild(_),y.addChild(i),y.addChild(s),s.setLocalZOrder(1),y.addChild(v),cleverapps.UI.arrangeWithMargins(y.children,{
direction:cleverapps.UI.VERTICAL,margin:t.margin}),cleverapps.UI.wrap(y),y.setAnchorPoint2(),y=cleverapps.UI.wrapWithPadding(y,{x:0,y:t.padding.y});var b=t.button;b.text=Messages.get("GetIt"),b.font=cleverapps.styles.FONTS.PIGGY_BANK_BUTTON_TEXT,b.onPressed=function(){cleverapps.piggyBank.buy(this.close.bind(this))}.bind(this);var w=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.PiggyBankWindow,!0);this._super({name:"piggybankwindow",title:cleverapps.piggyBank.isFull()?"messages:PiggyBankWindow.Title.Full":"messages:PiggyBankWindow.Title",content:y,button:b,help:function(){new PiggyBankRulesWindow},styles:w}),cleverapps.audio.playSound(bundles.main.urls.piggybank_window_effect||bundles.main.urls.shop_buy_effect),Lottery.addIcon(this.button),Lottery.addText(this)}}});PiggyBankWindow.prototype.listBundles=function(){return["piggybank_window"]},cleverapps.styles.PiggyBankWindow={margin:20,padding:{y:60},animation:{width:600,height:450,y:-90,
json:bundles.piggybank_window.jsons.piggy_bank_window_json},amount:{width:260,height:64,margin:10,y:0,coin:{flip:!0,scale:1}},text:{width:640,height:150},button:{width:300,height:100},timer:{width:220,height:50,bg:bundles.main.frames.timer_bg_png,margin:{x:30},x:0,y:0}};var PiggyBankRulesWindow=RulesWindow.extend({onWindowLoaded:function(){this._super({name:"piggybankwindow",styles:cleverapps.styles.PiggyBankRulesWindow})}});PiggyBankRulesWindow.prototype.listBundles=function(){return["piggybank_window"]},cleverapps.styles.PiggyBankRulesWindow={font:cleverapps.styles.FONTS.PIGGY_BANK_WINDOW_SMALL_TEXT,prefix:"messages:PiggyBankRulesWindow.",animation:{json:bundles.piggybank_window.jsons.piggy_bank_window_json,name:"piggy_help"}};var PackManager=function(e){cleverapps.config.debugMode&&(PackManager.NEXT_STAGE_INTERVAL="10 seconds"),e?(this.whenBuy=-1,this.used=0,this.save()):this.load()};PackManager.prototype.load=function(){var e=cleverapps.DataLoader.load(
cleverapps.DataLoaderTypes.PACK);this.whenBuy=e&&e.whenBuy&&e.whenBuy<Date.now()?e.whenBuy:-1,this.used=e&&e.used?e.used:0},PackManager.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.PACK,{whenBuy:this.whenBuy,used:this.used}),!1!==e&&cleverapps.synchronizer.addUpdateTask("packs")},PackManager.prototype.get=function(){var e=PackManager.PACKS[PackManager.PACK_NAME];return e=(e=Array.isArray(e)?e:[e]).filter(function(e){return!1!==e.active}),(e=this.used<e.length?e[this.used]:void 0)&&(e.stage=this.used,e.id=PackManager.PACK_NAME),e},PackManager.prototype.onBuyPack=function(){this.used++;var e=PackManager.PACKS[PackManager.PACK_NAME].length;this.used>e&&(this.used=e),this.whenBuy=Date.now(),this.save(),cleverapps.sideBar.resetByClassName(PackIcon)},PackManager.prototype.isAvailable=function(){var e=this.get();if(!e)return!1;if(cleverapps.flags.nopayments)return!1;if(!e.active&&!cleverapps.config.debugMode)return!1;if(e.available){var t=e.available;if(
!levels.user.checkAvailable(t))return!1}return!(Date.now()<this.whenBuy+cleverapps.parseInterval(PackManager.NEXT_STAGE_INTERVAL))},PackManager.PACK_NAME="starterPack",PackManager.NEXT_STAGE_INTERVAL="1 day",PackManager.PACKS={starterPack:[{product:"starterPack0",title:"messages:StarterPack0.Title",animation:"animation1",bundle:"starter_pack",banner:"starter_pack_banner_png",icon:"starter_pack_0_icon_png",description:"messages:StarterPack0.Description",reward:RewardsConfig.Packs[0],active:!0,available:{episode:1,level:5}},{product:"starterPack",title:"messages:StarterPack1.Title",animation:"animation2",bundle:"starter_pack",banner:"starter_pack_banner_png",icon:"starter_pack_1_icon_png",description:"messages:StarterPack1.Description",reward:RewardsConfig.Packs[1],active:!0,available:{episode:2,level:5}},{product:"starterPack2",title:"messages:StarterPack2.Title",animation:"animation3",bundle:"starter_pack",banner:"starter_pack_banner_png",icon:"starter_pack_2_icon_png",
description:"messages:StarterPack2.Description",reward:RewardsConfig.Packs[2],active:!0,available:{episode:3,level:5}}]},"merge"===cleverapps.config.type&&(PackManager.PACKS.starterPack[0].available={episode:0,level:4},PackManager.PACKS.starterPack[1].available={episode:0,level:6},PackManager.PACKS.starterPack[2].available={episode:0,level:8}),PackManager.PACKS.starterPack.forEach(function(e){cleverapps.PaymentsManager.PRODUCTS[e.product].reward=e.reward});var PackWindow=Window.extend({onWindowLoaded:function(e){e=e||{};var t=cleverapps.packManager.get();this.pack=t;var s=cleverapps.styles.PackWindow,n=s.button;this.setButtonContent(n),n.onPressed=function(){this.buyPackProduct()}.bind(this);var i=this.generateContent(t),o=cleverapps.overrideStyles(cleverapps.clone(cleverapps.styles.Window,!0),cleverapps.styles.PackWindow);if(this._super({name:"packwindow",title:s.title?{text:t.title,margin:{x:0,y:s.title.margin.y},font:s.title.font||cleverapps.styles.FONTS.WINDOW_TITLE_TEXT}:"",
content:i,button:n,windowBg:e.windowBg,styles:o,closeButtonDelay:1}),s.heroAnimation){var a=new cleverapps.Spine(s.heroAnimation.json,Array.isArray(s.heroAnimation.scale)?s.heroAnimation.scale[cleverapps.wideMode.mode]:s.heroAnimation.scale);a.setAnimation(0,s.heroAnimation.animation,!0),a.setPositionRound(s.heroAnimation.position),this.addChild(a),a.y-=a.height,a.runAction(new cc.MoveBy(.4,0,a.height).easing(cc.easeBackOut()))}cleverapps.audio.playSound(bundles.main.urls.window_effect),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PACKWINDOW_OPENED),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PACKWINDOW_OPENED+"_"+this.pack.id+(0===this.pack.stage?"":"_"+this.pack.stage)),Lottery.addIcon(this.button),Lottery.addText(this)},setButtonContent:function(e){var t=Product.Create(this.pack.product);e.content=this.generateButtonText(t)},generateButtonText:function(e){return new ProductPriceView(e,{font:cleverapps.styles.PackWindow.button.font,fitTo:{
width:cleverapps.styles.PackWindow.BottomButton.width}})},onShow:function(){var t=cleverapps.styles.PackWindow,e=this.content;this.runAction(new cc.Sequence(new cc.DelayTime(.1),new cc.PlaySound(bundles.starter_pack.urls.starter_pack_effect))),e.rewards&&e.rewards.children.forEach(function(e){e.setOpacity(0),e.runAction(new cc.Sequence(new cc.DelayTime(t.rewards.delay||0),new cc.FadeIn(t.rewards.duration||0)))}),e.discountLabel&&(e.discountLabel.setOpacity(0),e.discountLabel.runAction(new cc.Sequence(new cc.DelayTime(t.discountLabel.delay||0),new cc.FadeIn(t.discountLabel.duration||0)))),e.title&&(e.title.setOpacity(0),e.title.runAction(new cc.Sequence(new cc.DelayTime(t.Title.delay||0),new cc.FadeIn(t.Title.duration||0))))},generateContent:function(e){var t=cleverapps.styles.PackWindow,s=this.content=new cc.Node;return s.setAnchorPoint2(),s.setPositionRound({align:"center"},{align:"center"}),s.setContentSize2(t),t.animation&&(s.animation=this.generateAnimation(e,t.animation),
s.addChild(s.animation)),t.rewards&&(s.rewards=this.generateRewards(e,t.rewards),s.addChild(s.rewards)),t.discountLabel&&(s.discountLabel=this.generateText(t.discountLabel.text,t.discountLabel),s.addChild(s.discountLabel)),t.Title&&(s.title=this.generateText(e.title,t.Title),s.addChild(s.title)),s.setScale(t.scales[cleverapps.wideMode.mode]),s},applyTextStyles:function(e,t){t.split&&(e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.setString(e.string.split(/\s+/).join("\n"))),t.fontSize&&e.setFontSize(t.fontSize),t.fitTo&&e.fitTo(t.fitTo.width,t.fitTo.height),t.lineHeight&&e.setLineHeight&&e.setLineHeight(t.lineHeight),t.rotation&&e.setRotation(t.rotation)},generateAnimation:function(e,t){t=cleverapps.extend({},t.default||{},t[e.product]||{});var s=new cleverapps.Spine(bundles[e.bundle].jsons.pack_json,1);return s.setAnchorPoint2(),s.setPositionRound({align:"center",dx:t.dx||0},{align:"center",dy:t.dy||0}),t.introAnimation?(s.setAnimation(0,t.introAnimation,!1),s.addAnimation(0,
t.idleAnimation,!0,t.idleDelay||0)):s.setAnimation(0,t.idleAnimation,!0),s},generateText:function(e,t){var s=cleverapps.UI.generateTTFText(e,t.font);return this.applyTextStyles(s,t),s.setAnchorPoint2(),s.setPositionRound({align:"center",dx:t.dx||0},{align:"center",dy:t.dy||0}),s},generateRewards:function(e,n){n=cleverapps.clone(n);var t=cleverapps.extend({},n.positions.default||{},n.positions[e.product]||{}),i=new cc.Node;i.setAnchorPoint2(),i.setPositionRound({align:"center"},{align:"center"});var s=function(e,t){var s=new cleverapps.UI.generateTTFText(e,n.font);n.split=t.split,n.rotation=t.rotation,this.applyTextStyles(s,n),s.setAnchorPoint2(),s.setPositionRound(t),i.addChild(s)};for(var o in e.reward){var a=e.reward[o],r=t[o];if(void 0!==r)if("boosters"===o)for(var l in a){var c=a[l],p=r[l];void 0!==p&&s.call(this,"x"+c,p)}else s.call(this,"unlimitedLives"===o||"worker"===o?Product.FormatUnlimitedLives(a).title:"x"+a,r)}return i},buyPackProduct:function(){Product.Create(
this.pack.product).buy(function(){this.close(),cleverapps.packManager.onBuyPack()}.bind(this))}});PackWindow.prototype.listBundles=function(){return[cleverapps.packManager.get().bundle]},cleverapps.styles.COLORS=cleverapps.overrideColors(cleverapps.styles.COLORS,{PACKWINDOW_TITLE_YELLOW:new cc.Color(249,205,23,255),PACKWINDOW_TITLE_SHADOW:new cc.Color(97,47,1,255),PACKWINDOW_PRICE_STROKE:new cc.Color(9,88,3,255)}),cleverapps.styles.DECORATORS=cleverapps.overrideStyles(cleverapps.styles.DECORATORS,{PACKWINDOW_TITLE_STROKE:{size:3,color:cleverapps.styles.COLORS.PACKWINDOW_TITLE_SHADOW},PACKWINDOW_BUTTON_STROKE:{size:3,color:cleverapps.styles.COLORS.PACKWINDOW_PRICE_STROKE},PACKWINDOW_LABEL_STROKE:{color:cleverapps.styles.COLORS.BLACK,size:3}}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{PACKWINDOW_TITLE_TEXT:{size:70,color:cleverapps.styles.COLORS.PACKWINDOW_TITLE_YELLOW,stroke:cleverapps.styles.DECORATORS.PACKWINDOW_TITLE_STROKE},PACKWINDOW_BUTTON_TEXT:{size:60,
color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.PACKWINDOW_BUTTON_STROKE},PACKWINDOW_LABEL_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.PACKWINDOW_LABEL_STROKE},PACK_LABELS:{size:77,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.MESSAGE_RED_STROKE}}),cleverapps.styles.PackWindow={width:440,height:750,noBackground:!0,title:void 0,margin:20,y:60,content:{height:{dy:0}},text:{margin:{width:10}},description:{y:0},BottomButton:{bottomPadding:40,width:260},button:{width:300,height:100,price:{margin:{x:10,y:0}},x:0,y:50,font:cleverapps.styles.FONTS.BUTTON_TEXT},window:{Title:{zIndex:1}},scales:[.85,1,1],Title:void 0,discountLabel:void 0,animation:void 0,rewards:void 0},cleverapps.ShareBonus=function(e){if(this.id=e.id,this.storageKey=cleverapps.config.prefix+cleverapps.social.getLocalStoragePreffix()+"_"+e.id,this.bonus=e.bonus,this.interval=cleverapps.parseInterval(e.interval),this.type=e.type,
this.initStorageKey(e.startAvailable),e.isRewardedVideo&&cleverapps.rewardedAdsManager.isAvailable(RewardedAdsManager.REWARDED)){var t=this.storageKey;this.storageKey+="_video",this.initStorageKey(e.startAvailable),this.isReady()?this.type=cleverapps.ShareBonus.VIDEO:this.storageKey=t}cleverapps.ShareBonus.IsRewardAvailable()||this.type===cleverapps.ShareBonus.VIDEO||(this.bonus=0),this.takeBonusListener=function(){}},cleverapps.ShareBonus.prototype.initStorageKey=function(e){void 0===cleverapps.DataLoader.load(this.storageKey)&&cleverapps.DataLoader.save(this.storageKey,e?0:Date.now())},cleverapps.ShareBonus.prototype.markTaken=function(){cleverapps.DataLoader.save(this.storageKey,Date.now())},cleverapps.ShareBonus.prototype.createShareCallback=function(t,s){return function(e){e===cleverapps.Social.CODE_SUCCEED?(s!==cleverapps.ShareBonus.REQUEST&&s!==cleverapps.ShareBonus.DIALOG||(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SHARE),cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.SHARE_ITEM,{id:this.id})),this.bonus&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.REWARD_RECEIVED,{amount:this.bonus}),this.markTaken(),this.bonus&&(levels.user.setGold(levels.user.gold+this.bonus),this.takeBonusListener()),t()):console.log(Messages.get("ShareBonus.ShareFailed")+e)}.bind(this)},cleverapps.ShareBonus.cycleShareData=function(e,t){t=cleverapps.extend({},t||{},{gameTitle:Messages.get(cleverapps.config.title),gameName:cleverapps.config.name});var s=cc.loader.getRes(bundles.main.jsons.share_json)[e],n=cleverapps.DataLoader.load(cleverapps.config.prefix+cleverapps.social.getLocalStoragePreffix()+"_"+e+"ShareId");void 0===n?n=Math.floor(3*Math.random()):n++,cleverapps.DataLoader.save(cleverapps.config.prefix+cleverapps.social.getLocalStoragePreffix()+"_"+e+"ShareId",n);var i=s[cleverapps.settings.language]||s[cc.sys.LANGUAGE_ENGLISH],o={};i&&(o.picture=i[n%i.length]),s.vk&&(o.vk=s.vk[n%s.vk.length]);var a=s.texts[n%s.texts.length];for(var r in a){
var l=a[r];"to"===r?o[r]=Messages.replace(l,t):"string"==typeof l&&0===l.indexOf("messages:")&&(l=Messages.replace(l,t),o[r]=Messages.get(l,t))}return o},cleverapps.ShareBonus.prototype.request=function(t,s){cleverapps.social.checkConnection(function(){var e=cleverapps.ShareBonus.cycleShareData(this.id,s);cleverapps.social.request(e,this.createShareCallback(function(){t()},cleverapps.ShareBonus.REQUEST))}.bind(this))},cleverapps.ShareBonus.prototype.shareDialog=function(t,s){cleverapps.social.checkConnection(function(){var e=cleverapps.ShareBonus.cycleShareData(this.id,s);cleverapps.social.shareDialog(e,this.createShareCallback(function(){cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.SHARE),t()},cleverapps.ShareBonus.DIALOG))}.bind(this))},cleverapps.ShareBonus.prototype.rewardedVideo=function(e){var t=this.createShareCallback(e,cleverapps.ShareBonus.VIDEO);cleverapps.rewardedAdsManager.loadAndPlay(function(){t(cleverapps.Social.CODE_SUCCEED),cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.REWARDED_SHARE)})},cleverapps.ShareBonus.prototype.takeBonus=function(e,t){switch(this.type){case cleverapps.ShareBonus.DIALOG:this.shareDialog(e,t);break;case cleverapps.ShareBonus.VIDEO:this.rewardedVideo(e);break;default:this.request(e,t)}},cleverapps.ShareBonus.prototype.isReady=function(){return parseInt(cc.sys.localStorage.getItem(this.storageKey))+this.interval<=Date.now()},cleverapps.ShareBonus.IsRewardAvailable=function(){if(cleverapps.flags.noviral||cleverapps.flags.noshares)return!1;var e=cleverapps.User.calcSource();return-1===["instant","mobile_vk"].indexOf(e)&&("mobile_ok"===e||"web_ok"===e||cleverapps.user.checkAvailable(cleverapps.ShareBonus.REWARD_AVAILABLE))},cleverapps.ShareBonus.DIALOG="dialog",cleverapps.ShareBonus.REQUEST="request",cleverapps.ShareBonus.VIDEO="video",cleverapps.ShareBonus.SHARES={victory:{bonus:20,interval:"20 minutes",type:cleverapps.ShareBonus.DIALOG,isRewardedVideo:!0},finishEpisode:{bonus:30,interval:"1 hour",
type:cleverapps.ShareBonus.DIALOG,isRewardedVideo:!0,startAvailable:!0},beatFriend:{bonus:10,interval:"1 minute",type:cleverapps.ShareBonus.REQUEST,startAvailable:!0},champion:{bonus:20,interval:"1 hour",type:cleverapps.ShareBonus.DIALOG,isRewardedVideo:!0},newLeague:{bonus:50,interval:"1 hour",type:cleverapps.ShareBonus.DIALOG,isRewardedVideo:!0,startAvailable:!0},dailyCup:{bonus:20,interval:"20 minutes",type:cleverapps.ShareBonus.DIALOG,isRewardedVideo:!0}},Object.keys(cleverapps.ShareBonus.SHARES).forEach(function(e){cleverapps.ShareBonus.SHARES[e].id=e}),cleverapps.ShareBonus.REWARD_AVAILABLE={episode:2,level:1};var ShareBonusButton=BonusButton.extend({ctor:function(e){var t=this.shareBonus=new cleverapps.ShareBonus(e.shareBonus),s=e.callback||function(){},n=t.type===cleverapps.ShareBonus.VIDEO?"messages:WatchAd":"messages:Share",i={score:e.score};e.level&&(i.levelNo=e.level.getHumanReadableNumber()),e.toReplace&&cleverapps.override(i,e.toReplace),this._super({reward:t.bonus,
text:n,onClick:function(){t.takeBonus(this.createListener(function(){Buttons.remove(this),e.window&&e.window.addReward&&e.window.addReward(t.bonus)?s():this.animateCollectCoin(s)}.bind(this)),i)}})}});ShareBonusButton.create=function(e){var t=new cleverapps.ShareBonus(e.shareBonus);if(!cleverapps.flags.noviral&&!cleverapps.flags.noshares&&cleverapps.social.isLoggedIn()&&t.isReady())return new ShareBonusButton(e)},cleverapps.styles.ShareBonusButton={width:280,height:110};var ShareCheckBox=cleverapps.UI.CheckBox.extend({ctor:function(e,t){this.window=t,this.shareOptions=e,this._super({onChange:this.onChange.bind(this),label:{text:"messages:Share",font:this.window.withBg?cleverapps.styles.FONTS.WINDOW_TEXT:cleverapps.styles.FONTS.WHITE_TEXT,clickable:!0},styles:cleverapps.styles.ShareCheckBox}),this.updateState()},onChange:function(e){ShareCheckBox.UNCHECKED[this.window.name]=!e},shareDialog:function(t){cleverapps.social.checkConnection(function(){
var e=cleverapps.ShareBonus.cycleShareData(t.shareId,t.toReplace);cleverapps.social.shareDialog(e,function(e){e===cleverapps.Social.CODE_SUCCEED?(cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.SHARE),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SHARE),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SHARE_ITEM,{id:t.shareId})):console.log(Messages.get("ShareBonus.ShareFailed")+e)}.bind(this))}.bind(this))},updateState:function(){this.setSelected(this.isWindowChecked())},onWindowClose:function(){this.isWindowChecked()&&this.shareDialog(this.shareOptions)},isWindowChecked:function(){return!ShareCheckBox.UNCHECKED[this.window.name]}});ShareCheckBox.UNCHECKED={},cleverapps.styles.ShareCheckBox={margin:15,padding:{x:0,y:0},checkImage:bundles.main.frames.select_friend_checkbox_selected,bgImage:bundles.main.frames.select_friend_checkbox};var Messages={dictionary:void 0,onInitializedListeners:{},isInitialized:function(){return this.dictionary},get:function(e,t){if(
!Messages.dictionary)return"";"string"==typeof e&&0===e.indexOf("messages:")&&(e=e.substring("messages:".length));var s=cleverapps.skins.getSlot("localization");s[e]&&(e=s[e]);var n=Messages.dictionary[e];if(void 0===n)return console.log("WARN: langugage_"+cleverapps.settings.language),console.log("Cant find TEXT string by code: "+e),console.log((new Error).stack),"";if(Array.isArray(n))for(var i=0;i<n.length;i++)n[i]=Messages.replace(n[i],t);else n=Messages.replace(n,t);return n},has:function(e){return!!Messages.dictionary&&("string"==typeof e&&0===e.indexOf("messages:")&&(e=e.substring("messages:".length)),Messages.dictionary[e])},replace:function(e,t){if(void 0===t&&(t={}),"string"==typeof e&&-1!==e.indexOf("%{facebook}")){var s=cleverapps.social.getCode();"mobile_ok"!==s&&"web_ok"!==s||(s="ok"),"mobile_vk"!==s&&"web_vk"!==s||(s="vk"),"mbga"!==s&&"sp_mbga"!==s||(s="mbga"),"nk"===s&&(s="nk"),Messages.dictionary[s]||(s="facebook"),t.facebook=Messages.get(s)}if("string"==typeof e)for(
var n in t){var i=t[n];"string"==typeof i&&0===i.indexOf("messages:")&&(i=Messages.get(i)),e=(e=e.replace("%{"+n+"}",i)).replace("%{"+n+"}",i)}return e},getLocalized:function(e,t){if("string"==typeof e)return 0===e.indexOf("messages:")&&(e=Messages.get(e.substring("messages:".length))),e=Messages.replace(e,t);if("object"==typeof e&&0<cleverapps.intersect(Object.keys(e),cleverapps.Settings.getAvailableLanguages()).length)return e=void 0!==e[cleverapps.settings.language]?e[cleverapps.settings.language]:e[cc.sys.LANGUAGE_ENGLISH],Messages.getLocalized(e,t);if("object"!=typeof e)return e;for(var s in e=cleverapps.clone(e))e[s]=Messages.getLocalized(e[s],t);return e},preload:function(t,s){cleverapps.bundleLoader.loadBundle("language_"+t,{onSuccess:function(e){Messages.dictionary={},[e.jsons.common_json,e.jsons.lang_json,e.jsons.skin_json,e.jsons.project_json,e.jsons.farm_json,e.jsons.solitaire_json,e.jsons.quests_json].forEach(function(e){e&&cleverapps.extend(Messages.dictionary,
cc.loader.getRes(e))}),cleverapps.bundleLoader.deleteBundle("language_"+t),cleverapps.values(Messages.onInitializedListeners).forEach(cleverapps.callFunc),s()},blocked:!0})}};cleverapps.LocalizationManager={run:function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.LOCALIZATION_MANAGER);("playable"!==cleverapps.config.source&&void 0===e&&this.hasInconsistentLanguage()||this.hasFirstInitLanguageWindow())&&this.displayLanguageWindow()},hasInconsistentLanguage:function(){var e=cleverapps.settings.language,t=cleverapps.Settings.getAvailableLanguages(),s=cleverapps.Settings.getDefaultLanguage();return e!==s&&0<=t.indexOf(s)},hasFirstInitLanguageWindow:function(){return 0===levels.user.episode&&0===levels.user.level&&"plinga"===cleverapps.User.calcSource()&&"riddles"===cleverapps.config.name},displayLanguageWindow:function(){cleverapps.metha.displayWhenFreeFocus({focus:"displayInconsistentLanguage",action:function(e){cleverapps.DataLoader.save(
cleverapps.DataLoaderTypes.LOCALIZATION_MANAGER,1),new LanguagesWindow,cleverapps.metha.onceNoWindowsListener=e}})}},cleverapps.TempGoods=function(){this.load()},cleverapps.TempGoods.prototype.buyGood=function(e,t){this.checkGoodBuyed(e)?this.currentGooods[e].actionTime+=t:this.currentGooods[e]={buyTime:Date.now(),actionTime:t,fpShowed:0},this.save()},cleverapps.TempGoods.prototype.reset=function(){this.currentGooods={},this.save()},cleverapps.TempGoods.prototype.resetGood=function(e){this.currentGooods[e]&&(delete this.currentGooods[e],this.save())},cleverapps.TempGoods.prototype.goodLeftTime=function(e){if(void 0===this.currentGooods[e])return 0;var t=this.currentGooods[e].buyTime+this.currentGooods[e].actionTime-Date.now();return t<=0?0:t},cleverapps.TempGoods.prototype.checkGoodBuyed=function(e){return 0<this.goodLeftTime(e)},cleverapps.TempGoods.prototype.displayPromotionOnFinish=function(){if(!cleverapps.flags.nopayments)for(var e in this.currentGooods)if(
!this.currentGooods[e].fpShowed&&0===this.goodLeftTime(e))return void this.showPromotion(e)},cleverapps.TempGoods.prototype.showPromotion=function(t){cleverapps.metha.display({focus:"TempGoodFinishWindow",action:function(e){this.currentGooods[t].fpShowed=1,this.save(),new TempGoodFinishWindow(t),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})},cleverapps.TempGoods.prototype.getInfo=function(){return this.currentGooods},cleverapps.TempGoods.prototype.updateInfo=function(e,t){this.currentGooods=e,this.save(t)},cleverapps.TempGoods.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.TEMP_GOODS);this.currentGooods=void 0!==e?e:{}},cleverapps.TempGoods.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.TEMP_GOODS,this.getInfo()),e||cleverapps.synchronizer.addUpdateTask("tempgoods")},cleverapps.TempGoods.UNLIMITED_LIVES=1;var TempGoodFinishWindow=Window.extend({onWindowLoaded:function(e){this.goodType=parseInt(e)
;var t=cleverapps.styles.TempGoodFinishWindow,s=new cc.Node;if(s.setContentSize(t.width,t.height),s.setAnchorPoint(.5,.5),bundles.temp_good_finish_window.jsons.lives_json){var n=new cleverapps.Spine(bundles.temp_good_finish_window.jsons.lives_json);s.addChild(n),-1!==["differences","tripeaks"].indexOf(cleverapps.config.name)?n.setAnimationAndIdleAfter("no_life","idle"):n.setAnimation(0,"no_life",!0),n.setPosition(cleverapps.styles.TempGoodFinishWindow.sad_icon.x,cleverapps.styles.TempGoodFinishWindow.sad_icon.y)}var i=cleverapps.UI.generateTTFText("messages:TempGoodsFinishWindow.unlimitedLivesText",cleverapps.styles.FONTS.WINDOW_TEXT);if(s.addChild(i),i.setDimensions(cleverapps.styles.TempGoodFinishWindow.text.width,0),i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setPosition(cleverapps.styles.TempGoodFinishWindow.text.x,cleverapps.styles.TempGoodFinishWindow.text.y),t.goodIcon){var o=new cc.Sprite(bundles.reward_icons.frames.life_unlim);s.addChild(o),o.setPosition(
cleverapps.styles.TempGoodFinishWindow.good_icon.x,cleverapps.styles.TempGoodFinishWindow.good_icon.y)}var a=cleverapps.overrideStyles(cleverapps.styles.Window,t.window,!0);this._super({content:s,title:"messages:TempGoodsFinishWindow.title",name:"tempgoodsfinishwindow",styles:a,button:{content:this.getButtonContent(),width:cleverapps.styles.TempGoodFinishWindow.button.width,height:cleverapps.styles.TempGoodFinishWindow.button.height,onPressed:this.onBuy.bind(this)}}),Lottery.addIcon(this.button),t.hero&&(this.hero=new cleverapps.Spine(bundles.hero.jsons.hero_json,1),this.hero.setAnimation(0,"lose",!0),this.hero.setPositionRound(t.hero),this.addChild(this.hero)),cleverapps.audio.playSound(bundles.temp_good_finish_window.urls.lives_effect)},onBuy:function(){if(this.goodType===cleverapps.TempGoods.UNLIMITED_LIVES){var e=Product.Create("unlimitedLives"),t=function(){this.close()}.bind(this);e.buy(t)}},getButtonContent:function(){if(this.goodType===cleverapps.TempGoods.UNLIMITED_LIVES
)return new ProductPriceView(Product.Create("unlimitedLives"),{font:cleverapps.styles.FONTS.BUTTON_TEXT});var e=new cc.Node;return e.setAnchorPoint(.5,.5),e},listBundles:function(){return["temp_good_finish_window"]}});cleverapps.styles.TempGoodFinishWindow={width:650,height:400,goodIcon:!0,sad_icon:{x:100,y:190},good_icon:{x:170,y:110},text:{x:450,y:190,width:400},button:{width:300,height:100},window:{}},function(i,d){"use strict";var u="function",e="undefined",t="model",s="name",n="type",o="vendor",a="version",r="architecture",l="console",c="mobile",p="tablet",h="smarttv",g="wearable",v={extend:function(e,t){var s={};for(var n in e)t[n]&&t[n].length%2==0?s[n]=t[n].concat(e[n]):s[n]=e[n];return s},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:d},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
"")}},m={rgx:function(e,t){for(var s,n,i,o,a,r,l=0;l<t.length&&!a;){var c=t[l],p=t[l+1];for(s=n=0;s<c.length&&!a;)if(a=c[s++].exec(e))for(i=0;i<p.length;i++)r=a[++n],"object"==typeof(o=p[i])&&0<o.length?2==o.length?typeof o[1]==u?this[o[0]]=o[1].call(this,r):this[o[0]]=o[1]:3==o.length?typeof o[1]!==u||o[1].exec&&o[1].test?this[o[0]]=r?r.replace(o[1],o[2]):d:this[o[0]]=r?o[1].call(this,r,o[2]):d:4==o.length&&(this[o[0]]=r?o[3].call(this,r.replace(o[1],o[2])):d):this[o]=r||d;l+=2}},str:function(e,t){for(var s in t)if("object"==typeof t[s]&&0<t[s].length){for(var n=0;n<t[s].length;n++)if(v.has(t[s][n],e))return"?"===s?d:s}else if(v.has(t[s],e))return"?"===s?d:s;return e}},f={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51",
"NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},_={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,a],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],a],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[s,a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],a],[/(edge)\/((\d+)?[\w\.]+)/i],[s,a],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],a],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],a],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],a],[
/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],a],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],a],[/(QQ)\/([\d\.]+)/i],[s,a],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,a],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[a,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[a,[s,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[a,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],a],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],a],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[a,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,a],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],a],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],a],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],a],[/fxios\/([\w\.-]+)/i],[a,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,s],[
/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[a,m.str,f.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,a],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,a]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[r,"amd64"]],[/(ia32(?=;))/i],[[r,v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[r,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[r,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[r,/ower/,"",
v.lowerize]],[/(sun4\w)[;\)]/i],[[r,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[r,v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[t,o,[n,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[t,[o,"Apple"],[n,p]],[/(apple\s{0,1}tv)/i],[[t,"Apple TV"],[o,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[o,t,[n,p]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[t,[o,"Amazon"],[n,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[t,m.str,f.device.amazon.model],[o,"Amazon"],[n,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[t,o,[n,c]],[/\((ip[honed|\s\w*]+);/i],[t,[o,"Apple"],[n,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[o,t,[n,c]],[/\(bb10;\s(\w+)/i],[t,[o,
"BlackBerry"],[n,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[t,[o,"Asus"],[n,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[o,"Sony"],[t,"Xperia Tablet"],[n,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[t,[o,"Sony"],[n,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[o,t,[n,l]],[/android.+;\s(shield)\sbuild/i],[t,[o,"Nvidia"],[n,l]],[/(playstation\s[34portablevi]+)/i],[t,[o,"Sony"],[n,l]],[/(sprint\s(\w+))/i],[[o,m.str,f.device.sprint.vendor],[t,m.str,f.device.sprint.model],[n,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[o,t,[n,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[o,[t,/_/g," "],[n,c]],[/(nexus\s9)/i],[t,[o,"HTC"],[n,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[t,[o,"Huawei"],[n,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[o,t,[n,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[t,[o,"Microsoft"],[n,l]],[
/(kin\.[onetw]{3})/i],[[t,/\./g," "],[o,"Microsoft"],[n,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[t,[o,"Motorola"],[n,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[t,[o,"Motorola"],[n,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[o,v.trim],[t,v.trim],[n,h]],[/hbbtv.+maple;(\d+)/i],[[t,/^/,"SmartTV"],[o,"Samsung"],[n,h]],[/\(dtv[\);].+(aquos)/i],[t,[o,"Sharp"],[n,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[o,"Samsung"],t,[n,p]],[/smart-tv.+(samsung)/i],[o,[n,h],t],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[o,"Samsung"],t,[n,c]],[/sie-(\w+)*/i],[t,[o,"Siemens"],[n,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[o,"Nokia"],t,[n,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[t,[o,"Acer"],[n,p]],[
/android.+([vl]k\-?\d{3})\s+build/i],[t,[o,"LG"],[n,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[o,"LG"],t,[n,p]],[/(lg) netcast\.tv/i],[o,t,[n,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[t,[o,"LG"],[n,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[t,[o,"Lenovo"],[n,p]],[/linux;.+((jolla));/i],[o,t,[n,c]],[/((pebble))app\/[\d\.]+\s/i],[o,t,[n,g]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[o,t,[n,c]],[/crkey/i],[[t,"Chromecast"],[o,"Google"]],[/android.+;\s(glass)\s\d/i],[t,[o,"Google"],[n,g]],[/android.+;\s(pixel c)\s/i],[t,[o,"Google"],[n,p]],[/android.+;\s(pixel xl|pixel)\s/i],[t,[o,"Google"],[n,c]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[t,/_/g," "],[o,"Xiaomi"],[n,c]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[t,/_/g," "],[o,
"Xiaomi"],[n,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[t,[o,"Meizu"],[n,p]],[/android.+a000(1)\s+build/i],[t,[o,"OnePlus"],[n,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[t,[o,"RCA"],[n,p]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[t,[o,"Dell"],[n,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[t,[o,"Verizon"],[n,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[o,"Barnes & Noble"],t,[n,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[t,[o,"NuVision"],[n,p]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[o,"ZTE"],t,[n,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[t,[o,"Swiss"],[n,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[t,[o,"Swiss"],[n,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[t,[o,"Zeki"],[n,p]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[o,"Dragon Touch"],t,[n,p]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[t,[o,"Insignia"],[n,p]],[
/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[t,[o,"NextBook"],[n,p]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[o,"Voice"],t,[n,c]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[o,"LvTel"],t,[n,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[t,[o,"Envizen"],[n,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[o,t,[n,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[t,[o,"MachSpeed"],[n,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[o,t,[n,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[t,[o,"Rotor"],[n,p]],[/android.+(KS(.+))\s+build/i],[t,[o,"Amazon"],[n,p]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[o,t,[n,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[n,v.lowerize],o,t],[/(android.+)[;\/].+build/i],[t,[o,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,
/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,a],[/rv\:([\w\.]+).*(gecko)/i],[a,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[a,m.str,f.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[a,m.str,f.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,a],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],a],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],a],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,
/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],a],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,a],[/(haiku)\s(\w+)/i],[s,a],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[a,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,a]]},y=function(e,t){if("object"==typeof e&&(t=e,e=d),!(this instanceof y))return new y(e,t).getResult();var s=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?v.extend(_,t):_;return this.getBrowser=function(){
var e={name:d,version:d};return m.rgx.call(e,s,n.browser),e.major=v.major(e.version),e},this.getCPU=function(){var e={architecture:d};return m.rgx.call(e,s,n.cpu),e},this.getDevice=function(){var e={vendor:d,model:d,type:d};return m.rgx.call(e,s,n.device),e},this.getEngine=function(){var e={name:d,version:d};return m.rgx.call(e,s,n.engine),e},this.getOS=function(){var e={name:d,version:d};return m.rgx.call(e,s,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return s},this.setUA=function(e){return s=e,this},this};y.VERSION="0.7.17",y.BROWSER={NAME:s,MAJOR:"major",VERSION:a},y.CPU={ARCHITECTURE:r},y.DEVICE={MODEL:t,VENDOR:o,TYPE:n,CONSOLE:l,MOBILE:c,SMARTTV:h,TABLET:p,WEARABLE:g,EMBEDDED:"embedded"},y.ENGINE={NAME:s,VERSION:a},y.OS={NAME:s,VERSION:a},typeof exports!==e?(typeof module!==e&&module.exports&&(exports=module.exports=y),
exports.UAParser=y):typeof define===u&&define.amd?define(function(){return y}):i&&(i.UAParser=y);var b=i&&(i.jQuery||i.Zepto);if(typeof b!==e){var w=new y;b.ua=w.getResult(),b.ua.get=function(){return w.getUA()},b.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var s in t)b.ua[s]=t[s]}}}("object"==typeof window?window:this),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.SuperGif=t()}(this,function(){var r=function(e){return e.reduce(function(e,t){return 2*e+t},0)},l=function(e){for(var t=[],s=7;0<=s;s--)t.push(!!(e&1<<s));return t},ne=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],s=0;s<e;s++)t.push(this.readByte());return t},this.read=function(e){for(var t="",s=0;s<e;s++
)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},ie=function(i,o){o||(o={});var n=function(e){for(var t=[],s=0;s<e;s++)t.push(i.readBytes(3));return t},a=function(){var e,t;for(t="";e=i.readByte(),t+=i.read(e),0!==e;);return t},t=function(e){e.leftPos=i.readUnsigned(),e.topPos=i.readUnsigned(),e.width=i.readUnsigned(),e.height=i.readUnsigned();var t=l(i.readByte());e.lctFlag=t.shift(),e.interlaced=t.shift(),e.sorted=t.shift(),e.reserved=t.splice(0,2),e.lctSize=r(t.splice(0,3)),e.lctFlag&&(e.lct=n(1<<e.lctSize+1)),e.lzwMinCodeSize=i.readByte();var s=a();e.pixels=function(t,n){for(var e,s,i=0,o=function(e){for(var t=0,s=0;s<e;s++)n.charCodeAt(i>>3)&1<<(7&i)&&(t|=1<<s),i++;return t},a=[],r=1<<t,l=r+1,c=t+1,p=[],d=function(){p=[],c=t+1;for(var e=0;e<r;e++)p[e]=[e];p[r]=[],p[l]=null};;)if(s=e,(e=o(c))!==r){if(e===l)break;if(e<p.length)s!==r&&p.push(p[s].concat(p[e][0]));else{if(e!==p.length)throw new Error(
"Invalid LZW code.");p.push(p[s].concat(p[s][0]))}a.push.apply(a,p[e]),p.length===1<<c&&c<12&&c++}else d();return a}(e.lzwMinCodeSize,s),e.interlaced&&(e.pixels=function(e,t){for(var s,n,i,o=new Array(e.length),a=e.length/t,r=[0,4,2,1],l=[8,8,4,2],c=0,p=0;p<4;p++)for(var d=r[p];d<a;d+=l[p])s=d,n=c,i=e.slice(n*t,(n+1)*t),o.splice.apply(o,[s*t,t].concat(i)),c++;return o}(e.pixels,e.width)),o.img&&o.img(e)},s=function(){var e={};switch(e.sentinel=i.readByte(),String.fromCharCode(e.sentinel)){case"!":e.type="ext",function(e){var t,s;switch(e.label=i.readByte(),e.label){case 249:e.extType="gce",function(e){i.readByte();var t=l(i.readByte());e.reserved=t.splice(0,3),e.disposalMethod=r(t.splice(0,3)),e.userInput=t.shift(),e.transparencyGiven=t.shift(),e.delayTime=i.readUnsigned(),e.transparencyIndex=i.readByte(),e.terminator=i.readByte(),o.gce&&o.gce(e)}(e);break;case 254:e.extType="com",(s=e).comment=a(),o.com&&o.com(s);break;case 1:e.extType="pte",n=e,i.readByte(),n.ptHeader=i.readBytes(12)
,n.ptData=a(),o.pte&&o.pte(n);break;case 255:e.extType="app",function(e){var t,s;switch(i.readByte(),e.identifier=i.read(8),e.authCode=i.read(3),e.identifier){case"NETSCAPE":s=e,i.readByte(),s.unknown=i.readByte(),s.iterations=i.readUnsigned(),s.terminator=i.readByte(),o.app&&o.app.NETSCAPE&&o.app.NETSCAPE(s);break;default:(t=e).appData=a(),o.app&&o.app[t.identifier]&&o.app[t.identifier](t)}}(e);break;default:e.extType="unknown",(t=e).data=a(),o.unknown&&o.unknown(t)}var n}(e);break;case",":e.type="img",t(e);break;case";":e.type="eof",o.eof&&o.eof(e);break;default:throw new Error("Unknown block: 0x"+e.sentinel.toString(16))}"eof"!==e.type&&setTimeout(s,0)};!function(){var e={};if(e.sig=i.read(3),e.ver=i.read(3),"GIF"!==e.sig)throw new Error("Not a GIF file.");e.width=i.readUnsigned(),e.height=i.readUnsigned();var t=l(i.readByte());e.gctFlag=t.shift(),e.colorRes=r(t.splice(0,3)),e.sorted=t.shift(),e.gctSize=r(t.splice(0,3)),e.bgColor=i.readByte(),e.pixelAspectRatio=i.readByte(),
e.gctFlag&&(e.gct=n(1<<e.gctSize+1)),o.hdr&&o.hdr(e)}(),setTimeout(s,0)};return function(e){var n,i,r={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var t in e)r[t]=e[t];r.vp_w&&r.vp_h&&(r.is_vp=!0);var s=null,o=!1,a=null,l=null,c=null,p=null,d=null,u=null,h=null,g=!0,v=!1,m=[],f=[],_=[],y=r.gif;if(!y){var b=new Image;b.crossOrigin="Anonymous",b.src="",y=b}void 0===r.auto_play&&(r.auto_play=!y.getAttribute("rel:auto_play")||"1"==y.getAttribute("rel:auto_play"));var w,T,S,E,A,C,I,O,k,R,L,P,N=r.hasOwnProperty("on_end")?r.on_end:null,j=r.hasOwnProperty("loop_delay")?r.loop_delay:0,B=r.hasOwnProperty("loop_mode")?r.loop_mode:"auto",M=!r.hasOwnProperty("draw_while_loading")||r.draw_while_loading,x=!!M&&(!r.hasOwnProperty("show_progress_bar")||r.show_progress_bar),D=r.hasOwnProperty("progressbar_height")?r.progressbar_height:25,F=r.hasOwnProperty("progressbar_background_color")?r.progressbar_background_color:"rgba(255,255,255,0.4)",W=r.hasOwnProperty("progressbar_foreground_color"
)?r.progressbar_foreground_color:"rgba(255,0,22,.8)",U=function(){d=c,u=c=l=a=null},V=function(){try{ie(n,J)}catch(e){z("parse")}},G=function(e,t){k.width=e*$(),k.height=t*$(),L.style.minWidth=e*$()+"px",P.width=e,P.height=t,P.style.width=e+"px",P.style.height=t+"px",P.getContext("2d").setTransform(1,0,0,1,0,0)},H=function(e,t,s){if(s&&x){var n,i,o,a=D;r.is_vp?v?(i=(r.vp_t+r.vp_h-a)/$(),a/=$(),n=r.vp_l/$()+e/t*(r.vp_w/$()),o=k.width/$()):(i=r.vp_t+r.vp_h-a,a=a,n=r.vp_l+e/t*r.vp_w,o=k.width):(i=(k.height-a)/(v?$():1),n=e/t*k.width/(v?$():1),o=k.width/(v?$():1),a/=v?$():1),R.fillStyle=F,R.fillRect(n,i,o-n,a),R.fillStyle=W,R.fillRect(0,i,n,a)}},z=function(e){s=e,i={width:y.width,height:y.height},m=[],f=[]},Y=function(){if(u){m.push({data:u.getImageData(0,0,i.width,i.height),delay:l}),_.push({x:0,y:0});var e=new Image;e.addEventListener("load",function(){f.push(e)},!1),e.src=u.canvas.toDataURL()}},K=(E=-1,A=0,C=function(e){E+=e,O()},w=!1,T=function(){null!==N&&N(y),A++,!1!==B||A<0?S(
):g=w=!1},S=function(){if(w=g){C(1);var e=10*m[E].delay;e||(e=100),0==(E+1+m.length)%m.length?(e+=j,setTimeout(T,e)):setTimeout(S,e)}},O=function(){var e;(E=parseInt(E,10))>m.length-1&&(E=0),E<0&&(E=0),e=_[E],P.getContext("2d").putImageData(m[E].data,e.x,e.y),R.globalCompositeOperation="copy",R.drawImage(P,0,0)},{init:function(){s||(r.c_w&&r.c_h||R.scale($(),$()),r.auto_play?I():(E=0,O()))},step:I=function(){w||setTimeout(S,0)},play:function(){g=!0,I()},pause:function(){g=!1},getFrames:function(){return f},playing:g,move_relative:C,current_frame:function(){return E},length:function(){return m.length},move_to:function(e){E=e,O()}}),X=function(e){H(n.pos,n.data.length,e)},q=function(){},Z=function(t,s){return function(e){t(e),X(s)}},J={hdr:Z(function(e){G((i=e).width,i.height)}),gce:Z(function(e){Y(),U(),a=e.transparencyGiven?e.transparencyIndex:null,l=e.delayTime,c=e.disposalMethod}),com:Z(q),app:{NETSCAPE:Z(q)},img:Z(function(e){u||(u=P.getContext("2d"));var t=m.length,
s=e.lctFlag?e.lct:i.gct;0<t&&(3===d?null!==p?u.putImageData(m[p].data,0,0):u.clearRect(h.leftPos,h.topPos,h.width,h.height):p=t-1,2===d&&u.clearRect(h.leftPos,h.topPos,h.width,h.height));var n=u.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach(function(e,t){e!==a&&(n.data[4*t+0]=s[e][0],n.data[4*t+1]=s[e][1],n.data[4*t+2]=s[e][2],n.data[4*t+3]=255)}),u.putImageData(n,e.leftPos,e.topPos),v||(R.scale($(),$()),v=!0),M&&(R.drawImage(P,0,0),M=r.auto_play),h=e},!0),eof:function(e){Y(),X(!1),r.c_w&&r.c_h||(k.width=i.width*$(),k.height=i.height*$()),K.init(),o=!1,te&&te(y)}},Q=function(){var e=y.parentNode;e||(e=document.createElement("div")).appendChild(y);var t=document.createElement("div");k=document.createElement("canvas"),R=k.getContext("2d"),L=document.createElement("div"),P=document.createElement("canvas"),t.width=k.width=y.width,t.height=k.height=y.height,L.style.minWidth=y.width+"px",t.className="jsgif",L.className="jsgif_toolbar",t.appendChild(k),t.appendChild(L),
e.insertBefore(t,y),e.removeChild(y),r.c_w&&r.c_h&&G(r.c_w,r.c_h),ee=!0},$=function(){return r.max_width&&i&&i.width>r.max_width?r.max_width/i.width:1},ee=!1,te=!1,se=function(e){return!(o||(te=e||!1,o=!0,m=[],f=[],U(),h=u=d=p=null))};return{play:K.play,pause:K.pause,getFrames:K.getFrames,move_relative:K.move_relative,move_to:K.move_to,get_playing:function(){return g},get_canvas:function(){return k},get_canvas_scale:function(){return $()},get_loading:function(){return o},get_auto_play:function(){return r.auto_play},get_length:function(){return K.length()},get_current_frame:function(){return K.current_frame()},load_url:function(e,t){if(se(t)){var s=new XMLHttpRequest;s.open("GET",e,!0),"overrideMimeType"in s?s.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in s?s.responseType="arraybuffer":s.setRequestHeader("Accept-Charset","x-user-defined"),s.onloadstart=function(){ee||Q()},s.onload=function(e){200!=this.status&&z("xhr - response"),"response"in this||(
this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var t=this.response;0<t.toString().indexOf("ArrayBuffer")&&(t=new Uint8Array(t)),n=new ne(t),setTimeout(V,0)},s.onprogress=function(e){e.lengthComputable&&H(e.loaded,e.total,!0)},s.onerror=function(){z("xhr")},s.send()}},load:function(e){this.load_url(y.getAttribute("rel:animated_src")||y.src,e)},load_raw:function(e,t){se(t)&&(ee||Q(),n=new ne(e),setTimeout(V,0))},set_frame_offset:function(e,t){_[e]?(void 0!==t.x&&(_[e].x=t.x),void 0!==t.y&&(_[e].y=t.y)):_[e]=t}}}}),function(){function n(e,t){var s=this instanceof n?this:i;return s.reset(t),"string"==typeof e&&0<e.length&&s.hash(e),s!==this?s:void 0}var i;n.prototype.hash=function(e){var t,s,n,i,o;switch(o=e.length,this.len+=o,s=this.k1,n=0,this.rem){case 0:s^=n<o?65535&e.charCodeAt(n++):0;case 1:s^=n<o?(65535&e.charCodeAt(n++))<<8:0;case 2:s^=n<o?(65535&e.charCodeAt(n++))<<16:0;case 3:s^=n<o?(255&e.charCodeAt(n))<<24:0,s^=n<o?(65280&e.charCodeAt(
n++))>>8:0}if(this.rem=3&o+this.rem,0<(o-=this.rem)){for(t=this.h1;t=4294967295&5*(t=(t^=s=4294967295&13715*(s=(s=4294967295&11601*s+3432906752*(65535&s))<<15|s>>>17)+461832192*(65535&s))<<13|t>>>19)+3864292196,!(o<=n);)s=65535&e.charCodeAt(n++)^(65535&e.charCodeAt(n++))<<8^(65535&e.charCodeAt(n++))<<16,s^=(255&(i=e.charCodeAt(n++)))<<24^(65280&i)>>8;switch(s=0,this.rem){case 3:s^=(65535&e.charCodeAt(n+2))<<16;case 2:s^=(65535&e.charCodeAt(n+1))<<8;case 1:s^=65535&e.charCodeAt(n)}this.h1=t}return this.k1=s,this},n.prototype.result=function(){var e,t;return e=this.k1,t=this.h1,0<e&&(t^=e=4294967295&13715*(e=(e=4294967295&11601*e+3432906752*(65535&e))<<15|e>>>17)+461832192*(65535&e)),t^=this.len,t=4294967295&51819*(t^=t>>>16)+2246770688*(65535&t),t=4294967295&44597*(t^=t>>>13)+3266445312*(65535&t),(t^=t>>>16)>>>0},n.prototype.reset=function(e){return this.h1="number"==typeof e?e:0,this.rem=this.k1=this.len=0,this},i=new n,"undefined"!=typeof module?module.exports=n:this.MurmurHash3=n}()
;var RecursiveHasher=function(t,s,n){if("object"==typeof t){if(void 0===n&&(n=new MurmurHash3,s=cleverapps.createSet(s)),Array.isArray(t)){n.hash(""+t.length);for(var e=0;e<t.length;e++)RecursiveHasher(t[e],s,n)}else{Object.keys(t).sort().forEach(function(e){!s[e]&&t[e]&&(n.hash(e),RecursiveHasher(t[e],s,n))})}return n.result()}"number"==typeof t?n.hash(""+t):n.hash(t)},Versions={compare:function(e,t){if(!e||!t)return e?1:t?-1:0;for(var s=e.split("."),n=t.split("."),i=0;i<Math.min(s.length,n.length);i++){var o=parseInt(s[i]),a=parseInt(n[i]);if(o!==a)return o-a}return s.length-n.length}};"undefined"!=typeof exports&&(module.exports=Versions),cleverapps.BoostersCounter=function(e){e?this.initialize():this.load(),this.onChangeListener=function(){},this.onChangeListeners={}},cleverapps.BoostersCounter.prototype.initialize=function(){this.data={},this.addInitAmount()},cleverapps.BoostersCounter.prototype.addInitAmount=function(e){var t=["undefined"!=typeof CellBooster?CellBooster.ID:void 0
,"undefined"!=typeof LineBooster?LineBooster.ID:void 0,"undefined"!=typeof ColorBooster?ColorBooster.ID:void 0];"match3"===cleverapps.config.type&&(t=t.concat([BoostersBefore.TYPE_COMBO,BoostersBefore.TYPE_MOVES,BoostersBefore.TYPE_MULTICOLOR])),"solitaire"===cleverapps.config.type&&(t=t.concat([BoostersBefore.TYPE_MAGNET,BoostersBefore.TYPE_DICE,BoostersBefore.TYPE_TWO_JOKERS]));var s=!1;t.forEach(function(e){void 0!==e&&void 0===this.data[e]&&(this.data[e]=cleverapps.BoostersCounter.INIT_AMOUNT,s=!0)},this),s&&!e&&this.save()},cleverapps.BoostersCounter.prototype.totalAmount=function(){var e=0;for(var t in this.data)e+=this.data[t];return e},cleverapps.BoostersCounter.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.BOOSTERS_COUNTER);this.data=e||{},this.addInitAmount()},cleverapps.BoostersCounter.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.BOOSTERS_COUNTER,this.data),
!1!==e&&cleverapps.synchronizer.addUpdateTask("boosters")},cleverapps.BoostersCounter.prototype.getAmount=function(e){return this.data[e]?this.data[e]:0},cleverapps.BoostersCounter.prototype.canUse=function(e){return 0<this.getAmount(e)},cleverapps.BoostersCounter.prototype.use=function(e){this.canUse(e)&&(this.data[e]=this.data[e]-1,this.save(),BoostersBeforeConfig[e]||cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.USE_BOOSTER,{booster:e}),(void 0!==HintBooster&&e===HintBooster.ID||"undefined"!=typeof DiscoverBooster&&e===DiscoverBooster.ID)&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.USE_HINTS),this.runChangeListeners(e))},cleverapps.BoostersCounter.prototype.add=function(e,t){t=t||1,this.setAmount(e,this.getAmount(e)+t)},cleverapps.BoostersCounter.prototype.setAmount=function(e,t){this.getAmount(e)!==t&&(this.data[e]=t,this.save(),this.runChangeListeners(e))},cleverapps.BoostersCounter.prototype.runChangeListeners=function(e){this.onChangeListener(e),
cleverapps.values(this.onChangeListeners).forEach(function(e){e()})},cleverapps.BoostersCounter.INIT_AMOUNT=2;var BoosterAmountView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint(.5,.5),this.setCascadeOpacityEnabled(!0);var t=cleverapps.styles.BoosterAmountView;this.bg=bundles.game.frames.booster_amount_bg_png?new cc.Sprite(bundles.game.frames.booster_amount_bg_png):new cc.Sprite,this.bg.setScale(t.background.scale),this.bg.setAnchorPoint2(),this.addChild(this.bg),this.amount=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.BOOSTER_AMOUNT_TEXT),this.addChild(this.amount),this.booster=e,this.setAmount(e.getAmount())},setAmount:function(e){0<e?(this.visible=!0,this.bg.setVisible(!0),this.amount.setVisible(!0),this.amount.setString(e),this.amount.fitTo(this.bg.width*this.bg.scale*.85)):(this.visible=!1,this.bg.setVisible(!1),this.amount.setVisible(!1)),this.setContentSize2(Math.max(this.bg.width*this.bg.scale,this.amount.width*this.amount.scale),Math.max(
this.bg.height*this.bg.scale,this.amount.height*this.amount.scale)),this.amount.setPositionRound(this.width/2,this.height/2+cleverapps.styles.BoosterAmountView.amount.offsetY),this.bg.setPositionRound(this.width/2,this.height/2)}});cleverapps.styles.BoosterAmountView={background:{scale:1},amount:{offsetY:0}};var Gun=function(){this.onShowUpListener=function(){},this.onShowForceListener=function(){},this.onAnimateListener=function(){},this.onAttackListener=function(){},this.onShowListener=function(){},this.onHideListener=function(){},this.onMouseOverListener=function(){},this.onMouseOutListener=function(){},this.load(),this.state=Gun.STATE_CREATE,this.showTime=void 0};Gun.prototype.onClick=function(){cleverapps.forces.isRunningForce()&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GUN_SHOT_FORCE),cleverapps.forces.closeRunningForce()),-1===[Gun.STATE_BOMBING,Gun.STATE_HIDDEN].indexOf(this.state)&&(!this.showTime||this.showTime<Date.now()-300)&&cleverapps.metha.display({
focus:"GunExecute",control:this.getControls(),action:this.execute.bind(this)})},Gun.prototype.showForce=function(){cleverapps.metha.display({focus:"GunForce",control:this.getControls(),actions:[function(e){setTimeout(e,500)},function(e){this.onShowForceListener(),this.setAmount(1),cleverapps.forces.onceForceClosed=e}.bind(this)]})},Gun.prototype.getControls=function(){return["gun"]},Gun.prototype.showUp=function(){this.isAvailable()&&this.state!==Gun.STATE_SHOW_UP&&(this.onShowUpListener(),this.state=Gun.STATE_SHOW_UP)},Gun.prototype.isForceAvailable=function(){return!(!Game.currentGame||this.state!==Gun.STATE_SHOW_UP)&&(!(Game.currentGame.tutorial&&!Game.currentGame.tutorial.finished)&&(Game.currentGame.outcome===GameBase.OUTCOME_UNKNOWN&&!cleverapps.forces.isShown(Forces.GUN.id)))},Gun.prototype.animate=function(e,t){this.onAnimateListener(e,t)},Gun.prototype.onMouseOver=function(){this.state!==Gun.STATE_HIDDEN&&this.onMouseOverListener()},Gun.prototype.onMouseOut=function(){
this.state!==Gun.STATE_HIDDEN&&this.onMouseOutListener()},Gun.prototype.attack=function(){this.onAttackListener(),this.state=Gun.STATE_BOMBING},Gun.prototype.hide=function(){this.onHideListener()},Gun.prototype.show=function(){this.onShowListener(),this.showTime=Date.now()},Gun.prototype.resetState=function(){this.state=Gun.STATE_CREATE},Gun.prototype.execute=function(e){if(Game.currentGame&&("board"!==cleverapps.config.type||Game.currentGame.board))if(0<this.amount)this.onExecute(e);else{e();var t=this.getProduct(),s=Game.currentGame;t.buy(cleverapps.once(function(){cleverapps.metha.displayWhenFreeFocus({focus:"GunExecute",control:this.getControls(),action:function(e){Game.currentGame===s&&void 0===Game.currentGame.outcome?this.onExecute(e):e()}.bind(this)})}.bind(this)),this.getControls())}else e()},Gun.prototype.onExecute=function(e){console.log("Override me!")},Gun.prototype.setAmount=function(e){e<0&&(e=0),this.amount=e},Gun.prototype.getAmount=function(){
return this.amount?this.amount:0},Gun.prototype.addAmount=function(e){var t=this.getAmount();this.setAmount(t+e),this.save()},Gun.prototype.getProduct=function(){return Product.Create("gunShot")},Gun.prototype.getInfo=function(){return{amount:this.getAmount()}},Gun.prototype.updateInfo=function(e,t){this.amount=e.amount,this.save(t)},Gun.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.GUN,this.getInfo()),e||cleverapps.synchronizer.addUpdateTask("gun")},Gun.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.GUN);this.amount=e&&e.amount?e.amount:0,this.amount<0&&(this.amount=0)},Gun.prototype.reset=function(){this.amount=0,this.save()},Gun.prototype.isAvailable=function(){return!cleverapps.flags.nopayments&&((!cleverapps.config.debugMode||!cleverapps.screenshotsMode)&&cleverapps.user.checkAvailable(Gun.AVAILABLE))},Gun.AVAILABLE={episode:1,level:8,spades:{disabled:!0}},Gun.STATE_SHOW_UP=0,Gun.STATE_BOMBING=1,
Gun.STATE_WIN_ANIMATION=2,Gun.STATE_CREATE=3,Gun.STATE_HIDDEN=4;var GunView=cc.Node.extend({ctor:function(e,t){this._super(),this.gun=e,this.gameScene=t,e.onShowUpListener=this.createListener(this.showUp.bind(this)),e.onShowForceListener=this.createListener(this.showForce.bind(this)),e.onAnimateListener=this.createListener(this.animate.bind(this)),e.onAttackListener=this.createListener(this.attack.bind(this)),e.onHideListener=this.createListener(this.hide.bind(this)),e.onShowListener=this.createListener(this.show.bind(this));var s=cleverapps.styles.GunView,n=s.size[cleverapps.wideMode.mode]||s.size;this.setContentSize(n),this.setPositionRound(s.position),this.basePosition=this.getPosition(),this.setLocalZOrder(19),t.gunView=this,t.scene.addChild(this),s.useSceneDelta&&(this.y-=cleverapps.UI.getSceneOffsetY(),this.basePosition.y-=cleverapps.UI.getSceneOffsetY()),s.flyHintStartPos&&(this.flyHintStart=new cc.Node,this.flyHintStart.setPositionRound(s.flyHintStartPos),this.addChild(
this.flyHintStart)),this.createView(),this.gun.resetState(),this.visible=!1,cleverapps.flags.introDisabled&&"match3"!==cleverapps.config.type&&(this.visible=!0)},createView:function(){var e=cleverapps.styles.GunView,t=e.scale[cleverapps.wideMode.mode];this.animation=new cleverapps.Spine(e.json,t),this.addChild(this.animation),e.animation.wideModePosition?this.animation.setPositionRound(e.animation.wideModePosition[cleverapps.wideMode.mode]):this.animation.setPositionRound(e.animation),cleverapps.flags.introDisabled&&"match3"!==cleverapps.config.type&&this.animation.setAnimation(0,"idle",!0),this.price=new GunPriceView(this.gun,this),this.price.setPositionRound(e.price.position),this.addChild(this.price),cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,this.gun.onClick.bind(this.gun))},showUp:function(){this.amount&&this.amount.showUp(),this.price&&this.price.showUp();var e=cleverapps.styles.GunView.startAnimation;this.animation.setAnimation(0,e,!1),
this.animation.setCompleteListener(function(){this.animation.setCompleteListener(function(){}),this.animation.setAnimation(0,"idle",!0)}.bind(this)),setTimeout(function(){cleverapps.audio.playSound(cleverapps.styles.GunView.showUpSound)},1e3*cleverapps.styles.GunView.showUp.delay),this.setVisible(!0)},attack:function(){cleverapps.audio.playSound(bundles.game.urls.game_start_effect||bundles.game.urls.gun_bombing_effect);var e=cleverapps.styles.GunView;this.amount&&this.amount.hide(),this.price&&this.price.hide();var t=e.actionAnimation;"board"!==cleverapps.config.type||cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL||cleverapps.styles.GunView.disableMobileSpecialAnimation||(t=e.mobileActionAnimation);var s=void 0;cleverapps.styles.GunView.animation.actionPosition&&(s=this.animation.getPosition(),this.animation.setPositionRound(cleverapps.styles.GunView.animation.actionPosition)),this.animation.setAnimation(0,t,!1),this.animation.setCompleteListener(function(){
s&&this.animation.setPositionRound(s),this.animation.setCompleteListener(function(){}),this.animation.setAnimation(0,"idle",!0),"scramble"===cleverapps.config.name&&(this.animation.setPositionRound(this.animation.x,this.animation.positionY-this.height),this.show()),this.amount&&this.amount.showUp(),this.price&&this.price.showUp()}.bind(this))},animate:function(e){console.log("Animating gun for: ",e)},showForce:function(){this.amount&&this.amount.setVisible(!1),this.price&&this.price.setVisible(!1),cleverapps.forces.create(this,Forces.GUN)},hide:function(){this.amount&&this.amount.hide(),this.price&&this.price.hide(),this.setVisible(!1)},show:function(){this.gun.state!==Gun.STATE_BOMBING&&(this.amount&&this.amount.show(),this.price&&this.price.show()),this.visible=!0}});cleverapps.styles.GunView={showUpSound:bundles.game.urls.gun_show_up_effect,json:bundles.game.jsons.gun_animation_json,startAnimation:"start",actionAnimation:"bombing",mobileActionAnimation:"bombing_mobile",position:[{
x:50,y:{align:"top",dy:-140}},{x:60,y:{align:"top",dy:-140}},{x:60,y:{align:"top",dy:-140}}],scale:[1,1,1],animation:{x:{align:"center",dx:-90},y:{align:"center",dy:-90}},amount:{position:[{x:118,y:76},{x:108,y:86},{x:108,y:86}]},price:{position:[{x:20,y:-16},{x:0,y:-16},{x:0,y:-16}]},size:{width:100,height:150},showUp:{delay:1},touchDy:6};var GunAmountView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint(.5,.5),this.setCascadeOpacityEnabled(!0);var t=cleverapps.styles.GunAmountView;t.background&&(t.background.scale9?(this.bg=new cc.Scale9Sprite(bundles.game.frames.booster_amount_bg_png),this.bg.setContentSize2(t.background.scale9)):(this.bg=new cc.Sprite(t.background.image),this.bg.setScale(t.background.scale)),this.addChild(this.bg)),this.amount=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.TEXT),this.addChild(this.amount),this.gun=e,this.updateAmount(),this.baseScale=t.scale||this.getScale(),this.setScale(this.baseScale),this.setVisible(!1)},
updateAmount:function(e){return void 0===e&&(e=this.gun.getAmount()),e&&this.amount.setString(e),e},showUp:function(){this.updateAmount()&&(this.stopAllActions(),this.setScale(0),this.setVisible(!0),this.runAction(new cc.Sequence(new cc.DelayTime(cleverapps.styles.GunAmountView.delay),new cc.ScaleTo(.2,this.baseScale))))},executeAnimation:function(e){this.runAction(new cc.Sequence(new cc.ScaleTo(.25,this.baseScale+.25*this.baseScale),new cc.CallFunc(function(){this.updateAmount(this.gun.getAmount())}.bind(this)),new cc.DelayTime(.25),new cc.ScaleTo(.25,0),new cc.CallFunc(function(){this.setVisible(!1),e()}.bind(this))))},hide:function(){this.isVisible()&&(this.stopAllActions(),this.runAction(new cc.Sequence(new cc.ScaleTo(.2,0),new cc.CallFunc(function(){this.setVisible(!1)}.bind(this)))))},show:function(){!this.isVisible()&&this.updateAmount()&&(this.stopAllActions(),this.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.ScaleTo(.2,this.baseScale),new cc.CallFunc(function(){
this.setVisible(!0)}.bind(this)))))}});cleverapps.styles.GunAmountView={delay:1.5,scale:.6,background:{image:bundles.game.frames.gun_amount_bg_png,scale:2}};var GunHoverAnimation=function(e){var t=cleverapps.styles.GunView.hoverAnimation;this.animation=new cleverapps.Spine(t.json,1),this.animation.setPosition(e.width/2+t.offsetX,e.height/2+t.offsetY),e.addChild(this.animation,-1)};GunHoverAnimation.prototype.on=function(){this.isOn||(this.animation.visible=!0,this.isOn=!0,this.animation.setAnimation(0,"on",!1),this.animation.addAnimation(0,"idle",!0),this.animation.setCompleteListener(function(){}))},GunHoverAnimation.prototype.off=function(){this.isOn&&!this.locked&&(this.isOn=!1,this.animation.setAnimation(0,"off",!1),this.animation.setCompleteListener(function(){this.animation.visible=!1}.bind(this)))},GunHoverAnimation.prototype.lock=function(){this.locked=!0},GunHoverAnimation.prototype.unlock=function(){this.locked=!1},GunHoverAnimation.prototype.forceOff=function(){this.unlock()
,this.off()};var GunPriceView=cc.Node.extend({ctor:function(e,t){this._super(),this.gun=e;var s=cleverapps.styles.GunPriceView;this.baseScale=s.scale||this.getScale(),this.setScale(this.baseScale);var n={font:cleverapps.styles.FONTS.GUN_PRICE_TEXT,iconScale:s.icon.scale,offsetY:s.icon.offsetY};if(s.fitTo?n.fitTo=s.fitTo:n.fitTo={width:.9*t.width},this.price=new ProductPriceView(this.gun.getProduct(),n),this.price.setLocalZOrder(1),this.addChild(this.price),this.setContentSize2(this.price.getContentSize()),s.background&&(this.bg=cleverapps.UI.createSprite({image:bundles.game.frames.gun_price_bg_png||bundles.buttons_main.frames.small_green_button,scale9:s.background.scale9,width:this.price.width+2*s.background.padding.x,height:Math.max(this.price.height+2*s.background.padding.y,s.background.minHeight)}),this.addChild(this.bg)),cleverapps.social instanceof cleverapps.OK&&s.label){var i=cleverapps.UI.generateTTFText(Messages.get("Take"),
cleverapps.styles.FONTS.GUN_PRICE_BUY_TEXT||cleverapps.styles.FONTS.GUN_PRICE_TEXT);cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&s.label.mobileScale&&i.setScale(s.label.mobileScale),this.price.addChild(i);var o=s.label.offset.y;Array.isArray(o)&&(o=o[cleverapps.wideMode.mode]*resolutionScale),i.setPositionRound(this.width/2,this.height/2+o)}this.bg&&(this.setContentSize2(this.bg.getContentSize()),this.bg.setPositionRound(this.width/2,this.height/2)),this.price.setPositionRound(s.position),this.setAnchorPoint2(),this.setCascadeOpacityEnabled(!0),this.setVisible(!1),s.hover&&cleverapps.UI.applyHover(this),"wordheaps"!==cleverapps.config.name&&cleverapps.UI.onClick(this,e.onClick.bind(e))},getProduct:function(){return this.gun.getProduct()},updatePriceString:function(){this.price.setString(this.getProduct())},showUp:function(){if(!this.gun.getAmount()){var e=cleverapps.styles.GunPriceView;this.setScale(0),this.opacity=255,this.setVisible(!0),this.price.setString(
this.getProduct()),this.stopAllActions(),this.runAction(new cc.Sequence(new cc.DelayTime(e.showUp.delay),new cc.ScaleTo(.2,this.baseScale)))}},hide:function(){this.isVisible()&&(this.stopAllActions(),this.inHide=!0,this.runAction(new cc.Sequence(new cc.FadeOut(.3),new cc.CallFunc(function(){this.inHide=!1,this.opacity=255,this.setVisible(!1)}.bind(this)))))},show:function(){this.gun.getAmount()||(this.inHide&&(this.stopAllActions(),this.opacity=255,this.scale=this.baseScale,this.visible=!0),this.isVisible()||(this.stopAllActions(),this.opacity=0,this.scale=this.baseScale,this.visible=!0,this.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.FadeIn(.3)))))}});cleverapps.styles.GunPriceView={showUp:{delay:1.5},scale:.6,background:{padding:{x:32,y:4},minHeight:70,scale9:cleverapps.UI.Scale9Rect.TwoPixelXY},icon:{scale:.8},amount:{scale:1},position:{x:{align:"center"},y:{align:"center"}}};var TournamentPlayerView=cc.Node.extend({ctor:function(e,t){this._super(),this.player=e,
this.competition=t,this.game=Game.currentGame;var s=cleverapps.styles.TournamentPlayerView;this.setContentSize2(s.width,s.height),this.setAnchorPoint2(.5,.5),this.setScale(s.scale[cleverapps.wideMode.mode]),this.baseScale=this.scale,this.colorNode=new cc.Node,this.colorNode.setContentSize2(this.getContentSize()),this.colorNode.setAnchorPoint2(.5,.5),this.colorNode.setCascadeColorEnabled(!0),this.colorNode.setPositionRound(this.width/2,this.height/2),this.addChild(this.colorNode),this.createBackground();var n=this.avatar=new cleverapps.UI.Avatar(e.avatar);n.setCascadeColorEnabled(!1),this.colorNode.addChild(n),n.setScale(s.avatar.scale),n.setLocalZOrder(-1),n.setPositionRound(s.avatar.x,s.avatar.y),this.createName(),this.addAmount(),this.processPlaceAnimation(),this.prevAmount=this.player.amount,this.setCascadeColorEnabled(!0),cleverapps.config.debugMode&&cleverapps.UI.onClick(this,function(){Game.currentGame&&Game.currentGame.discoverDebug(this.player)}.bind(this)),
this.competition.onChangeResultsListeners["player_"+this.player.id]=this.createListener(this.onChangeResults.bind(this)),this.player.id===cleverapps.user.id&&(this.competition.onChangeResultsListeners.processPlaceAnimation=this.createListener(this.processPlaceAnimation.bind(this)))},createName:function(){var e=cleverapps.styles.TournamentPlayerView,t=this.player.name;t||(cleverapps.throwAsync("No player name "+JSON.stringify(this.player)),t="Player_"+this.player.id.substr(-3)),0<t.indexOf(" ")&&(t=t.substring(0,t.indexOf(" ")));var s=cleverapps.UI.createSprite(e.name.bg);this.colorNode.addChild(s),s.setPositionRound(e.name.bg),e.name.bg.playerColor&&this.player.self&&s.setColor(e.name.bg.playerColor),this.name=cleverapps.UI.generateTTFText(t,cleverapps.styles.FONTS.PLAYER_NAME_TEXT),this.name.fitTo(s.width-2*e.name.padding.x),s.addChild(this.name),this.name.setPositionRound(e.name)},addAmount:function(){var e=cleverapps.styles.TournamentPlayerView.amount,t=new cc.Sprite(
this.player.id===cleverapps.user.id?bundles.game.frames.tournament_mark_1_png:bundles.game.frames.tournament_mark_0_png);t.setPosition(t.width/2,t.height/2);var s=this.score=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(t.getContentSize()),s.addChild(t),s.setCascadeColorEnabled(!0);var n=this.amountText=cleverapps.UI.generateTTFText(this.player.amount+"",this.player.id===cleverapps.user.id?cleverapps.styles.FONTS.PLAYER_SCORE:cleverapps.styles.FONTS.BOT_SCORE);s.addChild(n),n.setPositionRound(e.text),this.colorNode.addChild(s),s.setPositionRound(e)},createBackground:function(){var e,t=cleverapps.styles.TournamentPlayerView.background;t&&(!1===t.scale9?((e=new cc.Sprite(t.image)).setScaleX(this.width/e.width),e.setScaleY(this.height/e.height)):(e=cleverapps.UI.createScale9Sprite(t.image,t.scale9)).setContentSize2(this.width,this.height),e.setPosition(this.width/2,this.height/2),this.colorNode.addChild(e),e.setLocalZOrder(-1),this.player.self?e.setColor(
cleverapps.styles.COLORS.PLAYER_BG_COLOR):e.setColor(cleverapps.styles.COLORS.COMPETITOR_BG_COLOR||cleverapps.styles.COLORS.WHITE))},onChangeResults:function(e){e===this.player.id&&(this.score.runAction(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.4,1.4).easing(cc.easeOut(3)),new cc.Sequence(new cc.RotateTo(.15,15),new cc.RotateTo(.15,-15),new cc.RotateTo(.1,0))),new cc.ScaleTo(.15,1))),this.amountText.setString(this.player.amount+""))},processPlaceAnimation:function(e){if(this.player.id===cleverapps.user.id&&!(this.competition.calcPlace()<3||this.competition.getFinishedOpponents().length===this.competition.results.length-1||this.placeAnimationProcessing)){var t=cleverapps.styles.COLORS.PLAYER_ALARM_COLOR,s=cleverapps.styles.COLORS.WHITE;this.placeAnimationProcessing=!0,this.colorNode.runAction(new cc.Sequence(new cc.TintTo(.5,t.r,t.g,t.b),new cc.TintTo(.5,s.r,s.g,s.b),new cc.CallFunc(function(){this.placeAnimationProcessing=!1,this.processPlaceAnimation()}.bind(this)))),
this.framePulsation||(this.framePulsation=new cc.Sprite(bundles.game.frames.avatar_frame_red_png),this.avatar.addChild(this.framePulsation),this.framePulsation.setPositionRound(this.avatar.width/2,this.avatar.height/2),this.framePulsation.setLocalZOrder(-1),this.framePulsation.setColor(cc.color.RED),this.framePulsation.setContentSize2(this.avatar.width,this.avatar.height)),this.framePulsation.runAction(new cc.Sequence(new cc.ScaleTo(.5,1.2),new cc.ScaleTo(.5,1)))}},animateReorder:function(e){if(!(Math.abs(this.y-e.y)<1&&this.player.amount===this.prevAmount)||this.reorderAnimationRunning){var t=e.y>this.y||this.player.amount>this.prevAmount;this.prevAmount=this.player.amount,this.reorderAnimationRunning=!0,this.stopAllActions(),this.runAction(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.2,this.baseScale*(t?1.2:.9)),new cc.MoveTo(.35,e).easing(cc.easeIn(1)),new cc.Sequence(new cc.CallFunc(function(){this.rotation=0}.bind(this)),new cc.DelayTime(.08),new cc.RotateBy(.108,e.y>this.y?20:0
).easing(cc.easeInOut(.5)),new cc.RotateBy(.135,e.y>this.y?-30:0),new cc.RotateBy(.027,e.y>this.y?10:0)),new cc.Sequence(new cc.DelayTime(.3),new cc.ScaleTo(.2,this.baseScale))),new cc.CallFunc(function(){this.reorderAnimationRunning=!1}.bind(this))))}},animateResult:function(e){var t=cleverapps.styles.TournamentPlayerView;cleverapps.UI.animateDelta(e,{parent:this,font:cleverapps.styles.FONTS.PLAYER_VIEW_DELTA_TEXT,x:this.width/2+t.delta.x,y:this.height/2+t.delta.y})}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{PLAYER_SCORE:{size:25,color:cleverapps.styles.COLORS.BLACK},BOT_SCORE:{size:25,color:cleverapps.styles.COLORS.BLACK},PLAYER_VIEW_DELTA_TEXT:{size:25,color:cleverapps.styles.COLORS.BLACK}}),cleverapps.styles.TournamentPlayerView={background:{image:bundles.game.frames.tournament_bg_png,scale9:cleverapps.UI.Scale9Rect.TwoPixelXY},width:145,height:140,scale:[1,1,1],avatar:{x:{align:"center"},y:{align:"center",dy:10},scale:1},amount:{x:{align:"right"},y:{align:"bottom"},
text:{x:{align:"center"},y:{align:"center"}}},name:{x:{align:"center"},y:{align:"center"},padding:{x:17},bg:{image:bundles.menubar.frames.menubar_bg_png,width:100,height:40,x:{align:"center"},y:{align:"bottom"}}},delta:{x:55,y:0}};var TournamentPlayersView=cc.Node.extend({ctor:function(t){this._super(),this.competition=t,this.players=t.results,this.competition.calcPlace(),this.views=this.players.map(function(e){return new TournamentPlayerView(e,t)}.bind(this));var e=cleverapps.styles.TournamentPlayersView,s=new cleverapps.Layout(this.views,{direction:cleverapps.UI.VERTICAL,margin:e.margin});this.setContentSize2(s.width,s.height),this.addChild(s),s.setPositionRound(this.width/2+e.content.offset.x,this.height/2+e.content.offset.y),this.setPositionRound(e.x,e.y[cleverapps.wideMode.mode],cleverapps.UI.getSceneSize()),this.positions={},this.views.forEach(function(e,t){this.positions[t]=e.getPosition()}.bind(this)),this.createBg(),this.setLocalZOrder(1),
t.onChangeResultsListeners.tournamentPlayers=cleverapps.whenShow(this.createListener(cleverapps.timeredThrottle(10,this.onChangeResults.bind(this)))),this.onChangeResults(),Game.currentGame.afterOnChangeOutcomeListeners.tournamentPlayerViews=this.createListener(this.afterOnChangeOutcome.bind(this)),this.setVisible(!1),cleverapps.UI.makeHideable(this,cleverapps.UI.HORIZONTAL),cleverapps.metha.registerControl("tournamentPlayersView",this)},afterOnChangeOutcome:function(){var e=-cleverapps.UI.getSceneSize().width/2*.025;this.runAction(new cc.MoveBy(1,e,0).easing(cc.easeInOut(1.5)))},createBg:function(){var e=cleverapps.styles.TournamentPlayersView.bg;if(e){var t=new cc.Scale9Sprite(e.image);this.addChild(t),t.setLocalZOrder(-1);var s=1.3*(this.width+e.padding.x),n=this.height+2*e.padding.y;e.rotate90?(t.setContentSize2(n,s),t.setRotation(90)):t.setContentSize2(s,n),t.setPositionRound(this.width+e.padding.x-s/2,this.height/2)}},onChangeResults:function(e){this.competition.calcPlace(),
this.views.sort(function(e,t){var s=this.competition.results.indexOf(e.player);return this.competition.results.indexOf(t.player)-s}.bind(this)),this.views.forEach(function(e,t){e.setLocalZOrder(t+1),e.animateReorder(this.positions[t])}.bind(this))},animateResults:function(t){this.views.forEach(function(e){e.player.player&&e.animateResult(t)})}});cleverapps.styles.TournamentPlayersView={align:"left",x:130,y:[620,620,620],margin:10,bg:{image:bundles.game.frames.tournament_bg_png,padding:{x:15,y:20}},content:{offset:{x:0,y:0}}};var ExpInfoWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.ExpInfoWindow,t=this.generateContent();this._super({title:"messages:ExpInfoWindow.Title",name:"expinfowindow",content:t}),t.y-=e.topBottom,Lottery.addText(this)},generateProductOption:function(e,t){var s=cleverapps.styles.ExpInfoWindow,n=Product.Create(e),i=cleverapps.UI.generateTTFText(n.reward.exp,cleverapps.styles.FONTS.BUTTON_TEXT),o=new cc.Sprite(
bundles.reward_icons.frames.reward_exp_png);o.setScale(s.button.amountIcon.scale);var a=new cleverapps.Layout([i,o],{direction:cleverapps.UI.HORIZONTAL,margin:s.button.amountMargin}),r=new cleverapps.UI.Button({content:a,onClicked:function(){n.buy(function(){this.close()}.bind(this))}.bind(this),width:s.button.width,height:s.button.height});Lottery.addIcon(r);var l=new ProductPriceView(n,{font:cleverapps.styles.FONTS.ADDMOVES_PRICE}),c=new cc.Sprite(t);return new cleverapps.Layout([r,l,c],{direction:cleverapps.UI.VERTICAL,margin:s.button.itemsMargin})},generateContent:function(){var e=cleverapps.styles.ExpInfoWindow,t=cleverapps.UI.generateTTFText("messages:ExpInfoWindow.Message",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);t.setDimensions(e.width,0),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var s=cleverapps.UI.generateTTFText("messages:ExpInfoWindow.BuyMessage",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);s.setDimensions(e.width,0),s.setHorizontalAlignment(
cc.TEXT_ALIGNMENT_CENTER);var n=new cleverapps.Layout([this.generateProductOption("buyExp10",bundles.exp_window.frames.small_exp_box),this.generateProductOption("buyExp150",bundles.exp_window.frames.exp_box)],{direction:cleverapps.UI.HORIZONTAL,margin:e.buttonsMargin,align:cleverapps.UI.ALIGN_START});return new cleverapps.Layout([n,s,t],{direction:cleverapps.UI.VERTICAL,margin:e.margin})},listBundles:function(){return["exp_window"]}});cleverapps.styles.ExpInfoWindow={width:600,margin:30,buttonsMargin:50,topBottom:70,exp:{width:400,height:200},button:{amountMargin:10,itemsMargin:3,width:300,height:100,amountIcon:{scale:.7}}};var Chat=function(){this.messages=[],cleverapps.EventEmitter.call(this),this.editingMode=!1,this.closing=!1,this.hasUnread=!1,this.loadSave(),setInterval(this.reload.bind(this),cleverapps.parseInterval(Chat.RELOAD_INTERVAL))};Chat.prototype=Object.create(cleverapps.EventEmitter.prototype),(Chat.prototype.constructor=Chat).IsAvailable=function(){if(
cleverapps.config.wysiwygMode)return!1;if(cleverapps.chat.hasUnread)return!0;if(-1!==["mbga","sp_mbga"].indexOf(cleverapps.User.calcSource()))return!1;if(0<cleverapps.paymentsHistory.classify())return!0;var e={};if("merge"===cleverapps.config.type){var t=cleverapps.isInstant()?6:9;if(Game.currentGame&&Game.currentGame.gameLevel.getLevel()<t)return!1}else e.episode=1,e.level=0;return e.registered="3 days",levels.user.checkAvailable(e)},Chat.prototype.loadSave=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.CHAT)||{};this.processed=e.processed||{}},Chat.prototype.storeSave=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.CHAT,{processed:this.processed})},Chat.prototype.load=function(t,e){cleverapps.RestClient.get("/chat/messages/"+cleverapps.user.id,{},function(e){this.processMessages(e),t&&t()}.bind(this),e||this.printConnectionError.bind(this))},Chat.prototype.processMessages=function(e){var t=e.map(ChatMessage.fromData);this.messages=[]
;var s=void 0,n=void 0;this.hasUnread=!1,t.forEach(function(e){var t=new Date(e.postDate).toLocaleDateString(cleverapps.settings.language,{year:"numeric",month:"long",day:"numeric"});t!==s&&(s=t,this.messages.push(ChatMessage.createServiceMessage(t))),(1===e.isResponse&&0===e.readByUser||e.hasGift()&&!e.isGiftTaken()&&e.isApplicable())&&(this.hasUnread=!0),e.hasGift()&&this.processed[e.id]&&(e.isGiftTaken()?(delete this.processed[e.id],this.storeSave()):cleverapps.RestClient.post("/chat/acceptGift",{id:e.id})),e.isTurningOnConsoleStream()?(n=!0,this.messages.push(ChatMessage.createServiceMessage("messages:ChatConsoleStreamSwitchOn",e.id))):e.isTurningOffConsoleStream()?(n=!1,this.messages.push(ChatMessage.createServiceMessage("messages:ChatConsoleStreamSwitchOff",e.id))):this.messages.push(e)}.bind(this)),void 0!==n&&n?cleverapps.consoleStream.enable(this.postMessage.bind(this,"Disable console stream","stream_off",!0)):void 0===n||n||cleverapps.consoleStream.disable(),
0===this.messages.length&&this.messages.push(ChatMessage.createServiceMessage("messages:ChatGreetingMessage")),this.closing||(this.trigger("removeTemporaryMessages"),this.trigger("messagesUpdated"))},Chat.prototype.postMessage=function(t,e,s){var n=ChatMessage.createTemporaryMessage(t);this.messages.push(n),s||this.trigger("messagesUpdated");var i=cleverapps.friends.getPlayer().name;i===Messages.get("Friends.You")&&(i=Messages.get("LeadersWindow.player"));var o=cleverapps.paymentsHistory.classify();0===o&&cleverapps.paymentsHistory.isPayer()&&(o=1),cleverapps.RestClient.post("/chat/message",{message:t,userid:cleverapps.user.id,isresponse:0,payerlevel:o,name:i,language:cleverapps.settings.language,source:cleverapps.user.source,tag:e},function(){this.load()}.bind(this),function(){var e=this.messages.indexOf(n);-1!==e&&this.messages.splice(e,1),s||(this.trigger("removeTemporaryMessages"),this.trigger("returnMessageBack",t),this.printConnectionError())}.bind(this))},
Chat.prototype.markAsRead=function(){cleverapps.RestClient.post("/chat/markAsRead",{userid:cleverapps.user.id},this.reload.bind(this))},Chat.prototype.acceptGift=function(e,t){if(this.processed[e.id])this.reload();else{var s=!1;if(t){if(e.progress)levels.user.level=parseInt(e.progress.level),levels.user.episode=parseInt(e.progress.episode),levels.user.save(),levels.episodes.reset(),levels.episodes.setCurrentEpisode(levels.user.episode);else if(e.presents)s=!0,cleverapps.chatPresents={reward:e.presents,callback:function(){cleverapps.chat.processed[e.id]=!0,cleverapps.chat.storeSave(),cleverapps.RestClient.post("/chat/acceptGift",{id:e.id})}},this.closing=!0,cc.director.getRunningScene().closeAction();else if(e.metha)if(e.metha.simple)cleverapps.simple.current=e.metha.simple.current,cleverapps.simple.stars=0,cleverapps.simple.save();else if(e.metha.farm){Farm.Reset();var n=Farm.GetBuildingProgress(e.metha.farm.building,e.metha.farm.quest);cleverapps.farm.load(n),cleverapps.farm.save()
}else e.metha.home&&(cleverapps.home.load(Home.GetFurnitureProgress(e.metha.home.furniture,e.metha.home.stage)),cleverapps.home.save());cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect)}s||(this.processed[e.id]=!0,this.storeSave(),cleverapps.RestClient.post("/chat/acceptGift",{id:e.id},this.reload.bind(this)))}},Chat.prototype.printConnectionError=function(){this.messages.push(ChatMessage.createServiceMessage(Messages.get("RestartWindow.AnErrorOccured"),"error_"+(new Date).toLocaleTimeString())),this.trigger("messagesUpdated")},Chat.prototype.reload=function(){Chat.IsAvailable()&&(cleverapps.environment.isChatScene()||cleverapps.environment.isMainScene())&&this.load()},Chat.RELOAD_INTERVAL="1 minute";var ChatMessage=function(){};ChatMessage.fromData=function(e){var t=new ChatMessage;return t.id=e.id,t.userId=e.userId,t.postDate=e.postDate,t.message=e.message,t.isResponse=e.isResponse,t.readByUser=e.readByUser,t.tag=e.tag,t.type=ChatMessage.MESSAGE_TYPE.CHAT,t},
ChatMessage.createServiceMessage=function(e,t){var s=new ChatMessage;return s.id=t||"service_"+e,s.message=e,s.type=ChatMessage.MESSAGE_TYPE.SERVICE,s},ChatMessage.createTemporaryMessage=function(e){var t=new ChatMessage;return t.id="tmp_"+e,t.message=e,t.type=ChatMessage.MESSAGE_TYPE.TEMPORARY,t.postDate=(new Date).toString(),t},ChatMessage.prototype.hasGift=function(){return"gift"===this.tag||"takengift"===this.tag},ChatMessage.prototype.isGiftTaken=function(){return"takengift"===this.tag},ChatMessage.prototype.isTurningOnConsoleStream=function(){return"stream_on"===this.tag},ChatMessage.prototype.isTurningOffConsoleStream=function(){return"stream_off"===this.tag},ChatMessage.prototype.isApplicable=function(){if(this.parseGift(),this.metha)if(this.metha.farm){var e=parseInt(this.metha.farm.building),t=cleverapps.farm.buildings[e],s=parseInt(this.metha.farm.quest);if(!t||s>=t.quests.length)return!1}else if(this.metha.simple)return parseInt(this.metha.simple.current
)<cleverapps.simple.bgsAmount;return!0},ChatMessage.prototype.parseGift=function(){if(!this.parsed){this.parsed=!0;var e=JSON.parse(this.message);if(e.presents){var n=this.presents={};e.presents.forEach(function(e){if("object"==typeof e&&e.hasOwnProperty("type")&&e.hasOwnProperty("amount")){var t=e.type;if(-1!==["gold","unlimitedLives","stars","exp","gun","wardrobe","lives","coins","wands","worker","unit","growthFund"].indexOf(t)||0===t.indexOf("booster")||0===t.indexOf("hl")){var s=e.amount;0===t.indexOf("booster")?(void 0===n.boosters&&(n.boosters=[]),n.boosters[parseInt(t.replace("booster",""))]=s):"unlimitedLives"===t?n.unlimitedLives={interval:s+" hour",amount:s,title:"messages:AMOUNT_HOURS"}:"worker"===t?n.worker={interval:s+" hour",amount:s,title:"messages:AMOUNT_HOURS"}:-1!==t.indexOf("hl")?(n.herolevels||(n.herolevels=[]),n.herolevels.push([t.replace("hl",""),e.amount])):"unit"===t?n.unit={code:e.code,stage:e.stage,amount:s||1}:n[t]=s}}})
}else e.progress?this.progress=e.progress:e.metha&&(this.metha=e.metha)}},ChatMessage.MESSAGE_TYPE={CHAT:0,SERVICE:1,TEMPORARY:2};var ChatHeader=cc.Scale9Sprite.extend({ctor:function(e){this._super(bundles.chat.frames.panelup),this.setAnchorPoint2(0,1);var t=cleverapps.styles.ChatHeader,s=cleverapps.UI.generateOnlyText(Messages.get("messages:ChatTitle"),cleverapps.styles.FONTS.CHAT_HEADER_TEXT);e.closing=!1;var n=this.backButton=new cleverapps.UI.Button({noBg:!0,content:new cc.Sprite(bundles.chat.frames.icon_back),onClicked:function(){e.closing=!0,setTimeout(function(){cc.director.getRunningScene().closeAction()}.bind(this),cc.sys.isMobile&&e.editingMode?500:100)}.bind(this),width:t.back.width,height:t.back.height,useInteractiveScale:!0});n.setPosition(0,t.back.offsetY),this.content=new cleverapps.Layout([n,s],{direction:cleverapps.UI.HORIZONTAL,margin:t.back.margin}),this.addChild(this.content),cleverapps.eventBus.on("changeSceneSize",this.onChangeSize.bind(this),this),
this.onChangeSize()},onChangeSize:function(){var e=cleverapps.styles.ChatHeader;this.setContentSize2(cc.director.getWinSize().width,e.height),this.setPosition(0,cc.director.getWinSize().height),this.content.setPositionRound(this.width/2+e.content.offsetX,this.height/2),cleverapps.UI.fitToBox(this.content,{width:.8*cc.director.getWinSize().width,height:e.height}),this.backButton.setScale(1/this.content.scale)}});cleverapps.styles.ChatHeader={height:130,content:{offsetX:-50},back:{width:120,height:120,margin:25,offsetY:5}},cleverapps.overrideFonts(cleverapps.styles.FONTS,{CHAT_HEADER_TEXT:{size:50,color:cleverapps.styles.COLORS.BLACK}});var ChatInput=cc.Scale9Sprite.extend({ctor:function(e){this._super(bundles.chat.frames.paneldown);var t=cleverapps.styles.ChatInput;this.chat=e,this.isVertical="horizontal"!==cleverapps.config.orientation,this.inputHeight=this.isVertical?t.verticalHeight:t.height,this.setAnchorPoint2(0,0);var s=this.sendButton=new cleverapps.UI.Button({noBg:!0,
content:new cc.Sprite(bundles.chat.frames.panel_on),contentOff:new cc.Sprite(bundles.chat.frames.panel_off),onClicked:this.send.bind(this),width:t.sendButton.width,height:this.inputHeight,fitTo:!1,useInteractiveScale:!0});s.disable(),this.addChild(s),this.charsCountText=cleverapps.UI.generateOnlyText("0/500",cleverapps.styles.FONTS.CHAT_CHARS_COUNT_TEXT),this.charsCountText.setVisible(!1),this.charsCountText.setDimensions(t.charsCount.width,0),this.charsCountText.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.addChild(this.charsCountText);var n=this.textAreaBg=cleverapps.UI.createScale9Sprite(bundles.chat.frames.textbox);this.addChild(n);var i=this.text=new cc.EditBox(cc.size(n.width-t.textPadding.x,n.height-t.textPadding.y));i.setDelegate(this),i.stayOnTop(!0),i.setTouchEnabled(),i.setMaxLength(500),i.setFontColor(cleverapps.styles.FONTS.CHAT_INPUT_FIELD_TEXT.color),this.textAreaBg.addChild(this.text),this.onChangeSize(),cleverapps.eventBus.on("changeSceneSize",
this.onChangeSize.bind(this),this),this.chat.on("returnMessageBack",this.returnMessageBack.bind(this))},onChangeSize:function(){var e=cleverapps.styles.ChatInput;this.setContentSize2(cc.director.getWinSize().width,this.inputHeight+e.padding),this.setPosition(0,0),this.textAreaBg.setContentSize(this.width-(this.isVertical?e.textArea.vertical.rightMargin:e.textArea.rightMargin),this.inputHeight),this.textAreaBg.setPositionRound(this.isVertical?e.textArea.vertical:e.textArea),this.sendButton.setContentSize(e.sendButton.width,this.inputHeight),this.sendButton.setPositionRound(this.isVertical?e.sendButton.vertical:e.sendButton),this.text.setContentSize(this.textAreaBg.width-e.textPadding.x,this.textAreaBg.height-e.textPadding.y),this.text.setPositionRound(this.textAreaBg.width/2,this.textAreaBg.height/2),this.charsCountText.setPositionRound(this.isVertical?e.charsCount.vertical:e.charsCount)},send:function(){var e=this.getMessageText();0<e.length&&(this.text.setString(""),
this.sendButton.disable(),this.charsCountText.setVisible(!1),this.chat.postMessage(e))},returnMessageBack:function(e){this.text.setString(e),this.editBoxTextChanged(this.text,e)},editBoxTextChanged:function(e,t){0<this.getMessageText(t).length?this.sendButton.enable():this.sendButton.disable(),this.text.setFont("Rubik",cleverapps.styles.FONTS.CHAT_INPUT_FIELD_TEXT.size),400<=this.text.getString().length?(this.charsCountText.setVisible(!0),this.charsCountText.setString(this.text.getString().length+"/500"),this.charsCountText.setFont(450<=this.text.getString().length?cleverapps.styles.FONTS.CHAT_CHARS_COUNT_RED_TEXT:cleverapps.styles.FONTS.CHAT_CHARS_COUNT_TEXT)):this.charsCountText.setVisible(!1)},editBoxReturn:function(){setTimeout(this.send.bind(this),0)},getMessageText:function(e){return(e=e||this.text.getString()).trim().replace(/(?:\r\n|\r|\n)/g,"").replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"�")},
editBoxEditingDidBegin:function(){this.chat.editingMode=!0},editBoxEditingDidEnd:function(){this.chat.editingMode=!1}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{CHAT_INPUT_FIELD_TEXT:{size:40,color:cleverapps.styles.COLORS.BLACK,font:bundles.chat.urls.strict_font_ttf},CHAT_CHARS_COUNT_TEXT:{size:22,color:cleverapps.styles.COLORS.COLOR_VERY_DARK_GRAY,font:bundles.chat.urls.strict_font_ttf},CHAT_CHARS_COUNT_RED_TEXT:{size:22,color:new cc.Color(243,60,60,255),font:bundles.chat.urls.strict_font_ttf}}),cleverapps.styles.ChatInput={height:150,verticalHeight:200,padding:22,sendButton:{x:{align:"right",dx:-35},y:{align:"center"},vertical:{x:{align:"right"},y:{align:"center"}},width:110},charsCount:{x:{align:"right",dx:-40},y:{align:"bottom",dy:10},vertical:{x:{align:"right",dx:-6},y:{align:"bottom",dy:25}},width:100},textArea:{rightMargin:230,x:{align:"left",dx:50},y:{align:"center",dy:-6},vertical:{rightMargin:130,x:{align:"left",dx:20},y:{align:"center",dy:-6}}},textPadding:{x:40,
y:12}};var ChatMessageView=cc.Node.extend({ctor:function(e){this._super(),this.chatMessage=e,this.setAnchorPoint2(0,.5);var t=new Date(e.postDate).toLocaleTimeString(cleverapps.settings.language,{hour12:!1,hour:"2-digit",minute:"2-digit"}),s=this.messageTimeText=cleverapps.UI.generateOnlyText(t,cleverapps.styles.FONTS.CHAT_MESSAGE_TIME_TEXT);s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_RIGHT);var n=this.bg=cleverapps.UI.createScale9Sprite(this.chatMessage.isResponse?bundles.chat.frames.dialog_box_white:bundles.chat.frames.dialog_box_green);this.addChild(n,-1),this.content=this.createContent(this.chatMessage),n.addChild(this.content),n.addChild(s),this.chatMessage.isResponse||(this.chatMessage.readByUser?this.mark=new cc.Sprite(bundles.chat.frames.checkmark_read):this.chatMessage.type===ChatMessage.MESSAGE_TYPE.TEMPORARY?this.mark=new cc.Sprite(bundles.chat.frames.checkmark_tmp):this.mark=new cc.Sprite(bundles.chat.frames.checkmark_sent),n.addChild(this.mark)),this.onChangeSize()},
createContent:function(e){return e.hasGift()?new GiftContentView(e):(this.messageText=cleverapps.UI.generateOnlyText(e.message,cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT),this.messageText.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),this.messageText)},updateContent:function(e){this.content&&this.content.removeFromParent(),this.content=this.createContent(e),this.bg.addChild(this.content),this.onChangeSize()},onChangeSize:function(){var e=cleverapps.styles.ChatMessageView,t=.7*cc.director.getWinSize().width;t>e.maxWidth?t=e.maxWidth:t<e.minWidth&&(t=e.minWidth),this.messageText?(this.messageText.setDimensions(t,0),this.setContentSize2(cc.director.getWinSize().width,this.messageText._getHeight()+2*e.text.padding)):this.setContentSize2(cc.director.getWinSize().width,this.content.height+2*e.text.padding),this.bg.setContentSize(t+2*e.text.padding,this.height),this.chatMessage.isResponse?(this.bg.setAnchorPoint2(0,.5),this.bg.setPosition(
"horizontal"!==cleverapps.config.orientation?e.responseBg.verticalOffsetX:e.responseBg.offsetX,this.height/2)):this.bg.setPositionRound(e.questionBg),this.content.setPositionRound(this.bg.width/2+(this.chatMessage.isResponse?e.text.responceOffsetX:0),this.bg.height/2+e.text.offsetY),this.messageTimeText.setDimensions(e.time.width,e.time.height),this.messageTimeText.setPositionRound(this.chatMessage.isResponse?e.time.response:e.time.question),this.mark&&this.mark.setPositionRound(e.mark)}});cleverapps.styles.ChatMessageView={minWidth:500,maxWidth:900,text:{padding:30,responceOffsetX:5,offsetY:2},time:{width:200,height:24,response:{x:{align:"right",dx:-34},y:{align:"bottom",dy:14}},question:{x:{align:"right",dx:-56},y:{align:"bottom",dy:14}}},mark:{x:{align:"right",dx:-22},y:{align:"bottom",dy:18}},responseBg:{offsetX:32,verticalOffsetX:4},questionBg:{x:{align:"right",dx:-30},y:{align:"center"}}},cleverapps.overrideFonts(cleverapps.styles.FONTS,{CHAT_MESSAGE_TEXT:{size:40,
color:cleverapps.styles.COLORS.BLACK,font:bundles.chat.urls.strict_font_ttf},CHAT_MESSAGE_TIME_TEXT:{size:26,color:new cc.Color(138,138,138,255),font:bundles.chat.urls.strict_font_ttf}});var ServiceMessageView=cc.Node.extend({ctor:function(e){this._super(),this.chatMessage=e,this.setAnchorPoint2(0,.5),this.messageText=cleverapps.UI.generateOnlyText(e.message,cleverapps.styles.FONTS.SERVICE_MESSAGE_TEXT),this.messageText.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.addChild(this.messageText),this.onChangeSize()},onChangeSize:function(){this.messageText.setDimensions(cc.director.getWinSize().width-cleverapps.styles.ServiceMessageView.padding,0),this.setContentSize2(cc.director.getWinSize().width,this.messageText._getHeight()+cleverapps.styles.ServiceMessageView.padding),this.messageText.setPositionRound(this.width/2,this.height/2)}});cleverapps.styles.ServiceMessageView={padding:50},cleverapps.overrideFonts(cleverapps.styles.FONTS,{SERVICE_MESSAGE_TEXT:{size:30,
color:new cc.Color(83,97,106,255),font:bundles.chat.urls.strict_font_ttf}});var GiftContentView=cleverapps.Layout.extend({ctor:function(e){this.chatMessage=e;var t=cleverapps.styles.GiftContentView;this.chatMessage.parseGift();var s=Math.min(.6*cc.director.getWinSize().width,t.width),n=[],i=cleverapps.UI.createScale9Sprite(bundles.chat.frames.gift_bg),o=new cc.Sprite(bundles.chat.frames.checkmark_gift),a=this.chatMessage.isGiftTaken()?o.height:0;if(this.chatMessage.progress||this.chatMessage.metha){if(this.chatMessage.metha){if(this.chatMessage.metha.simple){var r=parseInt(this.chatMessage.metha.simple.current);_=r<cleverapps.simple.bgsAmount?cleverapps.UI.generateOnlyText("messages:AdminSetMethaProgress.Text",cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT,{bgIndex:r}):cleverapps.UI.generateOnlyText("messages:AdminSetMethaProgress.Text.Unavailable",cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT)}else if(this.chatMessage.metha.farm){var l=parseInt(this.chatMessage.metha.farm.building),
c=cleverapps.farm.buildings[l],p=parseInt(this.chatMessage.metha.farm.quest);if(c&&p<c.quests.length){var d=Messages.get("building."+cleverapps.farm.buildings[l].name),u=Messages.get(0<p?"messages:AdminSetFarmProgress.Text.Quest":"messages:AdminSetFarmProgress.Text",{buildingName:d,questName:Messages.get(c.quests[p].title)});_=cleverapps.UI.generateOnlyText(u,cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT)}else _=cleverapps.UI.generateOnlyText("messages:AdminSetFarmProgress.Text.Unavailable",cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT)}else if(this.chatMessage.metha.home){var h=parseInt(this.chatMessage.metha.home.furniture),g=cleverapps.home.furniture[h],v=parseInt(this.chatMessage.metha.home.stage);if(g&&v<g.stages.length){var m=Messages.get("building."+g.name);u=Messages.get(0<v?"messages:AdminSetHomeProgress.Text.Stage":"messages:AdminSetHomeProgress.Text",{furnitureName:m,stageName:Messages.get(g.stages[v].title)});_=cleverapps.UI.generateOnlyText(u,
cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT)}else _=cleverapps.UI.generateOnlyText("messages:AdminSetHomeProgress.Text.Unavailable",cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT)}}else{var f=cleverapps.humanReadableNumber(parseInt(this.chatMessage.progress.episode),parseInt(this.chatMessage.progress.level));_=cleverapps.UI.generateOnlyText("messages:AdminSetProgress.Text",cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT,{levelNo:f})}_.setDimensions(s,0),_.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setContentSize(s+t.bg.padding,Math.max(t.minHeight,_.height+t.bg.padding+a)),i.addChild(_),_.setPositionRound(i.width/2,i.height/2+a/2),n.push(i)}else if(this.chatMessage.presents){var _,y=this.chatMessage.presents.herolevels&&0<this.chatMessage.presents.herolevels.length,b=this.chatMessage.presents.unit&&this.chatMessage.presents.unit.code;(_=cleverapps.UI.generateOnlyText(y?"messages:AdminGiftsHeroes":"messages:AdminGiftsText",cleverapps.styles.FONTS.CHAT_MESSAGE_TEXT)).setDimensions(s,0),
_.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.push(_);var w=new RewardsListComponent(this.chatMessage.presents,{amountInRow:y?3:2,noImage:b,font:cleverapps.styles.FONTS.CHAT_REWARD_COUNT_TEXT,onlyText:!0,reward:{direction:cleverapps.UI.HORIZONTAL}}),T=Math.min(.9*s/w.width,1);w.setScale(T),i.setContentSize(s+t.bg.padding,Math.max(t.minHeight,w.height*T+a+t.bg.padding)),i.addChild(w),w.setPositionRound(i.width/2,i.height/2+a/2),n.push(i)}if(this.chatMessage.isGiftTaken())o.setPositionRound(t.checkmark),i.addChild(o);else if(this.chatMessage.isApplicable()){var S=new cleverapps.UI.Button({text:Messages.get("No"),button_png:bundles.chat.frames.no_button,button_on_png:bundles.chat.frames.no_button_on,onClicked:function(){cleverapps.chat.acceptGift(this.chatMessage,!1)}.bind(this),font:cleverapps.styles.FONTS.CHAT_MESSAGE_BUTTON_TEXT,width:t.buttons.width,height:t.buttons.height});S.visible=void 0!==this.chatMessage.progress||void 0!==this.chatMessage.metha
;var E=new cleverapps.UI.Button({text:void 0!==this.chatMessage.progress?Messages.get("Yes"):Messages.get("Accept"),button_png:bundles.chat.frames.accept_button,button_on_png:bundles.chat.frames.accept_button_on,onClicked:function(){cleverapps.chat.acceptGift(this.chatMessage,!0)}.bind(this),font:cleverapps.styles.FONTS.CHAT_MESSAGE_BUTTON_TEXT,width:t.buttons.width,height:t.buttons.height});n.push(new cleverapps.Layout([S,E],{direction:cleverapps.UI.HORIZONTAL,margin:t.margin}))}this._super(n.reverse(),{direction:cleverapps.UI.VERTICAL,margin:t.margin,padding:t.padding})}});cleverapps.styles.GiftContentView={width:840,minHeight:220,margin:10,padding:{x:10,y:10},buttons:{width:200,height:60},checkmark:{x:{align:"right",dx:-6},y:{align:"bottom",dy:10}},bg:{padding:20}},cleverapps.overrideFonts(cleverapps.styles.FONTS,{CHAT_MESSAGE_BUTTON_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,font:bundles.chat.urls.strict_font_ttf},CHAT_REWARD_COUNT_TEXT:{size:60,
color:cleverapps.styles.COLORS.BLACK,font:bundles.chat.urls.strict_font_ttf}});var ChatView=cc.Node.extend({ctor:function(e){this.chat=e,this.messageViews={},this._super(),this.setAnchorPoint2();var t=this.container=new cc.Node;t.setAnchorPoint2(),this.scroll=new cleverapps.UI.ScrollView(t,{childrenVisibility:cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_FULLCHECK}),this.scroll.setAnchorPoint2(0,0),this.scroll.setPositionRound(0,0),this.addChild(this.scroll),this.onChangeSize(),cleverapps.eventBus.on("changeSceneSize",this.onChangeSize.bind(this),this),this.chat.on("messagesUpdated",this.updateMessages.bind(this)),this.chat.on("removeTemporaryMessages",this.removeTemporaryMessages.bind(this))},updateMessages:function(){this.chat.messages.forEach(function(e){if(this.messageViews[e.id])e.tag!==this.messageViews[e.id].chatMessage.tag&&this.messageViews[e.id].updateContent(e);else{var t=e.type===ChatMessage.MESSAGE_TYPE.SERVICE?new ServiceMessageView(e):new ChatMessageView(e)
;this.container.addChild(t),this.messageViews[e.id]=t}}.bind(this));var e=cleverapps.UI.arrangeWithMargins(this.container.getChildren(),{margin:cleverapps.styles.ChatView.margin,direction:cleverapps.UI.TOP_TO_BOTTOM});e<this.scroll.height&&(e=this.scroll.height),this.container.setContentSize2(cc.director.getWinSize().width,e),this.scroll.updateInnerContent(),this.scroll.scrollToPercent(0)},removeTemporaryMessages:function(){Object.keys(this.messageViews).forEach(function(e){this.messageViews[e]&&this.messageViews[e].chatMessage&&this.messageViews[e].chatMessage.type===ChatMessage.MESSAGE_TYPE.TEMPORARY&&(this.messageViews[e].removeFromParent(),this.messageViews[e]=void 0)}.bind(this)),this.updateMessages()},onChangeSize:function(){var e=cleverapps.styles.ChatView,t="horizontal"!==cleverapps.config.orientation?cleverapps.styles.ChatInput.verticalHeight:cleverapps.styles.ChatInput.height,s=cc.director.getWinSize().height-cleverapps.styles.ChatHeader.height-t-e.extraHeight
;this.scroll.setContentSize2(cc.director.getWinSize().width,s),this.setContentSize2(this.scroll.getContentSize()),this.setPositionRound(e),this.chat.messages.forEach(function(e){this.messageViews[e.id]&&this.messageViews[e.id].onChangeSize()}.bind(this)),this.updateMessages()}});cleverapps.styles.ChatView={x:{align:"center"},y:{align:"top",dy:-128},margin:4,scrollBarPosition:{x:4,y:14},extraHeight:8};var ChatScene=cleverapps.FixedWidthScene.extend({ctor:function(e){this._super(cleverapps.Environment.SCENE_CHAT),this.windowsContainer=!0,this.chat=e;var t=new ChatHeader(this.chat);this.addChild(t);var s=new ChatView(this.chat);this.addChild(s);var n=new ChatInput(this.chat);this.addChild(n),cleverapps.placements.run(Placements.INTERMEDIATE),this.chat.hasUnread&&this.chat.markAsRead()},getBackgroundStyles:function(){return{pattern:bundles.chat.urls.window_bg}}});ChatScene.BUNDLES=function(){var e=["chat","reward_icons"];return"undefined"!=typeof match3&&e.push("heroes"),
"merge"===cleverapps.config.type&&e.push("episode_0"),e};var Toolbar=function(){this.items=[],this.freezed=!1,this.enabled=!1,this.onUpdateItemsListener=function(){},this.onAddItemListener=function(e){},this.onRemoveItemListener=function(e){},this.onEnableListener=function(){},!0!==cleverapps.config.notoolbar&&(this.addItem(new FriendRequestsToolbarItem),this.addItem(new PeriodicBonusToolbarItem),this.addItem(new DailyTasksToolbarItem),this.addItem(new LeaderBoardToolbarItem)),this.updateItems()};Toolbar.prototype.anyItemWithForce=function(){for(var e=0;e<this.items.length;e++){var t=this.items[e].force;if(t&&this.items[e].isVisible()&&this.items[e].isForceEnabled()&&!cleverapps.forces.isShown(t.id))return this.items[e]}},Toolbar.prototype.showAnyForce=function(){var t=this.anyItemWithForce();cleverapps.metha.display({focus:"toolbarItemForce",control:"toolbar",actions:[function(e){setTimeout(e,500)},function(e){this.onForceItem(),t.showForce(t.force),cleverapps.forces.onceForceClosed=e
}.bind(this)]})},Toolbar.prototype.addItem=function(e){void 0===this.getItem(e.type)&&(this.items.push(e),this.items.sort(function(e,t){return e.type-t.type}),this.onAddItemListener(e),this.update())},Toolbar.prototype.hasVisibleItems=function(){return 0<this.items.filter(function(e){return e.isVisible()}).length},Toolbar.prototype.removeItem=function(e){0<=this.items.indexOf(e)&&(this.items.splice(this.items.indexOf(e),1),this.onRemoveItemListener(e)),this.update()},Toolbar.prototype.getItem=function(e){for(var t=0;t<this.items.length;++t)if(this.items[t].type===e)return this.items[t]},Toolbar.prototype.updateItems=function(e){this.freezed||(this.onUpdateItemsListener(e),this.update())},Toolbar.prototype.freezeUpdates=function(){this.freezed=!0},Toolbar.prototype.unfreezeUpdates=function(){this.freezed=!1,this.updateItems()},Toolbar.prototype.update=function(){this.hasVisibleItems()?this.enable():this.disable()},Toolbar.prototype.enable=function(){this.enabled||(this.enabled=!0,
this.onEnableListener(this.enabled))},Toolbar.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.onEnableListener(this.enabled))};var ToolbarItem=function(e){cleverapps.extend(this,e),this.enabled=!1,this.marked=!1,this.onChangeStateListener=function(){},this.showForce=function(){}};ToolbarItem.prototype.isVisible=function(){return this.enabled},ToolbarItem.prototype.onClick=function(){this.unmark()},ToolbarItem.prototype.enable=function(){this.enabled||(this.enabled=!0,this.onChangeStateListener(),cleverapps.toolbar&&cleverapps.toolbar.updateItems())},ToolbarItem.prototype.isForceEnabled=function(){return!0},ToolbarItem.prototype.disable=function(){this.enabled&&(this.unmark(),this.enabled=!1,this.onChangeStateListener(),cleverapps.toolbar&&cleverapps.toolbar.updateItems())},ToolbarItem.prototype.mark=function(){this.marked||(this.marked=!0,this.onChangeStateListener())},ToolbarItem.prototype.unmark=function(){this.marked&&(this.marked=!1,this.onChangeStateListener())},
ToolbarItem.FRIEND_REQUESTS={type:0,icon:bundles.toolbar.frames.toolbar_mail_icon_png},ToolbarItem.BONUS_GAME={type:1,icon:bundles.toolbar.frames.toolbar_bonusround_icon_png,grayscaleDisabled:!0,force:Forces.BONUS_ROUND_FORCE},ToolbarItem.PERIODIC_BONUS={type:2,icon:bundles.toolbar.frames.toolbar_dailybonus_icon_png,countdown:!0,grayscaleDisabled:!0,force:Forces.PERIODIC_BONUS_FORCE},ToolbarItem.LEADER_BOARD={type:3,icon:bundles.toolbar.frames.toolbar_leader_board_icon_png},ToolbarItem.DAILY_TASKS={type:4,icon:bundles.toolbar.frames.toolbar_daily_tasks_icon_png,countdown:!0,force:Forces.DAILY_TASKS_FORCE};var BonusRoundToolbarItem=function(){ToolbarItem.call(this,ToolbarItem.BONUS_GAME),cleverapps.bonusRoundChest.changeLockedListener=this.changeLocked.bind(this),this.changeLocked()};BonusRoundToolbarItem.prototype=Object.create(ToolbarItem.prototype),(BonusRoundToolbarItem.prototype.constructor=BonusRoundToolbarItem).prototype.isVisible=function(){return(
void 0===typeof match3||!cleverapps.environment.isGameScene())&&(!!cleverapps.bonusRoundChest.isActive()&&this.enabled)},BonusRoundToolbarItem.prototype.changeLocked=function(){cleverapps.bonusRoundChest.locked?this.disable():(this.enable(),this.mark())},BonusRoundToolbarItem.prototype.onClick=function(){cleverapps.bonusRoundChest.locked?cleverapps.Notification.create("messages:BonusRound.ClosedText"):(this.unmark(),cleverapps.metha.display({focus:"BonusRoundWindow",action:function(e){cleverapps.bonusRoundChest.open(e)}}))};var PeriodicBonusToolbarItem=function(){ToolbarItem.call(this,ToolbarItem.PERIODIC_BONUS),this.countdown=cleverapps.periodicBonus.countdown,cleverapps.periodicBonus.changeLockedListener=this.changeLocked.bind(this),this.changeLocked()};PeriodicBonusToolbarItem.prototype=Object.create(ToolbarItem.prototype),(PeriodicBonusToolbarItem.prototype.constructor=PeriodicBonusToolbarItem).prototype.isVisible=function(){return levels.user.checkAvailable(
cleverapps.MiniGame.AVAILABLE)},PeriodicBonusToolbarItem.prototype.unlock=function(){this.mark()},PeriodicBonusToolbarItem.prototype.changeLocked=function(){cleverapps.periodicBonus.locked?this.disable():(this.enable(),this.mark())},PeriodicBonusToolbarItem.prototype.onClick=function(){cleverapps.periodicBonus.locked?cleverapps.Notification.create(cleverapps.periodicBonus.closedText,{image:new cc.Sprite(this.icon)}):(this.unmark(),cleverapps.metha.display({focus:"MiniGameWindowFromToolbar",action:function(e){cleverapps.periodicBonus.openWindow(e)}}))};var FriendRequestsToolbarItem=function(){ToolbarItem.call(this,ToolbarItem.FRIEND_REQUESTS),this.lastNotProceedId=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.LAST_VIEWED_FRIEND_REQUEST,{raw:!0}),levels.friendRequests.onNewListener=function(){this.mark(),cleverapps.toolbar.updateItems()}.bind(this),levels.friendRequests.onChangeListener=function(){levels.friendRequests.existNotProcessed()||(this.unmark(),
cleverapps.toolbar.updateItems(!0))}.bind(this),this.enable(),this.mark()};FriendRequestsToolbarItem.prototype=Object.create(ToolbarItem.prototype),(FriendRequestsToolbarItem.prototype.constructor=FriendRequestsToolbarItem).prototype.mark=function(){if(0!==cleverapps.friends.listFriends().concat(cleverapps.invitalbleFriends.listFriends()).length){var e=levels.friendRequests.lastNotProcessedId();!1!==e&&e!==this.lastNotProceedId&&ToolbarItem.prototype.mark.apply(this)}},FriendRequestsToolbarItem.prototype.isVisible=function(){return levels.friendRequests.existNotProcessed()},FriendRequestsToolbarItem.prototype.onClick=function(){this.lastNotProceedId=levels.friendRequests.lastNotProcessedId(),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.LAST_VIEWED_FRIEND_REQUEST,this.lastNotProceedId,{raw:!0}),this.unmark(),cleverapps.metha.display({focus:"FriendRequestsWindow",control:["MenuBarGoldItem","MenuBarLivesItem"],action:function(e){new FriendRequestsWindow,
cleverapps.metha.onceNoWindowsListener=e}})};var LeaderBoardToolbarItem=function(){ToolbarItem.call(this,ToolbarItem.LEADER_BOARD),this.enable()};LeaderBoardToolbarItem.prototype=Object.create(ToolbarItem.prototype),LeaderBoardToolbarItem.prototype.constructor=FriendRequestsToolbarItem,LeaderBoardToolbarItem.prototype.onClick=function(){cleverapps.social instanceof cleverapps.MobileVk?cleverapps.social.showLeaderBoardBox({userResult:levels.user.getHumanReadableNumber()},function(){}):cleverapps.metha.display({focus:"LeadersWindow",action:function(e){new LeadersWindow,cleverapps.metha.onceNoWindowsListener=e}})},LeaderBoardToolbarItem.prototype.isVisible=function(){return!cleverapps.flags.norest&&ToolbarItem.prototype.isVisible.call(this)&&levels.user.checkAvailable(cleverapps.Availables.LEADER_BOARD)};var DailyTasksToolbarItem=function(){ToolbarItem.call(this,ToolbarItem.DAILY_TASKS),this.countdown=new cleverapps.CountDown(cleverapps.dailyTasks.getTimeLeft()),this.enable(),
cleverapps.dailyTasks.onChangeStateListener=this.onChangeState.bind(this),this.onChangeState()};DailyTasksToolbarItem.prototype=Object.create(ToolbarItem.prototype),(DailyTasksToolbarItem.prototype.constructor=DailyTasksToolbarItem).prototype.onChangeState=function(){0<cleverapps.dailyTasks.getNotCollectedTasks().length||!cleverapps.dailyTasks.isRunning()?this.mark():this.unmark(),this.countdown.resetTimeLeft(cleverapps.dailyTasks.getTimeLeft()),this.countdown.nextSecond(Date.now())},DailyTasksToolbarItem.prototype.isVisible=function(){return levels.user.checkAvailable(cleverapps.Availables.DAILY_TASKS)},DailyTasksToolbarItem.prototype.onClick=function(){cleverapps.metha.display({focus:"DailyTasksWindow",action:function(e){new DailyTasksWindow,cleverapps.metha.onceNoWindowsListener=e}})};var ToolbarView=cc.Node.extend({ctor:function(e){this._super(),this.toolbar=cleverapps.toolbar,this.toolbar.update();var t=cleverapps.styles.ToolbarView;this.setAnchorPoint2(),this.height=t.bg.height,
this.createBg(),this.itemsViews=[],this.toolbar.items.forEach(function(e){var t=new ToolbarItemView(e);this.itemsViews.push(t),this.addChild(t)}.bind(this)),this.deltaY=cleverapps.UI.getSceneOffsetY();var s=cleverapps.clone(t.position,!0);s.y.dy-=this.deltaY,this.setPositionRound(s);var n=cleverapps.clone(s,!0);n.y.dy-=2*this.height,this.hidePosition=n,cleverapps.UI.makeHideable(this,cleverapps.UI.VERTICAL)},createBg:function(){bundles.toolbar.frames.toolbar_bg_png?this.bg=new cc.Scale9Sprite(bundles.toolbar.frames.toolbar_bg_png):(this.bg=new cc.Node,this.bg.setAnchorPoint2()),this.addChild(this.bg),this.bg.height=this.height,this.bg.setPositionRound(this.width/2,this.height/2)},onEnter:function(){this._super(),this.toolbar.onAddItemListener=this.createListener(this.addItem.bind(this)),this.toolbar.onRemoveItemListener=this.createListener(this.removeItem.bind(this)),this.toolbar.onUpdateItemsListener=this.createListener(this.updateItems.bind(this)),
this.toolbar.onEnableListener=this.createListener(this.updateEnabled.bind(this)),this.toolbar.onForceItem=this.createListener(this.onForceItem.bind(this)),this.updateItems(!0),this.hide(!0),this.updateEnabled(this.toolbar.enabled),cleverapps.metha.registerControl("toolbar",this.createListener(function(e){this.stopAllActions(),e?this.toolbar.enabled&&this.show():this.hide()}.bind(this)))},onForceItem:function(){this.show(!0)},addItem:function(e){var t=new(e.getViewClass())(e);this.addChild(t),this.itemsViews.push(t),this.itemsViews.sort(function(e,t){return e.toolbarItem.type-t.toolbarItem.type}),this.updateItems()},removeItem:function(t){var e=this.itemsViews.filter(function(e){return e.toolbarItem===t});e&&(this.itemsViews.splice(this.itemsViews.indexOf(e),1),e.removeFromParent(),this.updateItems())},updateItems:function(n){var e=cleverapps.styles.ToolbarView,i=[],o=[],a=[],r=0;this.itemsViews.forEach(function(e){var t=e.visible;t&&r++;var s=e.toolbarItem.isVisible();s!==t&&(o.push(e)
,s?e.setVisible(!0):n?e.setVisible(!1):(a.push(e),e.stopAllActions(),e.runAction(new cc.Sequence(new cc.ScaleTo(.3,0),new cc.CallFunc(function(){e.setVisible(!1),e.setScale(1)}))))),s&&i.push(e)}.bind(this));var l=(i.length-1)*e.margin;i.forEach(function(e){e.baseScaleX=1,l+=e.width});var t=0;0<i.length&&(t=cleverapps.UI.arrangeWithMargins(i,{direction:cleverapps.UI.HORIZONTAL,margin:e.margin,y:this.height/2+e.items.dy,iterator:function(e,t,s){t-=l/2,n?(e.scale=1,e.setPositionRound(t,s)):(-1!==o.indexOf(e)&&(e.scale=0,e.setPositionRound(t,s)),e.stopAllActions(),e.runAction(new cc.Spawn(new cc.ScaleTo(.6,1).easing(new cc.easeBackOut(.05)),new cc.MoveTo(.6,cc.p(t,s)))))}})),this.updateBg(t,r,i.length,n)},updateBg:function(e,t,s,n){this.bg.stopAllActions(),n||t<s?this._updateBg(e):this.bg.runAction(new cc.Sequence(new cc.DelayTime(.6),new cc.CallFunc(this._updateBg.bind(this,e))))},_updateBg:function(e){var t=cleverapps.styles.ToolbarView;this.bg.width=e+2*t.margin+2*t.bg.padding,
this.bg.setPositionRound(this.width/2,this.height/2),this.setScale(this.bg.width>cc.director.getWinSize().width?cc.director.getWinSize().width/this.bg.width:1),this.decors&&(this.decors.forEach(function(e){e.removeFromParent()}),delete this.decors),this.decors=SceneDecors.add(this.bg,cleverapps.skins.getSlot("toolbarDecors"))},updateEnabled:function(e){this.stopAllActions(),e&&0===cleverapps.windows.list.length?(this.hide(!0),this.show()):this.hide()}});cleverapps.styles.ToolbarView={position:{x:{align:"center",dx:0},y:{align:"bottom",dy:0}},bg:{height:115,padding:0},hover:{margin:6},items:{dy:0},margin:30};var ToolbarItemCountdownView=cleverapps.CountDownView.extend({ctor:function(e){var t=cleverapps.overrideStyles(cleverapps.styles.ToolbarItemView.countdownView,{font:cleverapps.styles.FONTS.TOOLBAR_ITEM_TIMER_TEXT},!0);if(t.scale9){var s=new cc.Scale9Sprite(t.background_image);s.setContentSize2(t.bg.width,t.bg.height),t.background_content=s}this._super(e,t)},refresh:function(){
this._super(),this.visible=0<this.countDown.getTimeLeft()},whatToDoOnStop:function(){this.countDown.onSecond=function(){}}}),ToolbarItemView=cc.Node.extend({ctor:function(e){this._super(),this.toolbarItem=e;var t=cleverapps.styles.ToolbarItemView;this.shakeTimeout=new cc.Node,this.addChild(this.shakeTimeout),this.hideTimeout=new cc.Node,this.addChild(this.hideTimeout);var s=new cc.Sprite(this.toolbarItem.icon);s.setAnchorPoint2(),this.addChild(s),this.icon=s,this.setContentSize2(this.icon.getContentSize()),this.setAnchorPoint2(),this.icon.setPositionRound(t.icon);var n=new cc.Sprite(t.mark.icon);n.setAnchorPoint2(),this.addChild(n),n.setPositionRound(t.mark),(this.mark=n).runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.3,1.1),new cc.ScaleTo(.3,1)))),cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,function(){cleverapps.audio.playSound(bundles.main.urls.click_effect),cleverapps.forces.isRunningForce()&&(this.toolbarItem.countdown&&this.addTimerView(),
cleverapps.forces.closeRunningForce()),this.toolbarItem.onClick()}.bind(this)),this.toolbarItem.countdown&&this.addTimerView()},showForce:function(e){cleverapps.forces.create(this,e)},addTimerView:function(){this.timerView&&(this.timerView.removeFromParent(),delete this.timerView);var e=cleverapps.styles.ToolbarItemView.timer,t=new ToolbarItemCountdownView(this.toolbarItem.countdown);t.setPosition(this.width/2+e.offsetX,this.height/2+e.offsetY),t.setScale(e.scale),this.addChild(t),this.timerView=t},onEnter:function(){this._super(),this.toolbarItem.onChangeStateListener=this.createListener(this.onChangeState.bind(this)),this.toolbarItem.showForce=this.createListener(this.showForce.bind(this)),this.onChangeState()},grayscale:function(){this.icon.setColor(this.toolbarItem.enabled?cleverapps.styles.COLORS.GRAY_SCALE_RESTORE_COLOR:cleverapps.styles.COLORS.GRAY_SCALE_COLOR),this.toolbarItem.countdown&&(this.timerView.setVisible(!this.toolbarItem.enabled),this.timerView.refresh())},
onChangeState:function(){if(this.toolbarItem.grayscaleDisabled&&this.grayscale(),this.mark.setVisible(this.toolbarItem.marked),this.toolbarItem.marked){var e=Math.floor(8*Math.random())+8;this.shake(e)}},shake:function(e){if(this.toolbarItem.marked&&!this.shakeRunned){this.shakeRunned=!0;var t=function(){this.toolbarItem.marked&&this.parent.visible&&(cleverapps.audio.playSound(bundles.main.urls.icon_jump_effect),this.runAction(new cc.Sequence(new cc.ScaleTo(.5,1.2,.8),new cc.Spawn(new cc.ScaleTo(.2,1,1),new cc.MoveBy(.2,0,150)),new cc.MoveBy(.2,0,-150),new cc.MoveBy(.1,0,30),new cc.MoveBy(.1,0,-30),new cc.CallFunc(function(){this.shakeRunned=!1,this.shake(Math.floor(8*Math.random())+8)}.bind(this)))))}.bind(this);this.shakeTimeout.runAction(new cc.Sequence(new cc.DelayTime(e),new cc.CallFunc(t)))}},onMouseOver:function(){this.toolbarItem.enabled&&this.setScale(1.05*this.baseScale||1.05)}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{TOOLBAR_ITEM_TIMER_TEXT:{name:"default",size:40
}}),cleverapps.styles.ToolbarItemView={timer:{offsetY:-10,offsetX:0,scale:.6},icon:{x:{align:"center"},y:{align:"center"}},mark:{icon:bundles.toolbar.frames.toolbar_attention_icon_png,x:{align:"center",dx:-30},y:{align:"center",dy:30}},countdownView:{background_image:bundles.main.frames.timer_bg_png,timerPosition:{x:0,y:0}}},cleverapps.FBLoginOrInvite=function(){if(cleverapps.social.isInitialized()&&!cleverapps.flags.nologin){var e=!1;if((cleverapps.social.isLoggedIn()||cleverapps.social.nativeInviteFriends)&&(e=!0),!e||!cleverapps.flags.noviral){var t=cleverapps.styles.FBLoginOrInvite,s=new cc.Node;s.setAnchorPoint2();var n=s.createListener(function(){var e=cleverapps.social.isLoggedIn()?cleverapps.EVENTS.FBLOGINORINVITE_INVITE:cleverapps.EVENTS.FBLOGINORINVITE_LOGIN;cleverapps.eventLogger.logEvent(e),s.removeFromParent(!0)}),i=new FbButton({showIcon:!1,onSuccess:n});s.setContentSize2(i.getContentSize());var o=cleverapps.UI.getSceneSize();if(s.setPosition(o.width/2+t.x,
i.height/2+cleverapps.UI.getSceneOffsetY()+t.y),s.addChild(i),i.setPositionRound(s.width/2,s.height/2),i.onMouseOver=function(){},i.onMouseOut=function(){},t.images.avatars){var a=new cleverapps.UI.Avatar({avatar:bundles.main.frames.default_avatar,frame:bundles.avatar.frames.avatar_frame2});a.setScale(t.images.avatars.scale),a.setPositionRound(t.images.avatars.right.x,t.images.avatars.right.y,s.getContentSize()),a.setRotation(t.images.avatars.right.rotation),s.addChild(a);var r=new cleverapps.UI.Avatar({avatar:bundles.main.frames.default_avatar,frame:bundles.avatar.frames.avatar_frame2});r.setScale(t.images.avatars.scale),r.setPositionRound(t.images.avatars.left.x,t.images.avatars.left.y,s.getContentSize()),r.setRotation(t.images.avatars.left.rotation),s.addChild(r)}var l=cleverapps.UI.generateTTFText(e?"messages:FBLoginOrInvite.invite":"messages:FBLoginOrInvite.login",cleverapps.styles.FONTS.FBLOGINORINVITE_TEXT);return l.setPosition(s.width/2+t.text.offsetX,s.height+t.text.offsetY),
l.fitTo(t.text.width),s.addChild(l),s.setScale(0),s.runAction(new cc.Sequence(new cc.ScaleTo(.5,1).easing(new cc.easeBackOut),new cc.CallFunc(function(){cleverapps.UI.applyHover(s)}))),l.setOpacity(0),l.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.FadeIn(.5))),s.setLocalZOrder(5),s}}},cleverapps.styles.FBLoginOrInvite={y:4,x:40,images:{avatars:{scale:.7,left:{x:{align:"left",dx:-70},y:{align:"center"},rotation:-7},right:{x:{align:"left",dx:-40},y:{align:"center",dy:5},rotation:13}}},text:{offsetX:-40,offsetY:26,width:700}},cleverapps.Row=cc.Scale9Sprite.extend({getStyles:function(){return cleverapps.styles.Row},getMaxTextLength:function(){return 12},ctor:function(e){var t,s=this.getStyles();e.player&&(this.player=!0),this.notInTop=e.notInTop,this.clickableArea=e.clickableArea,e.player?t=s.you_bg:(t=s.bg,(e.place-1)%2==1&&s.bg2&&(t=s.bg2));var n=new cc.Sprite(t);this._super(n.getSpriteFrame()),this.setContentSize2(s.size),this.updatePlace(e.place,!0)
;var i=new cleverapps.UI.Avatar(e.avatar);i.setPosition(s.avatar.position.x,s.avatar.position.y+this.height/2),i.setScale(s.avatar.scale),this.addChild(i);var o=e.text||"";if(o||"string"!=typeof e.id||(o="Player_"+e.id.substr(-3)),o.length>this.getMaxTextLength()){var a=(o=o.replace(/^[\s]+/,"")).lastIndexOf(" ",this.getMaxTextLength());a<=0&&(a=this.getMaxTextLength()),o=o.substr(0,a)}var r=cleverapps.UI.generateTTFText(o,e.player?cleverapps.styles.FONTS.ROW_PLAYER_TEXT||s.text.playerFont:cleverapps.styles.FONTS.ROW_TEXT||s.text.font);s.text.width&&r.fitTo(s.text.width),r.setPosition(s.text.x,s.text.y+this.height/2),this.addChild(r),this.generateData(e)},updateParams:function(e){this.notInTop=e.notInTop},generateDataBg:function(e){var t,s=this.getStyles();if(s.data.bg){var n=e.player&&s.data.bgYou?s.data.bgYou:s.data.bg;t=new cc.Scale9Sprite(new cc.Sprite(n).getSpriteFrame())}else(t=new cc.Node).setAnchorPoint2();return this.addChild(t),t.setContentSize2(s.data.size),t.setPosition(
s.data.position.x,s.data.position.y+this.height/2),t},generateDataContent:function(e,t){var s=this.getStyles(),n=t.dataIcon||s.data.icon;if(n){var i=new cc.Sprite(n);i.setPosition(s.data.iconPosition.x,s.data.iconPosition.y+e.height/2),i.setScale(s.data.scale),i.setRotation(s.data.rotation),e.addChild(i)}this.dataAmount=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.ROW_DATA_TEXT||s.data.amount.font),this.dataAmount.baseScale=this.dataAmount.scale,this.dataAmount.setPosition(s.data.amount.x,e.height/2+s.data.amount.y),e.addChild(this.dataAmount),this.updateAmount(t.amount,!0)},generateData:function(e){this.getStyles();var t=this.generateDataBg(e);this.getTooltipText()&&cleverapps.tooltipManager.create(t,{text:this.getTooltipText(),position:cleverapps.styles.UI.Tooltip.LOCATION.below,clickableArea:this.clickableArea}),this.generateDataContent(t,e)},getTooltipText:function(){return""},updatePlace:function(e,t){this.currentPlace!==e&&(this.currentPlace=e,this.refreshPlace(
this.currentPlace,t),this.refreshReward(this.currentPlace,t))},updateAmount:function(e,t){var s=this.getStyles();this.currentAmount!==e&&(this.currentAmount=e,this.dataAmount.stopAllActions(),this.dataAmount.setScale(this.dataAmount.baseScale),this.dataAmount.setString(this.currentAmount),this.dataAmount.fitTo(s.data.amount.width,s.data.amount.height),this.dataAmount.baseScale=this.dataAmount.scale,t||this.dataAmount.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.5*this.dataAmount.baseScale),new cc.ScaleTo(.2,this.dataAmount.baseScale))))},refreshReward:function(e){var t=this.getStyles();t.reward&&(this.reward&&this.reward.removeFromParent(!0),this.reward=this.generatePrizeBanner(e),this.reward&&(this.reward.setPosition(t.reward.x,t.reward.y+this.height/2),this.addChild(this.reward)))},refreshPlace:function(e){var t=this.getStyles();this.place&&this.place.removeFromParent(!0),this.place=this.generatePlaceBadge(e),this.place.setPosition(t.place.x,this.place.y+t.place.y+this.height/2),
this.addChild(this.place)},generatePlaceBadge:function(e){var t=this.getStyles(),s=this.player?t.place.playerFont:t.place.font;if(!(t=t.placeBadges)||e>t.icons.length)return this.generatePlaceText(e,s);var n=new cc.Sprite(t.icons[e-1]);return n.setPositionRound(t.x,t.y),n},generatePlaceText:function(e,t){var s=e;return this.notInTop&&(s="-"),cleverapps.UI.generateTTFText(s,t)},generatePrizeBanner:function(e){var t=this.getStyles();if(t.prizes&&!(e>(t=t.prizes).length)){t=t[e-1];var s=new cc.Node;if(t.banner){var n=new cc.Sprite(t.banner);s.addChild(n)}if(t.icon){var i=new cc.Sprite(t.icon);i.setScale(t.scale),s.addChild(i),i.setPosition(0,t.y);var o=new cc.Node;o.setContentSize2(i.getContentSize()),o.setAnchorPoint2(),s.addChild(o);var a=Messages.get("PrizeTooltip");this.currentPlace&&this.currentPlace<=5&&(a=Messages.get("Cup"+this.currentPlace+"PlaceTooltip")),this.addPrizeBannerTooltip(a,o)}return s}},getRewards:function(){},addPrizeBannerTooltip:function(e,t){
cleverapps.tooltipManager.create(t,{rewards:this.getRewards(),text:e,position:cleverapps.styles.UI.Tooltip.LOCATION.above,clickableArea:this.clickableArea})}}),cleverapps.styles.Row={bg:bundles.main.frames.row_player_png,bg2:bundles.main.frames.row_player_2_png,you_bg:bundles.main.frames.row_you_png,size:{width:680,height:70},placeBadges:{x:0,y:8,icons:[bundles.main.frames.levelstart_cup_1,bundles.main.frames.levelstart_cup_2,bundles.main.frames.levelstart_cup_3]},place:{x:56,y:0,font:cleverapps.styles.FONTS.TEXT,playerFont:cleverapps.styles.FONTS.WHITE_TEXT},avatar:{scale:.5,position:{x:150,y:0}},text:{x:290,y:-4,font:cleverapps.styles.FONTS.SMALL_TEXT,playerFont:cleverapps.styles.FONTS.SMALL_WHITE_TEXT,width:200},reward:{x:464,y:-4},prizes:[{banner:bundles.main.frames.red_banner_png,icon:bundles.menubar.frames.star_chest_icon_png,scale:.85,y:6},{banner:bundles.main.frames.blue_banner_png,icon:bundles.menubar.frames.star_chest_icon_png,scale:.8,y:6},{
banner:bundles.main.frames.green_banner_png,icon:bundles.menubar.frames.star_chest_icon_png,scale:.75,y:6},{icon:bundles.menubar.frames.star_chest_icon_png,scale:.7,y:6},{icon:bundles.menubar.frames.star_chest_icon_png,scale:.7,y:6}],data:{size:{width:140,height:60},bg:bundles.main.frames.light_bg_png,scale:.5,rotation:-10,iconPosition:{x:32,y:0},position:{x:604,y:0},amount:{x:100,y:0,font:cleverapps.styles.FONTS.WHITE_TEXT}}},cleverapps.LeadersRow=cleverapps.Row.extend({getStyles:function(){return cleverapps.styles.LeadersRow},getMaxTextLength:function(){return 16}}),cleverapps.styles.LeadersRow={bg:bundles.main.frames.row_player_png,you_bg:bundles.main.frames.row_you_png,size:{width:680,height:70},badgeY:8,place:{x:56,y:0,font:cleverapps.styles.FONTS.TEXT,playerFont:cleverapps.styles.FONTS.WHITE_TEXT},placeBadges:{x:0,y:8,icons:[bundles.main.frames.levelstart_cup_1,bundles.main.frames.levelstart_cup_2,bundles.main.frames.levelstart_cup_3]},avatar:{scale:.5,position:{x:150,y:0}},
text:{x:360,y:-4,font:cleverapps.styles.FONTS.SMALL_TEXT,playerFont:cleverapps.styles.FONTS.SMALL_WHITE_TEXT,width:280},data:{size:{width:140,height:60},bg:bundles.main.frames.light_bg_png,position:{x:604,y:0},amount:{x:70,y:0,font:cleverapps.styles.FONTS.WHITE_TEXT}}},cleverapps.MissionRow=cleverapps.Row.extend({getRewards:function(){var e=cleverapps.clone(RewardsConfig.Tournament.places[this.currentPlace-1],!0);return RewardsConfig.Tournament.prepareByRich&&(e=cleverapps.user.prepareRewardByRich(e)),e},getTooltipText:function(){return Messages.get("ResultTooltip")}}),cleverapps.DailyCupRow=cleverapps.Row.extend({getStyles:function(){return cleverapps.styles.DailyCupRow},getRewards:function(){return cleverapps.dailyCup.data.rewards[this.currentPlace-1]},getTooltipText:function(){return Messages.get("ResultTooltip")}}),cleverapps.styles.DailyCupRow=cleverapps.overrideStyles(cleverapps.styles.Row,{data:{icon:bundles.main.frames.stars_star,scale:.4,rotation:0}},!0),function(){
cleverapps.styles.DailyCupRow.prizes=[];for(var e=[.85,.8,.7],t=[bundles.main.frames.red_banner_png,bundles.main.frames.blue_banner_png,bundles.main.frames.green_banner_png],s=0;s<3;s++)cleverapps.styles.DailyCupRow.prizes[s]={banner:t[s],icon:bundles.menubar.frames.star_chest_icon_png,iconBet:bundles.menubar.frames.star_chest_icon_png,scale:e[s],y:6};for(s=3;s<10;s++)cleverapps.styles.DailyCupRow.prizes[s]={icon:bundles.reward_icons.frames.life_unlim_small,iconBet:bundles.reward_icons.frames.gold_small_png,scale:1,y:6}}(),cleverapps.DailyCupLeadersRow=cleverapps.Row.extend({getStyles:function(){return cleverapps.styles.DailyCupLeadersRow},generateMedalAmount:function(e,t){var s=this.getStyles(),n=new cc.Sprite(bundles.daily_cup.frames["place_badge_"+e]||bundles.main.frames["levelstart_cup_"+e]);n.setScale(s.medal.scale);var i=cleverapps.UI.generateImageText(t,cleverapps.styles.FONTS.DAILY_CUP_LEADERS_ROW_AMOUNT||cleverapps.styles.FONTS.SMALL_WHITE_TEXT);i.setVerticalAlignment(
cc.TEXT_ALIGNMENT_CENTER),i.fitTo(s.medal.width);var o=new cc.Node;return o.setAnchorPoint2(),o.setContentSize2(s.medal.width,i.height),o.addChild(i),i.setPositionRound(i.width/2*i.scale,i.height/2),new cleverapps.Layout([n,o],{direction:cleverapps.UI.HORIZONTAL,margin:s.medal.iconMargin})},generateDataContent:function(e,t){var s=this.getStyles(),n=[];n.push(this.generateMedalAmount(1,t.firstPlace)),n.push(this.generateMedalAmount(2,t.secondPlace)),n.push(this.generateMedalAmount(3,t.thirdPlace));var i=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:s.medal.margin});e.addChild(i),i.setPositionRound(e.width/2,e.height/2)}}),cleverapps.styles.DailyCupLeadersRow=cleverapps.overrideStyles(cleverapps.styles.Row,{prizes:[],placeBadges:void 0,medal:{scale:.5,width:50,iconMargin:2,margin:4},place:{x:36},avatar:{position:{x:96}},text:{x:240},data:{size:{width:320,height:60},position:{x:514,y:0}}},!0),cleverapps.Table=function(){this.results={}},
cleverapps.Table.prototype.updateResults=function(e,t){this.results[e]=[];for(var s=0;s<t.length;s++)this.results[e].push(cleverapps.clone(t[s]))},cleverapps.Table.prototype.resetResults=function(e){this.results[e]=void 0},cleverapps.Table.prototype.getResults=function(e){return this.results[e]},cleverapps.Table.prototype.createTableView=function(e){var t=new cleverapps.TableView(e.data,this.results[e.id],e.rowConstructor,e.dataIcon,e.options);return this.updateResults(e.id,e.data),t},cleverapps.TableView=cc.Node.extend({setupRowPosition:function(e,t,s){var n=function(){e.view.currentPlace===e.data.place&&e.data.place>this.amountRows?(e.view.removeFromParent(),delete this.rows[e.data.id]):this.scroll&&this.setRowVisibility(e),s&&s()}.bind(this);t=this.amountRows-t;var i=cc.p(this.styles.innerPadding,this.styles.innerPadding+(this.styles.margin+e.view.height)*t+e.view.height/2);e.view.setLocalZOrder(t),s&&(this.isVisiblePosition(e.view.y,e.view.height)||this.isVisiblePosition(i.y,
e.view.height))?e.view.runAction(new cc.Sequence(new cc.MoveTo(.2,i),new cc.CallFunc(n))):(e.view.setPositionRound(i),n())},isVisiblePosition:function(e,t){return e-=this.scroll.innerContent.height/2,-this.scroll.innerContent.y-this.scroll.height/2-t/2<=e&&e<=-this.scroll.innerContent.y+this.scroll.height/2+t/2},finishAnimation:function(){this.inSwapAnimation--,0===this.inSwapAnimation&&this.swapIfNeed()},startAnimation:function(e){e||(e=1),this.inSwapAnimation+=e},swapPairIfNeed:function(e,t){var s,n=e.view.currentPlace,i=t.view.currentPlace;this.startAnimation(2),e.view.updatePlace(i),t.view.updatePlace(n),this.setupRowPosition(e,i,this.finishAnimation.bind(this)),this.setupRowPosition(t,n,this.finishAnimation.bind(this)),e.data.player?s=this.rows[t.id]?t.view:e.view:t.data.player&&(s=this.rows[e.id]?e.view:t.view),s&&this.scroll.scrollToMakeNodeVisible(s,.2,{easing:cc.easeInOut(1),visibleBox:{top:.8,bottom:.8}})},findRowWithPlace:function(e){for(var t in this.rows)if(
this.rows[t].view.currentPlace===e)return this.rows[t];return!1},swapIfNeed:function(){if(0===this.inSwapAnimation){var e,t,s=this.amountRows+2;for(t in this.rows)this.rows[t].view.currentPlace>this.rows[t].data.place&&this.rows[t].data.place<s&&(s=this.rows[t].data.place,e=this.rows[t]);for(t in e&&this.swapPairIfNeed(this.findRowWithPlace(e.view.currentPlace-1),e),this.rows)this.rows[t].data.place<=s&&this.rows[t].view.updateAmount(this.rows[t].data.amount)}},setRowVisibility:function(e){e&&e.view&&e.view.setVisible(this.isVisiblePosition(e.view.y,e.view.height))},setRowsVisibility:function(){for(var e in this.rows)this.setRowVisibility(this.rows[e])},cloneResults:function(e){var t,s=[];for(t=0;t<e.length;t++)s.push(cleverapps.clone(e[t]));return s},updateResults:function(e){if(this.amountRows!==e.length)return!1;var t,s=this.cloneResults(e),n=this.amountRows+1;for(t in this.rows)this.rows[t].data.place=n;for(t=0;t<s.length;t++)if(this.rows[s[t].id])this.rows[s[t].id].data=s[t],
this.rows[s[t].id].view.updateParams(s[t]);else{this.dataIcon&&(s[t].dataIcon=this.dataIcon);var i=cleverapps.clone(s[t]);i.place=n,this.rows[s[t].id]={view:new this.rowConstructor(i),data:s[t]},this.rows[s[t].id].view.setAnchorPoint2(0,.5),this.node.addChild(this.rows[s[t].id].view),this.setupRowPosition(this.rows[s[t].id],i.place)}return this.swapIfNeed(),!0},findPlayerView:function(){for(var e in this.rows)if(this.rows[e].data.player)return this.rows[e].view},ctor:function(e,t,s,n,i){var o;for(i=i||{},this.rows={},this.amountRows=0,this.inSwapAnimation=0,this.startAnimation(),t&&e.length!==t.length&&(t=void 0),e=this.cloneResults(e),t||(t=e),t=this.cloneResults(t),s||(s=cleverapps.Row),this.rowConstructor=s,this.dataIcon=n,o=0;o<t.length;o++)this.dataIcon&&(t[o].dataIcon=this.dataIcon),(t[o].clickableArea=this).rows[t[o].id]={view:new this.rowConstructor(t[o]),data:t[o]},this.amountRows++;var a=cleverapps.styles.TableView;i.styles&&(a=cleverapps.overrideStyles(a,i.styles,!0)),
this.styles=a,this._super(),this.setAnchorPoint2();var r=this.node=new cc.Node;r.setAnchorPoint2();var l=this.styles.width,c=0;for(o in this.rows)this.rows[o].view.setAnchorPoint2(0,.5),r.addChild(this.rows[o].view),l=this.rows[o].view.width,c=this.rows[o].view.height,this.setupRowPosition(this.rows[o],this.rows[o].data.place);c=this.amountRows*c+(this.amountRows-1)*a.margin+2*a.innerPadding,r.setContentSize2(l+2*a.innerPadding,c);var p=0,d=a.height+2*a.innerPadding;c<=d&&(p=d-c),this.scroll=new cleverapps.UI.ScrollView(r,{childrenVisibility:cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_NONE,containerMovedListener:this.createListener(this.setRowsVisibility.bind(this))}),this.scroll.setContentSize2(r.width,0===p?d:c+1),this.scroll.setBarPadding(a.barPadding),0===p&&this.scroll.scrollTo(this.findPlayerView()),this.scroll.setAnchorPoint2(0,0),this.scroll.setPosition(a.padding,a.padding+p),this.setContentSize2(this.scroll.width+2*a.padding,d+2*a.padding),this.addChild(this.scroll),a.bg&&(
this.bg=new cc.Scale9Sprite(a.bg),this.addChild(this.bg),this.bg.setContentSize2(this.getContentSize()),this.bg.setPositionRound(this.width/2,this.height/2),this.bg.setLocalZOrder(-1)),this.runAction(new cc.Sequence(new cc.DelayTime(.7),new cc.CallFunc(this.finishAnimation.bind(this)))),this.updateResults(e),this.setRowsVisibility()}}),cleverapps.styles.TableView={bg:bundles.main.frames.light_bg_png,width:500,height:732,margin:4,padding:6,innerPadding:6,barPadding:{cornerPadding:20,sidePadding:5}};var DialoguePersonTitleView=cc.Scale9Sprite.extend({ctor:function(){var e=cleverapps.styles.DialoguePersonTitleView;this._super(e.image),this.originalSize=this.getContentSize();var t=this.titleText=cleverapps.UI.generateOnlyText("",cleverapps.styles.FONTS.DIALOGUE_PERSON_TITLE_TEXT);t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.addChild(t),this.setAnchorPoint2(),this.setCascadeOpacityEnabled(!0),this.setOpacity(0),this.setVisible(!1)},updateString:function(e){
var t=cleverapps.styles.DialoguePersonTitleView.text,s=this.titleText;s.setString(e),s.setFontSize(cleverapps.styles.FONTS.DIALOGUE_PERSON_TITLE_TEXT.size),this.setContentSize2(Math.max(s.width+2*t.padding.x,this.originalSize.width),Math.max(s.height+2*t.padding.y,this.originalSize.height)),s.setPositionRound(this.width/2,this.height/2+t.offset.y)},updatePosition:function(e){var t=cleverapps.styles.DialoguePersonTitleView,s=e.x,n=t.offsetX;s-this.width/2-n<0&&(s=this.width/2+n),s+this.width/2+n>this.parent.width&&(s=this.parent.width-this.width/2-n),this.setPositionRound(s,t.y)},update:function(e,t){this.visible?this.isLeft===t.isLeft&&this.title===e||this.runAction(new cc.Sequence(new cc.FadeOut(.2),new cc.CallFunc(function(){this.updateString(e),this.updatePosition(t.hideHandler.originalPosition)}.bind(this)),new cc.FadeIn(.2))):(this.updateString(e),this.updatePosition(t.hideHandler.originalPosition),this.setVisible(!0),this.runAction(new cc.FadeIn(.2))),this.isLeft=t.isLeft,
this.title=e},hide:function(){this.visible&&this.runAction(new cc.Sequence(new cc.FadeOut(.2),new cc.CallFunc(function(){this.setVisible(!1)}.bind(this))))}});cleverapps.styles.DialoguePersonTitleView={image:bundles.dialogues.frames.dialogue_name,offsetX:0,y:{align:"top",anchor:"center",dy:0},text:{padding:{x:5,y:0},offset:{y:-3}}};var DialoguePersonView=cc.Node.extend({ctor:function(e,t){this._super(),this.isLeft="right"!==e.position,this.setCascadeColorEnabled(!0),this.setAnchorPoint2(.5,0),this.setContentSize2(e.styles);var s=cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&void 0!==e.styles.mobileOffsetX?e.styles.mobileOffsetX:e.styles.offsetX,n=cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&void 0!==e.styles.mobileOffsetY?e.styles.mobileOffsetY:e.styles.offsetY;this.setPositionRound(this.isLeft?this.width/2*this.scale+s:t.width-(this.width/2*Math.abs(this.scaleX)+s),t.height+n);var i=this.personAnimation=new cleverapps.Spine(e.styles.json);i.setAnchorPoint2(.5,0)
,i.setPositionRound(e.styles.jsonPos),this.addChild(i),cleverapps.UI.makeHideable(this,cleverapps.UI.HORIZONTAL),t.addChild(this,-1),cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?this.setScale(e.styles.mobileScale||cleverapps.styles.DialoguePersonView.mobileScale):this.setScale(e.styles.scale||cleverapps.styles.DialoguePersonView.scale),this.isLeft||0<this.scaleX&&this.setScaleX(-this.scaleX),this.update(e,!0)},update:function(e,t){var s=cleverapps.styles.DialoguePersonView,n=!!this.curState,i=this.curState=e.active;this.setColor(i?cleverapps.styles.COLORS.WHITE:s.tintColor),t&&s.animateCharChange?(this.hide(!0),this.show(!1,.2),i||this.personAnimation.setScale(s.inactive.scale)):n!==this.curState&&(i?(this.personAnimation.setScale(s.inactive.scale),this.personAnimation.runAction(new cc.ScaleTo(.1,1))):this.personAnimation.runAction(new cc.ScaleTo(.1,s.inactive.scale))),t&&!i&&this.personAnimation.setScale(s.inactive.scale);var o=e.animation,
a=e.idleAnimation?e.idleAnimation:o;this.isSpeaking=i,this.personAnimation.setAnimation(0,i?o:a,!1),this.personAnimation.setCompleteListener(function(){this.personAnimation.setAnimation(0,this.isSpeaking?o:a,!1)}.bind(this))},finishSpeaking:function(){this.isSpeaking=!1},remove:function(){cleverapps.styles.DialoguePersonView.animateCharChange?(this.hide(),this.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.RemoveSelf))):this.runAction(new cc.RemoveSelf)}});cleverapps.styles.DialoguePersonView={zOrder:-1,mobileScale:.9,scale:1,inactive:{scale:.8},tintColor:new cc.Color(180,180,180),animateCharChange:!1};var DialogueView=Window.extend({onWindowLoaded:function(e,t){this.options=t||{},this.options.button=this.options.button||{},this.dialogue=e,this.dialogueStyles=this.options.styles||cleverapps.styles.DialogueView;var s=cleverapps.overrideStyles(cleverapps.styles.Window,this.dialogueStyles.Window,!0);s.shadow=this.options.overlay&&!1!==this.options.shadow,s.bgOffset={x:0,
y:this.calcYOffset()},this._super({name:"DialogueViewWindow",content:this.generateContent(),closeButton:!1,closeByBackButton:!1,noBackground:!0,notCloseByTouchInShadow:!0,minHeight:this.dialogueStyles.height,styles:s}),this.startPosition=new cc.p(cleverapps.UI.getSceneSize().width/2,-this.content.height/2-this.dialogueStyles.showUp.y),this.finalPosition=new cc.p(cleverapps.UI.getSceneSize().width/2,this.content.height/2+this.dialogueStyles.offsetY),this.dialogue.options.showUp||this.content.setPositionRound(this.finalPosition),e.on("showUp",this.showUp.bind(this),this),e.on("showPerson",this.showPerson.bind(this),this),e.on("hidePerson",this.hidePerson.bind(this),this),e.on("updatePerson",this.updatePerson.bind(this),this),e.on("updatePersonTitle",this.updatePersonTitle.bind(this),this),e.on("changeText",this.changeText.bind(this),this),e.on("updateButton",this.updateButton.bind(this),this),e.on("finishTyping",this.byLetterAnimationFinish.bind(this),this),e.on("beforeClose",
this.close.bind(this),this),cleverapps.audio.playSound(bundles.game.urls.dialogue_effect),e.onBundlesLoaded()},calcYOffset:function(){return-(cleverapps.UI.getSceneSize().height/2-this.dialogueStyles.height/2+cleverapps.UI.getSceneOffsetY())},generateContent:function(){var t=this.content=new cc.Node;return t.setAnchorPoint2(),t.setContentSize2(cleverapps.UI.getSceneSize().width-2*this.dialogueStyles.widthPadding,this.dialogueStyles.height),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:void 0===this.options.swallowTouches||this.options.swallowTouches,onTouchBegan:function(e){return!!(this.options.overlay||this.options.screenClicked||cc.rectContainsPoint(cc.rect(0,0,t.width,t.height),t.convertTouchToNodeSpace(e)))&&(this.dialogue.screenClicked(),!0)}.bind(this)},t),t},showUp:function(){this.content.setPositionRound(this.startPosition),this.content.runAction(new cc.Sequence(new cc.DelayTime(this.options.delay||0),new cc.MoveTo(.2,this.finalPosition.x,
this.finalPosition.y+this.dialogueStyles.showUp.offset),new cc.MoveTo(.1,this.finalPosition)))},showPerson:function(e){e.styles||(e=this.dialogueStyles.persons.default);var t=new DialoguePersonView(e,this.content);t.isLeft?this.leftPersonView=t:this.rightPersonView=t},updatePerson:function(e){("right"===e.position?this.rightPersonView:this.leftPersonView).update(e)},updatePersonTitle:function(e){if(this.personTitle||(this.personTitle=new DialoguePersonTitleView,this.content.addChild(this.personTitle,1)),!e)return this.personTitle.hide(),void(this.textBgArrow&&this.textBgArrow.setVisible(!1));var t="right"!==e.position;e.styles||(e=this.dialogueStyles.persons.default),e.styles.title?this.personTitle.update(e.styles.title,t?this.leftPersonView:this.rightPersonView):this.personTitle.hide();var s=this.dialogueStyles.text.arrow;s&&(this.textBgArrow||(this.textBgArrow=new cc.Sprite(s.img),this.textBg.addChild(this.textBgArrow,s.zOrder||1)),this.textBgArrow.setVisible(!0),
this.textBgArrow.setScaleX(t?1:-1),"relative"===s.offsetX?this.textBgArrow.setPositionRound(t?this.leftPersonView.x+this.leftPersonView.width/2:this.rightPersonView.x-this.rightPersonView.width/2,s.y):this.textBgArrow.setPositionRound(t?s.offsetX:this.content.width-s.offsetX,s.y))},hidePerson:function(e){"right"!==e&&this.leftPersonView&&(this.leftPersonView.remove(),delete this.leftPersonView),"right"===e&&this.rightPersonView&&(this.rightPersonView.remove(),delete this.rightPersonView)},changeText:function(e,t,s){this.textBg||(this.textBg=new cc.Scale9Sprite(bundles.dialogues.frames.bg_png),this.textBg.setContentSize2(this.content.width,this.content.height),this.textBg.setPositionRound(this.content.width/2,this.content.height/2),this.content.addChild(this.textBg)),this.text&&this.text.removeFromParent(),this.text=cleverapps.UI.generateOnlyText(e,this.dialogueStyles.font||cleverapps.styles.FONTS.FORCE_MESSAGE_TEXT),this.text.setHorizontalAlignment(this.dialogueStyles.text.alignment),
this.text.setAnchorPoint2(.5,1),this.content.addChild(this.text,1);var n=this.dialogueStyles.text,i=this.content.width-n.padding.fromWallX,o=n.padding.x;t&&(i=this.content.width-n.padding.x,o=n.padding.fromWallX);var a=this.content.height-n.padding.y,r=1,l=i-o,c=a-((this.button&&this.button.visible?this.button.y+this.button.height/2:0)+n.padding.y);l>n.optimization.width&&(l/=r=1.5,c/=r,this.text.setFontSize(Math.round(this.text.getFontSize()/r))),this.text.setDimensions(l,0),this.text.fitToHeight(c),this.text.setScale(this.text.getScale()*r),this.text.setPositionRound((o+i)/2,a),this.text.byLetterAnimation({callback:s})},updateButton:function(e,t){e=!this.options.button.noButton&&e,!this.button&&e&&(this.button=new cleverapps.UI.Button({width:this.dialogueStyles.button.width,height:this.dialogueStyles.button.height,button_png:this.dialogueStyles.button.button_png,button_on_png:this.dialogueStyles.button.button_png_on,text:this.options.button.text||Messages.get("Next"),
font:cleverapps.styles.FONTS.BUTTON_SMALL_TEXT,onClicked:function(){this.dialogue.buttonClicked()}.bind(this),noThrottle:!0,padding:this.dialogueStyles.button.padding}),this.button.setPositionRound(this.content.width-(this.button.width/2+this.dialogueStyles.button.offset.x),this.button.height/2+this.dialogueStyles.button.offset.y),this.content.addChild(this.button,1)),this.button&&(this.button.visible=e,t&&this.button.text.setString(Messages.get("OK")))},close:function(){this.byLetterAnimationFinish(),this.content.stopAllActions(),this.dialogue.options.showUp?this.content.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.MoveTo(.15,cc.p(this.content.x,this.content.y+this.dialogueStyles.showUp.offset)),new cc.MoveTo(.15,this.startPosition),new cc.CallFunc(function(){Window.prototype.close.apply(this,arguments),this.dialogue.finishClose()}.bind(this)),new cc.RemoveSelf)):(this._super(),this.dialogue.finishClose())},byLetterAnimationFinish:function(){
this.text&&this.text.byLetterAnimationFinish(),[this.leftPersonView,this.rightPersonView].forEach(function(e){e&&e.finishSpeaking()})},listBundles:function(e){return e.bundlesToLoad}});cleverapps.styles.DialogueView={height:280,widthPadding:0,offsetY:20,showUp:{y:100,offset:75},button:{width:160,height:60,button_png:bundles.buttons_main.frames.small_green_button,button_png_on:bundles.buttons_main.frames.small_green_button_on,padding:{x:10},offset:{x:30,y:30}},text:{alignment:cc.TEXT_ALIGNMENT_LEFT,arrow:!1,padding:{fromWallX:30,x:30,y:30},optimization:{width:1e3}},persons:{default:{animation:"animation",position:"left",styles:{json:bundles.dialogues.jsons.default_json,width:350,height:300,offsetX:25,offsetY:0,jsonPos:{x:{align:"center"},y:{align:"center"}}}}},Window:{noWindowScale:!0,windowShowUpAnimation:!1}};var MinimalDialogue=cc.Node.extend({ctor:function(e){this._super(),this.options=e||{},this.setAnchorPoint2(),this.setLocalZOrder(20),this.shown=!0,
cleverapps.bundleLoader.loadBundle("dialogues_minimal",{onSuccess:this.createListener(this.onLoaded.bind(this)),blocked:!0})},onLoaded:function(){this.createContent(),this.calculatePosition(),this.showUp()},createContent:function(){var e=cleverapps.styles.MinimalDialogue,t=this.options.person||e.persons.default,s=Math.min(e.maxWidth,cleverapps.UI.getSceneSize().width-e.widthPadding);(!1===this.options.person||!1===t&&cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL)&&(s-=e.person.width);var n=e.height;cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(n=e.verticalHeight);var i=s-e.text.padding.fromWallX,o=cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?e.text.padding.verticalX:e.text.padding.x;!1!==this.options.person&&(o+=t.styles.width/2+e.person.offsetX+e.person.width/2),this.text=cleverapps.UI.generateOnlyText(this.options.text,e.font||cleverapps.styles.FONTS.FORCE_MESSAGE_TEXT),this.text.setHorizontalAlignment(e.text.alignment),this.text.setDimensions(i-o,0),
this.text.fitTo(void 0,n-e.text.padding.y);var a=Math.max(this.text.height,!1!==this.options.person?e.person.height:0)+e.text.padding.y;if(this.setContentSize2(s,a),!1!==this.options.person){var r=new cc.Node;r.setAnchorPoint2(),r.setCascadeColorEnabled(!0),r.setContentSize2(e.person),r.setPositionRound(t.styles.width/2+e.person.offsetX,this.height/2+e.person.offsetY),this.personAnimation=new cleverapps.Spine(t.styles.minimalJson||bundles.dialogues_minimal.jsons.dialogue_minimal_json),this.personAnimation.setPositionRound(r.width/2,r.height/2),r.addChild(this.personAnimation),this.addChild(r,e.person.zOrder)}if(this.textBg=cleverapps.UI.createScale9Sprite(bundles.dialogues_minimal.frames.bg_minimal_png,cleverapps.UI.Scale9Rect.TwoPixelXY),this.textBg.setCascadeOpacityEnabled(!0),this.textBg.setContentSize2(this.text.width+2*e.text.bg.padding.x,this.text.height+2*e.text.bg.padding.y),this.textBg.setPositionRound((o+i)/2-e.text.bg.offsetX,this.height/2),
this.textBg.setCascadeOpacityEnabled(!0),this.textBg.setOpacity(0),this.addChild(this.textBg),this.text.setPositionRound(this.textBg.width/2,this.textBg.height/2-e.text.bg.offsetY),this.text.setOpacity(0),this.textBg.addChild(this.text),e.text.arrow){this.textBgArrow=new cc.Sprite(e.text.arrow.img),this.textBgArrow.setScaleX("right"===t.position?-1:1);var l="right"===t.position?this.textBg.width-e.text.arrow.offsetX:e.text.arrow.offsetX;this.textBgArrow.setPositionRound(l,e.text.arrow.y),this.textBg.addChild(this.textBgArrow,e.text.arrow.zOrder||1)}this.setVisible(!1)},calculatePosition:function(){var e=cleverapps.UI.getSceneSize(),t=cleverapps.styles.MinimalDialogue;if(this.options.forcePosition)this.options.forcePosition===Dialogue.POSITIONS.TOP?this.setPositionRound(e.width/2,e.height-this.height/2-t.positions.top.y):this.options.forcePosition===Dialogue.POSITIONS.TOP_LOWER?this.setPositionRound(e.width/2,e.height-this.height/2-t.positions.topLower.y
):this.options.forcePosition===Dialogue.POSITIONS.BOTTOM?this.setPositionRound(e.width/2,this.height/2+t.positions.bottom.y):this.options.forcePosition===Dialogue.POSITIONS.CENTER&&this.setPositionRound(e.width/2,e.height/2);else if(this.options.rects&&this.options.rects.length){if(!this.calcDynamicPosition()){var s=cc.view.getFrameSize(),n="Could not position minimal dialog with text: "+this.options.text+", screen size: "+s.width+" by "+s.height;cleverapps.ErrorHandler.logError(n)}}else this.setPositionRound(e.width/2,this.height/2+t.positions.bottom.y)},calcDynamicPosition:function(){for(var t=cleverapps.styles.MinimalDialogue.targetOffset,e=this.options.rects.map(function(e){return cc.rect(e.x-t,e.y-t,e.width+2*t,e.height+2*t)}.bind(this)),s=function(e){var t=cleverapps.UI.getSceneOffsetY(),s=cleverapps.UI.getSceneSize();return cc.p(Math.max(this.width/2,Math.min(e.x,s.width-this.width/2)),Math.max(-t+this.height/2,Math.min(e.y,s.height+t-this.height/2)))}.bind(this),
n=cc.director.getRunningScene().scene,i=this.options.parent||n,o=Number.MAX_VALUE,a=0,r=[],l=0;l<e.length;l++)for(var c=e[l],p=this.calcPositionSlots(c),d=0;d<p.length;d++){var u=s(p[d]),h=i.convertToNodeSpace(n.convertToWorldSpace(u));this.setPositionRound(h),r.push(h);var g=0,v=0;if(e.forEach(function(e){var t=cc.rectIntersection(this.getGlobalBoundingBox(void 0,i),e);v=Math.max(v,Math.min(t.width,t.height));var s=(0<t.width?t.width:0)*(0<t.height?t.height:0);g<s&&(g=s)},this),v<=2)return!0;g<o&&(o=g,a=l*p.length+d)}return this.setPositionRound(r[a]),!1},calcPositionSlots:function(e){var t={x:e.x-this.width/2,y:e.y+e.height/2},s={x:e.x+e.width+this.width/2,y:e.y+e.height/2},n={x:e.x+e.width/2,y:e.y+e.height+this.height/2},i={x:e.x+e.width/2,y:e.y-this.height/2},o=cleverapps.UI.getSceneSize(),a=e.x+e.width/2,r=e.y+e.height/2;return a<o.width/6||a>o.width/6*5?[t,s,n,i]:r<o.height/6||r>o.height/6*5?[n,i,t,s]:[t,s,n,i]},showUp:function(){this.shown=!0,this.runAction(new cc.Sequence(
new cc.DelayTime(this.options.delay||.5),new cc.Show,new cc.CallFunc(function(){if(cleverapps.audio.playSound(bundles.game.urls.dialogue_effect),this.personAnimation){var e=this.getSkin();e&&this.personAnimation.setSkin(e),this.personAnimation.setVisible(!0),this.personAnimation.setAnimationAndIdleAfter("minimal_showup","talk_minimal")}this.textBg.runAction(new cc.Sequence(new cc.FadeIn(.3),new cc.CallFunc(function(){this.text.runAction(new cc.FadeIn(.6))}.bind(this))))}.bind(this))))},hide:function(e){if(this.shown){if(this.personAnimation){var t=this.getSkin();t&&this.personAnimation.setSkin(t),this.personAnimation.setAnimation(0,"minimal_hide",!1),this.personAnimation.setCompleteListenerOnce(function(){this.personAnimation.setVisible(!1)}.bind(this))}this.textBg.runAction(new cc.FadeOut(.3)),this.runAction(new cc.Sequence(new cc.DelayTime(.6),new cc.CallFunc(function(){this.text.setOpacity(0),e&&e()}.bind(this)))),this.shown=!1}else e&&e()},remove:function(e){this.hide(function(){
this.removeFromParent(),cleverapps.bundleLoader.deleteBundle("dialogues_minimal"),e&&e()}.bind(this))},getSkin:function(){var e=cleverapps.styles.MinimalDialogue.person.minimalSkinDefault;return this.options.person&&this.options.person.styles&&this.options.person.styles.minimalSkin||e}});cleverapps.styles.MinimalDialogue={height:320,verticalHeight:450,maxWidth:1e3,widthPadding:0,targetOffset:30,person:{height:240,width:240,zOrder:-1,offsetX:25,offsetY:0},text:{alignment:cc.TEXT_ALIGNMENT_CENTER,width:500,padding:{fromWallX:30,verticalX:40,x:80,y:60},arrow:{img:bundles.dialogues_minimal.frames.arrow_minimal_png,y:{align:"center"},offsetX:-7},bg:{offsetX:0,offsetY:-4,padding:{x:20,y:20}}},positions:{topLower:{y:200},top:{y:100},bottom:{y:20}},skip:{x:{align:"right",dx:-30},y:{align:"bottom",dy:20},width:100,height:50},persons:cleverapps.styles.DialogueView.persons};var ProlongationWindow=Window.extend({onWindowLoaded:function(e,t){if(!Game.currentGame)return!1;this.prolongation=e,
this.price=e.getCoinsPrice(),this.moves=e.getAmountByCoins(),this.giveUpAlert=e.getGiveUpAlert(),0<this.price&&this.prolongation.addProlongation(),this.onCancel=t;var s=this.content=new cc.Node;s.setLocalZOrder(2),s.setAnchorPoint(.5,.5);var n=cleverapps.styles.ProlongationWindow,i=n.width,o=this.prolongation.countOfGoals&&this.prolongation.countOfGoals();if(o){var a=3===o&&cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL;i=n.wider.width}s.setContentSize2(i,n.height);var r=cleverapps.UI.generateTTFText("messages:ProlongationWindow.addMoves",cleverapps.styles.FONTS.ADD_MOVES_QUESTION_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT);s.addChild(r),r.setPositionRound(n.question),o&&this.createGoalsViews(o<3||a),this.prolongation.on("addMoves",this.createListener(this.onAddMoves.bind(this))),this.coinProlongButton=new CoinProlongButton(this.prolongation,function(){this.giveUpAlert.onTakeMoves()}.bind(this));var l=[this.coinProlongButton];this.prolongation.free||(
this.prolongation.isAdAvailable()?l.push(new AdsProlongButton(this.prolongation)):cleverapps.flags.nopayments||l.push(new ProductProlongButton(this.prolongation))),this.prolongation.free||"undefined"==typeof BreakView||BreakView.AddBreakViews(s,this.viewsLayout?[this.viewsLayout]:[r],cleverapps.styles.ProlongationWindow.breakView.y);var c=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.ProlongationWindow,!0);this._super({title:Messages.get("ProlongationWindow.title"),name:"prolongationwindow",content:s,buttons:l,styles:c,closeButton:0<this.price,notCloseByTouchInShadow:!0}),this.closeButton&&(this.closeButton.settings.onClicked=this.giveUp.bind(this)),cleverapps.audio.playSound(bundles.game.urls.lose_effect);var p=cleverapps.windows.list.filter(function(e){return"confirmexitwindow"===e.name});0!==p.length&&p[0]&&p[0].close(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MOVES_SHOW),this.scheduleUpdate(),n.hero&&(this.hero=new cleverapps.Spine(n.hero.json,1),
this.hero.setAnimation(0,n.hero.animation,!0),this.hero.setPositionRound(n.hero),this.addChild(this.hero))},giveUp:function(){this.giveUpAlert.canShow()?this.giveUpAlertShow():(this.close(),this.onCancel())},giveUpAlertShow:function(){var e=cleverapps.styles.ProlongationWindow.alert,t=new GiveUpAlertView(this.giveUpAlert,{size:e.size,position:e.position});this.content.addChild(t);var s=this.window.convertToNodeSpace(t.getParent().convertToWorldSpace(t.getPosition()));this.closeButton.y-e.distToClose.height<s.y+t.height/2&&(this.addHeight=s.y+t.height/2-this.closeButton.y+e.distToClose.height)},onShow:function(){if(!this.closed)for(var e in this.goldInfo&&this.goldInfo.showUp(),this.buttons.buttons)this.buttons.buttons[e].startAnimate()},onHide:function(){for(var e in this.buttons.buttons)this.buttons.buttons[e].stopAnimate();this.goldInfo&&this.goldInfo.onHide()},onClose:function(){this.finger&&this.finger.removeFromParent(!0),this.onCancel()},beforeCloseAnimation:function(e){
this.goldInfo?this.goldInfo.close(e):e()},onAddMoves:function(e){console.log("onAddMoves"),this.onCancel=function(){},this.onAddMovesAnimation&&this.onAddMovesAnimation(e.moves),this.hint&&this.hint.close(),this.close()},listBundles:function(){return["prolongation_window"]},update:function(e){this._super(e);var t=cleverapps.styles.ProlongationWindow.alert.delta;0<this.addHeight&&(this.addHeight-=t,this.bg.setContentSize(this.bg.width,this.bg.height+t),this.bg.setPosition(this.bg.x,this.bg.y+t/2),this.window.titleText.setPosition(this.window.titleText.x,this.window.titleText.y+t),this.closeButton.setPosition(this.closeButton.x,this.closeButton.y+t),this.onChangeBackground(this.window))}});cleverapps.styles.ProlongationWindow={y:294,width:720,height:270,wider:{width:780},question:{x:{align:"center"},y:200},buttons:{x:70,phone:50},breakView:{y:50},goals:{scale:!1},alert:{}};var Prolongation=function(e){cleverapps.EventEmitter.call(this),this.game=e,this.counter=0,this.free=!1}
;Prolongation.prototype=Object.create(cleverapps.EventEmitter.prototype),(Prolongation.prototype.constructor=Prolongation).prototype.isAdAvailable=function(){return cleverapps.adsLimits.state(AdsLimits.TYPES.MOVES_FOR_VIDEO)===AdsLimits.STATE_READY},Prolongation.prototype.getAmountForAds=function(){return 5},Prolongation.prototype.getCoinsPrice=function(){return this.free?0:0===this.counter&&(this.isWhale()||500<levels.user.gold)?250:cleverapps.config.prices.prolongations[this.counter]},Prolongation.prototype.updateFree=function(e){this.free=e},Prolongation.prototype.getAmountByCoins=function(){var e=5;return!this.free&&0===this.counter&&(this.isWhale()||500<levels.user.gold)&&(e=10),e},Prolongation.prototype.isWhale=function(){return cleverapps.paymentsHistory.classify()===cleverapps.PaymentsHistory.VIP_BIGWHALE||cleverapps.paymentsHistory.classify()===cleverapps.PaymentsHistory.VIP_WHALE},Prolongation.prototype.addProlongation=function(){this.counter++,
this.counter>=cleverapps.config.prices.prolongations.length&&(this.counter=cleverapps.config.prices.prolongations.length-1)},Prolongation.prototype.getProduct=function(){var e=Prolongation.PRODUCTS[0];switch(cleverapps.paymentsHistory.classify()){case cleverapps.PaymentsHistory.VIP_MEDIUM:e=Prolongation.PRODUCTS[1];break;case cleverapps.PaymentsHistory.VIP_WHALE:e=Prolongation.PRODUCTS[2];break;case cleverapps.PaymentsHistory.VIP_BIGWHALE:e=Prolongation.PRODUCTS[3]}return Product.Create(e)},Prolongation.prototype.getGiveUpAlert=function(){var e=this.game.gameMission,t=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN)&&cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN).logic.lantern,s=this.game.getPercentOfCompletion(),n=this.game.rewards[GameBase.REWARD_GOLD],i=void 0;return this.game.collectedBoosterCell?i=Prolongation.GIVE_UP_TYPES.BOOSTER:t&&t.isActive(this.game.level)&&0<t.getCurrentStreak(
)?i=Prolongation.GIVE_UP_TYPES.LANTERN:e&&e.isRunning()&&0<this.game.rewards.clover?i=Prolongation.GIVE_UP_TYPES.MISSION:n&&n>this.game.basicGoldReward?i=Prolongation.GIVE_UP_TYPES.GOLD_COLLECTED:.85<=s&&(i=Prolongation.GIVE_UP_TYPES.NEARLY),new GiveUpAlert(i)},Prolongation.prototype.addMoves=function(t){if(t.goldUsed&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HINT_USED,{amount:t.price}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MOVES_BOUGHT+"_"+t.price)),this.trigger("addMoves",t),Game.currentGame){var s=Game.currentGame;s.hand&&s.hand.extra.hide(),s.counter.setTimeout(function(){if(s.hand?s.hand.addExtra(t.moves,t.bonus):s.setMoves(t.moves),s.score&&s.score.addBuyMoves(),t.bonus&&"match3"===cleverapps.config.type)for(var e=0;e<t.bonus;e++)s.field.addRandomMulticolor()},t.delay||700)}},Prolongation.GIVE_UP_TYPES={BOOSTER:0,LANTERN:1,MISSION:2,GOLD_COLLECTED:3,NEARLY:4},Prolongation.PRODUCTS=["addMoves1","addMoves2","addMoves3","addMoves5"];var GiveUpAlert=function(e){
cleverapps.EventEmitter.call(this),this.type=e,this.viewExists=!1};GiveUpAlert.prototype=Object.create(cleverapps.EventEmitter.prototype),(GiveUpAlert.prototype.constructor=GiveUpAlert).prototype.getMessage=function(){switch(this.type){case Prolongation.GIVE_UP_TYPES.BOOSTER:return"messages:AddMovesWindow.boosterGiveUp";case Prolongation.GIVE_UP_TYPES.MISSION:return"messages:AddMovesWindow.missionGiveUp."+Game.currentGame.gameMission.getName();case Prolongation.GIVE_UP_TYPES.LANTERN:return"messages:AddMovesWindow.lanternGiveUp";case Prolongation.GIVE_UP_TYPES.GOLD_COLLECTED:return"messages:AddMovesWindow.goldCollectedGiveUp";case Prolongation.GIVE_UP_TYPES.NEARLY:return"messages:AddMovesWindow.nearlyDoneGiveUp"}return""},GiveUpAlert.prototype.onTakeMoves=function(){this.viewExists&&!this.takeMovesLogged&&(this.takeMovesLogged=!0,this.type===Prolongation.GIVE_UP_TYPES.NEARLY?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GIVEUP_CHANGE_NEARLY
):void 0!==this.type&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GIVEUP_CHANGE))},GiveUpAlert.prototype.canShow=function(){return void 0!==this.type&&!this.viewExists&&Game.currentGame&&Game.currentGame.outcome===GameBase.OUTCOME_UNKNOWN},GiveUpAlert.prototype.onShow=function(){this.viewExists||(this.viewExists=!0,this.type===Prolongation.GIVE_UP_TYPES.NEARLY?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GIVEUP_ATTENTION_NEARLY):this.type===Prolongation.GIVE_UP_TYPES.MISSION?cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GIVEUP_MISSION):void 0!==this.type&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GIVEUP_ATTENTION))};var GiveUpAlertView=cc.Node.extend({ctor:function(e,t){this._super(),this.giveUpAlert=e,this.giveUpAlert.onShow();var s=cleverapps.styles.GiveUpAlertView,n=cleverapps.UI.createScale9Sprite(s.bg.image,cleverapps.UI.Scale9Rect.TwoPixelXY);n.setContentSize2(t.size),n.setLocalZOrder(-1),this.setContentSize2(n.width,n.height),this.setAnchorPoint2(),
n.setPositionRound(this.width/2,this.height/2),this.addChild(n),this.setCascadeOpacityEnabled(!0),this.setPositionRound(t.position);var i=cleverapps.UI.generateTTFText(e.getMessage(),cleverapps.styles.FONTS.LEVEL_TUTORIAL_TEXT);i.setCascadeOpacityEnabled(!0),i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setDimensions(this.width+s.text.padding[cleverapps.wideMode.mode].x,0),i.fitTo(void 0,this.height),i.setPositionRound(s.text),this.addChild(i),this.showUp(),cleverapps.audio.playSound(bundles.game.urls.bubble_effect)},showUp:function(){this.setOpacity(0),this.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.FadeIn(.2),new cc.CallFunc(function(){var e=this.getScale();this.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.5,1.05*e),new cc.ScaleTo(.5,e))))}.bind(this))))}});cleverapps.styles.GiveUpAlertView={bg:{image:bundles.main.frames.speak_bg_png},text:{x:{align:"center",dx:30},y:{align:"center",dy:0},padding:[{
x:-50},{x:-50},{x:-50}]}};var BaseProlongButton=cleverapps.UI.Button.extend({ctor:function(e,t,s){this.prolongation=e,this.callback=t,this.styles=s,this._super({content:this.getButtonContent(),width:this.styles.width,height:this.styles.height,onClicked:this.onClicked.bind(this)}),this.createMoves(),this.addMovesOnce=cleverapps.once(this.addMoves.bind(this))},addMoves:function(){this.callback&&this.callback(),this.prolongation.addMoves({delay:"solitaire"===cleverapps.config.type?300:700,moves:this.moves,bonus:this.bonus,price:this.price,goldUsed:this.goldUsed})},onClicked:function(){},startAnimate:function(){this.setScale(0),this.runAction(new cc.Sequence(new cc.DelayTime(.4),new cc.ScaleTo(.5,1).easing(cc.easeBackOut())))},stopAnimate:function(){this.stopAllActions(),this.setScale(1)},createMoves:function(){var e=cleverapps.UI.generateImageText(this.moves,cleverapps.styles.FONTS.WINDOW_TEXT),t=new cc.Sprite(RewardsHelper.SMALL_ICONS.moves||bundles.game.frames.game_moves_icon),
s=new cleverapps.Layout([e,t],{direction:cleverapps.UI.HORIZONTAL,margin:this.styles.moves.movesMargin});if(this.bonus){for(var n=cleverapps.UI.generateImageText("+",cleverapps.styles.FONTS.BUTTON_TEXT),i=[],o=0;o<this.bonus;o++){var a="solitaire"===cleverapps.config.type?RewardsHelper.SMALL_ICONS[WildcardBooster.ID]:RewardsHelper.SMALL_ICONS[ColorBooster.ID];i.push(new cc.Sprite(a))}var r=new cleverapps.Layout(i,{direction:cleverapps.UI.HORIZONTAL,margin:this.styles.moves.bonusMargin});s=new cleverapps.Layout([s,n,r],{direction:cleverapps.UI.HORIZONTAL,margin:this.styles.moves.margin})}this.addChild(s),s.setPositionRound(this.styles.moves)}});cleverapps.styles.BaseProlongButton={width:350,height:100,moves:{movesMargin:5,bonusMargin:5,margin:5,x:{align:"center",dx:0},y:{align:"top",dy:50}}};var ProductProlongButton=BaseProlongButton.extend({ctor:function(e,t){this.product=e.getProduct(),this.moves=this.product.moves,this.bonus=this.product.bonus;var s=cleverapps.overrideStyles(
cleverapps.styles.BaseProlongButton,cleverapps.styles.ProductProlongButton,!0);this._super(e,t,s),Lottery.addIcon(this)},onClicked:function(){this.product.buy(this.addMovesOnce.bind(this))},getButtonContent:function(){return new ProductPriceView(this.product,{font:cleverapps.styles.FONTS.BUTTON_TEXT,iconScale:this.styles.okPrice.scale,offsetY:this.styles.okPrice.offsetY})}});cleverapps.styles.ProductProlongButton={width:350,height:100,okPrice:{scale:.6,offsetY:0}};var CoinProlongButton=BaseProlongButton.extend({ctor:function(e,t){this.price=e.getCoinsPrice(),this.moves=e.getAmountByCoins(),this.goldUsed=!0;var s=cleverapps.overrideStyles(cleverapps.styles.BaseProlongButton,cleverapps.styles.CoinProlongButton,!0);this._super(e,t,s)},onClicked:function(){levels.user.takeGold(this.price)&&this.addMovesOnce()},startAnimate:function(){cleverapps.UI.removeHover(this),this.setScale(0),this.runAction(new cc.Sequence(new cc.DelayTime(.4),new cc.ScaleTo(.5,1).easing(cc.easeBackOut()),
new cc.CallFunc(function(){cleverapps.UI.applyHover(this)}.bind(this))))},getButtonContent:function(){if(this.prolongation.free){var e=cleverapps.UI.generateOnlyText("messages:FREE",cleverapps.styles.FONTS.BUTTON_TEXT);return e.setVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER),e}var t=new cc.Sprite(RewardsHelper.ICONS.gold),s=cleverapps.UI.generateImageText(this.price,cleverapps.styles.FONTS.BUTTON_TEXT);return new cleverapps.Layout([t,s],{direction:cleverapps.UI.HORIZONTAL,margin:this.styles.price.margin})}});cleverapps.styles.CoinProlongButton={width:300,height:90,price:{margin:5}};var AdsProlongButton=BaseProlongButton.extend({ctor:function(e,t){this.moves=e.getAmountForAds();var s=cleverapps.overrideStyles(cleverapps.styles.BaseProlongButton,cleverapps.styles.AdsProlongButton,!0);this._super(e,t,s)},onClicked:function(){cleverapps.rewardedAdsManager.loadAndPlay(function(){cleverapps.adsLimits.watch(AdsLimits.TYPES.MOVES_FOR_VIDEO),this.addMovesOnce(),cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.MOVES_FOR_VIDEO)}.bind(this))},getButtonContent:function(){var e=new cc.Sprite(bundles.shared.frames.adicon_png);return e.setScale(.8),e}});cleverapps.styles.AdsProlongButton={};var RewardElementView=cc.Node.extend({ctor:function(e,t,s){this._super(),this.game=e.game;var n=cleverapps.styles.UI.RewardElementView;if(this.setLocalZOrder(n.zIndex),n.background){var i=n.background[cleverapps.wideMode.mode];i.image=bundles.reward_element.frames.reward_element_bg_png,this.bg=cleverapps.UI.createSprite(i),i.x&&this.bg.setPositionRound(i),this.addChild(this.bg),cleverapps.styles.COLORS.HARD&&this.game.level.isHard()&&this.bg.setColor(cleverapps.styles.COLORS.HARD)}if(this.icon=s.icon,this.icon.baseScale=n.image.scale,this.icon.setScale(this.icon.baseScale),n[s.name]&&n[s.name].icon?this.icon.setPositionRound(n[s.name].icon.x,n[s.name].icon.y):this.icon.setPositionRound(n.icon.x,n.icon.y),this.addChild(this.icon),this.text=cleverapps.UI.generateImageText(this.getText(
this.game.rewards[s.reward]||0),cleverapps.styles.FONTS.REWARD_ELEMENT_TEXT),n[s.name]&&n[s.name].color&&this.text.setColor(n[s.name].color),n.amountBg){var o=new cc.Sprite(n.amountBg.image);this.addChild(o),o.setPositionRound(n.text.x,n.text.y)}this.text.baseScale=this.text.scale,this.text.setPositionRound(n.text.x,n.text.y),this.addChild(this.text);var a=n.scale[cleverapps.wideMode.mode];this.setScale(a),this.setContentSize2(n.width,n.height),t.addChild(this);var r=n;if(r[s.name]&&r[s.name].position&&(r=r[s.name].position),r.positions)r=r.positions,Array.isArray(r)&&(r=r[cleverapps.wideMode.mode]),Array.isArray(r)&&(r=r[this.game.goals.amountGoals-1]),this.setPositionRound(r.x,r.y);else{var l=r.margin[cleverapps.wideMode.mode],c=cleverapps.UI.getSceneSize(),p="right"===l.align?c.width:"center"===l.align?c.width/2:0;this.setPositionRound(p+l.x,l.y)}var d=new cc.Node;t.addChild(d),d.setPositionRound(this.x+n.targetPosition.offset.x,this.y),d.registerTarget(
cleverapps.styles.UI.RewardElementView,s.targetName),-1!==["board","solitaire","differences"].indexOf(cleverapps.config.type)&&(cleverapps.UI.makeHideable(this,cleverapps.UI.HORIZONTAL),cleverapps.metha.registerControl(s.control,function(e){cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&e||this.toggle(e)}.bind(this)),cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(e.groupToggler.addToGroup(this,this.getGroupName()),this.hide()))},getText:function(e){return e+""},getGroupName:function(){return"rewardElements"}});RewardElementView.rotateAnimation=function(e,t){e.text.setString(e.getText(t)),0===e.icon.getRotation()&&e.icon.runAction(new cc.Sequence(new cc.Spawn(new cc.Sequence(new cc.ScaleTo(.2,1.2*e.icon.baseScale),new cc.ScaleTo(.2,e.icon.baseScale)),new cc.RotateBy(.4,360)),new cc.CallFunc(function(){e.icon.setRotation(0)}))),e.text.stopAllActions(),e.text.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.5*e.text.baseScale),new cc.ScaleTo(.2,e.text.baseScale)))},
RewardElementView.growAnimation=function(e,t){e.icon.stopAllActions(),e.icon.setScale(e.icon.baseScale),e.icon.runAction(new cc.Sequence(new cc.ScaleTo(.15,1.3*e.icon.baseScale),new cc.ScaleTo(.15,e.icon.baseScale)));var s=e.text.baseScale;e.text.stopAllActions(),e.text.setScale(s),e.text.runAction(new cc.Sequence(new cc.ScaleTo(.15,1.8*s),new cc.CallFunc(function(){e.text.setString(e.getText(t))}),new cc.ScaleTo(.15,s)))},cleverapps.overrideStyles(cleverapps.styles.FONTS,{REWARD_ELEMENT_TEXT:{name:"default",size:40}}),cleverapps.styles.UI.RewardElementView={zIndex:0,image:{scale:1.4},text:{y:0,x:0},icon:{x:0,y:0},amountBg:!1,scale:[.6,1,.7],width:100,height:100,margin:[{x:40,y:40},{x:-124,y:100,align:"right"},{x:340,y:58}],TulpanTournament:{icon:{x:0,y:26}},targetPosition:{offset:{x:0}}};var RewardGoldView=RewardElementView.extend({ctor:function(e,t){var s,n=e.game;s=cleverapps.styles.UI.RewardElementView.missionIconAnimated?new CoinMarkView(new Mark("coin"),{counter:!0}
):new cc.Sprite(bundles.menubar.frames.coin_png),this._super(e,t,{name:"gold",targetName:"rewardGoldViewTarget",icon:s,reward:GameBase.REWARD_GOLD,control:"rewardElementGold"}),n.onGoldRewardAdded=function(){this.hide&&cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&!cleverapps.styles.UI.RewardElementView.chest?e.groupToggler.show(this,this.getGroupName(),this.runCollectAnimation.bind(this)):this.runCollectAnimation()}.bind(this),cleverapps.tooltipManager.create(this.bg||this.icon,{text:"messages:RewardGoldTooltip",position:cleverapps.styles.UI.Tooltip.LOCATION.below,hideHandler:this.hideHandler})},runCollectAnimation:function(){RewardElementView.growAnimation(this,this.game.rewards[GameBase.REWARD_GOLD]),cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect)}});cleverapps.UI.GroupToggler=function(e){this.game=e,this.groups={}},cleverapps.UI.GroupToggler.prototype.addToGroup=function(e,t){this.groups[t]||(this.groups[t]=[]),this.groups[t].push(e)},
cleverapps.UI.GroupToggler.prototype.show=function(e,t,s){for(var n=0;n<this.groups[t].length;n++)this.groups[t][n]!==e&&this.groups[t][n].hide();e.showForDuration(s)};var BaseGame=function(){cleverapps.EventEmitter.call(this),this.running=!0,this.paused=!1,this.counter=new Counter};BaseGame.prototype=Object.create(cleverapps.EventEmitter.prototype),(BaseGame.prototype.constructor=BaseGame).prototype.pause=function(){this.paused=!0},BaseGame.prototype.resume=function(){this.paused=!1,this.trigger("resumed")},BaseGame.prototype.stop=function(){this.counter.turnOff()},BaseGame.prototype.getName=function(){return""},BaseGame.prototype.finish=function(e){e=e||{},this.running&&(this.running=!1,this.trigger("finish",e),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.MINIGAME_FINISH+"_"+this.getName()),cleverapps.playSession.set(cleverapps.EVENTS.MINIGAME_FINISH+"_"+this.getName(),!0))};var MissionIcon=function(e){var t=Missions[e.type].sideBarJson,s="function"==typeof t?t(e):t,n=-1!==[
Mission.TYPE_FAVORITE_SALE,Mission.TYPE_COINS_SALE].indexOf(e.type),i=void 0;e.isBattlePassMission()&&(i="battlepass"),e.isCompetitionMission()&&(i=e.name),SideBarIcon.call(this,{animation:s,lottery:n,target:i,progressIconJson:Missions[e.type].sideBarProgressIconJson}),this.priority=SideBarIcon.PRIORITY_LOW,this.mission=e};MissionIcon.prototype=Object.create(SideBarIcon.prototype),(MissionIcon.prototype.constructor=MissionIcon).prototype.resetState=function(){this.setAttention(this.isAttentionRequired());var e=this.mission.finishTime()-Date.now();0<e?(this.setLeftTime(e),this.setTitle(void 0)):(this.setLeftTime(0),this.setTitle("messages:Finished"))},MissionIcon.prototype.isAttentionRequired=function(){return this.mission.isMinigameMission()?this.mission.canPlayMinigame():this.mission.isBattlePassMission()?0<this.mission.battlePass.countAvailableRewards():this.mission.isSlotMachineMission()?0<this.mission.slotMachine.getTickets():this.mission.type===Mission.TYPE_BONUS_WORLD},
MissionIcon.prototype.getForce=function(){return this.mission.iconForce},MissionIcon.prototype.onPressed=function(){this.mission.isRunning()?cleverapps.metha.display({focus:"MissionIconClicked",action:function(e){var t=new(this.mission.getViewClass())(this.mission);t instanceof cleverapps.FixedWidthScene||t instanceof SceneProxy?cleverapps.scenes.replaceScene(t,e):cleverapps.metha.onceNoWindowsListener=e}.bind(this)}):cleverapps.missionManager.displayCompleted(this.mission)};var MissionWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.styles.MissionWindow;this.mission=e,this.content=new cc.Node,this.content.setContentSize(t.width,t.height),this.content.setAnchorPoint(.5,.5),this.onStart();var s={width:t.button.width,height:t.button.height,text:Messages.get("Play").toUpperCase(),font:cleverapps.styles.FONTS.MISSION_BUTTON_TEXT,button_png:bundles.buttons_main.frames.mission_play_button,button_on_png:bundles.buttons_main.frames.mission_play_button_on,
contentOffset:t.button.contentOffset,onPressed:function(){this.close(),cleverapps.metha.distract({focus:"MissionPlayButtonPressed",action:function(e){cleverapps.metha.wantsToPlay(e,{mission:!0})}})}.bind(this)};this.wasFinished&&(s=cleverapps.extend(s,{text:Messages.get(this.prize?"ClaimPrize.Button.text":"OK"),onPressed:this.close.bind(this)}));var n={title:{text:"messages:Missions."+e.getName()+".Title",font:cleverapps.skins.getSlot("missionWindowTitleFont")},name:" missionwindow",content:this.content,styles:cleverapps.overrideStyles(cleverapps.styles.Window,t.window,!0),button:s,help:this.wasFinished?void 0:function(){new MissionRulesWindow(e)}};this._super(n)},onStart:function(){this.contentLayout&&this.contentLayout.removeFromParent(),this.wasFinished=!this.mission.isRunning(),this.wasFinished&&(this.prize=this.mission.getPrize());var e=cleverapps.styles.MissionWindow,t=cleverapps.missionManager.table.createTableView({id:this.mission.type,data:this.mission.getResults(),
dataIcon:this.mission.getIcon(),options:e.tableHeight,rowConstructor:cleverapps.MissionRow});t.setScale(e.table.scale);var s=[cleverapps.UI.generateTTFText(this.mission.isRunning()?"messages:Missions.windowRunning":"messages:Missions.windowFinished",cleverapps.styles.FONTS.MISSION_WINDOW_STATUS_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT)],n={font:cleverapps.styles.FONTS.MISSION_WINDOW_TIMER_TEXT||cleverapps.styles.FONTS.TEXT};if(e.timer.bg){var i=cleverapps.UI.createScale9Sprite(e.timer.bg.image);i.setContentSize2(e.timer.bg),n.background_content=i}if(this.mission.isRunning()){var o=new cleverapps.CountDownView(new cleverapps.CountDown(this.mission.getTimeLeft(),{onFinish:function(){this.onFinishedSound&&"function"==typeof this.onFinishedSound&&this.onFinishedSound(!0),this.close()}.bind(this)}),n);o.setScale(e.timer.scale),s.push(o)}s.reverse();var a=new cleverapps.Layout(s,{}),r=new cc.Node;r.setContentSize(e.width,e.textAndTimerHeight),r.setAnchorPoint(.5,.5),r.setLocalZOrder(-1),
r.addChild(a),a.setPositionRound({align:"center"},{align:"center"});var l=[r],c=bundles[this.mission.getWindowBundleName()],p=new cc.Scale9Sprite(new cc.Sprite(cleverapps.styles.TableView.bg).getSpriteFrame());if(p.setContentSize2(t.width,e.animation.animationHeight),e.autoScrollText){var d;this.wasFinished&&(d=this.prize?"Win":"Lose");var u=e.text[this.mission.getName()]||"messages:Missions.CommonText";d&&(u="messages:Missions."+this.mission.getName()+".AnimationMainText"+d);var h=["messages:Missions."+this.mission.getName()+".AnimationMainTextInfo0","messages:Missions."+this.mission.getName()+".AnimationMainTextInfo1",u].filter(Messages.has),g=e.animation.animationWidth+e.contentObjectsMargin/2;this.autoScrollText=new AutoScrollText(h,{styles:{width:Math.max(e.contentObjectsMargin,t.width-g)-2*e.autoScrollText.offset.x,height:p.height-2*e.autoScrollText.offset.y,font:cleverapps.styles.FONTS.MISSIONS_TEXT,padding:e.autoScrollText.padding}}),p.addChild(this.autoScrollText),
this.autoScrollText.setPositionRound(g+(p.width-g)/2,p.height/2);var v=new cc.Node;v.setContentSize2(e.animation.animationWidth,e.animation.animationHeight),v.setAnchorPoint(0,0),v.setLocalZOrder(1);var m=new cleverapps.Spine(c.jsons.json);m.setAnimation(0,"finish",!0),m.setPosition(v.width/2,v.height/2),v.addChild(m),p.addChild(v),l.push(p)}if(l.push(t),l.reverse(),this.contentLayout=new cleverapps.Layout(l,{margin:e.contentObjectsMargin,padding:{x:0,y:1.5*e.contentObjectsMargin}}),this.content.addChild(this.contentLayout),this.contentLayout.setPositionRound(e.contentLayout),this.mission.onChangeResults=this.createListener(function(){var e=this.mission.getResults();t.updateResults(e),cleverapps.missionManager.table.updateResults(this.mission.type,e)}.bind(this)),e.titleAnimation&&bundles[this.mission.getWindowBundleName()].jsons.mission_window_json){var f=new cleverapps.Spine(bundles[this.mission.getWindowBundleName()].jsons.mission_window_json);f.setAnimation(0,"animation",!0),
this.content.addChild(f),f.setPositionRound(e.titleAnimation)}SceneDecors.add(this.content,cleverapps.skins.getSlot("missionWindowDecors"))},onFinishedSound:function(e){e&&this.mission&&!this.mission.finishTimeSoundPlayed&&cleverapps.windows.currentWindow()===this&&(this.mission.finishTimeSoundPlayed=!0,cleverapps.audio.playSound(bundles.main.urls.mission_finish_effect))},onShow:function(){this.onFinishedSound&&"function"==typeof this.onFinishedSound&&this.onFinishedSound(this.wasFinished),this.autoScrollText&&(this.autoScrollText.setTextByIndex(0),this.autoScrollText.reinitTimer()),cleverapps.audio.playSound(bundles.main.urls.window_effect)}});MissionWindow.prototype.listBundles=function(e){var t=[],s=e.getWindowBundleName();return s&&t.push(s),t},cleverapps.styles.MissionWindow={width:700,height:940,textAndTimerHeight:90,titleFont:cleverapps.styles.FONTS.WINDOW_TITLE_TEXT,timer:{font:cleverapps.styles.FONTS.TEXT,scale:.8},button:{width:260,height:100,contentOffset:{y:0}},window:{
Border:{x:36}},tableHeight:{styles:{height:449}},contentObjectsMargin:20,animation:{animationWidth:250,animationHeight:247},autoScrollText:{padding:{x:0,y:40},offset:{x:20,y:40}},table:{scale:1},contentLayout:{x:{align:"center"},y:{align:"top"}},text:{}};var MissionRulesWindow=RulesWindow.extend({onWindowLoaded:function(e){this.bundle=bundles[e.getWindowBundleName()];var t=cleverapps.styles.MissionRulesWindow;t.prefix="messages:MissionRulesWindow."+e.getName()+".",t.animation.json=cleverapps.skins.getSlot("missionRulesWindow",{bundle:this.bundle,type:e.type}),t.animation.json=t.animation.json||this.bundle.jsons.rules_json,t.animation.name="animation",this._super({name:"missionruleswindow",styles:t})},listBundles:function(e){var t=this._super(e);return t.push(e.getWindowBundleName()),t}});cleverapps.styles.MissionRulesWindow={margin:0,animation:{height:730,y:-110},subText:{width:240,left:{x:{align:"left",dx:0},y:{align:"top",dy:-250}},right:{x:{align:"right",dx:10},y:{align:"top",
dy:-250}},bottom:{x:{align:"center",dx:15},y:{align:"bottom",dy:70}}}};var MissionAnimationView=cc.Node.extend({ctor:function(e){this._super(),this.usePool=!0;var t=this.clover=new cc.Sprite(this.getIcon(e));t.setScale(cleverapps.styles.MissionAnimationView.scale),this.addChild(t),this.setLocalZOrder(100),this.setCascadeOpacityEnabled(!0),this.initialize(e)},initialize:function(e){var t=this.getFieldAlgorithm();e.victory&&(t=this.getVictoryAlgorithm()),t(this,e)},reuse:function(e){this.initialize(e)},remove:function(){this.usePool?cc.pool.putInPool(this):this.unuse()},unuse:function(){this.removeFromParent()}}),MissionAnimationGoldView=MissionAnimationView.extend({getIcon:function(){return bundles.menubar.frames.coin_png},getFieldAlgorithm:function(){return MissionAnimationView.SimpleFlyAlgorithm},getVictoryAlgorithm:function(){return MissionAnimationView.SimpleFlyAlgorithm}}),MissionAnimationCloverView=MissionAnimationView.extend({getIcon:function(){
return bundles.game.frames.fly_clover_png},getFieldAlgorithm:function(){return MissionAnimationView.SimpleFlyAlgorithm},getVictoryAlgorithm:function(){return MissionAnimationView.SimpleFlyAlgorithm}}),MissionAnimationRoseView=MissionAnimationView.extend({getIcon:function(e){return e.icon?e.icon:cleverapps.skins.getSlot("missionMarkIcon",{type:Mission.TYPE_COLLECT_MARK})},getFieldAlgorithm:function(){return MissionAnimationView.flyToAlgorithm},getVictoryAlgorithm:function(){return MissionAnimationView.SimpleFlyAlgorithm},reuse:function(e){this._super(e),this.clover.setSpriteFrame(this.getIcon(e))}}),MissionAnimationTulpanView=MissionAnimationView.extend({getIcon:function(){return cleverapps.skins.getSlot("missionIcon",{type:Mission.TYPE_BURN_NEARBY})},getFieldAlgorithm:function(){return MissionAnimationView.flyToAlgorithm},getVictoryAlgorithm:function(){return MissionAnimationView.SimpleFlyAlgorithm}}),MissionAnimationLetterView=MissionAnimationView.extend({ctor:function(e){
cc.Node.prototype.ctor.call(this);var t=this.clover=this.getIcon(e.id);t.setScale(cleverapps.styles.MissionAnimationView.scale),this.addChild(t),this.setLocalZOrder(100),this.setCascadeOpacityEnabled(!0),this.initialize(e)},reuse:function(e){this.clover.setSpriteFrame(this.getSpriteFrame(e.id))},getIcon:function(e){return new cc.Sprite(this.getSpriteFrame(e))},getSpriteFrame:function(e){var t=e%Missions[Mission.TYPE_LETTER].STAR_TYPES_AMOUNT;return cleverapps.skins.getSlot("missionStar",{type:t})},getFieldAlgorithm:function(){return MissionAnimationView.flyToAlgorithm},getVictoryAlgorithm:function(){return MissionAnimationView.SimpleFlyAlgorithm}});MissionAnimationView.flyToAlgorithm=function(e,t){var s=cleverapps.styles.MissionAnimationView,n=s.upY,i=t.beginPos,o=t.targetPos;e.setPosition(i),i.y+=n,e.setScale(t.beginScale),e.setOpacity(255);var a=cc.p(o.x,o.y+s.flyTo.second.y),r=[cc.p((i.x+a.x)/2,(i.y+a.y)/2+s.flyTo.first.y),a,o],l=Math.abs(o.x-i.x),c=Math.abs(o.y-i.y
)+s.flyTo.first.y+s.flyTo.second.y,p=Math.sqrt(l*l+c*c);p/=s.flySpeed,t.targetScale||(t.targetScale=t.beginScale),t.finalScale||(t.finalScale=t.targetScale),e.runAction(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.3,t.targetScale),new cc.MoveBy(.3,cc.p(0,n))),new cc.Spawn(new cc.ScaleTo(p,t.finalScale),new cc.BezierTo(p,r).easing(cc.easeIn(1))),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.cell_collect_effect,{throttle:20}),e.remove(),t.callback&&t.callback()})))},MissionAnimationView.SimpleFlyAlgorithm=function(e,t){var s=t.beginPos;e.setPosition(s),e.setScale(0),e.setOpacity(255);var n=cleverapps.styles.MissionAnimationView.bezierLength,i=Math.random()*n;i<n/2&&(i-=n);var o=cc.p(s.x+i,s.y-2*n),a=cc.p(o.x,o.y+n),r=[cc.p(s.x,s.y+n*(1.5+.5*Math.random())),a,o],l=.2;3<l*t.amount&&(l=3/t.amount),e.runAction(new cc.Sequence(new cc.DelayTime(t.id*l),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.boom_effect,{throttle:20})}),new cc.Spawn(
new cc.ScaleTo(.3,.8),new cc.BezierTo(2,r),new cc.RotateBy(2,i<0?-360:360),new cc.Sequence(new cc.DelayTime(1.5),new cc.FadeOut(.5))),new cc.CallFunc(function(){e.remove()})))},MissionAnimationCloverView.factory=function(e){return cc.pool.hasObject(MissionAnimationCloverView)?cc.pool.getFromPool(MissionAnimationCloverView,e):new MissionAnimationCloverView(e)},MissionAnimationRoseView.factory=function(e){return cc.pool.hasObject(MissionAnimationRoseView)?cc.pool.getFromPool(MissionAnimationRoseView,e):new MissionAnimationRoseView(e)},MissionAnimationTulpanView.factory=function(e){return cc.pool.hasObject(MissionAnimationTulpanView)?cc.pool.getFromPool(MissionAnimationTulpanView,e):new MissionAnimationTulpanView(e)},MissionAnimationLetterView.factory=function(e){return cc.pool.hasObject(MissionAnimationLetterView)?cc.pool.getFromPool(MissionAnimationLetterView,e):new MissionAnimationLetterView(e)},MissionAnimationGoldView.factory=function(e){return cc.pool.hasObject(
MissionAnimationGoldView)?cc.pool.getFromPool(MissionAnimationGoldView,e):new MissionAnimationGoldView(e)},MissionAnimationView.show=function(e,t,s){s.amount||(s.amount=1);for(var n=0;n<s.amount;n++)switch(s.id=n,e){case"gold":t.addChild(MissionAnimationGoldView.factory(s));break;case Mission.TYPE_COMBO:t.addChild(MissionAnimationCloverView.factory(s));break;case Mission.TYPE_COLLECT_MARK:t.addChild(MissionAnimationRoseView.factory(s));break;case Mission.TYPE_BURN_NEARBY:t.addChild(MissionAnimationTulpanView.factory(s));break;case Mission.TYPE_LETTER:t.addChild(MissionAnimationLetterView.factory(s))}},cleverapps.styles.MissionAnimationView={bezierLength:250,flySpeed:1500,upY:100,flyTo:{first:{y:300},second:{y:300}},scale:1};var CloversView=RewardElementView.extend({getAddedAnimation:function(e){switch(e){case Mission.TYPE_COMBO:return RewardElementView.rotateAnimation;case Mission.TYPE_COLLECT_MARK:case Mission.TYPE_BURN_NEARBY:case Mission.TYPE_LETTER:
return RewardElementView.growAnimation}},runAddedAnimation:function(){var e=this.getAddedAnimation(this.game.gameMission.type);e&&e(this,this.game.rewards[GameBase.REWARD_CLOVER]),cleverapps.audio.playSound(bundles.game.urls.tournament_element_collected)},ctor:function(e,t){var s,n=e.game,i=n.gameMission,o=cleverapps.styles.UI.RewardElementView;s=o.missionIconAnimated?new MissionMarkView(new Mark("mission"),{counter:!0}):new cc.Sprite(n.gameMission.getIcon()),this._super(e,t,{name:i.getName(),targetName:"cloversViewTarget",icon:s,reward:GameBase.REWARD_CLOVER,control:"rewardElementClover"}),cleverapps.tooltipManager.create(this.bg||this.icon,{text:"messages:CloversTooltip",position:"runes"===cleverapps.config.name?cleverapps.styles.UI.Tooltip.LOCATION.above:cleverapps.styles.UI.Tooltip.LOCATION.below,hideHandler:this.hideHandler,control:"cloversViewTooltip"}),n.onCloverAdded=function(){this.hide&&cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?e.groupToggler.show(this,
this.getGroupName(),this.runAddedAnimation.bind(this)):this.runAddedAnimation()}.bind(this),o.hideOnStart&&(this.visible=!1)}}),MainScene=cleverapps.FixedWidthScene.extend({ctor:function(){this._super(cleverapps.Environment.SCENE_MAIN),this.addToolbar(),this.addSideBar(),cleverapps.flyingAd&&this.scene.addChild(new FlyingAdView),cleverapps.environment.levelNo=levels.user.level,cleverapps.environment.episodeNo=levels.user.episode,cleverapps.placements.run(Placements.INTERMEDIATE)},getRefreshSceneActionOnChangeSize:function(){return function(e){cleverapps.metha.gotoMainScene(e)}},closeAction:function(){cleverapps.administrator?AdministratorScene.open():window.closeApplication&&window.closeApplication()},addSideBar:function(){var e=new SideBarView;e.setPositionRound(this.scene.width/2,this.scene.height/2),e.setLocalZOrder(1),this.scene.addChild(e)},addToolbar:function(){var e=this.downToolBar=new ToolbarView;this.scene.addChild(e),e.setLocalZOrder(1)}}),MethaHelper={start:function(e,t,s){
s=s||{};var n=MethaHelper.getCurrentLevel(t);0===n.episodeNo&&0===n.levelNo||!LevelStartWindow.isAvailable(n.episode.episodeNo,n.levelNo)||s.playNext&&!BoostersBefore.isAvailable()?n.play(e):cleverapps.metha.compound(e,[function(e){s.playNext&&BoostersBefore.isAvailable()?cleverapps.Plot.GameLeave(e,s):e()},function(e){t?(cleverapps.metha.showControlsWhileFocused("MenuBarGoldItem"),new BuildingStartWindow({building:t,level:n})):new LevelStartWindow({level:n}),cleverapps.metha.onceNoWindowsListener=e}])},getCurrentLevel:function(e){var t=void 0;cleverapps.metha.getType()===Metha.FARM?(t=e.label,cleverapps.playButton.disableIncLevel(),(void 0===t||t.episodeNo>=levels.episodes.getAmountEpisodes())&&(t=cleverapps.farm.chooseNextLevel(e)),e.label!==t&&(e.label=t,cleverapps.farm.save()),cleverapps.playButton.enableIncLevel()):t=cleverapps.user.getCurrentLevel(),cleverapps.isKnockoutGame()&&cleverapps.user.incLevel();var s=new Episode(t.episodeNo,t.levelNo).getLevel()
;return cleverapps.metha.getType()===Metha.FARM&&(s.building=e),s},prepare:function(){MethaHelper.prepareCharacters(),cleverapps.config.debugMode&&cleverapps.metha.getType()===Metha.FARM&&MethaHelper.validateDialogues(),cleverapps.metha.getType()===Metha.FARM&&MethaHelper.validateQuestItems()},prepareCharacters:function(){var s=cleverapps.styles.WorldMap,e=0;cleverapps.styles.WorldMap.persons.person0&&(e=1);var t=function(e,t){s.persons[e]=s.persons[e]||cleverapps.overrideStyles(cleverapps.styles.DialogueView.persons.default,{styles:{json:t.jsons[e],title:"messages:"+e}},!0)};if(cleverapps.metha.getType()===Metha.HOMEFIX){var n=bundles.homefix_windows;if(!n)return;for(var i=e;i<100;i++){var o="person"+i;if(!n.jsons[o])break;t(o,n)}}else if(cleverapps.metha.getType()===Metha.FARM)for(i=e;i<100;i++){if(!bundles[o="person"+i])break;t(o,bundles[o])}},validateQuestItems:function(){MethaHelper.readConfig().questItems.forEach(function(e,t){if(!bundles.farm_windows.frames["item"+t]
)throw"No questItem resource - "+e})},readConfig:function(){return cleverapps.metha.getType()===Metha.FARM?cleverapps.farm.readConfig():cleverapps.metha.getType()===Metha.HOMEFIX?cleverapps.home.readConfig():void 0},validateDialogues:function(){cleverapps.values(this.readConfig().dialogues).forEach(function(e){e.forEach(function(e){if("string"==typeof e.person&&!cleverapps.styles.WorldMap.persons[e.person])throw"No person: "+e.person})})},allIsComplete:function(e){cleverapps.metha.compound(e,[function(e){var t=MethaHelper.createDialogue("Final");t.on("afterClose",e),new DialogueView(t,{overlay:!0}),t.run()},function(e){new AllDoneWindow,cleverapps.metha.onceNoWindowsListener=e}])},createDialogue:function(e){var t=this.readConfig().dialogues[e];if(t){var s=[],n=[];return t.forEach(function(e){var t={text:"messages:"+e.text,person:{animation:e.animation||cleverapps.styles.WorldMap.personsAnimation,position:e.position||"left",styles:cleverapps.styles.WorldMap.persons[e.person].styles}}
;e.person2&&(t.person2={animation:e.person2.animation||cleverapps.styles.WorldMap.personsAnimation,position:e.person2.position||"left",styles:cleverapps.styles.WorldMap.persons[e.person2.person].styles}),n.push(t),cleverapps.metha.getType()===Metha.FARM&&(s.push(e.person),e.person2&&e.person2.person&&s.push(e.person2.person))}),new Dialogue(n,{autoClose:!0,showUp:!0,bundles:s})}}},options={ctor:function(){var e;switch(this._super(cleverapps.Environment.SCENE_METHA),cleverapps.metha.getType()){case Metha.FARM:e=cleverapps.farm;break;case Metha.HOMEFIX:e=cleverapps.home}switch(this.map=new WorldMap(e),this.map.setPositionRound(this.scene.width/2,this.scene.height/2),this.map.setLocalZOrder(-1),this.scene.addChild(this.map),this.addPlayButton(),cleverapps.metha.getType()){case Metha.FARM:this.controller=new FarmController(this.map);break;case Metha.HOMEFIX:this.controller=new HomeController(this.map),this.addTasksIcon(),this.map.animateNewTask=this.createListener(this.animateNewTask.bind(
this)),this.createFinger()}-1!==[Metha.FARM,Metha.HOMEFIX].indexOf(cleverapps.metha.getType())&&this.runAction(new cc.RepeatForever(new cc.Sequence(new cc.DelayTime(5),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.main.urls.city_loop_effect)}),new cc.DelayTime(5))))},getRefreshSceneActionOnChangeSize:function(){return function(e){cleverapps.metha.withSimpleMain()?cleverapps.scenes.replaceScene(new NoMainMethaScene,e):cleverapps.metha.gotoMainScene(e)}},onExit:function(){this._super(),this.controller.clear()},addPlayButton:function(){this.playButton=new PlayButtonView({isSmall:"wordsoup"===cleverapps.config.name,hard:"heroes"!==cleverapps.config.name}),this.scene.addChild(this.playButton)},addTasksIcon:function(){this.tasksIcon=new HomeTasksIcon(this.scene),this.scene.addChild(this.tasksIcon)},setFinger:function(){var e=cleverapps.home.getFurnitureToUpgrade()?this.tasksIcon.hideHandler.originalPosition:this.playButton.hideHandler.originalPosition
;this.finger.setPositionRound(e)},createFinger:function(){var e=this.finger=new FingerView({control:"homefix_finger"});this.scene.addChild(e,1),cleverapps.styles.MethaScene.finger.scale&&e.setScale(cleverapps.styles.MethaScene.finger.scale),e.standardLoop(),cleverapps.metha.registerControl("finger_position_update",this.tasksIcon.createListener(function(){this.setFinger()}.bind(this)))},animateNewTask:function(e){var t=new NewTaskAnimation(e,this);this.scene.addChild(t),t.setPositionRound(cleverapps.styles.MethaScene.newTask)},displayIntro:function(e){this.controller.displayIntro(e)},getBackgroundStyles:function(){}},MethaScene=MainScene.extend(options),NoMainMethaScene=cleverapps.FixedWidthScene.extend(options);MethaScene.BUNDLES=NoMainMethaScene.BUNDLES=function(){var e=["homefix","world_map","dialogues","main"];switch(cleverapps.metha.getType()){case Metha.FARM:e.push("farm_windows");break;case Metha.HOMEFIX:e.push("homefix_windows")}for(var t=0;bundles["metha_top_layer_"+t];t++
)e.push("metha_top_layer_"+t);for(var s=0;bundles["metha_bottom_layer_"+s];s++)e.push("metha_bottom_layer_"+s);return e},cleverapps.styles.MethaScene={newTask:{x:{align:"right",dx:-50},y:{align:"top",dy:-50}}};var MethaSimpleMainScene=MainScene.extend({ctor:function(){this._super(),this.addPersons(),this.addPlayButton()},addPersons:function(){var e=cleverapps.styles.MethaSimpleMainScene.persons;if(e)for(var t in e){var s=e[t],n=new cleverapps.Spine(s.json);n.setAnimation(0,"animation",!0),n.setPositionRound(s),this.scene.addChild(n)}},getBackgroundStyles:function(){return cleverapps.styles.MethaSimpleMainScene.background},addPlayButton:function(){var e=new PlayButtonView({styles:cleverapps.styles.MethaSimpleMainScene.PlayButton});this.scene.addChild(e),e.addFingerTip()}});MethaSimpleMainScene.BUNDLES=function(){return["metha_simple_main","main"]},cleverapps.styles.MethaSimpleMainScene={PlayButton:{width:300,height:100,x:{align:"center"},y:{align:"bottom",dy:150},text:{paddingX:20},
button:{button_png:bundles.buttons.frames.green_button_png,button_on_png:bundles.buttons.frames.green_button_on_png,x:{align:"center"},y:{align:"center"}}},background:{background:bundles.metha_simple_main.urls.background}};var PlayButtonView=cc.Node.extend({ctor:function(e){this._super(),this.options=e||{},this.styles=this.options.styles?this.options.styles:cleverapps.styles.PlayButtonView,this.isSmall=this.options.isSmall,this.noLevelNumber=cleverapps.metha.getType()===Metha.KNOCKOUT||cleverapps.metha.getType()===Metha.HOSE&&cleverapps.user.isPassedAll(),this.setAnchorPoint2(),this.setContentSize2(this.styles),this.setPositionRound(this.calcPosition()),cleverapps.UI.makeHideable(this,cleverapps.UI.VERTICAL),cleverapps.metha.registerControl("play_button",this),cleverapps.playButton.on("update",this.update.bind(this),this),cleverapps.playButton.on("animatePassLevel",this.animatePassLevel.bind(this),this),this.update()},update:function(){this.styling=this.getStyling(),this.createButton()
,this.createAnimation(),this.styles.button||(cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,function(){cleverapps.playButton.onClick()}))},calcPosition:function(){var e=this.styles;return e.noToolBarPosition&&cleverapps.metha.withSimpleMain()&&(e=e.noToolBarPosition),e=e.positions?e.positions[cleverapps.wideMode.mode]:e,(e=cc.p(cleverapps.clone(e.x),cleverapps.clone(e.y))).y.dy-=cleverapps.UI.getSceneOffsetY(),e},animatePassLevel:function(){if(this.button&&this.button.stopAllActions(),this.stopAllActions(),this.show(!0),!this.isSmall&&!this.noLevelNumber){var e=new cleverapps.Spine(bundles.main.jsons.play_button_transition_json);this.addChild(e),e.setPositionRound(this.width/2,this.height/2),e.runAction(new cc.Sequence(new cc.DelayTime(.6),new cc.CallFunc(function(){e.setAnimation(0,"animation",!1),e.setCompleteListenerRemove()})))}this.runAction(new cc.Sequence(this.listAnimationActions()))},listAnimationActions:function(){if(this.noLevelNumber)return[new cc.DelayTime(1.1),
new cc.CallFunc(this.updateTextAndButton.bind(this)),new cc.CallFunc(this.onPassLevelAnimationFinished.bind(this))];var e=this.scale;return[new cc.DelayTime(1.1),new cc.ScaleTo(.15,1.3*e),new cc.CallFunc(this.updateTextAndButton.bind(this)),new cc.PlaySound(bundles.main.urls.play_button_effect),new cc.ScaleTo(.2,e),new cc.CallFunc(this.onPassLevelAnimationFinished.bind(this))]},updateTextAndButton:function(){this.styling=this.getStyling(),this.text.setFontSize(this.getFont().size),this.text.setString(this.getTextMsg()),this.text.fitTo(this.styles.width-2*this.styles.text.paddingX,this.styles.height-2*this.styles.text.paddingY),this.animation?this.animation.setAnimation(0,this.styling.animation,!0):(this.button.setBackgroundImage(this.styling.button_png),this.button.setBackgroundImagePressed(this.styling.button_on_png))},onPassLevelAnimationFinished:function(){},addFingerTip:function(){var e=new FingerView({control:"playbutton_finger",showDelay:.5});e.setLocalZOrder(14),this.getParent(
).fingerTip=e,this.getParent().addChild(e),e.setPositionRound(this.hideHandler.originalPosition),e.standardLoop({delay:5,delayOnBegin:.1})},createAnimation:function(){if(this.styles.animation){this.animation&&this.animation.removeFromParent();var e=this.animation=new cleverapps.Spine(bundles.main.jsons.play_button_json);e.setAnimation(0,this.styling.animation,!0),this.addChild(e),e.setPositionRound(this.width/2,this.height/2),this.styles.button||(this.text=this.createText(),this.text.setPositionRound(this.width/2,this.height/2),this.addChild(this.text))}},createButton:function(){if(this.styles.button){this.button&&this.button.removeFromParent(),this.text=this.createText();var e={width:this.styles.width,height:this.styles.height,contentOffset:this.styles.button.contentOffset,content:this.text,fitTo:!1,button_png:this.styling.button_png,button_on_png:this.styling.button_on_png,onClicked:function(){cleverapps.playButton.onClick()}},t=this.button=new cleverapps.UI.Button(e);this.addChild(t
),t.setPositionRound(this.styles.button)}},getTextMsg:function(){var e=cleverapps.playButton.getLevelNo(),t=this.getDisplayedLevel(),s=this.noLevelNumber?"messages:Play":"messages:PlayButton.text";return t.isHard()&&!1!==this.options.hard&&(s="messages:message.hardLevel"),t.isTricky()&&(s="messages:message.trickyLevel"),this.isSmall&&(s=e),Messages.getLocalized(s,{levelNo:e})},getDisplayedLevel:function(){return cleverapps.playButton.passedLevel&&cleverapps.playButton.previousLevel?cleverapps.playButton.previousLevel:cleverapps.playButton.currentLevel},getStyling:function(){var e=this.getDisplayedLevel();return this.styles.animation?{animation:e.isHard()&&this.styles.animation.customHard?"hard":"animation"}:e.isHard()?{button_png:this.styles.button.hardLvl&&this.styles.button.hardLvl.button_png||this.styles.button.button_png||bundles.buttons.frames.window_button_png,
button_on_png:this.styles.button.hardLvl&&this.styles.button.hardLvl.button_on_png||this.styles.button.button_on_png||bundles.buttons.frames.window_button_on_png}:e.isTricky()?{button_png:bundles.buttons_main.frames.play_button_tricky_png,button_on_png:bundles.buttons_main.frames.play_button_tricky_on_png}:{button_png:this.styles.button.button_png||bundles.buttons.frames.window_button_png,button_on_png:this.styles.button.button_on_png||bundles.buttons.frames.window_button_on_png}},getFont:function(){if(this.isSmall)return cleverapps.styles.FONTS.SMALL_PLAY_BUTTON_TEXT;var e=this.getDisplayedLevel();return e.isHard()&&cleverapps.styles.FONTS.PLAY_BUTTON_TEXT_HARD?cleverapps.styles.FONTS.PLAY_BUTTON_TEXT_HARD:e.isTricky()&&cleverapps.styles.FONTS.PLAY_BUTTON_TEXT_TRICKY?cleverapps.styles.FONTS.PLAY_BUTTON_TEXT_TRICKY:cleverapps.styles.FONTS.PLAY_BUTTON_TEXT},createText:function(){var e=cleverapps.UI.generateTTFText(this.getTextMsg(),this.getFont());return e.fitTo(
this.styles.width-2*this.styles.text.paddingX,this.styles.height-2*this.styles.text.paddingY),e}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{PLAY_BUTTON_TEXT:{size:70,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SMALL_PLAY_BUTTON_TEXT:{}}),cleverapps.styles.PlayButtonView={width:300,height:100,x:{align:"center"},y:{align:"bottom",dy:150},text:{paddingX:30,paddingY:0},button:{x:{align:"center"},y:{align:"center"}}};var PlayButton=function(){cleverapps.EventEmitter.call(this),cleverapps.user.on("incLevel",this.onIncLevel.bind(this)),levels.episodes.onResetListener=this.update.bind(this),this.update()};PlayButton.prototype=Object.create(cleverapps.EventEmitter.prototype),(PlayButton.prototype.constructor=PlayButton).prototype.onIncLevel=function(){this.incLevelDisabled||(this.passedLevel=!0,this.update())},PlayButton.prototype.enableIncLevel=function(){delete this.incLevelDisabled},PlayButton.prototype.disableIncLevel=function(){
this.incLevelDisabled=!0},PlayButton.prototype.getLevelNo=function(){var e=cleverapps.user.getVirtualDisplayLevel();return this.passedLevel&&e--,e},PlayButton.prototype.update=function(){if(PlayButton.IsAvailable()){var e=cleverapps.user.getCurrentLevel();this.currentLevel&&this.currentLevel.episodeNo===e.episodeNo&&this.currentLevel.levelNo===e.levelNo||(this.currentLevel&&(this.previousLevel=this.currentLevel),this.currentLevel=new Episode(e.episodeNo,e.levelNo).getLevel(),this.trigger("update"))}},PlayButton.prototype.onClick=function(){cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),cleverapps.metha.display({focus:"PlayButton_scene",action:function(e){cleverapps.metha.wantsToPlay(e)}})},PlayButton.prototype.animatePassLevel=function(){this.passedLevel=!1,this.trigger("animatePassLevel")},PlayButton.IsAvailable=function(){return cleverapps.metha.getType()!==Metha.NONE};var AllDoneWindow=Window.extend({onWindowLoaded:function(){this._super({
title:"messages:AllDoneWindow.title",name:"alldonewindow",content:this.getContent(),button:{width:cleverapps.styles.AllDoneWindow.button.width,height:cleverapps.styles.AllDoneWindow.button.height,text:Messages.get("Play"),onPressed:function(){this.close(),cleverapps.metha.distract({focus:"PlayButton",action:function(e){cleverapps.metha.wantsToPlay(e)}.bind(this)})}.bind(this)}})},getContent:function(){return new cleverapps.Layout([this.getText(),this.getAnimation()],{direction:cleverapps.UI.VERTICAL,margin:cleverapps.styles.AllDoneWindow.margin,padding:cleverapps.styles.AllDoneWindow.padding})},getText:function(){var e=cleverapps.UI.generateTTFText("messages:AllDoneWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT);return e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.setDimensions(cleverapps.styles.AllDoneWindow.text.width,0),e},getAnimation:function(){var e=cleverapps.styles.AllDoneWindow.animation,t=new cleverapps.Spine(e.json);return t.setAnimation(0,e.animationName,!0),t},
listBundles:function(){return["episode_coming_soon"]}});cleverapps.styles.AllDoneWindow={margin:20,padding:{bottom:50},text:{width:550},button:{width:300,height:100},animation:{animationName:"animation",json:bundles.episode_coming_soon.jsons.spine_0_json}};var WorldMap=MapScrollView.extend({ctor:function(e){this._super();var t,s,n=cc.director.getWinSize();if(this.setContentSize2(n),this.setAnchorPoint2(),s={width:(t=cc.loader.getRes(bundles.world_map.jsons.mapData)).map.width*resolutionScale,height:t.map.height*resolutionScale},this.setContainerSize(s),bundles.world_map.urls.map){var i=new cc.Sprite(bundles.world_map.urls.map);i.setScale(s.width/i.width),i.setPositionRound(this.innerWidth/2,this.innerHeight/2),this.container.addChild(i)}this.addBgs(t),this.buildingViews={},this.setZoom(cleverapps.styles.WorldMap.zoom.unfocused),this.onEnterStart=function(){},this.animateNewTask=function(){}},addBgs:function(e){for(var t=0;t<=30;t++){var s;if(cleverapps.metha.getType(
)===Metha.FARM?s=bundles.metha_top_layer_0.jsons["map_json"+t]:cleverapps.metha.getType()===Metha.HOMEFIX&&(s=bundles.world_map.jsons["map_json"+t]||bundles.world_map_nodither.jsons["map_json"+t]),s){var n=new cleverapps.Spine(s,1);if(n.setAnimation(0,"animation",!0),e["map_json"+t]){var i=e["map_json"+t],o=new cc.Node;o.setAnchorPoint2(),o.setContentSize2(i.width*resolutionScale,i.height*resolutionScale),n.setPosition(o.width/2,o.height/2),o.addChild(n),o.setPosition(this.innerWidth/2+i.x*resolutionScale,this.innerHeight/2+i.y*resolutionScale),this.container.addChild(o,i.zOrder)}else n.setPosition(this.innerWidth/2,this.innerHeight/2),this.container.addChild(n)}}},highlight:function(e){e.addHighlight()},unhighlight:function(e){e.removeHighlight()},onEnter:function(){this._super(),cleverapps.config.debugMode&&cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e){if(e===cc.KEY.b&&!this.bordered)for(var t in this.bordered=!0,this.buildingViews){
this.buildingViews[t].debugBorder();var s=this.buildingViews[t].building.id,n=this.buildingViews[t].building.amountStages();if(cleverapps.home)for(var i=0;i<cleverapps.home.furniture.length;i++)if(cleverapps.home.furniture[i].id===this.buildingViews[t].building.id){s=i;break}var o=cleverapps.UI.generateImageText(s,cleverapps.styles.FONTS.BIG_TEXT),a=cleverapps.UI.generateOnlyText("Stages: "+n,cleverapps.styles.FONTS.TEXT),r=new cleverapps.Layout([a,o],{direction:cleverapps.UI.VERTICAL,margin:0});this.buildingViews[t].addChild(r,10),r.setPositionRound(this.buildingViews[t].width/2,this.buildingViews[t].height/2),r.replaceParentSamePlace(this.buildingViews[t].parent),this.buildingViews[t].idView=r}}.bind(this),onKeyReleased:function(e){if(e===cc.KEY.b)for(var t in this.bordered=!1,this.buildingViews)this.buildingViews[t].cleanupBorder(),this.buildingViews[t].idView.removeFromParent()}.bind(this)},this),this.onEnterStart()},availableScrollPosition:function(e){var t=this.getContainerSize()
,s=t.width-this.width,n=t.height-this.height;return 0<e.x?e.x=0:e.x<-s&&(e.x=-s),0<e.y?e.y=0:e.y<-n&&(e.y=-n),e},scrollTo:function(e,t,s){if(e){t||cleverapps.metha.isFocused()||(console.log("Scroll:",e),cleverapps.metha.debugMessage("Trying to scroll without user focus!"));var n=cleverapps.metha.focus,i=this.buildingViews[e.name].getPosition(),o={x:this.width/2-i.x,y:this.height/2-i.y};if(o=this.availableScrollPosition(o),t)this.setContainerPosition({x:o.x,y:o.y}),s&&s();else{var a=this.getContainerPosition();a.x-=o.x,a.y-=o.y;var r=Math.sqrt(a.x*a.x+a.y*a.y)/1300;r=Math.min(.7,Math.max(.3,r)),this.container.stopAllActions(),this.container.runAction(new cc.Spawn(new cc.MoveTo(r,o.x,o.y).easing(new cc.easeInOut(2.5)),new cc.Repeat(new cc.Sequence(new cc.DelayTime(.025),new cc.CallFunc(this.updateChildren.bind(this))),Math.ceil(r/.025))));var l=new Error;this.runAction(new cc.Sequence(new cc.DelayTime(.45*r||.5),new cc.CallFunc(function(){cleverapps.metha.isFocused(
)&&cleverapps.metha.focus===n||(console.log("Scroll:",e,n,cleverapps.metha.focus),cleverapps.throwAsync("Trying to scroll without user focus! Focus: "+cleverapps.metha.focus+" StartFocus: "+n,l)),s&&s()}.bind(this))))}}},showBuildings:function(n){var s=[];n.forEach(function(e,t){e.isComplete()&&e.throwaway||s.push(t)}),s.sort(function(e,t){return n[t].y-n[e].y}.bind(this)),s.forEach(function(e){var t=n[e],s=new BuildingView(t,this);this.buildingViews[t.name]=s,this.container.addChild(s)},this)},removeBuilding:function(e){var t=this.buildingViews[e.name];t&&(t.runAction(new cc.RemoveSelf),delete this.buildingViews[e.name])},removeTarget:function(){this.finger&&(this.finger.removeFromParent(),delete this.finger)},addTarget:function(e){this.removeTarget();var t=this.finger=new FingerView({control:"world_map_finger"});this.container.addChild(t),t.standardLoop();var s=this.buildingViews[e.name].getPosition();t.setPositionRound(s)},findClickedBuilding:function(e){var t;for(
var s in this.buildingViews){var n=this.buildingViews[s];n.building.canTouch()&&((!t||t.getLocalZOrder()<=n.getLocalZOrder())&&cc.rectContainsPoint(cc.rect(0,0,n.width,n.height),n.convertTouchToNodeSpace(e))&&(t=n))}return t},onTouchBegan:function(e){if(this._super(e))return this.clickedBuilding=this.findClickedBuilding(e),!0},onTouchMoved:function(e){this._super(e),cc.pLength(cc.pSub(e.getStartLocation(),e.getPreviousLocation()))>cleverapps.styles.UI.onClick.ignoreOnTouchMovedThreshold&&delete this.clickedBuilding},onTouchEnded:function(e){this._super(e),this.clickedBuilding&&!this.pinchZooming&&(this.scrollHandler.stopAutoScroll(),this.clickedBuilding.building.onClick()),delete this.clickedBuilding}});cleverapps.styles.WorldMap={personsAnimation:"animation",persons:{},zoom:{base:1,unfocused:.7,minScale:.5}};var MissionGame=function(e){this.mission=e,BaseGame.call(this)};MissionGame.prototype=Object.create(BaseGame.prototype),(MissionGame.prototype.constructor=MissionGame
).prototype.finish=function(){this.running&&0<this.reward&&this.mission.update(this.reward),BaseGame.prototype.finish.apply(this,arguments)};var TreasureSearchWindow=Window.extend({onWindowLoaded:function(e){this.bundle=bundles[e.getWindowBundleName()],this.game=new TreasureSearch(e),this.game.on("open",this.open.bind(this)),this.game.on("prize",this.prize.bind(this)),this.game.on("finish",this.finish.bind(this)),this.generateContent();var t=cleverapps.styles.TreasureSearchWindow,s={title:"messages:TreasureSearchWindow.Title",name:"treasuresearchwindow",content:this.content,closeButton:t.closeButton,styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.TreasureSearchWindow.window,!0),help:this.onClickHelp.bind(this)};t.button&&(s.button={width:t.button.width,text:Messages.get(t.button.text),onPressed:this.close.bind(this)}),this._super(s),this.controls(),e.isRunning()&&(this.timer=new cleverapps.CountDown(e.getTimeLeft(),{onFinish:function(){this.close()}.bind(
this)})),this.game.isFinished()&&this.game.finish({silent:!0}),e.needShowStartWindow=!1,cleverapps.audio.playSound(bundles.main.urls.treasure_search_effect)},onExit:function(){this._super(),this.timer&&this.timer.stop()},controls:function(){cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchBegan.bind(this),onTouchEnded:this.onTouchEnded.bind(this)},this.fieldNode),cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:this.onMouseMove.bind(this)},this.fieldNode)},calculateIndex:function(e){var t=this.fieldNode.convertTouchToNodeSpace(e),s=cc.rect(0,0,this.fieldNode.width,this.fieldNode.height);if(cc.rectContainsPoint(s,t)){var n=cleverapps.styles.TreasureSearchWindow.game.cell,i=Math.floor(t.x/n.width),o=Math.floor(t.y/n.height);return{row:Math.max(Math.min(o,TreasureSearch.HEIGHT-1),0),col:Math.max(Math.min(i,TreasureSearch.WIDTH-1),0)}}},onTouchBegan:function(e){return!(!this.game.running||this.game.paused
)&&void 0!==this.calculateIndex(e)},onTouchEnded:function(e){if(this.game.running&&!this.game.paused){var t=this.calculateIndex(e);t&&this.onFieldClick(t.col,t.row)}},getPositionInContent:function(e){return this.content.convertToNodeSpace(e.getParent().convertToWorldSpace(e.getPosition()))},processPointer:function(){var e=this.field[this.index.row][this.index.col];this.pointer||this.createPointer(e),this.pointer.setPositionRound(this.getPositionInContent(e)),this.pointer.setVisible(!0),this.pointer.updateState(e)},createPointer:function(e){var t=cleverapps.styles.TreasureSearchWindow;if(t.pointerJson){this.pointer=new cc.Node,this.pointer.setAnchorPoint2(),this.pointer.setContentSize2(e.cover.getContentSize());var s=new cleverapps.Spine(t.pointerJson);this.pointer.addChild(s),s.setPositionRound(this.pointer.width/2,this.pointer.height/2),this.pointer.updateState=function(){s.setAnimation(0,"animation",!1),cleverapps.audio.playSound(this.bundle.urls.shot_sfx)}.bind(this)}else{
this.pointer=new cc.Sprite(e.cover.getSpriteFrame()),this.pointer.setScale(this.fieldNode.scale);var n=new cc.Sprite(this.bundle.frames.cross);n.setPosition(this.pointer.width/2,this.pointer.height/2),this.pointer.addChild(n);var i=new cc.Sprite(this.bundle.frames.hover_bottom);i.setPosition(this.pointer.width/2,this.pointer.height/2),this.pointer.addChild(i,-1),i.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.7,1.04),new cc.ScaleTo(.8,.95).easing(cc.easeInOut(1))))),this.pointer.updateState=function(e){this.pointer.setSpriteFrame(e.cover.getSpriteFrame())}.bind(this)}this.pointer.setLocalZOrder(21),this.content.addChild(this.pointer)},onMouseMove:function(e){if(this.game.running&&!this.game.paused){var t=this.calculateIndex(e);t&&this.game.hasElement(t.col,t.row)?void 0!==this.index&&100*t.row+t.col===100*this.index.row+this.index.col||(this.index=t,this.processPointer()):(this.pointer&&this.pointer.setVisible(!1),this.index=void 0)}},generateContent:function(){
var e=cleverapps.styles.TreasureSearchWindow.content,t=this.createGame(),s=this.text=cleverapps.UI.generateTTFText("messages:TreasureSearchWindow.text",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);if(s.setDimensions(t.width*e.text.widthMultiplier[cleverapps.wideMode.mode],0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.content=new cleverapps.Layout([s,t],{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding}),e.successAnimation){var n=this.succesAnimation=new cleverapps.Spine(this.bundle.jsons.chest),i=this.content.convertToNodeSpace(this.fieldNode.getParent().convertToWorldSpace(this.fieldNode.getPosition()));n.setPosition(i),n.setVisible(!1),n.setLocalZOrder(22),this.content.addChild(n)}},createGame:function(){var e=cleverapps.styles.TreasureSearchWindow,t=this.fieldNode=this.createField(),s=this.infoNode=this.createGameInfo();return new cleverapps.Layout([t,s],{direction:cleverapps.UI.VERTICAL,margin:e.game.margin})},createField:function(){this.field=[];for(
var e=0;e<TreasureSearch.HEIGHT;e++){for(var t=[],s=0;s<TreasureSearch.WIDTH;s++){var n=this.createCell();t.push(n),this.game.hasElement(s,e)?this.createActiveCellContent(s,e,n):this.createOpenedCellContent(s,e,n,!0)}this.field.push(t)}var i=this.field.map(function(e){return new cleverapps.Layout(e,{direction:cleverapps.UI.HORIZONTAL})}),o=this.fieldNode=new cleverapps.Layout(i,{direction:cleverapps.UI.VERTICAL});if(this.bundle.frames.map){var a=new cc.Sprite(this.bundle.frames.map);a.setPosition(o.width/2,o.height/2),a.setLocalZOrder(-1),o.addChild(a),o.setScale(cleverapps.styles.TreasureSearchWindow.game.field.scale[cleverapps.wideMode.mode])}return o},createCell:function(){var e=new cc.Node;return e.setAnchorPoint2(),e.setContentSize2(cleverapps.styles.TreasureSearchWindow.game.cell),e},createActiveCellContent:function(e,t,s){var n=s.cover=new cc.Sprite(this.bundle.frames["cover_"+(TreasureSearch.WIDTH*t+e)]);n.setPosition(s.width/2,s.height/2),s.addChild(n)},
createOpenedCellContent:function(e,t,s,n){if(this.game.gemWasThere(e,t)){var i=new cc.Sprite(this.bundle.frames.cross);i.setPosition(s.width/2,s.height/2),s.addChild(i),n||(i.setScale(0),i.runAction(new cc.Sequence(new cc.DelayTime(1),new cc.ScaleTo(.4,1).easing(cc.easeBackOut()))))}},onFieldClick:function(e,t){this.game.mission.currency>=this.game.mission.getMinigamePrice()?this.game.hasElement(e,t)&&(this.game.open(e,t),cleverapps.audio.playSound(bundles.main.urls.treasure_search_open_effect)):(this.field[t][e].setScale(1),new TellWindow({type:"notEnoughElements",text:"messages:TreasureSearchWindow.Currency.Text",title:"messages:TreasureSearchWindow.Currency.Title",buttonText:Messages.get("Play"),onPressed:function(){this.close(),cleverapps.metha.distract({focus:"TreasurePlayButtonPressed",action:function(e){cleverapps.metha.wantsToPlay(e,{mission:!0})}})}.bind(this)}))},onClickHelp:function(){var e=cleverapps.styles.TreasureSearchWindow.rulesWindow
;e.animation.json=bundles.treasuresearch.jsons.help,new RulesWindow({name:"ruleswindow",styles:e})},createGameInfo:function(){var e=cleverapps.styles.TreasureSearchWindow.game.infoNode,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e.chest),this.chest=new cleverapps.Spine(this.bundle.jsons.chest),this.chest.setAnimation(0,"idle_"+this.game.mission.result,!0),t.addChild(this.chest),this.chest.setPositionRound(t.width/2,t.height/2+e.chest.offsetY);var s=new cc.Node;s.setAnchorPoint2(),s.setPositionRound(t.width/2,t.height/2),s.setContentSize2(e.tooltip),t.addChild(s),cleverapps.tooltipManager.create(s,{rewards:this.game.getReward(),text:Messages.get("TreasureSearch.prizeTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.above});var n=this.amountText=cleverapps.UI.generateImageText(this.game.mission.currency,cleverapps.styles.FONTS.SHOVEL_FONT);n.setPositionRound(e.shovelCount),t.addChild(n);var i=new cc.Sprite(this.bundle.frames.shovel);return i.setPositionRound(e.shovel),
t.addChild(i),cleverapps.tooltipManager.create(i,{text:Messages.get("ShovelsTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.below}),t},open:function(e){var t=this.field[e.row][e.col];this.pointer&&this.pointer.setVisible(!1),t.runAction(new cc.Sequence(new cc.CallFunc(function(){var e=this.clouds=new cleverapps.Spine(this.bundle.jsons.clouds);e.setLocalZOrder(21),this.content.addChild(e),e.setCompleteListener(function(){e.runAction(new cc.RemoveSelf)}.bind(this)),e.setAnimation(0,"animation",!1),e.setPosition(this.getPositionInContent(t))}.bind(this)),new cc.DelayTime(.05),new cc.CallFunc(function(){t.cover&&t.cover.setVisible(!1)}))),this.amountText.setString(this.game.mission.currency)},prize:function(e){var t=this.field[e.row][e.col];this.createOpenedCellContent(e.col,e.row,t),this.runAction(new cc.Spawn(new cc.Sequence(new cc.DelayTime(.5),new cc.CallFunc(function(){this.succesAnimation&&(this.succesAnimation.setCompleteListener(function(){
this.succesAnimation.setCompleteListener(function(){}),this.succesAnimation.setVisible(!1)}.bind(this)),this.succesAnimation.setAnimation(0,cleverapps.styles.TreasureSearchWindow.content.successAnimation,!1),this.succesAnimation.setVisible(!0)),cleverapps.audio.playSound(bundles.main.urls.treasure_search_found_effect)}.bind(this))),new cc.Sequence(new cc.DelayTime(1.65),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.main.urls.treasure_search_part_effect),this.chest.setAnimation(0,"animation_"+this.game.mission.result,!1),this.chest.addAnimation(0,"idle_"+this.game.mission.result,!0)}.bind(this)),new cc.DelayTime(1.5),new cc.CallFunc(function(){this.game.isFinished()&&cleverapps.audio.playSound(bundles.main.urls.treasure_search_prize_effect)}.bind(this)))))},finish:function(e){this.runAction(new cc.Sequence(new cc.DelayTime(e&&e.silent?.1:3.6),new cc.CallFunc(function(){this.close()}.bind(this))))},onClose:function(){this.game.checkIfComplete()}})
;TreasureSearchWindow.prototype.listBundles=function(){return["treasuresearch"]},cleverapps.overrideFonts(cleverapps.styles.FONTS,{SHOVEL_FONT:{name:"default",size:40}}),cleverapps.styles.TreasureSearchWindow={content:{margin:10,padding:{x:0,y:45},text:{widthMultiplier:[.8,.9,.9]},successAnimation:"key"},game:{margin:0,cell:{width:116,height:96},field:{scale:[1.2,1.15,1.15]},infoNode:{shovelCount:{x:{align:"center",dx:285},y:{align:"center",dy:12}},shovel:{x:{align:"center",dx:240},y:{align:"center",dy:26}},chest:{width:570,height:285,offsetY:0},tooltip:{width:300,height:180}}},rulesWindow:{prefix:"messages:TreasureSearchWindow.Help.",bundles:["treasuresearch"],animation:{height:630,y:-145},subText:{width:220,left:{x:{align:"left",dx:0},y:{align:"top",dy:-245}},right:{x:{align:"right",dx:10},y:{align:"top",dy:-245}}}},window:{contentOffset:-30,Title:{bg:{adjustToText:{width:50}}},Border:{y:50}}};var TreasureSearch=function(e){MissionGame.call(this,e),this.width=TreasureSearch.WIDTH,
this.height=TreasureSearch.HEIGHT,this.field=e.details&&e.details.field,this.field||this.createField()};TreasureSearch.prototype=Object.create(MissionGame.prototype),(TreasureSearch.prototype.constructor=TreasureSearch).prototype.createField=function(){for(var e=[];e.length<TreasureSearch.GEMS;){var t=cleverapps.Random.random(0,19);-1===e.indexOf(t)&&e.push(t)}this.field=[];for(var s=0;s<TreasureSearch.HEIGHT;s++){this.field[s]=[];for(var n=0;n<TreasureSearch.WIDTH;n++){var i=TreasureSearch.ELEMENT_EMPTY;-1!==e.indexOf(s*TreasureSearch.WIDTH+n)&&(i=TreasureSearch.ELEMENT_GEM),this.field[s][n]=i}}this.mission.details={field:this.field}},TreasureSearch.prototype.open=function(e,t){if(this.hasElement(e,t)){var s=this.field[t][e];this.field[t][e]=TreasureSearch.ELEMENT_GEM===s?TreasureSearch.ELEMENT_FOUND:TreasureSearch.ELEMENT_OPENED,this.mission.updateCurrency(-this.mission.getMinigamePrice(),{field:this.field});var n={row:t,col:e};this.trigger("open",n),this.pause();var i=1e3
;TreasureSearch.ELEMENT_GEM===s&&(this.mission.update(1),this.trigger("prize",{row:t,col:e,score:this.mission.result}),i=3e3),setTimeout(this.resume.bind(this),i),this.isFinished()&&this.finish()}},TreasureSearch.prototype.checkIfComplete=function(){this.isFinished()&&this.mission.isRunning()&&(this.mission.complete(),-1!==["olympics","tripeaks"].indexOf(cleverapps.config.name)&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.TREASURE_SEARCH_FINISH))},TreasureSearch.prototype.getReward=function(){return this.mission.getPrize()},TreasureSearch.prototype.hasElement=function(e,t){return this.field[t]&&void 0!==this.field[t][e]&&this.field[t][e]!==TreasureSearch.ELEMENT_OPENED&&!this.gemWasThere(e,t)},TreasureSearch.prototype.gemWasThere=function(e,t){return this.field[t]&&void 0!==this.field[t][e]&&this.field[t][e]===TreasureSearch.ELEMENT_FOUND},TreasureSearch.prototype.isFinished=function(){if(this.mission.result>=TreasureSearch.GEMS)return!0;if(this.field){for(var e=0,t=0,
s=0;s<TreasureSearch.WIDTH;s++)for(var n=0;n<TreasureSearch.HEIGHT;n++)this.hasElement(s,n)&&e++,this.gemWasThere(s,n)&&t++;return 0===e||t>=TreasureSearch.GEMS}return!1},TreasureSearch.WIDTH=5,TreasureSearch.HEIGHT=4,TreasureSearch.GEMS=4,TreasureSearch.ELEMENT_EMPTY="e",TreasureSearch.ELEMENT_OPENED="o",TreasureSearch.ELEMENT_FOUND="f",TreasureSearch.ELEMENT_GEM="g",TreasureSearch.ALL_ELEMENT_VALUES=[TreasureSearch.ELEMENT_EMPTY,TreasureSearch.ELEMENT_OPENED,TreasureSearch.ELEMENT_FOUND,TreasureSearch.ELEMENT_GEM];var TreasureSearchMissionLogic=function(e){this.mission=e};TreasureSearchMissionLogic.prototype.isFinished=function(){return this.mission.result>=TreasureSearch.GEMS};var StickersCollectionWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.styles.StickersCollectionWindow;this.game=new StickersCollection(e),this.generateContent();var s={title:"messages:StickersCollectionWindow.Title",name:"stickerscollectionwindow",content:this.content,
closeButton:t.closeButton,notCloseByTouchInShadow:!0,styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.StickersCollectionWindow.window,!0),help:this.onClickHelp.bind(this)};t.button&&(s.button={width:t.button.width,text:Messages.get(t.button.text),onPressed:this.close.bind(this)}),this._super(s),e.isRunning()&&(this.timer=new cleverapps.CountDown(e.getTimeLeft(),{onFinish:function(){this.close()}.bind(this)})),this.game.isFinished()&&this.game.finish({silent:!0}),e.needShowStartWindow=!1,cleverapps.audio.playSound(bundles.main.urls.stickers_collection_effect)},onExit:function(){this._super(),this.timer&&this.timer.stop()},onClose:function(){this.game.checkIfComplete()},onClickHelp:function(){new MissionRulesWindow(this.game.mission)},generateContent:function(){var e=cleverapps.styles.StickersCollectionWindow,t=this.createBook(),s=cleverapps.UI.generateOnlyText("messages:StickersCollectionWindow.text",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT)
;s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(e.book.width,0);var n=e.progressBar,i=cleverapps.UI.generateOnlyText("messages:MissionRulesWindow.StickersCollection.leftToPrize",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setDimensions(n.size.width,0);var o=Math.min(this.game.mission.result,StickersCollection.GEMS),a=new ScaledProgressBar(bundles.stickers_collection.frames.progress_bar);a.setPercentage(o/StickersCollection.GEMS*100),a.setDimension(n.size.width-n.bar.paddingX,n.size.height-n.bar.paddingY),a.setPositionRound(n.bar);var r=cleverapps.UI.generateImageText(o+"/"+StickersCollection.GEMS,cleverapps.styles.FONTS.TREASURE_SEARCH_PROGRESS_BAR_TEXT);r.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),r.setPositionRound(n.text);var l=new cleverapps.Spine(n.gift.json);l.setSkin(n.gift.skin),l.setAnimation(0,"animation",!0),l.setPositionRound({align:"right",dx:l.width+n.gift.offsetX},{align:"center",
dy:n.gift.offsetY}),l.setScale(n.gift.scale),cleverapps.tooltipManager.create(l,{rewards:this.game.getReward(),text:Messages.get("StickersCollectionWindow.prizeTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.above,size:e.tooltipSize});var c=cleverapps.UI.createScale9Sprite(bundles.stickers_collection.frames.progress_bar_bg);c.setContentSize2(n.size),c.addChild(a),c.addChild(r),c.addChild(l);var p=new cleverapps.Layout([c,i],{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:{x:0,y:2*e.margin}});this.content=new cleverapps.Layout([p,s,t],{direction:cleverapps.UI.VERTICAL,margin:e.margin}),this.content.setLocalZOrder(2)},createBook:function(){var e=cleverapps.styles.StickersCollectionWindow,t=new cleverapps.Spine(bundles.stickers_collection.jsons.book,1);t.setAnimation(0,"animation",!1),t.addAnimation(0,"idle",!0),t.setPositionRound({align:"center"},{align:"center"});var s=this.bookNode=new cc.Node;if(s.setAnchorPoint2(),s.setContentSize2(e.book),s.addChild(t),
bundles.stickers_collection.jsons.light){var n=new cleverapps.Spine(bundles.stickers_collection.jsons.light,1);n.setAnimation(0,"animation",!1),n.setPositionRound({align:"center"},{align:"center"}),s.addChild(n)}return this.game.open(),s},listBundles:function(){return["stickers_collection"]}});cleverapps.styles.StickersCollectionWindow={window:{maxTitleSize:{scale:.65}},progressBar:{size:{width:410,height:52},gift:{json:bundles.windows.jsons.present_json,skin:"blue",scale:.9,offsetX:-60,offsetY:25},bar:{paddingX:5,paddingY:10,x:{align:"left",dx:2},y:{align:"center"}},text:{x:{align:"center"},y:{align:"center"}}},margin:20,book:{width:600,height:400},closeButton:!1,button:{width:160,text:"OK"},tooltipSize:{width:200,height:100}};var StickersCollection=function(e){MissionGame.call(this,e)};StickersCollection.prototype=Object.create(MissionGame.prototype),(StickersCollection.prototype.constructor=StickersCollection).prototype.open=function(){var e=this.mission.currency
;this.mission.updateCurrency(-e),this.mission.update(e),this.isFinished()&&this.finish()},StickersCollection.prototype.checkIfComplete=function(){this.isFinished()&&this.mission.isRunning()&&this.mission.complete()},StickersCollection.prototype.isFinished=function(){return this.mission.result>=StickersCollection.GEMS},StickersCollection.prototype.getReward=function(){return this.mission.getPrize()},StickersCollection.GEMS=25,StickersCollection.GEMS_BY_PLACE={1:5,2:3,3:1};var StickersCollectionLogic=function(e){this.mission=e};StickersCollectionLogic.prototype.isMinigameReadyToFinish=function(){return this.mission.result+this.mission.currency>=StickersCollection.GEMS},StickersCollectionLogic.prototype.isFinished=function(){return this.mission.result>=StickersCollection.GEMS};var TellWindow=Window.extend({onWindowLoaded:function(e){this.params=e,this.createContent(),e={content:this.content,name:this.getName(),title:this.params.title,button:{
width:cleverapps.styles.TellWindow.button.width,text:this.params.buttonText||Messages.get("OK"),onPressed:function(){this.close(),this.params.onPressed&&this.params.onPressed()}.bind(this)}},cleverapps.styles.TellWindow.window&&(e.styles=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.TellWindow.window,!0)),cleverapps.audio.playSound(bundles.main.urls.window_effect),this._super(e)},getName:function(){return"tellwindow"},createContent:function(){var e=cleverapps.styles.TellWindow,t=this.createText(),s=[t];if(e.hero){var n=new HeroView(e.hero);n.setLocalZOrder(1),this.addChild(n)}else{var i=new StoryTeller;i.setLocalZOrder(1),i.setScale(e.char.scale[cleverapps.wideMode.mode]),s.unshift(i)}if(this.content=new cleverapps.Layout(s,{direction:cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?cleverapps.UI.VERTICAL:cleverapps.UI.HORIZONTAL,margin:e.margin[cleverapps.wideMode.mode]*resolutionScale,padding:{x:0,y:e.padding.y[cleverapps.wideMode.mode]*resolutionScale}}
),i){if(cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL){var o=i.height-t.height;0<o&&(t.y+=o/4)}i.y+=e.char.dy}},createText:function(){var e=cleverapps.styles.TellWindow;e.types&&e.types[this.params.type]&&(e=cleverapps.overrideStyles(e,e.types[this.params.type],!0));var t=cleverapps.UI.generateTTFText(this.params.text,cleverapps.styles.FONTS.WINDOW_TEXT);return t.setDimensions(e.text.width[cleverapps.wideMode.mode]*resolutionScale,0),t.setHorizontalAlignment(e.horizontalAlignment),t.fitTo(void 0,e.text.height[cleverapps.wideMode.mode]*resolutionScale),t},listBundles:function(){return StoryTeller.listBundles()}});cleverapps.styles.TellWindow={width:660,height:350,margin:[40,50,50],horizontalAlignment:cc.TEXT_ALIGNMENT_CENTER,padding:{y:[50,10,10]},char:{scale:[1,1,1],dy:0},text:{width:[600,450,450],height:[270,300,300]},button:{width:260}};var FriendRequestsWindow=Window.extend({onWindowLoaded:function(){var e=new cc.Node;e.setAnchorPoint2(),this.content=e,this.createViews(),
this._super({name:"friendrequestswindow",content:e,noBackground:!0,onClose:function(){cleverapps.toolbar.updateItems()}});var t=cleverapps.FBLoginOrInvite();t&&this.addChild(t),cleverapps.audio.playSound(bundles.main.urls.window_effect)},createViews:function(){var e=cleverapps.styles.FriendRequestsWindow;this.requestsViews=[],this.requestsIds=[],this.pendingViews=[],this.pendingIds=[];for(var t=[],s=0;s<levels.friendRequests.notProcessed.length;s++){var n=this.createRequestView(levels.friendRequests.notProcessed[s]);n&&t.push(n)}t.forEach(function(e){this.requestsViews.length<FriendRequestsWindow.MAX_SHOW_REQUESTS?(this.content.addChild(e),this.requestsViews.push(e),this.requestsIds.push(e.model.getId())):(this.content.addChild(e),e.setVisible(!1),this.pendingViews.push(e),this.pendingIds.push(e.model.getId()))},this);var i=cleverapps.UI.arrangeWithMargins(this.requestsViews.slice().reverse(),{direction:cleverapps.UI.VERTICAL,margin:e.margin,x:e.width/2,y:e.y})
;this.content.setContentSize2(e.width,i)},createRequestView:function(e){var o=e.getId(),t=e.getView();if(t)return new t(e,this,function(){var e=this.getRequestIdViewOrder(o),t=this.requestsViews[0].getPosition();if(!1!==e){for(var s=e-1;0<=s;--s)this.requestsViews[s].isRunningSafe()&&this.requestsViews[s].runAction(new cc.MoveTo(this.getMoveTime(),this.requestsViews[s+1].getPosition()));this.requestsIds.splice(e,1),this.requestsViews.splice(e,1)}if(0===this.requestsViews.length&&0===this.pendingViews.length)this.close();else if(0<this.pendingViews.length){var n=this.pendingViews[0],i=this.pendingIds[0];this.pendingViews.splice(0,1),this.pendingIds.splice(0,1),this.requestsViews.splice(0,0,n),this.requestsIds.splice(0,0,i),n.setVisible(!0),n.setScale(0),n.setPosition(t),n.runAction(new cc.ScaleTo(this.getMoveTime(),1))}}.bind(this))},getRequestIdViewOrder:function(e){for(var t=0;t<this.requestsIds.length;t++)if(this.requestsIds[t]===e)return t;return!1},getMoveTime:function(){return.3}}
);FriendRequestsWindow.MAX_SHOW_REQUESTS=4,cleverapps.styles.FriendRequestsWindow={width:400,margin:15,y:0};var RewardWindow=Window.extend({onWindowLoaded:function(e){this.options=e=e||{},this.reward=e.reward,cleverapps.flags.doubleRewards&&(this.reward=cleverapps.doubleReward(this.reward)),this.styles=cleverapps.styles.RewardWindow,e.styles&&(this.styles=cleverapps.overrideStyles(this.styles,e.styles,!0)),void 0===e.animation&&(e.animation=this.styles.animation.json),this.createContent(),this._super({title:e.title||"messages:RewardWindow.title",name:e.name||"rewardwindow",content:this.content,minWidth:e.minWidth||this.styles.minWidth,minHeight:e.minHeight||this.styles.minHeight,button:{text:Messages.get(e.buttonText||"Claim"),width:this.styles.button.width,height:this.styles.button.height,onPressed:this.onPressed.bind(this)},buttons:this.getButtons(),shareCheckBox:this.getShareOptions(),noBackground:e.noBackground,closeButton:!1,notCloseByTouchInShadow:e.notCloseByTouchInShadow}),
this.adjustRewardList(),this.content.y+=cleverapps.styles.RewardWindow.rewards.dy,this.runRewardsListAnimation()},adjustRewardList:function(){var e=this.rewardsList.width*this.rewardsList.scale;e>this.window.width&&this.rewardsList.setScale(this.rewardsList.scale*this.window.width/e)},getShareOptions:function(){var e=this.options.rewardName;return!1!==e&&{shareId:"reward",toReplace:{rewardName:Messages.get("RewardWindow."+(e||"default"))}}},createText:function(){var e=this.text=cleverapps.UI.generateTTFText(this.options.text,cleverapps.styles.FONTS.REWARD_WINDOW_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT),t=this.options.textWidth||cleverapps.styles.RewardWindow.textWidth;return void 0!==t&&e.setDimensions(t,0),e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e},addAnimation:function(){var e=this.options.animation;if(e){var t=e.json?e.json:e,s=new cleverapps.Spine(t);return s.setAnimation(0,"animation",!0),s.setPositionRound(this.rewardsList.width/2,
this.rewardsList.height/2+this.styles.animation.y),s.setLocalZOrder(-1),this.rewardsList.addChild(s),s}},runRewardsListAnimation:function(){this.rewardsList.iterateRewards(this.rewardItemAnimation.bind(this))},getContentItems:function(){var e=[];return this.rewardsList=this.createRewardsList(),e.push(this.rewardsList),this.options.text&&(this.text=this.createText(),e.push(this.text)),e},rewardItemAnimation:function(e){e.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.3),new cc.ScaleTo(.2,1)))},createContent:function(){return this.content=new cleverapps.Layout(this.getContentItems(),{direction:cleverapps.UI.VERTICAL,margin:this.styles.margin,padding:this.styles.rewards.padding}),this.animation=this.addAnimation(),this.content},onShow:function(){this._super(),this.runAction(new cc.Sequence(new cc.DelayTime(.1),new cc.CallFunc(function(){this.visible&&cleverapps.audio.playSound(this.options.sound||bundles.main.urls.reward_window_effect)}.bind(this)))),this.animation&&(this.animation.scale=0
,this.animation.runAction(new cc.ScaleTo(.5,1)))},createRewardsList:function(){return new RewardsListComponent(this.reward,{font:cleverapps.styles.FONTS.REWARD_WINDOW_REWARDS_TEXT})},onReceiveReward:function(){},onDoubleReward:function(){},doubleReward:function(){this.reward=cleverapps.doubleReward(this.reward);var e=this.rewardsList.parent,t=this.rewardsList.getPosition();this.rewardsList.removeFromParent(!0),this.rewardsList=this.createRewardsList(),this.rewardsList.setPosition(t),e.addChild(this.rewardsList),this.onDoubleReward()},receiveReward:function(){this.reward&&(this.onReceiveReward(),cleverapps.Chest.prototype._receiveReward(this.reward),this.reward=void 0)},onClose:function(){this.receiveReward(),cleverapps.starChest&&!cleverapps.starChest.locked&&new StarChestWindow,this.options.callback&&this.options.callback()},onPressed:function(){this.close()},getButtons:function(){return[]},getDoubleButton:function(){return new DoubleRewardButton(this.doubleReward.bind(this))},
listBundles:function(e){var t=[],s=e&&e.reward||{};return s.herolevels&&t.push("heroes"),(s.coins||s.wands)&&t.push("episode_0"),s.battlePass&&t.push("battle_pass"),t.push("reward_icons"),t}});RewardWindow.NO_PAYMENTS_MODIFIER=2,cleverapps.styles.RewardWindow={margin:30,animation:{y:0,json:bundles.main.jsons.reward_spine_json},minWidth:600,minHeight:700,text:{x:0,y:150},rewards:{padding:{x:100,y:50},dy:0},button:{width:250,height:100},buttons:{margin:30}};var UserStatus=function(){cleverapps.EventEmitter.call(this),cleverapps.environment.isSceneWithPreview()?this.timeouts=[]:this.timeouts=[new UserStatusTimeout(cleverapps.parseInterval("10 seconds"),function(e,t){this.trigger("inactive_very_short",t)}.bind(this)),new UserStatusTimeout(cleverapps.parseInterval("20 seconds"),function(e,t){this.trigger("inactive_short",t)}.bind(this)),new UserStatusTimeout(cleverapps.parseInterval("60 seconds"),function(e,t){this.trigger("inactive_long",t)}.bind(this))]}
;UserStatus.prototype=Object.create(cleverapps.EventEmitter.prototype),(UserStatus.prototype.constructor=UserStatus).prototype.clear=function(){this.timeouts.forEach(function(e){e.clear()})},UserStatus.prototype.reportUserAction=function(){this.trigger("active"),this.timeouts.forEach(function(e){e.reset()})};var UserStatusTimeout=function(e,t){this.time=e,this.callback=t,this.reset()};UserStatusTimeout.prototype.reset=function(){this.clear(),this.hintTimeout=new cleverapps.LongTimeout(function(){this.callback(),this.reset()}.bind(this),this.time)},UserStatusTimeout.prototype.clear=function(){clearTimeout(this.hintTimeout)};var Counter=function(){this.value=0,this.onceZero=void 0,this.afterRunStages=void 0,this.stages=[],this.off=!1,this.onStageActivatedListener=function(){}};Counter.prototype.registerStage=function(t,e){for(var s=0;s<this.stages.length;s++)if(this.stages[s].handler===e)return;cleverapps.config.debugMode&&0<this.stages.filter(function(e){return e.priority===t}
).length&&alert("Multiple stages with same priority: "+t),this.stages.push({priority:t,handler:e}),this.stages.sort(function(e,t){return e.priority-t.priority})},Counter.prototype.runStages=function(){if(0===this.value&&!this.off)for(var e=0;e<this.stages.length;e++)if(this.stages[e].handler(),this.isActive())return void this.onStageActivatedListener()},Counter.prototype.turnOff=function(){this.off=!0},Counter.prototype.isActive=function(){return 0<this.value},Counter.prototype.trigger=function(e){e?this.setTimeoutUnblocked(this.trigger.bind(this),e):this.runStages()},Counter.prototype.inc=function(){this.value++},Counter.prototype.dec=function(){if(this.value--,0===this.value&&!this.off){if(this.onceZero){var e=this.onceZero;this.onceZero=void 0,e()}0!==this.value||this.off||this.runStages(),this.afterRunStages&&(this.afterRunStages(),this.afterRunStages=void 0)}},Counter.prototype.setTimeoutUnblocked=function(e,t){return setTimeout(function(){this.off||e()}.bind(this),t)},
Counter.prototype.setTimeout=function(e,t){return this.inc(),setTimeout(function(){this.off||(e(),this.dec())}.bind(this),t)},cleverapps.GameSaver={gamesData:[],findSave:function(t){return this.gamesData.filter(function(e){return Object.keys(e)[0]===t})[0]},load:function(e){var t=this.findSave(e);return(t=t&&JSON.parse(t[e]))||(t=cleverapps.DataLoader.load(e))&&this.saveInfo(e,t),t},loadProperty:function(e,t){var s=cleverapps.GameSaver.load(e);return s&&s[t]},reset:function(){cleverapps.GameSaver.gamesData=[];var e=GameBase.getStoreKey(levels.user.episode,levels.user.level);"merge"===cleverapps.config.type&&(e=GameBase.getStoreKey(0,0)),cleverapps.GameSaver.saveInfo(e,{}),cleverapps.synchronizer.addUpdateTask("games")},saveInfo:function(e,t){var s=this.findSave(e);if(s)this.gamesData[this.gamesData.indexOf(s)][e]=JSON.stringify(t);else{for(;this.gamesData.length>=cleverapps.DataLoader.FIFO_LIMIT;)this.gamesData.shift();var n={};n[e]=JSON.stringify(t),this.gamesData.push(n)}
cleverapps.DataLoader.save(e,t,{fifoKey:cleverapps.DataLoaderTypes.GAME_SAVE_FIFO})},removeSave:function(e){var t=this.findSave(e);t&&this.gamesData.splice(this.gamesData.indexOf(t),1),cleverapps.DataLoader.remove(e,cleverapps.DataLoaderTypes.GAME_SAVE_FIFO)}};var FakeGame=function(e){if((Game.currentGame=this).counter={isActive:function(){return!0},registerStage:function(){},trigger:function(){},fieldCounter:{registerStage:function(){}},setTimeout:function(){}},this.onChangeOutcomeListeners={},this.levelContent=e,this.level={quick:!0,content:e,getHumanReadableNumber:function(){return cleverapps.humanReadableNumber(e.episodeNo,e.levelNo)},episode:{isBonusRound:function(){return!1},isBonusWorldLevel:function(){return!1},bundleId:function(){return Episode.BundleId(e.episodeNo)}},isHard:function(){return e.hard}.bind(this),isTricky:function(){return e.tricky}.bind(this)},"solitaire"===cleverapps.config.type&&(this.generator=new CardGenerator,this.table={getScreen:function(){
return new Screen(0)}}),"match3"===cleverapps.config.type){var t=new Loader;this.field=new Field(t),this.loader=t,this.callsOnFieldReady=[],this.goals=new Goals(e),this.score={addMoveExplode:function(){},addGoal:function(){}},Match3.counter=this.counter}"merge"===cleverapps.config.type&&cleverapps.extend(this,{tutorial:{isActive:function(){}},orders:{addOrder:function(){},updateOrder:function(){},chooseFreeRecipe:function(){},getMaker:function(){}},gameLevel:{value:0,getLevel:function(){return 1},nextLevelThreshold:function(){return 1e3}},harvested:{canTakeList:function(){}},workers:{findAssigned:function(){},countRegularFree:function(){return 2},countRegularTotal:function(){return 2},isBonusWorkerBuyed:function(){return!1}},energyLottery:{isAvailable:function(){return!1},isReady:function(){return!1}},spawn:function(){return[]},decreasePrizeStageIfNeeded:function(e){return e},storeSave:function(){}}),"board"===cleverapps.config.type&&(this.board=new cleverapps.Board(this,[],[]),
this.board.addHint=function(){},this.hintBooster={addHint:function(){}},this.keypad=new Keypad(this,{}),this.current=new cleverapps.Current(this,this.keypad),this.extra=new cleverapps.Extra(this.levelContent,[])),cleverapps.config.rpg&&(this.enemies=Game.prototype.selectEnemies.call(this))};FakeGame.prototype.getMissionType=function(){},FakeGame.prototype.stop=function(){this.stopped||(this.stopped=!0,"merge"===cleverapps.config.type&&(this.map.stop(),InfoView.Clear()))};var GameBase=function(e,t){cleverapps.EventEmitter.call(this),(Game.currentGame=this).levelContent=e.content,this.level=e,this.options=t||{},this.timer=new GameTimer,this.counter=new Counter,this.boostersBefore=this.options.boostersBefore,this.levelWithCoins=!e.isRegular()||e.isCurrentLevel()||cleverapps.user.isPassedAll()&&cleverapps.metha.getType()===Metha.SIMPLE&&cleverapps.user.checkAvailable(GameBase.LEVEL_WITH_COINS_AVAILABLE),cleverapps.Combo&&cleverapps.Combo.isAvailable()&&(this.combo=new cleverapps.Combo(this
));var s=cleverapps.userresult.getStarsForLevel(this.level.episodeNo,this.level.levelNo);if(this.level.isRegular()&&(this.level.isNew()||cleverapps.config.results&&3!==s)&&"merge"!==cleverapps.config.type){var n=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_SECOND);n&&(this.gameMission=n)}if(this.level.isRegular()&&this.level.isNew()){var i=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_REGULAR);i&&(this.backgroundMission=i)}if(this.userStatus=new UserStatus,this.rewards={},void 0!==this.gameMission&&this.gameMission.isRunning()&&(this.rewards[GameBase.REWARD_CLOVER]=0),this.backgroundMission&&this.backgroundMission.isRunning()){var o=this.backgroundMission.getLevelReward(),a=o[0];this.level.isHard()&&(a=o[1]),this.level.isTricky()&&(a=o[2]),this.rewards[GameBase.REWARD_BACKGROUND_CLOVER]=a}cleverapps.piggyBank&&cleverapps.piggyBank.isActive()&&!cleverapps.piggyBank.isFull()&&(this.rewards[GameBase.REWARD_PIGGY_BANK]=cleverapps.piggyBank.getAddAmount())
,this.level.isRegular()&&this.level.isNew()&&levels.user.expAvailable()&&(this.rewards[GameBase.REWARD_EXP]=this.level.isHard()?GameBase.HARD_LEVEL_EXP_PRIZE:GameBase.EXP_PRIZE),-1!==["board","solitaire","differences"].indexOf(cleverapps.config.type)&&(this.level.isCurrentLevel()||this.level.episode.isDailyCup()||this.level.episode.isDailyLevel()||this.level.episode.isBonusWorldLevel()||cleverapps.config.editorMode)&&(this.basicGoldReward=10,this.level.isTricky()&&(this.basicGoldReward=20),this.level.isHard()&&(this.basicGoldReward=30),this.rewards[GameBase.REWARD_GOLD]=this.basicGoldReward),this.level.episode.isBonusRound()&&(this.rewards[GameBase.REWARD_GOLD]=cleverapps.BonusRoundChest.REWARD),this.levelWithTutorial&&this.levelWithTutorial()?cleverapps.Random.seed(this.level.getHumanReadableNumber()-1):cleverapps.Random.randomSeed(),this.onCloverAdded=function(){},this.onGoldRewardAdded=function(){},this.onGameMessage=function(){},this.outcome=GameBase.OUTCOME_UNKNOWN,
this.onChangeOutcomeListeners={},this.afterOnChangeOutcomeListeners={},cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN)&&cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN).logic.lantern.isActive(this.level)&&cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN).logic.lantern.onStart(),this.boostersBefore&&this.boostersBefore.onStart(),cleverapps.competitionStatistics.onGameStarted(this),cleverapps.flyingAd&&cleverapps.flyingAd.setGame(this)};GameBase.prototype=Object.create(cleverapps.EventEmitter.prototype),(GameBase.prototype.constructor=GameBase).prototype.getInfo=function(){},GameBase.prototype.getInitialInfo=function(){},GameBase.prototype.storeSave=function(){if(-1!==["match3","board","merge"].indexOf(cleverapps.config.type)&&!cleverapps.isRumble()&&(this.level.isRegular()||this.level.episode.isDailyCup()||this.level.episode.isDailyLevel()||this.level.episode.isBonusWorldLevel())){
var e=this.getInfo();console.log("storeSave"),console.log(e),cleverapps.GameSaver.saveInfo(GameBase.getStoreKey(this.level),e),cleverapps.synchronizer.addUpdateTask("games")}},GameBase.prototype.loadSave=function(){var e=cleverapps.GameSaver.load(GameBase.getStoreKey(this.level));return cleverapps.isRumble()&&(e=void 0),e||this.getInitialInfo()},GameBase.getStoreKey=function(e,t){if("object"==typeof e){var s=e;e=s.episode.episodeNo,t=s.levelNo}return cleverapps.config.prefix+cleverapps.social.getLocalStoragePreffix()+"_level_"+t+"x"+e},GameBase.prototype.getDailyCupStars=function(){return 1},GameBase.prototype.initPool=function(){},GameBase.prototype.stop=function(){this.counter.turnOff(),this.userStatus.clear(),this.combo&&this.combo.stop(),cleverapps.menuBar.stopItems(),cleverapps.exclamation.disable(),this.stopped=!0,this.trigger("stop")},GameBase.prototype.afterChangeOutcome=function(){},GameBase.prototype.setOutcome=function(e){this.outcome===GameBase.OUTCOME_UNKNOWN&&(
this.outcome=e,this.runOutcomeListeners())},GameBase.prototype.runOutcomeListeners=function(){cleverapps.values(this.onChangeOutcomeListeners).forEach(function(e){e(this.outcome)}.bind(this)),cleverapps.values(this.afterOnChangeOutcomeListeners).forEach(function(e){e(this.outcome)}.bind(this)),this.afterChangeOutcome()},GameBase.prototype.win=function(){cleverapps.user.incProgressCompare(30),this.setOutcome(GameBase.OUTCOME_VICTORY)},GameBase.prototype.lose=function(){cleverapps.user.incProgressCompare(),this.setOutcome(GameBase.OUTCOME_LOST)},GameBase.prototype.giveUp=function(){cleverapps.user.incProgressCompare(),this.boostersBefore&&this.boostersBefore.onGiveUp(),this.setOutcome(GameBase.OUTCOME_GAVEUP)},GameBase.prototype.showUp=function(e){e()},GameBase.EXP_PRIZE=1,GameBase.HARD_LEVEL_EXP_PRIZE=3,GameBase.REWARD_CLOVER="clover",GameBase.REWARD_BACKGROUND_CLOVER="background_clover",GameBase.REWARD_PIGGY_BANK="piggyBank",GameBase.REWARD_EXP="exp",GameBase.REWARD_GOLD="gold",
GameBase.REWARD_BOOSTER="booster",GameBase.OUTCOME_UNKNOWN=void 0,GameBase.OUTCOME_VICTORY=1,GameBase.OUTCOME_LOST=2,GameBase.OUTCOME_GAVEUP=3,GameBase.prototype.stillNoPenalty=function(){return!cleverapps.isRumble()&&(this.outcome===GameBase.OUTCOME_UNKNOWN&&(!this.level.episode.isBonusRound()&&("board"===cleverapps.config.type||("solitaire"===cleverapps.config.type?(!cleverapps.bet||!cleverapps.bet.isActive())&&this.table.beginCards===this.table.countOfCardsToPlay():!(!this.originalMoves||-1!==this.originalMoves)||this.beginMoves===this.moves))))},GameBase.prototype.canPayReward=function(e){switch(e){case GameBase.REWARD_CLOVER:return void 0!==this.gameMission&&this.gameMission.isRunning();case GameBase.REWARD_BACKGROUND_CLOVER:return void 0!==this.backgroundMission&&this.backgroundMission.isRunning();case GameBase.REWARD_PIGGY_BANK:return cleverapps.piggyBank.isActive();case GameBase.REWARD_EXP:case GameBase.REWARD_GOLD:case GameBase.REWARD_BOOSTER:return!0}},
GameBase.prototype.payReward=function(e,t){if(this.canPayReward(e)&&t)switch(e){case GameBase.REWARD_CLOVER:this.gameMission.update(t);break;case GameBase.REWARD_BACKGROUND_CLOVER:this.backgroundMission.type===Mission.TYPE_SLOT_MACHINE?this.backgroundMission.slotMachine.earnTickets(t):this.backgroundMission.type===Mission.TYPE_BATTLEPASS?cleverapps.missionManager.dispatchEvent(Mission.EVENT_COLLECT_BATTLE_PASS_STARS,{amount:t}):this.backgroundMission.updateCurrency(t);break;case GameBase.REWARD_PIGGY_BANK:cleverapps.piggyBank.addGold(t);break;case GameBase.REWARD_EXP:levels.user.setExp(levels.user.exp+t);break;case GameBase.REWARD_GOLD:levels.user.setGold(levels.user.gold+t);break;case GameBase.REWARD_BOOSTER:cleverapps.boostersCounter.add(this.collectedBoosterCell.type,t)}},GameBase.prototype.getMissionType=function(){if(this.gameMission)return this.gameMission.type},GameBase.prototype.addClover=function(e,t,s){this.getMissionType()===e&&(this.rewards[GameBase.REWARD_CLOVER]=(
this.rewards[GameBase.REWARD_CLOVER]||0)+t,s||this.onCloverAdded())},GameBase.prototype.addGoldReward=function(e,t){this.rewards[GameBase.REWARD_GOLD]=(this.rewards[GameBase.REWARD_GOLD]||0)+e,t||this.onGoldRewardAdded()},GameBase.LEVEL_WITH_COINS_AVAILABLE={episode:0,level:7},cleverapps.GameSyncer={getInfo:function(){var e=cleverapps.user.getCurrentLevel(),t=e.episodeNo,s=e.levelNo;"merge"===cleverapps.config.type&&(t=s=0);var n=cleverapps.GameSaver.load(GameBase.getStoreKey(t,s));if(n)return 0<Object.keys(n).length&&(n=cleverapps.extend(n,{episode:t,level:s})),n},saveInfo:function(e){if(void 0!==e&&void 0!==e.episode&&void 0!==e.level){var t=e.episode,s=e.level;delete e.episode,delete e.level,cleverapps.GameSaver.saveInfo(GameBase.getStoreKey(t,s),e)}}};var GameSceneBase=cleverapps.FixedWidthScene.extend({ctor:function(e,t){if(cleverapps.config.editorMode&&cleverapps.environment.setScene(cleverapps.Environment.SCENE_GAME),this.game=e,this.level=t,this._super(
cleverapps.Environment.SCENE_GAME),levels.cookieJar&&levels.cookieJar.shouldBeVisible()&&levels.cookieJar.setVisible(),this.game.competition&&cleverapps.isKnockoutGame()){var s=this.playersView=new KnockoutPlayersView(this.game.competition,cleverapps.metha.getMainObject().knockoutGame.rumble.getCurrentRound());this.scene.addChild(s)}if(e.combo){var n=new ComboView(e.combo,this.scene);this.scene.addChild(n),e.onChangeOutcomeListeners.comboResetAnimations=e.combo.reset.bind(e.combo)}"match3"===cleverapps.config.type&&(this.infoPanel=new InfoPanel,this.scene.addChild(this.infoPanel),this.controlsPanel=new ControlsPanel,this.scene.addChild(this.controlsPanel)),e.afterOnChangeOutcomeListeners.gameScene=this.createListener(this.animateChangeOutcome.bind(this)),this.initSceneBg(),e.onChangeOutcomeListeners.misc=this.createListener(function(){cleverapps.audio.fadeOut(),cleverapps.gun&&cleverapps.gun.hide(),this.level.isPassed=this.game.outcome===GameBase.OUTCOME_VICTORY}.bind(this)),
cleverapps.exclamation.setGame(this.game),this.boatswain=new Boatswain(t),this.actions=[],this.game.churnActivated=cleverapps.once(function(){(this.game.level.isRegular()||this.game.level.episode.isBonusWorldLevel())&&levels.user.isUniqueStart(this.game.level.episodeNo,this.game.level.levelNo,this.level.content.version)&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.UNIQUE_START,{hash:this.level.hash})}.bind(this)),cleverapps.environment.levelNo=t.levelNo,cleverapps.environment.episodeNo=t.episodeNo,this.prepareConfirmExit(),cc.pool.drainAllPools(),this.game.initPool(),cleverapps.lives&&cleverapps.lives.amount>cleverapps.Lives.MAX_REGEN_AMOUNT&&(this.game.moreThenMaxRegenLife=!0),"merge"!==cleverapps.config.type&&this.takeLife(!0),this.customize(),this.groupToggler=new cleverapps.UI.GroupToggler,this.game.rewardGoldView&&(this.rewardGoldView=new RewardGoldView(this,this.infoPanel||this.scene)),this.game.gameMission&&(this.cloversView=new CloversView(this,this.infoPanel||this.scene)
),(this.level.isRegular()||this.level.episode.isBonusWorldLevel())&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_START,{hash:this.level.hash}),void 0!==cleverapps.abTest.group&&cleverapps.eventLogger.logEvent("abtest_"+cleverapps.abTest.group+"_"+cleverapps.EVENTS.LEVEL_START),cleverapps.gun.isAvailable()&&(this.gunView=new GunView(cleverapps.gun,this)),this.game.tournament&&(this.playersView=new TournamentPlayersView(this.game.competition),this.scene.addChild(this.playersView));var i=new GameMessageView(e);this.scene.addChild(i);var o=cleverapps.exclamation.createView();this.scene.addChild(o,20),o.setPositionRound(this.width/2,this.height/2),cleverapps.flyingAd&&this.scene.addChild(new FlyingAdView)},calcHash:function(){return RecursiveHasher(this.level.content,["episodeNo","levelNo","version","hard","paint","extra","gold","bundles"])},introControls:function(){return"panel_info"},_playIntro:function(){this.needDisplayIntro=!1,cleverapps.metha.display({
focus:"GameScene.intro",control:this.introControls(),actions:[this.animateSceneBg.bind(this),function(e){this.onChangeSize(),e()}.bind(this),this.displayIntro.bind(this),this.displayDailyLevelWindow.bind(this)]})},initSceneBg:function(){if(!cleverapps.flags.introDisabled&&this.background){var e=cleverapps.styles.GameScene.startAnimation.scale;this.bgScaleMargin=e;var t=this.background.getScaleX()*e,s=this.background.getScaleY()*e;this.background.setScale(t,s),this.scene.setScale(1/e)}},animateSceneBg:function(e){var t=this.bgScaleMargin||1;this.game.outcome===GameBase.OUTCOME_UNKNOWN?this.scene.runAction(new cc.ScaleTo(.8,1)):this.scene.runAction(new cc.ScaleTo(.8,1/t)),setTimeout(e,800)},displayIntro:function(e){this.game.showUp(function(){this.game.level.isRegular()&&levels.FPS.run(this.game.level.episodeNo,this.game.level.levelNo),cleverapps.placements.run(Placements.AFTER_GAME_START),e()}.bind(this))},displayDailyLevelWindow:function(e){this.level.episode.isDailyLevel(
)?DailyLevelWindow.shown||-1===["olympics","crocword","tripeaks"].indexOf(cleverapps.config.name)?e():(new DailyLevelWindow,DailyLevelWindow.shown=!0,cleverapps.metha.onceNoWindowsListener=e):e()},prepareConfirmExit:function(){this.confirmWindow=void 0,this.game.onChangeOutcomeListeners.confirmexit=function(e){void 0!==this.confirmWindow&&this.confirmWindow.close()}.bind(this)},closeAction:function(){this.backToEditorOrAdmin()||this.game&&void 0===this.confirmWindow&&this.game.outcome===GameBase.OUTCOME_UNKNOWN&&(cleverapps.metha.isFocused()||(this.game.stillNoPenalty()?this.game.giveUp():cleverapps.metha.display({focus:"GameSceneCloseAction",action:function(e){this.confirmWindow=new ConfirmExitWindow({onAction:function(){this.game.lose()}.bind(this),onClose:function(){this.confirmWindow=void 0}.bind(this),game:this.game}),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})))},customize:function(){},takeLife:function(e){if(cleverapps.lives&&!cleverapps.tempGoods.checkGoodBuyed(
cleverapps.TempGoods.UNLIMITED_LIVES)){if(this.level.episode.isDailyCup()&&!cleverapps.dailyCup.cupWithLives())return;cleverapps.lives.take(e)}},giveLife:function(){if(cleverapps.lives&&!cleverapps.tempGoods.checkGoodBuyed(cleverapps.TempGoods.UNLIMITED_LIVES)){if(this.level.episode.isDailyCup()&&!cleverapps.dailyCup.cupWithLives())return;(this.game.moreThenMaxRegenLife||cleverapps.lives.amount<cleverapps.Lives.MAX_REGEN_AMOUNT)&&cleverapps.lives.give()}},calcAddedStars:function(e){if(this.level.episode.isRegular()&&cleverapps.user.isPassedAll()||this.level.episode.isDailyCup())return e;if(!this.level.isRegular())return 0;var t=cleverapps.userresult.getStarsForLevel(this.level.episodeNo,this.level.levelNo);return t<=e?e-t:0},beforeWin:function(){cleverapps.placements.run(Placements.AFTER_GAME_FINISH);var e=this.game.outcome;this.giveLife(),this.controlsPanel&&this.controlsPanel.hide(),this.level.isRegular()&&cleverapps.metha.getMainObject().gamePlayed(e,this.game)
;var t=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN)&&cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN).logic.lantern;if(e===GameBase.OUTCOME_GAVEUP)t&&t.isActive(this.level)&&t.restoreSavedStreak();else if(e===GameBase.OUTCOME_VICTORY){if(this.game.timer&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_PASSED_TIME,{hash:this.level.hash,passedTime:this.game.timer.getTime()}),this.level.isRegular()&&this.level.isNew()&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.PASS_LEVELS_IN_ROW),t&&t.isActive(this.level)&&t.onWin(),cleverapps.placements.run(Placements.VICTORY),this.level.isRegular()||this.level.episode.isBonusWorldLevel()){void 0!==this.game.leftMoves&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_LEFT_MOVES,{hash:this.level.hash,leftMoves:this.game.leftMoves});var s=!0;"board"===cleverapps.config.type&&this.game.timer&&(s=this.game.timer.getTime()<=cleverapps.parseInterval("5 minutes")),
s&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_FINISH,{hash:this.level.hash}),(this.level.isNew()||this.level.episode.isBonusWorldLevel())&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.UNIQUE_FINISH,{hash:this.level.hash}),void 0!==cleverapps.abTest.group&&cleverapps.eventLogger.logEvent("abtest_"+cleverapps.abTest.group+"_"+cleverapps.EVENTS.LEVEL_FINISH)}var n=this.level.isCurrentLevel();this.boatswain.level=this.level=cleverapps.extend(cleverapps.clone(this.level),{isCurrentLevel:function(){return n}}),this.oldLeague=levels.user.league,this.level.isCurrentLevel()&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.PASS_LEVEL),this.level.episode.isDailyLevel()&&cleverapps.dailyLevel.onWin(this.level)}else e===GameBase.OUTCOME_LOST&&(cleverapps.dailyTasks.setProgress(cleverapps.DailyTasks.PASS_LEVELS_IN_ROW,0),t&&t.isActive(this.level)&&t.onLose(),this.takeLife(),cleverapps.placements.run(Placements.LOSE))},congratulate:function(e){if(-1!==["riddles","scramble",
"tripeaks"].indexOf(cleverapps.config.name))if(cleverapps.flags.gameMessagesDisabled)e();else if(this.game.outcome===GameBase.OUTCOME_VICTORY){cleverapps.audio.playSound(bundles.main.urls.congratulate_sfx),cleverapps.windows.onShowShadow({});var t=cleverapps.styles.GameScene.congratulation;if(t.rays){var s=new cleverapps.Spine(bundles.exclamations.jsons.animation,t.rays.scale);this.scene.addChild(s,20),s.setPositionRound(t.rays),s.runAction(new cc.Sequence(new cc.DelayTime(.7),new cc.CallFunc(function(){s.setAnimation(0,"rays",!1)})))}if(this.game.onGameMessage(e,"messages:VICTORY",!1,{json:bundles.gamemessage.jsons.game_message_victory_json,direction:"riddles"===cleverapps.config.name?GameMessageView.DIRECTION_TOP_TOP:GameMessageView.DIRECTION_TOP_DOWN,delay:2}),"tripeaks"===cleverapps.config.name){var n=VictoryWindowHero.hero=new VictoryWindowHero;n.setLocalZOrder(22),this.addChild(n),n.show()}}else e();else e()},showProperWindow:function(e){if(!cleverapps.flags.victoryWindowDisabled
)if(this.game.outcome!==GameBase.OUTCOME_GAVEUP){var t={level:this.level,game:this.game,boatswain:this.boatswain};this.level.episode.isBonusRound()?new BonusRoundWindow(this.game):this.game.outcome===GameBase.OUTCOME_LOST?cleverapps.lives?new LoseWindow(function(t){cleverapps.isRumble()||(this.boatswain.intent=function(e){this.boatswain.REPLAY(e,t)}.bind(this))}.bind(this),this.game):e():new VictoryWindow(t),cleverapps.metha.onceNoWindowsListener=e}else e()},waitWinLoseAnimations:function(e){e()},animateGoalsComplete:function(e){e()},fireworksAnimation:function(e){cleverapps.isKnockoutGame()||this.game.outcome!==GameBase.OUTCOME_VICTORY||this.scene.addChild(new Fireworks),e()},purgeOldGame:function(e){this.game&&!this.game.stopped&&cleverapps.throwAsync("purgeOldGame active game"),Game.currentGame=void 0,this.game=void 0,"undefined"!=typeof VictoryLoseAnimations&&VictoryLoseAnimations.clear(),e()},saveFinalResults:function(e){if(!this.game){var t="game empty "
;Game.currentGame&&Game.currentGame.level&&(t+=" level - "+Game.currentGame.level.levelNo+", episode - "+Game.currentGame.level.episodeNo),cleverapps.throwAsync(t)}this.game.outcome===GameBase.OUTCOME_VICTORY&&("undefined"!=typeof Match3&&this.game instanceof Match3&&this.level.isRegular()&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_STARS,{hash:this.level.hash,stars:this.stars}),this.level.episode.isDailyCup()&&this.saveDailyCupProgress()),e()},saveDailyCupProgress:function(){cleverapps.dailyCup.addAmount(this.game.getDailyCupStars()),cleverapps.playSession.set(cleverapps.EVENTS.DAILY_CUP_PLAYERS,!0)},playChangeOutcome:function(){var e=cleverapps.toArray(this.introControls());this.level.episode.isBonusRound()&&this.game.outcome===GameBase.OUTCOME_LOST&&e.push("MenuBarBonusRoundTimerItem"),cleverapps.metha.display({focus:"ChangeOutcome",control:e,filter:function(){return this.wantAnimateChangeOutcome}.bind(this),action:function(e){this.wantAnimateChangeOutcome=!1,
cleverapps.metha.compound(e,this.actions)}.bind(this)})},backToEditorOrAdmin:function(e){return cleverapps.config.editorMode?(this.game&&this.game.stop(),e&&e(),this.level.edit(),!0):!!cleverapps.config.adminMode&&(this.game&&this.game.stop(),e&&e(),AdministratorScene.open(),!0)},animateChangeOutcome:function(e){this.wantAnimateChangeOutcome=!0,cleverapps.config.debugMode&&console.log("OUTCOME: "+e),this.beforeWin(),cleverapps.isKnockoutGame()||e===GameBase.OUTCOME_VICTORY&&this.level.isCurrentLevel()&&levels.user.incLevel(),this.actions.push(this.waitWinLoseAnimations.bind(this)),this.actions.push(this.animateGoalsComplete.bind(this)),this.actions.push(this.fireworksAnimation.bind(this)),this.actions.push(this.saveFinalResults.bind(this)),this.actions.push(this.animateSceneBg.bind(this)),this.actions.push(this.congratulate.bind(this)),this.actions.push(this.showProperWindow.bind(this)),e===GameBase.OUTCOME_VICTORY?this.afterWin():this.actions.push(this.purgeOldGame.bind(this)),
this.actions.push(function(){cleverapps.metha.distract({focus:"boatswain",control:this.introControls(),action:function(e){this.backToEditorOrAdmin(e)||this.boatswain.intent(e)}.bind(this)})}.bind(this)),cleverapps.metha.display({focus:"empty",action:function(e){e()}})},afterWin:function(){if(this.actions.push(function(e){for(var t in this.game.rewards)this.game.payReward(t,this.game.rewards[t]);e()}.bind(this)),this.actions.push(this.purgeOldGame.bind(this)),this.level.isRegular()&&levels.user.checkAvailable(BeatFriendWindow.AVAILABLE)&&this.level.isNew()){var t=this.level.players.filter(function(e){return cleverapps.friends.getById(e)});0<t.length&&this.actions.push(function(e){cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.BEAT_FRIEND),new BeatFriendWindow(t[0],this.level),cleverapps.metha.onceNoWindowsListener=e}.bind(this))}cc.sys.isNative&&!cleverapps.flags.norest&&levels.user.checkAvailable(RateWindow.AVAILABLE)&&RateWindow.CanRate()&&this.actions.push(function(e){
new RateWindow,cleverapps.metha.onceNoWindowsListener=e}),this.oldLeague===levels.user.league||cleverapps.flags.norest||(this.actions.push(function(e){new NewLeagueWindow(this.level),cleverapps.metha.onceNoWindowsListener=e}.bind(this)),this.actions.push(function(e){new LeadersWindow,cleverapps.metha.onceNoWindowsListener=e}));var s=this.game.backgroundMission;if(s&&s.isMinigameReadyToFinish()&&this.actions.push(function(e){new s.nudgeWindow(s),cleverapps.metha.onceNoWindowsListener=e}),cleverapps.missionManager.dispatchEvent(Mission.EVENT_LEVEL_FINISH,{level:this.level}),cleverapps.config.results&&this.level.isRegular()&&levels.user.checkAvailable(ChampionWindow.AVAILABLE)&&this.level.isChampion()&&(cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.LEVEL_CHAMPION),this.actions.push(function(e){new ChampionWindow(this.level),cleverapps.metha.onceNoWindowsListener=e}.bind(this))),"undefined"!=typeof match3&&!1!==match3.heroes.readyToOpen()){var n=match3.heroes.readyToOpen()
;match3.heroes.setLevel(n,1),this.actions.push(function(e){cleverapps.Plot.onFirstHeroesOpen(e,{color:n})})}this.actions.push(function(e){cleverapps.starChest&&!cleverapps.starChest.locked?(new StarChestWindow,cleverapps.metha.onceNoWindowsListener=e):e()})},onChangeSize:function(e){this._super(e),this.game&&this.game.combo&&this.game.combo.onChangeSize&&this.game.combo.onChangeSize()},getBackgroundStyles:function(){if(!this.level)throw new Error("Level is undefined in getBackgroundStyles "+cleverapps.gameSceneLogs.join(" "));var e=GameSceneBase.ChooseStyling(this.level);return e.background=bundles[e.bundle].urls.background,e.animation=bundles[e.bundle].jsons.background_spine,cleverapps.skins.getSlot("gameSceneBg")||e},getAudioStyles:function(){var e=GameSceneBase.ChooseStyling(this.level);return{res:cleverapps.skins.getSlot("gameAudio")||e.music,fadeIn:cleverapps.styles.GameScene.sound.fadeIn,delay:cleverapps.styles.GameScene.sound.delay}}});GameSceneBase.ChooseStyling=function(e){if(
bundles[e.episode.bundleId()]&&bundles[e.episode.bundleId()].urls.background)return{bundle:e.episode.bundleId()};if(cleverapps.environment.isEditorScene()&&cleverapps.styles.GameScene.STYLING.editor)return cleverapps.styles.GameScene.STYLING.editor;var t=cleverapps.styles.GameScene.STYLING,s=t.regular[e.getHumanReadableNumber()%t.regular.length];if(e.episode.isBonusRound()?s=t.bonus:e.isHard()||cleverapps.isRumble()&&cleverapps.metha.getMainObject().knockoutGame.rumble.getCurrentRound().isLast()?s=t.hard:e.isTricky()&&(s=t.tricky),s=cleverapps.clone(s),e.episode.isBonusWorldLevel()){var n=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_BONUS_WORLD);n&&(s.bundle=n.bonusWorld.backgroundBundleId(),s.music=bundles[s.bundle].urls.music,s.skin=void 0)}return-1!==["wordheaps","spades","mergeriddles","mergeheroes"].indexOf(cleverapps.config.name)&&(s.bundle="simple_background_"+cleverapps.simple.getCurrent()),s},GameSceneBase.BUNDLES=function(e,t){var n=["game","heroes",
"dialogues_minimal"];if(t&&(n=n.concat(t.content.bundles||[t.content.bundleName]||[])).push(GameSceneBase.ChooseStyling(t).bundle),"match3"===cleverapps.config.type&&t.content.cellSkins&&cleverapps.values(t.content.cellSkins).forEach(function(e){if(bundles[e]){var t=e.substring(0,e.indexOf("_reskin")),s=n.indexOf(t);n.splice(s,0<s?1:0,e)}}),"stacks"===cleverapps.config.subtype&&n.push("extra_"+cleverapps.settings.language),e&&cleverapps.config.rpg)for(var s in e.enemies){var i=e.enemies[s];n.push("enemy"+i)}return bundles.exclamations&&n.push("exclamations"),bundles["letters_"+cleverapps.settings.language]&&n.push("letters_"+cleverapps.settings.language),n},cleverapps.styles.GameScene={actor:void 0,startAnimation:{scale:1.05},sound:{delay:1},debugLevelNo:{x:{align:"right",dx:-100},y:{align:"bottom",dy:100}},congratulation:{}},cleverapps.styles.GameScene.STYLING={bonus:{bundle:"game_background_bonus",music:bundles.game.urls.background_music_game,pattern:-1!==["wordsoup","olympics",
"crocword"].indexOf(cleverapps.config.name)},hard:{bundle:"game_background_hard",animation:bundles.game.jsons.game_bg_clouds_json,skin:"gameBackground_hard",music:bundles.game.urls.background_music_hard,pattern:-1!==["differences","olympics","wordsoup"].indexOf(cleverapps.config.name)},regular:[{bundle:"game_background",animation:bundles.game.jsons.game_bg_clouds_json,skin:"gameBackground",music:bundles.game.urls.background_music_game,pattern:-1!==["differences","olympics","wordsoup"].indexOf(cleverapps.config.name)}]},function(){if(bundles.editor&&bundles.editor.urls.background&&(cleverapps.styles.GameScene.STYLING.editor={bundle:"editor"}),"crocword"===cleverapps.config.name)cleverapps.styles.GameScene.STYLING.regular[0].bundle="loading_scene_backgrounds";else for(var e=cleverapps.styles.GameScene.STYLING.regular[0],t=2;bundles["game_background_"+t];t++)cleverapps.styles.GameScene.STYLING.regular.push({bundle:"game_background_"+t,skin:"gameBackground"+t,music:e.music,
animation:e.animation,pattern:e.pattern})}();var GameMessageView=cc.Node.extend({ctor:function(e){this._super(),(this.game=e).onGameMessage=this.createListener(this.show.bind(this)),this.setLocalZOrder(21)},show:function(e,t,s,n){if(cleverapps.flags.gameMessagesDisabled)e();else{n=n||{};var i=cc.director.getRunningScene().scene,o=this.createBg();this.addChild(o);var a=this.createText(t);if(o.addChild(a),a.fitTo(.9*i.width),s){var r=this.createTitle(s);o.addChild(r)}var l=n.direction||GameMessageView.DIRECTION_TOP_DOWN,c=cc.p(i.width/2,i.height+o.height/2+cleverapps.UI.getSceneOffsetY()),p=cc.p(i.width/2,i.height/2),d=cc.p(i.width/2,-o.height/2-cleverapps.UI.getSceneOffsetY());l===GameMessageView.DIRECTION_TOP_TOP&&(d=c);var u=cleverapps.styles.GameMessageView,h=n.json||bundles.gamemessage.jsons.game_message_json;if(h){var g=new cleverapps.Spine(h,u.char.scale);this.addChild(g,1),g.setPositionRound(u.char),g.y-=cleverapps.UI.getSceneOffsetY();var v="idle"
;"stacks"===cleverapps.config.subtype&&(this.game.level.isHard()&&(v="idle_hard"),this.game.level.isTricky()&&(v="idle_tricky"),this.game.level.episode.isBonusRound()&&(v="idle_bonus_round")),g.setAnimation(0,v,!1),cleverapps.UI.makeHideable(g,cleverapps.UI.VERTICAL),g.hide(!0),g.show(!1,0,{easing:!0,duration:.3})}o.setPositionRound(c),o.setVisible(!1),o.runAction(new cc.Sequence(new cc.DelayTime(this.getDelayTime()),new cc.CallFunc(function(){o.setVisible(!0),cleverapps.audio.playSound(bundles.game.urls.game_message_effect)}),new cc.MoveTo(.5,p).easing(cc.easeBackOut(1)),new cc.DelayTime(n.delay||1.2),new cc.CallFunc(function(){g&&g.hide(!1,0,{easing:!0,duration:.3}),cleverapps.audio.playSound(bundles.game.urls.game_message_effect)}),new cc.MoveTo(.5,d).easing(cc.easeBackIn(1)),new cc.RemoveSelf,new cc.CallFunc(e)))}},getBackgroundImage:function(){var e=bundles.gamemessage.frames.gamemessage_bg_png;return cleverapps.isRumble()&&cleverapps.metha.getMainObject(
).knockoutGame.rumble.getCurrentRound().isLast()&&(e=bundles.gamemessage.frames.gamemessage_bg_hard_png),this.game.level.isHard()&&bundles.gamemessage.frames.gamemessage_bg_hard_png&&(e=bundles.gamemessage.frames.gamemessage_bg_hard_png),this.game.level.isTricky()&&bundles.gamemessage.frames.tricky_level_msg_bg&&(e=bundles.gamemessage.frames.tricky_level_msg_bg),this.game.level.episode.isBonusRound()&&bundles.gamemessage.frames.bonus_round_level_msg_bg&&(e=bundles.gamemessage.frames.bonus_round_level_msg_bg),e},createText:function(e){e=Messages.has(e)?Messages.get(e):e;var t=cleverapps.styles.FONTS.GAME_MESSAGE_TEXT;this.game.level.isHard()&&cleverapps.styles.FONTS.GAME_MESSAGE_HARD_TEXT&&(t=cleverapps.styles.FONTS.GAME_MESSAGE_HARD_TEXT),this.game.level.isTricky()&&(t=cleverapps.styles.FONTS.GAME_MESSAGE_TRICKY_TEXT),this.game.level.episode.isBonusRound()&&cleverapps.styles.FONTS.GAME_MESSAGE_BONUS_ROUND_TEXT&&(t=cleverapps.styles.FONTS.GAME_MESSAGE_BONUS_ROUND_TEXT)
;var s=cleverapps.UI.generateTTFText(e.toUpperCase(),t);return s.setPositionRound(cleverapps.styles.GameMessageView.text),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s},createTitle:function(e){var t,s=cleverapps.styles.GameMessageView,n=bundles.gamemessage.frames.title_bg_png,i=cleverapps.styles.FONTS.GAME_MESSAGE_TITLE_TEXT;this.game.level.isHard()&&(n=bundles.gamemessage.frames.title_bg_hard_png,i=cleverapps.styles.FONTS.GAME_MESSAGE_TITLE_TEXT_HARD||i),this.game.level.isTricky()&&(n=bundles.gamemessage.frames.title_bg_tricky_png,i=cleverapps.styles.FONTS.GAME_MESSAGE_TITLE_TEXT_TRICKY||i),s.title.bg.width?(t=new cc.Scale9Sprite(n)).setContentSize2(s.title.bg):t=new cc.Sprite(n),e=Messages.has(e)?Messages.get(e):e;var o=cleverapps.UI.generateTTFText(e.toUpperCase(),i);return o.fitTo(s.title.width),t.addChild(o),o.setPositionRound(s.title),t.setPositionRound(s.title.bg),t},createBg:function(){var e,t=cleverapps.styles.GameMessageView,s=cleverapps.UI.getSceneSize();if(t.pattern
){for(var n=new cc.Sprite(this.getBackgroundImage()).width,i=[],o=0;o<Math.ceil(s.width/(n+t.pattern.margin))+10;o++)i.push(new cc.Sprite(this.getBackgroundImage()));e=new cleverapps.Layout(i,{direction:cleverapps.UI.HORIZONTAL,margin:t.pattern.margin})}else(e=new cc.Scale9Sprite(this.getBackgroundImage())).setContentSize2(1.2*s.width,e.height);return e},getDelayTime:function(){return.2}});GameMessageView.DIRECTION_TOP_DOWN=0,GameMessageView.DIRECTION_TOP_TOP=1,cleverapps.styles.GameMessageView={text:{x:{align:"center"},y:{align:"center"}},title:{width:200,bg:{x:{align:"center"},y:{align:"center",dy:110}},x:{align:"center"},y:{align:"center"}}},cleverapps.overrideFonts(cleverapps.styles.FONTS,{GAME_MESSAGE_TEXT:{size:60,color:cleverapps.styles.COLORS.WHITE,stroke:{color:new cc.Color(145,56,188,255),size:1}},GAME_MESSAGE_TITLE_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}})
;var GameTimer=function(e){this.start=Date.now(),this.game=e};GameTimer.prototype.setStartTime=function(e){this.start=e},GameTimer.prototype.getStartTime=function(){return this.start},GameTimer.prototype.getTime=function(){return Date.now()-this.start},cleverapps.DailyTask=function(e,t,s){this.type=e,this.goal=t,this.progress=0,this.data=s||{},this.reward=s.reward,this.onUpdateListener=function(){}},cleverapps.DailyTask.prototype.getSaveInfo=function(){return{type:this.type,progress:this.progress,collected:this.collected,goal:this.goal,data:this.data}},cleverapps.DailyTask.prototype.addProgress=function(e,t){if("object"==typeof e&&(t=e),"number"!=typeof e&&(e=1),0<e)return this.setProgress(this.progress+e,t)},cleverapps.DailyTask.prototype.isApplicable=function(e){switch(this.type){case cleverapps.DailyTasks.USE_BOOSTER:return this.data.booster===e.booster;case cleverapps.DailyTasks.COLLECT_COLOR_CELLS:return this.data.color===e.color;case cleverapps.DailyTasks.COLLECT_SPECIAL_CELLS:
return this.data.cell_code===e.cell_code;case cleverapps.DailyTasks.GUESS_WORDS_WITH_LETTER:return this.data.letter===e.letter;case cleverapps.DailyTasks.COLLECT_CARDS_BY_VALUE:return this.data.cardValue===e.cardValue;case cleverapps.DailyTasks.COLLECT_CARDS_BY_SUIT:return this.data.cardSuit===e.cardSuit;case cleverapps.DailyTasks.COLLECT_HERO_CELLS:return this.data.color===e.color;case cleverapps.DailyTasks.MERGE:return this.data.mergeAmount<=e.mergeAmount}return!0},cleverapps.DailyTask.prototype.setProgress=function(e,t){if(this.isApplicable(t)&&!this.isFinished()&&("object"==typeof e&&(t=e),"number"!=typeof e&&(e=1),e!==this.progress)){var s=Math.min(e,this.goal),n=s-this.progress;this.progress=s,this.onUpdateListener(),this.save(),this.isFinished()&&cleverapps.dailyTasks.taskWasFinished(this),n&&this.type!==cleverapps.DailyTasks.COMPLETE_ALL&&cleverapps.dailyTasks.notification.notify(this,n)}},cleverapps.DailyTask.prototype.isFinished=function(){return this.progress>=this.goal},
cleverapps.DailyTask.prototype.collect=function(){this.isFinished()&&!this.collected&&(this.collected=!0,this.save(),this.onUpdateListener())},cleverapps.DailyTask.prototype.expire=function(){this.isFinished()||(this.expired=!0,this.onUpdateListener())},cleverapps.DailyTask.prototype.givePrize=function(){this.isFinished()&&new DailyTaskRewardWindow(this)},cleverapps.DailyTask.prototype.save=function(){cleverapps.dailyTasks.save()},cleverapps.DailyTask.prototype.getTitle=function(){var e={};return cleverapps.DailyTasks.USE_BOOSTER===this.type&&(e.booster=Messages.get("Boosters."+this.data.booster+".Title")),cleverapps.DailyTasks.COLLECT_COLOR_CELLS===this.type&&(e.color=Messages.get("ColorCell."+this.data.color+".Title")),cleverapps.DailyTasks.COLLECT_SPECIAL_CELLS===this.type&&(e.elements=Messages.get("DailyTask.14.Element."+this.data.cell_code)),cleverapps.DailyTasks.GUESS_WORDS_WITH_LETTER===this.type&&this.data.letter&&(e.letter=this.data.letter.toUpperCase()),
cleverapps.DailyTasks.COLLECT_HERO_CELLS===this.type&&(e.heroes=Messages.get("DailyTask.24."+this.data.color)),cleverapps.DailyTasks.COLLECT_CARDS_BY_VALUE===this.type&&(e.cards=Messages.get("DailyTask.25."+this.data.cardValue)),cleverapps.DailyTasks.COLLECT_CARDS_BY_SUIT===this.type&&(e.cards=Messages.get("DailyTask.26."+this.data.cardSuit)),cleverapps.DailyTasks.MERGE===this.type&&(e.amount=this.data.mergeAmount),-1!==[cleverapps.DailyTasks.SPEND_GOLD,cleverapps.DailyTasks.SPEND_COINS].indexOf(this.type)&&(e.amount=this.goal),{text:"messages:DailyTask."+this.type+".Title",replace:e}},cleverapps.DailyTask.getIcon=function(e,t){if(cleverapps.DailyTasks.COLLECT_SPECIAL_CELLS===e)switch(t.cell_code){case FishCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_fish_png);case FlowerCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_flower_png);case NutCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_nut_png)
;case Mark.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_mark_png);case MouseCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_mouse_png);case IceTile.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_ice_png);case DragonCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_dragon_png);case CookieManCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_cookieman_png);case CakeCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_cake_png);case MuffinGoalCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_muffin_png);case WaffleCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_waffles_png);case LollipopCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_lollipop_png);case ColorCookieManCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_colorcookieman_png
);case TruffleCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_truffle_png);case DogCell.GOAL_ID:return new cc.Sprite(bundles.dailytasks.frames.daily_task_cell_dog_png)}if(cleverapps.DailyTasks.GUESS_WORDS_WITH_LETTER===e){var s=new CharView(t.letter.toUpperCase());return"scramble"===cleverapps.config.name&&s.setScale(.8),s}var n="daily_task_icon_"+e;return cleverapps.DailyTasks.USE_BOOSTER===e&&(n+="_"+t.booster),cleverapps.DailyTasks.COLLECT_COLOR_CELLS===e&&(n+="_"+t.color),cleverapps.DailyTasks.COLLECT_HERO_CELLS===e&&(n+="_"+t.color),cleverapps.DailyTasks.COLLECT_CARDS_BY_VALUE===e&&(n+="_"+t.cardValue),cleverapps.DailyTasks.COLLECT_CARDS_BY_SUIT===e&&(n+="_"+t.cardSuit),n+="_png",new cc.Sprite(bundles.dailytasks.frames[n])},cleverapps.DailyTask.prototype.getIcon=function(){return cleverapps.DailyTask.getIcon(this.type,this.data)},cleverapps.DailyTask.prototype.getReward=function(){if("merge"===cleverapps.config.type)return cleverapps.clone(
DailyTasksConfig[this.type].reward,!0);var e=RewardsConfig.DailyTask,t=cleverapps.Random.choose(e[cleverapps.dailyTasks.getTaskSlot(this)]);return e.prepareByRich&&(t=cleverapps.user.prepareRewardByRich(t)),cleverapps.clone(t,!0)},cleverapps.DailyTask.Create=function(e){var t=new cleverapps.DailyTask(e.type,e.goal,e.data);return t.progress=0<e.progress?e.progress:0,t.collected=e.collected,t},cleverapps.DailyTasks=function(e){this.onChangeStateListener=function(){},cleverapps.config.debugMode&&(cleverapps.DailyTasks.DURATION="600 seconds"),this.tasks=[],e?(this.whenStart=-1,this.save()):this.load(),cleverapps.eventBus.on("gameEvent",this.onGameEvent.bind(this)),this.notification=new DailyTasksNotifications},cleverapps.DailyTasks.prototype.getInfo=function(){return{whenStart:this.whenStart,tasks:this.tasks.map(function(e){return e.getSaveInfo()})}},cleverapps.DailyTasks.prototype.processFinishState=function(){clearTimeout(this.finishTimeout);var e=this.getTimeLeft()
;0<e?this.finishTimeout=new cleverapps.LongTimeout(function(){cleverapps.sideBar.resetByClassName(DailyTasksIcon),this.processFinishState()}.bind(this),e):this.onChangeStateListener()},cleverapps.DailyTasks.prototype.load=function(e){var t=e||cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.DAILY_TASKS)||{};this.whenStart=void 0!==t.whenStart?t.whenStart:-1,this.whenStart>Date.now()&&(this.whenStart=Date.now()),t.tasks&&t.tasks.length===cleverapps.DailyTasks.ACTIVE_TASKS&&(this.tasks=t.tasks.map(function(e){return cleverapps.DailyTask.Create(e)})),this.processFinishState()},cleverapps.DailyTasks.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.DAILY_TASKS,this.getInfo()),this.onChangeStateListener(),!1!==e&&cleverapps.synchronizer.addUpdateTask("dailytasks")},cleverapps.DailyTasks.prototype.collect=function(e){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_TASK_REWARD+this.getTaskSlot(e)),cleverapps.playSession.inc(
cleverapps.EVENTS.SESSION_DAILY_TASK_REWARD),e.collect(),this.sendActivity()},cleverapps.DailyTasks.prototype.processResults=function(){this.isRunning()?0===this.tasks.length&&this.startNew():0===this.tasks.length?this.startNew():this.getActiveTasks().forEach(function(e){e.expire()})},cleverapps.DailyTasks.prototype.startNew=function(){this.tasks=this.generateTasks(),this.startGeneratedTasks()},cleverapps.DailyTasks.prototype.generateTasks=function(){var t=cleverapps.arrayFill(cleverapps.DailyTasks.ACTIVE_TASKS,0),e=t.length,s=cleverapps.clone(DailyTasksConfig,!0);cleverapps.config.debugMode||cleverapps.Random.seed((new Date).getDate());var n=[].concat(cleverapps.DailyTasks.PRIORITY_TYPES);cleverapps.Random.nextDouble()<.3&&n.push(cleverapps.DailyTasks.LOGIN_FACEBOOK);for(var i=cleverapps.Random.shuffle(cleverapps.substract(Object.keys(s),n)),o=n.concat(i),a=0;a<o.length&&0<e;a++){var r=+o[a],l=s[r];if(!l.filter||l.filter()){l.data=l.data||{},l.dynamic&&cleverapps.extend(l.data,
l.dynamic());var c=cleverapps.Random.choose(Object.keys(l.data).filter(function(e){return 0===t[e]}));c&&(t[c]=new cleverapps.DailyTask(r,l.data[c],l.data),e--)}}return t},cleverapps.DailyTasks.prototype.startGeneratedTasks=function(){this.whenStart=Date.now(),this.save(),this.processFinishState(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_TASKS_START)},cleverapps.DailyTasks.prototype.sendActivity=function(){cleverapps.social.sendActivity&&cleverapps.social.sendActivity(cleverapps.Social.ACTIVITY.DAILY_TASK,{userName:cleverapps.friends.getPlayer().name})},cleverapps.DailyTasks.prototype.getNotCollectedTasks=function(){return this.tasks.filter(function(e){return e.isFinished()&&!e.collected})},cleverapps.DailyTasks.prototype.getActiveTasks=function(){return this.tasks.filter(function(e){return!e.isFinished()})},cleverapps.DailyTasks.prototype.getFinishedTasks=function(){return this.tasks.filter(function(e){return e.isFinished()})},
cleverapps.DailyTasks.prototype.getTaskByType=function(t){var s;return this.getActiveTasks().forEach(function(e){e.type===t&&(s=e)}),s},cleverapps.DailyTasks.prototype.addProgress=function(e,t,s){if(this.isRunning()){var n=this.getTaskByType(e);n&&n.addProgress(t,s)}},cleverapps.DailyTasks.prototype.setProgress=function(e,t,s){if(this.isRunning()){var n=this.getTaskByType(e);n&&n.setProgress(t,s)}},cleverapps.DailyTasks.prototype.getTimeLeft=function(){return this.whenStart+cleverapps.parseInterval(cleverapps.DailyTasks.DURATION)-Date.now()},cleverapps.DailyTasks.prototype.isRunning=function(){return 0<this.getTimeLeft()&&0<this.tasks.length},cleverapps.DailyTasks.prototype.getTasks=function(){return this.tasks},cleverapps.DailyTasks.prototype.onDiscoverWord=function(e){this.processDiscoverWordWithLetter(e)},cleverapps.DailyTasks.prototype.onDiscoverExtraWord=function(e){this.addProgress(cleverapps.DailyTasks.GUESS_EXTRA_WORDS),this.processDiscoverWordWithLetter(e)},
cleverapps.DailyTasks.prototype.processDiscoverWordWithLetter=function(e){cleverapps.unique(e.split("")).forEach(function(e){cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.GUESS_WORDS_WITH_LETTER,1,{letter:e})})},cleverapps.DailyTasks.prototype.processOpenCard=function(e,t){this.addProgress(cleverapps.DailyTasks.COLLECT_CARDS_BY_VALUE,1,{cardValue:Card.VALUES[e.value]}),this.addProgress(cleverapps.DailyTasks.COLLECT_CARDS_BY_SUIT,1,{cardSuit:e.suit}),t instanceof Wildcard&&this.addProgress(cleverapps.DailyTasks.USE_HINTS)},cleverapps.DailyTasks.prototype.getTaskSlot=function(e){var t=this.tasks.indexOf(e);return-1===t?void 0:t},cleverapps.DailyTasks.prototype.getCompleteAllTask=function(){return this.getTasks().filter(function(e){return e.type===cleverapps.DailyTasks.COMPLETE_ALL})[0]},cleverapps.DailyTasks.prototype.taskWasFinished=function(e){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_TASK_FINISH_AMOUNT+this.getFinishedTasks().length),cleverapps.playSession.inc(
cleverapps.EVENTS.SESSION_DAILY_TASK_FINISH),e.type===cleverapps.DailyTasks.LIKE_PAGE&&cleverapps.serverFlags.setFlag(cleverapps.ServerFlags.PAGE_LIKED),e.type!==cleverapps.DailyTasks.COMPLETE_ALL&&this.addProgress(cleverapps.DailyTasks.COMPLETE_ALL),cleverapps.sideBar.resetByClassName(DailyTasksIcon),this.preparePush()},cleverapps.DailyTasks.prototype.preparePush=function(){if(!(this.getFinishedTasks().length<2)&&(cleverapps.localPushes.cancelPush(cleverapps.LocalPushes.TYPES.DAILY_TASKS_UNCOMPLETED),0<this.getActiveTasks().length)){var e=this.getTimeLeft()-cleverapps.DailyTasks.PUSH_UNTIL_RESET_TIME;0<e&&cleverapps.localPushes.sendPush(cleverapps.LocalPushes.TYPES.DAILY_TASKS_UNCOMPLETED,e)}},cleverapps.DailyTasks.prototype.onGameEvent=function(e,n){if("merge"===cleverapps.config.type)switch(e){case Merge.MINE:"source"===n.affected.getType()&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.DESTROY_ENT);break;case Merge.COMPLETE_MINING:
n.task.energy&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.USE_WORKER);break;case Merge.BUILD:cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.USE_WORKER),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.BUILD);break;case Merge.MERGE:cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.MERGE,1,{mergeAmount:n.affected.length}),n.affected.some(function(e){return"crystal"===e.code&&e.isLast()})&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.USE_RAINBOW);break;case Merge.HARVEST:"fruit"===n.affected.getType()&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.HARVEST_FRUITS);break;case Merge.PRIZE_HARVESTED:"chest"===n.affected.getType()&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.OPEN_CHEST);break;case Merge.SPAWN:var t=function(e,t){if(Array.isArray(n.affected)){var s=n.affected.filter(t);if(0<s.length)return e.stage>s[0].stage}};"fruit"===n.unit.getType()&&n.unit.stage<4?n.affected&&(Array.isArray(n.affected)||-1===["chest",
"fruit","source"].indexOf(n.affected.getType()))||cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.GROW_PLANT):"source"===n.unit.getType()?t(n.unit,function(e){return"source"===e.getType()})&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.CREATE_SOURCE):"wands"===n.unit.code&&t(n.unit,function(e){return"wands"===e.code})&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.MERGE_SOLDIERS)}},cleverapps.DailyTasks.PUSH_UNTIL_RESET_TIME=cleverapps.parseInterval("5 hours"),cleverapps.DailyTasks.LOGIN_FACEBOOK=0,cleverapps.DailyTasks.LIKE_PAGE=1,cleverapps.DailyTasks.SHARE=2,cleverapps.DailyTasks.INVITE_FRIENDS=3,cleverapps.DailyTasks.PASS_LEVEL=4,cleverapps.DailyTasks.COLLECT_STARS=5,cleverapps.DailyTasks.SEND_FRIEND_HELP=6,cleverapps.DailyTasks.WATCH_ADS=7,cleverapps.DailyTasks.USE_MULTI_COLOR_CELL=8,cleverapps.DailyTasks.USE_BOOSTER=9,cleverapps.DailyTasks.COLLECT_COLOR_CELLS=10,cleverapps.DailyTasks.PASS_LEVELS_IN_ROW=11,cleverapps.DailyTasks.LEVEL_CHAMPION=12,
cleverapps.DailyTasks.SPEND_GOLD=13,cleverapps.DailyTasks.COLLECT_SPECIAL_CELLS=14,cleverapps.DailyTasks.GUESS_EXTRA_WORDS=15,cleverapps.DailyTasks.GUESS_WORDS_WITH_LETTER=16,cleverapps.DailyTasks.USE_HINTS=17,cleverapps.DailyTasks.TOURNAMENT_WIN=18,cleverapps.DailyTasks.FINISH_EPISODE=19,cleverapps.DailyTasks.RECEIVE_PERIODIC_BONUS=20,cleverapps.DailyTasks.BEAT_FRIEND=22,cleverapps.DailyTasks.PLAY_BONUS_ROUND=23,cleverapps.DailyTasks.COLLECT_HERO_CELLS=24,cleverapps.DailyTasks.COLLECT_CARDS_BY_VALUE=25,cleverapps.DailyTasks.COLLECT_CARDS_BY_SUIT=26,cleverapps.DailyTasks.COLLECT_JOKERS_USING_COMBO=27,cleverapps.DailyTasks.DESTROY_ENT=28,cleverapps.DailyTasks.MAKE_ORDER=29,cleverapps.DailyTasks.USE_RAINBOW=30,cleverapps.DailyTasks.MERGE_SOLDIERS=31,cleverapps.DailyTasks.HARVEST_FRUITS=32,cleverapps.DailyTasks.USE_WORKER=33,cleverapps.DailyTasks.OPEN_CHEST=34,cleverapps.DailyTasks.CLAIM_BUGS=35,cleverapps.DailyTasks.MERGE=36,cleverapps.DailyTasks.BUY_UNITS_SHOP_ITEMS=37,
cleverapps.DailyTasks.PLAY_MINESWEEPER=38,cleverapps.DailyTasks.SPEND_COINS=39,cleverapps.DailyTasks.CREATE_SOURCE=40,cleverapps.DailyTasks.COMPLETE_ALL=41,cleverapps.DailyTasks.WATCH_TELLY=42,cleverapps.DailyTasks.BUILD=43,cleverapps.DailyTasks.GROW_PLANT=44,cleverapps.DailyTasks.PRIORITY_TYPES=[],cleverapps.DailyTasks.ACTIVE_TASKS=4,"merge"===cleverapps.config.type&&(cleverapps.DailyTasks.ACTIVE_TASKS=6),cleverapps.DailyTasks.DURATION="1 day";var DailyTasksConfig={};DailyTasksConfig[cleverapps.DailyTasks.LOGIN_FACEBOOK]={data:{0:1},filter:function(){return"merge"!==cleverapps.config.type&&!cleverapps.flags.nologin&&!cleverapps.social.isLoggedIn()&&"facebook"===cleverapps.social.getCode()}},DailyTasksConfig[cleverapps.DailyTasks.LIKE_PAGE]={data:{0:1},filter:function(){return"merge"!==cleverapps.config.type&&!cleverapps.flags.nocommunity&&!cleverapps.serverFlags.hasFlag(cleverapps.ServerFlags.PAGE_LIKED)&&cleverapps.ShareBonus.IsRewardAvailable()}},
DailyTasksConfig[cleverapps.DailyTasks.INVITE_FRIENDS]={data:{1:1},filter:function(){return"merge"!==cleverapps.config.type&&cleverapps.social.isLoggedIn()&&cleverapps.ShareBonus.IsRewardAvailable()}},DailyTasksConfig[cleverapps.DailyTasks.SHARE]={data:{0:1},filter:function(){return"merge"!==cleverapps.config.type&&cleverapps.social.isLoggedIn()&&cleverapps.ShareBonus.IsRewardAvailable()&&-1===["android","amazon","ios"].indexOf(cleverapps.User.calcSource())}},DailyTasksConfig[cleverapps.DailyTasks.SEND_FRIEND_HELP]={data:{0:1},filter:function(){return"merge"!==cleverapps.config.type&&!cleverapps.flags.noviral&&levels.friendRequests.existRequestTypes(levels.FriendRequest.SENT_HELP_REQUESTS)}},DailyTasksConfig[cleverapps.DailyTasks.WATCH_ADS]={reward:"merge"===cleverapps.config.type?{coins:25}:void 0,dynamic:function(){if("merge"===cleverapps.config.type){var e=cleverapps.Random.random(7,10);return{2:e,3:e}}return{0:2,1:10,2:30}},filter:function(){return RewardedAdsManager.IsEnabled()}},
DailyTasksConfig[cleverapps.DailyTasks.SPEND_GOLD]={reward:"merge"===cleverapps.config.type?{rubies:6}:void 0,dynamic:function(){return"merge"===cleverapps.config.type?{0:5,1:5}:{1:500,2:1500}}},DailyTasksConfig[cleverapps.DailyTasks.PASS_LEVEL]={dynamic:function(){return"match3"===cleverapps.config.type?{0:2,1:10,2:25}:{0:1,1:5,2:10}},filter:function(){return-1!==["board","solitaire","differences","match3"].indexOf(cleverapps.config.type)}},DailyTasksConfig[cleverapps.DailyTasks.GUESS_EXTRA_WORDS]={data:{0:2,1:10,2:30},filter:function(){return"board"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.USE_HINTS]={dynamic:function(){return"stacks"===cleverapps.config.subtype?{0:1,1:3,2:5}:{0:2,1:10,2:25}},filter:function(){return-1!==["board","solitaire","differences"].indexOf(cleverapps.config.type)}},DailyTasksConfig[cleverapps.DailyTasks.FINISH_EPISODE]={data:{1:1,2:3},filter:function(){return"board"===cleverapps.config.type&&cleverapps.metha.getType(
)===Metha.HOSE&&levels.user.level<5&&!levels.user.isPassedAll()}},DailyTasksConfig[cleverapps.DailyTasks.TOURNAMENT_WIN]={data:{0:1,1:2,2:8},filter:function(){var e=cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_REGULAR);return"board"===cleverapps.config.type&&cleverapps.isKnockoutGame()||e&&e.tournament}},DailyTasksConfig[cleverapps.DailyTasks.RECEIVE_PERIODIC_BONUS]={data:{0:1,1:1},filter:function(){return-1!==["board","differences"].indexOf(cleverapps.config.type)}},DailyTasksConfig[cleverapps.DailyTasks.BEAT_FRIEND]={data:{1:1},filter:function(){return"board"===cleverapps.config.type&&cleverapps.metha.getType()===Metha.HOSE&&0<cleverapps.friends.listFriends().length}},DailyTasksConfig[cleverapps.DailyTasks.PLAY_BONUS_ROUND]={data:{0:1},filter:function(){return"board"===cleverapps.config.type&&cleverapps.bonusRoundChest&&!cleverapps.bonusRoundChest.locked}},DailyTasksConfig[cleverapps.DailyTasks.GUESS_WORDS_WITH_LETTER]={dynamic:function(){var e=["t","a","o","i","n",
"s","h","r"],t=["d","l","c","u","m","w","g","y","p"];return cleverapps.settings.language===cc.sys.LANGUAGE_RUSSIAN?(e=["ч","е","г","п","в","ф","л","д"],t=["а","и","у","с","к","р","о","я","н"]):cleverapps.settings.language===cc.sys.LANGUAGE_JAPANESE&&(e=["あ","か","ち","す","と","モ","エ","コ"],t=["は","ラ","わ","ひ","ニ","る","く","ロ","ん"]),cleverapps.Random.choose([{letter:cleverapps.Random.choose(e),0:3,1:15},{letter:cleverapps.Random.choose(t),0:5,1:15}])},filter:function(){return"board"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.COLLECT_CARDS_BY_VALUE]={data:{0:5,1:10,2:15},dynamic:function(){return{cardValue:cleverapps.Random.choose(Card.VALUES.slice(8))}},filter:function(){return"solitaire"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.COLLECT_CARDS_BY_SUIT]={data:{0:10,1:25,2:50},dynamic:function(){return{cardSuit:cleverapps.Random.choose(Card.SUITS)}},filter:function(){return"solitaire"===cleverapps.config.type}},
DailyTasksConfig[cleverapps.DailyTasks.COLLECT_JOKERS_USING_COMBO]={data:{0:5,1:10,2:15},filter:function(){return"solitaire"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.COLLECT_STARS]={data:{0:3,1:20,2:50},filter:function(){return"match3"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.USE_MULTI_COLOR_CELL]={data:{0:3,1:10,2:30},filter:function(){return"match3"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.USE_BOOSTER]={dynamic:function(){return cleverapps.Random.choose([{booster:CellBooster.ID,0:2,1:5,2:10},{booster:LineBooster.ID,0:2,1:4,2:8},{booster:ColorBooster.ID,1:3,2:7}])},filter:function(){return"match3"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.COLLECT_COLOR_CELLS]={data:{0:50,1:50},dynamic:function(){return{color:cleverapps.Random.choose(["a","b","c","d","e","w"])}},filter:function(){return"match3"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.PASS_LEVELS_IN_ROW]={data:{
1:5,2:10},filter:function(){return"match3"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.LEVEL_CHAMPION]={data:{1:1,2:3},filter:function(){return"match3"===cleverapps.config.type&&0<cleverapps.friends.listFriends().length}},DailyTasksConfig[cleverapps.DailyTasks.COLLECT_HERO_CELLS]={data:{0:5,1:25,2:75},dynamic:function(){return{color:cleverapps.Random.choose(["a","b","c","d","e","w"])}},filter:function(){return"match3"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.COLLECT_SPECIAL_CELLS]={dynamic:function(){var e={16:{1:20,2:50,cell_code:FishCell.GOAL_ID},23:{0:10,1:50,2:150,cell_code:FlowerCell.GOAL_ID},31:{0:20,1:100,2:300,cell_code:NutCell.GOAL_ID},76:{0:20,1:100,2:300,cell_code:Mark.GOAL_ID},91:{1:5,2:15,cell_code:MouseCell.GOAL_ID},151:{0:30,1:150,2:500,cell_code:IceTile.GOAL_ID},181:{1:5,2:15,cell_code:DragonCell.GOAL_ID},196:{1:20,2:50,cell_code:CookieManCell.GOAL_ID},376:{1:50,2:150,cell_code:CakeCell.GOAL_ID},406:{0:20,1:100,2:300,
cell_code:MuffinGoalCell.GOAL_ID},526:{0:20,1:100,2:300,cell_code:WaffleCell.GOAL_ID},616:{0:20,1:100,2:300,cell_code:LollipopCell.GOAL_ID},706:{1:5,2:15,cell_code:DogCell.GOAL_ID},736:{0:10,1:50,2:150,cell_code:TruffleCell.GOAL_ID},766:{0:20,1:100,2:300,cell_code:ColorCookieManCell.GOAL_ID}},t=levels.user.getProgress(),s=Object.keys(e).filter(function(e){return t<=+e}),n=cleverapps.Random.choose(s);if(n)return e[n]},filter:function(){return"match3"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.DESTROY_ENT]={reward:{coins:15},dynamic:function(){var e=cleverapps.Random.random(3,4);return{0:e,1:e}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.MAKE_ORDER]={reward:{coins:15},data:{0:3,1:3},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.USE_RAINBOW]={reward:{coins:25},dynamic:function(){var e=cleverapps.Random.random(1,2);return{2:e,3:e}},filter:function(){
return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.MERGE_SOLDIERS]={reward:{coins:50,exp:100},dynamic:function(){return{4:cleverapps.Random.random(10,15)}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.HARVEST_FRUITS]={reward:{coins:15},dynamic:function(){var e=cleverapps.Random.random(30,40);return{2:e,3:e}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.USE_WORKER]={reward:{coins:15},dynamic:function(){var e=cleverapps.Random.random(25,50);return{2:e,3:e}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.OPEN_CHEST]={reward:{coins:50,exp:100},dynamic:function(){return{4:cleverapps.Random.random(20,30)}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.CLAIM_BUGS]={reward:{coins:50,exp:100},dynamic:function(){return{4:cleverapps.Random.random(40,55)}},
filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.MERGE]={reward:{coins:20},dynamic:function(){var e={mergeAmount:cleverapps.Random.choose([9,17])},t=cleverapps.Random.random(5,10);return 17===e.mergeAmount&&(t=cleverapps.Random.random(3,4)),Object.assign(e,{2:t,3:t})},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.BUY_UNITS_SHOP_ITEMS]={reward:{coins:30},dynamic:function(){var e=cleverapps.Random.random(1,2);return{0:e,1:e}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.PLAY_MINESWEEPER]={reward:{coins:30},dynamic:function(){var e=cleverapps.Random.random(2,3);return{2:e,3:e}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.SPEND_COINS]={reward:{coins:35},data:{0:35,1:35},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.CREATE_SOURCE]={
reward:{coins:50,exp:100},dynamic:function(){return{4:cleverapps.Random.random(10,15)}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.COMPLETE_ALL]={reward:"merge"===cleverapps.config.type?{unit:{code:"dailytaskchest",stage:0,amount:1}}:void 0,dynamic:function(){var e={};return e[cleverapps.DailyTasks.ACTIVE_TASKS-1]=cleverapps.DailyTasks.ACTIVE_TASKS-1,e},filter:function(){return!0}},DailyTasksConfig[cleverapps.DailyTasks.WATCH_TELLY]={reward:{coins:20},dynamic:function(){var e=cleverapps.Random.random(3,4);return{0:e,1:e}},filter:function(){return"merge"===cleverapps.config.type&&RewardedAdsManager.IsEnabled()}},DailyTasksConfig[cleverapps.DailyTasks.BUILD]={reward:{coins:50,exp:100},dynamic:function(){return{4:cleverapps.Random.random(50,65)}},filter:function(){return"merge"===cleverapps.config.type}},DailyTasksConfig[cleverapps.DailyTasks.GROW_PLANT]={reward:{coins:50,exp:100},dynamic:function(){return{4:cleverapps.Random.random(
85,100)}},filter:function(){return"merge"===cleverapps.config.type}};var DailyTasksWindow=Window.extend({onWindowLoaded:function(){this.createContent();var e=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.DailyTasksWindow,!0);this._super({name:"dailytaskswindow",title:cleverapps.dailyTasks.isRunning()?"messages:DailyTasksWindow.title":"messages:DailyTasksWindow.finished.title",content:this.content,styles:e,adjustToContent:void 0!==bundles.windows.frames.window_foreground_png,foreground:bundles.windows.frames.window_foreground_png}),this.content.baseScale=this.content.scale,cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_TASKS_OPEN_WINDOW),cleverapps.playSession.set(cleverapps.EVENTS.SESSION_DAILY_TASK_OPEN_WINDOW,!0),cleverapps.audio.playSound(bundles.main.urls.window_effect),this.addPerson()},createContent:function(){cleverapps.dailyTasks.processResults(),cleverapps.dailyTasks.isRunning()||cleverapps.dailyTasks.startNew(),this.createContentNode(),
this.showTasks()},createContentNode:function(){var e=[this.createTimer()],t=cleverapps.styles.DailyTasksWindow.content;cleverapps.dailyTasks.getCompleteAllTask()&&e.push(new DailyTasksCompleteAllView),e.push(this.createScroll()),cleverapps.dailyTasks.getCompleteAllTask()&&(e=e.reverse());var s=new cleverapps.Layout(e,{direction:cleverapps.UI.VERTICAL,y:t.offsetY,margin:t.margin,padding:t.padding});this.content?this.content.innerContent&&this.content.innerContent.removeFromParent():(this.content=new cc.Node,this.content.setAnchorPoint2(),this.content.setContentSize2(s.getContentSize())),this.content.innerContent=s,this.content.addChild(s),s.setPositionRound(this.content.width/2,this.content.height/2)},createTimer:function(){var e=cleverapps.styles.DailyTasksWindow.timer,t=cleverapps.dailyTasks.getTimeLeft(),s=new cleverapps.CountDown(t,{onFinish:this.close.bind(this)}),n={font:cleverapps.styles.FONTS.DAILY_TASK_TIMER_TEXT||e.timerFont,timerPosition:e.timerPosition};(
bundles.dailytasks.frames.daily_task_timer_bg_png||e.bg)&&(n.background_content=cleverapps.UI.createScale9Sprite(bundles.dailytasks.frames.daily_task_timer_bg_png||e.bg),n.background_content.setContentSize2(e.width,e.height));var i=new cleverapps.CountDownView(s,n),o=cleverapps.UI.generateOnlyText("messages:DailyTasksWindow.TimeToRefresh",e.font);o.fitTo(e.text.width);var a=[o,i];if(bundles.dailytasks.frames.daily_task_timer_icon_png){var r=new cc.Sprite(bundles.dailytasks.frames.daily_task_timer_icon_png);i.addChild(r),r.setPositionRound(e.icon),r.setScale(e.icon.scale||1)}return this.timer=new cleverapps.Layout(a,{direction:cleverapps.UI.HORIZONTAL,margin:e.margin,padding:e.padding,y:e.layoutOffsetY}),this.timer.setCascadeOpacityEnabled(!0),i.setCascadeOpacityEnabled(!0),i.y+=e.offsetY||0,this.timer},createScroll:function(){var e=cleverapps.styles.DailyTasksWindow.content,t=this.createTasks(),s=this.scroll=new cleverapps.UI.ScrollView(t);if(s.setContentSize2(
e.scroll||t.getContentSize()),e.scroll&&e.scroll.top){var n=cleverapps.UI.createScale9Sprite(bundles.dailytasks.frames.daily_task_foreground);n.setContentSize2(e.scroll.top),s.addChild(n),n.setPositionRound(e.scroll.top)}return s},createTasks:function(){var n=this.taskViews=[];cleverapps.dailyTasks.getTasks().filter(function(e){return e.type!==cleverapps.DailyTasks.COMPLETE_ALL}).forEach(function(e,t){var s=new DailyTaskView(e,this.close.bind(this));n.push(s)},this);var e=cleverapps.styles.DailyTasksWindow.tasks;return new cleverapps.Layout(n.reverse(),{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding})},showTasks:function(){this.scroll.scrollTo(cleverapps.UI.ScrollView.SCROLLS.LOWER_RIGHT),this.runAction(new cc.Sequence(new cc.DelayTime(.55),new cc.CallFunc(function(){for(var e=this.taskViews.length-1,t=0;t<this.taskViews.length;t++){var s=this.taskViews[t].task;if(s.isFinished()&&!s.collected){e=t;break}}var n=.6;0!==e&&e!==this.taskViews.length-1||(n=.95),
this.scroll.scrollToMakeNodeVisible(this.taskViews[e],1,{easing:cc.easeBackInOut(),visibleBox:{top:n,bottom:n}})}.bind(this))))},addPerson:function(){var e=cleverapps.styles.DailyTasksWindow.person;if(e){var t=this.person=new WindowPerson;t.setAnchorPoint2(),t.setPositionRound(e),this.addChild(t);var s=cleverapps.unitsLibrary.getCurrentHero()||"dwarf";t.changePerson({json:bundles.dialogues.jsons[s+"_json"],idle:"dialogue_smile",scale:1.3})}},onChangeSceneSize:function(){this._super(),this.person&&this.person.setPositionRound(cleverapps.styles.DailyTasksWindow.person)}});DailyTasksWindow.prototype.listBundles=function(){return["dailytasks"]},cleverapps.styles.DailyTasksWindow={tasks:{margin:20,padding:{x:0,y:20}},content:{margin:20,padding:{x:-40,y:0}},timer:{bg:bundles.main.frames.missions_item_bg_png,width:240,height:70,margin:20,timerPosition:{x:0,y:0},font:cleverapps.styles.FONTS.WINDOW_TEXT,timerFont:cleverapps.styles.FONTS.TEXT,dy:0,text:{width:450}},contentOffset:-60}
;var DailyTaskView=cc.Node.extend({ctor:function(e,t){this._super(),this.task=e;var s=cleverapps.styles.DailyTaskView;this.setContentSize2(s.width,s.height),this.setAnchorPoint2(),this.addBackground(),this.addTitle(),this.addIcon(),this.addProgressBar(),this.addCheckMark(),this.addRewardButton(t),this.setCascadeOpacityEnabled(!0)},onEnterTransitionDidFinish:function(){this._super(),this.task.onUpdateListener=this.createListener(this.onUpdate.bind(this)),this.onUpdate()},addBackground:function(){var e=this.background=cleverapps.UI.createScale9Sprite(bundles.dailytasks.frames.daily_task_bg_png);e.setContentSize2(this.getContentSize()),e.setPositionRound(this.width/2,this.height/2),this.addChild(e)},addRewardButton:function(){var e=cleverapps.styles.DailyTaskView,t=cleverapps.UI.generateOnlyText("messages:DailyTaskView.Get",cleverapps.styles.FONTS.DAILY_TASK_BUTTON_TEXT),s=this.rewardButton=new cleverapps.UI.Button({width:e.button.width,height:e.button.height,button_png:e.button_png,
button_on_png:e.button_on_png,content:t,onClicked:this.onRewardButtonClick.bind(this)});s.setPositionRound(e.button.x,e.button.y),this.addChild(s),s.setScale(e.button.scale),s.baseScale=s.scale,s.setCascadeOpacityEnabled(!0),s.setLocalZOrder(1)},onRewardButtonClick:function(){new DailyTaskRewardWindow(this.task)},addProgressBar:function(){var e=cleverapps.styles.DailyTaskView.progressBar,t=this.progressBar=cleverapps.UI.createScale9Sprite(bundles.dailytasks.frames.daily_task_bar_bg_png,cleverapps.UI.Scale9Rect.TwoPixelXY);t.setContentSize2(e.width+e.bg.padding.x,e.height+e.bg.padding.y),t.setCascadeOpacityEnabled(!0);var s=this.progressBar.bar=new ScaledProgressBar({progress:bundles.dailytasks.frames.daily_task_bar_png,progressFrames:e.progressFrames,padding:e.padding});s.setDimension(e.width,e.height),s.setPercentage(0),t.addChild(s),s.setPositionRound(e.offsetX,e.offsetY),this.progressBarText=cleverapps.UI.generateImageText(this.task.progress+"/"+this.task.goal,
cleverapps.styles.FONTS.DAILY_TASK_PROGRESS_FONT),t.addChild(this.progressBarText),this.progressBarText.setPositionRound(e.text),this.addChild(t),t.setPositionRound(e)},addTitle:function(){var e=cleverapps.styles.DailyTaskView,t=this.task.getTitle(),s=this.title=cleverapps.UI.generateOnlyText(t.text,cleverapps.styles.FONTS.DAILY_TASK_FONT||e.title.font,t.replace);s.setHorizontalAlignment(e.title.align),s.setDimensions(e.title.width,0),s.setPositionRound(e.title.x,e.title.y),e.title.height&&s.fitTo(void 0,e.title.height),this.addChild(s,1)},addCheckMark:function(){var e=cleverapps.styles.DailyTaskView,t=this.check=new cc.Sprite(bundles.dailytasks.frames.daily_task_mark_png||bundles.main.frames.goal_done_sign||bundles.game.frames.goal_done_sign);t.setPositionRound(e.check.x,this.height/2),t.visible=!1,this.addChild(t)},addIcon:function(){var e=cleverapps.styles.DailyTaskView.icon,t=this.icon=new cc.Node;t.setAnchorPoint2();var s=this.task.getIcon();if(
bundles.dailytasks.frames.daily_task_icon_bg_png){var n=cleverapps.UI.createScale9Sprite(bundles.dailytasks.frames.daily_task_icon_bg_png,cleverapps.UI.Scale9Rect.TwoPixelXY);n.setContentSize2(e.bg?e.bg:n.getContentSize()),t.addChild(n),t.setContentSize2(n.getContentSize()),n.setPositionRound(t.width/2,t.height/2),e.fitTo&&cleverapps.UI.fitToBox(t,{width:n.width*e.fitTo.scale,height:n.height*e.fitTo.scale})}else t.setContentSize2(s.getContentSize());if(bundles.dailytasks.frames.missions_frame_white_png){var i=this.iconFrame=new cc.Sprite(bundles.dailytasks.frames.missions_frame_white_png);i.setPositionRound(t.width/2,t.height/2),t.addChild(i)}s.setPositionRound(t.width/2,t.height/2),t.addChild(s),t.setCascadeOpacityEnabled(!0),this.addChild(t),t.setPositionRound(e.x,e.y)},updateProgress:function(){this.progressBar.bar.setPercentage(this.task.progress/this.task.goal*100),this.progressBarText.setString(this.task.progress+"/"+this.task.goal)},onUpdate:function(){
this.rewardButton.setVisible(!this.task.collected&&!this.task.expired&&this.task.isFinished()),this.iconFrame&&this.iconFrame.setSpriteFrame(new cc.Sprite(this.task.isFinished()?bundles.dailytasks.frames.missions_frame_green_png:bundles.dailytasks.frames.missions_frame_white_png).getSpriteFrame()),this.check&&(this.check.visible=this.task.isFinished()&&this.task.collected),this.updateProgress(),this.task.isFinished()&&(this.progressBar.setVisible(!1),this.task.collected&&[this.icon,this.background,this.title,this.rewards].forEach(function(e){e&&(e.runForAllChildren(function(e){e.setCascadeOpacityEnabled(!0)},{selfRun:!0}),e.setOpacity(cleverapps.styles.DailyTaskView.opacity))}))}});cleverapps.styles.DailyTaskView={width:700,height:180,opacity:200,icon:{x:{align:"left",dx:25},y:{align:"center",dy:4}},title:{x:{align:"center",dx:-30},y:{align:"center",dy:0},width:290,height:140,font:cleverapps.styles.FONTS.WINDOW_SMALL_TEXT,align:cc.TEXT_ALIGNMENT_CENTER},check:{x:{align:"right",dx:-100}
},button:{width:210,height:110,scale:.8,x:{align:"right",dx:-25},y:{align:"center",dy:0}},progressBar:{width:180,height:40,offsetX:0,offsetY:0,x:{align:"right",dx:-45},y:{align:"center",dy:0},bg:{padding:{x:0,y:0}},text:{x:{align:"center"},y:{align:"center",dy:2}}}};var DailyTaskRewardWindow=RewardWindow.extend({onWindowLoaded:function(e){var t=e.getReward();this._super({reward:t,title:"messages:DailyTaskRewardWindow.title",name:"dailytaskrewardwindow",text:"messages:DailyTaskRewardWindow.text",animation:cleverapps.styles.DailyTaskRewardWindow.animation,rewardName:"dailyTasks"}),this.task=e},onReceiveReward:function(){cleverapps.dailyTasks.collect(this.task)},receiveReward:function(){this.task.isFinished()&&!this.task.collected&&(this.onReceiveReward(),this.reward&&cleverapps.Chest.prototype._receiveReward(this.reward))}});cleverapps.styles.DailyTaskRewardWindow={animation:{json:bundles.main.jsons.reward_spine_json}};var DailyTasksCompleteAllView=cc.Node.extend({ctor:function(){
this._super(),this.setAnchorPoint2(),this.setContentSize2(cleverapps.styles.DailyTasksCompleteAllView),this.task=cleverapps.dailyTasks.getCompleteAllTask(),this.createContent(),this.task.onUpdateListener=this.createListener(this.onUpdate.bind(this)),this.onUpdate()},createContent:function(){var e=cleverapps.styles.DailyTasksCompleteAllView;if(bundles.dailytasks.frames.complete_all_bg_png){var t=cleverapps.UI.createScale9Sprite(bundles.dailytasks.frames.complete_all_bg_png,cleverapps.UI.Scale9Rect.TwoPixelXY);t.setContentSize2(e),this.addChild(t),t.setPositionRound(this.width/2,this.height/2)}var s=this.task.getIcon();if(bundles.dailytasks.frames.daily_tasks_icon_bg_png){var n=new cc.Sprite(bundles.dailytasks.frames.daily_tasks_icon_bg_png);n.addChild(s),s.setPositionRound(n.width/2,n.height/2),s=n}this.addChild(s),s.setPositionRound(e.icon);var i=cleverapps.UI.generateOnlyText("messages:DailyTasksWindow.CTA",cleverapps.styles.FONTS.DAILY_TASK_CTA||cleverapps.styles.FONTS.WINDOW_TEXT)
;i.fitTo(e.text.width),this.addChild(i),i.setPositionRound(e.text),this.createCompleteAllBar(),this.createCompleteAllPrize()},createCompleteAllBar:function(){var e=cleverapps.styles.DailyTasksCompleteAllView.bar,t=this.bar=new ScaledProgressBar({progress:bundles.dailytasks.frames.daily_task_bar_png,background:bundles.dailytasks.frames.daily_task_bar_bg_all_png||bundles.dailytasks.frames.daily_task_bar_bg_png,padding:e.padding,progressFrames:e.progressFrames,barText:{text:this.task.progress+"/"+this.task.goal,font:cleverapps.styles.FONTS.DAILY_TASKS_BAR,dy:e.dy}});t.setDimension(e.width,e.height),t.setPercentage(this.task.progress/this.task.goal*100),this.addChild(t),t.setPositionRound(e)},createCompleteAllPrize:function(){var e=cleverapps.styles.DailyTasksCompleteAllView.prize;this.task.isFinished()&&this.task.collected?this.addMark():("merge"===cleverapps.config.type?(this.completeAllPrize=UnitView.getUnitImage(this.task.getReward().unit),cleverapps.UI.fitToBox(this.completeAllPrize,e
)):this.completeAllPrize=new cc.Sprite(bundles.dailytasks.frames.prize_png),cleverapps.tooltipManager.create(this.completeAllPrize,{text:"messages:DailyTasksWindow.tooltip",position:cleverapps.styles.UI.Tooltip.LOCATION.below}),this.addChild(this.completeAllPrize),this.completeAllPrize.setPositionRound(e))},addMark:function(){var e=new cc.Sprite(bundles.dailytasks.frames.daily_task_mark_png||bundles.main.frames.goal_done_sign);this.addChild(e),e.setPositionRound(cleverapps.styles.DailyTasksCompleteAllView.mark)},onUpdate:function(){var e=cleverapps.styles.DailyTasksCompleteAllView.prize;if(this.bar.setPercentage(this.task.progress/this.task.goal*100),this.bar.updateBarText(this.task.progress+"/"+this.task.goal),this.task.isFinished()&&!this.task.collected){TooltipManager.prototype.remove(this.completeAllPrize);var t=new FingerView;if(t.setPositionRound(this.completeAllPrize.getPosition()),t.setScale(e.finger.scale),this.addChild(t),t.standardLoop({delayOnBegin:!0,delay:1}),e.shine){
var s=new cleverapps.Spine(e.shine);s.setPositionRound(this.completeAllPrize.width/2,this.completeAllPrize.height/2),s.setAnimation(0,"idle",!0),this.completeAllPrize.addChild(s,-1)}this.completeAllPrize.baseScale=this.completeAllPrize.scale,cleverapps.UI.applyHover(this.completeAllPrize),cleverapps.UI.onClick(this.completeAllPrize,function(){"merge"!==cleverapps.config.type||0!==Game.currentGame.map.countEmptySlots()?(new DailyTaskRewardWindow(this.task),t.removeFromParent(),this.completeAllPrize.removeFromParent(),this.addMark()):Game.currentGame.onHintMessage("messages:Spawn.nospace",!0,{left:1})}.bind(this));var n=this.completeAllPrize.getPosition();this.completeAllPrize.runAction(new cc.RepeatForever(new cc.Sequence(new cc.MoveTo(1.5,n.x,n.y+e.flyY),new cc.RotateBy(.25,10),new cc.RotateBy(.25,-10),new cc.RotateBy(.25,10),new cc.RotateBy(.25,-10),new cc.MoveTo(1,n.x,n.y),new cc.DelayTime(1.5))))}}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{DAILY_TASKS_BAR:{name:"default",
size:35}}),cleverapps.styles.DailyTasksCompleteAllView={width:1050,height:200,icon:{x:{align:"left",dx:70},y:{align:"center",dy:5}},bar:{width:700,height:45,x:{align:"right",dx:-110},y:{align:"center",dy:-20},padding:{top:2,bottom:5,left:3,right:2}},text:{width:700,x:{align:"right",dx:-110},y:{align:"top",dy:-15}},prize:{width:110,height:110,maxScale:1.4,flyY:10,shine:!1,x:{align:"right",dx:-80},y:{align:"center",dy:-20},finger:{scale:.8}},mark:{x:{align:"right",dx:-50},y:{align:"center",dy:-10}}};var DailyTasksNotifications=function(){this.active=void 0,this.waitingList=[],this.onCreate=function(e){}};DailyTasksNotifications.prototype.notify=function(e,t){if(this.active&&this.active.task.type===e.type)this.active.updateProgress();else{if(!this.findWaiting(e)){var s=.5;"match3"===cleverapps.config.type&&cleverapps.environment.isGameScene()&&!this.active&&(s=1.5);var n=new DailyTaskNotification({task:e,progressed:t,delay:s});this.waitingList.push(n)}this.showNext()}},
DailyTasksNotifications.prototype.reset=function(){this.active&&(this.active.reset(),this.active=void 0),this.waitingList=[]},DailyTasksNotifications.prototype.findWaiting=function(t){return this.waitingList.filter(function(e){return e.task.type===t.type})[0]},DailyTasksNotifications.prototype.showNext=function(){if(0!==this.waitingList.length&&!this.active){var e=this.waitingList.shift();this.onCreate(e),e.onGetView()?((this.active=e).show(),e.setOnFinish(this.onFinish.bind(this,e))):this.showNext()}},DailyTasksNotifications.prototype.onFinish=function(e){this.active===e&&(this.active=void 0),this.showNext()};var DailyTaskNotificationsView=cc.Node.extend({ctor:function(){this._super();var e=this.model=cleverapps.dailyTasks.notification;e.reset(),e.onCreate=this.createListener(this.createView.bind(this))},createView:function(e){var t=new DailyTaskNotificationView(e);this.parent.addChild(t)}}),DailyTaskNotification=function(e){this.task=e.task,this.progressed=e.progressed,
this.delay=void 0!==e.delay?e.delay:.5,this.state=DailyTaskNotification.STATE.NONE,this.onShow=function(){},this.onUpdateProgress=function(){},this.onHide=function(){},this.onGetView=function(){}};DailyTaskNotification.prototype.reset=function(){this.stopPlayer(),delete this.onFinish},DailyTaskNotification.prototype.stopPlayer=function(){this.player&&(this.player.stop(),delete this.player)},DailyTaskNotification.prototype.setOnFinish=function(e){this.onFinish=e},DailyTaskNotification.prototype.updateProgress=function(){this.state===DailyTaskNotification.STATE.ON_TARGET&&(this.stopPlayer(),this.player=new ActionPlayer([function(e){this.onUpdateProgress(),setTimeout(e,1e3)}.bind(this),function(e){this.state=DailyTaskNotification.STATE.GOING_BASE,this.onHide(),setTimeout(e,400)}.bind(this)]),this.player.play(this.onFinish))},DailyTaskNotification.prototype.show=function(){this.state===DailyTaskNotification.STATE.NONE&&(this.stopPlayer(),this.player=new ActionPlayer([function(e){
setTimeout(e,1e3*this.delay)}.bind(this),function(e){this.state=DailyTaskNotification.STATE.GOING_TARGET,this.onShow(),setTimeout(e,500)}.bind(this),function(e){e(),this.state=DailyTaskNotification.STATE.ON_TARGET,this.updateProgress()}.bind(this)]),this.player.play())},DailyTaskNotification.STATE={NONE:0,GOING_TARGET:1,ON_TARGET:2,GOING_BASE:3};var DailyTaskNotificationView=cc.Scale9Sprite.extend({ctor:function(e){this.model=e;var t=this.styles=cleverapps.styles.DailyTaskNotificationView,s=bundles.dailytask_notification.frames.notification_bg;this._super(s,cleverapps.UI.getScale9Rect(s,cleverapps.UI.Scale9Rect.TwoPixelXY)),this.setContentSize2(t),this.setAnchorPoint2(),this.baseAlignment={x:{align:"center"},y:{align:"top",dy:this.height}},this.targetAlignment={x:{align:"center"},y:{align:"top",dy:this.styles.targetY}},this.setPositionRound(this.baseAlignment),this.setLocalZOrder(MenuBarView.ZORDER+1),this.createText(),this.createIcon(),this.createBar(),cleverapps.UI.onClick(this,
this.onClick.bind(this)),e.onShow=this.createListener(this.show.bind(this)),e.onUpdateProgress=this.createListener(this.updateProgress.bind(this)),e.onHide=this.createListener(this.hide.bind(this)),e.onGetView=this.createListener(function(){return this}.bind(this)),this.setVisible(!1)},onClick:function(){cleverapps.environment.isMainScene()&&cleverapps.metha.display({focus:"notificationDailyTask",control:"merge"===cleverapps.config.type?["MenuBarGameLevelItem","MenuBarCoinsItem","MenuBarGoldItem","MenuBarLivesItem"]:void 0,action:function(e){new DailyTasksWindow,cleverapps.metha.onceNoWindowsListener=e}})},createText:function(){var e=cleverapps.styles.DailyTaskNotificationView.text,t=this.model.task.getTitle(),s=cleverapps.UI.generateOnlyText(t.text,cleverapps.styles.FONTS.DAILY_TASK_FONT||cleverapps.styles.FONTS.WINDOW_TEXT,t.replace);s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(e.width,0),s.fitToHeight(e.height),this.addChild(s),s.setPositionRound(e)},
createIcon:function(){var e=cleverapps.styles.DailyTaskNotificationView.icon,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e);var s=new cc.Sprite(bundles.dailytask_notification.frames.icon);t.addChild(s),s.setPositionRound(t.width/2,t.height/2),cleverapps.UI.fitToBox(s,{width:t.width-e.fitTo.padding,height:t.width-e.fitTo.padding,maxScale:e.fitTo.maxScale}),this.addChild(t),t.setPositionRound(e)},createBar:function(){var e=cleverapps.styles.DailyTaskNotificationView.bar,t=this.bar=new ScaledProgressBar({progress:bundles.dailytask_notification.frames.daily_task_bar_png,background:bundles.dailytask_notification.frames.daily_task_bar_bg_png,padding:e.padding,progressFrames:e.progressFrames,barText:{text:this.model.task.progress-this.model.progressed+"/"+this.model.task.goal,font:cleverapps.styles.FONTS.DAILY_TASK_PROGRESS_FONT,dy:e.textDy}});t.setDimension(e.width,e.height),t.setPercentage((this.model.task.progress-this.model.progressed)/this.model.task.goal*100),this.addChild(t),
t.setPositionRound(e)},show:function(){this.setPositionRound(this.baseAlignment),this.stopAllActions(),this.basePosition=this.getPosition();var e=this.targetPosition=this.calculatePositionRound(this.targetAlignment);this.setVisible(!0),this.runAction(new cc.MoveTo(.5,e).easing(new cc.easeBackOut))},updateProgress:function(){this.stopAllActions();var e=this.bar.getPercentage(),t=this.model.task.progress/this.model.task.goal*100;this.bar.animatedChange(t-e);var s=this.model.task.progress+"/"+this.model.task.goal;if(this.model.task.isFinished()&&(s=Messages.get("done"),cleverapps.audio.playSound(bundles.dailytask_notification.urls.task_done_sfx),bundles.dailytask_notification.jsons.bar_flash_json)){var n=new cleverapps.Spine(bundles.dailytask_notification.jsons.bar_flash_json);this.bar.addChild(n),n.setPositionRound(cleverapps.styles.DailyTaskNotificationView.bar.animation),n.setAnimation(0,"animation",!1),n.setCompleteListenerRemove()}this.bar.updateBarText(s)},hide:function(){
this.stopAllActions(),this.runAction(new cc.Sequence(new cc.MoveTo(.4,this.basePosition).easing(new cc.easeBackIn),new cc.RemoveSelf))}});cleverapps.styles.DailyTaskNotificationView={width:550,height:220,targetY:50,icon:{width:125,height:125,x:{align:"left",dx:45},y:{align:"center",dy:-10},fitTo:{padding:15,maxScale:1.4}},text:{width:300,height:60,x:{align:"right",dx:-60},y:{align:"center",dy:20}},bar:{width:300,height:40,textDy:0,x:{align:"right",dx:-60},y:{align:"center",dy:-35},padding:{top:0,bottom:0,left:0,right:0},animation:{x:{align:"center",dx:0},y:{align:"center",dy:-2}}}};var BattlePass=function(e){this.mission=e;var n=0;this.levels=e.levels.map(function(e,t){n+=e.task.goal;var s=cleverapps.extend({level:t},e);return s.task.goalTotal=n,s}),(e.battlePass=this).load(e.details),this.checkComplete()&&this.mission.complete(),this.onAnimateAmountChange=function(){},this.onNextAmountStep=function(){},this.onAnimateProgressChange=function(){},this.onNextProgressStep=function(){},
this.onShowFinger=function(){}};BattlePass.prototype.getCollectItemName=function(){return this.mission.collectItemName},BattlePass.prototype.showProgress=function(){if(this.isAllProgressShown())this.onShowFinger();else{var e=this.shownProgress.level>=this.progress.level?{level:this.progress.level,progress:this.progress.progress}:{level:this.shownProgress.level,progress:this.levels[this.shownProgress.level].task.goal};this.onAnimateAmountChange(this.shownProgress,e,this.levels[this.shownProgress.level].task.goal),this.onAnimateProgressChange(e,function(){if(this.shownProgress.level>=this.progress.level)return this.shownProgress=e,this.save(),void this.showProgress();e={level:this.shownProgress.level+1,progress:0},this.onNextAmountStep(e),this.onNextProgressStep(this.shownProgress.level,function(){this.shownProgress=e,this.save(),this.showProgress()}.bind(this))}.bind(this))}},BattlePass.prototype.checkComplete=function(){return this.isAllTasksCompleted()&&this.hasPremium(
)&&0===this.countAvailableRewards()},BattlePass.prototype.save=function(){this.mission.details=this.getInfo(),this.mission.update(0,this.getInfo())},BattlePass.prototype.load=function(e){var t=function(e){return e.reduce(function(e,t){return e|1<<t},0)};if(this.premium=e.premium||e.boughtPremium||void 0,this.rewards=e.rewards||0,this.premiumRewards=e.premiumRewards||0,this.progress=e.progress||0,Array.isArray(e.levelsToReward)&&(this.rewards=t(e.levelsToReward)),Array.isArray(e.levelsToPremReward)&&(this.premiumRewards=t(e.levelsToPremReward)),e.currentTask){var s=Math.min(e.currentTask.level||0,this.levels.length-1),n=e.currentTask.progress||0;this.progress=this.levels[s].task.goalTotal-this.levels[s].task.goal+n}this.shownProgress=e.shownProgress||this.progress,this.progress=this.extract(this.progress),this.shownProgress=this.extract(this.shownProgress);var i=(1<<this.progress.level)-1;(this.rewards>i||this.premiumRewards>i)&&cleverapps.throwAsync(
"Battle pass reward available on next level"),this.rewards&=i,this.premiumRewards&=i},BattlePass.prototype.compact=function(e){for(var t=0,s=0;s<e.level;s++)t+=this.levels[s].task.goal;return t+e.progress},BattlePass.prototype.extract=function(e){for(var t=0,s=0;s<this.levels.length;s++){if(e<t+this.levels[s].task.goal)return{level:s,progress:e-t};t+=this.levels[s].task.goal}return{level:this.levels.length,progress:0}},BattlePass.prototype.getInfo=function(){return{premium:this.premium,rewards:this.rewards,premiumRewards:this.premiumRewards,progress:this.compact(this.progress),shownProgress:this.compact(this.shownProgress)}},BattlePass.prototype.completeCurrentTask=function(){this.progress.level<this.levels.length&&this.addProgress(this.levels[this.progress.level].task.goal-this.progress.progress)},BattlePass.prototype.takeLevelReward=function(e,t){if(this.hasReward(e,t)){var s=t?this.levels[e].premiumReward:this.levels[e].reward;if(s.unit){var n=cleverapps.toArray(s.unit).reduce(
function(e,t){return e+t.amount},0)-Game.currentGame.map.countEmptySlots();if(0<n)return void Game.currentGame.onHintMessage("messages:Spawn.nospace",!0,{left:n})}return t?this.premiumRewards^=1<<e:this.rewards^=1<<e,this.save(),this.logEventByType((t?cleverapps.EVENTS.BATTLE_PASS_RECEIVED_PREMIUM:cleverapps.EVENTS.BATTLE_PASS_RECEIVED)+"_"+e),this.checkComplete()&&this.mission.complete(),s}},BattlePass.prototype.hasReward=function(e,t){return(t?this.premiumRewards:this.rewards)&1<<e},BattlePass.prototype.setPremium=function(){this.premium=1,this.save(),this.logEventByType(cleverapps.EVENTS.BATTLE_PASS_BOUGHT)},BattlePass.prototype.isAllTasksCompleted=function(){return this.progress.level>=this.levels.length},BattlePass.prototype.isAllProgressShown=function(){return this.progress.level===this.shownProgress.level&&this.progress.progress===this.shownProgress.progress},BattlePass.prototype.getLevelGoal=function(e){return this.levels[e].task.goal},
BattlePass.prototype.getAvailableRewardsSet=function(){return this.hasPremium()?this.rewards<<this.levels.length|this.premiumRewards:this.rewards},BattlePass.prototype.countAvailableRewards=function(){var e=Number(this.getAvailableRewardsSet()).toString(2).match(/1/g);return e&&e.length||0},BattlePass.prototype.getFirstShownReward=function(){for(var e=0,t=this.shownProgress.level;e<t;++e){if(this.hasPremium()&&this.hasReward(e,!0))return{level:e,premium:!0};if(this.hasReward(e))return{level:e,premium:!1}}},BattlePass.prototype.addProgress=function(e){if(0!==e){var t=this.extract(this.compact(this.progress)+e);if("match3"===cleverapps.config.type){var s=cleverapps.sideBar.findMissionIcon(this.mission.type);s&&s.addProgress(t.progress-this.progress.progress)}for(var n=this.progress.level;n<t.level;n++)this.rewards=this.rewards|1<<n,this.premiumRewards=this.premiumRewards|1<<n,this.logEventByType(cleverapps.EVENTS.BATTLE_PASS_FINISH_TASK+"_"+n),this.preparePush();this.progress=t,
this.save(),cleverapps.sideBar.resetByClassName(MissionIcon)}},BattlePass.prototype.preparePush=function(){var e=this.mission.getTimeLeft();if(!(e>cleverapps.parseInterval("3 days")||(cleverapps.localPushes.cancelPush(cleverapps.LocalPushes.TYPES.BATTLEPASS_UNCOMPLETED),this.isAllTasksCompleted()))){var t=new Date;t.setHours(21,0,0);var s=t-Date.now();0<s&&s<e-cleverapps.parseInterval("10 minutes")&&cleverapps.localPushes.sendPush(cleverapps.LocalPushes.TYPES.BATTLEPASS_UNCOMPLETED,s)}},BattlePass.prototype.hasPremium=function(){return this.premium},BattlePass.prototype.noRewards=function(){return 0===this.progress.level},BattlePass.prototype.logEventByType=function(e,t){e=(this.mission.type===Mission.TYPE_PURCHASE_BATTLEPASS?"purchase_":"")+e,cleverapps.eventLogger.logEvent(e,t)},BattlePass.classifyAmount=function(e){return 300<e?3:80<e?2:1},BattlePass.PRICE=750;var BattlePassMissionLogic=function(e){this.mission=e,this.battlePass=new BattlePass(this.mission),
this.shownAvailableRewards=0,Game.currentGame&&Game.currentGame.bpPointsPlanner&&Game.currentGame.bpPointsPlanner.removeWrongPoints(!0)};BattlePassMissionLogic.prototype.canRemoveSilently=function(){return this.battlePass.checkComplete()},BattlePassMissionLogic.prototype.canRemove=function(){return 0===this.battlePass.countAvailableRewards()},BattlePassMissionLogic.prototype.hasLastChance=function(){return!this.battlePass.isAllTasksCompleted()},BattlePassMissionLogic.prototype.processEvent=function(e,t){return!(!this.mission.isRunning()||this.mission.eventType!==e)&&(this.battlePass.addProgress(t.amount),!0)},BattlePassMissionLogic.prototype.needDisplayWindow=function(){var e=this.battlePass.getAvailableRewardsSet();return e^=e&this.shownAvailableRewards},BattlePassMissionLogic.prototype.onDisplayWindow=function(){this.shownAvailableRewards=this.battlePass.getAvailableRewardsSet()},BattlePassMissionLogic.prototype.stop=function(){"merge"===cleverapps.config.type&&Game.currentGame&&(
Game.currentGame.map.listAvailableUnits().forEach(function(e){e.setPoints(0)}),Game.currentGame&&Game.currentGame.bpPointsPlanner&&Game.currentGame.bpPointsPlanner.removeWrongPoints())},BattlePassMissionLogic.prototype.beforeRemove=function(){if("merge"===cleverapps.config.type&&Game.currentGame&&this.mission.state===Mission.STATE_SHOWN_FINISHVIEW){var e=this.battlePass.levels[this.battlePass.levels.length-1];SpecialOffer.CreateOffer({type:SpecialOffer.TYPE_BATTLEPASS,target:this.battlePass.hasPremium()?e.premiumReward.unit:e.reward.unit,delay:200})}},BattlePass.LEVELS=[{level:0,task:{goal:3},reward:{unlimitedLives:"30 minutes"},premiumReward:{unlimitedLives:"12 hours"}},{level:1,task:{goal:5},reward:{boosters:{5:1}},premiumReward:{boosters:{5:3}}},{level:2,task:{goal:8},reward:{unlimitedLives:"1 hour"},premiumReward:{boosters:{0:3}}},{level:3,task:{goal:12},reward:{boosters:{6:1}},premiumReward:{unlimitedLives:"12 hours"}},{level:4,task:{goal:15},reward:{unlimitedLives:"2 hours"},
premiumReward:{boosters:{1:3}}},{level:5,task:{goal:20},reward:{exp:20},premiumReward:{gold:300}},{level:6,task:{goal:25},reward:{boosters:{7:1}},premiumReward:{boosters:{2:3}}},{level:7,task:{goal:30},reward:{boosters:{6:2}},premiumReward:{unlimitedLives:"12 hours"}},{level:8,task:{goal:40},reward:{unlimitedLives:"2 hours"},premiumReward:{boosters:{0:5}}},{level:9,task:{goal:50},reward:{boosters:{2:1}},premiumReward:{gold:500}}];var BattlePassRewardIcon=cc.Node.extend({ctor:function(e){switch(this._super(),this.options=e=e||{},this.setAnchorPoint2(),void 0===e.prefix&&(e.prefix="x"),e.type){case"gold":case"rubies":this.initWithSprite(bundles.reward_icons.frames.reward_gold_png,e.prefix+e.value);break;case"exp":this.initWithSprite(bundles.reward_icons.frames.reward_exp_png,e.prefix+e.value);break;case"battlePass":this.initWithSprite(bundles.battle_pass.frames.ticket,"messages:BattlePassProduct.Title");break;case"coins":this.initWithSprite(bundles.reward_icons.frames.reward_coin_png,
e.prefix+e.value);break;case"lives":case"energy":this.initWithSprite(bundles.reward_icons.frames.reward_energy_png,e.prefix+e.value);break;case"unlimitedLives":this.initWithSprite(bundles.reward_icons.frames.life_unlim,Product.FormatUnlimitedLives(e.value).title);break;case"boosters":var t=Object.keys(e.value)[0];this.initWithSprite(RewardsHelper.ICONS[t],e.prefix+e.value[t]);break;case"wands":this.initWithSprite(bundles.reward_icons.frames.reward_wand_png,e.prefix+e.value);break;case"worker":e.value=Product.FormatUnlimitedLives(e.value),this.initWithSprite(bundles.reward_icons.frames.reward_worker_png,e.value.title,{amount:e.value.amount});break;case"unit":this.initWithUnit(e.value,e.prefix),this.rewardName=cleverapps.unitsLibrary.getUnitName(e.value)+" x"+e.value.amount}},initWithSprite:function(e,t,s){this.initWithNode(new cc.Sprite(e),t,s)},initWithUnit:function(e,t){var s=UnitView.getUnitImage(e);s&&(s.clearTrack&&s.clearTrack(0),this.initWithNode(s,t+e.amount))},
initWithNode:function(e,t,s){var n=this.options,i=cleverapps.styles.BattlePassRewardIcon;this.setContentSize2(i.icon),this.icon=e,cleverapps.UI.fitToBox(e,{width:i.icon.width,height:i.icon.height,maxScale:n.premium?i.icon.prem.scale:i.icon.free.scale}),e.setPositionRound(i.icon),this.addChild(e);var o=n.font||cleverapps.styles.FONTS.BATTLEPASS_REWARD_TEXT;cleverapps.UI.ImageFont.IsApplicable(o,t)?(this.text=cleverapps.UI.generateImageText(t,o,s),this.text.setPositionRound(i.text)):(this.text=cleverapps.UI.generateOnlyText(t,o,s),this.text.setPositionRound(i.regularText)),this.text.setLocalZOrder(1),this.addChild(this.text)},setDiscolor:function(e){e?(this.icon.setOpacity(120),this.icon.setColor(new cc.Color(0,150,255,255)),this.text.setOpacity(120),this.text.setScale(.8)):(this.icon.setOpacity(255),this.icon.setColor(new cc.Color(255,255,255,255)),this.text.setScale(1),this.text.setOpacity(255))},setAttention:function(e){var t=cleverapps.styles.BattlePassRewardIcon.attention;if(
this.attention&&(this.attention.removeFromParent(),delete this.attention),e){var s=this.attention=new cc.Sprite(e);s.setPositionRound(t),this.addChild(s)}},setShining:function(e){var t=cleverapps.styles.BattlePassRewardIcon.shining;if(this.shining&&(this.shining.removeFromParent(),delete this.shining),e){var s=this.shining=new cleverapps.Spine(bundles.battle_pass.jsons.shining_json||bundles.merge.jsons.prize_shining_json,t.scale);s.setAnimation(0,t.animation,!0),s.setPositionRound(t),s.setLocalZOrder(-1),this.addChild(s)}},setFlying:function(e,t){var s=cleverapps.styles.BattlePassRewardIcon.flying;this.flyingAction&&(this.stopAction(this.flyingAction),delete this.flyingAction),e&&(this.flyingAction=this.runAction(new cc.Sequence(new cc.DelayTime(1.5*Math.random()),new cc.CallFunc(function(){this.flyingAction=this.runAction(new cc.RepeatForever(new cc.Sequence(new cc.CallFunc(function(){this.icon.runAction(new cc.Sequence(new cc.MoveBy(3,0,s.offsetY),new cc.CallFunc(function(){
Math.random()<.7/t.countAvailableRewards()&&this.icon.runAction(new cc.Sequence(new cc.RotateBy(.25,10),new cc.RotateBy(.25,-10),new cc.RotateBy(.25,10),new cc.RotateBy(.25,-10)))},this),new cc.MoveBy(1.5,0,-s.offsetY)))},this),new cc.DelayTime(4.5))))},this))))},setClaimable:function(e,t,s){this.setClaimButton(e,t,s),e&&!t&&cleverapps.UI.onClick(this,this.claimReward.bind(this,s))},setClaimButton:function(e,t,s){if(this.claimButton&&(this.claimButton.removeFromParent(),this.claimButton=void 0),e){var n=cleverapps.styles.BattlePassRewardIcon.claimButton,i=this.claimButton=new cleverapps.UI.Button({button_images:cleverapps.UI.Button.Images.small_button_green,styles:n,content:cleverapps.UI.generateOnlyText("messages:Claim",cleverapps.styles.FONTS.BATTLEPASS_BUTTON_TEXT),onClicked:this.claimReward.bind(this,s)});i.setAnchorPoint2(),i.setPositionRound(n),this.addChild(i),t&&i.disable()}},updateState:function(e,t){var s,n=cleverapps.styles.BattlePassRewardIcon;switch(this.options.level<t&&(
s=e.hasReward(this.options.level,this.options.premium)?this.options.premium&&!e.hasPremium()?"premium_required":"fresh":"gained"),cc.eventManager.removeListeners(this),this.setDiscolor(!1),this.setAttention(),this.setShining(!1),this.setFlying(!1),this.setClaimable(!1),s){case"premium_required":this.setClaimable(!0,!1,e);break;case"fresh":this.setShining(!0),this.setFlying(!0,e),this.setClaimable(!0,!1,e);break;case"gained":"merge"===cleverapps.config.type?this.setAttention(bundles.mergeui.frames.checkmark_stroke_png):this.setAttention(bundles.reward_icons.frames.checkmark_stroke_png||bundles.battle_pass.frames.attention_ok_png);break;default:this.setDiscolor(!0),cleverapps.tooltipManager.create(this,{text:"messages:BattlePassWindow.moreItemsToolTip."+e.getCollectItemName(),position:cleverapps.styles.UI.Tooltip.LOCATION.above,swallowTouches:!1,ignoreOnTouchMoved:!0,ignoreOnTouchMovedThreshold:n.ignoreOnTouchMovedThreshold})}},openAnimation:function(){this.runAction(new cc.Sequence(
new cc.ScaleTo(.2,1.2),new cc.ScaleTo(.2,1))),this.claimButton&&(this.claimButton.setVisible(!1),this.claimButton.runAction(new cc.Sequence(new cc.DelayTime(.4),new cc.Show)))},claimReward:function(e){if(!(e.shownProgress.level<this.options.level))if(!this.options.premium||e.hasPremium()){var t=e.takeLevelReward(this.options.level,this.options.premium);t&&new RewardWindow({reward:t})}else new BattlePassBuyTicketWindow(e)},addFinger:function(){var e=this.finger=new FingerView;return e.setPositionRound({align:"center"},{align:"center"}),e.standardLoop({delayOnBegin:!0,delay:2.5}),this.claimButton?this.claimButton.addChild(e):this.addChild(e),e},getPreferredBundles:function(){return["merge"]}});BattlePassRewardIcon.createIconsFromRewardsList=function(e,t,s){var n=[];for(var i in e){var o=e[i];if("unit"===i){o=cleverapps.toArray(o);for(var a=0;a<o.length;++a){var r=new BattlePassRewardIcon({type:i,value:o[a],level:t,premium:s});n.push(r)}}else n.push(new BattlePassRewardIcon({type:i,
value:o,level:t,premium:s}))}return n},cleverapps.overrideFonts(cleverapps.styles.FONTS,{BATTLEPASS_REWARD_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.BattlePassRewardIcon={icon:{x:{align:"center",dx:0},y:{align:"center",dy:0},width:180,height:180,free:{scale:1.1},prem:{scale:1.2}},text:{x:{align:"right",dx:0},y:{align:"bottom",dy:10}},regularText:{x:{align:"right",dx:0},y:{align:"bottom",dy:-2}},attention:{x:{align:"center",dx:0},y:{align:"bottom",dy:-60}},shining:{x:{align:"center",dx:-8},y:{align:"center",dy:0},animation:"idle",scale:1.2},flying:{offsetY:8},claimButton:{width:170,height:60,x:{align:"center"},y:{align:"bottom",dy:-70}},ignoreOnTouchMovedThreshold:10};var BattlePassProgress=cc.Node.extend({ctor:function(e,t){this._super(),this.battlePass=e;var s=cleverapps.styles.BattlePassProgress;this.setContentSize2(t-2*s.paddingX,s.height);var n=this.createTasks();n.setPositionRound(s.tasks)
;var i=this.progressBar=new ScaledProgressBar({progress:bundles.battle_pass.frames.progress_bar,background:bundles.battle_pass.frames.progress_substrate,padding:s.progressBar.padding});i.setDimension(n.content.width-s.tasks.width/2+s.progressBar.padding.left+s.progressBar.padding.right,s.progressBar.height),i.setAnchorPoint2(0,.5),i.setPositionRound(s.progressBar),i.setLocalZOrder(-1),i.setPercentage(this.calcProgressPercentage(e.shownProgress)),n.content.addChild(i),this.addLines();var o=this.progressScroll=new cleverapps.UI.ScrollView(n,{childrenVisibility:cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_NONE,direction:cleverapps.UI.ScrollView.DIR_HORIZONTAL,touchPadding:s.touchPadding,scrollBarEnabled:!1});o.setContentSize2(this.width,this.height+s.scroll.offsetHeight),o.scrollTo(cleverapps.UI.ScrollView.SCROLLS.LOWER_RIGHT),o.setPositionRound(s.scroll),this.addChild(o),e.onAnimateProgressChange=this.createListener(this.animateProgressChange.bind(this)),
e.onNextProgressStep=this.createListener(this.animateProgressStep.bind(this)),e.onShowFinger=this.createListener(this.showFinger.bind(this))},createTasks:function(){var i=cleverapps.styles.BattlePassProgress.tasks,e=this.battlePass.levels,o=(this.battlePass,new cc.Node);o.setAnchorPoint2(),o.setContentSize2(i.width*e.length+i.contentOffset,i.height);var a=this.rewardIcons=[];e.forEach(function(e,t){var s=BattlePassRewardIcon.createIconsFromRewardsList(e.reward,e.level,!1);this.addIcons(o,s,i.width*(.5+t),i.reward.y),a.push.apply(a,s);var n=BattlePassRewardIcon.createIconsFromRewardsList(e.premiumReward,e.level,!0);this.addIcons(o,n,i.width*(.5+t),i.premiumReward.y),a.push.apply(a,n)}.bind(this)),this.updateIcons(),this.createTaskPoints(o),this.createTasksBgs(o);var t=cleverapps.UI.wrapWithPadding(o,{left:i.contentOffset});return t.content=o,t},createTaskPoints:function(a){var r=cleverapps.styles.BattlePassProgress.tasks,l=this.battlePass.shownProgress.level
;this.taskPoints=this.battlePass.levels.map(function(e,t){var s=l>e.level,n=new cc.Sprite(bundles.battle_pass.frames[s?"task_point_completed":"task_point"]);n.setPositionRound(r.width*(.5+t),r.taskPoint.y),a.addChild(n);var i=s?cleverapps.styles.FONTS.BATTLEPASS_PROGRESS_POINT_COMPLETED:cleverapps.styles.FONTS.BATTLEPASS_PROGRESS_POINT,o=n.numb=cleverapps.UI.generateImageText(t+1,i);return o.setFont(i),a.addChild(o,1),o.setPositionRound(n.getPosition()),n})},createTasksBgs:function(n){var i=cleverapps.styles.BattlePassProgress,s=function(e,t){var s=cleverapps.UI.createScale9Sprite(bundles.battle_pass.frames[e?"prize_bg_orange1":"prize_bg_blue1"]);s.setContentSize2(i.tasks.bgs),s.setPositionRound(i.tasks.width*(.5+t),e?i.line.first.y:i.line.second.y),n.addChild(s,-1)}.bind(this);this.battlePass.levels.forEach(function(e,t){t%2!=0&&(s(!0,t),s(!1,t))},this)},addIcons:function(e,t,s,n){var i=new cleverapps.Layout(t,{direction:cleverapps.UI.VERTICAL});i.setAnchorPoint2(),i.setPositionRound(
s,n),i.setLocalZOrder(1),e.addChild(i)},addLines:function(){var n=cleverapps.styles.BattlePassProgress.line,e=function(e,t){var s=cleverapps.UI.createScale9Sprite(e);s.setPositionRound(t),s.setContentSize2(this.width,n.height),this.addChild(s,-2)}.bind(this);e(bundles.battle_pass.frames.prize_bg_orange2,n.first),e(bundles.battle_pass.frames.prize_bg_blue2,n.second)},calcProgressPercentage:function(e){var t=this.battlePass.levels.length;if(e.level>=t)return 100;if(0===e.level&&0===e.progress)return 0;var s=.5/t,n=e.progress/this.battlePass.getLevelGoal(e.level);return 0===e.level?Math.floor(s*n*100)+1:Math.floor(100*(s+(1-s)/(t-1)*(e.level-1+n)))+1},scrollToLevel:function(e,t,s){this.taskPoints[t]&&this.progressScroll.scrollTo(this.taskPoints[t].getPosition(),e,s)},animateProgressChange:function(e,t){this.scrollToLevel(.8,e.level);var s=this.calcProgressPercentage(e);this.progressBar.runAction(new ScaledProgressBarProgressTo(.8,s).easing(cc.easeCubicActionOut())),this.runAction(
new cc.Sequence(new cc.DelayTime(.6),new cc.CallFunc(t)))},animateProgressStep:function(t,e){var s=this.taskPoints[t];s.numb.setFont(cleverapps.styles.FONTS.BATTLEPASS_PROGRESS_POINT_COMPLETED);var n=s.numb.scale;s.numb.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.15*n),new cc.ScaleTo(.15,n))),s.runAction(new cc.Sequence(new cc.CallFunc(function(){s.setSpriteFrame(bundles.battle_pass.frames.task_point_completed)}),new cc.ScaleTo(.2,1.15),new cc.CallFunc(function(){this.rewardIcons.filter(function(e){return e.options.level===t}).forEach(function(e){e.updateState(this.battlePass,t+1),e.openAnimation()}.bind(this)),this.battlePass.levels[t].energy&&Game.currentGame.addReward("energy",this.battlePass.levels[t].energy,s,{beginScale:.8,withoutDelta:!0})}.bind(this)),new cc.ScaleTo(.15,1),new cc.CallFunc(e)))},updateIcons:function(){this.rewardIcons.forEach(function(e){e.updateState(this.battlePass,this.battlePass.shownProgress.level)}.bind(this))},showFinger:function(){
var t=this.battlePass.getFirstShownReward();if(t){var e=this.rewardIcons.filter(function(e){return e.options.level===t.level&&e.options.premium===t.premium})[0];this.finger=e.addFinger()}},hideFinger:function(){this.finger&&(this.finger.removeFromParent(),this.finger=void 0)}});cleverapps.styles.BattlePassProgress={paddingX:150,height:700,touchPadding:{bottom:60},scroll:{x:{align:"center",dx:0},y:{align:"center",dy:0},offsetHeight:100},progressBar:{x:{align:"left",dx:0},y:{align:"center",dy:1},height:33,padding:{top:-1,bottom:-3,left:-3,right:0}},line:{first:{x:{align:"center",dx:0},y:{align:"center",dy:159}},second:{x:{align:"center",dx:0},y:{align:"center",dy:-151}},height:311},tasks:{width:220,height:500,contentOffset:30,taskPoint:{y:{align:"center"}},premiumReward:{y:{align:"center",dy:208}},reward:{y:{align:"center",dy:-120}},bgs:{width:220,height:311}}};var BattlePassWindow=Window.extend({onWindowLoaded:function(e){this.mission=e;var t=cleverapps.styles.BattlePassWindow
;this._super({name:"battlepasswindow",title:"match3"===cleverapps.config.type&&"messages:BattlePassWindow.title",content:this.createContent(),closeButton:!0,adjustToContent:"merge"===cleverapps.config.type,contentOffsetY:t.contentOffsetY,extraWidth:t.extraWidth,extraHeight:t.extraHeight,bgOffset:t.bgOffset,foreground:bundles.windows.frames.window_foreground_png,styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.BattlePassWindow.window,!0),help:"match3"===cleverapps.config.type&&function(){new BattlePassRulesWindow}}),cleverapps.metha.showControlsWhileFocused(BattlePassWindow.CONTROLS),e.battlePass.onAnimateAmountChange=this.createListener(this.animateAmountChange.bind(this)),e.battlePass.onNextAmountStep=this.createListener(this.animateAmountStep.bind(this))},onShow:function(){var e=this.mission;e.logic.onDisplayWindow();var t=e.battlePass.shownProgress.level;if(e.battlePass.isAllProgressShown()){var s=e.battlePass.getFirstShownReward();void 0!==s&&(t=s.level)}
if(this.progress.hideFinger(),this.progress.updateIcons(),this.runAction(new cc.Sequence(new cc.DelayTime(.4),new cc.CallFunc(function(){this.progress.scrollToLevel(.8,t,{easing:cc.easeBackInOut(),callback:function(){e.battlePass.showProgress()}})}.bind(this)))),this.buyTicketButton){var n=this.createTicketButton();n.setPositionRound(this.buyTicketButton),this.buyTicketButton.parent.addChild(n),this.buyTicketButton.removeFromParent(),this.buyTicketButton=n}},animateAmountChange:function(e,t,s){this.progressAmount.runAction(new BattlePassWindow.ProgressFromTo(.8,e.progress,t.progress,s))},animateAmountStep:function(e){var t,s,n=this.mission.battlePass.levels;e.level<n.length?(t=0,s=n[e.level].task.goal):t=s=n[n.length-1].task.goal,this.progressAmount.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.2),new cc.ScaleTo(.2,1),new BattlePassWindow.ProgressFromTo(0,t,t,s)))},createContent:function(){var e=cleverapps.styles.BattlePassWindow,t=cc.director.getWinSize().width-2*e.paddingX
;t<e.minWidth&&(t=e.minWidth),t>e.maxWidth&&(t=e.maxWidth);var s=this.content=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(t,e.height),this.createDescription(t);var n=this.progress=new BattlePassProgress(this.mission.battlePass,t);if(n.setPositionRound(e.progress),s.addChild(n),cleverapps.config.debugMode&&cleverapps.UI.onClick(n.progressBar,function(){this.mission.battlePass.completeCurrentTask(),this.mission.battlePass.showProgress()}.bind(this)),"match3"===cleverapps.config.type){var i=cleverapps.UI.createScale9Sprite(bundles.battle_pass.frames.window_foreground_png,cleverapps.UI.Scale9Rect.TwoPixelXY);i.setContentSize2(t-2*e.foreground.paddingX,e.foreground.height),s.addChild(i),i.setLocalZOrder(10),i.setPositionRound(e.foreground)}return this.createTop(t),this.createTickets(),s},createTop:function(e){var t=cleverapps.styles.BattlePassWindow.top,s=cleverapps.UI.createScale9Sprite(bundles.battle_pass.frames.details_background||bundles.mergeui.frames.details_background)
;s.setContentSize2(e-2*t.paddingX,t.height);var n=this.createTimer();s.addChild(n),n.setPositionRound(t.timer);var i=this.createProgressAmount();s.addChild(i),i.setPositionRound(t.amount),this.content.addChild(s),s.setPositionRound(t)},createProgressAmount:function(){var e=cleverapps.styles.BattlePassWindow.top.amount;(new cc.Node).setAnchorPoint2();var t=cleverapps.UI.generateOnlyText("messages:BattlePassWindow.completed",cleverapps.styles.FONTS.BATTLEPASS_PROGRESS_TEXT),s=[t];if(!this.mission.battlePass.isAllTasksCompleted()||!this.mission.battlePass.isAllProgressShown()){var n=new cc.Sprite(this.mission.type===Mission.TYPE_PURCHASE_BATTLEPASS?bundles.battle_pass.frames.progress_coin:bundles.battle_pass.frames.progress_star);n.y=e.star.y;var i=this.mission.battlePass.shownProgress,o=this.mission.battlePass.levels[i.level].task.goal,a=this.progressAmount=cleverapps.UI.generateImageText(i.progress+" / "+o,cleverapps.styles.FONTS.BATTLEPASS_PROGRESS_IMAGE_TEXT);a.y=e.progressAmount.y,
a.setAnchorPoint2(0,.5),t.setString(Messages.get("BattlePassWindow.progress")),s.push(n,a)}return new cleverapps.Layout(s,{direction:cleverapps.UI.HORIZONTAL,margin:e.margin})},createTimer:function(){var e,t=cleverapps.styles.BattlePassWindow.top.timer,s=this.mission;if(s.getTimeLeft()){e=cleverapps.UI.generateOnlyText("messages:BattlePassWindow.timer",cleverapps.styles.FONTS.BATTLEPASS_TITLE_TEXT);var n=new cc.Scale9Sprite(bundles.battle_pass.frames.timer_substrate);n.setContentSize2(t);var i=new cleverapps.CountDownView(new cleverapps.CountDown(s.getTimeLeft()),{font:cleverapps.styles.FONTS.BATTLEPASS_TIMER_TEXT,timerPosition:t.timerPosition,regularFontTimerPosition:t.regularFontTimerPosition});i.setPositionRound(t.countdown),i.fitTo(t.countdown.width,0),n.addChild(i);var o=new cc.Sprite(bundles.battle_pass.frames.timer_icon);o.setPositionRound(t.icon),o.setScale(t.icon.scale),n.addChild(o)}else e=cleverapps.UI.generateOnlyText("messages:BattlePassWindow.finished",
cleverapps.styles.FONTS.BATTLEPASS_TITLE_TEXT);return new cleverapps.Layout([e,n],{direction:cleverapps.UI.HORIZONTAL,margin:t.margin})},createTickets:function(){var o=cleverapps.styles.BattlePassWindow.ticket,e=cleverapps.UI.createScale9Sprite(bundles.battle_pass.frames.ticket_background,cleverapps.UI.Scale9Rect.TwoPixelXY);e.setContentSize2(o.width,e.height);var t=function(e){var t=[],s=e?cleverapps.styles.FONTS.BATTLEPASS_TICKET_TEXT:cleverapps.styles.FONTS.BATTLEPASS_TICKET_SMALL_TEXT,n=cleverapps.UI.generateOnlyText("messages:BattlePassWindow.ticket."+(e?"hint":"freeHint"),s);n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.setDimensions(e?o.prem.text:o.free.text,0),t.push(n);var i=new cleverapps.Spine(this.mission.type===Mission.TYPE_PURCHASE_BATTLEPASS?bundles.battle_pass.jsons.purchase_ticket_json:bundles.battle_pass.jsons.ticket_json);return i.setAnimation(0,e?"animation":"animation2",!0),t.unshift(i),e?(this.buyTicketButton=this.createTicketButton(),t.unshift(
this.buyTicketButton)):t.unshift(new cc.Sprite(bundles.reward_icons.frames.checkmark_stroke_png||bundles.battle_pass.frames.attention_ok_png)),new cleverapps.Layout(t,{margin:o.margin})}.bind(this),s=t(!0);cleverapps.UI.onClick(s,function(){this.mission.battlePass.hasPremium()||new BattlePassBuyTicketWindow(this.mission.battlePass)}.bind(this));var n=t();e.addChild(s),s.setPositionRound(o.prem),e.addChild(n),n.setPositionRound(o.free),e.setPositionRound(o),this.content.addChild(e,1)},createDescription:function(e){var t=cleverapps.styles.BattlePassWindow.description,s=cleverapps.UI.generateOnlyText(this.mission.type===Mission.TYPE_PURCHASE_BATTLEPASS?"messages:BattlePassWindow.purchase.description":"messages:BattlePassWindow.description",cleverapps.styles.FONTS.BATTLEPASS_DESCRIPTION_TEXT);"merge"===cleverapps.config.type?s.fitTo(e-2*t.paddingX):(s.setDimensions(e-2*t.paddingX,0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER));var n=[s];"merge"===cleverapps.config.type&&n.push(
new cleverapps.UI.Button({button_png:bundles.merge.frames.guide_button_png,button_on_png:bundles.merge.frames.guide_button_on_png,onClicked:function(){new this.mission.rulesWindow}.bind(this)}));var i=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:t.margin});this.content.addChild(i),i.setPositionRound(t)},createTicketButton:function(){var e=cleverapps.styles.BattlePassWindow.ticket.button;if(this.mission.battlePass.hasPremium())return new cc.Sprite(bundles.reward_icons.frames.checkmark_stroke_png||bundles.battle_pass.frames.attention_ok_png);var t="match3"===cleverapps.config.type?cleverapps.UI.Button.Images.small_button_green:cleverapps.UI.Button.Images.small_button_blue;return new UseGoldButton({button_images:t,price:BattlePass.PRICE,onClicked:this.buyTicket.bind(this),font:cleverapps.styles.FONTS.BATTLEPASS_BUTTON_TEXT,image:bundles.reward_icons.frames.gold_medium_png||bundles.reward_icons.frames.gold_small_png,eventName:"battle_pass_ruby",
disabled:!this.mission.isRunning()&&this.mission.battlePass.noRewards()},e)},listBundles:function(){return["battle_pass"]},buyTicket:function(){this.mission.battlePass.setPremium(),this.close(),new BattlePassWindow(this.mission),new RewardWindow({reward:{battlePass:{type:this.mission.type}}})}});cleverapps.isPixiJs()?(BattlePassWindow.ProgressFromTo=function(e,t,s,n){cc.FiniteTimeAction.apply(this,arguments),this.duration=e,this.from=t,this.to=s,this.goal=n},BattlePassWindow.ProgressFromTo.prototype=Object.create(cc.FiniteTimeAction.prototype),BattlePassWindow.ProgressFromTo.prototype.constructor=BattlePassWindow.ProgressFromTo,BattlePassWindow.ProgressFromTo.prototype.run=cleverapps.extendFunc(BattlePassWindow.ProgressFromTo.prototype.run,function(e,t){this._super(e,t);var s={progress:this.from};this.tween=new TWEEN.Tween(s).to({progress:this.to},this.duration).onUpdate(function(){this.target.setString(s.progress+" / "+this.goal)}.bind(this)).onComplete(this.f.bind(this)),
this.currentEasing&&this.tween.easing(this.currentEasing),this.tween.start()})):BattlePassWindow.ProgressFromTo=cc.ProgressFromTo.extend({ctor:function(e,t,s,n){this._super(e,t,s),this._goal=n},update:function(e){if(this.target instanceof cleverapps.UI.ImageFont){e=this._computeEaseTime(e);var t=Math.round(this._from+(this._to-this._from)*e);this.target.setString(t+" / "+this._goal)}}}),BattlePassWindow.CONTROLS=["MenuBarGoldItem","MenuBarLivesItem"],cleverapps.overrideFonts(cleverapps.styles.FONTS,{BATTLEPASS_TITLE_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT},BATTLEPASS_TIMER_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE},BATTLEPASS_PROGRESS_TEXT:{size:38,color:cleverapps.styles.COLORS.WHITE},BATTLEPASS_PROGRESS_IMAGE_TEXT:{size:42,color:cleverapps.styles.COLORS.WHITE},BATTLEPASS_TICKET_TEXT:{size:45,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT},BATTLEPASS_TICKET_SMALL_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT},BATTLEPASS_BUTTON_TEXT:{
size:60,color:cleverapps.styles.COLORS.WHITE},BATTLEPASS_DESCRIPTION_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT},BATTLEPASS_PROGRESS_POINT:{size:40,color:cleverapps.styles.COLORS.WHITE},BATTLEPASS_PROGRESS_POINT_COMPLETED:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT}}),cleverapps.styles.BattlePassWindow={minWidth:900,maxWidth:1800,height:1020,paddingX:50,top:{paddingX:50,height:220,x:{align:"center"},y:{align:"top",dy:-50},timer:{width:250,height:66,margin:40,x:{align:"center"},y:{align:"top",dy:-30},countdown:{x:{align:"center",dx:17},y:{align:"center"},width:180},icon:{x:{align:"left",dx:-35},y:{align:"center"},scale:.6}},amount:{margin:10,x:{align:"center",dx:0},y:{align:"bottom",dy:30},star:{y:0},progressAmount:{y:0}}},progress:{x:{align:"right",dx:-25},y:{align:"center",dy:-80}},ticket:{width:300,margin:-50,x:{align:"left",dx:30},y:{align:"center",dy:-76},prem:{text:250,x:{align:"center",dx:-10},y:{align:"center",dy:155}},free:{
text:210,x:{align:"center",dx:-10},y:{align:"center",dy:-160}},button:{width:170,height:60,scale:1.2}},description:{x:{align:"center"},y:{align:"bottom",dy:50},paddingX:125,margin:5},window:{}};var BattlePassLastChanceWindow=Window.extend({onWindowLoaded:function(e){this.mission=e,this.price=this.calcPrice(),this._super({name:"battlepasslastchancewindow",title:"messages:BattlePassLastChanceWindow.title",content:this.createContent(),buttons:this.createButtons(),closeButton:!0})},createContent:function(){var e=cleverapps.styles.BattlePassLastChanceWindow,t=cleverapps.UI.generateOnlyText("messages:BattlePassLastChanceWindow.upperText",cleverapps.styles.FONTS.DARK_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT);t.setAnchorPoint2(),t.setDimensions(e.texts.width,0),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var s=this.createRewards(),n=cleverapps.UI.generateOnlyText("messages:BattlePassLastChanceWindow.lowerText",cleverapps.styles.FONTS.DARK_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT)
;n.setAnchorPoint2(),n.setDimensions(e.texts.width,0),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var i=new cleverapps.Layout([n,s,t],{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding}),o=this.createOfferBadge();return o.setAnchorPoint2(),o.setPositionRound(e.offerBadge),i.addChild(o),i},createRewards:function(){var e=cleverapps.styles.BattlePassLastChanceWindow.rewards,t=this.mission.battlePass,s=t.levels[t.shownProgress.level],n=BattlePassRewardIcon.createIconsFromRewardsList(s.reward,s.level,!1).map(function(e){return this.createReward(e,!1)},this);return t.hasPremium()&&n.push.apply(n,BattlePassRewardIcon.createIconsFromRewardsList(s.premiumReward,s.level,!0).map(function(e){return this.createReward(e,!0)},this)),new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:e.margin})},createOfferBadge:function(){var e=cleverapps.styles.BattlePassLastChanceWindow.offerBadge,t=new cc.Sprite(bundles.battle_pass.frames.offer_badge);t.setRotation(
e.rotation);var s=Messages.get("BattlePassLastChanceWindow.badgeText").replace(/ /g,"\n"),n=cleverapps.UI.generateOnlyText(s,cleverapps.styles.FONTS.BP_LAST_CHANCE_BADGE||cleverapps.styles.FONTS.LIGHT_TEXT);return n.setPositionRound(e.text),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.fitTo(e.text.width,e.text.height),n.setLineHeight(Math.floor(1.1*n.getFontSize())),t.addChild(n),t},createButtons:function(){var e=cleverapps.styles.BattlePassLastChanceWindow.buttons;return[new UseGoldButton({button_images:cleverapps.UI.Button.Images.button_blue,price:this.price,onClicked:this.buyReward.bind(this),font:cleverapps.styles.FONTS.BATTLEPASS_BUTTON_TEXT,image:bundles.reward_icons.frames.gold_medium_png||bundles.reward_icons.frames.gold_small_png,eventName:"battle_pass_last_chance_ruby"},e)]},createReward:function(e,t){var s=cleverapps.styles.BattlePassLastChanceWindow.rewards,n=cleverapps.UI.createScale9Sprite(bundles.battle_pass.frames.icon_background,
cleverapps.UI.Scale9Rect.TwoPixelXY);if(n.setAnchorPoint2(),n.setContentSize2(s.background),e.setScale(1.3),e.setAnchorPoint2(),e.setPositionRound(s.icon),n.addChild(e),t){var i=new cc.Sprite(bundles.battle_pass.frames.icon_ribbon);i.setAnchorPoint2(),i.setPositionRound(s.ribbon),n.addChild(i);var o=Messages.get("BattlePassRewardIcon.ribbonText").replace(/ /g,"\n"),a=cleverapps.UI.generateOnlyText(o,cleverapps.styles.FONTS.BP_LAST_CHANCE_RIBBON);a.setPositionRound(s.text),a.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),a.fitTo(s.text.width,s.text.height),a.setLineHeight(Math.floor(1.2*a.getFontSize())),a.setRotation(s.text.rotation),i.addChild(a);var r=new cleverapps.Spine(this.mission.type===Mission.TYPE_PURCHASE_BATTLEPASS?bundles.battle_pass.jsons.purchase_ticket_json:bundles.battle_pass.jsons.ticket_json);r.setAnimation(0,"animation",!0),r.clearTrack(0),r.setAnchorPoint2(),r.setScale(1.3),r.setPositionRound(s.ticket),n.addChild(r)}return n},calcPrice:function(){return 100},
buyReward:function(){this.mission.battlePass.completeCurrentTask(),this.close(),new BattlePassWindow(this.mission)},listBundles:function(){return["battle_pass"]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{BP_LAST_CHANCE_RIBBON:{size:45,color:cleverapps.styles.COLORS.LIGHT_TEXT_COLOR,stroke:cleverapps.styles.DECORATORS.LIGHT_TEXT_STROKE,shadow:cleverapps.styles.DECORATORS.LIGHT_TEXT_SHADOW}}),cleverapps.styles.BattlePassLastChanceWindow={margin:40,padding:{x:20,top:30,bottom:100},texts:{width:800},buttons:{width:300,height:110},offerBadge:{x:{align:"right",dx:105},y:{align:"bottom",dy:-155},rotation:15,text:{x:{align:"center",dx:0},y:{align:"center",dy:-8},width:160,height:160}},rewards:{margin:30,background:{width:416,height:416},icon:{x:{align:"center",dx:0},y:{align:"center",dy:10}},ribbon:{x:{align:"left",dx:1},y:{align:"top",dy:4}},text:{x:{align:"center",dx:-26},y:{align:"center",dy:36},width:104,height:74,rotation:-45},ticket:{x:{align:"right",dx:109},y:{align:"bottom",
dy:-100}}}};var BattlePassRulesWindow=RulesWindow.extend({onWindowLoaded:function(){this._super({name:"piggybankwindow",styles:cleverapps.styles.BattlePassRulesWindow})}});cleverapps.styles.BattlePassRulesWindow={prefix:"messages:BattlePassRulesWindow.",subText:{left:{y:{align:"top",dy:-252}},right:{y:{align:"top",dy:-252}}},animation:{json:bundles.battle_pass.jsons.help_json,name:"animation"},bgOffset:{x:0,y:-40}};var BattlePassBuyTicketWindow=Window.extend({onWindowLoaded:function(e){this.battlePass=e,this._super({name:"BattlePassBuyTicketWindow",title:"messages:BattlePassBuyTicketWindow.title",content:this.createContent(),closeButton:!0,bgOffset:cleverapps.styles.BattlePassBuyTicketWindow.bgOffset,styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.BattlePassBuyTicketWindow,!0)}),this.createBadge()},createContent:function(){var e=cleverapps.styles.BattlePassBuyTicketWindow,t=this.createTicket(),s=Messages.get("BattlePassBuyTicketWindow.lowerText")
;s=cleverapps.splitHalfByWord(s).join("\n");var n=cleverapps.UI.generateOnlyText(s,cleverapps.styles.FONTS.GOLDEN_TICKET_TEXT);n.setAnchorPoint2(),n.fitTo(e.texts.width),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var i=this.createRewards(),o=this.createButtons();return new cleverapps.Layout([o,n,i,t],{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding})},createTicket:function(){var e=cleverapps.styles.BattlePassBuyTicketWindow.ticket,t=new cleverapps.Spine(this.battlePass.mission.type===Mission.TYPE_PURCHASE_BATTLEPASS?bundles.battle_pass.jsons.purchase_ticket_json:bundles.battle_pass.jsons.ticket_json,1.3);t.setAnchorPoint2(),t.setPositionRound({align:"center"},{align:"center"}),t.setAnimation(0,"animation",!0);var s=new cc.Node;return s.setAnchorPoint2(),s.setContentSize2(e),s.addChild(t),s},createRewards:function(){var n=cleverapps.styles.BattlePassBuyTicketWindow.rewards,e=this.battlePass.levels.map(function(e){var t=new cc.Scale9Sprite(
bundles.battle_pass.frames.icon_background_special||bundles.battle_pass.frames.icon_background);t.setContentSize2(n.background);var s=BattlePassRewardIcon.createIconsFromRewardsList(e.premiumReward,e.level,!0)[0];return s.setAnchorPoint2(),s.setPositionRound(n.icon),cleverapps.UI.fitToBox(s,n.icon),t.addChild(s),s.rewardName&&cleverapps.tooltipManager.create(s,{text:s.rewardName,position:cleverapps.styles.UI.Tooltip.LOCATION.below}),t}),t=new cleverapps.GridLayout(e,{columns:5,direction:cleverapps.GridLayout.TOP_TO_BOTTOM,margin:n.margin,padding:n.padding});if(t.setAnchorPoint2(),bundles.battle_pass.frames.rewards_background_special){var s=cleverapps.UI.createScale9Sprite(bundles.battle_pass.frames.rewards_background_special,cleverapps.UI.Scale9Rect.TwoPixelXY);s.setContentSize2(t.width,t.height),s.setAnchorPoint2(),s.setPositionRound(t.width/2,t.height/2),t.addChild(s,-1)}return t},createButtons:function(){var e=cleverapps.styles.BattlePassBuyTicketWindow.buttons
;return new UseGoldButton({button_images:"merge"===cleverapps.config.name?cleverapps.UI.Button.Images.button_blue:cleverapps.UI.Button.Images.button_green,price:BattlePass.PRICE,onClicked:this.buyTicket.bind(this),font:cleverapps.styles.FONTS.BATTLEPASS_BUTTON_TEXT,image:bundles.reward_icons.frames.gold_medium_png||bundles.reward_icons.frames.gold_small_png},e)},createBadge:function(){var e=cleverapps.styles.BattlePassBuyTicketWindow.badge,t=new cc.Sprite(bundles.battle_pass.frames.offer_badge);t.setRotation(e.rotation);var s=cleverapps.UI.generateOnlyText("messages:BattlePassBuyTicketWindow.badgeText",cleverapps.styles.FONTS.BP_VALUE_BADGE);s.setDimensions(e.text.width,0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setPositionRound(e.text),s.fitTo(e.text.width),t.addChild(s),this.window.addChild(t,2),t.setPositionRound(e.pos||e)},buyTicket:function(){this.battlePass.setPremium(),this.close(),new RewardWindow({reward:{battlePass:{ticket:this.battlePass.mission.type}}})},
listBundles:function(){return["battle_pass"]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{BP_VALUE_BADGE:{size:53,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},GOLDEN_TICKET_TEXT:{size:40,color:new cc.Color(121,75,57,255)}}),cleverapps.styles.BattlePassBuyTicketWindow={margin:60,padding:{x:10,top:0,bottom:0},bgOffset:{x:0,y:-100},texts:{width:800},buttons:{width:300,height:110},ticket:{width:180,height:200,x:{align:"center"},y:{align:"center"}},badge:{rotation:-15,x:{align:"left",dx:-120},y:{align:"top",dy:70},text:{width:160,x:{align:"center"},y:{align:"center"}}},rewards:{width:1e3,margin:{x:10,y:10},padding:{x:25,top:20,bottom:30},background:{width:120,height:120},icon:{width:100,height:100,maxScale:1,x:{align:"center"},y:{align:"center"}}}};var DailyCupPlayButton=cc.Node.extend({ctor:function(e){this._super(),this.options=e;var t=cleverapps.styles.DailyCupPlayButton;this.button=this.createButton(),this.addChild(this.button),
this.setAnchorPoint2(),this.setContentSize2(this.button.getContentSize()),this.button.setPositionRound(this.width/2,this.height/2),this.options.parent.addChild(this),this.setPositionRound(t)},createButton:function(){var e=cleverapps.styles.DailyCupPlayButton;return new cleverapps.UI.Button({text:Messages.get("Play"),font:cleverapps.styles.FONTS.DAILY_CUP_PLAY_BUTTON_TEXT||cleverapps.styles.FONTS.BIG_BUTTON_TEXT,onClicked:this.options.onClicked,width:e.width,height:e.height,button_png:e.button_png,button_on_png:e.button_on_png,padding:{x:e.titlePaddingX}})},enable:function(){this.button.enable()},disable:function(){this.button.disable()},setTitle:function(e){var t=cleverapps.styles.DailyCupPlayButton;this.button.text.setString(Messages.get(e)),this.button.text.fitTo(this.button.width-2*t.titlePaddingX)}});cleverapps.styles.DailyCupPlayButton={x:{align:"center"},y:{align:"bottom",dy:120},width:300,height:125,titlePaddingX:20};var DailyCupScene=cleverapps.FixedWidthScene.extend({
ctor:function(){this._super(cleverapps.Environment.SCENE_DAILY_CUP),this.mainContainer=new cc.Node,this.mainContainer.setAnchorPoint2(),this.mainContainer.setContentSize(this.scene.getContentSize()),this.mainContainer.setPositionRound(this.scene.width/2,this.scene.height/2),cleverapps.UI.makeHideable(this.mainContainer,cleverapps.UI.SCALE_ANIMATION),cleverapps.metha.registerControl("dailyCupMainContainer",this.mainContainer),this.scene.addChild(this.mainContainer),this.table=new DailyCupTable(cleverapps.dailyCup,cleverapps.styles.DailyCupTable,cleverapps.DailyCupRow,this.mainContainer),this.createTableBg(),this.createTitleBg(),this.createTitle(),this.createPlayButton(),this.createHelpButton(),this.createLeadersButton(),cleverapps.playSession.set(cleverapps.EVENTS.DAILY_CUP_DAU,!0),this.onNoConnectionInfo(),cleverapps.dailyCup.onNoConnectionListener=this.createListener(this.onNoConnectionInfo.bind(this)),cleverapps.dailyCup.isActive()||this.onChangeActivation(),
cleverapps.dailyCup.onActivationListener=this.createListener(this.onChangeActivation.bind(this)),this.updateState(),cleverapps.dailyCup.updateListeners.scene=this.createListener(this.updateState.bind(this)),cleverapps.environment.episodeNo=DailyCup.EPISODE_ID,cleverapps.placements.run(Placements.INTERMEDIATE)},getRefreshSceneActionOnChangeSize:function(){return function(e){cleverapps.scenes.replaceScene(new DailyCupScene,e)}},getBackgroundStyles:function(){return cleverapps.styles.DailyCupScene.background},createTableBg:function(){var e=this.getStyles().tableBg;if(e){var t=this.tableBg=cleverapps.UI.createScale9Sprite(bundles.main.frames.table_bg_png||bundles.daily_cup.frames.table_bg_png||bundles.windows.frames.window_bg_png,cleverapps.UI.Scale9Rect.TwoPixelXY);if(t.setContentSize(e.width*this.table.tableView.scaleX,e.height),this.mainContainer.addChild(t),t.setPositionRound(this.mainContainer.width/2+e.x,this.mainContainer.height/2+e.y),e.stitches&&new StitchesComponent(t,e.stitches)
,e.innerBg){var s=new cc.Scale9Sprite(bundles.main.frames.window_inner_bg_png);s.setContentSize2(e.innerBg.width*this.table.tableView.scaleX,e.innerBg.height),this.mainContainer.addChild(s),s.setPositionRound(e.innerBg)}}},createLeadersButton:function(){var e=this.getStyles().leadersButton,t=new cc.Sprite(bundles.daily_cup.frames.daily_cup_leaders_icon_png);this.scene.addChild(t),t.setPositionRound(e),t.setLocalZOrder(1),t.baseScale=t.scale=e.scale,cleverapps.UI.applyHover(t),cleverapps.UI.onClick(t,function(){cleverapps.metha.display({focus:"DailyCupLeadersWindow",action:function(e){new DailyCupLeadersWindow,cleverapps.metha.onceNoWindowsListener=e}})}),cleverapps.UI.makeHideable(t,cleverapps.UI.VERTICAL),cleverapps.metha.registerControl("leadersButton",t)},onChangeActivation:function(){if(cleverapps.dailyCup.isActive()){this.loading&&(this.loading.removeFromParent(!0),this.loading=void 0);var e=this.table?.7:0;this.table=new DailyCupTable(cleverapps.dailyCup,
cleverapps.styles.DailyCupTable,cleverapps.DailyCupRow,this.mainContainer),this.table.runStartAnimation(e)}else this.table.runFinishAnimation(),this.loading=WaitWindow.prototype.showLoading.call(this),this.mainContainer.addChild(this.loading),this.loading.setPositionRound(this.mainContainer.width/2,this.mainContainer.height/2)},onNoConnectionInfo:function(){if(cleverapps.dailyCup.noConnection){var e=this.getStyles().noConnectionInfo;this.noConnectionInfo=cleverapps.UI.createScale9Sprite(e.bg.image),this.noConnectionInfo.setContentSize2(e.bg.width,e.bg.height);var t=cleverapps.UI.generateTTFText("messages:InternetConnectionError",cleverapps.styles.FONTS.WHITE_TEXT);t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),t.setPositionRound(this.noConnectionInfo.width/2,this.noConnectionInfo.height/2),t.setDimensions(this.noConnectionInfo.width,this.noConnectionInfo.height),this.noConnectionInfo.addChild(t),this.mainContainer.addChild(
this.noConnectionInfo,1),this.noConnectionInfo.setPositionRound(e)}else this.noConnectionInfo&&(this.noConnectionInfo.removeFromParent(!0),delete this.noConnectionInfo)},updateState:function(){cleverapps.dailyCup.stillCanPlay()?(this.createTimer(),this.removeText(),this.playButton.enable(),this.playButton.setTitle("Play")):(this.createText(),this.removeTimer(),cleverapps.dailyCup.isFinished()?(this.playButton.setTitle("Next"),this.playButton.enable()):(this.playButton.setTitle("Play"),this.playButton.disable()))},createHelpButton:function(){var e=this.getStyles().helpButton,t=new cleverapps.UI.Button({button_png:bundles.buttons_main.frames.help_button_png,button_on_png:bundles.buttons_main.frames.help_button_on_png,onClicked:function(){cleverapps.metha.display({focus:"DailyCupRulesWindow",action:function(e){new DailyCupRulesWindow,cleverapps.metha.onceNoWindowsListener=e}})}});this.scene.addChild(t),t.setPositionRound(e),cleverapps.UI.makeHideable(t,cleverapps.UI.VERTICAL),
cleverapps.metha.registerControl("helpButton",t)},createTitleBg:function(){var e=this.getStyles().titleBg;if(e){var t=bundles.daily_cup.frames.daily_cup_titleBg||bundles.main.frames.window_title_bg_png;if(e.useRibbonTitle&&(t=bundles.main.frames.ribbon),this.titleBg=cleverapps.UI.createScale9Sprite(t,cleverapps.UI.Scale9Rect.TwoPixelXY),e.width&&this.titleBg.setContentSize2(e.width*this.table.tableView.scaleX,e.height),e.scale&&this.titleBg.setScale(e.scale),this.mainContainer.addChild(this.titleBg),this.titleBg.setPositionRound(e),bundles.daily_cup.frames.dailycup_title_icon){var s=new cc.Sprite(bundles.daily_cup.frames.dailycup_title_icon);this.titleBg.addChild(s,e.icon.zOrder||0),s.setPositionRound(e.icon)}}},createTitle:function(){var e=this.getStyles(),t=this.title=cleverapps.UI.generateTTFText("messages:DailyCup.title",cleverapps.styles.FONTS.DAILY_TOURNAMENT_TITLE_TEXT);t.setLocalZOrder(1),this.titleBg?this.titleBg.addChild(t):this.mainContainer.addChild(t),
t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setPositionRound(e.title),t.fitTo(e.title.width);var s=e.title.width/t.width,n=e.title.height/t.height,i=Math.min(s,n);i<1&&t.setScale(i)},removeTimer:function(){this.timer&&(this.timer.removeFromParent(),delete this.timer)},createTimer:function(){if(this.removeTimer(),cleverapps.dailyCup.timeout){var e=cleverapps.dailyCup.timeout.getTimeLeft(),t=this.getStyles().timer,s={font:cleverapps.styles.FONTS.DAILY_CUP_TIMER_TEXT,timerPosition:t.timerPosition,regularFontTimerPosition:t.regularFontTimerPosition};if(t.timerBg){var n=cleverapps.UI.createScale9Sprite(t.timerBg.image);n.setContentSize2(t.timerBg),s.background_content=n}this.timer=new cleverapps.CountDownView(new cleverapps.CountDown(e),s),this.mainContainer.addChild(this.timer),this.timer.setPositionRound(t)}},removeText:function(){this.textNode&&(this.textNode.removeFromParent(),delete this.textNode)},createText:function(){if(!this.textNode){var e=this.getStyles(),
t=cleverapps.UI.generateOnlyText("messages:DailyCup.finished",cleverapps.styles.FONTS.DAILY_CUP_TIMER_TEXT);if(this.textNode=new cc.Node,this.textNode.setAnchorPoint2(),this.mainContainer.addChild(this.textNode),this.textNode.setContentSize2(t.getContentSize()),this.textNode.setPositionRound(e.timer),this.textNode.addChild(t),t.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),t.setPositionRound(this.textNode.width/2,this.textNode.height/2),e.timer.timerBg){var s=cleverapps.UI.createScale9Sprite(e.timer.timerBg.image);s.setContentSize2(t.width+e.textBg.offsetWidth,t.height+e.textBg.offsetHeight),this.textNode.addChild(s),s.setLocalZOrder(-1),s.setPositionRound(this.textNode.width/2,this.textNode.height/2)}}},createPlayButton:function(){this.playButton=new DailyCupPlayButton({parent:this.scene,onClicked:this.onPlayClicked.bind(this)}),cleverapps.UI.makeHideable(this.playButton,cleverapps.UI.VERTICAL),cleverapps.metha.registerControl("playButton",this.playButton)},
onPlayClicked:function(){cleverapps.dailyCup.stillCanPlay()?cleverapps.dailyCup.noConnection?cleverapps.Notification.create("messages:InternetConnectionError"):cleverapps.metha.display({focus:"PlayDailyCup",action:function(e){cleverapps.dailyCup.wantsToPlay(e)}}):cleverapps.dailyCup.isFinished()&&cleverapps.dailyCup.restart()},getStyles:function(){return cleverapps.styles.DailyCupScene},displayIntro:function(e){cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.DAILY_CUP_RULES)?e():(new DailyCupRulesWindow(function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.DAILY_CUP_RULES,!0)}),cleverapps.metha.onceNoWindowsListener=e)}});DailyCupScene.BUNDLES=function(){return["daily_cup","main","windows"]},cleverapps.styles.DailyCupTable={x:{align:"center",dx:0},y:{align:"center",dy:-40},table:{height:700,width:500,bg:bundles.daily_cup.frames.daily_cup_table_bg,padding:5}},cleverapps.overrideFonts(cleverapps.styles.FONTS,{DAILY_CUP_TIMER_TEXT:{name:"default",size:40,
stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.DailyCupScene={background:{background:bundles.daily_cup.urls.bg},title:{x:{align:"center",dx:0},y:{align:"center",dy:15},width:520,height:100},titleBg:{x:{align:"center",dx:0},y:{align:"top",dy:-90}},noConnectionInfo:{x:{align:"center",dx:0},y:{align:"center",dy:0},bg:{width:480,height:120,image:bundles.main.frames.timer_bg_png}},timer:{x:{align:"center",dx:0},y:{align:"top",dy:-275},timerBg:{width:220,height:50,image:bundles.main.frames.timer_bg_png},timerPosition:{x:0,y:0}},textBg:{offsetWidth:40,offsetHeight:20},helpButton:{x:{align:"center",dx:-210},y:{align:"bottom",dy:160}},leadersButton:{x:{align:"center",dx:230},y:{align:"bottom",dy:60},scale:.4}};var DailyCupLeadersWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.DailyCupLeadersWindow;this.content=new cc.Node,this.content.setAnchorPoint(.5,.5),this.content.setContentSize(e.width,e.height),this._super({
title:"messages:DailyCupLeadersWindow.Title",name:"dailycupleaderswindow",content:this.content}),cleverapps.dailyCupLeadersWindowTable.getResults("cache")?this.leadersOnLoad(cleverapps.dailyCupLeadersWindowTable.getResults("cache")[0]):(this.loading=new LeadersLoading,this.loading.setPosition(this.content.width/2,this.content.height/2),this.content.addChild(this.loading),cleverapps.RestClient.get("/dailycup/leaders/"+cleverapps.user.id,{},this.createListener(this.leadersOnLoad.bind(this)),function(){cleverapps.Notification.create("messages:LeadersLoadFailed")})),cleverapps.audio.playSound(bundles.main.urls.window_effect)},leadersOnLoad:function(e){this.loading&&(this.loading.remove(),cleverapps.dailyCupLeadersWindowTable.updateResults("cache",[e]));for(var t=cleverapps.styles.DailyCupLeadersWindow,s=e.leaders,n=!1,i=0;i<s.length;i++)if(s[i].id===cleverapps.user.id){n=!0,s[i].player=!0;break}if(!n){var o={id:cleverapps.user.id,firstPlace:e.playerResult.firstPlace,
secondPlace:e.playerResult.secondPlace,thirdPlace:e.playerResult.thirdPlace,player:!0,avatar:cleverapps.friends.getPlayer().avatar,text:cleverapps.friends.getPlayer().name,notInTop:!0};s.push(o)}s.forEach(function(e,t){e.place=t+1});var a=this.table=cleverapps.dailyCupLeadersWindowTable.createTableView({id:"dailyCupLeadersWindow",data:s,rowConstructor:cleverapps.DailyCupLeadersRow});a.setPositionRound(t.tablePosition),this.content.addChild(a)}});cleverapps.styles.DailyCupLeadersWindow={width:600,height:770,tablePosition:{x:{align:"center"},y:{align:"center",dy:-50}}};var DailyCupTable=function(e,t,s,n){this.parent=n,this.dailyCup=e,this.id=this.dailyCup.id,this.styles=t,this.rowConstructor=s,this.createTable()};DailyCupTable.prototype.createTable=function(){this.tableView&&this.tableView.removeFromParent(),this.tableView=this.dailyCup.table.createTableView({id:this.dailyCup.type,data:this.dailyCup.players,rowConstructor:this.rowConstructor,options:{styles:{
height:this.styles.table.height,bg:this.styles.table.bg}}}),this.adjustSize(),this.parent.addChild(this.tableView),this.tableView.setPositionRound(this.styles),this.tableView.setLocalZOrder(1),this.dailyCup.updateListeners.scoreboard=this.tableView.createListener(function(e,t){t&&this.parent.isRunningSafe()&&(t!==this.id?(this.id=t,this.dailyCup.table.resetResults(this.dailyCup.type),this.createTable()):this.updateResults())}.bind(this)),this.dailyCup.onPlayerInfoChanged=this.tableView.createListener(function(){this.dailyCup.table.resetResults(this.dailyCup.type),this.createTable()}.bind(this))},DailyCupTable.prototype.adjustSize=function(){var e=this.styles.table.padding||0,t=cleverapps.UI.getSceneSize().width/(this.tableView.getContentSize().width+2*e);t<1&&this.tableView.setScale(t)},DailyCupTable.prototype.updateResults=function(){this.tableView.updateResults(this.dailyCup.players)?this.dailyCup.table.updateResults(this.dailyCup.type,this.dailyCup.players):(
this.dailyCup.table.resetResults(this.dailyCup.type),this.createTable())},DailyCupTable.prototype.runFinishAnimation=function(){if(!this.inFinishAnimation){this.inFinishAnimation=!0,this.tableView.stopAllActions();var e=this.tableView.getScale();this.tableView.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.1*e).easing(cc.easeIn(2)),new cc.ScaleTo(.3,0),new cc.RemoveSelf))}},DailyCupTable.prototype.runStartAnimation=function(e){this.tableView.stopAllActions();var t=this.tableView.getScale();this.tableView.setScale(0),this.tableView.runAction(new cc.Sequence(new cc.DelayTime(e||0),new cc.ScaleTo(.3,1.1*t).easing(cc.easeOut(2)),new cc.ScaleTo(.2,t)))};var DailyCup=function(e){(this.type=e,this.data=DailyCupsConfig[e],this.debugInfo={},cleverapps.config.debugMode&&(DailyCup.RELOAD_INTERVAL="5 seconds"),this.updateListeners={},this.onNoConnectionListener=function(){},this.onActivationListener=function(){},this.onPlayerInfoChanged=function(){},this.reset(),this.load(),this.reload(),
setInterval(this.reload.bind(this),cleverapps.parseInterval(DailyCup.RELOAD_INTERVAL)),this.runLocalTimeout(),this.table=new cleverapps.Table,cleverapps.friends.playerInfoChangedListeners["dailyCup_"+e]=this.playerInfoChanged.bind(this),this.finished)&&(void 0===this.calcRewardPlace()&&this.data.autoRestart&&this.restart())};DailyCup.prototype.reset=function(){this.deactivate(),this.setNoConnection(!1),this.stars=0,this.level=0,this.timeFinish=void 0,this.finished=!1},DailyCup.prototype.setNoConnection=function(e){this.noConnection!==e&&(this.noConnection=e,this.onNoConnectionListener())},DailyCup.prototype.getTimeLeft=function(){if(this.timeFinish){var e=this.timeFinish-Date.now();return e<0?0:e}},DailyCup.prototype.runLocalTimeout=function(){clearTimeout(this.timeout),void 0!==this.getTimeLeft()&&(this.timeout=new cleverapps.LongTimeout(function(){this.runUpdateListeners()}.bind(this),this.getTimeLeft()))},DailyCup.prototype.load=function(){var e=cleverapps.DataLoader.load(
cleverapps.DataLoaderTypes[this.data.storageKey]);e&&(this.activate(e.id),this.stars=e.stars,this.level=e.level,this.finished=e.finished,this.timeFinish=e.timeFinish,this.players=e.players,e.timeLeft&&(this.timeFinish=Date.now()+e.timeLeft)),this.players=this.players||[],this.finished&&0===this.players.length&&(this.finished=!1),this.debugInfo.loadTime=Date.now(),this.preparePlayersData()},DailyCup.prototype.getInfo=function(){return{id:this.id,stars:this.stars,level:this.level,finished:this.finished,timeFinish:this.timeFinish}},DailyCup.prototype.updateInfo=function(e,t){this.activate(e.id),this.stars=e.stars,this.level=e.level,this.timeFinish=void 0,this.finished=!1,this.debugInfo.updateInfoTime=Date.now(),this.save(t)},DailyCup.prototype.save=function(e){var t=this.getInfo();t.players=this.players,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes[this.data.storageKey],t),!e&&this.data.serverTaskName&&cleverapps.synchronizer.addUpdateTask(this.data.serverTaskName)},
DailyCup.prototype.createEpisode=function(){var e=Episode.LevelChooseAlgorithm({start:5,seed:1e3*(this.id||0)+(this.level||0)});return new Episode(e.episodeNo,e.levelNo,{type:Episode.Types.DAILYCUP})},DailyCup.prototype.getPlayerInfo=function(){return{id:cleverapps.user.id,amount:this.stars,player:!0,avatar:this.getPlayerAvatar(),text:cleverapps.friends.getPlayer().name}},DailyCup.prototype.getPlayerAvatar=function(){return{avatar:cleverapps.friends.getPlayer().avatar,id:cleverapps.user.id}},DailyCup.prototype.playerInfoChanged=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].id===e){var s=this.getPlayerInfo();return this.players[t].id=s.id,this.players[t].avatar=s.avatar,this.players[t].text=s.text,this.save(),void this.onPlayerInfoChanged()}},DailyCup.prototype.addDebugPlayers=function(){if(cleverapps.config.debugMode&&DailyCup.DEBUG_PLAYERS_AMOUNT){for(var e=0;this.players.length<DailyCup.DEBUG_PLAYERS_AMOUNT;)this.players.push({id:"10000"+e,
amount:cleverapps.Random.random(10,30)*e,avatar:this.getPlayerAvatar(),text:"Player_"+e}),e++;this.players.sort(function(e,t){return t.amount-e.amount})}},DailyCup.prototype.preparePlayersData=function(){for(var e=void 0,t=0;t<this.players.length;t++)this.players[t].id===cleverapps.user.id&&(this.players[t].amount=this.stars,this.players[t].player=!0,this.players[t].avatar=this.getPlayerAvatar(),e=t);if(void 0===e){var s=this.getPlayerInfo();e=this.players.length,this.players.push(s)}for(this.addDebugPlayers();0<e&&this.players[e-1].amount<this.players[e].amount;){var n=this.players[e-1];this.players[e-1]=this.players[e],this.players[e]=n,e--}this.players[e].notInTop=e>=DailyCup.TOP_LIMIT,this.players.forEach(function(e,t){e.place=t+1})},DailyCup.prototype.stillCanPlay=function(){return this.isActive()&&0<this.getTimeLeft()},DailyCup.prototype.isFinished=function(){return this.finished},DailyCup.prototype.isActive=function(){return 0!==this.id},DailyCup.prototype.activate=function(e){
this.id!==e&&(this.id=e,this.onActivationListener())},DailyCup.prototype.deactivate=function(){0!==this.id&&(this.id=0,this.onActivationListener())},DailyCup.prototype.calcRewardPlace=function(){if(this.isFinished())for(var e=0;e<this.players.length&&e<this.data.rewards.length;e++)if(this.players[e].player){if(0===this.players[e].amount)return;return e}},DailyCup.prototype.giveReward=function(){var s=this.calcRewardPlace(),n=this.id;0===s&&cleverapps.missionManager.dispatchEvent(Mission.EVENT_WIN_DAILYCUP),cleverapps.metha.display({focus:"DailyCupRewards",actions:[function(e){this.data.victoryWindow?(new this.data.victoryWindow(s),cleverapps.metha.onceNoWindowsListener=e):e()}.bind(this),function(e){this.restart();var t=this.data.rewards[s];this.type!==DailyCup.TYPE_WEEKLY&&RewardsConfig.DailyCup.prepareByRich&&(t=cleverapps.user.prepareRewardByRich(t)),new DailyCupRewardWindow({reward:t,place:s+1,id:n,type:this.type}),cleverapps.metha.onceNoWindowsListener=e}.bind(this)]})},
DailyCup.prototype.restart=function(){this.reset(),this.save(),this.runUpdateListeners(),this.reload()},DailyCup.prototype.markFinished=function(){if(!this.finished){this.finished=!0,this.debugInfo.markFinishedTime=Date.now(),cleverapps.dailyCupLeadersWindowTable.resetResults("cache"),this.save(),this.runUpdateListeners();var e=this.calcRewardPlace();void 0===e||cleverapps.metha.isFocused()||this.giveReward(),void 0===e&&this.data.autoRestart&&this.restart()}},DailyCup.prototype.onRespond=function(){this.reloading=!1},DailyCup.prototype.onSuccess=function(e){if(!e)return console.log("Empty result"),void this.onFailure();var t=this.id;if(this.setNoConnection(!1),this.onRespond(),this.timeFinish=Date.now()+e.time,this.players=e.players,this.id!==e.id&&(this.stars=0,this.level=0),this.preparePlayersData(),this.id!==e.id&&(this.table.resetResults(this.type),cleverapps.dailyCupLeadersWindowTable.resetResults("cache"),this.activate(e.id)),this.save(!0),this.debugInfo.onSuccessTime=Date.now()
,this.debugInfo.onSuccessPlayersLenght=this.players.length,this.debugInfo.onSuccessData=JSON.stringify(e),this.debugInfo.onSuccessThisId=t,e.time<=0){this.calcRewardPlace();this.markFinished()}else this.runLocalTimeout();this.runUpdateListeners()},DailyCup.prototype.onFailure=function(){this.setNoConnection(!0),this.onRespond(),console.error("can't update DailyCup of type "+this.type)},DailyCup.prototype.reload=function(){DailyCup.IsAvailable(this.type)&&(this.reloading||this.isFinished()||(this.type!==DailyCup.TYPE_WEEKLY||cleverapps.scenes.isLoaderScene()||cleverapps.environment.isMainScene())&&(this.type!==DailyCup.TYPE_DAILY||cleverapps.environment.isDailyCupScene()||cleverapps.environment.isMainScene())&&(this.reloading=!0,cleverapps.RestClient.get("/dailycup/get/"+this.id+"/"+this.type,{},this.onSuccess.bind(this),this.onFailure.bind(this))))},DailyCup.prototype.runUpdateListeners=function(){cleverapps.sideBar.resetByClassName(DailyCupIcon),cleverapps.values(this.updateListeners
).forEach(function(e){e(this.players,this.id)}.bind(this))},DailyCup.prototype.addAmount=function(e){if(this.stillCanPlay()){e=void 0===e?0:e,this.level++,this.stars+=e,this.save();var t=this.id?this.id:-1;cleverapps.RestClient.post("/dailycup/update/"+cleverapps.user.id+"/"+this.type,{id:t,stars:this.stars},function(){},function(){console.log("couldn't update progress")}),this.preparePlayersData()}},DailyCup.prototype.cupWithLives=function(){return cleverapps.lives&&"board"!==cleverapps.config.type},DailyCup.prototype.wantsToPlay=function(e){if(this.cupWithLives()&&cleverapps.lives.isEmpty())return new LivesShopWindow,void(cleverapps.metha.onceNoWindowsListener=e);var t=this.createEpisode().getLevel();BoostersBefore.isAvailable()&&LevelStartWindow.isAvailable(t.episode.episodeNo,t.levelNo)?(cleverapps.metha.showControlsWhileFocused("MenuBarGoldItem"),new LevelStartWindow({level:t}),cleverapps.metha.onceNoWindowsListener=e):t.play(e)},DailyCup.IsAvailable=function(e,t){return(
e!==DailyCup.TYPE_WEEKLY||cleverapps.metha.getType()===Metha.KNOCKOUT)&&levels.user.checkAvailable(DailyCupsConfig[e].available,t)},DailyCup.TOP_LIMIT=25,DailyCup.RELOAD_INTERVAL="1 minute",DailyCup.TYPE_DAILY=0,DailyCup.TYPE_WEEKLY=1;var DailyCupsConfig={};DailyCupsConfig[DailyCup.TYPE_DAILY]={available:{episode:5,level:0,registered:"7 days",differences:{disabled:!0}},serverTaskName:"userdailycup",rewards:RewardsConfig.DailyCup.places,leadersWindow:DailyCupLeadersWindow,storageKey:"DAILY_CUP"},RewardsConfig.WeeklyCup&&(DailyCupsConfig[DailyCup.TYPE_WEEKLY]={available:{episode:0,level:0,projectName:["olympics","differences"]},serverTaskName:"userweeklycup",rewards:RewardsConfig.WeeklyCup.places,storageKey:"WEEKLY_CUP",victoryWindow:"undefined"!=typeof WeeklyCupVictoryWindow&&WeeklyCupVictoryWindow,autoRestart:!0});var DailyCupRewardWindow=RewardWindow.extend({onWindowLoaded:function(e){this.place=e.place,this.id=e.id,this._super({
title:e.type===DailyCup.TYPE_WEEKLY?"messages:WeeklyCupTable.title":"messages:DailyCup.title",name:"dailycuprewardwindow",text:"messages:DailyCup.reward",reward:e.reward,rewardName:"dailyCup"})},onReceiveReward:function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_CUP_REWARD+"_"+this.place+"_"+this.id)}}),DailyCupRulesWindow=RulesWindow.extend({onWindowLoaded:function(e){this.callback=e,this._super({name:"dailycupruleswindow",styles:cleverapps.styles.DailyCupRulesWindow})},onClose:function(){this.callback&&this.callback()}});cleverapps.styles.DailyCupRulesWindow={prefix:"messages:DailyCupRulesWindow.",animation:{json:bundles.daily_cup.jsons.daily_cup_json,name:"animation"},subText:{width:200,left:{x:{align:"left",dx:40},y:{align:"top",dy:-250}},right:{x:{align:"right",dx:45},y:{align:"top",dy:-215}},bottom:{x:{align:"center",dx:5},y:{align:"center",dy:-320}}}};var Subscription=function(){this.load(),this.onChangeStateListeners={},this.reload(),this.haveTmpId(
)&&this.runOnBuyReloads()};Subscription.calcSource=function(){var e=cleverapps.User.calcSource();return"mobile_ok"===e&&(e="web_ok"),e},Subscription.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SUBSCRIPTION),t=Subscription.calcSource();e&&e[t]?(this.id=e[t].id,this.lastRewardTime=e[t].lastRewardTime||0,this.lastReloadTime=e[t].lastReloadTime||0,this.trialBoughtTime=e[t].trialBoughtTime||0,this.tokens=e[t].tokens||{}):(this.id=0,this.lastRewardTime=0,this.lastReloadTime=0,this.trialBoughtTime=0,this.tokens={})},Subscription.prototype.getInfo=function(){var e={},t=Subscription.calcSource();return e[t]={id:this.id,lastRewardTime:this.lastRewardTime,lastReloadTime:this.lastReloadTime,trialBoughtTime:this.trialBoughtTime},0<Object.keys(this.tokens).length&&(e[t].tokens=this.tokens),e},Subscription.prototype.updateInfo=function(e,t){var s=Subscription.calcSource();e[s]&&(this.id=e[s].id,this.lastRewardTime=e[s].lastRewardTime||0,
this.lastReloadTime=e[s].lastReloadTime||0,this.trialBoughtTime=e[s].trialBoughtTime||0,this.tokens=cleverapps.override({},e[s].tokens||{},this.tokens),this.save(t))},Subscription.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SUBSCRIPTION,this.getInfo()),e||cleverapps.synchronizer.addUpdateTask("subscription")},Subscription.prototype.getLeftTime=function(){if(this.isActive()){if(!this.lastRewardTime)return 0;var e=Date.now();return"daily"===Subscription.REWARD_INTERVAL?Math.max(cleverapps.extractDateFromDateTime(this.lastRewardTime)+cleverapps.parseInterval("1 day")-e,0):Math.max(this.lastRewardTime+cleverapps.parseInterval(Subscription.REWARD_INTERVAL)-e,0)}},Subscription.prototype.reload=function(){var e=Subscription.calcSource();cleverapps.isLocalhost()||this.isDebugNoPayments()||-1===["facebook","web_ok","mobile_ok","android","ios"].indexOf(e)||-1!==["android","ios"].indexOf(e)&&0===Object.keys(this.tokens).length||!this.haveTmpId(
)&&this.lastReloadTime+cleverapps.parseInterval(Subscription.RELOAD_INTERVAL)>Date.now()||this.getAsync(function(e,t){if(!e){t=t||{};var s=this.isActive();this.id=t.id,this.lastReloadTime=Date.now(),this.save(),cleverapps.values(this.onChangeStateListeners).forEach(cleverapps.callFunc),s&&!this.isActive()&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SUBSCRIPTION_CANCELLED)}}.bind(this))},Subscription.prototype.getAsync=function(t){var e=Subscription.calcSource();if(-1!==["facebook","web_ok","mobile_ok","android","ios"].indexOf(e))if(levels.user.haveTmpId()&&-1!==["facebook","web_ok","mobile_ok"].indexOf(e))t(cleverapps.Social.CODE_FAILED);else{var s={source:e,tokens:this.tokens,id:this.id};cleverapps.RestClient.post("/subscriptions/get/"+levels.user.id,s,function(e){e&&!e.id&&(e={}),t(cleverapps.Social.CODE_SUCCEED,e)},function(){t(cleverapps.Social.CODE_FAILED)})}},Subscription.prototype.haveTmpId=function(){return this.id&&2<=this.id.length&&"__"===this.id.substr(0,2)},
Subscription.prototype.onBuySubscription=function(e){this.id=cleverapps.user.generateTmpId();var t=Subscription.calcSource();(-1!==["facebook","android","ios"].indexOf(t)||this.isDebugNoPayments())&&(this.lastRewardTime=0),this.lastReloadTime=0,e.trial&&(this.trialBoughtTime=Date.now()),this.save(),this.runOnBuyReloads()},Subscription.prototype.runOnBuyReloads=function(){["5 seconds","15 seconds","30 seconds","1 minute","3 minutes","5 minutes","10 minutes"].forEach(function(e){setTimeout(function(){cleverapps.subscription.reload()},cleverapps.parseInterval(e))})},Subscription.prototype.addPurchaseTokens=function(e,t){Array.isArray(e)||(e=[e]);var a=!1;e.forEach(function(e){var t=e.name,s=e.purchaseToken,n=e.productId,i=e.packageName,o=this.tokens[t]||{};t&&s&&n&&i&&(o.purchaseToken!==s||o.productId!==n||o.packageName!==i)&&(this.tokens[t]={productId:n,packageName:i,purchaseToken:s},a=!0)}.bind(this)),a&&(t&&!this.isActive()&&(this.lastReloadTime=0,this.reload()),this.save())},
Subscription.prototype.isRewardReady=function(){return!!this.isActive()&&0===this.getLeftTime()},Subscription.prototype.getReward=function(){if(!this.isRewardReady())return!1;var e=this.calcReward(),t=e.unit&&e.unit.amount-Game.currentGame.map.countEmptySlots();return 0<t?(Game.currentGame.onHintMessage("messages:Spawn.nospace",!1,{left:t}),!1):(this.lastRewardTime=Date.now(),this.save(),cleverapps.values(this.onChangeStateListeners).forEach(cleverapps.callFunc),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SUBSCRIPTION_REWARD),!0)},Subscription.prototype.isActive=function(){return this.id},Subscription.prototype.calcReward=function(){var e=cleverapps.clone(RewardsConfig.Subscription,!0);return cleverapps.user.setRandomBoostersReward(e)},Subscription.prototype.reactivate=function(e){!this.isActive()||cleverapps.isLocalhost()||this.isDebugNoPayments()||0===this.id.indexOf("__")||cleverapps.payments.reactivateSubscription&&cleverapps.payments.reactivateSubscription(this.id,e)},
Subscription.prototype.canBuyTrial=function(){return!(!cleverapps.isLocalhost()&&-1===["580731438762","577203420866","585959187481","576593702177","8593874"].indexOf(cleverapps.user.id))||this.trialBoughtTime+cleverapps.parseInterval(Subscription.BUY_TRIAL_INTERVAL)<Date.now()},Subscription.prototype.isDebugNoPayments=function(){return cleverapps.isStaging()&&-1!==Subscription.SOCIAL_PAYMENT_NOT_FREE_ON_STAGING.indexOf(cleverapps.User.calcSource())&&this.toolDebugWithoutPayment},Subscription.prototype.cancel=function(e){if(this.isActive())return cleverapps.isLocalhost()||this.isDebugNoPayments()?(delete this.id,this.save(),void cleverapps.values(this.onChangeStateListeners).forEach(cleverapps.callFunc)):void(0!==this.id.indexOf("__")&&cleverapps.payments.cancelSubscription&&cleverapps.payments.cancelSubscription(this.id,e))},Subscription.IsAvailable=function(){return!!cleverapps.subscription&&(!!cleverapps.subscription.isActive()||!("ios"===cleverapps.User.calcSource(
)&&!cleverapps.payments.isProductsExists(["subsWeek","subsMonth"]))&&cleverapps.user.checkAvailable(Subscription.AVAILABLE))},Subscription.IsModelAvailable=function(){var e=[];switch(cleverapps.User.calcSource()){case"web_ok":case"mobile_ok":e=Subscription.MODEL_AVAILABLE_OK;break;case"facebook":e=Subscription.MODEL_AVAILABLE_FACEBOOK;break;case"android":e=Subscription.MODEL_AVAILABLE_ANDROID;break;case"ios":e=Subscription.MODEL_AVAILABLE_IOS}return cleverapps.config.debugMode&&(cleverapps.OK.isAppropriate()||cleverapps.MobileOK.isAppropriate()||cleverapps.FakeFacebook.isAppropriate())&&(e=Subscription.MODEL_AVAILABLE_OK.concat(Subscription.MODEL_AVAILABLE_FACEBOOK)),-1!==e.indexOf(cleverapps.config.name)},Subscription.MODEL_AVAILABLE_OK=["mergecraft","heroes","riddles","wordsoup","crocword","tripeaks","runes","olympics","scramble","differences","magicwords"],Subscription.MODEL_AVAILABLE_FACEBOOK=["mergecraft","heroes","riddles","wordsoup","crocword","tripeaks","scramble","magicwords"]
,Subscription.MODEL_AVAILABLE_ANDROID=["mergecraft","heroes","riddles","wordsoup","crocword","tripeaks","olympics","scramble"],Subscription.MODEL_AVAILABLE_IOS=["mergecraft","crocword","wordsoup","tripeaks"],Subscription.AVAILABLE={episode:3,level:0,yodo1:!1},"merge"===cleverapps.config.type&&(Subscription.AVAILABLE={level:5,yodo1:!1}),Subscription.REWARD_INTERVAL="daily",Subscription.RELOAD_INTERVAL="1 hour",Subscription.BUY_TRIAL_INTERVAL="3 day",Subscription.SOCIAL_PAYMENT_NOT_FREE_ON_STAGING=["mobile_ok","web_ok"],cleverapps.config.debugMode&&(Subscription.REWARD_INTERVAL="20 minutes",Subscription.RELOAD_INTERVAL="1 minute",Subscription.BUY_TRIAL_INTERVAL="10 seconds");var SubscriptionWindow=Window.extend({onWindowLoaded:function(){this.weekProduct=Product.Create("subsWeek"),this.monthProduct=Product.Create("subsMonth");var e={name:"SubscriptionWindow",content:this.createContent(),styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.SubscriptionWindow.window,
!0),closeButtonDelay:1};"olympics"===cleverapps.config.name&&(e.windowBg=bundles.windows.frames.window_gold_bg_png),cleverapps.styles.SubscriptionWindow.window.Title&&(e.title={text:"messages:SubscriptionWindow.Title",font:cleverapps.styles.FONTS.SUBSCRIPTION_WINDOW_TITLE_TEXT||cleverapps.styles.FONTS.WINDOW_TITLE_TEXT}),this._super(e),cleverapps.audio.playSound(bundles.main.urls.window_effect),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SUBSCRIPTION_WINDOW_OPEN),Lottery.addText(this)},buySubscription:function(e){var t=function(){cleverapps.subscription.onBuySubscription(e),this.isRunningSafe()&&(new SubscriptionRewardWindow,this.close())}.bind(this);cleverapps.subscription.isDebugNoPayments()?t():e.buy(t)},onShow:function(){if(this.personAnimation){var e=cleverapps.styles.SubscriptionWindow.animation.person;e.open?this.personAnimation.setAnimationAndIdleAfter(e.open,e.idle):this.personAnimation.setAnimation(0,e.idle,!0)}this.prizesView.onShow&&this.prizesView.onShow()},
createContent:function(){var e=cleverapps.styles.SubscriptionWindow;e.animation.person&&(this.personAnimation=new cleverapps.Spine(bundles.subscription_window.jsons.subscription_json||e.animation.person.json,e.animation.person.scale),this.personAnimationNode=new cc.Node,this.personAnimationNode.setLocalZOrder(e.animation.person.zOrder),this.personAnimationNode.addChild(this.personAnimation)),"merge"===cleverapps.config.type?this.prizesView=new MergeSubscriptionPrize:"match3"===cleverapps.config.type?this.prizesView=new SubscriptionPrize:this.prizesView=new GoldBasedPrize;var t=[];t.push(this.createFooter()),t.push(new SubscriptionButtons({prizesLayoutWidth:this.prizesView.width,monthProduct:this.monthProduct,weekProduct:this.weekProduct,buySubscription:this.buySubscription.bind(this)})),t.push(new SubscriptionInfo({availableTextWidth:this.prizesView.width,close:this.close.bind(this)})),t.push(this.prizesView),e.animation.person&&((
e.window.noBackground||"scramble"===cleverapps.config.name)&&(this.personAnimationNode.setAnchorPoint2(),this.personAnimationNode.setContentSize(e.animation.person.size),this.personAnimation.setPositionRound(e.animation.person.position),t.push(this.personAnimationNode)),e.animation.person.offset&&this.personAnimation.setPositionRound(e.animation.person.offset[cleverapps.wideMode.mode]),e.animation.person.scales&&this.personAnimation.setScale(e.animation.person.scales[cleverapps.wideMode.mode]));var s=new cleverapps.Layout(t,{direction:cleverapps.UI.VERTICAL,padding:e.contentPadding,margin:e.contentItemsMargin});return s.setLocalZOrder(5),e.animation.person&&!e.window.noBackground&&"scramble"!==cleverapps.config.name&&("tripeaks"===cleverapps.config.name?(this.addChild(this.personAnimationNode),this.personAnimationNode.setPositionRound(e.animation.person.position[cleverapps.wideMode.mode])):(s.addChild(this.personAnimationNode),this.personAnimationNode.setPositionRound(
e.animation.person.position))),s},createFooter:function(){var e=new Terms;if(e.width>.9*this.prizesView.width&&e.setScale(.9*this.prizesView.width/e.width),!cleverapps.subscription.isActive()&&"ios"===cleverapps.User.calcSource()){var t=new Restore;t.setScale(e.getScale())}return new cleverapps.Layout([t,e],{direction:cleverapps.UI.VERTICAL})}});SubscriptionWindow.prototype.listBundles=function(){return["reward_icons","subscription_window"]},cleverapps.overrideStyles(cleverapps.styles.DECORATORS,{SUBSCRIPTION_WINDOW_GOLD_OFFER_STROKE:{color:new cc.Color(46,83,26,255),size:2}}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{SUBSCRIPTION_WINDOW_GOLD_COIN_TEXT:{size:100,color:cleverapps.styles.COLORS.WHITE},SUBSCRIPTION_WINDOW_GOLD_OFFER_TEXT:{size:24,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.SUBSCRIPTION_WINDOW_GOLD_OFFER_STROKE}}),cleverapps.styles.SubscriptionWindow={contentItemsMargin:15,contentPadding:{x:64,y:140,isTop:!0},animation:{person:{
position:{x:{align:"left",dx:344},y:{align:"top",dy:-142}},json:bundles.subscription_window.jsons.subscription_window_star_json,open:"open",idle:"idle",scale:1,zOrder:0}},window:{Border:{x:0,y:30},Title:{}}};var SubscriptionRewardWindow=RewardWindow.extend({ctor:function(){this._super({reward:cleverapps.subscription.calcReward()}),"merge"===cleverapps.config.type&&cleverapps.metha.showControlsWhileFocused(["MenuBarLivesItem","MenuBarWorkersItem"])},onWindowLoaded:function(e){this._super({title:"messages:SubscriptionRewardWindow.title",name:"subscriptionrewardwindow",text:"messages:MiniGameRewardWindow.text",reward:e.reward,rewardName:"subscription"})},beforeCloseAnimation:function(e){cleverapps.subscription.getReward()||(this.reward=void 0),this._super(e)}}),SubscriptionBonus=cc.Node.extend({ctor:function(){this._super(),this.setAnchorPoint2();var e=cleverapps.styles.SubscriptionBonus,t=new cc.Sprite(bundles.subscription_window.frames.subscription_badge_png);if(this.addChild(t),
this.setContentSize2(t.getContentSize()),this.setScale(e.scale),t.setPositionRound(this.width/2,this.height/2),e.backgroundAnimation){var s=new cleverapps.Spine(e.backgroundAnimation.json,e.backgroundAnimation.scale);s.setPositionRound(t.width/2,t.height/2),t.addChild(s,-1),s.setAnimation(0,e.backgroundAnimation.name,!0)}var n=new cc.Sprite(bundles.subscription_window.frames.subscription_plus_png);if(this.addChild(n),n.setPositionRound(e.plus),!e.description){var i=cleverapps.UI.generateTTFText("messages:UnlimitedLives.ThreeHours",cleverapps.styles.FONTS.WHITE_TEXT);this.addChild(i),i.setPositionRound(e.text),i.fitTo(e.text.width),i.setRotation(e.text.rotation)}this.setPositionRound(e)},getDescription:function(){var e=cleverapps.styles.SubscriptionBonus;if(e.description){var t=cleverapps.UI.generateTTFText("messages:UnlimitedLives.ThreeHoursShort",cleverapps.styles.FONTS.SUBSCRIPTION_WINDOW_GOLD_COIN_TEXT),s=new cc.Sprite(e.description.icon);return s.setScale(e.description.scale),
s.setPositionRound(e.description),[s,t]}return[]}});cleverapps.styles.SubscriptionBonus={x:{align:"center",dx:260},y:{align:"center",dy:-135},scale:1,plus:{x:{align:"center",dx:-74},y:{align:"center",dy:18}},text:{x:{align:"center",dx:-10},y:{align:"center",dy:-30},rotation:20,width:100}};var SubscriptionButtons=cleverapps.Layout.extend({ctor:function(e){var t=cleverapps.styles.SubscriptionButtons,s=cleverapps.User.calcSource(),n="ios"===s?Messages.get("SubscriptionWindow.iosMonthButton",{price:e.monthProduct.getCurrentPrice()}):e.monthProduct.getCurrentPrice(),i=this.createBuyButton(e.monthProduct,e.buySubscription,t.buttonPay,n,cleverapps.styles.FONTS.SUBSCRIPTION_BUY_BUTTON_TEXT||cleverapps.styles.FONTS.SUBSCRIPTION_BUTTON_TEXT);if(Lottery.addIcon(i,"subscription"),i.lotteryIcon&&i.lotteryIcon.setScale(.7),cleverapps.subscription.canBuyTrial()){var o=Messages.get("ios"===s?"SubscriptionWindow.iosWeekButton":"SubscriptionWindow.Free",{price:e.weekProduct.getCurrentPrice()}),
a=this.createBuyButton(e.weekProduct,e.buySubscription,t.buttonTryFree,o,cleverapps.styles.FONTS.SUBSCRIPTION_BUTTON_TEXT);if("ios"===s)var r="messages:SubscriptionWindow.monthButtonTitle",l=void 0,c="messages:SubscriptionWindow.weekButtonTitle",p=Messages.get("SubscriptionWindow.iOSThreeDaysAdditional",{price:e.weekProduct.getCurrentPrice()});else l="messages:SubscriptionWindow.MonthlyAdditional",p=0===e.weekProduct.trial.indexOf("3 day")?"messages:SubscriptionWindow.ThreeDaysAdditional":"messages:SubscriptionWindow.OneDayAdditional";"merge"===cleverapps.config.type&&(r="messages:SubscriptionWindow.MonthlyAdditional",c=p,p=l=void 0),a=this.createLayout(a,p,c),i=this.createLayout(i,l,r);var d=t.buttonsMargin||Math.max(4*t.contentObjectsMargin,e.prizesLayoutWidth-2*t.buttonWidth)}this._super([a,i],{direction:cleverapps.UI.HORIZONTAL,align:t.align,margin:d})},createBuyButton:function(e,t,s,n,i){var o=cleverapps.styles.SubscriptionButtons;return new cleverapps.UI.Button({
content:new ProductPriceView(e,{text:n,font:i}),button_png:s.button_png,button_on_png:s.button_on_png,width:o.buttonWidth,maxWidth:o.buttonWidth,height:o.buttonHeight,contentPadding:1,contentOffset:o.contentOffset,onClicked:function(){t(e)}})},createLayout:function(e,t,s){var n=cleverapps.styles.SubscriptionButtons;if(t){var i=cleverapps.UI.generateOnlyText(t,cleverapps.styles.FONTS.SUBSCRIPTION_BUTTON_ADDITIONAL_TEXT);i.setDimensions(n.buttonWidth,0),i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER)}if(s){var o=cleverapps.UI.generateOnlyText(s,cleverapps.styles.FONTS.SUBSCRIPTION_BUTTON_TITLE||cleverapps.styles.FONTS.SUBSCRIPTION_MAIN_TEXT);o.setDimensions(n.buttonWidth,0),o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER)}return new cleverapps.Layout([i,e,o],{direction:cleverapps.UI.VERTICAL,margin:n.contentObjectsMargin})}});cleverapps.styles.SubscriptionButtons={height:100,align:cleverapps.UI.ALIGN_END,contentObjectsMargin:7,buttonWidth:270,buttonHeight:100,buttonTryFree:{
button_png:bundles.buttons.frames.green_button_png,button_on_png:bundles.buttons.frames.green_button_on_png},buttonPay:{button_png:bundles.buttons_main.frames.blue_button_png,button_on_png:bundles.buttons_main.frames.blue_button_on_png},buttonClaim:{button_png:bundles.buttons.frames.window_button_png,button_on_png:bundles.buttons.frames.window_button_on_png}};var SubscriptionPrize=cc.Node.extend({ctor:function(){this._super();var e=cleverapps.styles.SubscriptionPrize,t=new cc.Node;t.setContentSize2(e.prizesLayout.size.width,e.prizesLayout.size.height),t.setAnchorPoint(0,0);var s=cleverapps.UI.generateTTFText("messages:SubscriptionWindow.AnimationMainText",cleverapps.styles.FONTS.SUBSCRIPTION_OFFERS_MAIN_TEXT);s.setDimensions(e.animation.everyDayTextWidth,0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.addChild(s),s.setAnchorPoint2(),s.setPositionRound(e.prizesLayout.everyDayTextPosition);var n=[cleverapps.UI.generateTTFText("messages:SubscriptionWindow.AnimationLeftText",
cleverapps.styles.FONTS.SUBSCRIPTION_OFFERS_TEXT)];n.push(cleverapps.UI.generateTTFText("messages:SubscriptionWindow.AnimationLeftMiddleText",cleverapps.styles.FONTS.SUBSCRIPTION_OFFERS_TEXT));var i=[cleverapps.UI.generateTTFText("messages:SubscriptionWindow.AnimationRightText",cleverapps.styles.FONTS.SUBSCRIPTION_OFFERS_TEXT)];i.push(cleverapps.UI.generateTTFText("messages:SubscriptionWindow.UnlimitedLivesTwoHourText",cleverapps.styles.FONTS.SUBSCRIPTION_OFFERS_TEXT));for(var o=[n,i],a=[],r=0;r<o.length;r++){for(var l=[],c=0;c<o[r].length;c++){var p=o[r][c];e.prizesLayout.fitTo&&p.fitTo(e.prizesLayout.fitTo),p.setDimensions(e.animation.oneBoosterTextWidth,0),p.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),l.push(new cleverapps.Layout([p],{direction:cleverapps.UI.VERTICAL,margin:e.contentObjectsMargin}))}a.push(new cleverapps.Layout(l,{direction:cleverapps.UI.HORIZONTAL,margin:3*e.contentObjectsMargin})),t.addChild(a[r]),a[r].setAnchorPoint2()}a[0].setPositionRound(
e.prizesLayout.topBoostersPrizeTextPosition),a[1].setPositionRound(e.prizesLayout.bottomBoostersPrizeTextPosition),this.boostersAnimation=new cleverapps.Spine(e.animation.boosters.json,e.animation.boosters.scale),this.boostersAnimationNode=new cc.Node,this.boostersAnimationNode.addChild(this.boostersAnimation),this.boostersAnimationNode.setContentSize2(e.animation.boosters.width,e.animation.boosters.height),this.boostersAnimationNode.setAnchorPoint2(),t.addChild(this.boostersAnimationNode),this.boostersAnimationNode.setPositionRound(e.prizesLayout.boostersPrizeAnimationPosition),this.boostersAnimationNode.setLocalZOrder(-1);var d=cleverapps.UI.createScale9Sprite(e.animation.background.image,cleverapps.UI.Scale9Rect.TwoPixelXY);d.setContentSize(t.width,t.height),d.setAnchorPoint(0,0),d.addChild(t),this.setAnchorPoint(.5,.5),this.addChild(d),this.setContentSize(d.getContentSize())},onShow:function(){var e=cleverapps.styles.SubscriptionPrize;this.boostersAnimation.setAnimation(0,
e.animation.boosters.open,!1),this.boostersAnimation.setCompleteListener(function(){this.boostersAnimation.setAnimation(0,e.animation.boosters.idle,!0)}.bind(this))}});cleverapps.styles.SubscriptionPrize={contentObjectsMargin:7,animation:{background:{image:bundles.subscription_window.frames.premium_bg},oneBoosterTextWidth:154,everyDayTextWidth:350,boosters:{json:bundles.subscription_window.jsons.subscription_window_boosters_json,open:"open",idle:"idle",scale:1,width:529,height:148}},prizesLayout:{size:{width:550,height:520},boostersPrizeAnimationPosition:{x:{align:"center",dx:90},y:{align:"center",dy:30}},everyDayTextPosition:{x:{align:"center"},y:{align:"top",dy:-20}},topBoostersPrizeTextPosition:{x:{align:"center"},y:{align:"top",dy:-110}},bottomBoostersPrizeTextPosition:{x:{align:"center"},y:{align:"bottom",dy:155}},fitTo:273}};var SubscriptionInfo=cleverapps.Layout.extend({ctor:function(e){var t=cleverapps.styles.SubscriptionInfo,s=cleverapps.UI.generateOnlyText(
"messages:SubscriptionWindow.MainText",cleverapps.styles.FONTS.SUBSCRIPTION_MAIN_TEXT);s.setDimensions(e.availableTextWidth,0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this._super([s],{direction:cleverapps.UI.VERTICAL,margin:t.contentObjectsMargin,padding:t.padding})}});cleverapps.styles.SubscriptionInfo={contentObjectsMargin:7};var GoldBasedPrize=cc.Node.extend({ctor:function(){this._super();var e=cleverapps.styles.GoldBasedPrize;if(this.setAnchorPoint2(),this.setContentSize2(e),"stacks"!==cleverapps.config.subtype){var t=this.createGoldBlock();this.addChild(t)}var s,n=[];s=-1!==["differences","scramble","tripeaks","wordheaps"].indexOf(cleverapps.config.name)?this.createRewardsGrid():this.createGold(),n.push(s);var i=cleverapps.UI.generateOnlyText("messages:SubscriptionWindow.AnimationMainText",cleverapps.styles.FONTS.SUBSCRIPTION_WINDOW_GOLD_OFFER_TEXT);i.fitTo(e.everyDayText.width,0),i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.push(i);var o=new cleverapps.Layout(n
,{direction:cleverapps.UI.VERTICAL,margin:e.everyDayText.margin});o.setPositionRound(e.position);var a=this.bg=cleverapps.UI.createScale9Sprite(bundles.subscription_window.frames.subscription_ribbon_png||bundles.main.frames.ribbon,cleverapps.UI.Scale9Rect.TwoPixelXY);a.setAnchorPoint2(0,0),a.setContentSize2(e.goldRibbonBg),a.addChild(o),e.goldRibbonBg.dx&&(a.x+=e.goldRibbonBg.dx),this.addChild(a),this.bonus&&this.addChild(this.bonus)},createGold:function(){var e=cleverapps.styles.GoldBasedPrize,t=cleverapps.UI.generateImageText(cleverapps.subscription.calcReward().gold,cleverapps.styles.FONTS.SUBSCRIPTION_WINDOW_GOLD_COIN_TEXT),s=new cc.Sprite(bundles.reward_icons.frames.gold_small_png);s.setScale(e.goldAmount.icon.scale);var n=[s,t];return-1!==["olympics"].indexOf(cleverapps.config.name)&&(this.bonus=new SubscriptionBonus,this.bonus.getDescription().forEach(function(e){n.push(e)})),new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:e.goldAmount.margin})},
createRewardsGrid:function(){var i=cleverapps.styles.GoldBasedPrize,e=RewardsHelper.getDisplayData(cleverapps.subscription.calcReward(),{itemsPrefix:"x"}),t=cleverapps.values(e).map(function(e){return function(e,t){var s=new cc.Sprite(e);cleverapps.UI.fitToBox(s,i.prizes.icon),s.setPositionY(s.getPositionY()+i.prizes.icon.dy);var n=cleverapps.UI.generateTTFText(t,cleverapps.styles.FONTS.SUBSCRIPTION_WINDOW_GOLD_COIN_TEXT);return new cleverapps.Layout([s,n],{direction:cleverapps.UI.HORIZONTAL,margin:i.prizes.margin})}(e.img,e.txt)}),s=[],n=2;"scramble"===cleverapps.config.name&&(n=4);var o=new cleverapps.Layout(t.splice(0,n),{direction:cleverapps.UI.HORIZONTAL,margin:i.prizes.marginCol});if(s.push(o),0<t.length){var a=new cleverapps.Layout(t,{direction:cleverapps.UI.HORIZONTAL,margin:i.prizes.marginCol});s.push(a)}return i.prizes.boostersBelow&&s.reverse(),new cleverapps.Layout(s,{direction:cleverapps.UI.VERTICAL,margin:i.prizes.marginRow})},createGoldBlock:function(){
var e=cleverapps.styles.GoldBasedPrize,t=new cc.Node;t.setAnchorPoint2();var s=new cc.Sprite(bundles.subscription_window.frames.prize_icon);t.setContentSize2(s.getContentSize());var n=new cleverapps.Spine(bundles.main.jsons.reward_spine_json,e.gold.backgroundAnimation.scale);return n.setPositionRound(e.gold.backgroundAnimation.position),t.addChild(n,-1),n.setAnimation(0,"animation",!0),s.setPositionRound(t.width/2,t.height/2),t.addChild(s),t.setPositionRound(e.gold.position),t}});cleverapps.styles.GoldBasedPrize={width:600,height:500,gold:{animation:!1,backgroundAnimation:{scale:.7,position:{x:{align:"center"},y:{align:"center"}}},margin:0,position:{x:{align:"right",dx:0},y:{align:"top",dy:-70}}},goldRibbonBg:{scaleY:1.4,height:204,width:766},goldAmount:{icon:{scale:1.5},margin:10},position:{x:500,y:100},everyDayText:{margin:-4,width:400}};var BonusWorld=function(e,t){this.mission=e,(this.mission.bonusWorld=this).type=t,this.config=BonusWorldConfig[this.type],
this.bundle=bundles[this.config.bundle],cleverapps.EventEmitter.call(this)};BonusWorld.prototype=Object.create(cleverapps.EventEmitter.prototype),(BonusWorld.prototype.constructor=BonusWorld).prototype.backgroundBundleId=function(){return cleverapps.isInstant()&&bundles[this.config.bundle+"_background_instant"]?this.config.bundle+"_background_instant":this.config.bundle+"_background"},BonusWorld.prototype.isFinished=function(){return this.mission.result===Episode.LEVELS_PER_EPISODE||!this.mission.isRunning()},BonusWorld.prototype.finish=function(e){this.mission.complete(),cleverapps.metha.compound(e,[function(e){new TellWindow({text:"messages:"+this.config.localizationPrefix+".BonusWorldFinishWindow.Text",title:"messages:"+this.config.localizationPrefix+".BonusWorldFinishWindow.Title",buttonText:Messages.get("OK")}),cleverapps.metha.onceNoWindowsListener=e}.bind(this),function(e){cleverapps.metha.gotoMainScene(e)}])},BonusWorld.prototype.onLevelPassed=function(e){this.isCurrentLevel(e
)&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BONUS_WORLD_LEVEL+"_"+this.type+"_"+this.getProgress()),cleverapps.playSession.set(cleverapps.EVENTS.BONUS_WORLD_LEVEL_DAU,!0),this.mission.update(1),this.levelPassed=!0)},BonusWorld.prototype.animateChangeProgress=function(){this.levelPassed=!1,this.trigger("changeProgress")},BonusWorld.prototype.getProgress=function(){return this.mission.result},BonusWorld.prototype.isCurrentLevel=function(e){return e.levelNo===this.getProgress()},BonusWorld.prototype.getAvailableReward=function(){for(var e=0;e<RewardsConfig.BonusWorld.length;e++)if(this.getProgress()>=RewardsConfig.BonusWorld[e].level&&!this.isRewardReceived(RewardsConfig.BonusWorld[e]))return RewardsConfig.BonusWorld[e]},BonusWorld.prototype.isRewardReceived=function(e){return(this.mission.details.receivedRewards||{})[e.level]},BonusWorld.prototype.giveReward=function(e){var s=this.getAvailableReward();s?cleverapps.metha.compound(e,[function(e){this.trigger("giveReward",s,e)
}.bind(this),function(e){new RewardWindow({reward:s.reward}),cleverapps.metha.onceNoWindowsListener=e},function(e){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BONUS_WORLD_REWARD+"_"+RewardsConfig.BonusWorld.indexOf(s));var t=this.mission.details.receivedRewards||{};t[s.level]=!0,this.mission.update(0,cleverapps.extend(this.mission.details,{receivedRewards:t})),e()}.bind(this)]):e()};var BonusWorldLevel=function(e,t){this.bonusWorld=e,this.levelNo=t,this.type=this.calcType(),this.bonusWorld.on("changeProgress",this.onChangeProgress.bind(this)),cleverapps.EventEmitter.call(this)};BonusWorldLevel.prototype=Object.create(cleverapps.EventEmitter.prototype),(BonusWorldLevel.prototype.constructor=BonusWorldLevel).prototype.calcType=function(){var e=this.bonusWorld.getProgress();return this.bonusWorld.levelPassed&&e--,this.levelNo<e?BonusWorldLevel.TYPE_PASSED:e===this.levelNo?BonusWorldLevel.TYPE_CURRENT:BonusWorldLevel.TYPE_NOT_PASSED},BonusWorldLevel.prototype.setType=function(e){
this.type=e,this.trigger("changeType")},BonusWorldLevel.prototype.onChangeProgress=function(){this.bonusWorld.getProgress()!==this.levelNo&&this.bonusWorld.getProgress()-1!==this.levelNo||this.setType(this.calcType())},BonusWorldLevel.prototype.onClick=function(){new Episode(BonusWorldConfig[this.bonusWorld.type].episode,this.levelNo,{type:Episode.Types.BONUS_WORLD}).getLevel().onPressed()},BonusWorldLevel.TYPE_PASSED=0,BonusWorldLevel.TYPE_CURRENT=1,BonusWorldLevel.TYPE_NOT_PASSED=2;var BonusWorldMissionLogic=function(e,t){this.mission=e;var s=cleverapps.eventManager.getFeatureEvent("bonusworld").options.bonusWorldType;this.bonusWorld=new BonusWorld(e,s),this.mission.iconForce.text="messages:"+this.bonusWorld.config.localizationPrefix+".BonusWorld.Force",t&&(this.clearSavedGames(),cleverapps.forces.clearForce(Forces.BONUS_WORLD.id))};BonusWorldMissionLogic.prototype.hasIntent=function(){return!0},BonusWorldMissionLogic.prototype.willUseIntent=function(e){
return e.episode.isBonusWorldLevel()},BonusWorldMissionLogic.prototype.processEvent=function(e,t){e===Mission.EVENT_LEVEL_FINISH&&t.level.episode.isBonusWorldLevel()&&this.bonusWorld.onLevelPassed(t.level)},BonusWorldMissionLogic.prototype.clearSavedGames=function(){for(var e=0;e<Episode.LEVELS_PER_EPISODE;e++)cleverapps.GameSaver.removeSave(GameBase.getStoreKey({episode:{episodeNo:BonusWorldConfig[this.bonusWorld.type].episode},levelNo:e}))},BonusWorld.TYPE_VALENTINES="valentines",BonusWorld.TYPE_EASTER="easter",BonusWorld.TYPE_SUMMER="summer";var BonusWorldConfig={};BonusWorldConfig[BonusWorld.TYPE_VALENTINES]={bundle:"bonus_world_valentines",episode:"bonus_world_valentines",sideBarJson:bundles.sidebar.jsons.bonus_world_valentines_icon_json,localizationPrefix:"Valentines"},BonusWorldConfig[BonusWorld.TYPE_EASTER]={bundle:"bonus_world_easter",episode:"bonus_world_easter",sideBarJson:bundles.sidebar.jsons.bonus_world_easter_icon_json,localizationPrefix:"Easter"},
BonusWorldConfig[BonusWorld.TYPE_SUMMER]={bundle:"bonus_world_summer",episode:"bonus_world_summer",sideBarJson:bundles.sidebar.jsons.bonus_world_summer_icon_json,localizationPrefix:"Summer"};var BonusWorldLockedIcon=function(){this.featureEvent=cleverapps.eventManager.getNextFeatureEvent(Missions[Mission.TYPE_BONUS_WORLD].feature),SideBarIcon.call(this,{})};BonusWorldLockedIcon.prototype=Object.create(SideBarIcon.prototype),(BonusWorldLockedIcon.prototype.constructor=BonusWorldLockedIcon).prototype.resetState=function(){if(this.available=!1,-1!==cleverapps.missionManager.getProjectAvailableTypes().indexOf(Mission.TYPE_BONUS_WORLD)&&cleverapps.user.checkAvailable(Missions[Mission.TYPE_BONUS_WORLD].available,{future:!0})){var e=Missions[Mission.TYPE_BONUS_WORLD].feature;if(-1===cleverapps.eventManager.listCurrentFeatures().indexOf(e)&&this.featureEvent){var t=this.featureEvent.getTimeBeforeStart();t>BonusWorldLockedIcon.TIME_BEFORE_EVENT||(this.available=!0,t<=0?(this.setLeftTime(0),
this.setLocked(!1)):(this.setAnimation(BonusWorldConfig[this.featureEvent.options.bonusWorldType].sideBarJson),this.setLocked(!0),this.setAttention(!1),this.setLeftTime(t)))}}},BonusWorldLockedIcon.prototype.onPressed=function(){this.removeFromSideBar(),cleverapps.metha.display({focus:"reloadMainScene",action:function(e){cleverapps.metha.gotoMainScene(e)}})},BonusWorldLockedIcon.prototype.getLockedTip=function(){return Messages.get("IconLocked.TipTimer")},BonusWorldLockedIcon.TIME_BEFORE_EVENT=cleverapps.parseInterval("7 days");var BonusWorldScene=cleverapps.FixedWidthScene.extend({ctor:function(e){this.bonusWorld=e.bonusWorld,this._super(cleverapps.Environment.SCENE_BONUS_WORLD);for(var t=0;t<Episode.LEVELS_PER_EPISODE;t++)new BonusWorldLevelView(new BonusWorldLevel(this.bonusWorld,t),this.scene);this.scene.addChild(new BonusWorldRewardsView(this.bonusWorld)),cleverapps.environment.episodeNo=this.bonusWorld.config.episode,cleverapps.playSession.set(cleverapps.EVENTS.BONUS_WORLD_DAU,!0
)},onExit:function(){this._super(),this.bonusWorld.purge()},getBackgroundStyles:function(){return{background:bundles[this.bonusWorld.backgroundBundleId()].urls.background,animation:bundles[this.bonusWorld.backgroundBundleId()].jsons.background_spine}},getAudioStyles:function(){return{res:bundles[this.bonusWorld.backgroundBundleId()].urls.music,delay:1}}});BonusWorldScene.BUNDLES=function(e){var t=[BonusWorldConfig[e.bonusWorld.type].bundle];return t.push(e.bonusWorld.backgroundBundleId()),t};var BonusWorldLevelView=cc.Node.extend({ctor:function(e,t){this._super(),this.level=e,this.styles=cleverapps.styles.BonusWorldLevelView[this.level.bonusWorld.type],this.setAnchorPoint2(),this.setContentSize2(this.styles),this.setLocalZOrder(Episode.LEVELS_PER_EPISODE-this.level.levelNo),this.createBg(),this.createText(),this.level.type===BonusWorldLevel.TYPE_CURRENT&&this.createIndicator(),t.addChild(this),this.setPositionRound(this.styles.levels[this.level.levelNo]),this.onChangeType(),
this.registerTarget(this.styles,"targetLevel"+this.level.levelNo),this.level.on("changeType",this.createListener(this.animateChangeType.bind(this)))},createTooltip:function(){cleverapps.tooltipManager.create(this,{text:this.level.type===BonusWorldLevel.TYPE_NOT_PASSED?"messages:BonusWorldNotPassedLevelTooltip":"messages:BonusWorldPassedLevelTooltip",position:3<=this.level.levelNo?cleverapps.styles.UI.Tooltip.LOCATION.below:cleverapps.styles.UI.Tooltip.LOCATION.above})},createFinger:function(){this.finger=new FingerView({control:"bonus_world_finger"}),this.getParent().addChild(this.finger),this.finger.setPositionRound(this.styles.levels[this.level.levelNo]),this.finger.standardLoop({delay:5,delayOnBegin:!0})},createBg:function(){var e=this.level.bonusWorld.bundle.jsons.level_json,t=1;this.styles.levels[this.level.levelNo].scaleX&&(e=this.level.bonusWorld.bundle.jsons.level_2_json,t=this.styles.levels[this.level.levelNo].scaleX),this.bg=new cleverapps.Spine(e),this.addChild(this.bg),
this.bg.setPositionRound(this.width/2,this.height/2),this.styles.skins&&this.bg.setSkin("skin_"+this.level.levelNo%this.styles.skins),this.bg.setScaleX(t);var s="current";this.level.type===BonusWorldLevel.TYPE_PASSED&&(s="passed"),this.level.type===BonusWorldLevel.TYPE_NOT_PASSED&&(s="not_passed"),this.bg.setAnimation(0,s,!0)},createIndicator:function(){if(this.styles.indicator){var e=this.indicator=new cleverapps.Spine(this.level.bonusWorld.bundle.jsons.level_indicator);this.addChild(e),e.setPositionRound(this.width/2,this.height/2),e.setAnimation(0,this.getIndicatorAnimation("idle"),!0)}},createText:function(){this.styles.skinNumbers?this.level.type!==BonusWorldLevel.TYPE_PASSED&&this.bg.setSkin(""+this.level.levelNo):(this.text=cleverapps.UI.generateImageText(this.level.levelNo+1,cleverapps.styles.FONTS.BONUS_WORLD_LEVEL_TEXT),this.addChild(this.text),this.text.setPositionRound(this.styles.text))},onChangeType:function(){this.onClickListener&&(cc.eventManager.removeListener(
this.onClickListener),delete this.onClickListener),cleverapps.UI.removeHover(this),cleverapps.tooltipManager.remove(this),this.finger&&this.finger.removeFromParent(),this.level.type===BonusWorldLevel.TYPE_PASSED&&this.createTooltip(),this.level.type===BonusWorldLevel.TYPE_CURRENT&&(cleverapps.UI.applyHover(this),this.onClickListener=cleverapps.UI.onClick(this,this.onClick.bind(this)),this.createFinger()),this.level.type===BonusWorldLevel.TYPE_NOT_PASSED&&this.createTooltip()},animateChangeType:function(){this.styles.indicator?this.animateIndicatorChange():(this.level.type===BonusWorldLevel.TYPE_CURRENT&&this.bg.setAnimationAndIdleAfter("np-c","current"),this.level.type===BonusWorldLevel.TYPE_PASSED&&(this.bg.setAnimationAndIdleAfter("c-p","passed"),this.runAction(new cc.Sequence(new cc.DelayTime(1),new cc.PlaySound(this.level.bonusWorld.bundle.urls.pass_level_effect))))),this.onChangeType()},animateIndicatorChange:function(){if(this.level.type===BonusWorldLevel.TYPE_CURRENT){
var e=this.styles["targetLevel"+(this.level.levelNo-1)],t=cc.p(this.width/2,this.height/2),s=this.indicator=e.indicator;delete e.indicator,s.replaceParentSamePlace(this),s.setAnimation(0,this.getIndicatorAnimation("animation"),!1),cleverapps.audio.playSound(this.level.bonusWorld.bundle.urls.jump_sfx),this.bg.setAnimation(0,"np-c",!1),s.runAction(new cc.Sequence(new cc.JumpTo(this.styles.delay,t,this.styles.jumpHeight,1),new cc.CallFunc(function(){s.setAnimation(0,this.getIndicatorAnimation("idle"),!0),this.bg.setAnimation(0,"current",!0)}.bind(this))))}if(this.level.type===BonusWorldLevel.TYPE_PASSED&&(this.bg.setAnimationAndIdleAfter("c-p","passed"),this.level.levelNo===Episode.LEVELS_PER_EPISODE-1)){var n=cleverapps.styles.BonusWorldRewardsView[this.level.bonusWorld.type].finalPrizeTarget;this.indicator.replaceParentSamePlace(n),this.indicator.setAnimationAndIdleAfter("animation","idle_static");t=cc.p(n.width/2+this.styles.finalPrizePos.x,n.height/2+this.styles.finalPrizePos.y)
;this.indicator.runAction(new cc.JumpTo(this.styles.delay,t,this.styles.jumpHeight,1)),cleverapps.audio.playSound(this.level.bonusWorld.bundle.urls.jump_sfx)}},getIndicatorAnimation:function(e){return e+(this.styles.levels[this.level.levelNo].invertIndicator?"_invert":"")},onClick:function(){this.level.onClick()}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{BONUS_WORLD_LEVEL_TEXT:{name:"default",size:40}}),cleverapps.styles.BonusWorldLevelView={},cleverapps.styles.BonusWorldLevelView[BonusWorld.TYPE_VALENTINES]={width:130,height:100,text:{x:{align:"center"},y:{align:"center"}},levels:[{x:{align:"center",dx:-84},y:{align:"center",dy:-550}},{x:{align:"center",dx:53},y:{align:"center",dy:-600},scaleX:1},{x:{align:"center",dx:220},y:{align:"center",dy:-550},scaleX:-1},{x:{align:"center",dx:100},y:{align:"center",dy:-350}},{x:{align:"center",dx:-30},y:{align:"center",dy:-307},scaleX:-1},{x:{align:"center",dx:-190},y:{align:"center",dy:-300},scaleX:-1},{x:{align:"center",dx:-245},y:{
align:"center",dy:-210}},{x:{align:"center",dx:-205},y:{align:"center",dy:-90},scaleX:-1},{x:{align:"center",dx:60},y:{align:"center",dy:-47},scaleX:1},{x:{align:"center",dx:210},y:{align:"center",dy:-10}},{x:{align:"center",dx:200},y:{align:"center",dy:110},scaleX:-1},{x:{align:"center",dx:30},y:{align:"center",dy:135}},{x:{align:"center",dx:-130},y:{align:"center",dy:159},scaleX:-1},{x:{align:"center",dx:-190},y:{align:"center",dy:280},scaleX:1},{x:{align:"center",dx:-80},y:{align:"center",dy:370},scaleX:1}]},cleverapps.styles.BonusWorldLevelView[BonusWorld.TYPE_EASTER]={width:130,height:160,skins:3,text:{x:{align:"center"},y:{align:"center",dy:10}},levels:[{x:{align:"center",dx:-149},y:{align:"center",dy:-490}},{x:{align:"center",dx:12},y:{align:"center",dy:-515}},{x:{align:"center",dx:159},y:{align:"center",dy:-470}},{x:{align:"center",dx:97},y:{align:"center",dy:-314}},{x:{align:"center",dx:-48},y:{align:"center",dy:-320}},{x:{align:"center",dx:-194},y:{align:"center",dy:-305}},{
x:{align:"center",dx:-256},y:{align:"center",dy:-198}},{x:{align:"center",dx:-253},y:{align:"center",dy:-68}},{x:{align:"center",dx:-113},y:{align:"center",dy:10}},{x:{align:"center",dx:54},y:{align:"center",dy:-19}},{x:{align:"center",dx:190},y:{align:"center",dy:7}},{x:{align:"center",dx:99},y:{align:"center",dy:102}},{x:{align:"center",dx:-29},y:{align:"center",dy:149}},{x:{align:"center",dx:-148},y:{align:"center",dy:241}},{x:{align:"center",dx:-125},y:{align:"center",dy:363}}]},cleverapps.styles.BonusWorldLevelView[BonusWorld.TYPE_SUMMER]={width:75,height:105,skinNumbers:!0,indicator:!0,jumpHeight:60,delay:.99,text:{x:{align:"center"},y:{align:"center"}},finalPrizePos:{x:-10,y:50},levels:[{x:{align:"center",dx:-224},y:{align:"center",dy:-551}},{x:{align:"center",dx:-115},y:{align:"center",dy:-445}},{x:{align:"center",dx:-41},y:{align:"center",dy:-347}},{x:{align:"center",dx:89},y:{align:"center",dy:-298}},{x:{align:"center",dx:211},y:{align:"center",dy:-252}},{x:{align:"center",
dx:273},y:{align:"center",dy:-175}},{invertIndicator:!0,x:{align:"center",dx:179},y:{align:"center",dy:-119}},{invertIndicator:!0,x:{align:"center",dx:43},y:{align:"center",dy:-81}},{invertIndicator:!0,x:{align:"center",dx:-95},y:{align:"center",dy:-67}},{invertIndicator:!0,x:{align:"center",dx:-225},y:{align:"center",dy:-31}},{x:{align:"center",dx:-132},y:{align:"center",dy:47}},{x:{align:"center",dx:-31},y:{align:"center",dy:104}},{x:{align:"center",dx:74},y:{align:"center",dy:140}},{invertIndicator:!0,x:{align:"center",dx:17},y:{align:"center",dy:206}},{invertIndicator:!0,x:{align:"center",dx:-74},y:{align:"center",dy:255}}]},"riddles"===cleverapps.config.name&&(cleverapps.styles.BonusWorldLevelView[BonusWorld.TYPE_SUMMER]={width:85,height:85,skinNumbers:!0,indicator:!0,jumpHeight:50,delay:.4,finalPrizePos:{x:0,y:0},text:{x:{align:"center"},y:{align:"center"}},levels:[{x:{align:"center",dx:38},y:{align:"center",dy:-523},invertIndicator:!0},{x:{align:"center",dx:-56},y:{
align:"center",dy:-488},invertIndicator:!0},{x:{align:"center",dx:-138},y:{align:"center",dy:-437},invertIndicator:!0},{x:{align:"center",dx:-211},y:{align:"center",dy:-363},invertIndicator:!0},{x:{align:"center",dx:-262},y:{align:"center",dy:-275},invertIndicator:!0},{x:{align:"center",dx:-198},y:{align:"center",dy:-193}},{x:{align:"center",dx:-87},y:{align:"center",dy:-170}},{x:{align:"center",dx:35},y:{align:"center",dy:-150}},{x:{align:"center",dx:268},y:{align:"center",dy:-70}},{x:{align:"center",dx:220},y:{align:"center",dy:14},invertIndicator:!0},{x:{align:"center",dx:141},y:{align:"center",dy:84},invertIndicator:!0},{x:{align:"center",dx:73},y:{align:"center",dy:164},invertIndicator:!0},{x:{align:"center",dx:-36},y:{align:"center",dy:201},invertIndicator:!0},{x:{align:"center",dx:-115},y:{align:"center",dy:259},invertIndicator:!0},{x:{align:"center",dx:-174},y:{align:"center",dy:337},invertIndicator:!0}]}),"scramble"===cleverapps.config.name&&(
cleverapps.styles.BonusWorldLevelView[BonusWorld.TYPE_SUMMER]={skins:2,width:80,height:70,text:{x:{align:"center",dx:2},y:{align:"center",dy:2}},levels:[{x:{align:"center",dx:-50},y:{align:"center",dy:-455}},{x:{align:"center",dx:41},y:{align:"center",dy:-389}},{x:{align:"center",dx:145},y:{align:"center",dy:-345}},{x:{align:"center",dx:58},y:{align:"center",dy:-245}},{x:{align:"center",dx:-75},y:{align:"center",dy:-230}},{x:{align:"center",dx:-176},y:{align:"center",dy:-177}},{x:{align:"center",dx:-154},y:{align:"center",dy:-82}},{x:{align:"center",dx:-32},y:{align:"center",dy:-63}},{x:{align:"center",dx:190},y:{align:"center",dy:29}},{x:{align:"center",dx:59},y:{align:"center",dy:80}},{x:{align:"center",dx:-68},y:{align:"center",dy:92}},{x:{align:"center",dx:-164},y:{align:"center",dy:163}},{x:{align:"center",dx:-46},y:{align:"center",dy:202}},{x:{align:"center",dx:70},y:{align:"center",dy:247}},{x:{align:"center",dx:186},y:{align:"center",dy:283}}]})
;var BonusWorldRewardsView=cc.Node.extend({ctor:function(e){this._super(),this.bonusWorld=e,this.setAnchorPoint2(),this.styles=cleverapps.styles.BonusWorldRewardsView[this.bonusWorld.type],this.setPositionRound({x:{align:"center"},y:{align:"center"}}),this.rewards=RewardsConfig.BonusWorld.map(function(e,t){var s=this.bonusWorld.isRewardReceived(e),n=new cc.Node;this.addChild(n),n.setAnchorPoint2(),n.setContentSize2(this.styles.prize),n.setPositionRound(this.styles.prizes[t]),s||(cleverapps.tooltipManager.create(n,{rewards:e.reward,text:"messages:"+this.bonusWorld.config.localizationPrefix+".BonusWorld.RewardTooltip",position:t<1?cleverapps.styles.UI.Tooltip.LOCATION.above:cleverapps.styles.UI.Tooltip.LOCATION.below}),cleverapps.UI.applyHover(n));var i=new cleverapps.Spine(this.bonusWorld.bundle.jsons.chest_json);return n.addChild(i),i.setAnimation(0,s?"idle_open":"idle",!0),i.setSkin("skin_"+t),i.setPositionRound(n.width/2,n.height/2),n.animation=i,
t===RewardsConfig.BonusWorld.length-1&&n.registerTarget(this.styles,"finalPrizeTarget"),n},this),this.bonusWorld.on("giveReward",this.giveReward.bind(this))},giveReward:function(e,t){var s=this.rewards[RewardsConfig.BonusWorld.indexOf(e)];cleverapps.UI.removeHover(s),cleverapps.tooltipManager.remove(s),cleverapps.audio.playSound(this.bonusWorld.bundle.urls.prize_sfx);var n=s.animation;n.setAnimation(0,"open",!1),n.setCompleteListener(function(){n.setAnimation(0,"idle_open",!0),n.setCompleteListener(function(){}),t()}.bind(this))}});cleverapps.styles.BonusWorldRewardsView={},cleverapps.styles.BonusWorldRewardsView[BonusWorld.TYPE_VALENTINES]={prize:{width:150,height:150},prizes:[{x:{align:"center",dx:220},y:{align:"center",dy:-430}},{x:{align:"center",dx:-71},y:{align:"center",dy:-60}},{x:{align:"center",dx:19},y:{align:"center",dy:441}}]},cleverapps.styles.BonusWorldRewardsView[BonusWorld.TYPE_EASTER]={prize:{width:150,height:150},prizes:[{x:{align:"center",dx:245},y:{align:"center",
dy:-349}},{x:{align:"center",dx:-245},y:{align:"center",dy:85}},{x:{align:"center",dx:19},y:{align:"center",dy:476}}]},cleverapps.styles.BonusWorldRewardsView[BonusWorld.TYPE_SUMMER]={prize:{width:150,height:150},prizes:[{x:{align:"center",dx:144},y:{align:"center",dy:-422}},{x:{align:"center",dx:203},y:{align:"center",dy:33}},{x:{align:"center",dx:22},y:{align:"center",dy:422}}]},"riddles"===cleverapps.config.name&&(cleverapps.styles.BonusWorldRewardsView[BonusWorld.TYPE_SUMMER]={prize:{width:90,height:90},prizes:[{x:{align:"center",dx:-251},y:{align:"center",dy:-467}},{x:{align:"center",dx:140},y:{align:"center",dy:-91}},{x:{align:"center",dx:-40},y:{align:"center",dy:373}}]}),"scramble"===cleverapps.config.name&&(cleverapps.styles.BonusWorldRewardsView[BonusWorld.TYPE_SUMMER]={prize:{width:110,height:110},prizes:[{x:{align:"center",dx:180},y:{align:"center",dy:-241}},{x:{align:"center",dx:98},y:{align:"center",dy:-41}},{x:{align:"center",dx:-10},y:{align:"center",dy:384}}]})
;var SlotMachine=function(e){cleverapps.EventEmitter.call(this),this.mission=e,(this.mission.slotMachine=this).reels=[];for(var t=0;t<SlotMachine.REELS_AMOUNT;t++)this.reels.push(new SlotMachineReel)};SlotMachine.prototype=Object.create(cleverapps.EventEmitter.prototype),(SlotMachine.prototype.constructor=SlotMachine).prototype.isForceAvailable=function(){return!cleverapps.forces.isShown(Forces.SLOT_MACHINE.id)},SlotMachine.prototype.isHelpForceAvailable=function(){return!cleverapps.forces.isShown(Forces.SLOT_MACHINE_HELP.id)},SlotMachine.prototype.showForce=function(){this.getTickets()<SlotMachine.TICKETS_PER_SPIN&&this.earnTickets(SlotMachine.TICKETS_PER_SPIN-this.getTickets()),this.trigger("showForce")},SlotMachine.prototype.showHelpForce=function(){this.trigger("showHelpForce")},SlotMachine.prototype.getTickets=function(){return this.mission.result},SlotMachine.prototype.earnTickets=function(e){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_TICKET,{amount:e}),
this.mission.update(e),this.trigger("updateTickets")},SlotMachine.prototype.takeTickets=function(e,t){this.mission.update(-e),this.trigger("updateTickets",t)},SlotMachine.prototype.canSpin=function(){return this.getTickets()>=SlotMachine.TICKETS_PER_SPIN},SlotMachine.prototype.spin=function(e,t){this.takeTickets(SlotMachine.TICKETS_PER_SPIN);var n=this.calcPayline(t);this.trigger("spin"),cleverapps.metha.compound(e,[function(s){s=cleverapps.wait(this.reels.length,s),this.reels.forEach(function(e,t){setTimeout(function(){this.reels[t].spin(n[t],s)}.bind(this),t*SlotMachine.REEL_SPIN_DELAY)},this)}.bind(this),function(e){setTimeout(e,500)},this.giveReward.bind(this)])},SlotMachine.prototype.calcPayline=function(e){if(cleverapps.config.debugMode&&SlotMachine.PREDEFINED_PAYLINE)return SlotMachine.PREDEFINED_PAYLINE;if(e)return[SlotMachine.BOOSTER_1_SYMBOL.type,SlotMachine.BOOSTER_1_SYMBOL.type,SlotMachine.BOOSTER_3_SYMBOL.type];for(var t=[],s=0;s<SlotMachine.REELS_AMOUNT;s++)t.push(
cleverapps.Random.choose(SlotMachineReel.SYMBOLS).type);return t},SlotMachine.prototype.giveReward=function(e){var t,s=this.reels.map(function(e){return e.getCurrent()}),n=[];for(p=0;p<SlotMachine.PRIZES_TABLE.length;p++){for(var i=[],o=SlotMachine.PRIZES_TABLE[p],a={},r=0;r<o.payline.length;r++)a[o.payline[r]]||(a[o.payline[r]]=0),a[o.payline[r]]++;for(r=0;r<s.length;r++)void 0===a[s[r].type]?i.push(!1):(a[s[r].type]--,0<=a[s[r].type]&&i.push(!0));var l=!0;for(var c in a)if(0<a[c]){l=!1;break}l&&(t=o,n=i)}for(var p=0;p<this.reels.length;p++)this.reels[p].getCurrent().animate(n[p]);this.trigger("giveReward",t,e),t&&setTimeout(cleverapps.Chest.prototype._receiveReward.bind(null,t.reward),2e3)},SlotMachine.REELS_AMOUNT=3,SlotMachine.REEL_SPIN_DELAY=300,SlotMachine.TICKETS_PRICE=249,SlotMachine.TICKETS_BUY_AMOUNT=25,SlotMachine.TICKETS_PER_SPIN=5,SlotMachine.COIN_SYMBOL={type:"coin",icon:bundles.slot_machine.frames.coin_png},SlotMachine.COINS_SYMBOL={type:"coins",
icon:bundles.slot_machine.frames.coins_png},SlotMachine.BOOSTER_1_SYMBOL={type:"booster_1",icon:bundles.slot_machine.frames.booster_13_png},SlotMachine.BOOSTER_2_SYMBOL={type:"booster_2",icon:bundles.slot_machine.frames.booster_14_png},SlotMachine.BOOSTER_3_SYMBOL={type:"booster_3",icon:bundles.slot_machine.frames.booster_15_png},SlotMachine.SYMBOLS={},SlotMachine.SYMBOLS[SlotMachine.COIN_SYMBOL.type]=SlotMachine.COIN_SYMBOL,SlotMachine.SYMBOLS[SlotMachine.COINS_SYMBOL.type]=SlotMachine.COINS_SYMBOL,SlotMachine.SYMBOLS[SlotMachine.BOOSTER_1_SYMBOL.type]=SlotMachine.BOOSTER_1_SYMBOL,SlotMachine.SYMBOLS[SlotMachine.BOOSTER_2_SYMBOL.type]=SlotMachine.BOOSTER_2_SYMBOL,SlotMachine.SYMBOLS[SlotMachine.BOOSTER_3_SYMBOL.type]=SlotMachine.BOOSTER_3_SYMBOL,SlotMachine.PRIZES_TABLE=[{payline:["booster_1","booster_1"],reward:{boosters:{13:3}}},{payline:["booster_1","booster_1","booster_1"],reward:{boosters:{13:5}}},{payline:["booster_2","booster_2"],reward:{boosters:{14:3}}},{payline:["booster_2",
"booster_2","booster_2"],reward:{boosters:{14:5}}},{payline:["booster_3","booster_3"],reward:{boosters:{15:3}}},{payline:["booster_3","booster_3","booster_3"],reward:{boosters:{15:5}}},{payline:["coin","coin","coin"],reward:{gold:250}},{payline:["coins","coins","coins"],reward:{gold:500}}];var SlotMachineReel=function(){cleverapps.EventEmitter.call(this),this.symbols=SlotMachineReel.SYMBOLS.map(function(e,t){return new SlotMachineSymbol(this,e,t)},this),this.current=0,this.setCurrentByType(cleverapps.Random.choose(SlotMachineReel.SYMBOLS).type)};SlotMachineReel.prototype=Object.create(cleverapps.EventEmitter.prototype),(SlotMachineReel.prototype.constructor=SlotMachineReel).prototype.setCurrentByType=function(t){this.current=this.symbols.filter(function(e){return e.type===t})[0].index;for(var e=0;e<this.symbols.length;e++)this.symbols[e].move()},SlotMachineReel.prototype.getCurrent=function(){return this.symbols[this.current]},SlotMachineReel.prototype.spin=function(e,t){
this.getCurrent().reset(),this.minSpinsAmount=cleverapps.Random.random(20,25),this._spinOneDegree(0,e,t)},SlotMachineReel.prototype._spinOneDegree=function(e,t,s){e++,this.current=(this.current-1+this.symbols.length)%this.symbols.length;for(var n=e>=this.minSpinsAmount&&this.symbols[this.current].type===t,i=0;i<this.symbols.length;i++)this.symbols[i].spin(n);setTimeout(function(){n?s():this._spinOneDegree(e,t,s)}.bind(this),SlotMachineReel.ONE_DEGREE_DURATION)},SlotMachineReel.ONE_DEGREE_DURATION=50,SlotMachineReel.SYMBOLS=[SlotMachine.BOOSTER_1_SYMBOL,SlotMachine.COIN_SYMBOL,SlotMachine.BOOSTER_2_SYMBOL,SlotMachine.BOOSTER_1_SYMBOL,SlotMachine.BOOSTER_3_SYMBOL,SlotMachine.BOOSTER_1_SYMBOL,SlotMachine.COINS_SYMBOL,SlotMachine.BOOSTER_2_SYMBOL];var SlotMachineSymbol=function(e,t,s){cleverapps.EventEmitter.call(this),cleverapps.extend(this,t),this.reel=e,this.index=s};SlotMachineSymbol.prototype=Object.create(cleverapps.EventEmitter.prototype),(
SlotMachineSymbol.prototype.constructor=SlotMachineSymbol).prototype.animate=function(e){this.trigger("animate",e)},SlotMachineSymbol.prototype.reset=function(){this.trigger("reset")},SlotMachineSymbol.prototype.move=function(){this.trigger("move")},SlotMachineSymbol.prototype.spin=function(e){this.trigger("spin",e)};var SlotMachineMissionLogic=function(e){this.mission=e,this.slotMachine=new SlotMachine(e)},SlotMachineButton=cc.Node.extend({ctor:function(e){this.slotMachine=e;var t=cleverapps.styles.SlotMachineButton;this._super(),this.setAnchorPoint2(),this.setContentSize2(t),this.background=new cleverapps.Spine(bundles.slot_machine.jsons.button_json),this.addChild(this.background),this.background.setPositionRound(this.width/2,this.height/2),this.background.setAnimation(0,"idle",!0),this.setScale(.5),this.baseScale=this.scale,this.setPositionRound(t),cleverapps.UI.onClick(this,this.onClicked.bind(this),{swallowTouches:!1}),cleverapps.UI.applyHover(this),this.slotMachine.on("showForce"
,this.createListener(this.showForce.bind(this)))},showForce:function(){cleverapps.metha.display({focus:"SlotMachineForce",action:function(e){cleverapps.forces.create(this,Forces.SLOT_MACHINE,{scaleX:1.5,scaleY:1.5}),cleverapps.forces.onceForceClosed=e}.bind(this)})},onClicked:function(){var t=!1;cleverapps.forces.isRunningForce()&&(t=!0,cleverapps.forces.closeRunningForce()),cleverapps.metha.display({focus:"SlotMachine",control:"MenuBarGoldItem",action:function(e){if(!this.slotMachine.canSpin())return new SlotMachineBuyWindow(this.slotMachine),void(cleverapps.metha.onceNoWindowsListener=e);this.slotMachine.spin(e,t),t||(cleverapps.playSession.set(cleverapps.EVENTS.SLOT_MACHINE_SPIN_DAU,!0),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_SPIN)),this.runPressAnimation()}.bind(this)})},runPressAnimation:function(){this.background.setAnimationAndIdleAfter("press","idle"),cleverapps.audio.playSound(bundles.slot_machine.urls.button_click_effect)}})
;cleverapps.styles.SlotMachineButton={x:{align:"center"},y:{align:"center",dy:-210},contentOffset:{x:0,y:28},width:400,height:250};var SlotMachineReelView=ccui.Layout.extend({ctor:function(e){this._super(),this.reel=e,this.setClippingEnabled(!0);var t=cleverapps.styles.SlotMachineReelView;this.setContentSize2(t),this.reel.symbols.forEach(function(e){this.addChild(new SlotMachineSymbolView(e))}.bind(this))}});cleverapps.styles.SlotMachineReelView={width:140,height:286};var SlotMachineSymbolView=cc.Node.extend({ctor:function(e){this._super(),this.symbol=e,this.reel=this.symbol.reel;var t=cleverapps.styles.SlotMachineSymbolView;this.setContentSize2(t),this.setAnchorPoint2();var s=new cc.Sprite(e.icon);this.addChild(s),s.setPositionRound(this.width/2,this.height/2),e.on("move",this.createListener(this.move.bind(this))),e.on("spin",this.createListener(this.spinOneDegree.bind(this))),e.on("animate",this.createListener(this.animate.bind(this))),e.on("reset",this.createListener(
this.reset.bind(this))),this.setPositionRound(this.calcPosition()),this.setCascadeColorEnabled(!0)},reset:function(){this.stopAllActions(),this.shine&&(this.shine.removeFromParent(),delete this.shine),this.setColor(cleverapps.styles.COLORS.WHITE)},animate:function(e){e?(this.shine=new cleverapps.Spine(bundles.slot_machine.jsons.shine_json),this.addChild(this.shine),this.shine.setSkin(this.symbol.type),this.shine.setAnimation(0,"animation",!1),this.shine.setPositionRound(this.width/2,this.height/2),this.shine.setCompleteListenerRemove()):this.runAction(new cc.Sequence(new cc.TintTo(.2,120,120,120),new cc.DelayTime(5),new cc.TintTo(.2,255,255,255)))},move:function(){this.setPositionRound(this.calcPosition())},spinOneDegree:function(e){var t=cleverapps.styles.SlotMachineSymbolView,s=this.calcPosition();e?this.runAction(new cc.Sequence(new cc.MoveBy(SlotMachineReel.ONE_DEGREE_DURATION/1e3,0,-t.height-t.height/2).easing(cc.easeBackInOut(.6)),new cc.PlaySound(
bundles.slot_machine.urls.spin_stop_effect,{throttle:0}),new cc.MoveBy(.1,0,t.height/2+t.height/8),new cc.MoveBy(.1,0,-t.height/8).easing(cc.easeIn(2)),new cc.CallFunc(function(){this.setPositionRound(s)}.bind(this)))):this.runAction(new cc.Sequence(new cc.MoveBy(SlotMachineReel.ONE_DEGREE_DURATION/1e3,0,-t.height),new cc.CallFunc(function(){this.setPositionRound(s)}.bind(this)))),cleverapps.audio.playSound(bundles.slot_machine.urls.spin_effect,{throttle:25})},calcPosition:function(){var e=cleverapps.styles.SlotMachineSymbolView,t=((this.reel.getCurrent().index+1)%this.reel.symbols.length-this.symbol.index+this.reel.symbols.length)%this.reel.symbols.length,s=cleverapps.styles.SlotMachineReelView.height/2-(e.height/2+e.height);return cc.p(this.width/2,e.height/2+t*e.height+s)}});cleverapps.styles.SlotMachineSymbolView={width:150,height:150,lastAnimation:{}};var SlotMachineScene=cleverapps.FixedWidthScene.extend({ctor:function(e){this._super(cleverapps.Environment.SCENE_SLOT_MACHINE),
cleverapps.Random.randomSeed(),this.slotMachine=e.slotMachine,this.background.addChild(new SlotMachineButton(this.slotMachine)),this.background.addChild(new SlotMachineView(this.slotMachine,this)),cleverapps.playSession.set(cleverapps.EVENTS.SLOT_MACHINE_DAU,!0)},onExit:function(){this._super(),this.slotMachine.purge()},getBackgroundStyles:function(){return{background:bundles.slot_machine.urls.background}},getAudioStyles:function(){return{res:bundles.slot_machine.urls.music,delay:1}}});SlotMachineScene.BUNDLES=function(){return["slot_machine"]};var SlotMachineView=cc.Node.extend({ctor:function(e,t){this._super(),this.setAnchorPoint2(),this.slotMachine=e,this.scene=t;var s=cleverapps.styles.SlotMachineView,n=this.slotMachine.reels.map(function(e){return new SlotMachineReelView(e)},this),i=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:s.margin});this.addChild(i),this.setContentSize2(i.getContentSize()),i.setPositionRound(this.width/2,this.height/2),this.setScale(.5),
this.setPositionRound(s);var o=new cc.Sprite(bundles.slot_machine.frames.arrow_png);this.addChild(o),o.setPositionRound(s.arrow),this.amount=new SlotMachineTicketsAmount(this.slotMachine),this.addChild(this.amount),this.amount.setPositionRound(s.amount),this.createHelpButton(),this.createLights(),this.slotMachine.on("giveReward",this.createListener(this.giveReward.bind(this))),this.slotMachine.on("spin",this.createListener(this.onSpin.bind(this))),this.slotMachine.on("showHelpForce",this.createListener(this.showHelpForce.bind(this)))},showHelpForce:function(){cleverapps.metha.display({focus:"SlotMachineHelpForce",action:function(e){cleverapps.forces.create(this.helpButton,Forces.SLOT_MACHINE_HELP,{scaleX:1.5,scaleY:1.5}),cleverapps.forces.onceForceClosed=e}.bind(this)})},createLights:function(){var e=cleverapps.styles.SlotMachineView;this.lights=new cleverapps.Spine(bundles.slot_machine.jsons.lights_json),this.addChild(this.lights),this.lights.setPositionRound(e.lights),
this.lights.setAnimation(0,"idle",!0)},createHelpButton:function(){var e=cleverapps.styles.SlotMachineView;this.helpButton=new cleverapps.UI.Button({button_png:bundles.slot_machine.frames.help_button_png,button_on_png:bundles.slot_machine.frames.help_button_on_png,onClicked:function(){cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),cleverapps.metha.display({focus:"SlotMachineRulesWindow",action:function(e){new SlotMachineRulesWindow,cleverapps.metha.onceNoWindowsListener=e}})}}),this.addChild(this.helpButton),this.helpButton.setPositionRound(e.helpButton)},giveReward:function(t,e){if(this.spinSound&&(cleverapps.audio.stopSound(this.spinSound),delete this.spinSound),t){var s,n=t.reward;n.boosters?(s=new cleverapps.Spine(bundles.slot_machine.jsons.reward_json),this.addChild(s),s.setPositionRound(this.width/2,this.height/2),s.setSkin("booster_"+Object.keys(n.boosters)[0]),s.setAnimation(0,"show_up",!1),cleverapps.audio.playSound(
bundles.slot_machine.urls.boosters_reward_effect)):(s=new cleverapps.Spine(bundles.slot_machine.jsons.reward_gold_json),this.addChild(s),s.setPositionRound(this.width/2,this.height/2),s.setAnimation(0,"animation2",!1),cleverapps.audio.playSound(bundles.slot_machine.urls.coins_reward_effect)),s.setCompleteListenerRemove(this.showRewards.bind(this,n,e));var i="reward";!t.payline.every(function(e){return e===t.payline[0]})||t.payline[0]!==SlotMachine.COIN_SYMBOL.type&&t.payline[0]!==SlotMachine.COINS_SYMBOL.type||(i="reward_big"),this.lights.setAnimation(0,i,!0),this.runAction(new cc.Sequence(new cc.DelayTime(2.7),new cc.CallFunc(function(){this.lights.setAnimation(0,"idle",!0)}.bind(this))))}else this.showRewards(void 0,e)},createReward:function(e,t){var s=cleverapps.styles.SlotMachineView,n=cleverapps.UI.generateImageText(e,cleverapps.styles.FONTS.SLOT_MACHINE_REWARD_TEXT),i=new cc.Sprite(t);return new cleverapps.Layout([i,n],{margin:s.rewards.textMargin,
direction:cleverapps.UI.HORIZONTAL})},showRewards:function(e,t){var s=cleverapps.styles.SlotMachineView,n=[];if(e){for(var i in e)if("boosters"===i)for(var o in e[i])n.push(this.createReward("x"+e[i][o],RewardsHelper.SMALL_ICONS[o]));else n.push(this.createReward(e[i],RewardsHelper.SMALL_ICONS[i]));this.rewardsBlock=new cleverapps.Layout(n,{margin:s.rewards.margin,direction:cleverapps.UI.HORIZONTAL})}else this.rewardsBlock=cleverapps.UI.generateOnlyText("messages:TryAgain",cleverapps.styles.FONTS.SLOT_MACHINE_REWARD_TEXT),this.rewardsBlock.fitTo(s.tryAgainText.width,s.tryAgainText.height),this.rewardsBlock.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.CallFunc(this.removeRewardsBlock.bind(this))));var a=e?bundles.slot_machine.urls.reward_window_effect:bundles.slot_machine.urls.no_reward_effect;this.rewardsBlock.setCascadeOpacityEnabledRecursively(!0),this.addChild(this.rewardsBlock),this.rewardsBlock.setPositionRound(s.rewards),this.rewardsBlock.setScale(.5),
this.rewardsBlock.setOpacity(0),this.rewardsBlock.runAction(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.3,1).easing(cc.easeBackInOut(1)),new cc.FadeIn(.3)),new cc.PlaySound(a),new cc.CallFunc(t)))},removeRewardsBlock:function(){this.rewardsBlock&&(this.rewardsBlock.runAction(new cc.Sequence(new cc.FadeOut(.3),new cc.RemoveSelf)),delete this.rewardsBlock)},onSpin:function(){this.removeRewardsBlock(),this.lights.setAnimationAndIdleAfter("spin","idle"),this.spinSound=cleverapps.audio.playSound(bundles.slot_machine.urls.lights_effect)}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{SLOT_MACHINE_REWARD_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SLOT_MACHINE_BAR_TEXT:{size:32,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.SlotMachineView={x:{align:"center"},y:{align:"center",dy:55},helpButton:{x:{align:"center",dx:188},y:{align:"center",dy:246}},arrow:{x:{
align:"center",dx:-239},y:{align:"center",dy:0}},rewards:{textMargin:4,margin:5,x:{align:"center"},y:{align:"center",dy:250}},amount:{x:{align:"center",dx:0},y:{align:"bottom",dy:-160}},buyButton:{x:{align:"right",dx:-40},y:{align:"bottom",dy:-272}},lights:{x:{align:"center",dx:0},y:{align:"center",dy:250}},tryAgainText:{width:300,height:65},margin:10};var SlotMachineRulesWindow=Window.extend({onWindowLoaded:function(){this._super({name:"slotmachineruleswindow",title:"messages:SlotMachineRulesWindow.title",content:this.getContent(),styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.SlotMachineRulesWindow.window,!0)})},getContent:function(){var e=cleverapps.styles.SlotMachineRulesWindow,t=SlotMachine.PRIZES_TABLE.map(function(e,t){return this.createRow(e,t)},this);return new cleverapps.Layout(t,{direction:cleverapps.UI.TOP_TO_BOTTOM,margin:e.margin})},createRow:function(e,t){for(var s=cleverapps.styles.SlotMachineRulesWindow,n=[],
i=0;i<SlotMachine.REELS_AMOUNT;i++){var o;o=e.payline[i]?new cc.Sprite(SlotMachine.SYMBOLS[e.payline[i]].icon):new cc.Sprite(bundles.slot_machine.frames.point_png),cleverapps.UI.fitToBox(o,{width:s.row.icons.width,height:s.row.icons.height});var a=new cc.Scale9Sprite(bundles.slot_machine.frames.reward_bg_png);a.setContentSize2(s.row.icons.bg),a.addChild(o),o.setPositionRound(a.width/2,a.height/2),n.push(a)}var r=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:s.row.icons.margin}),l=this.createReward(e,t);return new cleverapps.Layout([r,l],{direction:cleverapps.UI.HORIZONTAL,margin:s.row.margin})},createReward:function(e,t){var s,n,i=cleverapps.styles.SlotMachineRulesWindow;e.reward.boosters?(s=RewardsHelper.ICONS[Object.keys(e.reward.boosters)[0]],n=e.reward.boosters[Object.keys(e.reward.boosters)[0]]):(s=RewardsHelper.ICONS[Object.keys(e.reward)[0]],n=e.reward[Object.keys(e.reward)[0]]);var o=cleverapps.UI.generateOnlyText("="+n+"x",
cleverapps.styles.FONTS.WINDOW_TEXT),a=new cc.Sprite(s);cleverapps.UI.fitToBox(a,{width:i.row.reward.icon.width,height:i.row.reward.icon.height});var r=new cc.Node;if(r.setAnchorPoint2(),r.setContentSize2(i.row.reward),r.addChild(a),a.setPositionRound(i.row.reward.icon),r.addChild(o),o.setPositionRound(i.row.reward.text),t!==SlotMachine.PRIZES_TABLE.length-1){var l=new cc.Scale9Sprite(bundles.slot_machine.frames.line_png);l.setContentSize2(r.width,l.height),r.addChild(l),l.setPositionRound(i.row.line)}return r},listBundles:function(){return["slot_machine_rules_window"]}});cleverapps.styles.SlotMachineRulesWindow={margin:5,row:{margin:10,icons:{margin:5,width:80,height:60,bg:{width:100,height:80}},reward:{width:200,height:70,icon:{width:80,height:60,x:{align:"right"},y:{align:"center",dy:5}},text:{x:{align:"center",dx:-30},y:{align:"center",dy:-5}}},line:{x:{align:"center"},y:{align:"bottom",dy:-5}}},window:{Border:{x:50,y:140},contentOffset:-65}}
;var SlotMachineTicketsAmount=cc.Node.extend({ctor:function(e){this.slotMachine=e,this._super(),this.setAnchorPoint2(),this.createAmount(),this.createIcon(),this.createButton(),this.slotMachine.on("updateTickets",this.createListener(this.updateAmount.bind(this)))},createAmount:function(){var e=cleverapps.styles.SlotMachineTicketsAmount,t=new cc.Scale9Sprite(bundles.slot_machine.frames.amount_bg_png);t.setContentSize2(e.amount.bg),this.amount=cleverapps.UI.generateImageText("x"+this.slotMachine.getTickets(),cleverapps.styles.FONTS.SLOT_MACHINE_TICKETS_AMOUNT_TEXT),this.amount.baseScale=this.amount.scale,t.addChild(this.amount),this.amount.setPositionRound(e.amount.text),this.addChild(t),t.setPositionRound(e.amount)},createIcon:function(){var e=cleverapps.styles.SlotMachineTicketsAmount,t=new cc.Sprite(bundles.slot_machine.frames.tickets_buy_png);this.addChild(t),t.setPositionRound(e.icon)},createButton:function(){var e=cleverapps.styles.SlotMachineTicketsAmount,
t=new cleverapps.UI.Button({button_png:bundles.slot_machine.frames.plus_png,button_on_png:bundles.slot_machine.frames.plus_on_png,width:e.button.width,height:e.button.height,onClicked:function(){cleverapps.metha.display({focus:"SlotMachineBuyWindow",action:function(e){new SlotMachineBuyWindow(this.slotMachine),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})}.bind(this)});this.addChild(t),t.setPositionRound(e.button)},updateAmount:function(){this.amount.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.2*this.amount.baseScale),new cc.CallFunc(function(){this.amount.setString("x"+this.slotMachine.getTickets())},this),new cc.ScaleTo(.2,this.amount.baseScale)))}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{SLOT_MACHINE_TICKETS_AMOUNT_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.SlotMachineTicketsAmount={amount:{bg:{width:170,height:80},text:{x:{align:"center"},y:{align:"center"}},x:{align:"center"},y:{align:"center",dy:0}},icon:{x:{align:"center",
dx:-120},y:{align:"center"}},button:{x:{align:"center",dx:122},y:{align:"center"}}};var SlotMachineBuyWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.styles.SlotMachineBuyWindow;this._super({name:"slotmachinebuywindow",content:this.createContent(),styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.SlotMachineBuyWindow.window,!0),button:{content:this.createButtonContent(),width:t.button.width,height:t.button.height,onPressed:function(){cleverapps.user.takeGold(SlotMachine.TICKETS_PRICE)&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_TICKET_GOLD,{amount:SlotMachine.TICKETS_PRICE}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SLOT_MACHINE_TICKET_BOUGHT,{amount:SlotMachine.TICKETS_BUY_AMOUNT}),e.earnTickets(SlotMachine.TICKETS_BUY_AMOUNT),this.close())}.bind(this)}})},createContent:function(){var e=cleverapps.styles.SlotMachineBuyWindow,t=new cc.Scale9Sprite(bundles.slot_machine.frames.buy_window_inner_bg_png)
;t.setContentSize2(e.bg);var s=this.createAmount(),n=this.createTitle(),i=new cc.Sprite(bundles.slot_machine.frames.buy_window_icon_png);return t.addChild(s),s.setPositionRound(e.amount),t.addChild(n),n.setPositionRound(e.title),t.addChild(i),i.setPositionRound(e.icon),t},createTitle:function(){var e=cleverapps.styles.SlotMachineBuyWindow,t=new cc.Scale9Sprite(bundles.slot_machine.frames.buy_window_title_png);t.setContentSize2(e.title);var s=cleverapps.UI.generateOnlyText("messages:SlotMachineBuyWindow.title",cleverapps.styles.FONTS.SLOT_MACHINE_BUY_WINDOW_TITLE);return t.addChild(s),s.setPositionRound(e.title.text),t},createAmount:function(){var e=cleverapps.styles.SlotMachineBuyWindow,t=new cc.Sprite(bundles.slot_machine.frames.ticket_png);t.setScale(.7);var s=cleverapps.UI.generateImageText("x"+SlotMachine.TICKETS_BUY_AMOUNT,cleverapps.styles.FONTS.SLOT_MACHINE_BUY_WINDOW_AMOUNT);return new cleverapps.Layout([t,s],{margin:e.amount.margin,direction:cleverapps.UI.HORIZONTAL})},
createButtonContent:function(){var e=cleverapps.styles.SlotMachineBuyWindow,t=new cc.Sprite(bundles.reward_icons.frames.gold_small_png);t.setScale(.8);var s=cleverapps.UI.generateImageText(SlotMachine.TICKETS_PRICE,cleverapps.styles.FONTS.SLOT_MACHINE_BUY_BUTTON_TEXT);return new cleverapps.Layout([s,t],{direction:cleverapps.UI.HORIZONTAL,margin:e.button.margin})}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{SLOT_MACHINE_BUY_BUTTON_TEXT:{size:65,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SLOT_MACHINE_BUY_WINDOW_AMOUNT:{size:70,color:cleverapps.styles.COLORS.WHITE},SLOT_MACHINE_BUY_WINDOW_TITLE:{size:70,color:new cc.Color(254,233,1,255),stroke:{size:2,color:new cc.Color(143,68,56,255)},shadow:{color:new cc.Color(143,68,56,255),direction:cc.size(0,-2),blur:4}}}),cleverapps.styles.SlotMachineBuyWindow={margin:20,bg:{width:380,height:600},amount:{margin:5,x:{align:"center"},y:{
align:"bottom",dy:25}},button:{margin:5,width:260,height:100},title:{width:608,height:164,text:{x:{align:"center"},y:{align:"center",dy:10}},x:{align:"center"},y:{align:"center",dy:-68}},icon:{x:{align:"center"},y:{align:"top",dy:0}},window:{Border:{y:100},CloseButton:{offsetX:-31,offsetY:-39},contentOffset:50}};var GrowthFund=function(){cleverapps.EventEmitter.call(this),this.received=-1,this.levels=[],this.load(),this.createLevels(),cleverapps.user.on("incLevel",this.onUserIncLvl.bind(this)),this.isBought()&&cleverapps.playSession.set(cleverapps.EVENTS.GROWTH_FUND_DAU,!0)};GrowthFund.prototype=Object.create(cleverapps.EventEmitter.prototype),(GrowthFund.prototype.constructor=GrowthFund).prototype.isBought=function(){return-1<this.received},GrowthFund.prototype.onUserIncLvl=function(){this.calcLevelsState(),this.findByLevelNo(cleverapps.user.getVirtualLevel()-1)&&(this.wantsAttention=!0)},GrowthFund.prototype.afterBuy=function(){this.buyTime=Date.now(),cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.BOUGHT_FUND),this.received=0,this.trigger("updateState"),this.save()},GrowthFund.prototype.createLevels=function(){for(var e=GrowthFund.LEVELS.start;e<=GrowthFund.LEVELS.finish;e+=GrowthFund.LEVELS.step)this.levels.push({levelNo:e,reward:GrowthFund.LEVELS.rewards[e]||GrowthFund.LEVELS.rewards.default});this.calcLevelsState()},GrowthFund.prototype.calcLevelsState=function(){this.levels.forEach(function(e){e.levelNo>cleverapps.user.getVirtualLevel()-1?e.state=GrowthFund.STATE.INSUFFICIENT:e.levelNo<=this.received?e.state=GrowthFund.STATE.RECEIVED:0<this.received?e.levelNo===this.received+GrowthFund.LEVELS.step?e.state=GrowthFund.STATE.READY:e.state=GrowthFund.STATE.WAITING:e.levelNo===GrowthFund.LEVELS.start?e.state=GrowthFund.STATE.READY:e.state=GrowthFund.STATE.WAITING},this)},GrowthFund.prototype.takeReward=function(e){(!this.buyTime||Date.now()-this.buyTime>cleverapps.parseInterval("10 minutes"))&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.GROWTH_FUND_GOLD,{
amount:this.findByLevelNo(e).reward}),this.received=e,this.calcLevelsState(),this.trigger("updateState"),this.save()},GrowthFund.prototype.findByLevelNo=function(e){for(var t in this.levels)if(this.levels[t].levelNo===e)return this.levels[t]},GrowthFund.prototype.findFirst=function(e){for(var t in this.levels)if(this.levels[t].state===e)return this.levels[t]},GrowthFund.prototype.isRewardReady=function(){return this.findFirst(GrowthFund.STATE.READY)},GrowthFund.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.GROWTHFUND,this.getInfo()),e||cleverapps.synchronizer.addUpdateTask("growthfund")},GrowthFund.prototype.getInfo=function(){return this.received},GrowthFund.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.GROWTHFUND);this.setInfo(void 0===e?-1:e)},GrowthFund.prototype.setInfo=function(e){"object"==typeof(this.received=e)&&(this.received=-1,(e.bought||void 0!==e.lastReceived)&&(this.received=e.lastReceived||0))},
GrowthFund.prototype.updateInfo=function(e){this.setInfo(e),this.save(!0),this.calcLevelsState()},GrowthFund.prototype.isActive=function(){return cleverapps.user.getVirtualLevel()-1>=GrowthFund.LEVELS.start},GrowthFund.prototype.getTotalWaitingRewards=function(){var t=0;return this.levels.forEach(function(e){-1!==[GrowthFund.STATE.READY,GrowthFund.STATE.WAITING].indexOf(e.state)&&(t+=e.reward)}),t},GrowthFund.STATE={INSUFFICIENT:0,WAITING:1,READY:2,RECEIVED:3},GrowthFund.LEVELS={start:6,finish:49,step:1,rewards:{default:450,6:2800}};var GrowthFundWindow=Window.extend({onWindowLoaded:function(){this.product=Product.Create("growthFund"),this._super({name:"GrowthFundWindow",title:"messages:GrowthFundWindow.title",content:this.createContent(),styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.GrowthFundWindow.Window,!0),adjustToContent:void 0!==bundles.windows.frames.window_foreground_png,foreground:bundles.windows.frames.window_foreground_png}),
cleverapps.growthFund.on("updateState",this.updateState.bind(this),this)},onShow:function(){cleverapps.growthFund.isBought()&&this.removeBuyButton()},createContent:function(){var e=cleverapps.styles.GrowthFundWindow;return new cleverapps.Layout([this.createTiles(),this.createTop()],{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.contentPadding})},createTop:function(){var e=cleverapps.styles.GrowthFundWindow.top,t=this.top=cleverapps.UI.createScale9Sprite(bundles.growth_fund.frames.top_bg,cleverapps.UI.Scale9Rect.TwoPixelXY);t.setContentSize2(e);var s=new cc.Sprite(bundles.growth_fund.frames.fund_icon);t.addChild(s),s.setPositionRound(e.icon);var n=cleverapps.UI.generateOnlyText("messages:GrowthFundWindow.cta1",cleverapps.styles.FONTS.GROWTH_FUND_CTA1),i=cleverapps.UI.generateOnlyText("messages:GrowthFundWindow.cta2",cleverapps.styles.FONTS.GROWTH_FUND_CTA2);i.fitTo(e.text.width);var o=new cleverapps.Layout([i,n],{align:cleverapps.UI.ALIGN_START,
direction:cleverapps.UI.VERTICAL,margin:e.text.margin});return t.addChild(o),o.setPositionRound(e.text),this.createBuyButton(),t},createBuyButton:function(){if(cleverapps.growthFund.isBought())this.removeBuyButton();else{var e=cleverapps.styles.GrowthFundWindow.top.button,t=new ProductPriceView(this.product,{font:cleverapps.styles.FONTS.BUTTON_TEXT});this.buyButton=new cleverapps.UI.Button({width:e.width,height:e.height,button_png:bundles.growth_fund.frames.buy_button,button_on_png:bundles.growth_fund.frames.buy_button_on,content:t,onClicked:this.onBuy.bind(this)}),this.top.addChild(this.buyButton),this.buyButton.setPositionRound(e)}},removeBuyButton:function(){if(this.buyButton&&(this.buyButton.removeFromParent(),delete this.buyButton),!this.mark){var e=this.mark=new cc.Sprite(bundles.growth_fund.frames.checkmark);this.top.addChild(e),e.setPositionRound(cleverapps.styles.GrowthFundWindow.top.mark)}},onBuy:function(){var e=function(){this.removeBuyButton(),
cleverapps.growthFund.afterBuy()}.bind(this);this.product.buy(e)},createTiles:function(){var e=cleverapps.styles.GrowthFundWindow.scroll;this.levelTiles=cleverapps.growthFund.levels.map(function(e){return new GrowthFundLevelView(e)},this);var t=new cleverapps.Layout(this.levelTiles,{direction:cleverapps.UI.TOP_TO_BOTTOM,margin:e.margin}),s=this.scroll=new cleverapps.UI.ScrollView(t,{direction:cleverapps.UI.ScrollView.DIR_VERTICAL});if(s.setContentSize2(e),this.scrollToRelevant(),e&&e.top){var n=cleverapps.UI.createScale9Sprite(bundles.growth_fund.frames.scroll_top);n.setContentSize2(e.top),s.addChild(n),n.setPositionRound(e.top)}return s},scrollToRelevant:function(){var e=cleverapps.UI.ScrollView.SCROLLS.LOWER_RIGHT,t=cleverapps.growthFund.findFirst(GrowthFund.STATE.READY)||cleverapps.growthFund.findFirst(GrowthFund.STATE.INSUFFICIENT);if(t){var s=cleverapps.growthFund.levels.indexOf(t);e=this.levelTiles[s]}this.scroll.scrollTo(e)},updateState:function(){this.levelTiles.forEach(
function(e){e.updateState()})},listBundles:function(){return["growth_fund"]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{GROWTH_FUND_CTA1:{size:52,color:cleverapps.styles.COLORS.WHITE},GROWTH_FUND_CTA2:{size:35,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.GrowthFundWindow={margin:10,contentPadding:void 0,top:{width:980,height:250,text:{width:590,margin:-15,x:{align:"left",dx:290},y:{align:"top",dy:-5}},icon:{x:{align:"left",dx:20},y:{align:"center",dy:18}},button:{width:230,height:90,x:{align:"right",dx:-80},y:{align:"bottom",dy:25}},mark:{x:{align:"right",dx:-150},y:{align:"bottom",dy:45}}},scroll:{margin:5,width:990,height:710,top:{width:1078,height:45,x:{align:"center",dx:0},y:{align:"top",dy:25}}},Window:{}};var GrowthFundBuyWindow=Window.extend({onWindowLoaded:function(){this.product=Product.Create("growthFund"),this._super({name:"GrowthFundBuyWindow",title:"messages:GrowthFundBuyWindow.title",content:this.createContent()}),this.createBadge()},
createContent:function(){var e=cleverapps.styles.GrowthFundBuyWindow,t=this.createBuyButton(),s=this.createFundNode(),n=cleverapps.UI.generateOnlyText("messages:GrowthFundBuyWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT);return n.setDimensions(e.textWidth,0),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),new cleverapps.Layout([t,s,n],{direction:cleverapps.UI.VERTICAL,margin:e.margin})},createFundNode:function(){var e=cleverapps.styles.GrowthFundBuyWindow.fundNode,t=cleverapps.UI.createScale9Sprite(bundles.growth_fund.frames.buy_fund_bg,cleverapps.UI.Scale9Rect.TwoPixelXY);t.setContentSize2(e);var s=new cc.Sprite(bundles.growth_fund.frames.buy_fund_icon);t.addChild(s),s.setPositionRound(e.icon);var n=cleverapps.growthFund.getTotalWaitingRewards(),i=cleverapps.UI.generateImageText("x"+n,cleverapps.styles.FONTS.GROWTH_FUND_RECEIVE_AMOUNT);return t.addChild(i),i.setPositionRound(e.amount),t},createBuyButton:function(){var e=new ProductPriceView(this.product,{
font:cleverapps.styles.FONTS.BUTTON_TEXT});return new cleverapps.UI.Button({content:e,onClicked:function(){var e=function(){cleverapps.growthFund.afterBuy(),this.close()}.bind(this);this.product.buy(e)}.bind(this),width:cleverapps.styles.GrowthFundBuyWindow.button.width,height:cleverapps.styles.GrowthFundBuyWindow.button.height})},createBadge:function(){var e=cleverapps.styles.GrowthFundBuyWindow.badge,t=new TileBadge({text:"messages:GrowthFund.badge"});t.setAnchorPoint2(),t.setPositionRound(e),t.setRotation(e.rotation),this.window.addChild(t)},listBundles:function(){return["tile_shop"]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{GROWTH_FUND_RECEIVE_AMOUNT:{size:50,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.GrowthFundBuyWindow={textWidth:720,margin:20,badge:{x:{align:"right",dx:40},y:{align:"bottom",dy:-40},rotation:30},button:{width:240,height:95},fundNode:{width:350,height:340,icon:{x:{align:"center"},y:{align:"top",dy:-20}},amount:{x:{align:"center"},y:{
align:"bottom",dy:40}}}};var GrowthFundLevelView=cc.Node.extend({ctor:function(e){this._super(),this.data=e,this.state=e.state,this.setAnchorPoint2(),this.setContentSize2(cleverapps.styles.GrowthFundLevelView),this.createContent()},createContent:function(){var e=cleverapps.UI.createScale9Sprite(bundles.growth_fund.frames.lvl_bg,cleverapps.UI.Scale9Rect.TwoPixelXY);e.setContentSize2(this.getContentSize()),this.addChild(e),e.setPositionRound(this.width/2,this.height/2),this.createReward(),this.createTitle(),this.createIcon(),this.setState()},createReward:function(){var e=cleverapps.styles.GrowthFundLevelView.rewards,t=this.rewards=new RewardsListComponent({gold:this.data.reward},{font:cleverapps.styles.FONTS.GROWTH_FUND_REWARD,iconScale:e.scale,margin:e.margin,title:{text:Messages.get("RewardsListComponent.rewardTitle"),direction:cleverapps.UI.HORIZONTAL,font:cleverapps.styles.FONTS.GROWTH_FUND_REWARD_TITLE},reward:{direction:cleverapps.UI.HORIZONTAL,amountPrefix:"",margin:e.iconMargin},
icons:{gold:bundles.growth_fund.frames.rubies}});this.addChild(t),t.setPositionRound(e)},createTitle:function(){var e=cleverapps.styles.GrowthFundLevelView.title,t=cleverapps.UI.generateOnlyText("messages:GrowthFundWindow.reach",cleverapps.styles.FONTS.GROWTH_FUND_REWARD,{level:this.data.levelNo+1});t.fitTo(e.maxWidth),this.addChild(t),t.setPositionRound(e)},createIcon:function(){var e=cleverapps.styles.GrowthFundLevelView.icon,t=new cc.Sprite(bundles.growth_fund.frames.rubies_heap);this.addChild(t),t.setPositionRound(e)},setState:function(){var e;switch(cleverapps.tooltipManager.remove(this),cleverapps.UI.removeHover(this),cc.eventManager.removeListeners(this),this.data.state){case GrowthFund.STATE.INSUFFICIENT:e=Messages.get("GrowthFundWindow.insufficient"),this.createMark();break;case GrowthFund.STATE.WAITING:e=Messages.get("GrowthFundWindow.getPrevious",{level:cleverapps.growthFund.findFirst(GrowthFund.STATE.READY).levelNo+1}),this.createButton();break;case GrowthFund.STATE.READY:
this.createButton();break;case GrowthFund.STATE.RECEIVED:this.createMark()}e&&cleverapps.tooltipManager.create(this.button||this.mark,{text:e,position:cleverapps.styles.UI.Tooltip.LOCATION.above,swallowTouches:!1,ignoreOnTouchMoved:!0})},createButton:function(){var e=cleverapps.styles.GrowthFundLevelView.button;this.button=new cleverapps.UI.Button({button_png:bundles.growth_fund.frames.lvl_button,button_on_png:bundles.growth_fund.frames.lvl_button_on,width:e.width,height:e.height,content:cleverapps.UI.generateOnlyText("messages:Claim",cleverapps.styles.FONTS.BUTTON_TEXT),onClicked:this.onClick.bind(this),swallowTouches:!1}),this.addChild(this.button),this.button.setPositionRound(e)},onClick:function(){cleverapps.growthFund.isBought()?this.data.state===GrowthFund.STATE.READY&&(Game.currentGame?Game.currentGame.addReward("gold",this.data.reward,this.rewards.targets.gold):cleverapps.user.setGold(cleverapps.user.gold+this.data.reward),cleverapps.growthFund.takeReward(this.data.levelNo)
):new GrowthFundBuyWindow},createMark:function(){var e=bundles.growth_fund.frames[this.data.state===GrowthFund.STATE.RECEIVED?"checkmark":"lock"],t=this.mark=new cc.Sprite(e);this.addChild(t),t.setPositionRound(cleverapps.styles.GrowthFundLevelView.mark)},updateState:function(){this.state===this.data.state&&this.state!==GrowthFund.STATE.WAITING||(this.state=this.data.state,this.removeAllChildren(!0),this.createContent())}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{GROWTH_FUND_REWARD_TITLE:{size:35,color:cleverapps.styles.COLORS.WHITE},GROWTH_FUND_REWARD:{size:35,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.styles.GrowthFundLevelView={width:960,height:150,title:{maxWidth:480,x:{align:"left",dx:175},y:{align:"center",dy:25}},icon:{width:130,height:130,x:{align:"left",dx:25},y:{align:"center",dy:0}},rewards:{margin:10,iconMargin:0,scale:1,x:{align:"left",dx:175},y:{align:"center",dy:-25}},mark:{x:{align:"right",dx:-134},y:{align:"center"}},button:{width:200,height:80,x:{
align:"right",dx:-68},y:{align:"center"}}};var PurchaseRewardWindow=RewardWindow.extend({onWindowLoaded:function(e){this._super({title:"messages:PurchaseRewardWindow.title",name:"purchaserewardwindow",reward:e.reward,callback:e.callback,buttonText:"messages:OK",rewardName:!1})},receiveReward:function(){this.reward&&(this.onReceiveReward(),cleverapps.Chest.prototype._receiveReward(this.reward,!0),this.reward=[])}});WINDOW_ANIMATIONS={default:{open:function(e){var t=this.window.scale;this.window.setScale(.8*t),this.window.runAction(new cc.Sequence(new cc.ScaleTo(.3,t).easing(cc.easeBackOut()),new cc.CallFunc(e)))},close:function(e){e()}},fallIn:{open:function(e){var t=this.window.scale;this.window.setScale(3.2*t),this.runForAllChildren(function(e){e.setCascadeOpacityEnabled(!0)}),this.window.setOpacity(30),this.window.runAction(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.5,t).easing(cc.easeIn(1.5)),new cc.FadeIn(.5).easing(cc.easeIn(2))),new cc.CallFunc(e)))},close:function(e){e()}},
fromLeft:{open:function(e){var t=this.window.basePosition;this.window.setPositionX(-t.x),this.window.runAction(new cc.Sequence(new cc.MoveTo(.3,t.x,t.y).easing(cc.easeBackOut()),new cc.CallFunc(e)))},close:function(e){this.window.runAction(new cc.Sequence(new cc.MoveTo(.3,-this.window.x,this.window.y).easing(cc.easeBackIn()),new cc.CallFunc(e)))}},fromBelow:{open:function(e){var t=this.window.basePosition;this.window.setPositionY(0),this.window.runAction(new cc.Sequence(new cc.MoveTo(.3,t.x,t.y).easing(cc.easeBackOut()),new cc.CallFunc(e)))},close:function(e){this.window.runAction(new cc.Sequence(new cc.MoveTo(.4,this.window.x,0).easing(cc.easeBackIn()),new cc.CallFunc(e)))}},fromLeftToRight:{open:function(e){var t=this.window.basePosition;this.window.setPositionX(-this.window.width/2),this.window.runAction(new cc.Sequence(new cc.MoveTo(.3,t.x,t.y).easing(cc.easeBackOut()),new cc.CallFunc(e)))},close:function(e){this.window.runAction(new cc.Sequence(new cc.MoveTo(.3,
this.width+this.window.width/2,this.window.y).easing(cc.easeBackIn()),new cc.CallFunc(e)))}},bezierCircle:{open:function(e){var t=cc.p(this.window.basePosition.x,this.window.basePosition.y),s=cc.p(t.x+.2*this.width,this.height-this.window.height/2),n=cc.p(t.x+.35*this.width,t.y-this.window.height/6),i=this.window.scale;this.window.setScale(.3*i),this.window.setPosition(s);this.window.runAction(new cc.Sequence(new cc.Spawn(new cc.BezierTo(.25,[s,n,t]),new cc.ScaleTo(.25,i).easing(cc.easeIn(3))),new cc.CallFunc(e)))},close:function(e){var t=cc.p(this.window.basePosition.x,this.window.basePosition.y),s=cc.p(t.x-.2*this.width,this.height-this.window.height/2),n=cc.p(t.x-.35*this.width,t.y-this.window.height/2);this.window.setPosition(t);this.window.runAction(new cc.Sequence(new cc.Spawn(new cc.BezierTo(.25,[t,n,s]),new cc.ScaleTo(.25,.3).easing(cc.easeOut(.33))),new cc.CallFunc(e)))}},instant:{open:function(e){e()},close:function(e){e()}},force:{open:function(e){e()},close:function(e){
this.dialogue.close(e)}}},AVAILABLE_MOVE_ANIMATIONS={default:function(e,t,s){var n=e.scale,i=e.x,o=e.y,a=-t.col*cleverapps.styles.BaseCellView.CELL_SIZE_PX*.16,r=t.row*cleverapps.styles.BaseCellView.CELL_SIZE_PX*.16;0===t.row&&(r-=.075*cleverapps.styles.BaseCellView.CELL_SIZE_PX),e.runAction(new cc.RepeatForever(new cc.Sequence(new cc.Repeat(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.35,1.1*n),new cc.MoveTo(.35,i-a,o-r).easing(cc.easeIn(3.5))),new cc.Spawn(new cc.ScaleTo(.35,n),new cc.MoveTo(.35,i,o).easing(cc.easeOut(3.5)))),3),new cc.DelayTime(3))))},homescapes:function(e,t,s){var n=e.getScaleX(),i=e.getScaleY(),o=e.x,a=e.y,r=e.getRotation();if(e.cell.x===s.start.x&&e.cell.y===s.start.y){var l=s.dir.col*cleverapps.styles.BaseCellView.CELL_SIZE_PX*.2,c=-s.dir.row*cleverapps.styles.BaseCellView.CELL_SIZE_PX*.2;e.setLocalZOrder(10),e.runAction(new cc.RepeatForever(new cc.Sequence(new cc.Spawn(new cc.Sequence(new cc.MoveBy(.45,l,c),new cc.MoveBy(.2,-.3*l,-.3*c),new cc.MoveBy(.2,.3*l,
.3*c),new cc.MoveTo(.4,o,a).easing(cc.easeOut(1))),new cc.Sequence(new cc.ScaleTo(.45,1.1*n,1.1*i),new cc.DelayTime(.4),new cc.ScaleTo(.4,n,i).easing(cc.easeOut(1)))),new cc.DelayTime(.5))))}else e.runAction(new cc.RepeatForever(new cc.Sequence(new cc.DelayTime(.1),new cc.Spawn(new cc.Sequence(new cc.ScaleTo(.35,1.1*n,1.1*i),new cc.DelayTime(.35),new cc.ScaleTo(.35,n,i)),new cc.Sequence(new cc.RotateTo(.35,r-5).easing(cc.easeIn(2)),new cc.RotateTo(.175,r+5),new cc.RotateTo(.175,r-5),new cc.RotateTo(.35,r))),new cc.DelayTime(.6))))}},WRONG_MOVE_ANIMATIONS={default:function(e,t){var s=cleverapps.styles.BaseCellView.wrongMove.move,n=function(e){return 0<e?1:e<0?-1:0},i=s*n(t.x-e.cell.x),o=s*n(e.cell.y-t.y),a=.9,r=1.1;e.cell.x===t.x&&(a=1.1,r=.9),Game.counter.setTimeout(function(){}.bind(e),100),e.runAction(new cc.Spawn(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.1,a,r),new cc.MoveBy(.1,new cc.p(i,o))),new cc.Spawn(new cc.ScaleTo(.1,1,1),new cc.MoveBy(.1,new cc.p(-i,-o)))),
new cc.CallFunc(e.squeeze.bind(e,1))))}},BOARD_GUN_ANIMATIONS={default:function(e,t){t()},explosion:function(e,t){cleverapps.audio.playSound(bundles.game.urls.gun_bombing_effect),this.runAction(new cc.Sequence(new cc.DelayTime(1.3),new cc.CallFunc(t)));var s=new cleverapps.Spine(bundles.game.jsons.gun_json,5);this.addChild(s),s.setPositionRound(this.grid.getPosition()),s.replaceParentSamePlace(cc.director.getRunningScene().scene),s.setCompleteListenerRemove(),s.setAnimation(0,"animation",!1),s.setTimeScale(.5)},byLetter:function(e,t){cleverapps.audio.playSound(bundles.game.urls.gun_bombing_effect),this.runAction(new cc.Sequence(new cc.DelayTime(0),new cc.CallFunc(t))),e.forEach(function(e){var t=this.placeholders[e.row][e.column],s=new cleverapps.Spine(bundles.game.jsons.gun_json);this.letterGrid.addChild(s),s.setAnimation(0,"animation",!1),s.setPositionRound(t.getPosition()),s.setLocalZOrder(-1)}.bind(this))}};var ComicsPlayer=function(e,t){this.stages=e,this.animation=t,this.stage=-1
};ComicsPlayer.prototype.onChangeStage=function(){(void 0===this.dialogueStages||this.dialogueStages<1)&&(this.next(),this.dialogueStages=this.comics.dialogueStages||1),this.dialogueStages--},ComicsPlayer.prototype.next=function(){this.stage++,this.stage>=this.stages.length||(this.comics=this.stages[this.stage],this.runAnimation())},ComicsPlayer.prototype.completeShowAnimation=function(){this.inAnimation&&this.comics.idleAnimation&&(this.animation.setCompleteListener(function(){}),this.inAnimation=!1,this.animation.setAnimation(0,this.comics.idleAnimation,!0))},ComicsPlayer.prototype.runAnimation=function(){this.comics.showAnimation?(this.inAnimation=!0,this.animation.setAnimation(0,this.comics.showAnimation,!1),this.animation.setCompleteListener(this.animation.createListener(this.completeShowAnimation.bind(this)))):(this.inAnimation=!1,this.animation.setAnimation(0,this.comics.idleAnimation,!0))};var ComicsScene=cleverapps.FixedWidthScene.extend({ctor:function(e,t){this._super(
cleverapps.Environment.SCENE_COMICS),this.createBg(),this.addFilmEffect();var s=this.dialogue=new Dialogue(e.dialogue,{autoClose:!0,autoScroll:3}),n=new ComicsPlayer(e.stages,this.createAnimation(e));s.on("afterClose",t),s.on("changedStage",n.onChangeStage.bind(n)),this.runAction(new cc.Sequence(new cc.DelayTime(0),new cc.callFunc(function(){this.createDialogueView(s),s.run()}.bind(this))))},onChangeSize:function(e){this._super(e),this.bg&&this.bg.setScale(this.bg.baseScale/this.scene.scale),this.animationNode.setScale(1/this.scene.scale)},addFilmEffect:function(){var e=cleverapps.styles.ComicsScene,t={scale:1,silent:!0,noControls:!0};e.createFilmEffect&&(t=cleverapps.extend(t,e.createFilmEffect)),this.runAsync(function(){this.createFilmEffect(t)}.bind(this))},createAnimation:function(e){var t=this.animationNode=new cc.Node;t.setAnchorPoint2(),t.setContentSize(this.scene.getContentSize()),t.setPositionRound(this.scene.width/2,this.scene.height/2),this.scene.addChild(t)
;var s=this.animation=new cleverapps.Spine(e.json);return t.addChild(s),s.setPositionRound(t.width/2,t.height/2),s},createDialogueView:function(e){var t={overlay:!0,shadow:!1,styles:cleverapps.overrideStyles(cleverapps.styles.DialogueView,cleverapps.styles.ComicsScene.dialogue,!0)};"runes"===cleverapps.config.name&&(t.inner=!0),this.dialogueView=new DialogueView(e,t)},createBg:function(){var e=cleverapps.styles.ComicsScene;if(e.bg){var t=this.bg=new cc.Sprite(e.bg.image);this.scene.addChild(t),t.setPositionRound(this.scene.width/2,this.scene.height/2),this.bg.baseScale=Math.max(this.width/t.width,this.height/t.height),t.setScale(this.bg.baseScale),t.setLocalZOrder(-10)}}});ComicsScene.BUNDLES=function(e){var t=["dialogues"];return e.bundles&&(t=t.concat(e.bundles)),t},ComicsScene.showComics=function(e,t){cleverapps.scenes.replaceScene(new ComicsScene(t,e))},cleverapps.styles.ComicsScene={dialogue:{offsetY:150}};var KeyboardController=function(){this.keyPressed={},
cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyPressed:this.onKeyPressedHandler.bind(this),onKeyReleased:this.onKeyReleasedHandler.bind(this)}),2)};KeyboardController.prototype.RETURN_THROTTLE=250,KeyboardController.prototype.THROTTLE_KEYS=[cc.KEY.escape,cc.KEY.back],KeyboardController.prototype.KEYS=[cc.KEY.ctrl,cc.KEY.shift],cleverapps.config.debugMode&&KeyboardController.prototype.KEYS.push(cc.KEY.s,cc.KEY.d,cc.KEY.r,cc.KEY.j,cc.KEY.a,cc.KEY.Delete,cc.KEY.c,cc.KEY.h,cc.KEY.w,cc.KEY.m,cc.KEY.f),KeyboardController.prototype.isPressed=function(e){return this.keyPressed[e]},KeyboardController.prototype.onKeyPressedHandler=function(e){-1!==this.KEYS.indexOf(e)&&(this.keyPressed[e]=!0)},KeyboardController.prototype.onKeyReleasedHandler=function(e){-1!==this.KEYS.indexOf(e)?this.keyPressed[e]=!1:-1!==this.THROTTLE_KEYS.indexOf(e)&&this.returnAction()},KeyboardController.prototype.returnAction=cleverapps.throttle(
KeyboardController.prototype.RETURN_THROTTLE,function(){if(window.debug)window.debug.cleanupBorder(),window.debug=void 0;else if(0<cleverapps.windows.list.length){var e=cleverapps.windows.list[cleverapps.windows.list.length-1];e.closeByBackButton&&e.closeByBackButton()}else{var t=cc.director.getRunningScene();t&&t.closeAction()}});var LanternWindow=Window.extend({onWindowLoaded:function(e,t){var s=this.getStyles();this.mission=e,this.options=t||{},this._super({name:"lanternwindow",title:"messages:LanternWindow.Title",content:this.getContent(),button:{width:s.button.width,height:s.button.height,text:Messages.get("OK"),onPressed:this.close.bind(this)},styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.LanternWindow.window,!0)}),this.onStart()},getStyles:function(){return cleverapps.styles.LanternWindow},onStart:function(){this.mission.isRunning()&&this.addTimer();var e=this.getStyles(),t=this.animation=new cleverapps.Spine(bundles.lantern.jsons.lantern_game_json,
e.animation.scale);this.picture.addChild(t),t.setPositionRound(this.picture.width/2+e.animation.x,this.picture.height/2+e.animation.y),t.setAnimation(0,"idle_"+this.mission.logic.lantern.getCurrentStreak(),!0)},getContent:function(){var e=this.getStyles(),t=this.picture=new cc.Node;t.setContentSize(e.bg.width,e.bg.height),t.setAnchorPoint(0,0);var s=new cc.Sprite(bundles.lantern_window.frames.lantern_bg_png);s.setScale(e.bg.scale),s.setAnchorPoint(0,0),t.addChild(s);var n=this.createBonuses();n.setAnchorPoint(0,0),t.addChild(n),n.setPositionRound(e.bonuses);var i=this.createText();return i.setAnchorPoint(0,0),this.content=new cleverapps.Layout([i,t],{margin:e.margin,direction:cleverapps.UI.VERTICAL}),this.content},createBonuses:function(){var p=this.getStyles(),d=cleverapps.values(Lantern.BONUS_TYPES).sort(function(e,t){return LanternWindow.BONUSES_ORDER[e]-LanternWindow.BONUSES_ORDER[t]}),u=Lantern.BONUSES_BY_SERIA[this.mission.logic.lantern.getCurrentStreak()]||{},h=[]
;return d.forEach(function(e,t){var s=u[e],n=new cc.Scale9Sprite(s?p.bonuses.bonusBg.on:p.bonuses.bonusBg.off);n.setContentSize2(p.bonuses.bonusBg);var i=new cc.Sprite(p.bonuses.images[e].image);if(i.setScale(p.bonuses.images[e].scale),n.addChild(i),(n.icon=i).setPositionRound(n.width/2,n.height/2),s){var o=cleverapps.UI.generateTTFText("x"+u[e],cleverapps.styles.FONTS.LANTERN_WINDOW_AMOUNT_TEXT);if(n.addChild(o),o.setPositionRound(p.bonuses.amount),bundles.lantern_window.frames.amountBg){var a=cleverapps.UI.createScale9Sprite(bundles.lantern_window.frames.amountBg,cleverapps.UI.Scale9Rect.TwoPixelXY);a.setContentSize2(p.bonuses.amount.bg),o.addChild(a,-1),a.setPositionRound(p.bonuses.amount.bg)}}else i.setColor(new cc.Color(120,120,120,255));if(h.push(n),t<d.length-1){var r=new cc.Sprite(p.bonuses.arrow.image);if(r.setLocalZOrder(1),h.push(r),p.flashingArrows){var l=cleverapps.styles.COLORS.WHITE,c=cleverapps.styles.COLORS.COLOR_DARK_GRAY;s?u[d[t+1]]||r.runAction(new cc.RepeatForever(
new cc.Sequence(new cc.TintTo(.9,c.r,c.g,c.b),new cc.DelayTime(.1),new cc.TintTo(.9,l.r,l.g,l.b),new cc.DelayTime(.1)))):r.setColor(c)}}}.bind(this)),new cleverapps.Layout(h,{direction:cleverapps.UI.HORIZONTAL,margin:p.bonuses.margin})},createText:function(){var e=this.getStyles(),t=cleverapps.UI.generateTTFText("messages:LanternWindow.text",e.text.font);return t.setDimensions(e.text.width,0),t.fitTo(void 0,e.text.height),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t},addTimer:function(){var e=this.getStyles(),t=new cc.Scale9Sprite(e.timer.bg.image);t.setContentSize2(e.timer.bg);var s={background_content:t,font:cleverapps.styles.FONTS.LANTERN_TIMER_FONT||cleverapps.styles.FONTS.WINDOW_TEXT},n=new cleverapps.CountDownView(new cleverapps.CountDown(this.mission.getTimeLeft(),{onFinish:this.close.bind(this)}),s);this.picture.addChild(n),n.setPositionRound(e.timer)},listBundles:function(){return["windows","lantern_window","lantern"]}});LanternWindow.BONUSES_ORDER={heroes:0,moves:1,
multicolor:2},cleverapps.overrideFonts(cleverapps.styles.FONTS,{LANTERN_WINDOW_TEXT:{size:33,color:new cc.Color(130,70,40,255)},LANTERN_WINDOW_AMOUNT_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE,stroke:{size:2,color:cleverapps.styles.COLORS.BLACK}}}),cleverapps.styles.LanternWindow={margin:30,bg:{scale:2,width:612,height:532},timer:{x:{align:"center"},y:{align:"top",dy:15},bg:{image:bundles.main.frames.tournamentstory_bg,width:215,height:65}},text:{height:400,width:600,font:cleverapps.styles.FONTS.LANTERN_WINDOW_TEXT},button:{width:220,height:110},animation:{x:0,y:20,scale:1},bonuses:{x:{align:"center"},y:{align:"bottom",dy:5},bonusBg:{width:180,height:180,on:bundles.lantern_window.frames.bonus_bg_on_png,off:bundles.lantern_window.frames.bonus_bg_off_png},arrow:{image:bundles.lantern_window.frames.lantern_arrow_png},offsetY:5,margin:-23,amount:{x:{align:"right",dx:-28},y:{align:"bottom",dy:17}},images:{heroes:{image:bundles.reward_icons.frames.heroes_png,scale:1},moves:{
image:bundles.reward_icons.frames.moves_png,scale:1},multicolor:{image:bundles.reward_icons.frames.multicolor_png,scale:1}}},window:{Border:{y:170}}};var WardrobeWindow=Window.extend({onWindowLoaded:function(e){this.mission=e,this.wardrobeBundle=bundles[cleverapps.skins.getBundle()||e.feature];var t=cleverapps.styles.WardrobeWindow,s=cleverapps.environment.isGameScene(),n=cleverapps.overrideStyles(cleverapps.styles.Window,{HelpButton:t.HelpButton,bandButton:!0},!0);this._super({name:"wardrobewindow",content:this.generateContent(),styles:n,help:function(){this.close(),new WardrobeRulesWindow(e)}.bind(this),button:{width:t.button.width,height:t.button.height,button_png:t.button.button_png,button_on_png:t.button.button_on_png,text:s?Messages.get("OK"):Messages.get("Play"),onPressed:function(){cleverapps.eventLogger.logEvent(cleverapps.styles.WardrobeWindow.eventName+"_play"+(s?"_ongame":"")),this.close(),cleverapps.metha.distract({focus:"WardrobePlayButtonPressed",action:function(e){
cleverapps.metha.wantsToPlay(e)}})}.bind(this)}})},generateUpperBanner:function(e){var t=cleverapps.styles.WardrobeWindow.banner;this.banner=new cc.Sprite(cleverapps.skins.getSlot("wardrobeWindowBanner"));var s=new ccui.Layout;s.setAnchorPoint2(),s.setPositionRound(t.position.x+e.width/2,e.height+t.position.y),s.setContentSize2(this.banner.width,2*this.banner.height),s.setClippingEnabled(!0),e.addChild(s),this.banner.setPositionRound(s.width/2,this.banner.height/2),s.addChild(this.banner),this.refreshPerson()},refreshPerson:function(){var e=cleverapps.styles.WardrobeWindow.person;this.banner.removeAllChildren();var t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e.width,e.height),this.person=new cleverapps.Spine(e.json,e.scale),this.person.setAnimation(0,"idle",!0),t.addChild(this.person),this.person.setPositionRound(t.width/2,t.height/2),this.banner.addChild(t),t.setPositionRound(this.banner.width/2+e.position.x,this.banner.height/2+e.position.y)},refreshStagesScroll:function(){
var e=cleverapps.styles.WardrobeWindow.stages;this.stages.removeAllChildren();for(var t=[],s=0;s<WardrobeWindow.stages.length;s++)t.push(this.generateStageContent(s));var n=new cleverapps.Layout(t,{direction:cleverapps.UI.VERTICAL,margin:e.margin});this.stagesScroll=new cleverapps.UI.ScrollView(n,{childrenVisibility:cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_LINEAR}),this.stagesScroll.setContentSize2(e.width,e.height-2*e.padding),this.stagesScroll.setPositionRound(this.stages.width/2,this.stages.height/2),this.stages.addChild(this.stagesScroll);var i=this.mission.logic.getCurrentStage().stage;i>=t.length&&(i=t.length-1),this.needScroll=t[i]},addTimer:function(){var e=this.mission.finishTime()-Date.now();if(!(e<=0)){var t=new cleverapps.CountDown(e,{onFinish:this.close.bind(this)}),s=cleverapps.styles.WardrobeWindow.timer,n={font:s.font,timerPosition:{x:0,y:s.offsetY},regularFontTimerPosition:{x:0,y:s.regularFont.offsetY}};if(s.bg){var i=cleverapps.UI.createScale9Sprite(s.bg.image)
;i.setContentSize2(s.bg.width,s.bg.height),n.background_content=i}var o=new cleverapps.CountDownView(t,n);this.banner.addChild(o),o.setPositionRound(s.position)}},generateContent:function(){var e=cleverapps.styles.WardrobeWindow,t=new cc.Node;t.setContentSize2(e.width,e.height),t.setAnchorPoint2(),this.generateUpperBanner(t),this.stages=new cc.Scale9Sprite(e.stages.bg),this.stages.setContentSize2(e.stages.width,e.stages.height);var s=cleverapps.UI.generateOnlyText("messages:WardrobeDescText",cleverapps.styles.FONTS.WINDOW_TEXT);s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(t.width,0),s.fitTo(void 0,e.text.height);var n=new cleverapps.Layout([s,this.stages],{direction:cleverapps.UI.VERTICAL,margin:e.content.margin});return n.setPositionRound(t.width/2+e.content.position.x,t.height/2+e.content.position.y),t.addChild(n),e.zOrder&&t.setLocalZOrder(e.zOrder),this.refreshStagesScroll(),this.addTimer(),t},scrollToNeedStage:function(e){if(!1!==this.needScroll){
var t=this.mission.logic.getCurrentStage().stage;t<WardrobeWindow.stages.length-1&&this.stagesScroll.runAction(new cc.Sequence(new cc.DelayTime(e),new cc.CallFunc(function(){this.stagesScroll.scrollTo(this.needScroll,.5*(WardrobeWindow.stages.length-1-t)),this.needScroll=!1}.bind(this))))}},onShow:function(){this._super(),this.scrollToNeedStage(.2)},buyDecoration:function(e,t,s){levels.user.takeGold(t)&&(this.close(),this.mission.update(s),cleverapps.eventLogger.logEvent("buy_"+cleverapps.styles.WardrobeWindow.eventName+"_"+(e+1),{amount:t}),cleverapps.eventLogger.logEvent("buy_"+cleverapps.styles.WardrobeWindow.eventName+"_amount_"+(e+1)),this.mission.logic.stageToShow=e+1)},generateStageContent:function(e){var t=cleverapps.styles.WardrobeWindow.stages.stage,s=this.mission.logic.getCurrentStage(),n=0,i=!1,o=!1;s.stage>e?(n=WardrobeWindow.stages[e],i=!0):s.stage==e&&(n=s.progress,o=!0);var a=new cc.Scale9Sprite(t.bg);a.setContentSize2(t.width,t.height),a.setAnchorPoint2()
;var r=new cc.Node;r.setAnchorPoint2(),r.setContentSize2(a.getContentSize()),r.setPositionRound(a.width/2,a.height/2),r.setCascadeOpacityEnabled(!0),a.addChild(r);var l=new cc.Sprite(this.wardrobeBundle.frames["stage"+(e+1)+"_icon"]);if(l.setPositionRound(t.icon.position.x,t.icon.position.y+r.height/2),l.setScale(t.icon.scale),r.addChild(l),i&&t.icon.passedMark){var c=new cc.Sprite(t.icon.passedMark.icon);c.setPositionRound(l.x+t.icon.passedMark.position.x,l.y+t.icon.passedMark.position.y),c.setScale(t.icon.passedMark.scale),r.addChild(c)}if(!o){var p=cleverapps.UI.generateOnlyText(i?"messages:WardrobeCompleteText":"messages:WardrobeStageTaskText",cleverapps.styles.FONTS.WINDOW_TEXT,{amount:WardrobeWindow.stages[e]});p.fitTo(t.text.width,0),p.setPositionRound(t.text.position.x,t.text.position.y+r.height/2),p.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),r.addChild(p)}if(o){var d=new cc.Scale9Sprite(t.progress.bg);d.setContentSize2(t.progress.width,t.progress.height),
d.setAnchorPoint2(),this.progressBar=new ScaledProgressBar(t.progress.line),this.progressBar.setDimension(d.width-2*t.progress.padding.x,d.height-2*t.progress.padding.y),this.progressBar.setPositionRound(t.progress.padding.x,t.progress.padding.y),this.progressBar.setPercentage(n/WardrobeWindow.stages[e]*100),d.addChild(this.progressBar);var u=cleverapps.UI.generateOnlyText("messages:WardrobeCurrentText",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);u.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),u.fitTo(d.width);var h=cleverapps.UI.generateImageText(n+"/"+WardrobeWindow.stages[e],cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);h.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var g=new cleverapps.Layout([h,d,u],{direction:cleverapps.UI.VERTICAL,margin:t.currentDesc.margin});g.setPositionRound(t.currentDesc.position.x,t.currentDesc.position.y+r.height/2),r.addChild(g);var v=new cc.Sprite(bundles.menubar.frames.coin_png);v.setScale(t.button.coin.scale);var m=cleverapps.UI.generateImageText(
WardrobeWindow.prices[e],cleverapps.styles.FONTS.WARDROBE_BUY_BUTTON_TEXT||cleverapps.styles.FONTS.BUTTON_SMALL_TEXT),f=new cleverapps.Layout([m,v],{direction:cleverapps.UI.HORIZONTAL,margin:t.button.margin}),_=new cleverapps.UI.Button({content:f,width:t.button.width,height:t.button.height,padding:t.button.padding,onClicked:function(){this.buyDecoration(e,WardrobeWindow.prices[e],WardrobeWindow.stages[e]-n)}.bind(this),button_png:t.button.button_png,button_on_png:t.button.button_on_png}),y=cleverapps.UI.generateOnlyText("messages:WardrobeBuyText",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);y.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),y.setDimensions(t.buttonContainer.width,0),y.fitTo(void 0,t.buttonContainer.height);var b=new cleverapps.Layout([y,_],{direction:cleverapps.UI.VERTICAL,margin:t.buttonContainer.margin});b.setPositionRound(t.buttonContainer.position.x,t.buttonContainer.position.y+r.height/2),r.addChild(b)}var w=WardrobeWindow.prizes[e+1];if(w&&!i){var T=new cc.Node
;T.setAnchorPoint2(),T.setPositionRound(t.present.x,t.present.y),T.setContentSize2(t.present.width,t.present.height);var S=new cleverapps.Spine(t.present.animation.json,t.present.scale);S.setAnimation(0,t.present.animation.animation,!0),t.present.animation.skin&&S.setSkin(t.present.animation.skin),w.skin&&S.setSkin(w.skin),T.addChild(S),S.setPositionRound(T.width/2,T.height/2),cleverapps.tooltipManager.create(T,{rewards:w.prize,text:"messages:WardrobePrizeRewardTitle",position:cleverapps.styles.UI.Tooltip.LOCATION.above}),r.addChild(T,t.present.zOrder?t.present.zOrder:-1)}return i||o||p.setOpacity(80),a}});WardrobeWindow.prototype.listBundles=function(){return["wardrobe_window"]},WardrobeWindow.stages=[1,2,3,4,5,5,5,5,5,5,5,5],WardrobeWindow.prices=[100,150,300,350,650,1e3,1250,1500,2e3,2500,3e3,3500],WardrobeWindow.prizes={4:{prize:{gold:100},skin:"pink"},8:{prize:{gold:300},skin:"blue"},12:{prize:{gold:500},skin:"green"}},cleverapps.styles.WardrobeWindow={eventName:"wardrobe",
HelpButton:{x:{align:"left",dx:64},y:{align:"bottom",dy:64}},CloseButton:{},timer:{font:cleverapps.styles.FONTS.SMALL_WHITE_TEXT,offsetY:-2,regularFont:{offsetY:-2},position:{x:{align:"center",dx:0},y:{align:"bottom",dy:4}},bg:{width:180,height:50,image:bundles.wardrobe_window.frames.progress_bg}},person:{json:bundles.hero.jsons.hero_json,scale:.65,width:200,height:200,position:{x:-80,y:44}},banner:{position:{x:0,y:130}},stages:{bg:bundles.wardrobe_window.frames.window_table_bg,width:596,height:506,padding:14,margin:14,stage:{bg:bundles.main.frames.row_player_png,width:566,height:150,present:{x:160,y:97,iconDelta:20,width:100,height:100,scale:.55,animation:{json:bundles.windows.jsons.present_json,animation:"animation"}},currentDesc:{margin:6,position:{x:270,y:0}},buttonContainer:{width:140,height:60,position:{x:470,y:0},margin:2},button:{width:160,height:74,button_png:bundles.buttons_main.frames.small_green_button,button_on_png:bundles.buttons_main.frames.small_green_button_on,
margin:4,coin:{scale:.46}},progress:{width:200,height:28,padding:{x:2,y:2},bg:bundles.wardrobe_window.frames.progress_bg,line:bundles.wardrobe_window.frames.progress_fill},text:{width:330,position:{x:360,y:0}},icon:{scale:.8,position:{x:80,y:0},passedMark:{icon:bundles.main.frames.goal_done_sign,scale:1,position:{x:60,y:-26}}}}},width:520,height:800,content:{margin:30,position:{x:0,y:-40}},text:{height:180},button:{button_png:bundles.buttons_main.frames.red_button,button_on_png:bundles.buttons_main.frames.red_button_on,width:250,height:100}};var WardrobeReceiveWindow=Window.extend({onWindowLoaded:function(e){this.mission=e;var t=cleverapps.styles.WardrobeReceiveWindow;this._super({name:"wardrobereceivewindow",content:this.generateContent(),closeButton:!1,button:{width:t.button.width,height:t.button.height,text:Messages.get("OK"),onPressed:this.close.bind(this)}})},onShow:function(){this.runAction(new cc.Sequence(new cc.DelayTime(.1),new cc.CallFunc(function(){
this.visible&&cleverapps.audio.playSound(bundles.main.urls.reward_window_effect)}.bind(this))))},personAnimation:function(){var e=cleverapps.styles.WardrobeReceiveWindow;this.person.setAnimation(0,e.person.actionAnimation,!1),this.person.setCompleteListener(function(){this.person.setCompleteListener(function(){}),this.person.setAnimation(0,"idle",!0),this.personNode.runAction(new cc.Sequence(new cc.DelayTime(5),new cc.CallFunc(this.personAnimation.bind(this))))}.bind(this))},generateContent:function(){var e=cleverapps.styles.WardrobeReceiveWindow,t=new cc.Node;t.setContentSize2(e.width,e.height),t.setAnchorPoint2(),this.personNode=new cc.Node,this.personNode.setContentSize2(e.personNode.width,e.personNode.height),this.personNode.setAnchorPoint2(),this.person=new cleverapps.Spine(e.person.json,e.person.scale),this.personNode.addChild(this.person),this.person.setPositionRound(e.person.position);var s=cleverapps.UI.generateTTFText("messages:WardrobeRecieveText",
cleverapps.styles.FONTS.WINDOW_TEXT);s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(t.width,0);var n=new cleverapps.Layout([this.personNode,s],{direction:cleverapps.UI.VERTICAL,margin:e.content.margin});return n.setPositionRound(t.width/2+e.content.position.x,t.height/2+e.content.position.y),t.addChild(n),this.personAnimation(),t}});WardrobeReceiveWindow.prototype.listBundles=function(){return["wardrobe_window"]},cleverapps.styles.WardrobeReceiveWindow={width:520,height:500,personNode:{width:300,height:500},person:{json:bundles.hero.jsons.hero_json,actionAnimation:"idle_jump",scale:.9,position:{x:{align:"center"},y:{align:"center"}}},content:{margin:50,position:{x:0,y:90}},button:{width:250,height:100}};var WardrobeRulesWindow=Window.extend({onWindowLoaded:function(e){this.mission=e,this.wardrobeBundle=bundles[cleverapps.skins.getBundle()||e.feature];var t=cleverapps.styles.WardrobeRulesWindow;this._super({name:"wardroberuleswindow",content:this.generateContent(),
button:{width:t.button.width,height:t.button.height,text:Messages.get("OK")}})},scrollToStage:function(e){var t=0;0<e&&((t=this.stageNodes[this.skin-1].x-this.stagesLayout.width/2)<0&&(t=0),t>this.stagesList.width-this.stagesLayout.width&&(t=this.stagesList.width-this.stagesLayout.width));this.stagesList.runAction(new cc.MoveTo(.3,{x:-t,y:this.stagesList.y}))},updateSkin:function(){void 0===this.skin?this.skin=0:(0!==this.skin&&this.stageNodes[this.skin-1].setOpacity(100),this.skin=(this.skin+1)%(WardrobeWindow.stages.length+1),0!==this.skin&&this.stageNodes[this.skin-1].setOpacity(255)),this.person.setSkin("skin_"+this.skin);var e=cleverapps.styles.WardrobeRulesWindow.states[this.skin];e.mirror?this.personNode.setScaleX(-1):this.personNode.setScaleX(1),this.scrollToStage(this.skin),e.animation&&(this.person.setAnimation(0,e.animation,!1),this.person.setCompleteListener(function(){this.person.setAnimation(0,"idle",!0)}.bind(this))),e.sound&&cleverapps.audio.playSound(e.sound),
this.person.runAction(new cc.Sequence(new cc.DelayTime(e.time),new cc.CallFunc(function(){this.updateSkin()}.bind(this))))},onClose:function(){new WardrobeWindow(this.mission)},generateContent:function(){var e=cleverapps.styles.WardrobeRulesWindow,t=new cc.Node;t.setContentSize2(e.width,e.height),t.setAnchorPoint2();var s=this.personNode=new cc.Node;s.setAnchorPoint2(),s.setContentSize(e.person.width,e.person.height),this.person=new cleverapps.Spine(e.person.json,e.person.scale),this.person.setAnimation(0,"idle",!0),s.addChild(this.person),this.person.setPositionRound(e.person.position),this.stageNodes=[];for(var n=0;n<WardrobeWindow.stages.length;n++){var i=new cc.Sprite(this.wardrobeBundle.frames["stage"+(n+1)+"_icon"]);i.setScale(e.icon.scale),i.setOpacity(100),this.stageNodes.push(i)}this.stagesList=new cleverapps.Layout(this.stageNodes,{direction:cleverapps.UI.HORIZONTAL,margin:e.icon.margin}),this.stagesLayout=new ccui.Layout,this.stagesLayout.addChild(this.stagesList),
this.stagesLayout.setClippingEnabled(!0),this.stagesLayout.setContentSize2(e.icons.width,e.icons.height),this.stagesLayout.setAnchorPoint2(),this.stagesList.setAnchorPoint2(0,.5),this.stagesList.setPositionRound(0,this.stagesLayout.height/2),this.updateSkin();var o=cleverapps.UI.generateTTFText("messages:WardrobeRulesText",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);o.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),o.setDimensions(t.width,0),o.fitTo(void 0,e.text.height);var a=new cleverapps.Layout([o,this.stagesLayout,s],{direction:cleverapps.UI.VERTICAL,margin:e.content.margin});return a.setPositionRound(t.width/2+e.content.position.x,t.height/2+e.content.position.y),t.addChild(a),t}});WardrobeRulesWindow.prototype.listBundles=function(){return["wardrobe_window"]},cleverapps.styles.WardrobeRulesWindow={width:520,height:780,icons:{width:500,height:110},icon:{scale:.55,margin:15},person:{json:bundles.hero.jsons.hero_json,scale:1,width:200,height:260,position:{x:{align:"center"},y:{
align:"center"}}},text:{height:260},content:{margin:30,position:{x:0,y:-40}},button:{width:250,height:100},states:[{time:1,mirror:!1},{time:1,mirror:!1},{animation:"idle_jump",time:2,mirror:!1},{time:1,mirror:!0},{animation:"idle_jump",time:2,mirror:!0},{time:1,mirror:!1},{animation:"idle_jump",time:2,mirror:!1},{time:1,mirror:!0},{animation:"idle_jump",time:2,mirror:!0},{time:1,mirror:!1},{animation:"idle_jump",time:2,mirror:!1},{time:1,mirror:!0},{animation:"idle_jump",time:5,mirror:!0}]};var Favorite=function(e){this.mission=e,this.productId=Favorite.CalcFavorite(),this.product=Product.Create(this.productId),this.product.favorite=!0};Favorite.prototype.getReward=function(){return RewardsConfig.Favorite[this.productId]},Favorite.prototype.isPackProduct=function(){return-1!==Favorite.PACK_PRODUCTS.indexOf(this.productId)},Favorite.CalcFavorite=function(){return cleverapps.paymentsHistory.calcFavoriteProduct(Favorite.ListProducts())},Favorite.ListProducts=function(){
return"match3"===cleverapps.config.type||-1!==["scramble","tripeaks"].indexOf(cleverapps.config.name)?Favorite.PACK_PRODUCTS.concat(Favorite.COIN_PRODUCTS):Favorite.COIN_PRODUCTS},Favorite.IsAvailable=function(){return void 0!==Favorite.CalcFavorite()},Favorite.PACK_PRODUCTS=["jamPack","tastyPack","honeyPack","epicPack","sweetPack"],Favorite.COIN_PRODUCTS=["gold1800","gold3800","gold6000","gold25000"];var BoostersSale=function(e){this.mission=e,this.reward=void 0,this.onRewardListener=function(){}};BoostersSale.prototype.listProducts=function(){var e=this.mission.productsExpensive;switch(cleverapps.paymentsHistory.classify()){case cleverapps.PaymentsHistory.VIP_NONE:case cleverapps.PaymentsHistory.VIP_WEAK:e=this.mission.productsCheap}return e},BoostersSale.prototype.onUpdate=function(){this.mission.result===BoostersSale.PURCHASES_LIMIT&&(this.reward=this.mission.prize,this.onRewardListener(),this.mission.complete())},BoostersSale.PURCHASES_LIMIT=5;var EnergyFeast=function(e,t){
this.mission=e,t&&Game.currentGame.pixelsPlanner.restart()},CoinsFeast=function(e,t){this.mission=e,t&&Game.currentGame.pixelsPlanner.restart()},KrakenFeast=function(e,t){this.mission=e,t&&Game.currentGame.monstersPlanner.restart("kraken")};KrakenFeast.prototype.stop=function(){Game.currentGame&&Game.currentGame.monstersPlanner.removeWrongMonsters()};var EnergyTime=function(e,t){this.mission=e,this.forEachChest(function(e){e.onShowEnergyIcon()})};EnergyTime.prototype.canRemoveSilently=function(){return!0},EnergyTime.prototype.stop=function(){this.forEachChest(function(e){e.alwaysEnergy()||e.onHideEnergyIcon()})},EnergyTime.prototype.forEachChest=function(s){Game.currentGame&&Game.currentGame.map.listAvailableUnits().forEach(function(e){var t=e.findComponent(Chest);t&&s(t)})};var WardRobeMissionLogic=function(e){this.mission=e,this.refreshSkin(this.mission)};WardRobeMissionLogic.prototype.refreshSkin=function(){var t=void 0;["valentines","xmas","memorial"].forEach(function(e){
-1!==cleverapps.eventManager.listCurrentFeatures().indexOf(e)&&(t=e)});var e=t?"wardrobe_"+t:"wardrobe",s=t?bundles[t].jsons.hero_json:bundles.hero.jsons.hero_json,n="skin_"+this.getCurrentStage(this.mission).stage;cleverapps.Spine.updateSkin(e,s,n),cleverapps.user.trigger("heroSkinUpdated",n)},WardRobeMissionLogic.prototype.onUpdate=function(){this.refreshSkin(this.mission)},WardRobeMissionLogic.prototype.skipNext=function(){return this.mission.isRunning()&&this.stageToShow},WardRobeMissionLogic.prototype.getCurrentStage=function(){for(var e=0,t=this.mission.result;t>=WardrobeWindow.stages[e];)t-=WardrobeWindow.stages[e],e++;return e===WardrobeWindow.stages.length?{stage:e,finished:!0}:{stage:e,progress:t}},WardRobeMissionLogic.prototype.getProgressForStage=function(e){var t=0;return WardrobeWindow.stages.slice(0,e).forEach(function(e){t+=e}),t},WardRobeMissionLogic.prototype.runReceiveDialogue=function(e){for(var t=[],s="WardrobeDialogue.stage"+(this.getCurrentStage().stage-1
)+".text",n=0;Messages.has(s+n);n++)t.push({text:Messages.get(s+n)});if(t.length){var i=new Dialogue(t,{showUp:!0}),o=function(){i.stage>=i.data.length-1&&i.close()};i.on("afterClose",e),i.on("buttonClicked",o),i.on("screenClicked",function(){i.typing||o()}),new DialogueView(i,{overlay:!0}),i.run()}else e()},WardRobeMissionLogic.prototype.givePrize=function(e,t){var s=WardrobeWindow.prizes[e];if(s){var n=cleverapps.styles.FONTS.WINDOW_TITLE_TEXT;cleverapps.styles.FONTS.SMALL_TITLE_TEXT&&cleverapps.eventManager.isActive("valentines")&&(n=cleverapps.styles.FONTS.SMALL_TITLE_TEXT),new RewardWindow({title:{text:"messages:WardrobePrizeRewardTitle",font:n},callback:t,reward:s.prize})}else t()},WardRobeMissionLogic.prototype.processEvent=function(e,t){if(e===Mission.EVENT_LEVEL_FINISH&&this.mission.isRunning()&&(t.level.isRegular()&&t.level.isNew()||t.level.episode.isDailyCup())){var s=this.getCurrentStage().stage;this.mission.update(1);var n=this.getCurrentStage().stage;n!==s&&(
this.stageToShow=n)}},WardRobeMissionLogic.IsAvailable=function(){return-1!==["wordsoup","crocword","scramble"].indexOf(cleverapps.config.name)};var LanternMissionLogic=function(e){this.mission=e,this.lantern=new Lantern(e)};if(LanternMissionLogic.prototype.giveBonus=function(e,t){this.lantern.isActive(t)&&0<this.lantern.getCurrentStreak()?cleverapps.metha.compound(e,[function(e){new LanternView(this.lantern).show(),Game.counter.setTimeout(e,1e3*cleverapps.styles.LanternView.show.delay)}.bind(this),function(e){this.lantern.giveBonus(e)}.bind(this)]):e()},LanternMissionLogic.IsAvailable=function(){return levels.user.checkAvailable(LanternMissionLogic.AVAILABLE)},LanternMissionLogic.AVAILABLE={adventure:{debugMode:!0}},"undefined"!=typeof exports)var Mission={};Mission.EVENT_LEVEL_FINISH=0,Mission.EVENT_COLLECT_BATTLE_PASS_STARS=1,Mission.TYPE_COMBO=0,Mission.TYPE_COLLECT_MARK=1,Mission.TYPE_BURN_NEARBY=2,Mission.TYPE_LETTER=3,Mission.TYPE_TREASURE_SEARCH=7,Mission.TYPE_LANTERN=9,
Mission.TYPE_WARDROBE=10,Mission.TYPE_FAVORITE_SALE=11,Mission.TYPE_LIVES_SALE=12,Mission.TYPE_BOOSTERS_SALE=13,Mission.TYPE_COINS_SALE=14,Mission.TYPE_BATTLEPASS=15,Mission.TYPE_STICKERS_COLLECTION=18,Mission.TYPE_BONUS_WORLD=19,Mission.TYPE_ENERGY_FEAST=20,Mission.TYPE_SLOT_MACHINE=21,Mission.TYPE_COINS_FEAST=22,Mission.TYPE_COINS_TIME=23,Mission.TYPE_ENERGY_TIME=24,Mission.TYPE_PURCHASE_BATTLEPASS=25,Mission.TYPE_KRAKEN_FEAST=26;var Missions={SEMAPHORE_REGULAR:1,SEMAPHORE_SECOND:2,SEMAPHORE_CUSTOM_LANTERN:4,SEMAPHORE_CUSTOM_WARDROBE:8,SEMAPHORE_CUSTOM_SALE:16,SEMAPHORE_CUSTOM_BONUS_WORLD:32,initialize:function(){var e={available:{episode:1,level:11,social:!0},view:MissionWindow,duration:"1 day",semaphore:Missions.SEMAPHORE_SECOND,cooldown:"1 minute",startWindow:MissionRulesWindow,prize:RewardsConfig.Tournament.places};Missions[Mission.TYPE_COMBO]=cleverapps.extend({},e,{available:{episode:2,level:7,social:!0},name:"MagicTournament",icon:bundles.main.frames.clover_png,
gameIcon:bundles.game.frames.clover_png,competition:{step:[5,20],amount:[20,30]},bundle:"magic_tournament",sideBarJson:bundles.sidebar.jsons.tournament_magic_icon_json,finishView:MissionWindow}),Missions[Mission.TYPE_COLLECT_MARK]=cleverapps.extend({},e,{available:{episode:1,level:12,social:!0},name:"RoseTournament",icon:bundles.main.frames.rose_png,gameIcon:bundles.game.frames.rose_png,competition:{step:[10,40],amount:[20,30]},bundle:"rose_tournament",sideBarJson:bundles.sidebar.jsons.tournament_rose_icon_json,finishView:MissionWindow,lockedTip:function(e){return Messages.get("UnlockOnLevel",{level:cleverapps.humanReadableNumber(e.episode,e.level)})}}),Missions[Mission.TYPE_BURN_NEARBY]=cleverapps.extend({},e,{available:{episode:2,level:3,social:!0},name:"TulpanTournament",icon:bundles.main.frames.tulpan_png,gameIcon:bundles.game.frames.tulpan_png,competition:{step:[3,10],amount:[20,30]},bundle:"tulpan_tournament",sideBarJson:bundles.sidebar.jsons.tournament_tulpan_icon_json,
finishView:MissionWindow}),Missions[Mission.TYPE_LETTER]=cleverapps.extend({},e,{name:"LetterTournament",icon:bundles.main.frames.mission_letter_png,gameIcon:bundles.game.frames.mission_letter_png,competition:{step:[2,6],amount:[20,30]},cooldown:"2 days",sideBarJson:bundles.sidebar.jsons.mission_letter_icon_json,finishView:MissionWindow,bundle:"letter_tournament",STAR_TYPES_AMOUNT:2}),Missions[Mission.TYPE_TREASURE_SEARCH]=cleverapps.extend({},e,{available:{episode:2,level:7,social:!1},name:"TreasureSearch",view:TreasureSearchWindow,icon:bundles.game.frames.shovel,minigame:{price:1},prize:RewardsConfig.TreasureSearch,startWindow:TreasureSearchWindow,nudgeWindow:TreasureSearchWindow,duration:"3 days",semaphore:Missions.SEMAPHORE_REGULAR,cooldown:"3 days",bundle:"treasuresearch",sideBarJson:bundles.sidebar.jsons.treasure_search_icon_json,logic:TreasureSearchMissionLogic}),Missions[Mission.TYPE_STICKERS_COLLECTION]=cleverapps.extend({},e,{available:{episode:2,level:7,social:!0},
name:"StickersCollection",view:StickersCollectionWindow,minigame:{price:1},prize:RewardsConfig.StickersCollection,startWindow:StickersCollectionWindow,nudgeWindow:StickersCollectionWindow,duration:"3 days",semaphore:Missions.SEMAPHORE_REGULAR,cooldown:"3 days",bundle:"stickers_collection",sideBarJson:bundles.sidebar.jsons.stickers_collection_icon_json,logic:StickersCollectionLogic,startCurrency:0,tournament:!0}),Missions[Mission.TYPE_LANTERN]=cleverapps.extend({},e,{available:{episode:4,level:3,social:!1},name:"Lantern",view:LanternWindow,duration:"2 day",semaphore:Missions.SEMAPHORE_CUSTOM_LANTERN,cooldown:"5 days",startWindow:LanternWindow,sideBarJson:bundles.sidebar.jsons.lantern_icon_json,iconForce:Forces.LANTERN,logic:LanternMissionLogic,prize:void 0}),Missions[Mission.TYPE_WARDROBE]=cleverapps.extend({},e,{available:{episode:1,level:11,social:!1},name:"Wardrobe",view:WardrobeWindow,semaphore:Missions.SEMAPHORE_CUSTOM_WARDROBE,startWindow:WardrobeRulesWindow,
logic:WardRobeMissionLogic,sideBarJson:bundles.sidebar.jsons.wardrobe_icon_json,feature:"wardrobe"}),Missions[Mission.TYPE_FAVORITE_SALE]=cleverapps.extend({},e,{priority:5,name:"FavoriteSale",view:FavoriteSaleWindow,semaphore:Missions.SEMAPHORE_CUSTOM_SALE,startWindow:FavoriteSaleWindow,logic:Favorite,sideBarJson:bundles.sidebar.jsons.lives_sale_icon_json,prize:RewardsConfig.Sale,feature:"favorite"}),Missions[Mission.TYPE_LIVES_SALE]=cleverapps.extend({},e,{name:"LivesSale",view:BoostersSaleWindow,semaphore:Missions.SEMAPHORE_CUSTOM_SALE,startWindow:BoostersSaleWindow,logic:BoostersSale,sideBarJson:bundles.sidebar.jsons.lives_sale_icon_json,prize:RewardsConfig.Sale,feature:"lives",productsCheap:["unlimitedLives05","lives074","exp1"],productsExpensive:["unlimitedLives2","lives3","exp4"],available:{episode:1,level:1}}),-1!==["tripeaks","scramble"].indexOf(cleverapps.config.name)&&(Missions[Mission.TYPE_FAVORITE_SALE].sideBarJson=bundles.sidebar.jsons.favorite_sale_icon_json),
"match3"!==cleverapps.config.type&&(Missions[Mission.TYPE_LIVES_SALE].productsCheap=cleverapps.substract(Missions[Mission.TYPE_LIVES_SALE].productsCheap,["exp1"]),Missions[Mission.TYPE_LIVES_SALE].productsExpensive=cleverapps.substract(Missions[Mission.TYPE_LIVES_SALE].productsExpensive,["exp4"])),Missions[Mission.TYPE_BOOSTERS_SALE]=cleverapps.extend({},e,{name:"BoostersSale",view:BoostersSaleWindow,semaphore:Missions.SEMAPHORE_CUSTOM_SALE,startWindow:BoostersSaleWindow,sideBarJson:bundles.sidebar.jsons.boosters_sale_icon_json,logic:BoostersSale,prize:RewardsConfig.Sale,feature:"boosters",productsCheap:["cellPack05","linePack074","colorPack10"],productsExpensive:["cellPack2","linePack3","colorPack4"],available:{episode:1,level:1}}),"stacks"===cleverapps.config.subtype&&(Missions[Mission.TYPE_BOOSTERS_SALE].productsCheap=["hintBoosterBeforePack3","eyePack2","highlightPack1"],Missions[Mission.TYPE_BOOSTERS_SALE].productsExpensive=["hintBoosterBeforePack3","eyePack2","highlightPack1"]),
Missions[Mission.TYPE_COINS_SALE]=cleverapps.extend({},e,{name:"CoinsSale",view:BoostersSaleWindow,semaphore:Missions.SEMAPHORE_CUSTOM_SALE,startWindow:BoostersSaleWindow,sideBarJson:bundles.sidebar.jsons.coins_sale_icon_json,logic:BoostersSale,prize:RewardsConfig.Sale,feature:"coins",productsCheap:["gold500sale","gold1800sale"],productsExpensive:["gold500sale","gold1800sale"],available:{episode:1,level:1}}),Missions[Mission.TYPE_BONUS_WORLD]=cleverapps.extend({},e,{name:"BonusWorld",startWindow:void 0,view:BonusWorldScene,semaphore:Missions.SEMAPHORE_CUSTOM_BONUS_WORLD,available:{episode:1,level:14},logic:BonusWorldMissionLogic,sideBarJson:function(e){return BonusWorldConfig[e.bonusWorld.type].sideBarJson},feature:"bonusworld",oncePerEvent:!cleverapps.config.debugMode,iconForce:Forces.BONUS_WORLD}),"undefined"!=typeof EnergyFeastMissionWindow&&(Missions[Mission.TYPE_ENERGY_FEAST]=cleverapps.extend({},e,{available:{level:5,yodo1:!1},priority:5,name:"EnergyFeast",duration:"3 day",
cooldown:"1 month",semaphore:Missions.SEMAPHORE_REGULAR,competition:{step:[3,3,3,5,5,5,10,10,15,20,25],forceCoef:.45,amount:[20,30],noPlayerEpisodeCoef:!0,botAheadPlayerCoef:.5,botAheadPlayerBigDifferenceCoef:.2,bigDistanceLength:100},logic:EnergyFeast,prize:RewardsConfig.EnergyFeast.places,bundle:"energy_feast",icon:bundles.reward_icons.frames.reward_energy_png,sideBarJson:bundles.sidebar.jsons.energy_feast_icon_json,view:EnergyFeastMissionWindow,startWindow:EnergyFeastMissionWindow,finishView:EnergyFeastMissionWindow})),"undefined"!=typeof SlaveMissionWindow&&(Missions[Mission.TYPE_ENERGY_TIME]=cleverapps.extend({},e,{available:{level:7,yodo1:!1},priority:5,logic:EnergyTime,name:"EnergyTime",duration:"3 day",cooldown:"1 month",semaphore:Missions.SEMAPHORE_SECOND,bundle:"energy_time",sideBarJson:bundles.sidebar.jsons.energy_time_icon_json,view:SlaveMissionWindow,startWindow:SlaveMissionWindow,finishView:SlaveMissionWindow})),"undefined"!=typeof CoinsFeastMissionWindow&&(
Missions[Mission.TYPE_COINS_FEAST]=cleverapps.extend({},e,{available:{level:5,yodo1:!1},priority:3,name:"CoinsFeast",duration:"3 day",cooldown:"1 month",semaphore:Missions.SEMAPHORE_REGULAR,competition:{step:[5,50],forceCoef:.1,amount:[20,30],noPlayerEpisodeCoef:!0,botAheadPlayerCoef:.5,botAheadPlayerBigDifferenceCoef:.2,bigDistanceLength:500},logic:CoinsFeast,prize:RewardsConfig.CoinsFeast.places,bundle:"energy_feast",icon:bundles.reward_icons.frames.reward_coin_png,sideBarJson:bundles.sidebar.jsons.coins_feast_icon_json,view:CoinsFeastMissionWindow,startWindow:CoinsFeastMissionWindow,finishView:CoinsFeastMissionWindow})),"undefined"!=typeof KrakenFeastMissionWindow&&(Missions[Mission.TYPE_KRAKEN_FEAST]=cleverapps.extend({},e,{available:{level:7,yodo1:!1},priority:6,name:"KrakenFeast",duration:"3 day",cooldown:"1 month",semaphore:Missions.SEMAPHORE_REGULAR,competition:{step:[5,5,5,5,5,10,10,10,10,15,15,20,20,25,30],forceCoef:.2,amount:[20,30],noPlayerEpisodeCoef:!0,
botAheadPlayerCoef:.5,botAheadPlayerBigDifferenceCoef:.2,bigDistanceLength:90},logic:KrakenFeast,prize:RewardsConfig.KrakenFeast.places,bundle:"energy_feast",icon:bundles.reward_icons.frames.tentacle_png,sideBarJson:bundles.sidebar.jsons.kraken_feast_icon_json,view:KrakenFeastMissionWindow,startWindow:KrakenFeastMissionWindow,finishView:KrakenFeastMissionWindow,missionOffer:{bundleName:"kraken_offer",sidebarJson:bundles.sidebar.jsons.kraken_offer,offer:RewardsConfig.KrakenFeast.offer,price:150}})),"undefined"!=typeof SlaveMissionWindow&&(Missions[Mission.TYPE_COINS_TIME]=cleverapps.extend({},e,{available:{level:7,yodo1:!1},priority:3,name:"CoinsTime",duration:"3 day",cooldown:"1 month",semaphore:Missions.SEMAPHORE_SECOND,bundle:"coins_time",sideBarJson:bundles.sidebar.jsons.coins_time_icon_json,view:SlaveMissionWindow,startWindow:SlaveMissionWindow,finishView:SlaveMissionWindow})),Missions[Mission.TYPE_BATTLEPASS]=cleverapps.extend({},e,{priority:4,name:"BattlePass",
view:BattlePassWindow,semaphore:Missions.SEMAPHORE_REGULAR,icon:bundles.game.frames.battle_pass_icon_png,startWindow:BattlePassWindow,finishView:BattlePassWindow,rulesWindow:BattlePassRulesWindow,logic:BattlePassMissionLogic,sideBarJson:bundles.sidebar.jsons.battlepass_icon_json,sideBarProgressIconJson:bundles.sidebar.jsons.battle_pass_star_json,levels:BattlePass.LEVELS,eventType:Mission.EVENT_COLLECT_BATTLE_PASS_STARS,lastChanceView:BattlePassLastChanceWindow,collectItemName:"star",cooldown:"1 month",duration:"7 days",available:{episode:7,level:0}}),"merge"===cleverapps.config.type&&(Missions[Mission.TYPE_BATTLEPASS].available={level:5,yodo1:!1},Missions[Mission.TYPE_PURCHASE_BATTLEPASS]=cleverapps.extend({},e,{priority:2,name:"BattlePassShop",view:BattlePassWindow,semaphore:Missions.SEMAPHORE_REGULAR,startWindow:BattlePassWindow,finishView:BattlePassWindow,rulesWindow:PurchaseBattlePassRulesWindow,logic:BattlePassMissionLogic,
sideBarJson:bundles.sidebar.jsons.purchase_battlepass_icon_json,levels:BattlePass.PURCHASE_LEVELS,eventType:Mission.EVENT_COLLECT_BATTLE_PASS_STARS,lastChanceView:BattlePassLastChanceWindow,collectItemName:"crystal",cooldown:"1 month",duration:"7 days",available:{level:5,yodo1:!1}})),Missions[Mission.TYPE_SLOT_MACHINE]=cleverapps.extend({},e,{name:"SlotMachine",startWindow:void 0,view:SlotMachineScene,semaphore:Missions.SEMAPHORE_REGULAR,available:{episode:1,level:14},logic:SlotMachineMissionLogic,sideBarJson:bundles.sidebar.jsons.slot_machine_json,cooldown:"3 days",duration:"3 days",iconForce:Forces.SLOT_MACHINE_ICON}),"olympics"===cleverapps.config.name&&cleverapps.override(Missions[Mission.TYPE_LIVES_SALE],{productsCheap:["unlimitedLives05","lives074","gold1"],productsExpensive:["unlimitedLives2","lives3","gold4"],sideBarJson:bundles.sidebar.jsons.lives_sale_json}),"match3"===cleverapps.config.type&&(Missions[Mission.TYPE_BONUS_WORLD].available={episode:5,level:10})}}
;"undefined"!=typeof exports&&(module.exports={Missions:Missions,Mission:Mission});var CurrentEpisodeLabel=cc.Node.extend({ctor:function(e,t){this._super(),this.episode=e,this.createContent(),this.setAnchorPoint2(),this.setPositionRound({x:{align:"center"},y:{align:"center"}}),this.setLocalZOrder(1)},createContent:function(){this.bg=this.createBg();var e=this.label=new cc.Node;e.setAnchorPoint2(),e.setContentSize2(this.bg.getContentSize()),e.addChild(this.bg),e.setPositionRound(cleverapps.styles.CurrentEpisodeLabel.label.alignment),this.addLabelText(),this.setContentSize2(e.getContentSize()),this.addChild(this.label)},createBg:function(){var e,t=cleverapps.styles.CurrentEpisodeLabel.background;if(t.json){(e=new cc.Node).setAnchorPoint2(),e.setContentSize2(t);var s=this.bgAnimation=new cleverapps.Spine(t.json);s.setAnimation(0,"idle",!1),s.setPosition(e.width/2,e.height/2),e.addChild(s)}else e=cleverapps.UI.createScale9Sprite(t.image,cleverapps.UI.Scale9Rect.TwoPixelXY),
t.width&&e.setContentSize2(t);return e.setPosition(e.width/2,e.height/2),e},addLabelText:function(){var e=cleverapps.styles.CurrentEpisodeLabel.label.islandText,t=this.labelText=cleverapps.UI.generateTTFText("messages:StartEpisodeWindow.Title"+this.episode.episodeNo,e.font);t.fitTo(this.bg.width+e.padding),t.setPositionRound(e.alignment),this.label.addChild(t)},addLevelsLabel:function(){var e=cleverapps.styles.CurrentEpisodeLabel.label.levelsText;if(e){var t=this.episode.levels.filter(function(e){return e.type===Episode.LEVEL_TYPE_PASSED}).length,s=this.episode.levels.length,n=cleverapps.UI.generateTTFText(t+"/"+s,e.font);n.setPositionRound(e.alignment),this.label.addChild(n)}}});cleverapps.MiniGame=function(e){cleverapps.config.debugMode&&(cleverapps.MiniGame.TIMEOUT="60 seconds"),cleverapps.DailyChest.call(this,{isNewUser:e,serverTaskName:"bonuses",interval:cleverapps.parseInterval(cleverapps.MiniGame.TIMEOUT)}),this.closedText="messages:MiniGame.ClosedText"},
cleverapps.MiniGame.prototype=Object.create(cleverapps.DailyChest.prototype),cleverapps.MiniGame.prototype.constructor=cleverapps.MiniGame,cleverapps.MiniGame.prototype.initializeForNewUser=function(){this.locked=!1,this.setWhenUnlock(Date.now())},cleverapps.MiniGame.TIMEOUT="1 day",cleverapps.MiniGame.prototype.resetUnlockCountdown=function(){cleverapps.DailyChest.prototype.resetUnlockCountdown.call(this),cleverapps.localPushes.sendPush(cleverapps.LocalPushes.TYPES.MINI_GAME,this.when-Date.now())},cleverapps.MiniGame.prototype.refreshItems=function(){},cleverapps.MiniGame.prototype.isAvailable=function(){return!!levels.user.checkAvailable(cleverapps.MiniGame.AVAILABLE)&&!this.locked},cleverapps.MiniGame.prototype.getReward=function(){var e=cleverapps.Random.choose(RewardsConfig.MiniGame);return levels.user.isBeginner()&&RewardsConfig.MiniGameBeginner&&(e=cleverapps.Random.choose(RewardsConfig.MiniGameBeginner)),levels.user.isNovice()&&RewardsConfig.MiniGameNovice&&(
e=cleverapps.Random.choose(RewardsConfig.MiniGameNovice)),e.betGold&&delete e.betGold,e=cleverapps.user.prepareRewardByRich(e)},cleverapps.MiniGame.prototype.openWindow=function(e){if(cleverapps.periodicBonus.locked)cleverapps.Notification.create(cleverapps.periodicBonus.closedText),e&&e();else{var t=cleverapps.clone(cleverapps.periodicBonus.getReward(),!0);new MiniGameWindow(t),e&&(cleverapps.metha.onceNoWindowsListener=e)}},cleverapps.MiniGame.AVAILABLE={episode:1,level:1,registered:"1 hour"};var MiniGameWindow=Window.extend({onWindowLoaded:function(e){this.reward=e,cleverapps.adsLimits.update();var i=cleverapps.styles.MiniGameWindow,o=this.content=new cc.Node;o.setAnchorPoint(.5,.5),o.setContentSize2(i.width,i.height),this.createText(),this.boxes=[],i.boxes.reverse().forEach(function(e,t){var s=new cc.Node;s.setAnchorPoint(.5,.5),s.setContentSize2(i.box),s.setPositionRound(o.width/2+e.x,o.height/2+e.y),s.setScale(i.box.scale),s.baseScale=i.box.scale
;var n=s.animation=new cleverapps.Spine(i.animation.json);s.addChild(n),e.skin&&n.setSkin(e.skin),n.setPositionRound(s.width/2-i.box.offsetX,s.height/2-i.box.offsetY),n.setAnimation(0,e.name||"animation",!0),o.addChild(s),this.onMouseOver&&(s.onMouseOver=this.onMouseOver.bind(this,s)),this.onMouseOut&&(s.onMouseOut=this.onMouseOut.bind(this,s)),cleverapps.UI.applyHover(s),cleverapps.UI.onClick(s,this.onPressed.bind(this,s),{noThrottle:i.noThrottle}),this.boxes.push(s)},this);var t=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.MiniGameWindow.window,!0);this._super({title:this.getTitle(),name:"minigamewindow",content:o,closeButton:!1,notCloseByTouchInShadow:!0,styles:t,shareCheckBox:this.getShareOptions(),buttons:this.getButtons()}),cleverapps.audio.playSound(bundles.main.urls.window_effect)},getTitle:function(){return"messages:MiniGameWindow.Title"},createText:function(){var e=cleverapps.styles.MiniGameWindow,t=cleverapps.UI.generateTTFText(
"messages:MiniGameWindow.Text",cleverapps.styles.FONTS.WINDOW_TEXT);t.setPositionRound(this.content.width/2+e.text.x,this.content.height/2+e.text.y),this.content.addChild(t),this.text=t},getShareOptions:function(){},onShow:function(){this.showUpAnimation(),this.isOpened||this.setCustomCursor()},onHide:function(){this.boxes&&this.boxes.forEach(function(e){e.stopAllActions()}),this.text&&this.text.stopAllActions(),this.hint&&(this.hint.removeFromParent(),delete this.hint),this.setDefaultCursor()},close:function(){this.hint&&this.hint.close(),this._super()},onClose:function(){this.setDefaultCursor()},showUpAnimation:function(){var e=this.boxes,s=e.map(function(e){return e.getPosition()}),n=[[2,0,1],[0,2,1],[1,0,2]];this.text.scale=0,e.forEach(function(e,t){e.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.MoveTo(.3,s[n[0][t]]),new cc.DelayTime(.1),new cc.CallFunc(function(){0===t&&cleverapps.audio.playSound(bundles.main.urls.daily_game_mix_effect)}),new cc.MoveTo(.3,s[n[1][t]]),
new cc.DelayTime(.1),new cc.CallFunc(function(){0===t&&cleverapps.audio.playSound(bundles.main.urls.daily_game_mix_effect)}),new cc.MoveTo(.3,s[n[2][t]]),new cc.DelayTime(.1),new cc.CallFunc(function(){0===t&&cleverapps.audio.playSound(bundles.main.urls.daily_game_mix_effect)}),new cc.MoveTo(.3,s[t]),new cc.DelayTime(.3),new cc.CallFunc(function(){0===t&&this.text.runAction(new cc.ScaleTo(1,1).easing(cc.easeBackOut()))}.bind(this))))},this)},setDefaultCursor:function(){!cc.sys.isNative&&cleverapps.styles.MiniGameWindow.customCursor&&(cc._canvas.style.cursor="default",this.onMouseMoveListener&&(cc.eventManager.removeListener(this.onMouseMoveListener),delete this.onMouseMoveListener,this.cursor&&(this.cursor.removeFromParent(!0),delete this.cursor)))},setCustomCursor:function(){!cc.sys.isNative&&cleverapps.styles.MiniGameWindow.customCursor&&"mouse"in cc.sys.capabilities&&(this.onMouseMoveListener=cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:function(e){
return this.cursor||(cc._canvas.style.cursor="none",this.cursor=new cc.Sprite(bundles.daily_minigame_window.frames.daily_game_cursor_png),this.cursor.setAnchorPoint2(0,1),this.cursor.setLocalZOrder(10),this.window.addChild(this.cursor)),this.cursor.setPositionRound(this.window.convertToNodeSpace(e.getLocation())),!0}.bind(this)},this.window))},onPressed:function(e){new MiniGameRewardWindow(this.reward),this.close()},getButtons:function(){var e=cleverapps.styles.MiniGameWindow;if(!e.button)return[];var t=this.okButton=new cleverapps.UI.Button({text:Messages.get("OK"),font:cleverapps.styles.FONTS.BUTTON_TEXT,width:e.button.width,height:e.button.height,onClicked:function(){this.close(),this.receiveReward()}.bind(this)});return t.setVisible(!1),cleverapps.adsLimits.state(AdsLimits.TYPES.DOUBLE_MINI_GAME)===AdsLimits.STATE_READY&&(this.doubleButton=new DoubleRewardButton(this.doubleReward.bind(this)),this.doubleButton.setVisible(!1)),[t,this.doubleButton]},receiveReward:function(){
cleverapps.periodicBonus.locked||(cleverapps.periodicBonus.open(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_BONUS),this.reward.unlimitedLives&&(this.reward.unlimitedLives=Product.FormatUnlimitedLives(this.reward.unlimitedLives)),cleverapps.Chest.prototype._receiveReward(this.reward))},doubleReward:function(){this.reward=cleverapps.doubleReward(this.reward),cleverapps.adsLimits.watch(AdsLimits.TYPES.DOUBLE_MINI_GAME),cleverapps.playSession.inc(cleverapps.EVENTS.REWARDED_DAILY_BONUS),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_BONUS_DOUBLE);var e=this.rewardsList.getPosition(),t=this.rewardsList.getParent(),s=this.rewardsList.getScale();this.rewardsList.removeFromParent(!0),this.rewardsList=new MinigameRewardsComponent(this.reward),t.addChild(this.rewardsList),this.rewardsList.setScale(s),this.rewardsList.setPositionRound(e)}});MiniGameWindow.prototype.listBundles=function(){return["reward_icons","daily_minigame_window"]},cleverapps.styles.MiniGameWindow={
width:500,height:300,text:{x:0,y:-200},box:{width:150,height:150,scale:1,offsetX:0,offsetY:0},boxes:[{x:-180,y:-50,skin:"green",name:"animation"},{x:0,y:50,skin:"blue",name:"animation"},{x:180,y:-50,skin:"pink",name:"animation"}],animation:{json:bundles.windows.jsons.present_json},window:{decors:{}},noThrottle:!1};var MiniGameRewardWindow=RewardWindow.extend({ctor:function(e){this._super({reward:e})},onWindowLoaded:function(e){this._super({title:"messages:MiniGameRewardWindow.title",name:"minigamerewardwindow",buttonText:"OK",reward:e.reward,text:"messages:MiniGameRewardWindow.text",rewardName:"miniGame"})},onReceiveReward:function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_BONUS)},receiveReward:function(){cleverapps.periodicBonus.locked||(cleverapps.periodicBonus.open(),this.onReceiveReward(),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.RECEIVE_PERIODIC_BONUS),cleverapps.Chest.prototype._receiveReward(this.reward))},onDoubleReward:function(){
cleverapps.adsLimits.watch(AdsLimits.TYPES.DOUBLE_MINI_GAME),cleverapps.playSession.inc(cleverapps.EVENTS.REWARDED_DAILY_BONUS),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.DAILY_BONUS_DOUBLE)},getButtons:function(){return cleverapps.adsLimits.state(AdsLimits.TYPES.DOUBLE_MINI_GAME)===AdsLimits.STATE_READY&&(this.doubleButton=this.getDoubleButton()),this.doubleButton?[this.doubleButton]:[]}});cleverapps.styles.MiniGameRewardWindow={padding:{x:200,y:0}},cleverapps.UI.Tooltip=cc.Node.extend({ctor:function(e,t){this._super();var s=cleverapps.styles.UI.Tooltip,n=t.size||s.SIZE.medium;if(t.rewards?this.setContentSize2(n.width+s.rewards.extraWidth,n.height+s.rewards.extraHeight):this.setContentSize2(n),this.setAnchorPoint2(),this.bg=new cc.Scale9Sprite(bundles.tooltip.frames.tooltip_bg_png),this.addChild(this.bg),this.bg.setPositionRound(this.width/2,this.height/2),this.bg.setContentSize2(this.getContentSize()),void 0===t.arrow&&(
t.arrow=t.position===s.LOCATION.below?s.ARROW.top:s.ARROW.bottom),this.drawArrow(t.arrow),t.content){this.content=t.content,this.bg.addChild(this.content);var i=Math.min(this.width/(this.content.width*this.content.scaleX+s.content.padding),this.height/(this.content.height*this.content.scaleY+s.content.padding));i<1&&this.content.setScale(this.content.scaleX*i,this.content.scaleY*i),this.content.setPositionRound(this.width/2,this.height/2+s.content.offset.y)}else{var o=cleverapps.UI.generateOnlyText(t.text,cleverapps.styles.FONTS.TOOLTIP_TEXT);o.fitTo(this.width-s.content.padding);var a=o;if(t.rewards){var r=new TooltipRewardsView(t.rewards);a=new cleverapps.Layout([r,o],{direction:cleverapps.UI.VERTICAL,margin:s.rewards.margin})}a.setPositionRound(this.width/2,this.height/2+s.content.offset.y),this.bg.addChild(a)}t.control?cleverapps.metha.registerControl(t.control,function(e){e?this.show():this.hide()}.bind(this)):this.show(),this.target=e},hide:function(){this.stopAllActions()
;var e=.2*this.scale;this.runAction(new cc.Sequence(new cc.ScaleTo(e,0),new cc.CallFunc(function(){this.content&&this.content.removeFromParent()}.bind(this)),new cc.RemoveSelf))},show:function(){this.stopAllActions(),this.setScale(.2),this.runAction(new cc.Sequence(new cc.CallFunc(function(){this.x-this.width/2<0&&(this.bg.x+=this.width/2-this.x+cleverapps.styles.UI.Tooltip.bgPadding),this.x+this.width/2>cc.director.getRunningScene().width&&(this.bg.x-=this.width/2-cc.director.getRunningScene().width+this.x+cleverapps.styles.UI.Tooltip.bgPadding)}.bind(this)),new cc.ScaleTo(.1,1))),this.runAction(new cc.Sequence(new cc.DelayTime(4),new cc.CallFunc(function(){this.hide()}.bind(this))))},drawArrow:function(e){var t=e===cleverapps.styles.UI.Tooltip.ARROW.bottom?new cc.Scale9Sprite(bundles.tooltip.frames.tooltip_shadow_arrow_png):new cc.Scale9Sprite(bundles.tooltip.frames.tooltip_arrow_png);this.addChild(t),t.setRotation(e.rotation),t.setPositionRound(e)}}),cleverapps.styles.UI.Tooltip={
content:{padding:20,offset:{y:-4}},bgPadding:10,rewards:{extraWidth:0,extraHeight:110,margin:10},SIZE:{short:{width:360,height:100},medium:{width:480,height:100},long:{width:600,height:100}},LOCATION:{above:{x:{align:"center",dx:0},y:{align:"top",dy:60},rewards:{x:{align:"center",dx:0},y:{align:"top",dy:120}}},below:{x:{align:"center",dx:0},y:{align:"bottom",dy:-72},rewards:{x:{align:"center",dx:0},y:{align:"bottom",dy:-142}}}},ARROW:{top:{x:{align:"center",dx:0},y:{align:"top",dy:18},rotation:180},bottom:{x:{align:"center",dx:0},y:{align:"bottom",dy:-16},rotation:0},left:{x:{align:"left",dx:-22},y:{align:"center",dy:0},rotation:90},right:{x:{align:"right",dx:22},y:{align:"center",dy:0},rotation:-90}}};var TooltipManager=function(){this.active=void 0;var e=cc._EventListenerTouchOneByOne.create();if(e.onTouchBegan=function(){this.onClick()}.bind(this),cc.eventManager.addListener(e,-1),"mouse"in cc.sys.capabilities){var t=cc._EventListenerMouse.create();t.onMouseScroll=function(){
this.onClick()}.bind(this),cc.eventManager.addListener(t,-1)}};TooltipManager.prototype.create=function(s,n){s.tooltipListener&&this.remove(s),s.tooltipListener=cleverapps.UI.onClick(s,function(e){if(s.isDisplayed()){if(cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),n.clickableArea){var t=n.clickableArea.convertToNodeSpace(s.convertToWorldSpace(e));cc.rectContainsPoint(cc.rect(0,0,n.clickableArea.width,n.clickableArea.height),t)&&cleverapps.tooltipManager.onClick(s,n)}else cleverapps.tooltipManager.onClick(s,n);n.hideHandler&&n.hideHandler.postponeHiding(4e3)}},{noThrottle:!0,swallowTouches:n.swallowTouches,ignoreOnTouchMoved:n.ignoreOnTouchMoved,ignoreOnTouchMovedThreshold:n.ignoreOnTouchMovedThreshold,useInteractiveScale:n.useInteractiveScale})},TooltipManager.prototype.remove=function(e){e.tooltipListener&&(cc.eventManager.removeListener(e.tooltipListener),delete e.tooltipListener)},TooltipManager.prototype.onClick=cleverapps.accumulate(0,function(e,t){if(
e||this.active){var s=this.active&&this.active.target,n=e&&s!==e;this.hide(),n&&this.show(e,t||{})}}),TooltipManager.prototype.show=function(e,t){var s=new cleverapps.UI.Tooltip(e,t);e.addChild(s),s.setPositionRound(t.rewards?t.position.rewards:t.position),s.replaceParentSamePlace(cc.director.getRunningScene()),s.registerCleanupCallback(function(){this.active===s&&delete this.active}.bind(this)),this.active=s},TooltipManager.prototype.hide=function(){this.active&&this.active.hide()};var TooltipRewardsView=cleverapps.Layout.extend({ctor:function(e){var o=cleverapps.styles.TooltipRewardsView,t=[];for(key in e.boosters)t.push({text:e.boosters[key],icon:o.boosters.icons[key]});e.unlimitedLives&&t.push({text:Product.FormatUnlimitedLives(e.unlimitedLives,!0).title,icon:bundles.reward_icons.frames.life_unlim_small,scale:o.unlimitedLives.scale,toReplace:{amount:e.unlimitedLives.amount}}),e.gold&&t.push({text:e.gold,icon:bundles.reward_icons.frames.gold_small_png,iconDy:o.goldIconDy}),
e.exp&&t.push({text:e.exp,icon:bundles.reward_icons.frames.reward_exp_png}),e.stars&&t.push({text:e.stars,icon:bundles.reward_icons.frames.stars_png});var s=t.map(function(e){var t=cleverapps.UI.generateTTFText(e.text,cleverapps.styles.FONTS.TOOLTIP_FONT,e.toReplace);o.textHeight&&t.fitTo(void 0,o.textHeight);var s=new cc.Sprite(e.icon);if(e.iconDy){var n=new cc.Node;n.setAnchorPoint2(),n.setContentSize2(s.getContentSize()),n.addChild(s),s.setPositionRound(n.width/2,n.height/2+e.iconDy),s=n}s.setScale(o.iconHeight/s.height*(e.scale?e.scale:1));var i=new cleverapps.Layout([t,s],{direction:cleverapps.UI.VERTICAL,margin:o.textMargin});return i.setAnchorPoint2(.5,1),i});this._super(s,{direction:cleverapps.UI.HORIZONTAL,margin:o.margin,align:o.align})}});cleverapps.styles.TooltipRewardsView={iconHeight:60,margin:30,textMargin:0,unlimitedLives:{scale:.95}};var Exclamation=function(){this.onShowListener=function(e){},this.onHideListener=function(){}};Exclamation.prototype.show=function(e,t){
this.enabled&&this.onShowListener(e,t)},Exclamation.prototype.setGame=function(e){this.game=e,this.game.onChangeOutcomeListeners.exclamation=this.disable.bind(this),this.enabled=!0},Exclamation.prototype.disable=function(){this.enabled&&(this.enabled=!1,delete this.game,this.onHideListener())},Exclamation.prototype.createView=function(){return-1!==["heroes","runes","mergeheroes"].indexOf(cleverapps.config.name)?new EXCLAMATIONS.heroes:-1!==["board","solitaire","differences"].indexOf(cleverapps.config.type)?new EXCLAMATIONS.words:-1!==["adventure"].indexOf(cleverapps.config.name)?new EXCLAMATIONS.actor:new EXCLAMATIONS.base},Exclamation.prototype.getCongratulations=function(){return-1!==["heroes","runes","mergeheroes"].indexOf(cleverapps.config.name)?["wow","super","yay","yeah","ohyeah","oh"]:Messages.get("congratulations")};var EXCLAMATIONS={base:cc.Node.extend({ctor:function(){this._super();var e=this.getStyles();this.setAnchorPoint2(),this.setContentSize2(e),e.scale&&this.setScale(
e.scale[cleverapps.wideMode.mode]),cleverapps.exclamation.onShowListener=this.createListener(cleverapps.throttle(1e3,this.showMessage.bind(this))),cleverapps.exclamation.onHideListener=this.createListener(this.hideMessage.bind(this))},showMessage:function(e,t){var s=bundles.game.urls.keep_going_effect,n="keep_going_letsgo",i=cleverapps.styles.FONTS.MESSAGE_TEXT_NORMAL;switch(t){case FieldView.MESSAGE_WARNING:n="5_moves_left",s=bundles.game.urls.five_moves_effect,i=cleverapps.styles.FONTS.MESSAGE_TEXT_WARNING;break;case FieldView.MESSAGE_CONGRATS:n="you_win",s=bundles.main.urls.beat_friend_effect,i=cleverapps.styles.FONTS.MESSAGE_TEXT_CONGRATS}this.runActions(e,i,s,n)},hideMessage:function(){this.setVisible(!1)},runActions:function(e,t,s,n){this.createAnimation(n),this.createMsg(e,t),this.playSound(s)},playSound:function(e){if(e){var t=this.getStyles().sound?this.getStyles().sound.delay:0;this.runAction(new cc.Sequence(new cc.DelayTime(t),new cc.CallFunc(function(){
cleverapps.audio.playSound(e)})))}},createMsg:function(e,t){var s=this.createText(e,t);s.opacity=0,s.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.FadeIn(.2),new cc.Spawn(new cc.MoveBy(.1,0,-2),new cc.ScaleTo(.1,1,.9)),new cc.ScaleTo(.25,1,1),new cc.DelayTime(.3),new cc.FadeOut(.2),new cc.RemoveSelf))},createText:function(e,t){var s=cleverapps.UI.LabelTTF.GetLocalizedText(e),n=cleverapps.UI.generateTTFText(e,t);return-1!==s.indexOf(" ")?n.setDimensions(this.width,0):n.fitTo(this.width),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.setPositionRound(this.width/2,this.height/2),this.addChild(n),n},createAnimation:function(e){this.animation||(this.animation=new cleverapps.Spine(bundles.exclamations.jsons.animation),this.animation.setPositionRound(this.width/2,this.height/2),this.addChild(this.animation)),this.animation.setAnimation(0,e,!1)},getStyles:function(){return cleverapps.styles.Exclamations.base}})};EXCLAMATIONS.heroes=EXCLAMATIONS.base.extend({getStyles:function(){
return cleverapps.styles.Exclamations.heroes},showMessage:function(e,t){var s=this.getStyles(),n="messages:message.YouWin"===e?res.sound_win_effect:bundles.game.urls.keep_going_effect,i=cleverapps.styles.FONTS.CONGRATS_MESSAGE_FONT,o=s[e];o?i.color=o.color:t===FieldView.MESSAGE_WARNING?i.color=s.warning.color:i.color=s.default.color;var a="lets_go";-1!==cleverapps.exclamation.getCongratulations().indexOf(e)?(n=bundles.game.urls[e+"_effect"],e="messages:message."+(a=e)):"messages:message.KeepGoing"===e?n=bundles.game.urls.go_on_effect:"messages:message.Shuffle"===e&&(a="shuffle",n=bundles.game.urls.shuffle_effect),this.runActions(e,i,n,a)},createMsg:function(e,t){var s=this.createText(e,t);s.setRotation(10);s.setScale(.1),s.setVisible(!1),s.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.Show,new cc.ScaleTo(.3,1).easing(cc.easeInOut(3)),new cc.DelayTime(.55),new cc.ScaleTo(.3,.1),new cc.RemoveSelf))}}),EXCLAMATIONS.words=EXCLAMATIONS.base.extend({getStyles:function(){
return cleverapps.styles.Exclamations.base},showMessage:function(e){this.runActions(e,void 0,void 0,"animation")},createMsg:function(e){e=Messages.getLocalized(e);var t=this.splitTextToLines(e).map(this.createLine.bind(this)),s=new cleverapps.Layout(t.reverse(),{direction:cleverapps.UI.VERTICAL,margin:t.length&&t[0].height/10||0});s.setCascadeOpacityEnabled(!0),s.setOpacity(0),s.setScale(0),s.setPositionRound(this.width/2,this.height/2),this.addChild(s);var n=1,i=cc.director.getRunningScene();s.width>i.scene.width&&(n=i.scene.width/(1.2*s.width)),this.setVisible(!0),this.stopAllActions(),this.runAction(new cc.Sequence(new cc.DelayTime(1.4),new cc.Hide)),s.runAction(new cc.Spawn(new cc.FadeIn(.25),new cc.Sequence(new cc.ScaleTo(.2,1.4*n,1.4*n),new cc.ScaleTo(.2,.8*n,.8*n),new cc.ScaleTo(1,n,n)),new cc.Sequence(new cc.DelayTime(1.2),new cc.FadeOut(.2),new cc.RemoveSelf)))},createLine:function(e){var t=new cc.Node;t.setAnchorPoint(.5,.5);for(var s=0,n=0,i=this.splitLineToBlocks(e),
o=0;o<i.length;o++){var a=cleverapps.UI.generateOnlyText(i[o],cleverapps.styles.FONTS.CONGRATE_TEXT);t.addChild(a);var r=Math.abs(o-i.length/2),l=1-.2/i.length*r,c=.2+.6/i.length*r;a.setPosition(s+a.width*l/2,a.height/2),s+=a.width*l,n=Math.max(n,a.height),a.setScale(0),a.runAction(new cc.Sequence(new cc.ScaleTo(c,1.36),new cc.ScaleTo(.13,l)))}return t.setContentSize(s,n),t.setCascadeOpacityEnabled(!0),t},splitTextToLines:function(e){if(!e)return[];var t=e.indexOf(" ");if(e.length<=16||-1===t)return[e];var s=e.substr(0,16).lastIndexOf(" ");-1===s&&(s=t);var n=[e.substr(0,s)];return n=n.concat(e.substr(s+1).trim())},splitLineToBlocks:function(e){var t=e.split("");return t.length<=6?t:t.slice(0,3).concat([t.slice(3,t.length-3).join("")]).concat(t.slice(t.length-3,t.length))}}),EXCLAMATIONS.actor=EXCLAMATIONS.words.extend({getStyles:function(){return cleverapps.styles.Exclamations.actor},showMessage:function(e){var t=bundles.exclamations.urls.exclamation_alert_effect;if(
-1!==cleverapps.exclamation.getCongratulations().indexOf(e)){var s=cleverapps.Random.mathChoose(this.getStyles().actorActions);t=s.sound,cc.director.getRunningScene().actor.animate(s.animation,{noSFX:!0})}else"messages:message.YouWin"===e?t=bundles.exclamations.urls.exclamation_win_effect:"messages:message.Shuffle"===e&&(t=bundles.exclamations.urls.exclamation_shuffle_effect);this.runActions(e,void 0,t,"animation")}}),cleverapps.overrideColors(cleverapps.styles.COLORS,{CONGRATS_RED:new cc.Color(255,35,60,255),CONGRATS_LIGHT_GREEN:new cc.Color(182,248,68,255),CONGRATS_BLUE:new cc.Color(0,177,249,255),CONGRATS_ORANGE:new cc.Color(233,117,38,255),CONGRATS_PURPLE:new cc.Color(194,11,227,255),CONGRATS_GREEN:new cc.Color(0,209,121,255),CONGRATS_DARK_RED:new cc.Color(241,15,51,255)}),cleverapps.styles.Exclamations={base:{width:600,height:200}},cleverapps.styles.Exclamations.heroes=cleverapps.overrideStyles(cleverapps.styles.Exclamations.base,{width:760,scale:[.8,1,1],sound:{delay:.6},
default:{color:cleverapps.styles.COLORS.CONGRATS_BLUE},warning:{color:cleverapps.styles.COLORS.CONGRATS_DARK_RED},yeah:{color:cleverapps.styles.COLORS.CONGRATS_RED},super:{color:cleverapps.styles.COLORS.CONGRATS_LIGHT_GREEN},yay:{color:cleverapps.styles.COLORS.CONGRATS_BLUE},lets_go:{color:cleverapps.styles.COLORS.CONGRATS_ORANGE},ohyeah:{color:cleverapps.styles.COLORS.CONGRATS_PURPLE},oh:{color:cleverapps.styles.COLORS.CONGRATS_GREEN},wow:{color:cleverapps.styles.COLORS.CONGRATS_DARK_RED}},!0),cleverapps.styles.Exclamations.actor=cleverapps.overrideStyles(cleverapps.styles.Exclamations.base,{actorActions:[{animation:Actor.ANIMATIONS.ATTACK1,sound:bundles.game.urls.sc_welldone},{animation:Actor.ANIMATIONS.ATTACK2,sound:bundles.game.urls.sc_welldone2},{animation:Actor.ANIMATIONS.ATTACK3,sound:bundles.game.urls.sc_welldone3}]},!0);var ComboBarView=cc.Node.extend({ctor:function(e){this._super(),this.combo=e;var t=cleverapps.styles.ComboBarView;this.setPositionRound(
t.positions[cleverapps.wideMode.mode]),this.setContentSize(t),this.setAnchorPoint2(),this.setScale(t.scale[cleverapps.wideMode.mode]),this.initSlots(),this.progressPoints=new Array(cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE),cleverapps.UI.makeHideable(this,cleverapps.UI.HORIZONTAL),cleverapps.metha.registerControl("comboBar",this),this.registerTarget(t),cleverapps.tooltipManager.create(this,{text:Messages.get("StreakTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.below,size:cleverapps.styles.UI.Tooltip.SIZE.long})},initSlots:function(){var e=cleverapps.styles.ComboBarView,t=new cc.Node;t.setPositionRound(e.row),this.progressSlots=[];for(var s=0;s<cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE;s++){var n=new cc.Sprite(0===s?bundles.game.frames.combo_notch1:bundles.game.frames.combo_notch2);n.setPosition(s*e.slot.offset,0),t.addChild(n),this.progressSlots.push(n)}var i=cleverapps.UI.createSprite(bundles.game.frames.combo_back_png);i.setPosition(this.width/2,this.height/2),
i.setContentSize(e),i.setLocalZOrder(-1),i.addChild(t),this.addChild(i),this.goalSlot=new cc.Node,this.goalSlot.setPosition(this.width+e.goal.offsetX,e.goal.offsetY),this.updateGoal(),this.addChild(this.goalSlot)},onChangeLevel:function(e){e&&(this.progressPoints[this.combo.level-1]=e),this.progressSlots.forEach(function(e,t){e.innerView&&t>=this.combo.level&&(e.innerView.runAction(new cc.Sequence(new cc.ScaleTo(.1,0),new cc.RemoveSelf)),e.innerView=void 0),void 0===e.innerView&&t<this.combo.level&&this.drawProgressPoint(e,t)}.bind(this))},drawProgressPoint:function(e,t){var s=cleverapps.styles.ComboBarView.progressImages[this.progressPoints[t]];e.innerView=cleverapps.UI.createSprite(0===t?bundles.game.frames.combo_point1:bundles.game.frames.combo_point2);var n=cleverapps.UI.createSprite(s);n.setPosition(e.innerView.width/2,e.innerView.height/2),e.innerView.addChild(n),e.innerView.setPosition(e.width/2,e.height/2),e.innerView.setScale(0),e.addChild(e.innerView),e.innerView.runAction(
new cc.ScaleTo(.2,1)),n.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.ScaleTo(.2,1.4).easing(cc.easeBackOut()),new cc.ScaleTo(.1,1)));var i=new cleverapps.Spine(bundles.game.jsons.combo_light_json);i.setAnimation(0,"animation",!1),i.setPositionRound(this.goalView.width/2,this.goalView.height/2),i.setCompleteListenerRemove(),this.goalView.addChild(i),this.goalView.runAction(new cc.Sequence(new cc.ScaleTo(.15,1.2),new cc.ScaleTo(.1,.9),new cc.ScaleTo(.1,1.1),new cc.ScaleTo(.1,1)))},updateGoal:function(){switch(this.goalView&&(this.goalView.removeFromParent(),this.goalView=void 0),this.combo.currentGoal){case 0:var e=cleverapps.cardSkins.getSelectedSkin().combo;break;case 1:e=cleverapps.cardSkins.getSelectedSkin().combo2;break;default:e=bundles.game.frames.combo_goal_png}this.goalView=cleverapps.UI.createSprite(e),this.goalSlot.addChild(this.goalView),this.goalView.setScale(0),this.goalView.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.ScaleTo(.3,1)))},reward:function(e,t
){var s=cleverapps.styles.ComboBarView.bonus,n=CardView.GetView(e);this.goalView&&(this.goalView.visible=!1),this.addChild(n),n.setPosition(this.width+s.offsetX,s.offsetY),n.setScale(s.scale),n.setRotation(s.rotation),n.runAction(new cc.Sequence(new cc.Spawn(new cc.ScaleTo(.3,1).easing(cc.easeInOut(3)),new cc.RotateTo(.3,0)),new cc.CallFunc(function(){t(),cleverapps.audio.playSound(bundles.game.urls.collected_effect)})))}});cleverapps.styles.ComboBarView={width:308,height:98,scale:[1,.9,1],positions:[{x:{align:"right",dx:-20},y:{align:"top",dy:-124}},{x:{align:"right",dx:-20},y:{align:"top",dy:-134}},{x:{align:"right",dx:-20},y:{align:"top",dy:-134}}],goal:{offsetX:-46,offsetY:50},row:{x:{align:"left",dx:40},y:{align:"center"}},slot:{offset:50},bonus:{offsetX:-46,offsetY:40,rotation:18,scale:.42}};var ComboView=cc.Node.extend({ctor:function(e,t){this._super(),this.combo=e,this.setAnchorPoint2(),"solitaire"===cleverapps.config.type?(this.comboBarView=new ComboBarView(this.combo),
t.addChild(this.comboBarView),this.combo.on("updateGoal",function(){this.comboBarView.updateGoal()}.bind(this))):(this.border=new cleverapps.Spine(bundles.combo_background.jsons.combo_background_json),this.border.setCascadeOpacityEnabled(!0),this.addChild(this.border),this.particles=new cleverapps.Spine(bundles.combo_background.jsons.combo_background_particles_json),this.addChild(this.particles)),this.updateSize=cleverapps.accumulate(10,this.updateSize.bind(this)),this.updateSize(),this.onChangeLevel(),this.combo.on("changeSize",this.updateSize.bind(this)),this.combo.on("changeLevel",this.onChangeLevel.bind(this)),this.combo.on("stopAlarm",this.stopAlarm.bind(this)),this.combo.on("runAlarm",this.runAlarm.bind(this)),this.combo.on("reward",this.reward.bind(this)),this.combo.on("runLater",this.runLater.bind(this))},runLater:function(e,t){this.runAction(new cc.Sequence(new cc.DelayTime(e),new cc.CallFunc(t)))},updateSize:function(){var e=cleverapps.UI.getSceneSize();this.setContentSize(
e.width,e.height+2*cleverapps.UI.getSceneOffsetY());var t=this.parent;this.setPositionRound(t.width/2,t.height/2),this.border&&(this.border.setScaleX(this.width/this.border.width/t.scale),this.border.setScaleY(this.height/this.border.height/t.scale),this.border.setPositionRound(this.width/2,this.height/2),this.particles.setPositionRound(this.width/2,this.height/2))},stopAlarm:function(){this.border&&(this.border.stopAllActions(),this.border.runAction(new cc.FadeTo(.3,255)))},reward:function(e,t){this.comboBarView&&this.comboBarView.reward(e,t)},runAlarm:function(){this.border&&(this.border.stopAllActions(),this.border.runAction(new cc.RepeatForever(new cc.Sequence(new cc.FadeTo(.5,170),new cc.FadeTo(.5,255)))))},onChangeLevel:function(e){if(this.border)if(this.combo.level<=1)this.border.visible=!1,this.particles.visible=!1;else{this.border.visible=!0,this.particles.visible=!0;var t=Math.min(this.combo.level,cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE)-1;this.border.setAnimation(0,"c"+t,!1)
,this.border.addAnimation(0,"c"+t+"_idle",!0),this.particles.setAnimation(0,"c"+t,!1),this.particles.addAnimation(0,"c"+t+"_idle",!0)}this.comboBarView&&this.comboBarView.onChangeLevel(e)}}),SceneDecors={add:function(e,t){if(t)return this.createDecors(e,t)},createDecors:function(s,e){return e.map(function(e){var t;return e.json?(t=new cleverapps.Spine(e.json)).setAnimation(0,e.animation,!0):t=new cc.Sprite(e.image),s.addChild(t),e.scale&&(e.scale.x?t.setScale(e.scale.x,e.scale.y):t.setScale(e.scale)),void 0!==e.zOrder&&t.setLocalZOrder(e.zOrder),t.setPositionRound(e),t})}};cleverapps.styles.SceneDecors={},cleverapps.SkinManager=function(){this.active=void 0,this.defaultSlots=cleverapps.SkinManager.SKINS.default.slots},cleverapps.SkinManager.prototype.getSlot=function(e,t){if(this.active&&this.active.slots[e]){var s=this.active.slots[e](t);if(void 0!==s)return s}return this.defaultSlots[e]&&this.defaultSlots[e](t)},cleverapps.SkinManager.prototype.update=function(){this.active=void 0,
cleverapps.eventManager&&cleverapps.eventManager.listCurrentFeatures().forEach(function(e){cleverapps.SkinManager.SKINS[e]&&(this.active=cleverapps.SkinManager.SKINS[e])},this)},cleverapps.SkinManager.prototype.getBundle=function(){if(this.active)return this.active.bundle},cleverapps.SkinManager.SKINS={default:{localization:{},slots:{windowDecors:function(e){return e.decors},windowBg:function(e){return e.image},spine:function(e){return e.json},menuBarItem:function(e){},sceneControlButton:function(e){},episodeView:function(e){},episodeViewTitle:function(e){},iconBg:function(e){return e.image},gameAudio:function(){},sceneBg:function(){},gameSceneBg:function(){},missionIcon:function(e){return cleverapps.environment.isGameScene()&&Missions[e.type].gameIcon?Missions[e.type].gameIcon:Missions[e.type].icon},missionStar:function(e){return bundles.game.frames["mission_star"+e.type+"_png"]},missionWindowHero:function(){return cleverapps.styles.MissionWindow.heroTitleAnimation},
tulpanScale:function(){return cleverapps.styles.TulpanCellView.scale},removeMissions:function(){},toolbarDecors:function(){return[]},localization:function(){return cleverapps.SkinManager.SKINS.default.localization},windowTitle:function(e){return e.image},missionMarkIcon:function(e){return cleverapps.environment.isGameScene()&&Missions[e.type].gameIcon?Missions[e.type].gameIcon:Missions[e.type].icon},missionWindowTitleFont:function(){return cleverapps.styles.FONTS.MISSION_WINDOW_TITLE_TEXT||cleverapps.styles.MissionWindow.titleFont},wardrobeWindowBanner:function(){return bundles.wardrobe_window.frames.window_bg},cardMarkSpine:function(e){return e.json}}}},cleverapps.SkinManager.SKINS.xmas={bundle:"xmas",localization:{tripeaks:{"Missions.LetterTournament.Title":"Xmas.Missions.LetterTournament.Title","MissionRulesWindow.LetterTournament.text2":"Xmas.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Xmas.MissionRulesWindow.LetterTournament.text3",
"AddMovesWindow.missionGiveUp.LetterTournament":"Xmas.AddMovesWindow.missionGiveUp.LetterTournament","AddMovesWindow.mission.LetterTournament":"Xmas.AddMovesWindow.mission.LetterTournament",CloversTooltip:"Xmas.CloversTooltip"},wordsoup:{"Missions.LetterTournament.Title":"Xmas.Missions.LetterTournament.Title","MissionRulesWindow.LetterTournament.text2":"Xmas.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Xmas.MissionRulesWindow.LetterTournament.text3","WardrobeDialogue.stage0.text0":"Xmas.WardrobeDialogue.stage0.text0","WardrobeDialogue.stage1.text0":"Xmas.WardrobeDialogue.stage1.text0","WardrobeDialogue.stage2.text0":"Xmas.WardrobeDialogue.stage2.text0","WardrobeDialogue.stage3.text0":"Xmas.WardrobeDialogue.stage3.text0","WardrobeDialogue.stage4.text0":"Xmas.WardrobeDialogue.stage4.text0","WardrobeDialogue.stage5.text0":"Xmas.WardrobeDialogue.stage5.text0","WardrobeDialogue.stage6.text0":"Xmas.WardrobeDialogue.stage6.text0",
"WardrobeDialogue.stage7.text0":"Xmas.WardrobeDialogue.stage7.text0","WardrobeDialogue.stage8.text0":"Xmas.WardrobeDialogue.stage8.text0","WardrobeDialogue.stage9.text0":"Xmas.WardrobeDialogue.stage9.text0","WardrobeDialogue.stage10.text0":"Xmas.WardrobeDialogue.stage10.text0","WardrobeDialogue.stage11.text0":"Xmas.WardrobeDialogue.stage11.text0",WardrobeDescText:"Xmas.WardrobeDescText",WardrobeRulesText:"Xmas.WardrobeRulesText",WardrobePrizeRewardTitle:"Xmas.WardrobePrizeRewardTitle","Missions.LetterTournament.Rules1":"Xmas.Missions.LetterTournament.Rules1"},scramble:{"Missions.LetterTournament.Title":"Xmas.Missions.LetterTournament.Title","MissionRulesWindow.LetterTournament.text2":"Xmas.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Xmas.MissionRulesWindow.LetterTournament.text3"}},slots:{windowDecors:function(e){var t=e.decors&&cleverapps.clone(e.decors,!0)||{};return t.leaves_left=!1,t.leaves_right=!1,t.xmas_window_1=!0,t.xmas_window_2=!0,
"crocword"===cleverapps.config.name&&(e.window instanceof VictoryWindow||(t.xmas_decor_horizontal=!0),t.xmas_decor_right_top=!0,t.xmas_decor_left_top=!0,t.xmas_decor_vertical_right=!0,t.xmas_decor_vertical_left=!0),-1!==["scramble"].indexOf(cleverapps.config.name)&&("victorywindow"!==e.window.name&&(t.xmas_decor_left_top=!0,t.xmas_decor_right_top=!0),"leaderswindow"!==e.window.name&&(t.xmas_decor_bottom=!0)),-1!==["tripeaks"].indexOf(cleverapps.config.name)&&(t.xmas_decor_left_top=!0,t.xmas_decor_center_top=!0,t.xmas_decor_right_top=!0,"leaderswindow"!==e.window.name&&(t.xmas_decor_bottom=!0)),"riddles"===cleverapps.config.name&&e.level&&e.level.isHard()&&(t.xmas_window_1=!1,t.xmas_window_2=!1),t},windowBg:function(e){return"riddles"===cleverapps.config.name&&e.level&&e.level.isHard()?e.image:bundles.xmas.frames.window_bg_png?bundles.xmas.frames.window_bg_png:void 0},hero:function(e){if(bundles.xmas.jsons[e.color+"_hero_spine_json"])return bundles.xmas.jsons[e.color+"_hero_spine_json"]
},spine:function(e){var t={};return-1!==["heroes","riddles"].indexOf(cleverapps.config.name)&&(t[bundles.heroes.jsons.A_hero_spine_json]=bundles.xmas.jsons.A_hero_spine_json,t[bundles.heroes.jsons.B_hero_spine_json]=bundles.xmas.jsons.B_hero_spine_json,t[bundles.heroes.jsons.C_hero_spine_json]=bundles.xmas.jsons.C_hero_spine_json,t[bundles.heroes.jsons.D_hero_spine_json]=bundles.xmas.jsons.D_hero_spine_json,t[bundles.heroes.jsons.E_hero_spine_json]=bundles.xmas.jsons.E_hero_spine_json,t[bundles.heroes.jsons.W_hero_spine_json]=bundles.xmas.jsons.W_hero_spine_json),"board"===cleverapps.config.type&&(t[bundles.hero.jsons.hero_json]=bundles.xmas.jsons.hero_json),-1!==["tripeaks"].indexOf(cleverapps.config.name)&&(t[bundles.letter_tournament.jsons.mission_window_json]=bundles.xmas.jsons.xmas_mission_window_json),-1!==["scramble"].indexOf(cleverapps.config.name)&&(t[bundles.letter_tournament.jsons.mission_window_json]=bundles.xmas.jsons.mission_window_json,
cleverapps.styles.MissionWindow.heroTitleAnimation=cleverapps.styles.xmasNewStyles.heroTitleAnimation),-1!==["wordsoup","tripeaks","scramble"].indexOf(cleverapps.config.name)&&(t[bundles.sidebar.jsons.mission_letter_icon_json]=bundles.sidebar.jsons.xmas_letter_json,t[bundles.sidebar.jsons.wardrobe_icon_json]=bundles.xmas.jsons.wardrobe_sidebar_icon_json),t[e.json]?t[e.json]:e.json},menuBarItem:function(e){return-1!==["crocword","scramble","tripeaks"].indexOf(cleverapps.config.name)?cleverapps.styles.SceneDecors.menuBarItemXmas:"undefined"!=typeof LivesView&&e.target instanceof LivesView?cleverapps.styles.SceneDecors.livesViewXmas:cleverapps.styles.SceneDecors.menuBarItemXmas},sceneControlButton:function(e){return cleverapps.styles.SceneDecors.sceneControlButtonXmas},progressViewDecor:function(e){return cleverapps.styles.SceneDecors.progressViewDecor},episodeView:function(e){return cleverapps.styles.SceneDecors.episodeViewXmas},iconBg:function(e){if(bundles.xmas.frames.icon_bg_png
)return bundles.xmas.frames.icon_bg_png},gameAudio:function(){if("wordsoup"===cleverapps.config.name)return bundles.xmas.urls.background_music_game},sceneBg:function(){if("wordsoup"===cleverapps.config.name)return{pattern:bundles.xmas.urls.pattern_bg_main_png}},gameSceneBg:function(e){if("wordsoup"===cleverapps.config.name)return{pattern:bundles.xmas.urls.pattern_bg_main_png}},missionIcon:function(e){if(-1!==["wordsoup","tripeaks","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER)return bundles.xmas.frames.mission_letter_png},missionStar:function(e){return-1!==["wordsoup","scramble"].indexOf(cleverapps.config.name)?bundles.xmas.frames["mission_star"+e.type+"_png"]:-1!==["tripeaks"].indexOf(cleverapps.config.name)?bundles.xmas.frames.mission_letter_png:void 0},missionRulesWindow:function(e){if(-1!==["wordsoup","tripeaks","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER)return bundles.xmas.jsons.letter_rules_json},
wardrobeWindowBanner:function(){return bundles.xmas.frames.window_banner},cardMarkSpine:function(e){return-1!==["tripeaks"].indexOf(cleverapps.config.name)&&"mission"===e.type?bundles.xmas.jsons.xmas_marks_json:e.json},localization:function(){if(cleverapps.SkinManager.SKINS.xmas.localization[cleverapps.config.name])return cleverapps.SkinManager.SKINS.xmas.localization[cleverapps.config.name]}}},cleverapps.SkinManager.SKINS.valentines={bundle:"valentines",localization:{heroes:{"Missions.TulpanTournament.Title":"Valentine.Missions.TulpanTournament.Title","Missions.TulpanTournament.Rules1":"Valentine.Missions.TulpanTournament.Rules1","Missions.TulpanTournament.AnimationMainTextWin":"Valentine.Missions.TulpanTournament.AnimationMainTextWin","Missions.TulpanTournament.AnimationMainTextLose":"Valentine.Missions.TulpanTournament.AnimationMainTextLose","Missions.TulpanTournament.AnimationMainTextInfo0":"Valentine.Missions.TulpanTournament.AnimationMainTextInfo0",
"Missions.TulpanTournament.AnimationMainTextInfo1":"Valentine.Missions.TulpanTournament.AnimationMainTextInfo1"},riddles:{"Missions.TulpanTournament.Title":"Valentine.Missions.TulpanTournament.Title","Missions.TulpanTournament.Rules1":"Valentine.Missions.TulpanTournament.Rules1","Missions.TulpanTournament.AnimationMainTextWin":"Valentine.Missions.TulpanTournament.AnimationMainTextWin","Missions.TulpanTournament.AnimationMainTextLose":"Valentine.Missions.TulpanTournament.AnimationMainTextLose","Missions.TulpanTournament.AnimationMainTextInfo0":"Valentine.Missions.TulpanTournament.AnimationMainTextInfo0","Missions.TulpanTournament.AnimationMainTextInfo1":"Valentine.Missions.TulpanTournament.AnimationMainTextInfo1","AddMovesWindow.mission.TulpanTournament":"Valentine.AddMovesWindow.mission.TulpanTournament","AddMovesWindow.missionGiveUp.TulpanTournament":"Valentine.AddMovesWindow.missionGiveUp.TulpanTournament"},scramble:{
"Missions.LetterTournament.Title":"Valentine.Missions.LetterTournament.Title","MissionRulesWindow.LetterTournament.text2":"Valentine.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Valentine.MissionRulesWindow.LetterTournament.text3"},wordsoup:{"Missions.LetterTournament.Title":"Valentine.Missions.LetterTournament.Title","Missions.LetterTournament.Rules1":"Valentine.Missions.LetterTournament.Rules1","MissionRulesWindow.LetterTournament.text2":"Valentine.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Valentine.MissionRulesWindow.LetterTournament.text3"},crocword:{"Missions.LetterTournament.Title":"Valentine.Missions.LetterTournament.Title","Missions.LetterTournament.Rules1":"Valentine.Missions.LetterTournament.Rules1","MissionRulesWindow.LetterTournament.text2":"Valentine.MissionRulesWindow.LetterTournament.text2",
"MissionRulesWindow.LetterTournament.text3":"Valentine.MissionRulesWindow.LetterTournament.text3"}},slots:{removeMissions:function(){if("riddles"===cleverapps.config.name||"heroes"===cleverapps.config.name)return[Mission.TYPE_COLLECT_MARK,Mission.TYPE_COMBO]},menuBarItem:function(e){return"crocword"===cleverapps.config.name?"BonusRoundTimerItem"===e.target.item.getName()?cleverapps.styles.SceneDecors.menuBarBonusRoundTimerItemValentines:cleverapps.styles.SceneDecors.menuBarItemValentines:-1!==["wordsoup","riddles","heroes","scramble"].indexOf(cleverapps.config.name)?cleverapps.styles.SceneDecors.menuBarItemValentines:void 0},sceneControlButton:function(e){if(-1!==["crocword","wordsoup","riddles","scramble"].indexOf(cleverapps.config.name))return cleverapps.styles.SceneDecors.sceneControlButtonValentines},progressViewDecor:function(e){if(-1!==["scramble"].indexOf(cleverapps.config.name))return cleverapps.styles.SceneDecors.progressViewDecorValentines},missionWindowDecors:function(){
return cleverapps.styles.SceneDecors.missionWindowValentines},episodeView:function(e){if(-1!==["crocword","wordsoup"].indexOf(cleverapps.config.name))return cleverapps.styles.SceneDecors.episodeViewValentines},episodeViewTitle:function(e){if(-1!==["wordsoup"].indexOf(cleverapps.config.name))return cleverapps.styles.SceneDecors.episodeViewTitleValentines},iconBg:function(e){if(-1!==["crocword","heroes","riddles"].indexOf(cleverapps.config.name))return bundles.valentines.frames.valentines_icon_bg_png},toolbarDecors:function(e){if(-1!==["crocword","wordsoup","heroes","riddles"].indexOf(cleverapps.config.name))return cleverapps.styles.SceneDecors.toolbarViewValentines},windowDecors:function(e){var t=e.decors&&cleverapps.clone(e.decors,!0)||{};return-1!==["wordsoup","crocword","heroes","riddles"].indexOf(cleverapps.config.name)&&(e.window instanceof LeadersWindow||(t.valentines_decor_right=!0,t.valentines_decor_right2=!0),t.valentines_decor_left=!0,t.valentines_decor_left2=!0,-1!==["heroes"
,"wordsoup","riddles","crocword"].indexOf(cleverapps.config.name)&&(t.valentines_decor_hearts=!0,t.valentines_decor_top_1=!0,t.valentines_decor_top_2=!0,t.valentines_decor_top_3=!0,t.valentines_decor_heart_top_1=!0,t.valentines_decor_heart_top_2=!0,t.valentines_decor_heart_top_3=!0,t.valentines_decor_heart_top_4=!0,t.gears_animation=!1,t.gears=!1,t.star=!1,t.present=!1,t.leaves_left=!1,t.leaves_right=!1)),-1!==["scramble"].indexOf(cleverapps.config.name)&&(t.valentines_decor_bottom=!0,t.valentines_decor_top=!0,e.window instanceof LeadersWindow&&(t.valentines_decor_bottom=!1),e.window instanceof MissionWindow&&(t.valentines_decor_top=!1),e.window instanceof ExtraWindow&&(t.valentines_decor_top=!1),e.window instanceof VictoryWindow&&(t.valentines_decor_top=!1)),t},missionIcon:function(e){return-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER?bundles.valentines.frames.mission_icon_png:-1!==["riddles","heroes"].indexOf(
cleverapps.config.name)&&e.type===Mission.TYPE_BURN_NEARBY?bundles.valentines.frames.mission_icon_png:void 0},missionStar:function(e){if(-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name))return bundles.valentines.frames["mission_star"+e.type+"_png"]},missionRulesWindow:function(e){if(-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER)return bundles.valentines.jsons.letter_rules_json},missionWindowHero:function(){if(-1!==["scramble"].indexOf(cleverapps.config.name))return cleverapps.styles.Valentines.heroTitleAnimation},spine:function(e){var t={};return-1!==["heroes","riddles"].indexOf(cleverapps.config.name)&&(t[bundles.tulpan_tournament.jsons.json]=bundles.valentines.jsons.json,t[bundles.main.jsons.tournament_tulpan_icon_json]=bundles.valentines.jsons.icon_json),"board"===cleverapps.config.type&&(t[bundles.hero.jsons.hero_json]=bundles.valentines.jsons.hero_json),-1!==["scramble"].indexOf(cleverapps.config.name
)&&(t[bundles.letter_tournament.jsons.mission_window_json]=bundles.valentines.jsons.mission_window_json),-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name)&&(t[bundles.sidebar.jsons.mission_letter_icon_json]=bundles.sidebar.jsons.valentine_letter_json),-1!==["crocword","wordsoup"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_WARDROBE&&(t[bundles.sidebar.jsons.wardrobe_icon_json]=bundles.sidebar.jsons.wardrobe_valentine_icon_json),t[e.json]?t[e.json]:e.json},localization:function(){if(cleverapps.SkinManager.SKINS.valentines.localization[cleverapps.config.name])return cleverapps.SkinManager.SKINS.valentines.localization[cleverapps.config.name]},gameSceneBg:function(e){if("wordsoup"===cleverapps.config.name)return{pattern:bundles.valentines.urls.valentines_pattern_bg_png}},gameAudio:function(){},windowTitle:function(e){if("heroes"===cleverapps.config.name)return bundles.valentines.frames.valentines_window_title_bg_png},missionWindowTitleFont:function(){
return cleverapps.styles.FONTS.VALENTINE_MISSION_WINDOW_TITLE_TEXT},wardrobeWindowBanner:function(){return bundles.valentines.frames.wardrobe_window_banner}}},cleverapps.overrideFonts(cleverapps.styles.FONTS,{VALENTINE_MISSION_WINDOW_TITLE_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,shadow:{direction:cc.size(0,-5),blur:1,color:new cc.Color(106,2,88,255)}}}),cleverapps.SkinManager.SKINS.easter={bundle:"easter",localization:{heroes:{"Missions.TulpanTournament.Title":"Easter.Missions.TulpanTournament.Title","Missions.TulpanTournament.Rules1":"Easter.Missions.TulpanTournament.Rules1","Missions.TulpanTournament.AnimationMainTextWin":"Easter.Missions.TulpanTournament.AnimationMainTextWin","Missions.TulpanTournament.AnimationMainTextLose":"Easter.Missions.TulpanTournament.AnimationMainTextLose","Missions.TulpanTournament.AnimationMainTextInfo0":"Easter.Missions.TulpanTournament.AnimationMainTextInfo0",
"Missions.TulpanTournament.AnimationMainTextInfo1":"Easter.Missions.TulpanTournament.AnimationMainTextInfo1","AddMovesWindow.mission.TulpanTournament":"Easter.AddMovesWindow.mission.TulpanTournament","AddMovesWindow.missionGiveUp.TulpanTournament":"Easter.AddMovesWindow.missionGiveUp.TulpanTournament"},riddles:{"Missions.RoseTournament.Title":"Easter.Missions.RoseTournament.Title","Missions.RoseTournament.Rules1":"Easter.Missions.RoseTournament.Rules1","Missions.RoseTournament.AnimationMainTextWin":"Easter.Missions.RoseTournament.AnimationMainTextWin","Missions.RoseTournament.AnimationMainTextLose":"Easter.Missions.RoseTournament.AnimationMainTextLose","Missions.RoseTournament.AnimationMainTextInfo0":"Easter.Missions.RoseTournament.AnimationMainTextInfo0","Missions.RoseTournament.AnimationMainTextInfo1":"Easter.Missions.RoseTournament.AnimationMainTextInfo1","AddMovesWindow.mission.TulpanTournament":"Easter.AddMovesWindow.mission.RoseTournament",
"AddMovesWindow.missionGiveUp.RoseTournament":"Easter.AddMovesWindow.missionGiveUp.RoseTournament","AddMovesWindow.mission.RoseTournament":"Easter.AddMovesWindow.mission.RoseTournament"},wordsoup:{"Missions.LetterTournament.Title":"Easter.Missions.LetterTournament.Title","Missions.LetterTournament.Rules1":"Easter.Missions.LetterTournament.Rules1","MissionRulesWindow.LetterTournament.text2":"Easter.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Easter.MissionRulesWindow.LetterTournament.text3"},scramble:{"Missions.LetterTournament.Title":"Easter.Missions.LetterTournament.Title","MissionRulesWindow.LetterTournament.text2":"Easter.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Easter.MissionRulesWindow.LetterTournament.text3"},crocword:{"Missions.LetterTournament.Title":"Easter.Missions.LetterTournament.Title","Missions.LetterTournament.Rules1":"Easter.Missions.LetterTournament.Rules1",
"MissionRulesWindow.LetterTournament.text2":"Easter.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Easter.MissionRulesWindow.LetterTournament.text3"}},slots:{windowDecors:function(e){var t=e.decors&&cleverapps.clone(e.decors,!0)||{};return"wordsoup"===cleverapps.config.name&&(e.window instanceof LeadersWindow||(t.window_bottom_right_corner_2=!0,t.window_bottom_right_corner_1=!0,t.window_bottom_left_corner_2=!0,t.window_bottom_left_corner_1=!0)),"riddles"===cleverapps.config.name&&(t.window_bottom_right=!0,t.window_bottom_left=!0),"scramble"===cleverapps.config.name&&(t.easter_decor_top=!0,t.easter_decor_bottom=!0,e.window instanceof TellWindow&&(t.easter_decor_bottom=!1),e.window instanceof MissionWindow&&(t.easter_decor_top=!1),e.window instanceof ExtraWindow&&(t.easter_decor_top=!1),e.window instanceof VictoryWindow&&(t.easter_decor_top=!1),e.window instanceof BoostersSaleWindow&&(t.easter_decor_bottom=!1)),t},menuBarItem:function(){
return cleverapps.styles.SceneDecors.menuBarItemEaster},episodeView:function(){return cleverapps.styles.SceneDecors.episodeViewEaster},toolbarDecors:function(){return cleverapps.styles.SceneDecors.toolbarViewEaster},progressViewDecor:function(){return cleverapps.styles.SceneDecors.progressViewDecorEaster},sceneControlButton:function(e){if(e.target.options.logic===MenuControlButton)return cleverapps.styles.SceneDecors.sceneControlButtonEaster},missionWindowDecors:function(){return cleverapps.styles.SceneDecors.missionWindowEaster},tulpanScale:function(){if("heroes"===cleverapps.config.name)return.9},missionIcon:function(e){return-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER?bundles.easter.frames.letter_mission_icon:-1!==["heroes"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_BURN_NEARBY?bundles.easter.frames.tulpan_png:-1!==["riddles"].indexOf(cleverapps.config.name
)&&e.type===Mission.TYPE_COLLECT_MARK?bundles.easter.frames.rose_png:void 0},missionStar:function(e){if(-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name))return bundles.easter.frames["mission_star"+e.type+"_png"]},missionMarkIcon:function(){return bundles.easter.frames["rose_"+(Math.random()<.5?1:2)]},missionRulesWindow:function(e){if(-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER)return bundles.easter.jsons.letter_rules_json},removeMissions:function(){return"riddles"===cleverapps.config.name?[Mission.TYPE_COMBO,Mission.TYPE_BURN_NEARBY]:"heroes"===cleverapps.config.name?[Mission.TYPE_COLLECT_MARK,Mission.TYPE_COMBO]:void 0},gameSceneBg:function(){if("wordsoup"===cleverapps.config.name)return{pattern:bundles.easter.urls.pattern_bg}},spine:function(e){var t={};return-1!==["riddles"].indexOf(cleverapps.config.name)&&(t[bundles.rose_tournament.jsons.json]=bundles.easter.jsons.rose_tournament_json,
t[bundles.main.jsons.tournament_rose_icon_json]=bundles.easter.jsons.tournament_rose_icon_json),-1!==["heroes"].indexOf(cleverapps.config.name)&&(t[bundles.tulpan_tournament.jsons.json]=bundles.easter.jsons.tulpan_tournament_json,t[bundles.main.jsons.tournament_tulpan_icon_json]=bundles.easter.jsons.tournament_tulpan_icon_json),-1!==["scramble"].indexOf(cleverapps.config.name)&&(t[bundles.letter_tournament.jsons.mission_window_json]=bundles.easter.jsons.mission_window_json),"board"===cleverapps.config.type&&(t[bundles.sidebar.jsons.mission_letter_icon_json]=bundles.sidebar.jsons.easter_letter_json),t[e.json]},localization:function(){if(cleverapps.SkinManager.SKINS.easter.localization[cleverapps.config.name])return cleverapps.SkinManager.SKINS.easter.localization[cleverapps.config.name]}}},cleverapps.SkinManager.SKINS.memorial={bundle:"memorial",localization:{heroes:{"Missions.TulpanTournament.Title":"Memorial.Missions.TulpanTournament.Title",
"Missions.TulpanTournament.Rules1":"Memorial.Missions.TulpanTournament.Rules1","Missions.TulpanTournament.AnimationMainTextWin":"Memorial.Missions.TulpanTournament.AnimationMainTextWin","Missions.TulpanTournament.AnimationMainTextLose":"Memorial.Missions.TulpanTournament.AnimationMainTextLose","Missions.TulpanTournament.AnimationMainTextInfo0":"Memorial.Missions.TulpanTournament.AnimationMainTextInfo0","Missions.TulpanTournament.AnimationMainTextInfo1":"Memorial.Missions.TulpanTournament.AnimationMainTextInfo1","AddMovesWindow.mission.TulpanTournament":"Memorial.AddMovesWindow.mission.TulpanTournament","AddMovesWindow.missionGiveUp.TulpanTournament":"Memorial.AddMovesWindow.missionGiveUp.TulpanTournament","BoostersSaleWindow.title":"Memorial.BoostersSaleWindow.title"},wordsoup:{"Missions.LetterTournament.Title":"Memorial.Missions.LetterTournament.Title","Missions.LetterTournament.Rules1":"Memorial.Missions.LetterTournament.Rules1",
"MissionRulesWindow.LetterTournament.text2":"Memorial.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Memorial.MissionRulesWindow.LetterTournament.text3","BoostersSaleWindow.title":"Memorial.BoostersSaleWindow.title"},crocword:{"Missions.LetterTournament.Title":"Memorial.Missions.LetterTournament.Title","Missions.LetterTournament.Rules1":"Memorial.Missions.LetterTournament.Rules1","MissionRulesWindow.LetterTournament.text2":"Memorial.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Memorial.MissionRulesWindow.LetterTournament.text3",WardrobeDescText:"Memorial.WardrobeDescText",WardrobeRulesText:"Memorial.WardrobeRulesText",WardrobePrizeRewardTitle:"Memorial.WardrobePrizeRewardTitle","WardrobeDialogue.stage0.text0":"Memorial.WardrobeDialogue.stage0.text0","WardrobeDialogue.stage1.text0":"Memorial.WardrobeDialogue.stage1.text0","WardrobeDialogue.stage2.text0":"Memorial.WardrobeDialogue.stage2.text0",
"WardrobeDialogue.stage3.text0":"Memorial.WardrobeDialogue.stage3.text0","WardrobeDialogue.stage4.text0":"Memorial.WardrobeDialogue.stage4.text0","WardrobeDialogue.stage5.text0":"Memorial.WardrobeDialogue.stage5.text0","WardrobeDialogue.stage6.text0":"Memorial.WardrobeDialogue.stage6.text0","WardrobeDialogue.stage7.text0":"Memorial.WardrobeDialogue.stage7.text0","WardrobeDialogue.stage8.text0":"Memorial.WardrobeDialogue.stage8.text0","WardrobeDialogue.stage9.text0":"Memorial.WardrobeDialogue.stage9.text0","WardrobeDialogue.stage10.text0":"Memorial.WardrobeDialogue.stage10.text0","WardrobeDialogue.stage11.text0":"Memorial.WardrobeDialogue.stage11.text0","BoostersSaleWindow.title":"Memorial.BoostersSaleWindow.title"},scramble:{"Missions.LetterTournament.Title":"Memorial.Missions.LetterTournament.Title","MissionRulesWindow.LetterTournament.text2":"Memorial.MissionRulesWindow.LetterTournament.text2",
"MissionRulesWindow.LetterTournament.text3":"Memorial.MissionRulesWindow.LetterTournament.text3"},riddles:{"Missions.TulpanTournament.Title":"Memorial.Missions.TulpanTournament.Title","Missions.TulpanTournament.Rules1":"Memorial.Missions.TulpanTournament.Rules1","Missions.TulpanTournament.AnimationMainTextWin":"Memorial.Missions.TulpanTournament.AnimationMainTextWin","Missions.TulpanTournament.AnimationMainTextLose":"Memorial.Missions.TulpanTournament.AnimationMainTextLose","Missions.TulpanTournament.AnimationMainTextInfo0":"Memorial.Missions.TulpanTournament.AnimationMainTextInfo0","Missions.TulpanTournament.AnimationMainTextInfo1":"Memorial.Missions.TulpanTournament.AnimationMainTextInfo1","AddMovesWindow.mission.TulpanTournament":"Memorial.AddMovesWindow.mission.TulpanTournament","AddMovesWindow.missionGiveUp.TulpanTournament":"Memorial.AddMovesWindow.missionGiveUp.TulpanTournament","BoostersSaleWindow.title":"Memorial.BoostersSaleWindow.title"}},slots:{spine:function(e){var t={}
;return-1!==["heroes","riddles"].indexOf(cleverapps.config.name)&&(t[bundles.tulpan_tournament.jsons.json]=bundles.memorial.jsons.json,t[bundles.sidebar.jsons.tournament_tulpan_icon_json]=bundles.memorial.jsons.icon_json),-1!==["crocword","scramble"].indexOf(cleverapps.config.name)&&(t[bundles.hero.jsons.hero_json]=bundles.memorial.jsons.hero_json),-1!==["crocword","wordsoup","scramble"].indexOf(cleverapps.config.name)&&(t[bundles.sidebar.jsons.mission_letter_icon_json]=bundles.sidebar.jsons.memorial_letter_json),-1!==["scramble"].indexOf(cleverapps.config.name)&&(t[bundles.letter_tournament.jsons.mission_window_json]=bundles.memorial.jsons.mission_window_json),t[e.json]?t[e.json]:e.json},toolbarDecors:function(e){if(-1!==["heroes","riddles","wordsoup","crocword"].indexOf(cleverapps.config.name))return cleverapps.styles.SceneDecors.toolbarViewMemorial},windowDecors:function(e){if(-1!==["heroes","riddles","wordsoup","crocword","scramble"].indexOf(cleverapps.config.name)){
var t=e.decors&&cleverapps.clone(e.decors,!0)||{};return t.memorial_decor_top=!0,t.memorial_decor_bottom_left=!0,t.memorial_decor_bottom_right=!0,e.window instanceof LeadersWindow&&(t.memorial_decor_bottom_right=!1),e.window instanceof FavoriteSaleWindow&&(t.memorial_decor_bottom_left=!1,t.memorial_decor_bottom_right=!1),e.window instanceof SubscriptionWindow&&-1!==["crocword","wordsoup"].indexOf(cleverapps.config.name)&&(t.memorial_decor_top=!1,t.memorial_decor_bottom_left=!1,t.memorial_decor_bottom_right=!1),e.window instanceof WardrobeWindow&&(t.memorial_decor_top=!1),e.window instanceof WardrobeRulesWindow&&(t.memorial_decor_top=!1),e.window instanceof WardrobeReceiveWindow&&(t.memorial_decor_top=!1),t.leaves_right=!1,t.gears=!1,t.gears_animation=!1,"scramble"===cleverapps.config.name&&(e.window instanceof LeadersWindow&&(t.memorial_decor_bottom_left=!1),e.window instanceof SubscriptionWindow&&(t.memorial_decor_bottom_left=!1),e.window instanceof VictoryWindow&&(
t.memorial_decor_top=!1,t.memorial_decor_bottom_left=!1),e.window instanceof TreasureSearchWindow&&(t.memorial_decor_bottom_left=!1),e.window instanceof TellWindow&&(t.memorial_decor_bottom_left=!1)),"wordsoup"===cleverapps.config.name&&e.window instanceof HomeTasksWindow&&(t.memorial_decor_bottom_left=!1,t.memorial_decor_bottom_right=!1),t}return e.decors},menuBarItem:function(e){if(e.target.item&&"GoldItem"===e.target.item.getName())return cleverapps.styles.SceneDecors.menuBarItemMemorial},sceneControlButton:function(e){if(e.target.options.logic===MenuControlButton)return cleverapps.styles.SceneDecors.sceneControlButtonMemorial},progressViewDecor:function(){return cleverapps.styles.SceneDecors.progressViewMemorial},missionIcon:function(e){return-1!==["heroes","riddles"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_BURN_NEARBY?bundles.memorial.frames.mission_icon_png:-1!==["wordsoup","crocword","scramble"].indexOf(cleverapps.config.name
)&&e.type===Mission.TYPE_LETTER?bundles.memorial.frames.mission_icon_png:void 0},missionStar:function(e){if(-1!==["wordsoup","crocword","scramble"].indexOf(cleverapps.config.name))return bundles.memorial.frames["mission_star"+e.type+"_png"]},missionRulesWindow:function(e){if(-1!==["wordsoup","crocword","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER)return bundles.memorial.jsons.letter_rules_json},missionWindowDecors:function(){return cleverapps.styles.SceneDecors.missionWindowMemorial},removeMissions:function(){if(-1!==["heroes","riddles"].indexOf(cleverapps.config.name))return[Mission.TYPE_COLLECT_MARK,Mission.TYPE_COMBO]},wardrobeWindowBanner:function(){return bundles.memorial.frames.wardrobe_window_banner},localization:function(){if(cleverapps.SkinManager.SKINS.memorial.localization[cleverapps.config.name])return cleverapps.SkinManager.SKINS.memorial.localization[cleverapps.config.name]}}},cleverapps.SkinManager.SKINS.halloween={bundle:"halloween",
localization:{heroes:{"BoostersSaleWindow.title":"Halloween.BoostersSaleWindow.title"},scramble:{"BoostersSaleWindow.title":"Halloween.BoostersSaleWindow.title","Missions.LetterTournament.Title":"Halloween.Missions.LetterTournament.Title","Missions.LetterTournament.Rules1":"Halloween.Missions.LetterTournament.Rules1","MissionRulesWindow.LetterTournament.text2":"Halloween.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Halloween.MissionRulesWindow.LetterTournament.text3"},wordsoup:{"BoostersSaleWindow.title":"Halloween.BoostersSaleWindow.title"},tripeaks:{"BoostersSaleWindow.title":"Halloween.BoostersSaleWindow.title",CloversTooltip:"Halloween.CloversTooltip","Missions.LetterTournament.Title":"Halloween.Missions.LetterTournament.Title","MissionRulesWindow.LetterTournament.text2":"Halloween.MissionRulesWindow.LetterTournament.text2","MissionRulesWindow.LetterTournament.text3":"Halloween.MissionRulesWindow.LetterTournament.text3",
"AddMovesWindow.missionGiveUp.LetterTournament":"Halloween.AddMovesWindow.missionGiveUp.LetterTournament","AddMovesWindow.mission.LetterTournament":"Halloween.AddMovesWindow.mission.LetterTournament"},differences:{"BoostersSaleWindow.title":"Halloween.BoostersSaleWindow.title"},riddles:{"BoostersSaleWindow.title":"Halloween.BoostersSaleWindow.title"}},slots:{windowDecors:function(e){var t={};return-1!==["wordsoup"].indexOf(cleverapps.config.name)&&-1!==[VictoryWindow].indexOf(e.window.constructor)?t.web_bottom=!0:(t.web_top=!0,t.web_bottom=!0,t.pumpkin_animation=!0),-1!==["wordsoup"].indexOf(cleverapps.config.name)&&-1!==[ExtraWindow].indexOf(e.window.constructor)&&(t.web_top=!1),-1!==[MiniGameWindow].indexOf(e.window.constructor)&&(t.web_top=!1,t.web_bottom=!1),-1!==["olympics","differences"].indexOf(cleverapps.config.name)&&-1!==[KnockoutWindow].indexOf(e.window.constructor)&&(t.pumpkin_animation=!1),-1!==[PiggyBankWindow,MissionRulesWindow,DailyTasksWindow,LeadersWindow].indexOf(
e.window.constructor)&&(t.forest=!0,t.roots_top_left=!0,t.roots_top_right=!0,t.owls_animation=!0,t.pumpkin_animation=!1,t.web_top=!1),-1!==[MissionRulesWindow].indexOf(e.window.constructor)&&cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL&&(t.forest=!1,t.owls_animation=!1),-1!==[RestartWindow,LevelStartWindow,LoseWindow,SettingsWindow].indexOf(e.window.constructor)&&(t.pumpkins=!0,t.candle_animation=!0,t.pumpkin_animation=!1,t.web_top=!1),"undefined"!=typeof QuestWindow&&e.window.constructor===QuestWindow&&(t.pumpkin_animation=!1),"undefined"!=typeof BuildingStartWindow&&e.window.constructor===BuildingStartWindow&&(t.web_top=!1),-1!==[RulesWindow].indexOf(e.window.constructor)&&(t.pumpkin_animation=!1),"differences"===cleverapps.config.name&&-1!==[MissionWindow].indexOf(e.window.constructor)&&(t.pumpkin_animation=!1),"tripeaks"===cleverapps.config.name&&(-1!==[MissionWindow].indexOf(e.window.constructor)&&(t.web_top=!1),-1!==[VictoryWindow].indexOf(e.window.constructor)&&(
t.web_top=!1,t.pumpkin_animation=!1),e.window instanceof RulesWindow&&(t.pumpkin_animation=!1)),"scramble"===cleverapps.config.name&&(-1!==[BackgroundsWindow].indexOf(e.window.constructor)&&(t.web_bottom=!1),e.window instanceof RulesWindow&&(t.pumpkin_animation=!1),-1!==[DailyCupLeadersWindow,CryptexWindow,BackgroundsWindow,VictoryWindow].indexOf(e.window.constructor)&&(t.pumpkin_animation=!1),-1!==[DailyTasksWindow,LevelStartWindow,SettingsWindow].indexOf(e.window.constructor)&&(t.pumpkin_animation=!0)),t},localization:function(){if(cleverapps.SkinManager.SKINS.halloween.localization[cleverapps.config.name])return cleverapps.SkinManager.SKINS.halloween.localization[cleverapps.config.name]},missionIcon:function(e){if(-1!==["scramble","tripeaks"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER)return bundles.halloween.frames.mission_letter_png},missionStar:function(e){return-1!==["scramble"].indexOf(cleverapps.config.name
)?bundles.halloween.frames["mission_star_"+e.type+"_png"]:-1!==["tripeaks"].indexOf(cleverapps.config.name)?bundles.halloween.frames.mission_letter_png:void 0},missionRulesWindow:function(e){if(-1!==["tripeaks","scramble"].indexOf(cleverapps.config.name)&&e.type===Mission.TYPE_LETTER)return bundles.halloween.jsons.letter_rules_json},spine:function(e){var t={};return-1!==["scramble","tripeaks"].indexOf(cleverapps.config.name)&&(t[bundles.letter_tournament.jsons.mission_window_json]=bundles.halloween.jsons.halloween_mission_window_json,t[bundles.sidebar.jsons.mission_letter_icon_json]=bundles.sidebar.jsons.halloween_letter_json),t[e.json]},cardMarkSpine:function(e){return-1!==["tripeaks"].indexOf(cleverapps.config.name)&&"mission"===e.type?bundles.halloween.jsons.halloween_marks_json:e.json}}},cleverapps.SkinManager.SKINS.black_friday={bundle:"black_friday",slots:{windowDecors:function(e){var t=e.decors&&cleverapps.clone(e.decors,!0)||{};return"scramble"===cleverapps.config.name&&-1!==[
FavoriteSaleWindow,BoostersSaleWindow].indexOf(e.window.constructor)&&(t.black_friday_balloon=!0,t.black_friday_label=!0),t}}};var NoConnectionWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.NoConnectionWindow;this._super({title:"messages:NoConnectionWindow.title",name:"noconnectionwindow",content:this.getContent(),button:{width:e.button.width,height:e.button.height,text:Messages.get("OK"),onPressed:function(){this.close()}.bind(this)}})},getContent:function(){var e=cleverapps.styles.NoConnectionWindow,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e.animation);var s=new cleverapps.Spine(bundles.main.jsons.no_connection_json,1);t.addChild(s),s.setPositionRound(t.width/2,t.height/2),s.setAnimation(0,"animation",!0);var n=cleverapps.UI.generateTTFText("messages:RestartWindow.AnErrorOccured",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);return n.setDimensions(e.text.width,0),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),new cleverapps.Layout([n,t],{
direction:cleverapps.UI.VERTICAL,margin:e.margin})}});cleverapps.styles.NoConnectionWindow={width:500,height:800,margin:30,animation:{width:400,height:400},text:{width:480},button:{width:200,height:100}},cleverapps.UI.ZoomHandler=function(e){this.target=e,cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseScroll:this.handleMouseScroll.bind(this)},this.target),cc.sys.isMobile&&cc.sys.capabilities.touches&&this.enablePinchZoom()},cleverapps.UI.ZoomHandler.prototype.handleMouseScroll=function(e){if(cleverapps.metha.isControlEnabled()&&!this._zoomRunning){var t=e._scrollY;0!==t&&(t=0<t?.1:-.1,this.zoomTo(this.target.zoom+t,0))}},cleverapps.UI.ZoomHandler.prototype.normalizeZoom=function(e){return e=Math.round(100*e)/100,Math.min(Math.max(e,.8),2)},cleverapps.UI.ZoomHandler.prototype.setZoom=function(e,t){this.target.zoom=t?e:this.normalizeZoom(e),this.target.centerNode.setScale(this.target.zoom),this.target.updateVisibility(),this.target.calcBorders(),
this.target.scrollHandler.afterContainerScale(),this.target.onUpdateZoomListener()},cleverapps.UI.ZoomHandler.prototype.zoomTo=function(e,t){this._targetZoom=this.normalizeZoom(e),this._startZoom=this.target.zoom,this._elapsedTime=0,this._zoomDuration=t,this._zoomRunning=!0},cleverapps.UI.ZoomHandler.prototype.processZoom=function(e){this._zoomRunning&&(this._elapsedTime<this._zoomDuration?(this.setZoom(this._startZoom+(this._targetZoom-this._startZoom)*(this._elapsedTime/this._zoomDuration),!0),this._elapsedTime+=e):(this._zoomRunning=!1,this.setZoom(this._targetZoom)))},cleverapps.UI.ZoomHandler.prototype.enablePinchZoom=function(){var i=0,o=function(e,t){return e=e.getLocationInView(),t=t.getLocationInView(),Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e=function(e){var t=a._claimedTouches;return 1===t.length?i=o(t[0],e):1<t.length&&(i=o(t[0],t[1])),!0}.bind(this),t=function(e,t){if(2<=a._claimedTouches.length){this.pinchZooming=!0;var s=o(a._claimedTouches[0],a._claimedTouches[1]),n=i-s
;3<Math.abs(n)&&(i=s,this.zoomTo(this.target.zoom-85e-5*n,0)),t.stopPropagation()}}.bind(this),s=function(){a._claimedTouches.length<2&&(this.pinchZooming=!1)}.bind(this),a=cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:e,onTouchMoved:t,onTouchCancelled:s,onTouchEnded:s},this.target)};var BaseBoosterBefore=function(e){cleverapps.EventEmitter.call(this),this.id=e,this.price=cleverapps.config.prices.boosters[e][1],this.state=BaseBoosterBefore.ACTIVE_STATE,this.bonusState=BaseBoosterBefore.BONUS_EMPTY_STATE,this.isAdsAvailable()&&(this.state=BaseBoosterBefore.ADS_STATE,cleverapps.adsLimits.onUpdateListeners["BoosterBefore_"+this.id]=this.onAdsUpdate.bind(this)),this.isAvailable()||(this.state=BaseBoosterBefore.DISABLED_STATE)};BaseBoosterBefore.prototype=Object.create(cleverapps.EventEmitter.prototype),(BaseBoosterBefore.prototype.constructor=BaseBoosterBefore).prototype.onStart=function(){
this.state===BaseBoosterBefore.USE_STATE&&cleverapps.boostersCounter.use(this.id)},BaseBoosterBefore.prototype.onGiveUp=function(){this.state===BaseBoosterBefore.USE_STATE&&(cleverapps.boostersCounter.add(this.id,1),this.state=BaseBoosterBefore.ACTIVE_STATE)},BaseBoosterBefore.prototype.onAdsUpdate=function(){this.state!==BaseBoosterBefore.USE_STATE&&(this.isAdsAvailable()?this.setState(BaseBoosterBefore.ADS_STATE):this.setState(BaseBoosterBefore.ACTIVE_STATE))},BaseBoosterBefore.prototype.isAdsAvailable=function(){return this.isAvailable()&&cleverapps.adsLimits.state(AdsLimits.TYPES.BOOSTERS_BEFORE_FOR_VIDEO)===AdsLimits.STATE_READY&&0===cleverapps.boostersCounter.getAmount(this.id)},BaseBoosterBefore.prototype.isActivated=function(){return this.state===BaseBoosterBefore.ADS_STATE},BaseBoosterBefore.prototype.isActivated=function(){return this.state===BaseBoosterBefore.USE_STATE},BaseBoosterBefore.prototype.isBonusActivated=function(){
return this.bonusState===BaseBoosterBefore.BONUS_LANTERN_STATE},BaseBoosterBefore.prototype.getActivatedStates=function(){var e=[];return this.isActivated()&&e.push(this.state),this.isBonusActivated()&&e.push(this.bonusState),e},BaseBoosterBefore.prototype.getAmount=function(){return cleverapps.boostersCounter.getAmount(this.id)},BaseBoosterBefore.prototype.setState=function(e){this.state=e,this.trigger("update")},BaseBoosterBefore.prototype.setBonusState=function(e){this.bonusState=e,this.trigger("update")},BaseBoosterBefore.prototype.use=function(){if(this.state===BaseBoosterBefore.ACTIVE_STATE)if(0<this.getAmount())this.setState(BaseBoosterBefore.USE_STATE);else if(cleverapps.user.canTakeGold(this.price)){levels.user.takeGold(this.price),cleverapps.boostersCounter.add(this.id,1);var e=BoostersBefore.instance&&BoostersBefore.instance.level;cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HINT_USED,{hash:e.hash,amount:this.price}),cleverapps.eventLogger.logEvent(
cleverapps.EVENTS.BOOSTERS_BOUGHT,{amount:1}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTERS_BOUGHT_ITEM,{id:this.id,amount:1}),cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect),this.setState(BaseBoosterBefore.USE_STATE)}else cleverapps.flags.nopayments?cleverapps.Notification.create("messages:NotEnoughCoins"):new HardCurrencyShopWindow},BaseBoosterBefore.prototype.unuse=function(){this.state===BaseBoosterBefore.USE_STATE&&this.setState(BaseBoosterBefore.ACTIVE_STATE)},BaseBoosterBefore.prototype.onClick=function(){this.state===BaseBoosterBefore.ADS_STATE?cleverapps.rewardedAdsManager.loadAndPlay(function(){cleverapps.adsLimits.watch(AdsLimits.TYPES.BOOSTERS_BEFORE_FOR_VIDEO),cleverapps.boostersCounter.add(this.id,1),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTERS_BEFORE_FOR_VIDEO),this.setState(BaseBoosterBefore.USE_STATE)}.bind(this)):this.state===BaseBoosterBefore.USE_STATE?this.unuse():(this.use(),cleverapps.forces.isRunningForce(
)&&cleverapps.forces.closeRunningForce())},BaseBoosterBefore.prototype.isAvailable=function(){return cleverapps.user.checkAvailable(BoostersBeforeConfig[this.id].available)},BaseBoosterBefore.prototype.isDisabled=function(){return this.state===BaseBoosterBefore.DISABLED_STATE||this.state===BaseBoosterBefore.UPCOMING_STATE},BaseBoosterBefore.prototype.showTutorialStep=function(e){this.isForceAvailable()?(cleverapps.boostersCounter.canUse(this.id)||cleverapps.boostersCounter.add(this.id,1),this.trigger("showForce",e)):e()},BaseBoosterBefore.prototype.isForceAvailable=function(){return this.isAvailable()&&!cleverapps.forces.isShown(this.force.id)},BaseBoosterBefore.ACTIVE_STATE=0,BaseBoosterBefore.USE_STATE=1,BaseBoosterBefore.DISABLED_STATE=2,BaseBoosterBefore.UPCOMING_STATE=3,BaseBoosterBefore.ADS_STATE=4,BaseBoosterBefore.BONUS_LANTERN_STATE=0,BaseBoosterBefore.BONUS_EMPTY_STATE=1;var ComboBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_COMBO),
this.force=Forces.FIRST_BOOSTERS_BEFORE};ComboBooster.prototype=Object.create(BaseBoosterBefore.prototype),(ComboBooster.prototype.constructor=ComboBooster).prototype.giveBonus=function(){var e=this.getActivatedStates().length*ComboBooster.COMBOS_AMOUNT,t=ComboBooster.COMBOS_TIMEOUTS.slice(0,e),s=Game.currentGame.field.addRandomCombo(e,{boosterBefore:!0,timeouts:t});s<e&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTER_COMBO_NO_PLACE,{amount:e-s}),s<=e-ComboBooster.COMBOS_AMOUNT&&this.onGiveUp()},ComboBooster.COMBOS_AMOUNT=5,ComboBooster.COMBOS_TIMEOUTS=[0,120,250,360,500,620,750,860,1e3,1100];var DiceBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_DICE),this.force=Forces.SECOND_BOOSTERS_BEFORE};DiceBooster.prototype=Object.create(BaseBoosterBefore.prototype),(DiceBooster.prototype.constructor=DiceBooster).prototype.giveBonus=function(){Game.currentGame.dice.roll(),Game.currentGame.dice.reward(),this.number=Game.currentGame.dice.number},
DiceBooster.prototype.getBonusDuration=function(){return DiceBooster.BONUS_DURATION+.2*(this.number||6)},DiceBooster.BONUS_DURATION=2.6;var MagnetBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_MAGNET),this.force=Forces.FIRST_BOOSTERS_BEFORE};MagnetBooster.prototype=Object.create(BaseBoosterBefore.prototype),(MagnetBooster.prototype.constructor=MagnetBooster).prototype.giveBonus=function(){var e=Game.currentGame.table.getScreen(),t=cleverapps.Random.shuffle(e.cardsThatCanBeReplacedWithBoosters());if(0!==t.length){var s=t.filter(function(e){return e.isOpen()}),n=0<s.length?s[0]:t[0],i=cleverapps.extend(n.toJSON(),{marks:["magnet"]}),o=CardFactory.Create(i);o.setOwner(n.owner),o.deep=n.deep,o.screenZOrder=n.screenZOrder,e.replaceCard(n,o),e.trigger("replaceCardWithAnother",n,o),n.isOpen()&&o.flip();var a=o.marks[0];a.hide(),e.trigger("demonstrateBoosterBefore",o,function(){a.show(!0)})}else this.onGiveUp()},MagnetBooster.prototype.getBonusDuration=function(){
return MagnetBooster.BONUS_DURATION},MagnetBooster.BONUS_DURATION=2.2;var MovesBooster=function(e){BaseBoosterBefore.call(this,BoostersBefore.TYPE_MOVES),this.force=Forces.SECOND_BOOSTERS_BEFORE,e&&0===e.episodeNo&&e.levelNo<=2&&(this.state=BaseBoosterBefore.DISABLED_STATE)};MovesBooster.prototype=Object.create(BaseBoosterBefore.prototype),(MovesBooster.prototype.constructor=MovesBooster).prototype.giveBonus=function(){var e=0;this.isActivated()&&(e+=MovesBooster.BOUGHT_MOVES_AMOUNT),this.isBonusActivated()&&(e+=MovesBooster.BONUS_MOVES_AMOUNT),Game.currentGame.setMoves(Game.currentGame.moves+e,{animate:!0,boosterBefore:!0}),Game.currentGame.beginMoves+=e},MovesBooster.BONUS_MOVES_AMOUNT=3,MovesBooster.BOUGHT_MOVES_AMOUNT=5;var MultiColorBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_MULTICOLOR),this.force=Forces.THIRD_BOOSTERS_BEFORE};MultiColorBooster.prototype=Object.create(BaseBoosterBefore.prototype),(MultiColorBooster.prototype.constructor=MultiColorBooster
).prototype.giveBonus=function(){var e=this.getActivatedStates().length,t=Game.currentGame.field.addRandomMulticolor(e,{boosterBefore:!0});t<e&&(cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTER_MULTICOLOR_NO_PLACE,{amount:e-t}),this.onGiveUp())};var TwoJokersBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_TWO_JOKERS),this.force=Forces.THIRD_BOOSTERS_BEFORE};TwoJokersBooster.prototype=Object.create(BaseBoosterBefore.prototype),(TwoJokersBooster.prototype.constructor=TwoJokersBooster).prototype.giveBonus=function(){var n=Game.currentGame.table.getScreen(),e=function(e,t){if(e){var s=CardFactory.Create({feature:"wild",x:e.getPositionX(),y:e.getPositionY(),rotation:e.getRotation(),screenZOrder:e.screenZOrder});s.setOwner(e.owner),s.deep=e.deep,n.insertBeforeCard(e,s),n.trigger("insertCard",s,t?-2*cleverapps.styles.CardView.width:2*cleverapps.styles.CardView.width)}},t=n.cardsWithPossibilityOfPlacingUnderThem();e(t.filter(function(e){return e.getPositionX()<0}
).pop(),!0),e(t.filter(function(e){return 0<=e.getPositionX()}).pop(),!1)},TwoJokersBooster.prototype.getBonusDuration=function(){return TwoJokersBooster.BONUS_DURATION},TwoJokersBooster.BONUS_DURATION=1.6;var HighlightBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_HIGHLIGHT),this.force=Forces.FIRST_BOOSTERS_BEFORE};HighlightBooster.prototype=Object.create(BaseBoosterBefore.prototype),(HighlightBooster.prototype.constructor=HighlightBooster).prototype.giveBonus=function(){Game.currentGame.currentHighlighter.enable()};var EyeBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_EYE),this.force=Forces.SECOND_BOOSTERS_BEFORE};EyeBooster.prototype=Object.create(BaseBoosterBefore.prototype),(EyeBooster.prototype.constructor=EyeBooster).prototype.giveBonus=function(){this.trigger("giveBonus")},EyeBooster.prototype.getBonusDuration=function(){return 5};var MagnifierBooster=function(){BaseBoosterBefore.call(this,BoostersBefore.TYPE_HINT),
this.force=Forces.THIRD_BOOSTERS_BEFORE};MagnifierBooster.prototype=Object.create(BaseBoosterBefore.prototype),(MagnifierBooster.prototype.constructor=MagnifierBooster).prototype.giveBonus=function(){Game.currentGame.keypad.addMagnifiers(MagnifierBooster.AMOUNT),Game.currentGame.keypad.magnifiersShowUp()},MagnifierBooster.AMOUNT=5;var BoostersBefore=function(e){var t=(BoostersBefore.instance=this).level=e.level;"solitaire"===cleverapps.config.type?(this.list=[new MagnetBooster,new DiceBooster,new TwoJokersBooster],cleverapps.boostersCounter.onChangeListeners.BoostersBefore=function(){this.list.forEach(function(e){e.onChangeAmountListener()})}.bind(this)):"stacks"===cleverapps.config.subtype?this.list=[new HighlightBooster,new EyeBooster,new MagnifierBooster]:this.list=[new ComboBooster,new MovesBooster(t),new MultiColorBooster];var s=Lantern.GetStreak(this.level);if(0<s){this.lantern=Lantern.Get();for(var n=0;n<s;n++)this.list[n].setBonusState(BaseBoosterBefore.BONUS_LANTERN_STATE)}
for(n=0;n<this.list.length;n++)if(!this.list[n].isAvailable()){this.list[n].setState(BaseBoosterBefore.UPCOMING_STATE);break}};BoostersBefore.prototype.onStart=function(){this.list.forEach(function(e){e.onStart()})},BoostersBefore.prototype.onGiveUp=function(){cleverapps.lives&&this.list.forEach(function(e){e.onGiveUp()})},BoostersBefore.prototype.giveBonus=function(e){var t=this.list.filter(function(e){return 0<e.getActivatedStates().length});"match3"===cleverapps.config.type&&t.reverse();var s=t.map(function(s){return s.getActivatedStates().forEach(function(e){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTERS_EXECUTE+"_"+s.id+"_"+e)}),function(e){s.giveBonus();var t=cleverapps.styles.BoostersBefore.duration;s.getBonusDuration&&(t=s.getBonusDuration()),0===t?e():Game.currentGame.counter.setTimeout(e,1e3*t)}});cleverapps.metha.compound(e,s)},BoostersBefore.prototype.showTutorialStep=function(){var e=this.list.map(function(t){return function(e){t.showTutorialStep(e)}})
;cleverapps.metha.compound(function(){},e)},BoostersBefore.prototype.getActivatedBooster=function(t){var e=this.list.filter(function(e){return e instanceof t})[0];return e&&e.isActivated()?e:void 0},BoostersBefore.GetAppropriateTypes=function(){return"solitaire"===cleverapps.config.type?[BoostersBefore.TYPE_MAGNET,BoostersBefore.TYPE_DICE,BoostersBefore.TYPE_TWO_JOKERS]:"stacks"===cleverapps.config.subtype?[BoostersBefore.TYPE_HIGHLIGHT,BoostersBefore.TYPE_EYE,BoostersBefore.TYPE_HINT]:[BoostersBefore.TYPE_COMBO,BoostersBefore.TYPE_MOVES,BoostersBefore.TYPE_MULTICOLOR]},BoostersBefore.isAvailable=function(e){return cleverapps.user.checkAvailable(BoostersBefore.AVAILABLE,e)},BoostersBefore.AVAILABLE={episode:0,level:4,projectName:["riddles","heroes","tripeaks","scramble","adventure","runes"]},cleverapps.styles.BoostersBefore={duration:.3},BoostersBefore.TYPE_COMBO=5,BoostersBefore.TYPE_MOVES=6,BoostersBefore.TYPE_MULTICOLOR=7,BoostersBefore.TYPE_MAGNET=10,BoostersBefore.TYPE_DICE=11,
BoostersBefore.TYPE_TWO_JOKERS=12,BoostersBefore.TYPE_HIGHLIGHT=13,BoostersBefore.TYPE_EYE=14,BoostersBefore.TYPE_HINT=15;var BoostersBeforeConfig={};BoostersBeforeConfig[BoostersBefore.TYPE_COMBO]={icon:bundles.reward_icons.frames.heroes_png,available:{episode:0,level:13}},BoostersBeforeConfig[BoostersBefore.TYPE_MOVES]={icon:bundles.reward_icons.frames.moves_png,available:{episode:1,level:3}},BoostersBeforeConfig[BoostersBefore.TYPE_MULTICOLOR]={icon:bundles.reward_icons.frames.multicolor_png,available:{episode:1,level:7}},BoostersBeforeConfig[BoostersBefore.TYPE_MAGNET]={icon:bundles.reward_icons.frames.magnet_png,available:{episode:0,level:14}},BoostersBeforeConfig[BoostersBefore.TYPE_DICE]={icon:bundles.reward_icons.frames.dice_png,available:{episode:1,level:3}},BoostersBeforeConfig[BoostersBefore.TYPE_TWO_JOKERS]={icon:bundles.reward_icons.frames.joker_png,available:{episode:1,level:7}},BoostersBeforeConfig[BoostersBefore.TYPE_HIGHLIGHT]={
icon:bundles.reward_icons.frames.highlight,available:{episode:0,level:10}},BoostersBeforeConfig[BoostersBefore.TYPE_EYE]={icon:bundles.reward_icons.frames.eye,available:{episode:1,level:3}},BoostersBeforeConfig[BoostersBefore.TYPE_HINT]={icon:bundles.reward_icons.frames.hint,available:{episode:1,level:7}};var BoosterBeforeAmountView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint(.5,.5),this.setCascadeOpacityEnabled(!0),this.booster=e,this.bg=new cc.Sprite(bundles.boosters_before.frames.booster_before_purple_button_png),this.addChild(this.bg),this.booster.isDisabled()&&this.booster.getAmount()>cleverapps.BoostersCounter.INIT_AMOUNT&&cleverapps.UI.convertToGrayScale(this.bg),this.amount=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.BOOSTER_BEFORE_AMOUNT_TEXT),this.addChild(this.amount),this.icon=new cc.Sprite(bundles.boosters_before.frames.booster_before_plus_icon_png),this.addChild(this.icon),this.update()},showAds:function(){this.bg.visible=!1,
this.icon.setSpriteFrame(bundles.shared.frames.adicon_bubble_png)},showActivated:function(){this.amount.visible=!1,this.icon.visible=!0,this.icon.setSpriteFrame(bundles.boosters_before.frames.booster_before_check_icon_png),this.bg.setSpriteFrame(bundles.boosters_before.frames.booster_before_green_button_png),this.bg.visible=!0},showAmount:function(){var e=cleverapps.styles.BoosterBeforeAmountView;this.amount.visible=!1,this.icon.visible=!1,this.bg.visible=!0,this.icon.setSpriteFrame(bundles.boosters_before.frames.booster_before_plus_icon_png),this.bg.setSpriteFrame(bundles.boosters_before.frames.booster_before_purple_button_png),0<this.booster.getAmount()?(this.amount.visible=!0,this.amount.setString(this.booster.getAmount()),this.amount.fitTo(e.amount.width)):this.icon.visible=!0},update:function(){this.booster.state===BaseBoosterBefore.ADS_STATE?this.showAds():this.booster.isActivated()?this.showActivated():this.showAmount(),this.visible=!this.booster.isDisabled(
)||this.booster.getAmount()>cleverapps.BoostersCounter.INIT_AMOUNT;var e=cleverapps.styles.BoosterBeforeAmountView;this.setContentSize2(Math.max(this.bg.width*this.bg.scale,this.amount.width*this.amount.scale),Math.max(this.bg.height*this.bg.scale,this.amount.height*this.amount.scale)),this.amount.setPositionRound(e.amount),this.bg.setPositionRound(this.width/2,this.height/2),this.icon.setPositionRound(e.icon)}});cleverapps.styles.BoosterBeforeAmountView={amount:{x:{align:"center",dx:0},y:{align:"center",dy:4},width:55},icon:{x:{align:"center"},y:{align:"center"}}};var BoosterBeforeBonusView=cc.Sprite.extend({ctor:function(e){this._super(bundles.boosters_before.frames.booster_before_green_button_png),this.booster=e,this.icon=new cc.Sprite(bundles.boosters_before.frames.booster_before_lantern_icon_png),this.icon.setPositionRound(this.width/2,this.height/2),this.addChild(this.icon)},lanternAnimation:function(){this.scale=0,this.runAction(new cc.Sequence(new cc.DelayTime(1.1),
new cc.ScaleTo(.2,1,1)))}}),BoosterBeforeView=cc.Scale9Sprite.extend({ctor:function(e,t){var s=cleverapps.styles.BoosterBeforeView;this._super(bundles.boosters_before.frames.booster_before_bg_png),this.setContentSize2(s),this.booster=e;var n=s.icon[e.id]?s.icon[e.id].dy:s.icon.dy,i=this.icon=new cc.Sprite(this.getIconImage());if(i.scale=i.baseScale=1,i.setPositionRound(this.width/2,this.height/2+n),this.addChild(i),this.textAvailable=cleverapps.UI.generateTTFText(Messages.get("UnlockOnLevel",{level:cleverapps.humanReadableNumber(BoostersBeforeConfig[this.booster.id].available.episode,BoostersBeforeConfig[this.booster.id].available.level)}),cleverapps.styles.FONTS.BOOSTERS_BEFORE_UNLOCK||cleverapps.styles.FONTS.WINDOW_SMALL_TEXT),this.addChild(this.textAvailable,1),this.textAvailable.setPositionRound(s.textAvailable),this.textAvailable.fitTo(s.textAvailable.width),s.textAvailable.bg){var o=bundles.boosters_before.frames.booster_before_level_bg;t.isHard(
)&&bundles.boosters_before.frames.booster_before_level_bg_hard&&(o=bundles.boosters_before.frames.booster_before_level_bg_hard),t.isTricky()&&bundles.boosters_before.frames.booster_before_level_bg_tricky&&(o=bundles.boosters_before.frames.booster_before_level_bg_tricky),this.textAvailableBg=cleverapps.UI.createScale9Sprite(o,s.textAvailable.bg.rect),this.addChild(this.textAvailableBg),this.textAvailableBg.setContentSize2(s.textAvailable.bg),this.textAvailableBg.setPositionRound(s.textAvailable.bg)}if(e.state===BaseBoosterBefore.UPCOMING_STATE&&(cleverapps.UI.convertToGrayScale(i),void 0!==cleverapps.styles.BoosterBeforeView.disabled[e.id]&&(i.opacity*=cleverapps.styles.BoosterBeforeView.disabled[e.id].opacity)),e.bonusState===BaseBoosterBefore.BONUS_LANTERN_STATE){var a=new BoosterBeforeBonusView(e);a.setPositionRound(s.bonus),this.addChild(a),a.lanternAnimation()}-1===[BaseBoosterBefore.UPCOMING_STATE,BaseBoosterBefore.DISABLED_STATE].indexOf(e.state)&&(
this.amount=new BoosterBeforeAmountView(e),this.amount.setPositionRound(s.amount),this.addChild(this.amount));var r=cleverapps.overrideStyles(cleverapps.styles.CoinsPriceView,s.price.styles,!0);if(this.price=new CoinsPriceView(e.price,{styles:r,font:cleverapps.styles.FONTS.BOOSTER_BEFORE_COINS_PRICE_TEXT}),this.price.setPositionRound(s.price),this.addChild(this.price),e.on("update",this.createListener(this.update.bind(this))),e.on("showForce",this.createListener(this.showForce.bind(this))),this.update(),e.isAvailable())cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,this.onClick.bind(this));else BoostersBeforeConfig[e.id].available;this.booster.onChangeAmountListener=this.createListener(this.update.bind(this))},onClick:function(){var e=this.booster.isActivated()?bundles.main.urls.booster_before_cancel_effect:bundles.main.urls.booster_before_selection_effect;cleverapps.audio.playSound(e),this.booster.onClick(),this.icon.stopAllActions(),this.icon.setScale(
.95*this.icon.baseScale),this.icon.runAction(new cc.ScaleTo(.15,this.icon.baseScale).easing(cc.easeBackInOut()))},update:function(){var e=bundles.boosters_before.frames.booster_before_bg_png;this.booster.isDisabled()?e=bundles.boosters_before.frames.booster_before_bg_off_png:this.booster.isActivated()&&(e=bundles.boosters_before.frames.booster_before_bg_on_png),this.setSpriteFrame(cc.spriteFrameCache.getSpriteFrame(e)),this.icon.setSpriteFrame(this.getIconImage()),cleverapps.UI.convertToGrayScale(this.icon,this.booster.state!==BaseBoosterBefore.UPCOMING_STATE),this.textAvailable.setVisible(this.booster.state===BaseBoosterBefore.UPCOMING_STATE),this.textAvailableBg&&this.textAvailableBg.setVisible(this.booster.state===BaseBoosterBefore.UPCOMING_STATE),this.amount&&this.amount.update(),this.price.visible=this.booster.state===BaseBoosterBefore.ACTIVE_STATE&&this.booster.getAmount()<=0||this.booster.state===BaseBoosterBefore.ADS_STATE,
this.booster.state===BaseBoosterBefore.ADS_STATE?this.price.switchToFreePrice():this.price.switchToRegularPrice(),this.booster.state===BaseBoosterBefore.USE_STATE&&Messages.has("BoosterBeforeUse_"+this.booster.id)&&cleverapps.Notification.create("messages:BoosterBeforeUse_"+this.booster.id,{image:new cc.Sprite(BoostersBeforeConfig[this.booster.id].icon)})},getIconImage:function(){return this.booster.state===BaseBoosterBefore.DISABLED_STATE?bundles.boosters_before.frames.booster_before_lock_png:BoostersBeforeConfig[this.booster.id].icon},showForce:function(e){var t=this.booster.force;cleverapps.forces.isAvailable(this,t)?(cleverapps.forces.create(this,t),cleverapps.forces.onceForceClosed=e,this.update()):e()}});cleverapps.styles.BoosterBeforeView={width:186,height:186,bonus:{x:{align:"left",dx:0},y:{align:"bottom",dy:-18}},amount:{x:{align:"right",dx:18},y:{align:"bottom",dy:-18}},price:{x:{align:"center",dx:0},y:{align:"top",dy:5},styles:{icon:{scale:.6},bg:{
image:bundles.boosters_before.frames.booster_before_price_bg_png,padding:{x:20,y:8},dx:4,dy:-2},margin:3}},textAvailable:{x:{align:"center"},y:{align:"top",dy:40},width:250},disabled:{},icon:{dy:0}},cleverapps.styles.BoosterBeforeView.disabled[BoostersBefore.TYPE_DICE]={opacity:.8};var BoostersBeforeComponent=function(t){var e=cleverapps.styles.BoostersBeforeComponent,s=cleverapps.UI.generateTTFText("messages:BoostersBeforeComponent.Title",cleverapps.styles.FONTS.BOOSTERS_BEFORE_TEXT||cleverapps.styles.FONTS.WINDOW_BIG_TEXT),n=t.list.map(function(e){return new BoosterBeforeView(e,t.level)}.bind(this)),i=new cleverapps.Layout(n,{margin:e.margin,direction:cleverapps.UI.HORIZONTAL});n.forEach(function(e,t){e.setVisible(!1),e.runAction(new cc.Sequence(new cc.DelayTime(.2+.2*t),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.boosters_before.urls.appear_sfx,{throttle:0}),e.setScale(.5),e.setVisible(!0)}),new cc.ScaleTo(.4,1,1).easing(cc.easeBackOut(2))))})
;var o=new cleverapps.Layout([i,s],{margin:e.contentMargin||e.margin,direction:cleverapps.UI.VERTICAL});if(o.height+=2*e.margin,t.lantern){var a=new LanternView(t.lantern,o);o.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.CallFunc(function(){a.show()}),new cc.DelayTime(.2),new cc.CallFunc(function(){a.replaceParentSamePlace(cleverapps.windows.currentWindow()),a.setLocalZOrder(20)}),new cc.DelayTime(.6),new cc.CallFunc(function(){t.lantern.onGiveBonusListener()}.bind(this))))}return o};cleverapps.styles.BoostersBeforeComponent={margin:15};var BoostersBeforeHelper={animateAppear:function(e,t,s){if(s=cleverapps.once(s||function(){}),e&&e.parent&&t.target&&t.target.parent){var n=t.target,i=cc.director.getRunningScene();e.setPosition(e.getParent().convertToNodeSpace(n.getParent().convertToWorldSpace(n.getPosition()))),e.replaceParentSamePlace(i),e.setLocalZOrder(10),e.setScale(2),e.runAction(new cc.Sequence(new cc.ScaleTo(.5,t.scale).easing(cc.easeBackOut()),new cc.CallFunc(
function(){cleverapps.audio.playSound(bundles.main.urls.collect_coins_effect),!1!==t.remove&&e.parent&&e.removeFromParent(!0)}))),e.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.CallFunc(s))),BoostersBeforeHelper.animateStars(e)}else s()},animateStars:function(e){var t=new cleverapps.Spine(bundles.game.jsons.boosters_before_json);t.setAnimation(0,"animation",!1),t.setPositionRound(e.x,e.y),e.parent.addChild(t),t.setLocalZOrder(e.getLocalZOrder()-1),t.setTimeScale(1.3),t.runAction(new cc.Sequence(new cc.DelayTime(1.3),new cc.RemoveSelf))}},EyeBoosterView=cc.Node.extend({ctor:function(e,t){this._super(),this.booster=e,this.boardView=t,this.board=this.boardView.board,this.setAnchorPoint2(),this.booster.on("giveBonus",this.giveBonus.bind(this)),cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(EyeBoosterView.ANIMATION_TIME_SCALE=.6,EyeBoosterView.SINGLE_PASS_TIME=2.25)},giveBonus:function(){this.boardView.toggleElements(!1);var e=cc.director.getRunningScene().scene,
t=new cleverapps.Spine(bundles.game.jsons.eye_booster_json);e.addChild(t),t.setLocalZOrder(110),t.setPositionRound(e.width/2,e.height/2),t.setAnimation(0,"show",!1),t.setCompleteListener(function(){t.setAnimation(0,"activate",!1),t.setCompleteListenerRemove(),t.setTimeScale(EyeBoosterView.ANIMATION_TIME_SCALE);var i=[];this.boardView.placeholders.forEach(function(e,n){e.forEach(function(e,t){if(!this.board.foundWordsSet[this.board.words[n]]){var s=this.boardView.createLetter(this.board.words[n][t].toUpperCase());this.boardView.letterGrid.addChild(s),s.setPositionRound(e.x,e.y+cleverapps.styles.BoardView.Letter.paddingBottom),i.push(s)}}.bind(this))}.bind(this)),i.sort(function(e,t){return e.x-t.x}),this.audio=cleverapps.audio.playSound(bundles.game.urls.eye_booster_effect,{loop:!0}),this.runPass(i,0)}.bind(this)),cleverapps.audio.playSound(bundles.game.urls.eye_booster_start_effect)},runPass:function(e,i){if(i===EyeBoosterView.PASSES_COUNT)return cleverapps.audio.stopSound(this.audio),
void this.onAllPassesFinished(e);var t=cleverapps.styles.EyeBoosterView,o=t.MIN_OPACITY_OFFSET,a=t.MAX_OPACITY_OFFSET,r=e[0].x-o,l=e[e.length-1].x+o,c=l-r,p=cleverapps.wait(e.length,this.runPass.bind(this,e,i+1));e.forEach(function(e){var t,s=((t=i%2==0?e.x:l-e.x)-o-r)/c*EyeBoosterView.SINGLE_PASS_TIME,n=(t-a-r)/c*EyeBoosterView.SINGLE_PASS_TIME-s;e.setOpacity(0),e.runAction(new cc.Sequence(new cc.DelayTime(s),new cc.FadeIn(n),new cc.FadeOut(n),new cc.CallFunc(p)))})},onAllPassesFinished:function(e){e.forEach(function(e){e.removeFromParent()}),this.boardView.showUpAnimation(void 0,{onlyElements:!0})}});EyeBoosterView.ANIMATION_TIME_SCALE=.8,EyeBoosterView.SINGLE_PASS_TIME=1.8,EyeBoosterView.PASSES_COUNT=2,cleverapps.styles.EyeBoosterView={MIN_OPACITY_OFFSET:300,MAX_OPACITY_OFFSET:100};var Rocket=cc.Node.extend({ctor:function(e,t,s){this._super(),this.startCell=e,this.targetCell=t,this.addChild(s.rocket),this.setVisible(!1);var n=0;s.startDX&&(n+=s.startDX),
cleverapps.styles.Rocket.startDX&&(n+=cleverapps.styles.Rocket.startDX);var i=0;s.startDY&&(i+=s.startDY),cleverapps.styles.Rocket.startDY&&(i+=cleverapps.styles.Rocket.startDY),this.setPositionRound(BaseCellView.alignInTheGrid(e.x,e.y)),this.setPosition(this.getPosition().x+n,this.getPosition().y+i),this.aim(s)},aim:function(e){this.targetPos=BaseCellView.alignInTheGrid(this.targetCell.x,this.targetCell.y),this.prevPos=this.getPosition(),this.scheduleUpdate(),this.animateFly(e)},animateFly:function(e){var t=cleverapps.styles.Rocket,s=this.getPosition(),n=BaseCellView.alignInTheGrid(this.targetCell.x,this.targetCell.y),i=cc.p(s.x,Math.max(s.y,n.y)+t.flyUp),o=cc.p(n.x,i.y),a=this.targetCell.y-this.startCell.y;if(this.targetCell.y>this.startCell.y&&Math.abs(this.targetCell.x-this.startCell.x)<=1){var r=Math.abs(a)*cleverapps.styles.BaseCellView.CELL_SIZE_PX;this.startCell.x<Field.SIZE/2?o.x+=r:o.x-=r}else if(this.startCell.x===this.targetCell.x&&this.startCell.y>this.targetCell.y){
r=Math.abs(a)*cleverapps.styles.BaseCellView.CELL_SIZE_PX;i.y-=r/2,this.startCell.x<Field.SIZE/2?i.x+=r/2:i.x-=r/2,o=cc.p(i.x,n.y+cleverapps.styles.BaseCellView.CELL_SIZE_PX)}this.runAction(new cc.Sequence(new cc.DelayTime(e.delay),new cc.CallFunc(function(){this.setVisible(!0),e.onLaunch()}.bind(this)),new cc.BezierTo(e.duration,[i,o,n]).easing(cc.easeIn(1)),new cc.CallFunc(function(){this.unscheduleUpdate(),e.onArrive(function(){this.runAction(new cc.RemoveSelf)}.bind(this))}.bind(this))))},update:function(e){this._super(e),this.setRotation(180*Math.atan2(this.x-this.prevPos.x,this.y-this.prevPos.y)/Math.PI),this.prevPos=this.getPosition()}});cleverapps.styles.Rocket={flyUp:150};var Map2d=function(e,t){cleverapps.EventEmitter.call(this),t=t||{},this.visibleBox=t.visibleBox||Map2d.VISIBLE_BOX,this.waterBorder=void 0!==t.waterBorder?t.waterBorder:Map2d.WATER_BORDER,this.regions=t.regions||{},this.decorators=new Map2dDecorators(t.decorators||[]),this.terrains=(t.terrains||[]).map(
function(e){return e.split("")}),this.visibleBox.cutLeft||this.visibleBox.cutRight||(this.visibleBox.cutLeft=this.visibleBox.cutRight=(1-this.visibleBox.width)/2),e=e.map(function(e){return"string"==typeof e&&(e=e.split("").map(cleverapps.castType)),e}),this.width=e[0].length,this.height=e.length;var s=this.map(e,function(e){return e===Map2d.TILE_WATER||e===Map2d.TILE_WATER_UNIT?e:void 0}),n=this.map(e,function(e){return e===Map2d.TILE_WATER||e===Map2d.TILE_WATER_UNIT?Map2d.TILE_BORDER:void 0}),i=this.map(e,function(e){return e===Map2d.TILE_WATER||e===Map2d.TILE_WATER_UNIT?void 0:e}),o=this.map(e,function(){}),a=this.map(e,function(){});this.layers=[s,n,i,o,a],this.onAdd=function(){},this.onAnimationsAdd=function(){},this.onMove=function(){},this.onFogOpen=function(){},this.onCenterTo=function(e,t,s){},this.onAddTarget=function(e,t){},this.onDiscoverView=function(){},this.onZoomTo=function(e,t){},this.pointer={x:0,y:0},this.constructTerrains(),this.constructGrowth()}
;Map2d.prototype=Object.create(cleverapps.EventEmitter.prototype),(Map2d.prototype.constructor=Map2d).TILE_WATER=0,Map2d.TILE_GREEN_LEVEL_1=1,Map2d.TILE_GREEN_LEVEL_2=2,Map2d.TILE_WATER_UNIT=9,Map2d.TILE_GROW=10,Map2d.TILE_BORDER=11,Map2d.LAYER_WATER=0,Map2d.LAYER_BORDERS=1,Map2d.LAYER_GROUND=2,Map2d.LAYER_UNITS=3,Map2d.LAYER_FOG=4;var Iso={SAME:{x:0,y:0},UP_LEFT:{y:-1,x:0},UP_RIGHT:{y:0,x:1},UP_ABOVE:{y:-1,x:1},DOWN_LEFT:{y:0,x:-1},DOWN_RIGHT:{y:1,x:0},DOWN_BELOW:{y:1,x:-1},HORIZONTAL_LEFT:{y:-1,x:-1},HORIZONTAL_RIGHT:{y:1,x:1}},ISO_NEIGHBORS=[Iso.DOWN_LEFT,Iso.DOWN_RIGHT,Iso.UP_LEFT,Iso.UP_RIGHT];Map2d.prototype.getView=function(){return this.onDiscoverView()},Map2d.prototype.stop=function(){this.listAvailableUnits().forEach(function(e){e.clear()}),this.trigger("stop")},Map2d.prototype.setPointer=function(e,t){this.pointer.x=e,this.pointer.y=t},Map2d.prototype.isHiddenCorner=function(e,t){var s=this.width+this.height;return e+t<=s/2-s*(.5-this.visibleBox.cutLeft
)-this.waterBorder||e+t>=s/2+s*(.5-this.visibleBox.cutRight)+this.waterBorder||e-t>=this.width-1-s*(1-this.visibleBox.height)/2+this.waterBorder||e-t<=1-this.height+s*(1-this.visibleBox.height)/2-this.waterBorder},Map2d.prototype.map=function(e,n){return e.map(function(e,s){return e.map(function(e,t){if(!this.isHiddenCorner(t,s))return n(e)},this)},this)},Map2d.prototype.getGround=function(e){return this.layers[Map2d.LAYER_GROUND][this.pointer.y+e.y]&&this.layers[Map2d.LAYER_GROUND][this.pointer.y+e.y][this.pointer.x+e.x]},Map2d.prototype.getTerrain=function(e,t){return void 0===e&&(e=this.pointer.x),void 0===t&&(t=this.pointer.y),this.terrains[t]&&this.terrains[t][e]||Map2d.TERRAIN_GREEN},Map2d.prototype.setTerrain=function(e,t,s){this.terrains[t][e]=s},Map2d.prototype.getTerrainFrames=function(e,t){return"object"==typeof e&&void 0===t&&(t=this.pointer.y+e.y,e=this.pointer.x+e.x),(Map2d.TERRAIN_BUNDLES[this.getTerrain(e,t)]||bundles.tiles_green).frames},
Map2d.prototype.setValue=function(e,t,s){this.layers[e][this.pointer.y+t.y][this.pointer.x+t.x]=s,this.trigger("setValue",e,this.pointer.x+t.x,this.pointer.y+t.y)},Map2d.prototype.add=function(e,t,s,n){if(this.layers[e][s][t]=n,e===Map2d.LAYER_UNITS&&n)for(var i=-1;i<=1;i++)for(var o=-1;o<=1;o++)if((i||o)&&this.getUnit(t+i,s+o)===n){var a={p1:cc.p(t,s),p2:cc.p(t+i,s+o)};cleverapps.throwAsync("one unit in two cells "+n.code+"_"+n.stage+" - "+JSON.stringify(a))}},Map2d.prototype.setUnit=function(e,t,s){this.add(Map2d.LAYER_UNITS,e,t,s)},Map2d.prototype.getFog=function(e,t){return this.layers[Map2d.LAYER_FOG][t]&&this.layers[Map2d.LAYER_FOG][t][e]},Map2d.prototype.getDecoratorUnit=function(e,t){return this.layers[Map2d.LAYER_UNITS][t]&&this.layers[Map2d.LAYER_UNITS][t][e]&&"decorator"===this.layers[Map2d.LAYER_UNITS][t][e].getType()},Map2d.prototype.remove=function(e,t,s){this.layers[e][s][t]=void 0},Map2d.prototype.isWater=function(e){
return this.layers[Map2d.LAYER_WATER][this.pointer.y+e.y]&&-1!==[Map2d.TILE_WATER,Map2d.TILE_WATER_UNIT].indexOf(this.layers[Map2d.LAYER_WATER][this.pointer.y+e.y][this.pointer.x+e.x])},Map2d.prototype.isWaterUnit=function(e,t){return this.layers[Map2d.LAYER_WATER][t]&&this.layers[Map2d.LAYER_WATER][t][e]===Map2d.TILE_WATER_UNIT},Map2d.prototype.isGround=function(e,t){return"object"==typeof e&&e.direction&&(t=this.pointer.y+e.y,e=this.pointer.x+e.x),this.layers[Map2d.LAYER_GROUND][t]&&-1!==[Map2d.TILE_GREEN_LEVEL_1,Map2d.TILE_GREEN_LEVEL_2].indexOf(this.layers[Map2d.LAYER_GROUND][t][e])},Map2d.prototype.getUnit=function(e,t){return this.layers[Map2d.LAYER_UNITS][t]&&this.layers[Map2d.LAYER_UNITS][t][e]},Map2d.prototype.getUnitWithHead=function(e,t){var s=this.getUnit(e,t);return s&&s.head?s.head:s},Map2d.prototype.bfs=function(e,t,s){var n=ISO_NEIGHBORS,i=[{x:e,y:t}],o={};o[e+t*this.getWidth()]=!0;for(var a=0;a<i.length;)for(var r=i[a++],l=0;l<n.length;l++){var c=r.x+n[l].x,
p=r.y+n[l].y;o[c+p*this.getWidth()]||this.isGround(c,p)&&!this.getFog(c,p)&&this.getUnit(c,p)&&this.getUnit(c,p).isMergeable(s)&&(o[c+p*this.getWidth()]=!0,i.push({x:c,y:p}))}return i},Map2d.prototype.setScreenRect=function(e){this.screenRect=e},Map2d.prototype.getScreenCenterCell=function(){if(this.screenRect)return cc.isoRectGetCenter(this.screenRect)},Map2d.prototype.getMapCenterCell=function(){return cc.p(Math.round(this.width/2),Math.round(this.height/2))},Map2d.prototype.listAvailableGrounds=function(){for(var s=[],e=function(e,t){this.isGround(e,t)&&!this.getFog(e,t)&&s.push(cc.p(e,t))}.bind(this),t=0;t<this.getHeight();t++)for(var n=0;n<this.getWidth();n++)e(n,t);return s},Map2d.prototype.listAvailableUnits=function(s){var n=[];return this.listAvailableGrounds().forEach(function(e){var t=this.getUnit(e.x,e.y);t&&Unit.IsApplicable(s,t)&&n.push(t)},this),n},Map2d.prototype.listUnitsFromPointByCircle=function(e,t){var s=[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],n=[],
i=function(e,t){var s=this.getUnit(e,t);s&&this.isGround(e,t)&&!this.getFog(e,t)&&n.push(s)}.bind(this);i(e,t);for(var o=1;o<10;++o){t+=1;for(var a=0;a<4;++a)for(var r=0;r<o;++r)i(e,t),e+=s[a].x,t+=s[a].y}return n},Map2d.prototype.isEmpty=function(e,t){return this.isGround(e,t)&&!this.getUnit(e,t)&&!this.getFog(e,t)},Map2d.prototype.countEmptySlots=function(){for(var e=0,t=0;t<this.getHeight();t++)for(var s=0;s<this.getWidth();s++)this.isEmpty(s,t)&&e++;return e},Map2d.prototype.findEmptySlot=function(e,t,i,s,n){var o=ISO_NEIGHBORS,a=function(e,t){for(var s=0;s<o.length;s++){var n=this.getUnit(e+o[s].x,t+o[s].y);if(n&&i.isMergeable(n)&&!this.getFog(e+o[s].x,t+o[s].y))return!0}}.bind(this);i&&!i.getData().unmergeable||(a=function(){return!0}),cleverapps.Random.shuffle(o);for(var r,l,c,p=!s||void 0===s.skipCheckScreen||!s.skipCheckScreen,d=s&&void 0!==s.radius?s.radius:Map2d.RADIUS_FULL,u=0;u<100&&(p||!r)&&(u<=d||!r);u++){for(var h=!1,g=0;g<=u;g++)for(var v=0;v<2;v++){var m=g;if(0<v){if(
0===g)continue;m=-g}for(var f=0;f<o.length;f++){var _=e+(0===o[f].x?m:o[f].x*u),y=t+(0===o[f].y?m:o[f].y*u),b=!1;p&&(b=this.isScreenCell(_,y),h=h||b);var w=a(_,y);if(!(n&&0<n.filter(function(e){return e.x===_&&e.y===y}).length)&&this.isEmpty(_,y)){var T=cc.p(_,y);if(r=r||T,b&&(l=l||T,w))return T;w&&(c=c||T)}}}p=h}return l||c||r},Map2d.prototype.isScreenCell=function(e,t){return cc.isoRectContainsPoint(this.screenRect,e,t)},Map2d.prototype.constructTerrains=function(){for(var e=0;e<this.getHeight();e++){this.terrains.length<=e&&this.terrains.push([]);for(var t=0;t<this.getWidth();t++)this.terrains[e].length<=t&&this.terrains[e].push(Map2d.TERRAIN_EMPTY),this.terrains[e][t]===Map2d.TERRAIN_EMPTY&&this.isGround(t,e)&&(this.terrains[e][t]=Map2d.TERRAIN_GREEN)}},Map2d.prototype.constructGrowth=function(e,t){if(void 0!==e)this.setPointer(e,t),this.getGround(Iso.SAME)===Map2d.TILE_GREEN_LEVEL_2&&(this.getGround(Iso.DOWN_LEFT)===Map2d.TILE_GREEN_LEVEL_1&&this.setValue(Map2d.LAYER_GROUND,
Iso.DOWN_LEFT,Map2d.TILE_GROW),this.getGround(Iso.DOWN_RIGHT)===Map2d.TILE_GREEN_LEVEL_1&&this.setValue(Map2d.LAYER_GROUND,Iso.DOWN_RIGHT,Map2d.TILE_GROW),this.getGround(Iso.DOWN_BELOW)===Map2d.TILE_GREEN_LEVEL_1&&this.setValue(Map2d.LAYER_GROUND,Iso.DOWN_BELOW,Map2d.TILE_GROW));else for(t=0;t<this.getHeight();t++)for(e=0;e<this.getWidth();e++)this.constructGrowth(e,t)},Map2d.prototype.getWidth=function(){return this.width},Map2d.prototype.getHeight=function(){return this.height},Map2d.prototype.setDragging=function(e){this.dragging=e,this.trigger("changeDragging",e)},Map2d.prototype.showMergeBonus=function(e){this.trigger("showMergeBonus",e)},Map2d.prototype.findPath=function(e,t){var n=[{x:e.x,y:e.y,vertical:!0}],i={};i[e.x+e.y*this.getWidth()]=!0;for(var s=0,o=function(e){for(var t=[];e;)t.push(cc.p(e.x,e.y)),e=e.prevStep;return t.reverse()};s<n.length;){var a=n[s++];if(cc.pointEqualToPoint(a,t))return o(a);(a.vertical?[Iso.DOWN_RIGHT,Iso.UP_LEFT,Iso.UP_RIGHT,Iso.DOWN_LEFT]:[
Iso.UP_RIGHT,Iso.DOWN_LEFT,Iso.DOWN_RIGHT,Iso.UP_LEFT]).forEach(function(e){var t=a.x+e.x,s=a.y+e.y;this.isGround(t,s)&&!i[t+s*this.getWidth()]&&void 0===this.getUnit(t,s)&&(i[t+s*this.getWidth()]=!0,n.push({x:t,y:s,vertical:0===e.x,prevStep:a}))}.bind(this))}},Object.keys(Iso).forEach(function(e){Iso[e].direction=!0}),Map2d.RADIUS_SMALL=3,Map2d.RADIUS_BIG=5,Map2d.RADIUS_FULL=9,Map2d.VISIBLE_BOX={width:.5,height:.5},Map2d.WATER_BORDER=10,Map2d.TERRAIN_EMPTY=".",Map2d.TERRAIN_GREEN="g",Map2d.TERRAINS={g:"green",i:"ice",p:"purple",s:"sand",b:"blue"},Map2d.TERRAIN_BUNDLES={},Object.keys(Map2d.TERRAINS).forEach(function(e){var s=Map2d.TERRAINS[e],n=bundles["tiles_"+s]||bundles.tiles_green;n?(Map2d.TERRAIN_BUNDLES[e]=n)===bundles["tiles_"+s]&&Object.keys(n.frames).forEach(function(e){var t=e.replace("_"+s,"");n.frames[e]&&!n.frames[t]&&(n.frames[t]=n.frames[e])}):delete Map2d.TERRAINS[e]});var ViewReader={calcGrowType:function(e){var t=e.getTerrainFrames();return e.getGround(Iso.UP_LEFT
)!==Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.UP_RIGHT)!==Map2d.TILE_GREEN_LEVEL_2?t.grow12_corner:e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.UP_RIGHT)===Map2d.TILE_GREEN_LEVEL_2?t.grow12_both:e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_2?t.grow12_left:t.grow12_right},calcBorderTypeUp:function(e){return e.getGround(Iso.UP_ABOVE)===Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.UP_LEFT)!==Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.UP_RIGHT)!==Map2d.TILE_GREEN_LEVEL_2?e.getTerrainFrames(Iso.UP_ABOVE).level2_up_corner:e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.UP_RIGHT)===Map2d.TILE_GREEN_LEVEL_2?e.getTerrainFrames(Iso.UP_RIGHT).level2_up_both:e.isWater(Iso.UP_LEFT)&&e.isWater(Iso.UP_RIGHT)&&e.getGround(Iso.UP_ABOVE)===Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.UP_ABOVE).level1_up_corner:e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_1&&e.getGround(Iso.UP_RIGHT)===Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.UP_RIGHT
).level1_up_both:void 0},calcBorderTypeDown:function(e){return e.getGround(Iso.DOWN_RIGHT)===Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.DOWN_LEFT)===Map2d.TILE_GREEN_LEVEL_2||e.getGround(Iso.DOWN_RIGHT)===Map2d.TILE_GREEN_LEVEL_1&&e.getGround(Iso.DOWN_LEFT)===Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.DOWN_RIGHT).level1_down_both:e.isWater(Iso.DOWN_LEFT)&&e.isWater(Iso.DOWN_RIGHT)&&e.isGround(Iso.DOWN_BELOW)?e.getTerrainFrames(Iso.DOWN_BELOW).level1_down_corner:e.getGround(Iso.DOWN_LEFT)===Map2d.TILE_GREEN_LEVEL_2?e.getTerrainFrames(Iso.DOWN_LEFT).level1_down_left_only:e.getGround(Iso.DOWN_LEFT)===Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.DOWN_LEFT).level1_down_left_only:e.getGround(Iso.DOWN_RIGHT)===Map2d.TILE_GREEN_LEVEL_2?e.getTerrainFrames(Iso.DOWN_RIGHT).level1_down_right_only:e.getGround(Iso.DOWN_RIGHT)===Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.DOWN_RIGHT).level1_down_right_only:void 0},calcBorderTypeLeft:function(e){return e.getGround(Iso.DOWN_LEFT
)===Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_2?e.getGround(Iso.UP_ABOVE)!==Map2d.TILE_GREEN_LEVEL_2?e.getTerrainFrames(Iso.DOWN_LEFT).level2_left_inner_last:e.getTerrainFrames(Iso.DOWN_LEFT).level2_left_inner:e.getGround(Iso.DOWN_LEFT)===Map2d.TILE_GREEN_LEVEL_1&&e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_1?e.getGround(Iso.UP_ABOVE)!==Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.DOWN_LEFT).level1_left_inner_last:e.getTerrainFrames(Iso.DOWN_LEFT).level1_left_inner:e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_2?e.isWater(Iso.UP_ABOVE)?e.getTerrainFrames(Iso.UP_LEFT).level2_up_left_only_last:e.getTerrainFrames(Iso.UP_LEFT).level2_up_left_only:e.getGround(Iso.UP_LEFT)===Map2d.TILE_GREEN_LEVEL_1?e.getGround(Iso.UP_ABOVE)!==Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.UP_LEFT).level1_up_left_only_last:e.getTerrainFrames(Iso.UP_LEFT).level1_up_left_only:e.isWater(Iso.DOWN_LEFT)&&e.isWater(Iso.UP_LEFT)&&e.isGround(Iso.HORIZONTAL_LEFT
)?e.getTerrainFrames(Iso.HORIZONTAL_LEFT).level1_left_corner:void 0},calcBorderTypeRight:function(e){return e.getGround(Iso.DOWN_RIGHT)===Map2d.TILE_GREEN_LEVEL_2&&e.getGround(Iso.UP_RIGHT)===Map2d.TILE_GREEN_LEVEL_2?e.getGround(Iso.UP_ABOVE)!==Map2d.TILE_GREEN_LEVEL_2?e.getTerrainFrames(Iso.DOWN_RIGHT).level2_right_inner_last:e.getTerrainFrames(Iso.DOWN_RIGHT).level2_right_inner:e.getGround(Iso.DOWN_RIGHT)===Map2d.TILE_GREEN_LEVEL_1&&e.getGround(Iso.UP_RIGHT)===Map2d.TILE_GREEN_LEVEL_1?e.getGround(Iso.UP_ABOVE)!==Map2d.TILE_GREEN_LEVEL_1?e.getTerrainFrames(Iso.DOWN_RIGHT).level1_right_inner_last:e.getTerrainFrames(Iso.DOWN_RIGHT).level1_right_inner:e.getGround(Iso.UP_RIGHT)===Map2d.TILE_GREEN_LEVEL_2?e.isWater(Iso.UP_ABOVE)?e.getTerrainFrames(Iso.UP_RIGHT).level2_up_right_only_last:e.getTerrainFrames(Iso.UP_RIGHT).level2_up_right_only:e.getGround(Iso.UP_RIGHT)===Map2d.TILE_GREEN_LEVEL_1?e.isWater(Iso.UP_ABOVE)?e.getTerrainFrames(Iso.UP_RIGHT
).level1_up_right_only_last:e.getTerrainFrames(Iso.UP_RIGHT).level1_up_right_only:e.isWater(Iso.DOWN_RIGHT)&&e.isWater(Iso.UP_RIGHT)&&e.isGround(Iso.HORIZONTAL_RIGHT)?e.getTerrainFrames(Iso.HORIZONTAL_RIGHT).level1_right_corner:void 0},unlockBorders:function(){ViewReader.lockedBorders=[]},frameBorderLocksCache:{},getFrameBorderLocks:function(e){if(ViewReader.frameBorderLocksCache[e])return ViewReader.frameBorderLocksCache[e];var t=[],s=cleverapps.styles.ViewReader.borderLocks;return-1!==s.upBoth.indexOf(e)?(t.push(ViewReader.UP_LEFT_LOCK),t.push(ViewReader.UP_RIGHT_LOCK)):-1!==s.upLeft.indexOf(e)?t.push(ViewReader.UP_LEFT_LOCK):-1!==s.upLeft.indexOf(e)&&t.push(ViewReader.UP_RIGHT_LOCK),ViewReader.frameBorderLocksCache[e]=t},lockBorders:function(e){var t=ViewReader.getFrameBorderLocks(e);return 0===t.length?e:0<cleverapps.intersect(t,ViewReader.lockedBorders).length?void 0:(ViewReader.lockedBorders=ViewReader.lockedBorders.concat(t),e)},calcBorderType:function(e){
ViewReader.unlockBorders();var t=ViewReader.calcBorderTypeUp(e),s=ViewReader.calcBorderTypeDown(e),n=ViewReader.calcBorderTypeLeft(e);return[t,ViewReader.calcBorderTypeRight(e),n,s].map(function(e){return e&&ViewReader.lockBorders(e)}).filter(function(e){return void 0!==e})},createTopYAnchorElement:function(e){if(e.height<=cleverapps.styles.Map2dView.cell.height)return e;var t=new cc.Node;return t.setContentSize(cleverapps.styles.Map2dView.cell.width,cleverapps.styles.Map2dView.cell.height),t.setAnchorPoint2(),e.setAnchorPoint2(.5,1),e.setPositionRound(t.width/2,t.height+1),t.addChild(e),t},hasView:function(e,t){return e===Map2d.TILE_BORDER&&0<ViewReader.calcBorderType(t).length||-1!==[Map2d.TILE_GROW,Map2d.TILE_WATER,Map2d.TILE_WATER_UNIT,Map2d.TILE_GREEN_LEVEL_1,Map2d.TILE_GREEN_LEVEL_2].indexOf(e)},parse:function(e,t){var s=t.getTerrainFrames();switch(e){case Map2d.TILE_GROW:return[ViewReader.createTopYAnchorElement(new cc.Sprite(ViewReader.calcGrowType(t)))];case Map2d.TILE_WATER:
case Map2d.TILE_WATER_UNIT:return[new cc.Sprite(bundles.tiles.frames.water)];case Map2d.TILE_BORDER:return(s=ViewReader.calcBorderType(t)).map(function(e){return ViewReader.createTopYAnchorElement(new cc.Sprite(e))});case Map2d.TILE_GREEN_LEVEL_1:case Map2d.TILE_GREEN_LEVEL_2:var n=(t.pointer.x+t.pointer.y)%2;return[new cc.Sprite(n?s.green_ground_1:s.green_ground_2)]}return[]},UP_LEFT_LOCK:0,UP_RIGHT_LOCK:1};cleverapps.styles.ViewReader={borderLocks:{upBoth:[],upLeft:[],upRight:[]}},function(){var s=cleverapps.styles.ViewReader.borderLocks;cleverapps.values(Map2d.TERRAIN_BUNDLES).forEach(function(e){var t;t=e.frames,s.upBoth=s.upBoth.concat([t.level1_up_corner,t.level1_up_both,t.level2_up_corner,t.level2_up_both,t.level1_up_right_only,t.level1_up_left_only,t.level2_up_right_only,t.level2_up_left_only]),s.upLeft=s.upLeft.concat([t.level1_up_left_only_last,t.level2_up_left_only_last,t.level1_left_inner,t.level1_left_inner_last,t.level2_left_inner,t.level2_left_inner_last]),
s.upRight=s.upRight.concat([t.level1_up_right_only_last,t.level2_up_right_only_last,t.level1_right_inner,t.level1_right_inner_last,t.level2_right_inner,t.level2_right_inner_last])}),s.upBoth=cleverapps.unique(s.upBoth),s.upLeft=cleverapps.unique(s.upLeft),s.upRight=cleverapps.unique(s.upRight)}();var Map2dView=cc.Node.extend({ctor:function(o){this._super(),(this.map2d=o).onDiscoverView=function(){return this}.bind(this);var e=o.visibleBox,t=o.getWidth()+o.getHeight(),s=t*cleverapps.styles.Map2dView.cell.width/2,n=t*cleverapps.styles.Map2dView.cell.height/2;this.cutLeft=s*e.cutLeft,this.cutRight=s*e.cutRight,this.cutTop=n*(1-e.height)/2,this.setContentSize2(s-this.cutLeft-this.cutRight,n-2*this.cutTop),this.setAnchorPoint2();var a=this.layersViews=new Map2dLayersView(o);this.addChild(a);var i=this.animations=new cc.Node;i.setContentSize(this.getContentSize()),i.setPositionRound(this.width/2,this.height/2),i.setAnchorPoint2(),this.addChild(i,1),o.layers.forEach(function(e,i){e.forEach(
function(e,n){e.forEach(function(e,t){o.setPointer(t,n);var s=a.getCell(i,t,n);this.createView(e,s,o)},this)},this)},this),o.decorators.createViews(),o.onAdd=function(e,t,s,n){this.getCell(e,t,s);this.createView(n,this.getCell(e,t,s),o)}.bind(this),o.onAnimationsAdd=function(e){this.createView(e,this.animations,o)}.bind(this),cleverapps.config.debugMode&&cleverapps.UI.onClick(this,function(e){var t=this.getCellByCoordinates(e);if(t){o.setPointer(t.x,t.y);var s=o.getFog(t.x,t.y),n=this.cleanableValue(o.getUnit(t.x,t.y));console.log(t,s?s.fogBlock.id:o.isWater(Iso.SAME)?"water":"ground"+o.getGround(Iso.SAME),n)}}.bind(this),{swallowTouches:!1,ignoreOnTouchMoved:!0}),this.addControls(),cleverapps.environment.isSceneWithPreview()&&this.toggleControls(!1),cleverapps.UI.onClick(this,function(){InfoView.CloseInfo()},{swallowTouches:!1,ignoreOnTouchMoved:!0}),this.setVisibleRect(cc.rectScale(cc.rect(0,0,this.width,this.height),2)),this.addChild=function(){
throw"Map2d.addChild is blocked after creations - map has many cell children"},o.on("showMergeBonus",this.showMergeBonus.bind(this),this)},findTouchUnit:function(e){var t=this.convertTouchToNodeSpace(e),s=this.getCellByCoordinates(t);if(s)for(var n=[{x:0,y:0},{x:-1,y:1},{x:-1,y:0},{x:0,y:1}],i=0;i<n.length;i++){var o=this.map2d.getUnitWithHead(s.x+n[i].x,s.y+n[i].y);if(o&&o.checkTouchInside(e))return o}},getUnitCenterPos:function(e,t){var s=this.map2d.getUnit(e,t),n=s&&s.getData().multicell&&s.onGetView();return n?this.animations.convertToNodeSpace(n.parent.convertToWorldSpace(n.getCenterPos())):this.alignInIsometricGrid(e,t)},addControls:function(){var i,o,a,s,n,r,l=cleverapps.throttle(cleverapps.UI.DRAG_THROTTLE,function(e){s.onDragMove(e)}),c=!1;this.clickListener=cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:function(e){if(c=!1,!this.isDisplayed())return!1;var t=this.findTouchUnit(e);if(!t){var s=this.convertTouchToNodeSpace(e),
n=this.getCellByCoordinates(s);n&&(t=this.map2d.getFog(n.x,n.y))}return!!t&&(t.onTouchBeginEvent&&t.onTouchBeginEvent()?!(c=!0):(i=!1,o=t,a=e.getLocation(),!0))}.bind(this),onTouchMoved:function(e){var t=e.getLocation();!i&&Math.abs(t.x-a.x)+Math.abs(t.y-a.y)>cleverapps.styles.UI.onClick.ignoreOnTouchMovedThreshold&&(i=!0)},onTouchEnded:function(e){i||o.onClickEvent()}},this);var p,d,u=!1;this.dragListener=cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(e){if(u=!1,c)return u=!(c=!1);if(r&&(s.onDragEnd(),r=void 0),!this.isDisplayed())return!1;var t=this.findTouchUnit(e);return!(!t||!t.isMoveable())&&(r=!1,s=t,n=e.getLocation(),p=e.getID(),d=e,!0)}.bind(this),onTouchMoved:function(e){if(!u&&e.getID()===p){var t=e.getLocation();if(!r&&Math.abs(t.x-n.x)+Math.abs(t.y-n.y)>cleverapps.styles.UI.onClick.ignoreOnTouchMovedThreshold){if(!s.onDragStart())return;r=!0}r&&l({touch:e})}},onTouchEnded:function(e){u||e.getID()!==p||r&&(
s.onDragMove({touch:e}),s.onDragEnd(),r=void 0)},setEnabled:function(e){this.isEnabled()&&!e&&r&&d&&this.onTouchEnded(d),cc.EventListener.prototype.setEnabled.call(this,e)}},this),this.map2d.on("stop",this.stop.bind(this),this),cleverapps.environment.isSceneWithPreview()||cleverapps.metha.registerControl("map2d",this.createListener(this.toggleControls.bind(this)))},stop:function(){this.toggleControls(!1)},toggleControls:function(e){this.clickListener.setEnabled(e),this.dragListener.setEnabled(e)},getStableLayers:function(){return[Map2d.LAYER_WATER,Map2d.LAYER_BORDERS,Map2d.LAYER_GROUND,Map2d.LAYER_UNITS,Map2d.LAYER_FOG]},showMergeBonus:function(e){var t=cleverapps.styles.Map2dView.mergeBonus,s=cc.getCenter(e.map(function(e){return this.getCell(Map2d.LAYER_UNITS,e.x,e.y)},this)),n=new cleverapps.Spine(bundles.merge.jsons.bonus_shining_json);n.setAnchorPoint2(),n.setPositionRound(s.x+t.x,s.y+t.y),n.setAnimation(0,"animation",!1),n.setCompleteListenerRemove(),this.animations.addChild(n)}}
);Map2dView.prototype.setVisibleRect=function(e){var t=this.screenRectToIso(e);this.visibleRect=e,cc.rectEqualToRect(t,this.map2d.screenRect)||(this.map2d.setScreenRect(t),this.layersViews.setVisibleIsoRect(t))},Map2dView.prototype.screenRectToIso=function(e){var t=this.getCellByCoordinates(e),s=Math.round(e.width/cleverapps.styles.Map2dView.cell.width),n=Math.round(e.height/cleverapps.styles.Map2dView.cell.height);return cc.rect(t.x,t.y,s,n)},Map2dView.prototype.getCellByCoordinates=function(e){var t=this.alignInIsometricGrid(0,0),s=Map2dView.ScreenToIso(e.x-t.x,e.y-t.y);return cc.p(Math.round(s.x),Math.round(s.y))},Map2dView.ScreenToIso=function(e,t){var s=e/cleverapps.styles.Map2dView.cell.width,n=t/cleverapps.styles.Map2dView.cell.height;return{x:s+n,y:s-n}},Map2dView.IsoToScreen=function(e,t){var s=(e-t)/2;return{x:(e+t)/2*cleverapps.styles.Map2dView.cell.width,y:s*cleverapps.styles.Map2dView.cell.height}},Map2dView.prototype.getCell=function(e,t,s){
return this.layersViews.getCell(e,t,s)},Map2dView.prototype.hasView=function(e,t,s){var n=this.map2d.layers[e][s]&&this.map2d.layers[e][s][t];return this.map2d.setPointer(t,s),n instanceof FogTile||n instanceof Highlight||n instanceof Unit&&!this.map2d.getFog(n.x,n.y)&&!n.isMultiCellBody()||ViewReader.hasView(n,this.map2d)||this.map2d.decorators.hasView(e,t,s)},Map2dView.prototype.createView=function(s,n,e){var t=[];s instanceof FogTile?t.push(new FogTileView(s)):s instanceof Highlight?t.push(new HighlightView(s)):s instanceof Unit?e.getFog(s.x,s.y)||s.isMultiCellBody()||t.push(new UnitView(s)):t=ViewReader.parse(s,e),t.forEach(function(e){try{n.addChild(e)}catch(e){var t="object"!=typeof s?s:{x:s&&s.x,y:s&&s.y,type:s&&s.type,fogBlockId:s&&s.fogBlock&&s.fogBlock.id};throw new Error("Map2dView.createView - cell undefined for object - "+JSON.stringify(t)+" stack "+JSON.stringify(e.stack))}})},Map2dView.prototype.alignInIsometricGrid=function(e,t){var s=e+t+1,n=e-t+this.map2d.getHeight()
;return cc.p(s*cleverapps.styles.Map2dView.cell.width/2-this.cutLeft,n*cleverapps.styles.Map2dView.cell.height/2-this.cutTop)},cleverapps.overrideFonts(cleverapps.styles.FONTS,{MERGE_BONUS_TEXT:{size:45,color:cleverapps.styles.COLORS.COLOR_RED,stroke:{color:cleverapps.styles.COLORS.WHITE,size:2}}}),cleverapps.styles.Map2dView={cell:{width:174,height:100},mergeBonus:{x:0,y:30}};var Map2dCellView=cc.Node.extend({ctor:function(e,t,s,n){this._super(),this.map2d=e.map2d,this.mapView=e,this.cell=t,this.layerId=s,this.layerView=n,this.setCascadeOpacityEnabled(!0);var i=e.alignInIsometricGrid(t.x,t.y);this.setPositionRound(i.x,i.y)},setVisible:function(t){this.isVisible()!==t&&(cc.Node.prototype.setVisible.apply(this,arguments),this.parent.setVisibleDirty&&this.parent.setVisibleDirty(t),this.performRecursive(function(e){e.onCellSetVisible&&e.onCellSetVisible(t)}))},addLargeChild:function(e){this.largeChildren||(this.largeChildren=[]),this.largeChildren.push(e),this.layerView.addLargeCell(this)
},updateLargeVisible:function(e){if(this.largeChildren){for(var t=cc.rectApplyAffineTransform(this.mapView.visibleRect,this.mapView.getNodeToWorldTransform()),s=0;s<this.largeChildren.length;++s){var n=this.largeChildren[s],i=cc.rectApplyAffineTransform(cc.rect(0,0,n.width,n.height),n.getNodeToWorldTransform());if(cc.rectIntersectsRect(t,i))return void this.setVisible(!0)}this.setVisible(cc.isoRectContainsPoint(e,this.cell.x,this.cell.y))}},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new Map2dCellView.WebGLRenderCmd(this):this._super()}});cleverapps.isPixiJs()||(Map2dCellView.WebGLRenderCmd=function(e){this._rootCtor(e)},Map2dCellView.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype),Map2dCellView.WebGLRenderCmd.prototype.constructor=Map2dCellView.WebGLRenderCmd,Map2dCellView.WebGLRenderCmd.prototype.transform=function(e,t){if(this._transform||(this._transform={a:1,b:0,c:0,d:1,tx:this._node._position.x,ty:this._node._position.y},
this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0}),e){var s=e._worldTransform,n=this._worldTransform;n.a=s.a,n.b=s.b,n.c=s.c,n.d=s.d,n.tx=this._transform.tx*s.a+s.tx,n.ty=this._transform.ty*s.d+s.ty}this._cacheDirty=!0});var Map2dDecorator=function(e){cleverapps.extend(this,e)};Map2dDecorator.prototype.getLayerId=function(){var e=Game.currentGame.map;return void 0!==e.layers[Map2d.LAYER_GROUND][this.y][this.x]?Map2d.LAYER_GROUND:void 0!==e.layers[Map2d.LAYER_BORDERS][this.y][this.x]?Map2d.LAYER_BORDERS:Map2d.LAYER_WATER};var Map2dDecorators=function(e){this.decorators=[],(e||[]).forEach(function(e){bundles.map_decorators.frames[e.code]?this.decorators.push(new Map2dDecorator(e)):console.log("No frame for decorator '"+e.code+"' at x: "+e.x+", y: "+e.y)},this)};Map2dDecorators.prototype.createViews=function(){this.decorators.forEach(this.createView.bind(this))},Map2dDecorators.prototype.hasView=function(e,t,s){return this.occupied||(this.occupied={},this.decorators.forEach(function(e){
this.occupied[e.getLayerId()+"_"+e.x+"_"+e.y]=!0},this)),this.occupied[e+"_"+t+"_"+s]},Map2dDecorators.prototype.createView=function(e){var t=Game.currentGame.map,s=t.getView();t.setPointer(e.x,e.y);var n=e.getLayerId(),i=s.getCell(n,e.x,e.y),o=new(this.getViewClass())(e);return o.setLocalZOrder(1),i.addChild(o),(o.width*o.scaleX>3*cleverapps.styles.Map2dView.cell.width||o.height*o.scaleY>3*cleverapps.styles.Map2dView.cell.height)&&i.addLargeChild(o),o},Map2dDecorators.prototype.getViewClass=function(){return Map2dDecoratorView};var Map2dDecoratorView=cc.Sprite.extend({ctor:function(e){var t=bundles.map_decorators.frames[e.code];this._super(t);var s=((this.decorator=e).dx||0)*resolutionScale,n=(e.dy||0)*resolutionScale;this.setPositionRound({x:{align:"center",dx:s},y:{align:"center",dy:n}}),this.setRotation(e.rotation||0),this.setScale(e.scale||1),this.baseScale=this.getScale()}});cc.isoRectGetCenter=function(e){return cc.p(Math.round(e.x+e.width/2+e.height/2),Math.round(
e.y+e.width/2-e.height/2))},cc.isoRectContainsPoint=function(e,t,s){var n=t-e.x,i=s-e.y,o=(n+i)/2,a=(n-i)/2;return 0<=o&&o<=e.width&&0<=a&&a<=e.height},cc.isoRectMove=function(e,t,s,n,i){return t=t||0,s=s||0,cc.rect(e.x-s+t,e.y+s+t,e.width+(n||0),e.height+(i||0))},cc.isoRectGetLines=function(e){var t,s,n={};for(t=0;t<=e.height;t+=.5)s=e.x+Math.floor(t),n[e.y-Math.ceil(t)-s]={startX:s,endX:s+e.width};return n},cc.isoRectIterate=function(e,t,s){var n,i,o,a,r,l=cc.isoRectGetLines(e),c={};for(r in s&&s.skipRect&&(c=cc.isoRectGetLines(s.skipRect)),l){o=l[i=parseInt(r)],a=c[i];try{for(n=o.startX;n<=o.endX;)a&&a.startX<=n&&n<=a.endX?n=a.endX+1:(t(n,i+n),n++)}catch(e){throw new Error("Error cc.isoRectIterate code - "+r+" - lines - "+JSON.stringify(l)+" stack - "+JSON.stringify(e.stack))}}};var Map2dLayerView=cc.Node.extend({ctor:function(o,e){this.map2d=o,this.layerIds=cleverapps.toArray(e);var a=o.onDiscoverView();this._super(),this.setContentSize2(a.getContentSize()),this.setAnchorPoint2(),
this.setPositionRound(a.width/2,a.height/2),this.cells={},this.largeCells=[];var r=a.getStableLayers(),l=[];this.layerIds.forEach(function(i){this.cells[i]=o.layers[i].map(function(e,n){return e.map(function(e,t){if(a.hasView(i,t,n)||-1===r.indexOf(i)||i===Map2d.LAYER_UNITS&&(o.isGround(t,n)||o.isWaterUnit(t,n))){var s=new Map2dCellView(a,cc.p(t,n),i,this);return l.push(s),s}},this)},this)},this),l=l.sort(function(e,t){return e.y!==t.y?t.y-e.y:e.x!==t.x?t.x-e.x:e.layerId-t.layerId});var t=this.tree=new Map2dCellTree({map2d:this.map2d,nodes:l,size:this.getContentSize()});t.setPositionRound(this.width/2,this.height/2),this.addChild(t),this.visibleRect=a.screenRectToIso(cc.rectScale(cc.rect(0,0,this.width,this.height),2))},getCell:function(e,t,s){return this.cells[e][s]&&this.cells[e][s][t]},addLargeCell:function(e){-1===this.largeCells.indexOf(e)&&this.largeCells.push(e)},setVisibleIsoRect:function(t){var e=function(n){var i;return function(e,t){for(i=0;i<this.layerIds.length;i++){
var s=this.getCell(this.layerIds[i],e,t);s&&s.setVisible(n)}}.bind(this)}.bind(this),s=this.visibleRect;s&&cc.isoRectIterate(s,e(!1),{skipRect:t}),cc.isoRectIterate(t,e(!0),{skipRect:s}),this.largeCells.forEach(function(e){e.updateLargeVisible(t)}),this.tree.visitVisibleDirty(),this.visibleRect=t}}),Map2dLayersView=cc.Node.extend({ctor:function(n){var e=(this.map2d=n).onDiscoverView();if(this._super(),this.setContentSize2(e.getContentSize()),this.setAnchorPoint2(),this.setPositionRound(e.width/2,e.height/2),this.layersViews=Map2dLayersView.LAYERS.map(function(e,t){var s=new Map2dLayerView(n,e);return this.addChild(s),s},this),cleverapps.isCocosJs()){var t=cc.eventManager.addCustomListener(cc.Director.EVENT_AFTER_UPDATE,this.afterUpdate.bind(this));this.registerCleanupCallback(function(){cc.eventManager.removeListener(t)})}},getCell:function(e,t,s){var n=e;return Map2d.LAYER_FOG===e&&(n=Map2d.LAYER_UNITS),this.layersViews[n].getCell(e,t,s)},setVisibleIsoRect:function(e){
e=cc.isoRectMove(e,-1,3,3,4),cc.rectEqualToRect(this.visibleRect,e)||(this.visibleRectDirty=e,cleverapps.isPixiJs()&&this.afterUpdate())},afterUpdate:function(){if(this.visibleRectDirty){var s=this.visibleRect=this.visibleRectDirty;delete this.visibleRectDirty,this.layersViews.forEach(function(e,t){e.setVisibleIsoRect(s)})}}});Map2dLayersView.LAYERS=[[Map2d.LAYER_WATER],[Map2d.LAYER_BORDERS],[Map2d.LAYER_GROUND],[Map2d.LAYER_UNITS,Map2d.LAYER_FOG]];var Map2dCellTree=cc.Node.extend({ctor:function(e){this.size=e.size;this.map2d=e.map2d,this._super(),this.setContentSize2(e.size),this.setAnchorPoint2();var t=this.nodes=e.nodes;if(t.length<=Map2dCellTree.THRESHOLD)this.makeLeaves();else{var s=Math.round(t.length/2);[t.slice(0,s),t.slice(s)].forEach(function(e){var t=new Map2dCellTree({size:this.size,nodes:e,map2d:this.map2d});t.setPositionRound(this.width/2,this.height/2),this.addChild(t)},this)}},makeLeaves:function(){this.nodes.forEach(function(e){this.addChild(e)},this)},
setVisibleDirty:function(){this.visibleDirty||(this.visibleDirty=!0,this.parent.setVisibleDirty&&this.parent.setVisibleDirty())},visitVisibleDirty:function(){if(this.visibleDirty){for(var e=this.visibleDirty=!1,t=0;t<this.children.length;t++){var s=this.children[t];s.visitVisibleDirty&&s.visitVisibleDirty(),e=e||s.isVisible()}this.setVisible(e)}},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new Map2dCellTree.WebGLRenderCmd(this):this._super()}});Map2dCellTree.THRESHOLD=8,cleverapps.isPixiJs()||(Map2dCellTree.WebGLRenderCmd=function(e){this._rootCtor(e)},Map2dCellTree.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype),Map2dCellTree.WebGLRenderCmd.prototype.constructor=Map2dCellTree.WebGLRenderCmd,Map2dCellTree.WebGLRenderCmd.prototype.transform=function(e,t){this._transform||(this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0}),e&&(this._worldTransform=e._worldTransform),this._cacheDirty=!0})
;var GitButtons=function(e){cleverapps.EventEmitter.call(this),this.status=GitButtons.NO_CHANGES,this.folder=e};GitButtons.prototype=Object.create(cleverapps.EventEmitter.prototype),(GitButtons.prototype.constructor=GitButtons).prototype.setStatus=function(e){this.status!==e&&(this.status=e,this.trigger("statusChanged",this.status))},GitButtons.prototype.revert=function(){this.status!==GitButtons.CAN_PUSH&&this.status!==GitButtons.PUSH_ERROR||this.checkStatus(function(){this.status!==GitButtons.CAN_PUSH&&this.status!==GitButtons.PUSH_ERROR||cleverapps.metha.display({focus:"GitInfoWindow",action:function(e){new GitInfoWindow({status:this.gitStatus,action:"revert",callback:function(t){var e="Are you sure to revert all local changes?";void 0!==t&&(e="Are you sure to revert file: "+t+"?"),window.confirm(e)&&(this.setStatus(GitButtons.RUNNING_COMMAND),cleverapps.RestClient.post("/gitcommands/revert",{folder:this.folder,status:this.gitStatus,file:t},function(e){"ok"===e?(this.setStatus(
GitButtons.NO_CHANGES),this.checkStatus(),cleverapps.administrator&&cleverapps.administrator.log.createEntry({type:AdminLog.GIT_REVERT,data:t||this.gitStatus})):(alert("Revert error: "+JSON.stringify(e)),this.setStatus(GitButtons.REVERT_ERROR))}.bind(this),function(){this.setStatus(GitButtons.REVERT_ERROR)}.bind(this),{timeout:3e4}))}.bind(this)}),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})}.bind(this),!0)},GitButtons.prototype.push=function(){this.status!==GitButtons.NEED_PUSH&&this.status!==GitButtons.CAN_PUSH||this.checkStatus(function(){this.status!==GitButtons.NEED_PUSH&&this.status!==GitButtons.CAN_PUSH||cleverapps.metha.display({focus:"GitInfoWindow",action:function(e){new GitInfoWindow({status:this.gitStatus,action:"push",callback:function(t){var e="";if("need push"!==this.gitStatus&&(e=window.prompt("Enter commit comment:","")),null!=e){var s="user: "+cleverapps.friends.getPlayer().name;""!==e&&(s=s+'\ncomment: "'+e+'"'),this.setStatus(GitButtons.RUNNING_COMMAND),
cleverapps.RestClient.post("/gitcommands/push",{folder:this.folder,status:this.gitStatus,file:t,comment:s},function(e){"ok"===e?(this.setStatus(GitButtons.NO_CHANGES),this.checkStatus(),cleverapps.administrator&&cleverapps.administrator.log.createEntry({type:AdminLog.GIT_PUSH,data:t||this.gitStatus})):(alert("Push error: "+JSON.stringify(e)),this.setStatus(GitButtons.PUSH_ERROR))}.bind(this),function(){this.setStatus(GitButtons.PUSH_ERROR)}.bind(this),{timeout:3e4})}}.bind(this)}),cleverapps.metha.onceNoWindowsListener=e}.bind(this)})}.bind(this),!0)},GitButtons.prototype.checkStatus=function(t,e){this.status!==GitButtons.RUNNING_COMMAND&&(e&&this.setStatus(GitButtons.RUNNING_COMMAND),t=t||function(){},cleverapps.RestClient.get("/gitcommands/status?folder="+this.folder,{},function(e){this.gitStatus=e,"need push"===this.gitStatus?this.setStatus(GitButtons.NEED_PUSH):0<this.gitStatus.newFiles.length||0<this.gitStatus.changedFiles.length?this.setStatus(GitButtons.CAN_PUSH):this.setStatus(
GitButtons.NO_CHANGES),t()}.bind(this),function(){this.setStatus(GitButtons.STATUS_ERROR),t()}.bind(this)))},GitButtons.NO_CHANGES=0,GitButtons.CAN_PUSH=1,GitButtons.NEED_PUSH=2,GitButtons.RUNNING_COMMAND=3,GitButtons.PUSH_ERROR=4,GitButtons.REVERT_ERROR=5,GitButtons.STATUS_ERROR=6;var GitButtonsView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),this.gitButtons=e;var t=cleverapps.styles.GitButtonsView;this.pushButton=this.createButton(bundles.git.frames.push_icon,e.push.bind(e)),this.revertButton=this.createButton(bundles.git.frames.revert_icon,e.revert.bind(e));var s=new cleverapps.Layout([this.pushButton,this.revertButton],{direction:cleverapps.UI.HORIZONTAL,margin:t.margin});this.addChild(s),this.setContentSize2(s.getContentSize()),s.setPositionRound(this.width/2,this.height/2),e.checkStatus(),e.on("statusChanged",this.drawStatus.bind(this),this),this.drawStatus(),this.setPositionRound(t.position),this.pushButton.setCascadeOpacityEnabled(!0),
this.pushButton.setCascadeColorEnabled(!0),this.revertButton.setCascadeOpacityEnabled(!0),this.revertButton.setCascadeColorEnabled(!0)},createButton:function(e,t){var s=cleverapps.styles.GitButtonsView;return new cleverapps.UI.Button({button_png:bundles.git.frames.regular_button,button_on_png:bundles.git.frames.regular_button_on,button_off_png:bundles.git.frames.regular_button,content:new cc.Sprite(e),fitTo:!1,contentOffset:{y:0},width:s.button.width,height:s.button.height,onClicked:t})},setButtonState:function(e,t){switch(t){case GitButtonsView.ENABLE_BUTTON:e.enable(),e.setColor(new cc.Color(255,255,255,255)),e.setOpacity(255);break;case GitButtonsView.DISABLE_BUTTON:e.disable(),e.setColor(new cc.Color(255,255,255,255)),e.setOpacity(100);break;case GitButtonsView.ERROR_BUTTON:e.disable(),e.setColor(new cc.Color(255,0,0,255)),e.setOpacity(255)}},drawStatus:function(){switch(this.pushButton.setVisible(!0),this.revertButton.setVisible(!0),this.loading&&(this.loading.removeFromParent(),
this.loading=void 0),this.gitButtons.status){case GitButtons.NEED_PUSH:this.setButtonState(this.pushButton,GitButtonsView.ENABLE_BUTTON),this.setButtonState(this.revertButton,GitButtonsView.DISABLE_BUTTON);break;case GitButtons.CAN_PUSH:this.setButtonState(this.pushButton,GitButtonsView.ENABLE_BUTTON),this.setButtonState(this.revertButton,GitButtonsView.ENABLE_BUTTON);break;case GitButtons.NO_CHANGES:this.setButtonState(this.pushButton,GitButtonsView.DISABLE_BUTTON),this.setButtonState(this.revertButton,GitButtonsView.DISABLE_BUTTON);break;case GitButtons.RUNNING_COMMAND:this.setButtonState(this.pushButton,GitButtonsView.DISABLE_BUTTON),this.setButtonState(this.revertButton,GitButtonsView.DISABLE_BUTTON),this.pushButton.setVisible(!1),this.revertButton.setVisible(!1),this.loading=new cc.Sprite(bundles.git.frames.loading),this.loading.runAction(new cc.RepeatForever(new cc.RotateBy(5,360))),this.loading.setPositionRound(this.width/2,this.height/2),this.addChild(this.loading);break
;case GitButtons.PUSH_ERROR:this.setButtonState(this.pushButton,GitButtonsView.ERROR_BUTTON),this.setButtonState(this.revertButton,GitButtonsView.ENABLE_BUTTON);break;case GitButtons.STATUS_ERROR:case GitButtons.REVERT_ERROR:this.setButtonState(this.pushButton,GitButtonsView.ERROR_BUTTON),this.setButtonState(this.revertButton,GitButtonsView.ERROR_BUTTON)}}});GitButtonsView.ENABLE_BUTTON=0,GitButtonsView.DISABLE_BUTTON=1,GitButtonsView.ERROR_BUTTON=2,cleverapps.styles.GitButtonsView={button:{width:60,height:60},margin:10,position:{x:{align:"left",dx:10},y:{align:"top",dy:-70}}};var GitInfoWindow=Window.extend({onWindowLoaded:function(e){this.options=e,this._super({noBackground:!0,closeButton:!1,noTitleBg:!0,name:"GitInfoWindow",title:{text:"push"===e.action?"Push local changes?":"Revert local changes?",font:cleverapps.styles.FONTS.GIT_INFO_TITLE_TEXT},content:this.getContent(),buttons:this.getButtons()})},getButtons:function(){var e=cleverapps.styles.GitInfoWindow.button;return[
new cleverapps.UI.Button({button_png:bundles.git.frames.regular_button,button_on_png:bundles.git.frames.regular_button_on,font:cleverapps.styles.FONTS.GIT_INFO_BUTTON_TEXT,text:"push"===this.options.action?"push all":"revert all",width:e.width,height:e.height,onClicked:function(){this.options.callback(),this.close()}.bind(this)}),new cleverapps.UI.Button({button_png:bundles.git.frames.regular_button,button_on_png:bundles.git.frames.regular_button_on,font:cleverapps.styles.FONTS.GIT_INFO_BUTTON_TEXT,text:"cancel",width:e.width,height:e.height,onClicked:this.close.bind(this)})]},generateFileLine:function(e){var t=cleverapps.styles.GitInfoWindow,s=cleverapps.UI.generateTTFText(e,cleverapps.styles.FONTS.GIT_INFO_TEXT),n=new cleverapps.UI.Button({button_png:bundles.git.frames.regular_button,button_on_png:bundles.git.frames.regular_button_on,text:"push"===this.options.action?"push":"revert",font:cleverapps.styles.FONTS.GIT_INFO_BUTTON_TEXT,onClicked:function(){this.options.callback(e),
this.close()}.bind(this),width:t.lineButton.width,height:t.lineButton.height}),i=t.scroll.width-n.width-t.lineMargin;return s.fitTo(i),new cleverapps.Layout([s,n],{direction:cleverapps.UI.HORIZONTAL,margin:t.scroll.width-s.width-n.width})},getContent:function(){var e,t=cleverapps.styles.GitInfoWindow,s=[];if("need push"===this.options.status){var n=cleverapps.UI.generateTTFText("Push already commited changes!",cleverapps.styles.FONTS.GIT_INFO_TEXT);n.setDimensions(t.scroll.width,0),n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.push(n)}else{if(0<this.options.status.newFiles.length)for(s.push(cleverapps.UI.generateTTFText("New files:",cleverapps.styles.FONTS.GIT_INFO_TEXT)),e=0;e<this.options.status.newFiles.length;e++)s.push(this.generateFileLine(this.options.status.newFiles[e]));if(0<this.options.status.changedFiles.length)for(s.push(cleverapps.UI.generateTTFText("Changed files:",cleverapps.styles.FONTS.GIT_INFO_TEXT)),e=0;e<this.options.status.changedFiles.length;e++)s.push(
this.generateFileLine(this.options.status.changedFiles[e]))}var i=new cleverapps.Layout(s.reverse(),{direction:cleverapps.UI.VERTICAL,margin:t.margin}),o=t.scroll.height;i.height<o&&(o=i.height);var a=cleverapps.UI.createScale9Sprite(bundles.git.frames.scroll_bg,cleverapps.UI.Scale9Rect.TwoPixelXY);a.setContentSize2(t.scroll.width+2*t.scroll.bgPadding,o+2*t.scroll.bgPadding);var r=new cleverapps.UI.ScrollView(i);r.setContentSize2(t.scroll.width,o),r.setPositionRound(a.width/2,a.height/2),a.addChild(r);var l=cleverapps.UI.createScale9Sprite(bundles.git.frames.scroll_content_bg);l.setContentSize2(t.width,a.height+2*t.padding),a.setPositionRound(l.width/2,l.height/2),l.addChild(a);var c=new cleverapps.UI.Button({button_png:bundles.git.frames.delete_button,button_on_png:bundles.git.frames.delete_button,onClicked:this.close.bind(this)});return c.setPositionRound(t.closeButton),l.addChild(c),l}});GitInfoWindow.prototype.editorWindow=!0,cleverapps.styles.COLORS=cleverapps.overrideColors(
cleverapps.styles.COLORS,{GIT_TEXT_COLOR:new cc.Color(89,144,221,255)}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{GIT_INFO_BUTTON_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE},GIT_INFO_TEXT:{size:25,color:cleverapps.styles.COLORS.GIT_TEXT_COLOR},GIT_INFO_TITLE_TEXT:{size:35,color:cleverapps.styles.COLORS.GIT_TEXT_COLOR}}),cleverapps.styles.GitInfoWindow={button:{width:150,height:70},scroll:{width:450,height:500,bgPadding:10},closeButton:{x:{align:"right",dx:20},y:{align:"top",dy:20}},width:600,padding:150,margin:20,lineMargin:20,lineButton:{width:100,height:44}};var UseGoldButton=cleverapps.UI.Button.extend({ctor:function(e,t){this.price=e.price,this.filterHandler=e.filter||function(){return!0},this.clickHandler=e.onClicked,this.eventName=e.eventName,this.price&&e.canCoins&&cleverapps.missionManager.findByType(Mission.TYPE_COINS_TIME)&&(this.useCoins=!0,this.price*=UseGoldButton.RUBY_COINS_RATE),this._super({styles:t,content:this.createContent(e,t),
onClicked:this.onClick.bind(this),button_images:e.button_images||cleverapps.UI.Button.Images.button_blue,disabled:e.disabled})},createContent:function(e,t){var s,n;return this.price?(s=new cc.Sprite(this.useCoins?e.coinImage||bundles.reward_icons.frames.reward_coin_png:e.image||bundles.reward_icons.frames.reward_gold_png),n=cleverapps.UI.generateImageText(this.price,e.font||cleverapps.styles.FONTS.BUTTON_TEXT)):n=cleverapps.UI.generateOnlyText("messages:UseGoldButton.free",e.font||cleverapps.styles.FONTS.BUTTON_TEXT),new cleverapps.Layout([s,n],{direction:cleverapps.UI.HORIZONTAL,margin:t.margin})},takeCurrency:function(){return this.useCoins?Game.currentGame&&Game.currentGame.takeCoins(this.price):cleverapps.user.takeGold(this.price)},onClick:function(){this.filterHandler()&&this.takeCurrency()&&(this.price&&cleverapps.toArray(this.eventName||[]).forEach(function(e){this.useCoins&&(e=e.replace("_ruby","_coins")),cleverapps.eventLogger.logEvent(e,{amount:this.price})},this),
this.clickHandler())}});UseGoldButton.RUBY_COINS_RATE=5,cleverapps.ServerFlags=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SERVER_FLAGS);this.flags=e||[]},cleverapps.ServerFlags.prototype.reset=function(){this.flags=[],this.save()},cleverapps.ServerFlags.prototype.hasFlag=function(e){return 0<=this.flags.indexOf(e)},cleverapps.ServerFlags.prototype.setFlag=function(e){this.hasFlag(e)||(this.flags.push(e),this.save())},cleverapps.ServerFlags.prototype.clearFlag=function(e){var t=this.flags.indexOf(e);-1!==t&&(this.flags.splice(t,1),this.save())},cleverapps.ServerFlags.prototype.getInfo=function(){return this.flags},cleverapps.ServerFlags.prototype.updateInfo=function(e,t){this.flags=e,this.save(t)},cleverapps.ServerFlags.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SERVER_FLAGS,this.flags),e||cleverapps.synchronizer.addUpdateTask("serverflags")},cleverapps.ServerFlags.PAGE_LIKED=2,cleverapps.ServerFlags.PAYER=3;var levels={
reset:function(){levels.episodes.reset(),levels.episodes.setCurrentEpisode(levels.user.episode),levels.tutorial&&levels.tutorial.stop(),cleverapps.social.isLoggedIn()?cleverapps.SocialManager.onLogin():cleverapps.synchronizer.syncWhenReady()},initUser:function(){var e=!1===cleverapps.DataLoader.haveSavedData();return e&&(console.log("Creating new user"),cleverapps.synchronizer.reset()),cleverapps.user=levels.user=new levels.User(e),e},initialize:function(){cleverapps.rewardedAdsManager.init(),cleverapps.LocalizationManager.run(),cleverapps.localPushes.init(),levels.progress.init(),cleverapps.isLevels()&&levels.episodes.setCurrentEpisode(cleverapps.user.episode),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.APP_INITIALIZE),void 0!==cleverapps.DataLoader.checksumMatch&&cleverapps.eventLogger.logEvent(cleverapps.DataLoader.checksumMatch?cleverapps.EVENTS.DATALOADER_CHECKSUM_MATCH:cleverapps.EVENTS.DATALOADER_CHECKSUM_DIFFERENT),cleverapps.Shaders.initialize(),
cleverapps.wideMode.refresh(),cleverapps.config.debugMode&&(-1===["spades","mergeriddles","mergeheroes"].indexOf(cleverapps.config.name)&&(cleverapps.administrator=new Administrator,cleverapps.administrator.run()),cleverapps.taskManager=new TaskManager),cleverapps.flags.update(),cleverapps.placements=new Placements,cc.renderer.assignedZStep=1e-5},User:function(e){this.onLevelStatusChanged=function(e,t){},cleverapps.User.call(this,e)}};levels.User.prototype=Object.create(cleverapps.User.prototype),levels.User.prototype.constructor=levels.User,levels.User.prototype.getProgress=function(){return cleverapps.humanReadableNumber(this.episode,this.level)-1},levels.User.prototype.loadData=function(e){cleverapps.User.prototype.loadData.call(this,e),this.episode=e.episode,this.level=e.level,this.league=this.calcLeague(),this.progress=e.progress||0,e.uniqueStartEvent&&(this.uniqueStartEvent=e.uniqueStartEvent),this.calcRating(),this.calcExp()},levels.User.prototype.calcRating=function(){
var e=this.calcLeague();this.league!==e&&(this.league=e,this.onLeagueChangeListener()),this.save()},levels.User.prototype.calcExp=function(){void 0===this.exp&&this.setExp(this.getProgress())},levels.User.prototype.isUniqueStart=function(e,t,s){var n=e+"_"+t+"_"+s;return this.uniqueStartEvent!==n&&(this.uniqueStartEvent=n,this.save(!1),!0)},levels.User.prototype.getPassAllProgress=function(){return this.progress},levels.User.prototype.isCurrentLevel=function(e,t){if(cleverapps.metha.getType()!==Metha.HOSE)return!0;var s=this.getCurrentLevel();return s.levelNo===e&&s.episodeNo===t},levels.User.prototype.isPassedLevel=function(e,t){return this.episode>t||this.episode===t&&this.level>e},levels.User.prototype.getHumanReadableNumber=function(){return cleverapps.humanReadableNumber(this.episode,this.level)},levels.User.prototype.checkAvailable=function(e,t){e=e||{},t=t||[];var s=cc.game.config.projectName;if(e[s])return this.checkAvailable(e[s],t);if(
cleverapps.config.subtype&&e[cleverapps.config.subtype])return this.checkAvailable(e[cleverapps.config.subtype],t);var n=cleverapps.User.calcSource();if(e[n])return this.checkAvailable(e[n],t);if(!cleverapps.config.debugMode&&e.registered&&this.registered+cleverapps.parseInterval(e.registered)>Date.now())return!1;if(cleverapps.flags.nosocial&&e.social)return!1;if(e.disabled)return!1;if(!1===e.yodo1&&-1!==["ayodo1","iyodo1"].indexOf(n))return!1;if(e.debugMode&&!cleverapps.config.debugMode)return!1;if(e.level=e.level||0,e.episode=e.episode||0,e.projectName&&(e.projectName=cleverapps.toArray(e.projectName),-1===e.projectName.indexOf(s)))return!1;if(e.types&&-1===e.types.indexOf(cleverapps.config.type))return!1;if(e.metha&&-1===e.metha.indexOf(cleverapps.config.metha))return!1;if(e.source&&(Array.isArray(e.source)||(e.source=[e.source]),-1===e.source.indexOf(n)))return!1;if(e.language&&cleverapps.settings.language!==e.language)return!1;if(e.payments&&cleverapps.flags.nopayments)return!1
;if(t.ignoreProgress)return!0;var i=this.episode,o=this.level;return t.future&&("merge"===cleverapps.config.type?o++:i++),i>e.episode||o>=e.level&&i===e.episode},levels.User.prototype.sendLevelPassedEvents=function(){var e=[1,3,5],s=this.getDaysSinceRegistration(),n=this.getHumanReadableNumber();[50,100,200].forEach(function(t){t+1===n&&e.forEach(function(e){s<e&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_PASS_EVENT+"_"+t+"_"+e)},this)},this)},levels.User.prototype.isPassedAll=function(){return this.episode>=levels.episodes.getAmountEpisodes()},levels.User.prototype.incLevel=function(){if(this.isPassedAll())return this.progress++,this.trigger("incLevel"),void this.save();var e=this.level,t=this.episode;if(levels.episodes.currentLevel=void 0,this.level++,this.level===Episode.LEVELS_PER_EPISODE&&(this.level=0,this.incEpisode()),this.trigger("incLevel"),this.calcRating(),this.save(),this.sendLevelPassedEvents(),this.onLevelStatusChanged(t,e),this.onLevelStatusChanged(
this.episode,this.level),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.ACHIEVED_LEVEL),-1!==cleverapps.missionManager.listAvailableTypes().indexOf(Mission.TYPE_SLOT_MACHINE)){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PASS_LEVEL_SLOT_MACHINE_AVAILABLE);var s=cleverapps.missionManager.findByType(Mission.TYPE_SLOT_MACHINE);s&&s.isRunning()&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.PASS_LEVEL_SLOT_MACHINE_ACTIVE)}cleverapps.User.reportRetention&&cleverapps.User.reportRetention()},levels.User.prototype.incEpisode=function(){this.episode++,this.calcRating(),this.save(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_UP),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.FINISH_EPISODE)},levels.User.prototype.getPhysicalLevel=function(){return this.getHumanReadableNumber()},levels.User.prototype.getCurrentLevel=function(){return this.isPassedAll()?Episode.LevelChooseAlgorithm({start:5,seed:this.progress}):{episodeNo:this.episode,levelNo:this.level}},
levels.User.prototype.getVirtualLevel=function(){return this.getHumanReadableNumber()+this.progress},levels.User.prototype.getVirtualDisplayLevel=function(){var e=this.getVirtualLevel(),t=cleverapps.metha.getMainObject();return t.takenLevelsAmount&&(e-=t.takenLevelsAmount()),e},levels.User.prototype.setId=function(e){this.reportChannel&&this.reportChannel(),this.id=e,delete this.idfa,this.save(!1)},levels.User.prototype.getSaveInfo=function(){var e=cleverapps.User.prototype.getSaveInfo.call(this);return cleverapps.extend(e,{episode:this.episode,level:this.level,uniqueStartEvent:this.uniqueStartEvent,progress:this.progress})},levels.User.prototype.initializeNewPlayer=function(){cleverapps.User.prototype.initializeNewPlayer.call(this),this.episode=0,this.level=0,this.progress=0},levels.User.GOLD_FB_CONNECT_REWARD=100;var VersionChecker=function(){this.serverVersion=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SERVER_VERSION,{raw:!0}),this.clientVersion=void 0}
;VersionChecker.prototype.check=function(){cleverapps.RestClient.get("/",{},function(e){this.serverVersion=e,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SERVER_VERSION,e,{raw:!0})}.bind(this),function(){console.log("Error getting server version in VersionChecker!")}.bind(this))},VersionChecker.prototype.needUpdate=function(){return!!this.serverVersion&&parseInt(cleverapps.config.version)<parseInt(this.serverVersion)},VersionChecker.prototype.isNewClientVersionAvailable=function(){return this.clientVersion&&this.clientVersion!==cleverapps.config.version},VersionChecker.prototype.isClientVersionActual=function(){return this.clientVersion&&this.clientVersion===cleverapps.config.version},VersionChecker.prototype.loadClientVersion=function(t){if(t=t||function(){},cc.sys.isNative||cleverapps.isLocalhost()||-1!==["instant","plinga","huzcom"].indexOf(cleverapps.User.calcSource()))return this.clientVersion=cleverapps.config.version,void t()
;var e=cleverapps.config.deployment+window.location.pathname,s=e.lastIndexOf("/");e=e.substr(0,s+1)+"version.json";var n=function(e){console.log("loaded current client version - "+e.version),this.clientVersion=e.version,t()}.bind(this);cleverapps.RestClient.get(e,{},n,function(){console.log("error loading client version from path - "+e),t()})},levels.FPS={run:function(e,t){levels.FPS.fpsInterval||(levels.FPS.episode=e,levels.FPS.level=t,levels.FPS.fpsStatistics=[],levels.FPS.fpsTotalFrames=cc.director.getTotalFrames(),levels.FPS.fpsInterval=setInterval(function(){if(levels.FPS.fpsStatistics.length<levels.FPS.FPS_STATISTICS_MAX_LENGTH){var e=cc.director.getTotalFrames(),t=Math.round(1e3*(e-levels.FPS.fpsTotalFrames)/levels.FPS.FPS_STATISTICS_INTERVAL);60<t&&(t=60),levels.FPS.fpsStatistics.push(t),levels.FPS.fpsTotalFrames=e}else levels.FPS.stop()},levels.FPS.FPS_STATISTICS_INTERVAL))},stop:function(){if(levels.FPS.fpsInterval&&(clearInterval(levels.FPS.fpsInterval),
levels.FPS.fpsInterval=!1),levels.FPS.fpsStatistics&&levels.FPS.fpsStatistics.length){levels.FPS.fpsStatistics.sort();var e=levels.FPS.fpsStatistics[Math.floor(levels.FPS.fpsStatistics.length*levels.FPS.FPS_STATISTICS_PERCENT_VALUE)];console.log("SAVE FPS: "+e),cc.sys.os!==cc.sys.OS_IOS&&void 0===cleverapps.settings.fpsMode&&(e<=levels.FPS.FPS_SWITCH_TO_LOW?(console.log("Auto switch to low fps mode!"),cleverapps.settings.setFpsMode(cleverapps.Settings.FPS_MODE_LOW)):(console.log("Auto switch to high fps mode!"),cleverapps.settings.setFpsMode(cleverapps.Settings.FPS_MODE_HIGH))),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LEVEL_FPS,{episode:levels.FPS.episode,level:levels.FPS.level,fps:e}),levels.FPS.fpsStatistics=!1}}},levels.FPS.FPS_STATISTICS_MAX_LENGTH=15,levels.FPS.FPS_STATISTICS_PERCENT_VALUE=.1,levels.FPS.FPS_STATISTICS_INTERVAL=500,levels.FPS.FPS_SWITCH_TO_LOW=40;var NewVersionWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.NewVersionWindow,
t=cleverapps.UI.generateOnlyText("messages:NewVersionWindow.text1",cleverapps.styles.FONTS.NEW_VERSION_WINDOW_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT,{version:cleverapps.versionChecker.serverVersion,title:Messages.get(cleverapps.config.title)});t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setDimensions(e.dimensions),t.setAnchorPoint2();var s=cleverapps.UI.generateOnlyText("messages:NewVersionWindow.text2",cleverapps.styles.FONTS.NEW_VERSION_WINDOW_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT);s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(e.dimensions),s.setAnchorPoint2();var n=new cleverapps.Layout([s,t],{direction:cleverapps.UI.VERTICAL,padding:e.padding,margin:e.margin});n.setAnchorPoint2(),this._super({title:"messages:NewVersionWindow.Title",name:"newversionwindow",content:n,button:{text:Messages.get("OK"),width:cleverapps.styles.NewVersionWindow.button.width,height:cleverapps.styles.NewVersionWindow.button.height,onPressed:function(){
var e=cleverapps.config[levels.user.source]||cleverapps.config.facebook;cc.sys.openURL(e.url)},width:n.width/2},closeButton:!1})},close:function(){}});cleverapps.styles.NewVersionWindow={dimensions:{width:550,height:0},padding:{x:0,y:50},button:{},margin:40},"horizontal"===cleverapps.config.orientation&&cleverapps.increaseStylesByKoef(cleverapps.styles.NewVersionWindow,1.4);var WaitWindow=Window.extend({onWindowLoaded:function(){var e=this.showLoading();e.setCascadeOpacityEnabled(!0),e.setOpacity(0),e.setVisible(!1);var t=cleverapps.styles.WaitWindow;this._super({name:"waitwindow",noBackground:!0,content:e,closeButton:!1,styles:t,notCloseByTouchInShadow:!0}),e.runAction(new cc.Sequence(new cc.DelayTime(t.delay),new cc.CallFunc(function(){e.setVisible(!0)}),new cc.FadeTo(.3,255)))},showLoading:function(){var e=new cc.Node;if(cleverapps.styles.WaitWindow.text){var t=cleverapps.UI.generateOnlyText(Messages.get("Loading")||"Loading",cleverapps.styles.FONTS.WAIT_WINDOW_TEXT)
;t.setPositionRound(cleverapps.styles.WaitWindow.text),e.addChild(t,1)}var s=new cleverapps.Spine(bundles.main.jsons.wait_json);return e.addChild(s),s.setAnimation(0,"idle",!0),e},closeByBackButton:function(){},popUpAnimation:function(){},closeAnimation:function(e){e()}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{WAIT_WINDOW_TEXT:{size:25,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.WINDOW_WHITE_TEXT_STROKE,shadow:cleverapps.styles.DECORATORS.WHITE_TEXT_SHADOW}}),cleverapps.styles.WaitWindow=cleverapps.overrideStyles(cleverapps.styles.Window,{delay:.2,text:{x:0,y:0}},!0);var StartEpisodeWindow=Window.extend({onWindowLoaded:function(e){this.episode=e,this._super({title:"messages:StartEpisodeWindow.Title"+levels.episodes.currentEpisode,name:"startepisodewindow",content:this.getContent(),closeButton:!1,button:{width:cleverapps.styles.StartEpisodeWindow.button.width,height:cleverapps.styles.StartEpisodeWindow.button.height,text:Messages.get("OK"),
onPressed:this.close.bind(this)}}),cleverapps.audio.playSound(bundles.main.urls.window_effect)},getContent:function(){var e=cleverapps.styles.StartEpisodeWindow,t=new cleverapps.Spine(bundles.main.jsons.yellow_hi_spine_json);t.setAnimation(0,"animation",!0);var s=new cc.Node;s.setAnchorPoint2(),s.setContentSize2(e.animation),s.addChild(t),t.setPositionRound(s.width/2,s.height/2);var n=cleverapps.UI.generateTTFText("messages:StartEpisodeWindow.Text"+this.episode.episodeNo,cleverapps.styles.FONTS.WINDOW_TEXT);n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var i,o,a,r=[s,n];return cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?(a=e.phoneMargin,i=cleverapps.UI.VERTICAL,o=e.text.phoneWidth,r.reverse()):(a=e.margin,i=cleverapps.UI.HORIZONTAL,o=e.text.width),n.setDimensions(o,0),new cleverapps.Layout(r,{direction:i,margin:a,padding:e.padding})}});cleverapps.styles.StartEpisodeWindow={animation:{width:300,height:300},phoneMargin:20,margin:40,text:{phoneWidth:600,width:400},
padding:{x:0,y:40},button:{width:250,height:100}};var StuckPlayerView=cc.Node.extend({ctor:function(e){this._super();var t=cleverapps.styles.StuckPlayerView,s=new cleverapps.UI.Avatar(e);this.addChild(s);var n=cleverapps.humanReadableNumber(e.episode,e.level),i=cleverapps.UI.generateTTFText("messages:StuckWindow.player.text",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT,{level:n});i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setDimensions(t.text.width,0),i.y=t.text.y,this.addChild(i),cleverapps.UI.wrap(this)}});cleverapps.styles.StuckPlayerView={text:{width:195,y:-120}};var StuckWindow=Window.extend({onWindowLoaded:function(e){var t,s=cleverapps.styles.StuckWindow;bundles.stuck_window.jsons.send_help_spine_json&&(t=new cleverapps.Spine(bundles.stuck_window.jsons.send_help_spine_json)).setAnimation(0,"animation",!0);var n=new cc.Node;e.forEach(function(e){n.addChild(new StuckPlayerView(e))}),cleverapps.UI.arrangeWithMargins(n.children,{direction:cleverapps.UI.HORIZONTAL,
margin:s.players.margin}),cleverapps.UI.wrap(n),n.setAnchorPoint2();var i=cleverapps.UI.generateTTFText("messages:StuckWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT);i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setDimensions(s.text.width,0);var o=new cc.Node;o.addChild(n),o.addChild(i),t&&o.addChild(t),cleverapps.UI.arrangeWithMargins(o.children,{margin:s.margin}),cleverapps.UI.wrap(o),o.setAnchorPoint2(),o=cleverapps.UI.wrapWithPadding(o,s.padding),this._super({title:"messages:StuckWindow.title",name:"stuckwindow",minWidth:s.minWidth,content:o,button:{width:s.button.width,height:s.button.height,content:cleverapps.UI.generateTTFText("messages:StuckWindow.button.text",cleverapps.styles.FONTS.BUTTON_TEXT),onPressed:function(){levels.progress.sendStuckFriendsHelp(e,function(){this.closed||this.close()}.bind(this))}.bind(this)}}),cleverapps.audio.playSound(bundles.main.urls.window_effect)},listBundles:function(){return["stuck_window"]},load:function(e,t,s){e=cleverapps.wait(2,e)
,this._super(e,t,s),cleverapps.UI.Avatar.preload(s,cleverapps.waitNoMore(5e3,e))}});StuckWindow.displayIfNeeded=function(){var t=levels.progress.getStuckFriends();0<t.length&&!cleverapps.flags.noviral&&cleverapps.metha.display({focus:"StuckWindow",action:function(e){new StuckWindow(t),cleverapps.metha.onceNoWindowsListener=e}})},cleverapps.styles.StuckWindow={minWidth:600,margin:50,padding:{x:0,y:60},players:{margin:60},text:{width:650},button:{width:380,height:110}};var FinishEpisodeWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.overrideStyles(cleverapps.clone(cleverapps.styles.Window,!0),cleverapps.styles.FinishEpisodeWindow);this.episode=e.episode;var s=this.content=new cc.Node,n="messages:FinishEpisodeWindow.Text"+this.episode.episodeNo;Messages.has(n)||(n="messages:FinishEpisodeWindow.Text");var i=this.text=cleverapps.UI.generateTTFText(n,cleverapps.styles.FinishEpisodeWindow.font);if(i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setDimensions(t.width,0),
s.addChild(i),t.animation){var o=new cleverapps.Spine(t.animation.json);o.setAnimation(0,"animation",!0),s.setLocalZOrder(10),s.addChild(o)}else if(t.image){var a=this.findProperBundle(this.episode),r=new cc.Sprite(bundles[a].urls.episode_finish_image);s.addChild(r),r.setPosition(s.width/2,t.image.y)}if(cleverapps.UI.arrangeWithMargins(s.children,{margin:t.margin,x:t.width/2,y:t.padding.y}),t.text.bg){var l=new cc.Scale9Sprite(t.text.bg.image);l.setContentSize2(i.width+2*t.text.bg.padding.x,i.height+2*t.text.bg.padding.y),this.content.addChild(l),l.setPositionRound(i.getPosition()),l.setLocalZOrder(i.getLocalZOrder()-1)}cleverapps.UI.wrap(s),s.setAnchorPoint2(),this._super({title:"messages:FinishEpisodeWindow.Title",name:"finishepisodewindow",content:s,closeButton:!0,noBackground:t.noBackground,button:{width:t.Button.width,height:t.Button.height,text:Messages.get("OK"),onPressed:this.close.bind(this),bottomPadding:t.BottomButton.bottomPadding},buttons:this.getButtons(),
shareCheckBox:this.getShareOptions(),styles:t})},onShow:function(){this.runAction(new cc.Sequence(new cc.DelayTime(.1),new cc.CallFunc(function(){this.visible&&cleverapps.audio.playSound(bundles.main.urls.congratulate_sfx||bundles.game.urls.win_effect)}.bind(this))))},getButtons:function(){var e=[],t=ShareBonusButton.create(this.getShareOptions());return t&&e.push(t),e},getShareOptions:function(){return{shareBonus:cleverapps.ShareBonus.SHARES.finishEpisode,shareId:cleverapps.ShareBonus.SHARES.finishEpisode.id,toReplace:{episodeTitle:this.episode.getBundle().title||this.episode.episodeNo+1}}},findProperBundle:function(e){if(!cleverapps.styles.FinishEpisodeWindow.animation){for(var t=[],s=0;s<10;s++){var n="finish_episode_"+s,i=n+"_"+cleverapps.settings.language;if(bundles[i])t.push(i);else{if(!bundles[n])break;t.push(n)}}return t[e.episodeNo%t.length]}},listBundles:function(e){var t=["finish_episode_window"],s=this.findProperBundle(e.episode);return s&&t.push(s),t}})
;cleverapps.styles.FinishEpisodeWindow={width:600,height:740,text:{y:165,Dimensions:{y:300}},margin:80,padding:{y:50},image:{y:500,width:700},Button:{width:280,height:110},font:cleverapps.styles.FONTS.WINDOW_TEXT};var HelpFromFriendsWindow=Window.extend({onWindowLoaded:function(e,t){var s=this.styles=cleverapps.styles.HelpFromFriendsWindow;s[e.type]&&(s=cleverapps.overrideStyles(cleverapps.clone(s,!0),s[e.type]));var n=s.height,i=s.width,o=new cc.Node;o.setAnchorPoint(.5,.5);var a=new cc.Node;e.buy?a.setContentSize2(s.container.buy):a.setContentSize2(s.container);var r=new cleverapps.Spine(bundles.help_from_friends.jsons.help_from_friends_json);r.setSkin(cc.game.config.projectName),r.setAnimation(0,e.type,!0),a.addChild(r),e.buy?r.setPositionRound(s.animation.buy):r.setPositionRound(s.animation),o.addChild(a),o.setContentSize2(i,n);var l=cleverapps.UI.generateTTFText("messages:helpFromFriends."+e.type+".text",s.text.font,{amount:e.amount});l.setDimensions(i,0),l.setHorizontalAlignment(
cc.TEXT_ALIGNMENT_CENTER),l.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),o.addChild(l);var c=cleverapps.UI.arrangeWithMargins([l,a],{direction:cleverapps.UI.VERTICAL,margin:s.margin.y,x:s.width/2,y:s.margin.bottom});o.setContentSize2(s.width,c+s.margin.top);var p,d=e.amount,u=function(){cleverapps.audio.playSound(bundles.main.urls.shop_buy_effect),this.closeAnimationCallbacks.push(function(){t(p,e)}),this.close(),e.event&&cleverapps.eventLogger.logEvent(e.event)}.bind(this);if(e.buy){var h=s.animation.buy.person,g=new cleverapps.Spine(h.json,h.scale);g.setAnimation(0,h.animation,!0),a.addChild(g),g.setPositionRound(h),p=new cleverapps.UI.Button({width:s.button.buy.width,height:s.button.buy.height,content:this.getBuyButtonContent(e.price),onClicked:function(){levels.user.takeGold(e.price)&&u()}})}else p=new BonusButton({styles:s.button,reward:d,rewardIcon:e.icon,text:"messages:helpFromFriends."+e.type+".Button.text",onClick:function(){
e.request?cleverapps.social.inviteRandomFriends(u,"helpInviteFriends"):e.video&&cleverapps.rewardedAdsManager.playRewarded(this.createListener(u))}.bind(this)});this._super({title:"messages:helpFromFriends."+e.type+".title",name:"helpfromfriendswindow",content:o}),p.setPositionRound(this.window.width/2,p.height/2+s.button.Margin.y),this.window.addChild(p);var v=bundles.help_from_friends.urls["window_effect_"+e.type]||bundles.main.urls.window_effect;cleverapps.audio.playSound(v)},getBuyButtonContent:function(e){var t=cleverapps.styles.HelpFromFriendsWindow.button.buy,s=new cc.Node;s.setAnchorPoint(.5,.5);var n=new cc.Sprite(bundles.menubar.frames.coin_png);n.setScale(t.coin.scale),s.addChild(n);e=cleverapps.UI.generateTTFText(e,cleverapps.styles.FONTS.BUTTON_TEXT);return s.addChild(e),cleverapps.UI.arrangeWithMargins(s.getChildren(),{direction:cleverapps.UI.HORIZONTAL,margin:t.buyMargin}),cleverapps.UI.wrap(s),s}});HelpFromFriendsWindow.isAvailable=function(e){if(
!cleverapps.user.checkAvailable(HelpFromFriendsWindow.AVAILABLE))return!1;if(e.buy&&!levels.user.canTakeGold(e.price))return!1;if(e.video&&!cleverapps.rewardedAdsManager.isAvailable(RewardedAdsManager.REWARDED))return!1;var t=HelpFromFriendsWindow.load()[e.storageKey||e.type]||0;return Date.now()-t>cleverapps.parseInterval(e.interval)},HelpFromFriendsWindow.chooseMovesHelp=function(){var e=.12;if(config.debugMode&&(e=5),Math.random()>e)return!1;var t=[HelpFromFriendsWindow.TYPES.addmoves].filter(function(e){return HelpFromFriendsWindow.isAvailable(e)});return 0!==t.length&&cleverapps.Random.choose(t)},HelpFromFriendsWindow.showIfCanMoves=function(t){var s=HelpFromFriendsWindow.chooseMovesHelp();s&&cleverapps.metha.display({focus:"HelpFromFriendsWindow.moves",action:function(e){HelpFromFriendsWindow.create(s,t),cleverapps.metha.onceNoWindowsListener=e}})},HelpFromFriendsWindow.showIfCan=function(e,t){HelpFromFriendsWindow.isAvailable(e)&&HelpFromFriendsWindow.create(e,t)},
HelpFromFriendsWindow.create=function(t,s){var e=HelpFromFriendsWindow.load();e[t.storageKey||t.type]=Date.now(),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.HELP_FROM_FRIENDS,e),config.debugMode&&(HelpFromFriendsWindow.TYPES.addmoves.interval="1 minute",HelpFromFriendsWindow.TYPES.addlivesvideo.interval="1 minute",HelpFromFriendsWindow.TYPES.addcoinsvideo.interval="1 minute"),cleverapps.eventLogger.logEvent(t.show),new HelpFromFriendsWindow(t,function(e){s&&s(e,t),t.success.forEach(function(e){cleverapps.eventLogger.logEvent(e)})})},HelpFromFriendsWindow.load=function(){return cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.HELP_FROM_FRIENDS)||{}},HelpFromFriendsWindow.TYPES={showhint:{type:"showhint",interval:"1 day",amount:1,request:!0,icon:!1,success:[cleverapps.EVENTS.HINT_FOR_INVITE_SUCCESS],show:cleverapps.EVENTS.HINT_FOR_INVITE_SHOW},addmoves:{type:"addmoves",storageKey:"addmoves",interval:"1 hour",amount:3,buy:!0,price:50,icon:"#main-moves_icon.png",success:[
cleverapps.EVENTS.MOVES_FOR_BUY_SUCCESS],show:cleverapps.EVENTS.MOVES_FOR_BUY_SHOW},addlivesvideo:{type:"addlivesvideo",interval:"30 minutes",amount:1,video:!0,icon:bundles.help_from_friends.frames.add_lives_icon,success:[cleverapps.EVENTS.LIVES_FOR_VIDEO_SUCCESS,cleverapps.EVENTS.REWARDED_ADD_LIVES],show:cleverapps.EVENTS.LIVES_FOR_VIDEO_SHOW},addcoinsvideo:{type:"addcoinsvideo",interval:"30 minutes",amount:30,video:!0,success:[cleverapps.EVENTS.COINS_FOR_VIDEO_SUCCESS,cleverapps.EVENTS.REWARDED_ADD_COINS],show:cleverapps.EVENTS.COINS_FOR_VIDEO_SHOW}},HelpFromFriendsWindow.ADD_MOVES_CLEAR_INTERVAL="30 minutes",HelpFromFriendsWindow.AVAILABLE={episode:0,level:9},"merge"===cleverapps.config.type&&(HelpFromFriendsWindow.AVAILABLE={disabled:!0}),HelpFromFriendsWindow.prototype.listBundles=function(){var e=["help_from_friends"];return-1!==["adventure","runes"].indexOf(cleverapps.config.name)&&e.push("dialogues"),e},cleverapps.styles.HelpFromFriendsWindow={text:{
font:cleverapps.styles.FONTS.WINDOW_TEXT,y:110,dimension:{y:150}},container:{width:200,height:180,buy:{width:200,height:280}},animation:{buy:{x:240,y:110,person:{x:-60,y:110,scale:.8,json:bundles.dialogues.jsons.default_json,animation:"animation"}},x:100,y:80},width:620,y:70,margin:{bottom:70,y:30,top:60},button:{width:320,height:120,buy:{width:260,height:100,buyMargin:20,coin:{scale:1}},Text:{font:cleverapps.styles.FONTS.BUTTON_TEXT,offsetX:0,offsetY:18},RewardText:{font:cleverapps.styles.FONTS.SHARE_BUTTON_REWARD_TEXT,offsetX:-18,offsetY:-24},RewardCoins:{scale:.5,offsetX:20,offsetY:-24},Margin:{y:50}}};var BeatFriendView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint(.5,.5);var t=new cleverapps.UI.Avatar(e);this.addChild(t),this.avatar=t,this.setContentSize(t.width*t.scale,t.height*t.scale),t.setPositionRound(this.width/2,t.height/2);var s=new cc.Sprite(bundles.main.frames.levelstart_cup_1);s.setPositionRound(
this.avatar.width+cleverapps.styles.BeatFriendView.Cup.Margin.x,this.avatar.y),s.setLocalZOrder(1),this.addChild(s),this.cup=s}});cleverapps.styles.BeatFriendView={Cup:{Margin:{x:10}}};var BeatFriendWindow=Window.extend({onWindowLoaded:function(e,t){this.friendId=e,this.friend=cleverapps.friends.getById(e),this.level=t,cleverapps.social.sendActivity&&cleverapps.social.sendActivity(cleverapps.Social.ACTIVITY.PASSED_FRIEND,{userName:cleverapps.friends.getPlayer().name,friendName:this.friend.name});var s=cleverapps.styles.BeatFriendWindow,n=new cc.Node;n.setAnchorPoint(.5,.5),n.setContentSize(s.width,s.height),this.content=n;var i=cleverapps.UI.generateTTFText("messages:LevelFriendBeatWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT,{friendName:this.friend.name});i.setDimensions(s.Text.width,0),i.setPositionRound(n.width/2,n.height-i.height/2+s.Text.Margin.y),i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.content.addChild(i);var o=new cc.Sprite(
bundles.beatfriendwindow.frames.beat_friend_bg_png);o.setScale(s.bg.scale),o.setPositionRound(n.width/2+s.bg.offsetX,o.height*o.scale/2+s.bg.offsetY),n.addChild(o),this.bg=o,this.addAvatars(),this._super({title:"messages:LevelFriendBeatWindow.title",name:"beatfriendwindow",content:n,buttons:this.listButtons()}),cleverapps.audio.playSound(bundles.main.urls.window_effect),this.customize()},customize:function(){},addAvatars:function(){var e=this.content,t=new BeatFriendView(cleverapps.friends.getById(this.friendId)),s=new BeatFriendView(cleverapps.friends.getPlayer());e.addChild(t),e.addChild(s);var n=cleverapps.styles.BeatFriendWindow;t.setPositionRound(e.width/2+n.Animation.Friend.Margin.x,this.bg.y+n.Animation.Friend.Margin.y),t.originalPosition=t.getPosition(),s.setPositionRound(e.width/2+n.Animation.User.Margin.x,this.bg.y+n.Animation.User.Margin.y),s.originalPosition=s.getPosition(),this.friend=t,this.user=s},onShow:function(){var a=this.user;a.stopAllActions(),a.setPositionRound(
this.user.originalPosition),a.scale=1,a.cup.opacity=0,a.cup.scale=0;var e=cleverapps.styles.BeatFriendWindow.Animation;[cc.pRound(e.User.MoveBy[0].x,e.User.MoveBy[0].y),cc.pRound(e.User.MoveBy[1].x,e.User.MoveBy[1].y),cc.pRound(e.User.MoveBy[2].x,e.User.MoveBy[2].y)].forEach(function(e,t){a.runAction(new cc.Sequence(new cc.DelayTime(.4*t*1.5+.2),new cc.CallFunc(function(e,t){var s=a.getPosition(),n=cc.pRound(s.x+e.x,s.y+e.y),i=cc.pRound((s.x+2*n.x)/3,(s.y+2*n.y)/3+e.x*(t?1.2:2)),o=cc.pRound((s.x+i.x)/2,(s.y+i.y)/2);a.runAction(new cc.Spawn(new cc.BezierTo(1.5*(t?.5:.4),[o,i,n])))}.bind(this,e,2===t))))}),a.runAction(new cc.Sequence(new cc.DelayTime(1.2*1.5+.2),new cc.ScaleTo(.3*1.5,1.4).easing(cc.easeBackOut()),new cc.CallFunc(function(){a.runAction(new cc.RepeatForever(new cc.Sequence(new cc.ScaleTo(.5,1.45),new cc.ScaleTo(.5,1.4))))}))),a.cup.runAction(new cc.Sequence(new cc.DelayTime(2.3),new cc.Spawn(new cc.ScaleTo(.3*1.5,1).easing(cc.easeBackOut()),new cc.FadeIn(.3*1.5))))
;var t=void 0===BeatFriendWindow.SOUND_DELAY?2.3:BeatFriendWindow.SOUND_DELAY;this.runAction(new cc.Sequence(new cc.DelayTime(t),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.main.urls.beat_friend_effect)})));var s=this.friend;s.stopAllActions(),s.setPositionRound(s.originalPosition),s.scale=1.4,s.cup.visible=!1,s.runAction(new cc.Sequence(new cc.DelayTime(1.7),new cc.Spawn(new cc.ScaleTo(.3*1.5,1),new cc.MoveBy(.3*1.5,cc.pRound(e.Friend.MoveBy.x,e.Friend.MoveBy.y)))))},onHide:function(){this.user&&(this.user.stopAllActions(),this.user.cup&&this.user.cup.stopAllActions()),this.friend&&this.friend.stopAllActions()},listButtons:function(){if(this.level.isRegular()){var e=ShareBonusButton.create({shareBonus:cleverapps.ShareBonus.SHARES.beatFriend,toReplace:{levelNo:levels.user.getProgress(),friendId:this.friendId},callback:function(){this.close()}.bind(this)});if(e)return[e]}var t=cleverapps.styles.BeatFriendWindow;return[new BottomButton(this,{width:t.Button.width,
height:t.Button.height,text:Messages.get("OK"),onPressed:this.close.bind(this)})]}});BeatFriendWindow.prototype.listBundles=function(){return["beatfriendwindow"]},BeatFriendWindow.AVAILABLE={episode:0,level:5},cleverapps.styles.BeatFriendWindow={width:600,height:600,bg:{offsetX:0,offsetY:80,scale:2},Button:{width:280,height:110,Margin:{x:26}},Animation:{User:{MoveBy:{0:{x:25,y:10},1:{x:35,y:10},2:{x:230,y:20}},Margin:{x:-200,y:-50}},Friend:{MoveBy:{x:-40,y:-20},Margin:{x:-50,y:-40}}},Text:{Margin:{y:-80},width:500},share:{}};var FinisherWindow=Window.extend({onWindowLoaded:function(){var e=this.generateContent();this._super({title:"messages:FinisherWindow.title",name:"finisherwindow",content:e,button:{width:cleverapps.styles.FinisherWindow.Button.width,height:cleverapps.styles.FinisherWindow.Button.height,text:Messages.get("FinisherWindow.Button.text"),onPressed:function(){cc.sys.openURL(cleverapps.bySource(cleverapps.config.helpURL))}}}),cleverapps.audio.playSound(
bundles.game.urls.win_effect),this.addChild(new Fireworks)},generateContent:function(){var e=cleverapps.styles.FinisherWindow,t=new cc.Node;t.setAnchorPoint(.5,.5),this.content=t;var s=function(e){var t={android:bundles.store_links.urls.android_png,ios:bundles.store_links.urls.ios_png,amazon:bundles.store_links.urls.amazon_png}[e],s=cleverapps.config[e]&&cleverapps.config[e].url;if(s&&t){var n=new cc.Sprite(t);return cleverapps.UI.applyHover(n),cleverapps.UI.onClick(n,function(){cc.sys.openURL(s)}),n}};this.addText("messages:FinisherWindow.GroupText");var n=cleverapps.User.calcSource();if(cc.sys.isNative||cleverapps.isInstant()||-1!==["mobile_ok","web_ok","mobile_vk","web_vk","web_mm","mobile_mm"].indexOf(n)){var i=s(n);i&&this.addButtons([i]),this.addText("messages:FinisherWindow.AllAndStoreText")}else{var o=["android","ios","amazon"].map(s).filter(function(e){return void 0!==e});0<o.length&&(this.addButtons(o.slice(0,2)),this.addText("messages:FinisherWindow.StoreText")),
this.addText("messages:FinisherWindow.AllPassedText")}return cleverapps.UI.arrangeWithMargins(t.getChildren(),{direction:cleverapps.UI.VERTICAL,margin:e.Text.margin,y:e.bottomPadding.y}),cleverapps.UI.wrap(t),t=cleverapps.UI.wrapWithPadding(t,e.padding)},addText:function(e){var t=cleverapps.styles.FinisherWindow.Text,s=cleverapps.UI.generateTTFText(e,t.font);s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(t.width,0),this.content.addChild(s)},addButtons:function(e){var t=cleverapps.styles.FinisherWindow,s=new cc.Node;e.forEach(function(e){s.addChild(e)}),cleverapps.UI.arrangeWithMargins(s.getChildren(),{direction:cleverapps.UI.HORIZONTAL,margin:t.margin}),cleverapps.UI.wrap(s),s=cleverapps.UI.wrapWithPadding(s,{x:0,y:10}),this.content.addChild(s)}});FinisherWindow.prototype.listBundles=function(){return["store_links"]},cleverapps.styles.FinisherWindow={bottomPadding:{y:0},padding:{x:0,y:10},GroupInfo:{width:450,heigth:70},Text:{
font:cleverapps.styles.FONTS.SMALL_TEXT_BROWN,paddingTop:10,paddingBottom:10,width:550,margin:10},Button:{width:460,height:100},paddingTop:25,paddingBottom:50,width:500,margin:30},CustomSyncers.extractors.result=function(e){if(cleverapps.config.results){var t=[];if(e)t.push(e);else for(var s=cleverapps.user.episode;0<=s;s--)if(!cleverapps.userresult.isEmpty(s)){var n=cleverapps.userresult.getEpisodeInfo(s);n.episodeNo=s,t.push(n)}return 0<t.length?t.map(function(e){return{episode:e.episodeNo,scores:JSON.stringify(UserResult.ParseLib.objToArray(e.scores)),stars:JSON.stringify(UserResult.ParseLib.objToNumber(e.stars))}}):void 0}},CustomSyncers.importerData.result=function(e){cleverapps.config.results&&e.forEach(function(e){var t=e.episode,s=UserResult.ParseLib.parseScores(e.scores),n=UserResult.ParseLib.parseStars(e.stars);Object.keys(s).forEach(function(e){n.hasOwnProperty(e)&&cleverapps.userresult.updateLevel(t,e,s[e],n[e],{force:!0,skipUpdate:!0})})})},levels.GameHints=function(){
var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.LEVEL_HINTS);this.usedHints="number"==typeof e?e:0},levels.GameHints.prototype.reset=function(){this.isCurrentLevel()&&(this.usedHints=0,this.save())},levels.GameHints.prototype.isCurrentLevel=function(){return Game.currentGame&&Game.currentGame.level.isCurrentLevel()},levels.GameHints.prototype.addHint=function(){this.isCurrentLevel()&&(this.usedHints++,this.save())},levels.GameHints.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.LEVEL_HINTS,this.usedHints)};var Lantern=function(e){this.mission=e,this.onGiveBonusListener=function(){},this.load()};Lantern.prototype.isActive=function(e){return e?e.isCurrentLevel():levels.user.isCurrentLevel(cleverapps.environment.levelNo,cleverapps.environment.episodeNo)},Lantern.getMaxStreak=function(){return 3},Lantern.prototype.giveBonus=function(i){var o=this.getCurrentStreak();cleverapps.audio.playSound(bundles.game.urls.lanterngivebonus_effect),
Game.currentGame.counter.setTimeout(function(){var e=Lantern.BONUSES_BY_SERIA[o];for(var t in e){if(t===Lantern.BONUS_TYPES.HEROES){var s=Game.currentGame.field.addRandomCombo(e[t]);s<e[t]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LANTERN_COMBO_NO_PLACE,{amount:e[t]-s})}if(t===Lantern.BONUS_TYPES.MULTICOLOR){var n=Game.currentGame.field.addRandomMulticolor(e[t]);n<e[t]&&cleverapps.eventLogger.logEvent(cleverapps.EVENTS.LANTERN_MULTICOLOR_NO_PLACE,{amount:e[t]-n})}t===Lantern.BONUS_TYPES.MOVES&&(Game.currentGame.setMoves(Game.currentGame.moves+e[t],{animate:!0}),Game.currentGame.beginMoves+=e[t])}i()}.bind(this),1e3*cleverapps.styles.Lantern.duration),this.onGiveBonusListener()},Lantern.prototype.save=function(){this.mission.result=0,this.mission.update(this.streak)},Lantern.prototype.load=function(){this.streak=this.mission.result,this.savedStreak=this.streak,this.beforeShownProgress=this.streak},Lantern.prototype.getCurrentStreak=function(){return this.savedStreak},
Lantern.prototype.restoreSavedStreak=function(){this.streak=this.savedStreak,this.save()},Lantern.prototype.onStart=function(){this.savedStreak=this.streak,this.streak=0,this.save()},Lantern.prototype.onWin=function(){this.streak=Math.min(this.savedStreak+1,Lantern.getMaxStreak()),this.savedStreak=this.streak,this.save()},Lantern.prototype.onLose=function(){this.streak=0,this.savedStreak=0,this.beforeShownProgress=0,this.save()},Lantern.Get=function(){return cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN)&&cleverapps.missionManager.getRunningMission(Missions.SEMAPHORE_CUSTOM_LANTERN).logic.lantern},Lantern.IsActive=function(e){var t=Lantern.Get();return t&&t.isActive(e)},Lantern.GetStreak=function(e){var t=Lantern.Get();return t&&t.isActive(e)&&0<t.streak?t.streak:0},Lantern.BONUS_TYPES={},Lantern.BONUS_TYPES.HEROES="heroes",Lantern.BONUS_TYPES.MULTICOLOR="multicolor",Lantern.BONUS_TYPES.MOVES="moves",Lantern.BONUSES_BY_SERIA={1:{heroes:5},2:{heroes:5,
moves:3},3:{heroes:5,moves:3,multicolor:1}},cleverapps.styles.Lantern={duration:.4};var LanternView=cc.Node.extend({ctor:function(e,t){this._super(),this.lantern=e,this.setAnchorPoint2(),this.setLocalZOrder(2),this.styles=cleverapps.styles.LanternView,this.animation=new cleverapps.Spine(bundles.lantern.jsons.lantern_game_json),this.addChild(this.animation),this.setContentSize2(this.animation.getContentSize()),this.animation.setPositionRound(this.width/2,this.height/2),(t=t||cc.director.getRunningScene().fieldView).addChild(this),this.lantern.onGiveBonusListener=this.createListener(this.hide.bind(this))},show:function(){this.animation.setAnimation(0,"idle_"+this.lantern.getCurrentStreak(),!0);var e=this.getParent().convertToNodeSpace(cc.p(-this.width,0));e.x||(e.x=0),e.y=this.styles.show.y;var t=1/this.parent.scale,s=this.styles.offset.x*(t<1?t:1),n=this.styles.offset.y*(t<1?t:1),i=cc.p(this.parent.width/2+s,this.parent.height/2+n);this.setPositionRound(e),
"heroes"===cleverapps.config.name?this.runAction(new cc.MoveTo(.5,i)):(this.setRotation(45),this.runAction(new cc.Spawn(new cc.MoveTo(.5,i),new cc.RotateTo(.5,0)))),cleverapps.audio.playSound(bundles.game.urls.lanternshow_effect)},hide:function(){var t=this.getParent().convertToNodeSpace(cc.p(-this.width,0));t.y=this.styles.hide.y,this.animation.setCompleteListener(function(){this.animation.setAnimation(0,"idle_"+this.lantern.getCurrentStreak(),!0);var e=new cc.Spawn(new cc.MoveTo(.5,t),new cc.RotateTo(.4,-45));"heroes"===cleverapps.config.name&&(e=new cc.MoveTo(.5,t)),this.runAction(new cc.Sequence(e,new cc.RemoveSelf))}.bind(this)),this.animation.setAnimation(0,"out_"+this.lantern.getCurrentStreak(),!1),cleverapps.audio.playSound(bundles.game.urls.lanternhide_effect)}});cleverapps.styles.LanternView={offset:{x:0,y:150},show:{y:100,delay:1},hide:{y:1e3}};var FriendSorter=function(){this.data=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SORTER),this.data||(this.data={}),
cleverapps.config.debugMode&&(FriendSorter.PRIVACY_INTERVAL="1 minute"),this.update()};FriendSorter.PRIVACY_INTERVAL="1 day",FriendSorter.prototype.update=function(){var e={},t=Date.now(),s=!1;for(var n in this.data)this.data[n]+cleverapps.parseInterval(FriendSorter.PRIVACY_INTERVAL)>t?e[n]=this.data[n]:s=!0;s&&(this.data=e,this.save())},FriendSorter.prototype.save=function(){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SORTER,this.data)},FriendSorter.isActivePlayer=function(e){return 1<=e.episode||6<=e.level},FriendSorter.prototype.canUse=function(e){return void 0===this.data[e]},FriendSorter.prototype.markUsed=function(e){e.forEach(function(e){this.data[e]=Date.now()},this),this.save()},FriendSorter.prototype.listActiveFriends=function(){return levels.progress.data?levels.progress.data.filter(FriendSorter.isActivePlayer).map(function(e){return cleverapps.friends.getById(e.id)}).filter(function(e){return e}):cleverapps.friends.listFriends()},
FriendSorter.prototype.listInactiveFriends=function(){var e=cleverapps.invitalbleFriends.listFriends();if(levels.progress.data){var t=levels.progress.data.filter(function(e){return!FriendSorter.isActivePlayer(e)});e=e.concat(t.map(function(e){return cleverapps.friends.getById(e.id)})).filter(function(e){return e})}return this.update(),e=e.filter(function(e){return e&&void 0===this.data[e.id]},this)};var SelectFriendWindow=Window.extend({onWindowLoaded:function(e,t){var s=new cc.Node;s.setAnchorPoint(.5,.5),this.content=s,this.type=e,cleverapps.config.debugMode&&(SelectFriendWindow.PROCESS_PERIOD="300 second");var n=cleverapps.friends.listFriends().concat(cleverapps.invitalbleFriends.listFriends());n.length?this.generateFriendsContent(n,t):this.generateNoFriendsContent();var i=cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.SelectFriendWindow.window,!0);this._super({title:SelectFriendWindow.ByType[this.type].title,name:"selectfriendwindow"+e,content:s,styles:i}),
cleverapps.audio.playSound(bundles.main.urls.window_effect)},addCheck:function(e,t){var s=new cc.Sprite(bundles.main.frames.select_friend_checkbox_selected);t&&cleverapps.UI.convertToGrayScale(s),s.setPosition(e.width/2,e.height/2),e.check=s,e.addChild(s)},checkElementByFriendId:function(e,t){var s=this.selectedElements.friends.indexOf(e);-1!==s?(this.selectedElements.data[e].checked=!1,this.selectedElements.data[e].check.removeFromParent(),this.selectedElements.data[e]=void 0,this.selectedElements.friends.splice(s,1)):(this.addCheck(t),t.checked=!0,this.selectedElements.data[e]=t,this.selectedElements.friends.push(e),this.selectedElements.friends.length>SelectFriendWindow.MAX_SELECTED&&this.checkElementByFriendId(this.selectedElements.friends[0])),this.updateSelectedContent()},generateCheckbox:function(s,n){var e=cleverapps.styles.SelectFriendWindow.withFriends.friendContainer.checkBox;if(!this.processTimeData)for(var t in this.processTimeData=cleverapps.DataLoader.load(
SelectFriendWindow.ByType[this.type].dataLoaderType()),this.processTimeData||(this.processTimeData={}),this.processTimeData)this.processTimeData[t]<Date.now()-cleverapps.parseInterval(SelectFriendWindow.PROCESS_PERIOD)&&(this.processTimeData[t]=void 0);var i=function(){cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(e){var t=n.convertTouchToNodeSpace(e);return!!cc.rectContainsPoint(cc.rect(0,0,n.width,n.height),t)&&(t=this.friendsContainer.convertTouchToNodeSpace(e),cc.rectContainsPoint(cc.rect(0,0,this.friendsContainer.width,this.friendsContainer.height),t))}.bind(this),onTouchEnded:function(e){var t=n.convertTouchToNodeSpace(e);if(!cc.rectContainsPoint(cc.rect(0,0,n.width,n.height),t))return!1;t=this.friendsContainer.convertTouchToNodeSpace(e),cc.rectContainsPoint(cc.rect(0,0,this.friendsContainer.width,this.friendsContainer.height),t)&&this.checkElementByFriendId(s.id,o)}.bind(this)},n),n.onMouseOver=function(){n.bg&&n.bg.setColor(
cleverapps.styles.COLORS.HOVER),o.setScale(1.1)},n.onMouseOut=function(){n.bg&&n.bg.setColor(cleverapps.styles.COLORS.WHITE),o.setScale(1)},cleverapps.UI.applyHover(n)}.bind(this),o=this.generateCheckBoxBg();if(o.setPositionRound(e.x,n.height/2+cleverapps.styles.SelectFriendWindow.Avatar.y),n.fullData={checkBox:o,id:s.id},n.addChild(o),this.processTimeData&&this.processTimeData[s.id]&&this.processTimeData[s.id]>Date.now()-cleverapps.parseInterval(SelectFriendWindow.PROCESS_PERIOD)){var a={showHours:!0,font:cleverapps.styles.FONTS.WINDOW_SMALL_TEXT,imageFont:!1};console.log("disabled",n);var r=this.processTimeData[s.id]+cleverapps.parseInterval(SelectFriendWindow.PROCESS_PERIOD)-Date.now(),l=new cleverapps.CountDownView(new cleverapps.CountDown(r),a),c=function(){l.refresh(),l.removeFromParent(),n.name.setVisible(!0),n.avatar.setOpacity(255),o.setOpacity(255),n.coinsIcon&&n.coinsIcon.setOpacity(255),o.check.removeFromParent(),n.notActive=!1,i()}.bind(this);return l.onEnter=function(){
cleverapps.CountDownView.prototype.onEnter.call(this),l.countDown.onFinish=l.createListener(c)},l.setPosition(n.width/2,e.timer.y),n.addChild(l),n.name.setVisible(!1),this.addCheck(o,!0),o.setOpacity(150),n.avatar.setOpacity(120),n.notActive=!0,void(n.coinsIcon&&n.coinsIcon.setOpacity(150))}n.notActive=!1,i()},generateCheckBoxBg:function(){var e=new cc.Sprite(bundles.main.frames.select_friend_checkbox);return e.setAnchorPoint(.5,.5),e.setCascadeOpacityEnabled(!0),e},generateFriendContent:function(e,t){var s=cleverapps.styles.SelectFriendWindow.withFriends.friendContainer,n=new cc.Node;if(n.setAnchorPoint(.5,.5),n.setContentSize(s.width,s.height),bundles.select_friend_window.frames.friend_bg_png){var i=cleverapps.UI.createScale9Sprite(bundles.select_friend_window.frames.friend_bg_png);i.setAnchorPoint(.5,.5),i.setContentSize(s.width,s.height),i.setPosition(n.width/2,n.height/2),n.addChild(i),n.bg=i}var o=new cleverapps.UI.Avatar(e);o.setPositionRound(
cleverapps.styles.SelectFriendWindow.Avatar.x,n.height/2+cleverapps.styles.SelectFriendWindow.Avatar.y),o.setAnchorPoint2(),(n.avatar=o).setCascadeOpacityEnabled(!0),n.addChild(o);var a=cleverapps.UI.generateTTFText(e.name,cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);return a.setDimensions(s.Name.width,s.Name.height),a.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),a.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP),n.addChild(a),a.setPositionRound(n.width/2,s.Name.y),n.name=a,this.generateCheckbox(e,n),n},getButtonContent:function(){var e=new cc.Node;e.setAnchorPoint2();var t=cleverapps.UI.generateTTFText(SelectFriendWindow.ByType[this.type].button,cleverapps.styles.FONTS.BUTTON_TEXT);return e.buttonText=t,e.addChild(t),e.setContentSize(t.width,t.height),t.setPositionRound({align:"center"},{align:"center"}),e},generateFriendsContent:function(e,s){this.selectedElements={friends:[],data:{}};var t=cleverapps.styles.SelectFriendWindow.withFriends;this.content.setContentSize(t.width,
t.height);var n=new cleverapps.UI.Button({content:this.getButtonContent(),width:t.Button.width,height:t.Button.height,font:cleverapps.styles.FONTS.BUTTON_TEXT,onClicked:function(){this.selectedElements.friends.length&&(this.close(),s(this.selectedElements.friends,function(){if(this.processTimeData){for(var e=0;e<this.selectedElements.friends.length;e++)this.processTimeData[this.selectedElements.friends[e]]=Date.now();cleverapps.DataLoader.save(SelectFriendWindow.ByType[this.type].dataLoaderType(),this.processTimeData)}}.bind(this)))}.bind(this),clickThrottle:cleverapps.UI.SOCIAL_CLICK_THROTTLE});n.setPositionRound(this.content.width/2+t.Button.x,t.Button.y),this.button=n,this.content.addChild(n);var i=new cc.Node;i.setAnchorPoint(0,.5),i.setPositionRound(t.SelectedBlock.x,t.SelectedBlock.y);var o=this.generateCheckBoxBg();o.setAnchorPoint(0,.5),o.setPositionRound(0,o.height/2),i.addChild(o);var a=cleverapps.UI.generateTTFText("messages:Selected",cleverapps.styles.FONTS.WINDOW_TEXT)
;a.setPositionRound(o.width+t.SelectedBlock.margin.x,o.y+a.height/2),a.setAnchorPoint(0,.5),i.addChild(a);var r=cleverapps.UI.generateTTFText("",cleverapps.styles.FONTS.WINDOW_TEXT);r.setAnchorPoint(.5,.5),this.selectedAmountText=r,i.addChild(r),this.updateSelectedContent(),r.setPositionRound(a.x+a.width/2,o.y-r.height/2),i.setContentSize(o.width+a.width+t.SelectedBlock.margin.x,o.height),this.content.addChild(i),i.onMouseOver=function(){o.setScale(1.1)},i.onMouseOut=function(){o.setScale(1)},cleverapps.UI.applyHover(i),cleverapps.UI.onClick(i,function(e){this.switchSelectAll(o)}.bind(this));var l=new cc.Node;this.friendContainers=e.map(function(e,t){return{container:this.generateFriendContent(e,s),order:t}},this),levels.friendSorter.update(),this.friendContainers.sort(function(e,t){return e.container.notActive!==t.container.notActive?e.container.notActive?1:-1:levels.friendSorter.canUse(e.container.fullData.id)!==levels.friendSorter.canUse(t.container.fullData.id
)?levels.friendSorter.canUse(e.container.fullData.id)?-1:1:e.order-t.order}),this.friendContainers.length>SelectFriendWindow.MAX_ROWS_AMOUNT*SelectFriendWindow.IN_ROW&&(this.friendContainers=this.friendContainers.slice(0,SelectFriendWindow.MAX_ROWS_AMOUNT*SelectFriendWindow.IN_ROW));for(var c=0;c<this.friendContainers.length;c++)l.addChild(this.friendContainers[c].container),this.friendContainers[c].container.setPositionRound(c%SelectFriendWindow.IN_ROW*(t.friendContainer.margin+t.friendContainer.width)+t.friendContainer.width/2,l.height-Math.floor(c/SelectFriendWindow.IN_ROW)*(t.friendContainer.margin+t.friendContainer.height)-t.friendContainer.height/2);l=cleverapps.UI.wrap(l),this.friendsContainer=new cleverapps.UI.ScrollView(l),this.friendsContainer.setContentSize(l.width+cleverapps.styles.SelectFriendWindow.scroll.margin.mx[0],t.friendsContainer.height),this.friendsContainer.setAnchorPoint(.5,0),this.friendsContainer.setPositionRound(this.content.width/2,t.friendsContainer.y),
cc.sys.isNative||this.switchSelectAll(o),this.content.addChild(this.friendsContainer)},switchSelectAll:function(e){if(e.selected){e.selected=!1,e.check.removeFromParent();for(var t=this.selectedElements.friends.length-1;0<=t;t--)this.checkElementByFriendId(this.selectedElements.friends[t])}else{var s=!1;for(t=0;t<this.friendContainers.length;t++){var n=this.friendContainers[t].container,i=n.fullData;this.selectedElements.friends.length<SelectFriendWindow.MAX_SELECTED&&!n.notActive&&!i.checkBox.checked&&(this.checkElementByFriendId(i.id,i.checkBox),s=!0)}s&&(e.selected=!0,this.addCheck(e))}},updateSelectedContent:function(){this.selectedAmountText.setString(this.selectedElements.friends.length+"/"+SelectFriendWindow.MAX_SELECTED),this.selectedElements.friends.length?this.button.enable():this.button.disable()},generateNoFriendsContent:function(){var e=cleverapps.styles.SelectFriendWindow.noFriends;this.content.setContentSize(e.width,e.height);var t=cleverapps.UI.generateTTFText(
SelectFriendWindow.ByType[this.type].noFriends,cleverapps.styles.FONTS.WINDOW_TEXT);t.setPositionRound(this.content.width/2,e.Text.y),t.setDimensions(e.Text.width,e.Text.height),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.content.addChild(t);var s=new cleverapps.UI.Button({text:Messages.get("SettingsWindow.InviteFriends"),width:e.Button.width,height:e.Button.height,font:cleverapps.styles.FONTS.BUTTON_TEXT,onClicked:function(){cleverapps.social.inviteFriendsWindow(function(){this.close()}.bind(this))}.bind(this)});s.setPositionRound(this.content.width/2,e.Button.y),this.content.addChild(s)}});SelectFriendWindow.ByType={askLives:{title:"messages:SelectFriendWindow.askLives.title",button:"messages:Ask",noFriends:"messages:SelectFriendWindow.askLives.noFriendsText",dataLoaderType:function(){return cleverapps.DataLoaderTypes.ASKED_LIVES}},askStars:{title:"messages:SelectFriendWindow.askStars.title",button:"messages:Ask",
noFriends:"messages:SelectFriendWindow.askStars.noFriendsText",dataLoaderType:function(){return cleverapps.DataLoaderTypes.ASKED_STARS}}},SelectFriendWindow.PROCESS_PERIOD="1 day",SelectFriendWindow.MAX_SELECTED=10,SelectFriendWindow.MAX_ROWS_AMOUNT=10,SelectFriendWindow.IN_ROW=3,cleverapps.styles.SelectFriendWindow={Avatar:{x:140,y:20},scroll:{margin:{mx:[30]}},withFriends:{width:670,height:750,friendsContainer:{height:580,y:100},friendContainer:{height:180,width:210,margin:20,Name:{width:200,height:40,y:24},checkBox:{x:42,timer:{y:24,height:20}}},Button:{width:300,height:120,y:0,x:190,margin:10},SelectedBlock:{y:0,x:0,margin:{x:20}}},noFriends:{width:550,height:500,Text:{y:250,width:550,height:400},Button:{width:450,height:120,y:0}}},levels.FriendRequests=function(){this.load(),this.lastServerReload=0,this.onNewListener=function(){},this.onChangeListener=function(){},cleverapps.flags.noviral&&this.deleteFakeRequests(),this.serverReload(),FakeRequestSender.sendIfNeed(this),
setInterval(function(){this.serverReload(),FakeRequestSender.sendIfNeed(this)}.bind(this),cleverapps.parseInterval("1 minute"))},levels.FriendRequests.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.FRIEND_REQUESTS);if(e){this.notProcessed=[];var t=this.listAvailableTypes();e.notProcessed=e.notProcessed.filter(function(e){return-1!==t.indexOf(e.type)});for(var s=0;s<e.notProcessed.length;s++)this.notProcessed.push(levels.FriendRequest.createFriendRequest(e.notProcessed[s]));this.processedIds=e.processedIds}else this.notProcessed=[],this.processedIds=[]},levels.FriendRequests.prototype.save=function(){for(var e=[],t=0;t<this.notProcessed.length;t++)e.push(this.notProcessed[t].getData());cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.FRIEND_REQUESTS,{notProcessed:e,processedIds:this.processedIds})},levels.FriendRequests.prototype.idInNotProcessed=function(e){for(var t=0;t<this.notProcessed.length;t++)if(this.notProcessed[t].getId()===e
)return!0;return!1},levels.FriendRequests.prototype.lastNotProcessedId=function(){for(var e=this.notProcessed.length-1;0<=e;e--)if(this.notProcessed[e].canView())return this.notProcessed[e].id;return!1},levels.FriendRequests.prototype.existNotProcessed=function(){for(var e=0;e<this.notProcessed.length;e++)if(this.notProcessed[e].canView())return!0;return!1},levels.FriendRequests.prototype.existRequestFrom=function(e){for(var t=0;t<this.notProcessed.length;t++)if(this.notProcessed[t].canView()&&this.notProcessed[t].from===e)return!0;return!1},levels.FriendRequests.prototype.existRequestTypes=function(e){for(var t=0;t<this.notProcessed.length;t++)if(0<=e.indexOf(this.notProcessed[t].type))return!0;return!1},levels.FriendRequests.prototype.processById=function(e){for(var t=!1,s=!1,n=0;n<this.notProcessed.length;n++)if(this.notProcessed[n].getId()===e){this.notProcessed[n].onServer()&&(s=!0),this.notProcessed.splice(n,1),t=!0;break}s&&(this.processedIds.push(e),this.deleteOnServerById(e)),
t&&this.onChangeListener(),this.save()},levels.FriendRequests.prototype.onServerLoad=function(e){var t=[],s=!1,n=this.listAvailableTypes();Array.isArray(e)||(cleverapps.throwAsync("FriendRequests.onServerLoad data type is - "+typeof e),e=[]),e=e.filter(function(e){return-1!==n.indexOf(e.type)});for(var i=0;i<e.length;i++)0<=this.processedIds.indexOf(e[i].id)?(this.deleteOnServerById(e[i].id),t.push(e[i].id)):this.idInNotProcessed(e[i].id)||(this.notProcessed.push(levels.FriendRequest.createFriendRequest({id:e[i].id,from:e[i].fromUserId,type:e[i].type})),s=!0);this.processedIds=t,this.save(),s&&(this.onNewListener(),this.onChangeListener())},levels.FriendRequests.prototype.sendServerRequest=function(e,t){cleverapps.RestClient.post("/friendrequests/create/"+cleverapps.user.id+"/a",{toUserId:e,type:t})},levels.FriendRequests.prototype.deleteOnServerById=function(e){cleverapps.RestClient.post("/friendrequests/delete/"+cleverapps.user.id+"/a",{id:e})},
levels.FriendRequests.prototype.serverReload=function(){this.lastServerReload<Date.now()-cleverapps.parseInterval(levels.FriendRequests.RELOAD_INTERVAL)&&cleverapps.synchronizer.synced&&(this.lastServerReload=Date.now(),cleverapps.RestClient.get("/friendrequests/getmy/"+cleverapps.user.id+"/a",{},this.onServerLoad.bind(this)))},levels.FriendRequests.prototype.deleteFakeRequests=function(){var e=this.notProcessed.filter(function(e){return!e.fake});e.length!==this.notProcessed.length&&(this.notProcessed=e,this.onChangeListener(),this.save())},levels.FriendRequests.prototype.listAvailableTypes=function(){var e=[levels.FriendRequest.TYPE_STUCK_HELP_COINS,levels.FriendRequest.TYPE_BOUNTY_READY];return"undefined"==typeof match3&&(e=e.concat([levels.FriendRequest.TYPE_SENT_COINS,levels.FriendRequest.TYPE_ASK_COINS,levels.FriendRequest.TYPE_SENT_HELP_COINS,levels.FriendRequest.TYPE_ASK_HELP_COINS])),cleverapps.lives&&(e=e.concat([levels.FriendRequest.TYPE_SENT_HELP_LIVE,
levels.FriendRequest.TYPE_ASK_HELP_LIVE,levels.FriendRequest.TYPE_SENT_LIVE,levels.FriendRequest.TYPE_ASK_LIVE])),cleverapps.starChest&&(e=e.concat([levels.FriendRequest.TYPE_SENT_HELP_STAR,levels.FriendRequest.TYPE_ASK_HELP_STAR,levels.FriendRequest.TYPE_SENT_STAR,levels.FriendRequest.TYPE_ASK_STAR])),e},levels.FriendRequests.RELOAD_INTERVAL="10 minutes",levels.FriendRequest=function(e){this.id=e.id,this.from=e.from,this.type=e.type,this.fake=e.fake,this.onRemoveListener=function(){}},levels.FriendRequest.prototype.getId=function(){return this.id},levels.FriendRequest.prototype.getView=function(){if(this.canView())return levels.FriendRequestView},levels.FriendRequest.prototype.canView=function(){return levels.FriendRequest.REQUEST_TYPES[this.type]},levels.FriendRequest.prototype.isFake=function(){return!0===this.fake},levels.FriendRequest.prototype.onServer=function(){return!this.isFake()},levels.FriendRequest.prototype.getData=function(){return{id:this.id,from:this.from,
type:this.type,fake:this.fake}},levels.FriendRequest.prototype.process=function(){var e=levels.FriendRequest.REQUEST_TYPES[this.type];if(!e.checkProcess||e.checkProcess()){var t=function(){e.createNewRequestId&&levels.friendRequests.sendServerRequest(this.from,e.createNewRequestId),e.onProcess&&e.onProcess(this),this.remove(),0<=levels.FriendRequest.SENT_HELP_REQUESTS.indexOf(this.type)&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.SEND_FRIEND_HELP)}.bind(this);e.fbRequest?cleverapps.social.sendRequest(this.from,e.fbRequest,t):t()}},levels.FriendRequest.prototype.canRemove=function(){return this.type!==levels.FriendRequest.TYPE_BOUNTY_READY||0===cleverapps.bountyManager.listPrizes().length},levels.FriendRequest.prototype.remove=function(){this.canRemove()&&(levels.friendRequests.processById(this.getId()),this.onRemoveListener())},levels.FriendRequest.prototype.cancel=function(){levels.friendRequests.processById(this.getId()),this.onRemoveListener()},
levels.FriendRequest.createFriendRequest=function(e){return new levels.FriendRequest(e)},levels.FriendRequest.addLiveProcess=function(e){e.animateCollect(cleverapps.styles.MenuBar.LivesItem.target,function(){cleverapps.lives.setAmount(cleverapps.lives.amount+1)})},levels.FriendRequest.checkAddLiveProcess=function(){return!0},levels.FriendRequest.addStarProcess=function(e){cleverapps.starChest.addStars(1),cleverapps.starChest.locked||cleverapps.metha.display({focus:"StarChestFriendRequest",action:function(e){new StarChestWindow,cleverapps.metha.onceNoWindowsListener=e}})},levels.FriendRequest.addCoinsProcess=function(e,t){t=t||levels.FriendRequest.HELP_COINS_AMOUNT,e.animateCollect(cleverapps.styles.MenuBar.GoldItem.target,function(){cleverapps.user.setGold(cleverapps.user.gold+t)})},levels.FriendRequest.addCoinsStuckProcess=function(e){levels.FriendRequest.addCoinsProcess(e,levels.FriendRequest.STUCK_COINS_AMOUNT)},levels.FriendRequest.TYPE_ASK_LIVE=0,
levels.FriendRequest.TYPE_SENT_LIVE=1,levels.FriendRequest.TYPE_ASK_STAR=2,levels.FriendRequest.TYPE_SENT_STAR=3,levels.FriendRequest.TYPE_ASK_HELP_LIVE=4,levels.FriendRequest.TYPE_SENT_HELP_LIVE=5,levels.FriendRequest.TYPE_ASK_HELP_STAR=6,levels.FriendRequest.TYPE_SENT_HELP_STAR=7,levels.FriendRequest.TYPE_BOUNTY_READY=8,levels.FriendRequest.TYPE_ASK_HELP_COINS=9,levels.FriendRequest.TYPE_SENT_HELP_COINS=10,levels.FriendRequest.TYPE_ASK_COINS=12,levels.FriendRequest.TYPE_SENT_COINS=13,levels.FriendRequest.TYPE_STUCK_HELP_COINS=14,levels.FriendRequest.SENT_HELP_REQUESTS=[levels.FriendRequest.TYPE_ASK_LIVE,levels.FriendRequest.TYPE_ASK_HELP_LIVE,levels.FriendRequest.TYPE_ASK_STAR,levels.FriendRequest.TYPE_ASK_HELP_STAR,levels.FriendRequest.TYPE_ASK_COINS,levels.FriendRequest.TYPE_ASK_HELP_COINS,levels.FriendRequest.TYPE_STUCK_HELP_COINS],levels.FriendRequest.HELP_COINS_AMOUNT=10,levels.FriendRequest.STUCK_COINS_AMOUNT=50,levels.FriendRequest.REQUEST_TYPES={},
levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_ASK_LIVE]={image:bundles.request_center.frames.send_life_icon,button_png:bundles.buttons_main.frames.small_blue_button,button_on_png:bundles.buttons_main.frames.small_blue_button_on,button_text:"Send",text:"AskLiveRequest",fbRequest:"sendLiveRequest",createNewRequestId:levels.FriendRequest.TYPE_SENT_LIVE},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_SENT_LIVE]={image:bundles.request_center.frames.accept_life_icon,text:"SendLiveRequest",fbRequest:"thanksForLiveRequest",onProcess:levels.FriendRequest.addLiveProcess,checkProcess:levels.FriendRequest.checkAddLiveProcess},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_ASK_STAR]={image:bundles.request_center.frames.send_star_icon,button_png:bundles.buttons_main.frames.small_blue_button,button_on_png:bundles.buttons_main.frames.small_blue_button_on,button_text:"Send",text:"AskStarRequest",fbRequest:"sendStarRequest",
createNewRequestId:levels.FriendRequest.TYPE_SENT_STAR},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_SENT_STAR]={image:bundles.request_center.frames.accept_star_icon,text:"SendStarRequest",fbRequest:"thanksForStarRequest",onProcess:levels.FriendRequest.addStarProcess},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_ASK_HELP_LIVE]={image:bundles.request_center.frames.send_life_icon,button_png:bundles.buttons_main.frames.small_blue_button,button_on_png:bundles.buttons_main.frames.small_blue_button_on,button_text:"Send",text:"AskHelpRequest",fbRequest:"sentHelpRequest",createNewRequestId:levels.FriendRequest.TYPE_SENT_HELP_LIVE},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_SENT_HELP_LIVE]={image:bundles.request_center.frames.accept_life_icon,text:"SentHelpRequest",fbRequest:"thanksForHelpRequest",onProcess:levels.FriendRequest.addLiveProcess,checkProcess:levels.FriendRequest.checkAddLiveProcess},
levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_ASK_HELP_STAR]={image:bundles.request_center.frames.send_star_icon,button_png:bundles.buttons_main.frames.small_blue_button,button_on_png:bundles.buttons_main.frames.small_blue_button_on,button_text:"Send",text:"AskHelpRequest",fbRequest:"sentHelpRequest",createNewRequestId:levels.FriendRequest.TYPE_SENT_HELP_STAR},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_SENT_HELP_STAR]={image:bundles.request_center.frames.accept_star_icon,text:"SentHelpRequest",fbRequest:"thanksForHelpRequest",onProcess:levels.FriendRequest.addStarProcess},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_BOUNTY_READY]={avatar:bundles.request_center.frames.bounty_ready_icon,text:"BountyRequest",button_text:"Collect",onProcess:BountyManager.openWindow},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_ASK_HELP_COINS]={image:bundles.request_center.frames.send_coins_icon,
button_png:bundles.buttons_main.frames.small_blue_button,button_on_png:bundles.buttons_main.frames.small_blue_button_on,button_text:"Send",text:"AskHelpRequest",fbRequest:"sentHelpRequest",createNewRequestId:levels.FriendRequest.TYPE_SENT_HELP_COINS},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_SENT_HELP_COINS]={image:bundles.request_center.frames.accept_coins_icon,text:"SentHelpRequest",fbRequest:"thanksForHelpRequest",onProcess:levels.FriendRequest.addCoinsProcess},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_ASK_COINS]={image:bundles.request_center.frames.send_coins_icon,button_png:bundles.buttons_main.frames.small_blue_button,button_on_png:bundles.buttons_main.frames.small_blue_button_on,button_text:"Send",text:"AskCoinsRequest",fbRequest:"sendCoinsRequest",createNewRequestId:levels.FriendRequest.TYPE_SENT_COINS},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_SENT_COINS]={image:bundles.request_center.frames.accept_coins_icon,
text:"SendCoinsRequest",fbRequest:"thanksForCoinsRequest",onProcess:levels.FriendRequest.addCoinsProcess},levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_STUCK_HELP_COINS]={image:bundles.request_center.frames.accept_stuck_coins_icon,text:"SendStuckHelpRequest",onProcess:levels.FriendRequest.addCoinsStuckProcess},levels.FriendRequest.SYSTEM_ID=-1,levels.FriendRequestView=cc.Node.extend({ctor:function(e,t,s){this._super(),this.setContentSize(cleverapps.styles.FriendRequestView.width,cleverapps.styles.FriendRequestView.height),this.setAnchorPoint2(),this.model=e,this.onRemove=s,this.createBackground(),this.createFromContent(),this.createRequestContent(),this.createRequestImage(),this.createCancelContent(),this.createProcessContent(),cleverapps.UI.onClick(this,function(){t.showAutoHide&&t.showAutoHide()||this.process()}.bind(this))},onEnter:function(){this._super(),this.model.onRemoveListener=this.createListener(this.removeAnimation.bind(this)),
this.model.animateCollect=this.createListener(this.animateCollect.bind(this))},animateCollect:function(e,t){WindowHelper.animateCollect(this.image,{scale:.8,target:e},t)},createFromContent:function(){var e,t=levels.FriendRequest.REQUEST_TYPES[this.model.type],s=void 0;if(cleverapps.social instanceof cleverapps.BaseFB&&(s=this.model.from),t.avatar)e=new cleverapps.UI.Avatar(cc.spriteFrameCache.getSpriteFrame(t.avatar),s);else{var n=cleverapps.friends.getById(this.model.from);e=n?new cleverapps.UI.Avatar(n):new cleverapps.UI.Avatar("https://scontent.xx.fbcdn.net/v/",s)}var i=cleverapps.styles.FriendRequestView.Avatar;e.setPositionRound(e.width/2+i.Margin.x,this.height/2+i.Margin.y),e.setAnchorPoint2(),this.addChild(e)},createBackground:function(){var e=cleverapps.UI.createScale9Sprite(bundles.main.frames.wood_bg,cleverapps.UI.Scale9Rect.TwoPixelXY);e.setContentSize2(this.width,this.height),e.setPosition(this.width/2,this.height/2),this.addChild(e)},getRequestText:function(){
var e=levels.FriendRequest.REQUEST_TYPES[this.model.type];return Messages.get(e.text)},createRequestContent:function(){var e=this.getRequestText();if(e){var t=cleverapps.styles.FriendRequestView.Request;(e=cleverapps.UI.generateTTFText(e,t.font)).setPositionRound(this.width/2+t.x,this.height/2+t.y),e.setDimensions(t.width,0),e.fitTo(void 0,t.height),e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e.setVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.addChild(e)}},getRequestImage:function(){var e=levels.FriendRequest.REQUEST_TYPES[this.model.type];return!!e.image&&new cc.Sprite(e.image)},createRequestImage:function(){var e=this.getRequestImage();e&&(e.setPosition(cleverapps.styles.FriendRequestView.Icon.x,this.height/2+cleverapps.styles.FriendRequestView.Icon.y),this.addChild(e),this.image=e)},getProcessButtonStyle:function(){var e=levels.FriendRequest.REQUEST_TYPES[this.model.type];return{button_png:e.button_png||bundles.buttons_main.frames.small_green_button,
button_on_png:e.button_on_png||bundles.buttons_main.frames.small_green_button_on,text:Messages.get(e.button_text?e.button_text:"Accept"),font:cleverapps.styles.FriendRequestView.processButton.font}},createProcessContent:function(){var e=this.getProcessButtonStyle(),t=cleverapps.styles.FriendRequestView.processButton,s=new cc.Node;s.setPosition(t.width/2,t.height/2);var n=cleverapps.UI.generateTTFText(e.text,e.font);n.fitTo(.9*t.width),n.setPosition(0,t.text.y),s.addChild(n);var i=new cleverapps.UI.Button({button_png:e.button_png,button_on_png:e.button_on_png,content:s,onClicked:this.process.bind(this),width:t.width,height:t.height});levels.FriendRequest.REQUEST_TYPES[this.model.type].image?i.setPositionRound(this.width-i.width/2-cleverapps.styles.FriendRequestView.processButton.x,this.height/2+cleverapps.styles.FriendRequestView.processButton.y):i.setPositionRound(this.width-i.width/2-cleverapps.styles.FriendRequestView.processButton.noImage.x,
this.height/2+cleverapps.styles.FriendRequestView.processButton.noImage.y),this.addChild(i)},createCancelContent:function(){var e=levels.FriendRequest.REQUEST_TYPES[this.model.type],t=cleverapps.styles.FriendRequestView.close;if(!e.noCancel){var s=new cleverapps.UI.Button({button_png:bundles.buttons_main.frames.close_small||bundles.buttons_main.frames.window_close_png,button_on_png:bundles.buttons_main.frames.close_small_on||bundles.buttons_main.frames.window_close_on_png,onClicked:this.cancel.bind(this)});s.setPositionRound(this.width-s.width/2+t.x,this.height-s.height/2+t.y),s.baseScale=t.scale,s.scale=t.scale,this.addChild(s)}},cancel:function(){this.model.cancel()},process:function(){this.model.process()},removeAnimation:function(){this.runAction(new cc.Sequence(new cc.ScaleTo(.3,0),new cc.CallFunc(this.onRemove),new cc.RemoveSelf))},showAnimation:function(e){this.setScale(0),this.runAction(new cc.Sequence(new cc.DelayTime(e),new cc.ScaleTo(.3,1)))}}),
cleverapps.styles.FriendRequestView={width:480,height:166,close:{x:10,y:10,scale:.75},processButton:{width:170,height:60,font:cleverapps.styles.FONTS.BUTTON_SMALL_TEXT,x:20,y:-35,noImage:{x:90,y:-35},text:{y:0}},Request:{x:66,y:28,width:270,height:80,font:cleverapps.styles.FONTS.WINDOW_SMALL_TEXT},Icon:{x:216,y:-30},Avatar:{Margin:{x:25,y:0}}};var FakeRequestSender={load:function(){cleverapps.config.debugMode&&(FakeRequestSender.REQUEST_PERIOD="1 minute");var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.FAKE_REQUESTS);return e||(e={lastLoadTime:0}),e},save:function(e){e.lastLoadTime=Date.now(),cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.FAKE_REQUESTS,e)},sendIfNeed:function(e){if(0!==cleverapps.friends.listIds().length&&"merge"!==cleverapps.config.type&&!cleverapps.flags.noviral){var t=FakeRequestSender.load(),s=Math.floor((Date.now()-t.lastLoadTime)/cleverapps.parseInterval(FakeRequestSender.REQUEST_PERIOD));if(!(s<=0)){var n=e.notProcessed.filter(function(e){
return e.isFake()});s>FakeRequestSender.MAX_REQUESTS-n.length&&(s=FakeRequestSender.MAX_REQUESTS-n.length);var i=!1,o=levels.friendSorter.listActiveFriends();cleverapps.Random.shuffle(o),10<o.length&&(o=o.slice(0,10));for(var a=0;a<o.length&&0<s;a++){var r=o[a];if(!e.existRequestFrom(r.id)){var l=cleverapps.Random.mathChoose(this.listFakeRequestsTypes(e));s--,i=!0,e.notProcessed.push(levels.FriendRequest.createFriendRequest({id:"__"+Math.floor(1e15*Math.random()),from:r.id,type:l,fake:!0}))}}i&&(e.onNewListener(),FakeRequestSender.save(t),e.save())}}},listFakeRequestsTypes:function(e){var t=[levels.FriendRequest.TYPE_ASK_HELP_LIVE,levels.FriendRequest.TYPE_ASK_HELP_STAR,levels.FriendRequest.TYPE_ASK_HELP_COINS],s=e.listAvailableTypes();return t.filter(function(e){return-1!==s.indexOf(e)})},MAX_REQUESTS:2,REQUEST_PERIOD:"12 hours"},UserResult=function(){this.scores={},this.stars={};var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.RESULT_FIFO);if(e)for(var t=0;t<e.length;t++){
var s=e[t].match(/\d+$/);if(s){var n=parseInt(s[0],10);this.loadEpisode(n)}}};UserResult.prototype.isActive=function(e){return!cleverapps.config.editorMode&&(cleverapps.config.results&&HoseEpisode.isFreshEpisode(e))},UserResult.prototype.isEmpty=function(e){return!this.scores[e]||0===Object.keys(this.scores[e]).length},UserResult.prototype.getEpisodeInfo=function(e){return{scores:this.scores[e]||{},stars:this.stars[e]||{}}},UserResult.prototype.getStarsForLevel=function(e,t){return this.isEmpty(e)?0:this.stars[e][t]||0},UserResult.prototype.getScoresForLevel=function(e,t){return this.isEmpty(e)?0:this.scores[e][t]||0},UserResult.prototype.updateLevel=function(e,t,s,n,i){if(i=i||{},this.isActive(e)){this.scores[e]=this.scores[e]||{},this.stars[e]=this.stars[e]||{};var o=!1;(!this.scores[e][t]||this.scores[e][t]<s)&&(o=!0,this.scores[e][t]=s),(!this.stars[e][t]||this.stars[e][t]<n)&&(o=!0,this.stars[e][t]=n,
levels.episodes.episodes&&levels.episodes.episodes[e]&&levels.episodes.episodes[e].levels[t].improveStars(n)),o&&this.saveEpisode(e,i)}},UserResult.ParseLib={parseScores:function(e){var t=JSON.parse(e);return Array.isArray(t)?UserResult.ParseLib.objFromArray(t):t},parseStars:function(e){var t=JSON.parse(e);return"number"==typeof t?UserResult.ParseLib.objFromNumber(t):t},objFromArray:function(e){var s={};return e.forEach(function(e,t){s[t]=e}),s},objFromNumber:function(e){for(var t={},s=0;s<Episode.LEVELS_PER_EPISODE;s++)t[s]=e%4,e=Math.floor(e/4);return t},objToArray:function(e){for(var t=[],s=0;s<Episode.LEVELS_PER_EPISODE;s++)void 0===e[s]?t.push(0):t.push(e[s]);return t},objToNumber:function(e){for(var t=0,s=1,n=0;n<Episode.LEVELS_PER_EPISODE;n++)void 0!==e[n]&&(t+=s*e[n]),s*=4;return t}},UserResult.GetStoreKey=function(e){return cleverapps.config.prefix+cleverapps.social.getLocalStoragePreffix()+"_result_"+e},UserResult.prototype.saveEpisode=function(e,t){if(t&&t.force);else if(
!this.isActive(e))return;var s={scores:this.scores[e],stars:this.stars[e]};cleverapps.DataLoader.save(UserResult.GetStoreKey(e),s,{fifoKey:cleverapps.DataLoaderTypes.RESULT_FIFO,limit:Episode.FRESH_EPISODES}),(!t||t&&!t.skipUpdate)&&cleverapps.synchronizer.addUpdateTask("result")},UserResult.prototype.loadEpisode=function(e,t){if(this.scores[e]={},this.stars[e]={},this.isActive(e)){var s=cleverapps.DataLoader.load(UserResult.GetStoreKey(e));s&&(this.scores[e]=s.scores,this.stars[e]=s.stars)}},UserResult.prototype.reset=function(e){this.scores[e]={},this.stars[e]={},this.saveEpisode(e,{force:!0})};var Results=function(e){this.data=void 0,this.lastUpdateTime=0,this.episode=e,this.isActive()&&this.load(),this.reload(),this.setReloadTimeout()};Results.prototype.setReloadTimeout=function(){clearTimeout(this.reloadTimeout),this.reloadTimeout=new cleverapps.LongTimeout(function(){this.reload(),this.setReloadTimeout()}.bind(this),1.01*this.calcCacheTime())},
Results.prototype.destructor=function(){clearTimeout(this.reloadTimeout)},Results.prototype.isActive=function(){return cleverapps.config.results&&this.episode.isFreshEpisode()},Results.prototype.botResults=function(e){var t=this.episode.getLevelContent(e).score;return[{id:"bot3",avatar:bundles.main.frames.bot_avatar_3,name:"Donuter",score:10*Math.round(.7*t/10)},{id:"bot2",avatar:bundles.main.frames.bot_avatar_2,name:"Lemon Ice",score:10*Math.round(.8*t/10)},{id:"bot1",avatar:bundles.main.frames.bot_avatar_1,name:"Creamer",score:10*Math.round(1*t/10)}]},Results.prototype.listFriendResults=function(e){if(cleverapps.isLocalhost()){var s=this.episode.getLevelContent(e).score;return cleverapps.friends.listFriends().map(function(e,t){return{id:e.id,avatar:e.avatar,name:e.name,score:Math.round(1*s/10)*(8-t)}})}var n=[];return this.data&&this.data[e]&&this.data[e].forEach(function(e){var t=cleverapps.friends.getById(e.id);t&&n.push({id:e.id,avatar:t.avatar,name:t.name,score:e.score})},this),n
},Results.prototype.listTop4=function(e,t){var s=t?[]:this.botResults(e);(s=s.concat(this.listFriendResults(e))).sort(function(e,t){return t.score-e.score});var n=void 0;return cleverapps.userresult.isActive(this.episode.episodeNo)&&(n={id:levels.user.id,avatar:cleverapps.friends.getPlayer().avatar,name:cleverapps.friends.getPlayer().name,score:cleverapps.userresult.getScoresForLevel(this.episode.episodeNo,e)}),s=s.slice(0,n?3:4),n&&(n.player=!0,s.push(n)),s.sort(function(e,t){return e.score!==t.score?t.score-e.score:e.id===levels.user.id?-1:t.id===levels.user.id?1:0}),s},Results.GetStoreKey=function(e){return cleverapps.config.prefix+cleverapps.social.getLocalStoragePreffix()+"_results_"+e},Results.prototype.reset=function(){this.data=void 0,this.lastUpdateTime=0,this.save(!0)},Results.prototype.save=function(e){!0!==e&&(this.lastUpdateTime=Date.now());var t={data:this.data,when:this.lastUpdateTime};cleverapps.DataLoader.save(Results.GetStoreKey(this.episode.episodeNo),t,{
fifoKey:cleverapps.DataLoaderTypes.RESULTS_FIFO,limit:Episode.FRESH_EPISODES}),this.setReloadTimeout()},Results.prototype.load=function(){var e=cleverapps.DataLoader.load(Results.GetStoreKey(this.episode.episodeNo));e&&(this.data=e.data,this.lastUpdateTime=e.when)},Results.prototype.calcCacheTime=function(){return this.episode.episodeNo===levels.user.episode?cleverapps.parseInterval(Results.CACHE_CURRENT_INTERVAL):cleverapps.parseInterval(Results.CACHE_NEAR_INTERVAL)},Results.prototype.whenFriendListUpdated=function(){if(void 0!==this.data){for(var e in this.data)this.data[e]=this.data[e].filter(function(e){return void 0!==cleverapps.friends.getById(e.id)});this.reload(!0)}else this.reload()},Results.prototype.reload=function(e){this.isActive()&&(void 0!==this.data?(e||this.lastUpdateTime+this.calcCacheTime()<Date.now())&&this.getFromServer():this.getFromServer())},Results.prototype.getFromServer=function(){if(cleverapps.friends.haveData()&&!this.loading){this.loading=!0
;var e=function(e){this.loading=!1,this.data={},e.forEach(function(e){var t=e.userId,s=UserResult.ParseLib.parseScores(e.scores);for(var n in s){var i=s[n];void 0===this.data[n]&&(this.data[n]=[]),this.data[n].push({id:t,score:i})}},this),this.episode.isFreshEpisode()&&this.save()}.bind(this),t=cleverapps.friends.listIds();t.length&&(t.join(","),cleverapps.RestClient.get("/results/"+this.episode.episodeNo+"/"+t,{},e,function(e){console.log("Failure loading friends results: ",e)}))}},Results.CACHE_NEAR_INTERVAL="3 days",Results.CACHE_CURRENT_INTERVAL="1 hour";var Progress=function(){this.data=void 0,this.lastUpdateTime=[0,0],this.load(),this.onUpdated=function(){}};Progress.prototype.init=function(){this.reload(!0),setInterval(this.reload.bind(this),cleverapps.parseInterval(Progress.CHECK_INTERVAL))},Progress.TYPE_NEAR=0,Progress.TYPE_FAR=1,Progress.FILTER_FRIENDS=2,Progress.RESET=3,Progress.CHECK_INTERVAL="12 hours",Progress.CACHE_INTERVAL=["1 day","3 day"],
Progress.STUCK_INTERVAL="5 day",Progress.STUCK_HELP_INTERVAL="14 days",Progress.prototype.reset=function(){this.lastUpdateTime=[0,0],this.data=void 0,this.save(Progress.RESET)},Progress.prototype.listByEpisode=function(t){return this.data?this.data.filter(function(e){return e.episode===t}):[]},Progress.getType=function(e){return 1<Math.abs(e.episode-levels.user.episode)?Progress.TYPE_FAR:Progress.TYPE_NEAR},Progress.prototype.listIds=function(e){var t=(this.data?this.data.filter(function(e){return Progress.getType(e)===Progress.TYPE_FAR}):[]).map(function(e){return e.id}),s=cleverapps.friends.listIds();return e===Progress.TYPE_NEAR?s.filter(function(e){return-1===t.indexOf(e)}):s.filter(function(e){return-1!==t.indexOf(e)})},Progress.GetStoreKey=function(){return cleverapps.config.prefix+cleverapps.social.getLocalStoragePreffix()+"_progress"},Progress.prototype.save=function(e){e!==Progress.FILTER_FRIENDS&&e!==Progress.RESET&&(this.lastUpdateTime[e]=Date.now());var t={data:this.data,
last:this.lastUpdateTime};cleverapps.DataLoader.save(Progress.GetStoreKey(),t),this.onUpdated()},Progress.prototype.load=function(){var e=cleverapps.DataLoader.load(Progress.GetStoreKey());e&&(this.data=e.data,this.lastUpdateTime=e.last||[0,0])},Progress.prototype.whenFriendListUpdated=function(){if(this.data){var t=cleverapps.friends.listIds();this.data=this.data.filter(function(e){return-1!==t.indexOf(e.id)}),this.save(Progress.FILTER_FRIENDS),this.reload(!0)}else this.reload()},Progress.prototype.reload=function(e){if(!this.data)return this.getFromServer(Progress.TYPE_NEAR),void this.getFromServer(Progress.TYPE_FAR);(e||this.lastUpdateTime[Progress.TYPE_NEAR]+cleverapps.parseInterval(Progress.CACHE_INTERVAL[Progress.TYPE_NEAR])<Date.now())&&this.getFromServer(Progress.TYPE_NEAR),this.lastUpdateTime[Progress.TYPE_FAR]+cleverapps.parseInterval(Progress.CACHE_INTERVAL[Progress.TYPE_FAR])<Date.now()&&this.getFromServer(Progress.TYPE_FAR)},Progress.prototype.getLeaders=function(){var e=[
];if(!this.data)return e;for(var t=0;t<this.data.length;t++)cleverapps.friends.getById(this.data[t].id)&&e.push({id:this.data[t].id,rating:cleverapps.humanReadableNumber(this.data[t].episode,this.data[t].level)+(this.data[t].progress||0),name:cleverapps.friends.getById(this.data[t].id).name,avatar:cleverapps.friends.getById(this.data[t].id).avatar});return e.sort(function(e,t){return t.rating-e.rating}),cleverapps.config.leagues&&e.forEach(function(e){e.league=Progress.getLeague(e.rating)}),e},Progress.getLeague=function(e){var t=cleverapps.config.leagues;if(!t)return 0;for(var s=0;s<t.length;s++){var n=t[s];if(!1===n||e<=n)return s}return t.length-1},Progress.prototype.getStuckFriendsFake=function(){return cleverapps.friends.listFriends().map(function(e,t){return{id:e.id,name:e.name,avatar:e.avatar,episode:2*(t+1),level:t+3}})},Progress.prototype.getStuckFriends=function(){var n=[];if("merge"===cleverapps.config.type)return n;if(cleverapps.isLocalhost()
)return this.getStuckFriendsFake();if(!this.data||this.updateInProgress)return n;var i=Date.now();return this.data.forEach(function(e){var t=e.updateTime||i;if(!(e.helpTime&&e.helpTime+cleverapps.parseInterval(Progress.STUCK_HELP_INTERVAL)>i)){var s=cleverapps.friends.getById(e.id);s&&t+cleverapps.parseInterval(Progress.STUCK_INTERVAL)<i&&n.push({id:e.id,name:s.name,avatar:s.avatar,episode:e.episode,level:e.level})}}.bind(this)),n.sort(function(e,t){return e.episode!==t.episode?t.episode-e.episode:t.level-e.level}),n.slice(0,3)},Progress.prototype.sendStuckFriendsHelp=function(e,t){var s=e.map(function(e){return e.id});cleverapps.social.sendRequest(s,"stuckHelpGold",function(){s.forEach(function(e){cleverapps.friends.inApp(e)&&levels.friendRequests.sendServerRequest(e,levels.FriendRequest.TYPE_STUCK_HELP_COINS)}),this.data.forEach(function(e){-1!==s.indexOf(e.id)&&(e.helpTime=Date.now())}),this.save(Progress.FILTER_FRIENDS),t()}.bind(this))},Progress.prototype.getFromServer=function(s
){var n=this.listIds(s);if(0!==n.length){var e=function(e){this.updateInProgress=!1;var t=cleverapps.friends.listIds();this.data||(this.data=[]);var l={};this.data.forEach(function(e){l[e.id]=e}),this.data=this.data.filter(function(e){return-1!==t.indexOf(e.id)&&-1===n.indexOf(e.id)}),e.forEach(function(e){var t=e.id,s=e.episode,n=e.level,i=e.progress;s>=levels.episodes.getAmountEpisodes()&&(s=levels.episodes.getAmountEpisodes()-1,n=Episode.LEVELS_PER_EPISODE-1);var o=l[e.id],a=Date.now();o&&o.updateTime&&o.episode===s&&o.level===n&&o.progress===i&&(a=o.updateTime);var r={id:t,episode:s,level:n,progress:i,updateTime:a};o&&o.helpTime&&(r.helpTime=o.helpTime),this.data.push(r)},this),this.save(s)}.bind(this),t=n.join(",");this.updateInProgress=!0,cleverapps.RestClient.get("/progress/"+t,{},e,function(e){console.log("Failure loading friends progress: ",e)})}},levels.EpisodesScene=MainScene.extend({ctor:function(){this._super(),this.customize(),new levels.EpisodesController(this.scene),
PlayButton.IsAvailable()&&(this.scene.playButton=new PlayButtonView,this.scene.addChild(this.scene.playButton),this.scene.playButton.addFingerTip())},customize:function(){}}),cleverapps.styles.EpisodesScene={},levels.EpisodesScene.BUNDLES=function(){for(var e=[],t=[],s=0;s<cleverapps.styles.PagesView.visiblePages;s++){e.push("episode_"+(levels.user.episode+s));var n="episode_"+(levels.user.episode+s)+"_external";bundles[n]&&(cc.sys.isNative?t=t.concat(bundles[n].urls):e.push(n))}return t.forEach(function(e){cc.loader.load(e)}),e};var Episode=function(e,t,s){s=s||{},this.episodeNo=e,this.levelNo=t,this.type=s.type?s.type:Episode.TypeValues[e]?e:Episode.Types.REGULAR,this.copyData=s.copyData,this.onLoadListener=function(){},this.onRemoveListener=function(){},this.whenLoadedListeners=[],this.init()};Episode.prototype.isComingSoon=function(){return this.episodeNo===Episodes.getAmountEpisodes()},Episode.prototype.init=function(){this.loaded=!1,this.levelsPerEpisode=bundles[this.bundleId(
)].levelsAmount,(this.isComingSoon()||void 0!==this.levelNo)&&(this.levelsPerEpisode=1);var e=void 0!==this.levelNo?[this.levelNo]:cleverapps.rangeArray(0,this.levelsPerEpisode-1);this.levels=e.map(function(e){var t=cleverapps.userresult.getStarsForLevel(this.episodeNo,e);return new Level(this,e,t)}.bind(this))},Episode.prototype.getLevel=function(e){return void 0!==this.levelNo&&(e=0),this.levels[e]},Episode.prototype.isRegular=function(){return this.type===Episode.Types.REGULAR},Episode.prototype.getCurrentLevel=function(){for(var e in this.levels){var t=this.levels[e];if(t.type===Level.TYPE_CURRENT)return t}},Episode.prototype.whenLoaded=function(e,t){this.loaded?e(this):(t||cleverapps.bundleLoader.addBlockWindow(),this.whenLoadedListeners.push(function(){cleverapps.bundleLoader.removeBlockWindow(),e(this)}.bind(this)))},Episode.prototype.isPassed=function(){return levels.user.episode>this.episodeNo},Episode.prototype.isCurrent=function(){return levels.user.episode===this.episodeNo}
,Episode.prototype.destructor=function(){this.loadTask&&this.loadTask.cancel(),this.loadDataStarted&&cleverapps.bundleLoader.deleteBundle(this.bundleId()),this.onRemoveListener(),this.deleted=!0},Episode.BundleId=function(e,t){t=t||cleverapps.settings.language;var s="episode_"+e;return"board"===cleverapps.config.type&&"en"!==t&&(s+="_"+t),s},Episode.prototype.bundleId=function(){return this.episodeNo===Episodes.getAmountEpisodes()?"episode_coming_soon":Episode.BundleId(this.episodeNo)},Episode.prototype.finishWait=function(){this.waitCounter--,0===this.waitCounter&&this.onceLoaded()},Episode.prototype.loadData=function(){if(this.loadDataStarted||this.deleted)return cleverapps.NO_ACTION;this.loadDataStarted=!0,this.loadDataInt()},Episode.prototype.loadDataInt=function(){this.waitCounter=1,this.loadTask=new SuccessWait(function(e){cleverapps.bundleLoader.loadBundle(this.bundleId(),e)}.bind(this),this.finishWait.bind(this))},Episode.prototype.onceLoaded=function(){this.loaded=!0,
this.onLoadListener&&this.onLoadListener(),this.whenLoadedListeners.forEach(cleverapps.callFunc),this.whenLoadedListeners=[]},Episode.prototype.getHardLevels=function(){return this.getBundle().hard||[]},Episode.prototype.getTrickyLevels=function(){return this.getBundle().tricky||[]},Episode.prototype.getBundle=function(){return bundles[this.bundleId()]},Episode.prototype.getContent=function(){return this.content||(this.content=cc.loader.getRes(this.getBundle().jsons.levels),this.copyData&&(this.content=JSON.parse(JSON.stringify(this.content)))),this.content},Episode.prototype.getLevels=function(){var e=this.getContent();return Array.isArray(e)?e:e.levels},Episode.prototype.isDebug=function(){return this.getContent().debug},Episode.prototype.getHashes=function(){var s={};return this.getLevels().forEach(function(e,t){cleverapps.extend(s,this.getLevelHashes(t))}.bind(this)),s},Episode.prototype.getLevelHashes=function(n){var i={},o=this.getLevelVersions(n);return Object.keys(o).map(
cleverapps.castType).sort().forEach(function(e){var t=o[e],s=Level.CalcHash(t);i[s]={levelNo:n,version:e,hash:s}}),i},Episode.prototype.getLastVersionHashes=function(){return this.levels.map(function(e){var t=this.getLevelContent(e.levelNo);return Level.CalcHash(t)},this)},Episode.prototype.getLevelVersions=function(e){var t=this.getLevels();t&&t[e]||cleverapps.throwAsync("No levels for episode "+this.episodeNo+" level "+e);var s=t[e];Array.isArray(s)||(s=[s]);var n={};return s.forEach(function(e,t){var s=e.version||t;n[s]=e}),n},Episode.prototype.getMaxVersion=function(e){var t=0;for(var s in e)t=Math.max(t,parseInt(s));return t},Episode.prototype.getLevelContent=function(e){var t=this.getLevelVersions(e),s=this.getMaxVersion(t);cleverapps.config.editorMode&&void 0!==LevelManager.getInstance().version&&!cleverapps.environment.isMainScene()&&(s=LevelManager.getInstance().version);var n=t[s];return n.episodeNo=this.episodeNo,n.levelNo=e,n.version=s,n},
Episode.prototype.isDailyCup=function(){return this.type===Episode.Types.DAILYCUP},Episode.prototype.isBonusRound=function(){return this.type===Episode.Types.BONUSROUNDS},Episode.prototype.isDailyLevel=function(){return this.type===Episode.Types.DAILY_LEVELS},Episode.prototype.isBonusWorldLevel=function(){return this.type===Episode.Types.BONUS_WORLD},Episode.LevelChooseAlgorithm=function(e){var t=e.start,s=e.finish||levels.episodes.getAmountEpisodes(),n=e.seed,i=t*Episode.LEVELS_PER_EPISODE,o=s*Episode.LEVELS_PER_EPISODE-1,a=cleverapps.Random.random(i,o,n);return{levelNo:a%Episode.LEVELS_PER_EPISODE,episodeNo:Math.floor(a/Episode.LEVELS_PER_EPISODE)}},Episode.LEVELS_PER_EPISODE=15,Episode.Types={REGULAR:"regular",BONUSROUNDS:"bonusrounds",EDITOR:"editor",DAILY_LEVELS:"daily_levels",DAILYCUP:"dailycup",BONUS_WORLD:"bonus_world",ADS:"ads",PLAYABLE_ADS:"playable_ads"},Episode.TypeValues=cleverapps.createSet(cleverapps.values(Episode.Types));var HoseEpisode=function(e){Episode.apply(this,
arguments),this.onAnimatePass=void 0,this.onAnimateOpen=void 0,this.onExternalLoadListener=function(){}};HoseEpisode.prototype=Object.create(Episode.prototype),(HoseEpisode.prototype.constructor=HoseEpisode).prototype.currentLevelPosition=function(e){var t=cleverapps.styles.LevelView[this.getBundle().levelPositions||"levels_1"];return t&&t[e]},HoseEpisode.prototype.init=function(){Episode.prototype.init.call(this,arguments),this.externalLoaded=!1,cleverapps.userresult.loadEpisode(this.episodeNo),this.friendsResults=new Results(this),this.updateProgress()},HoseEpisode.prototype.updateProgress=function(){var t=[],n={};this.levels.forEach(function(e,t){e.players.forEach(function(e){n[e]=t})});var e=levels.progress.listByEpisode(this.episodeNo),s=[];e.forEach(function(e){e.level!==n[e.id]&&t.push(e),s.push(e.id)}),t.forEach(function(e){var t=this.levels[n[e.id]];t&&t.removePlayer(e.id);var s=this.levels[e.level];s?s.insertPlayer(e.id):console.log("No level for player: "+e.id+" at "+e.level
)},this),Object.keys(n).forEach(function(e){if(-1===s.indexOf(e)){var t=this.levels[n[e]];t&&t.removePlayer(e)}},this)},HoseEpisode.prototype.isFirstNotInShadow=function(){return!!this.isAvailableToPlay()&&cleverapps.user.episode-this.episodeNo==Episode.FRESH_EPISODES-1},HoseEpisode.prototype.destructor=function(){this.externalLoadTask&&this.externalLoadTask.cancel(),this.friendsResults&&this.friendsResults.destructor(),this.loadDataStarted&&(cleverapps.bundleLoader.deleteBundles(this.listRpgBundles()),cleverapps.bundleLoader.deleteBundle(this.bundleExternalId())),Episode.prototype.destructor.apply(this,arguments)},HoseEpisode.prototype.bundleExternalId=function(){return this.bundleId()+"_external"},HoseEpisode.prototype.listRpgBundles=function(){var s=[];return!cleverapps.config.rpg||"number"!=typeof this.episodeNo||this.episodeNo>=Episodes.getAmountEpisodes()?s:(s.push(this.getIslandBundleId()),"runes"!==cleverapps.config.name||this.isPassed(
)||!cleverapps.styles.IslandEnemies[this.episodeNo]||cleverapps.styles.IslandEnemies[this.episodeNo].forEach(function(e){var t=cleverapps.Spine.jsonToBundle[e.enemy];t&&bundles[t]&&s.push(t)}),s)},HoseEpisode.WAIT_FOR_EXTERNAL_TIMEOUT=3e3,HoseEpisode.prototype.waitExternal=function(){this.waitExternalTimeout=void 0,this.finishWait()},HoseEpisode.prototype.loadDataInt=function(){this.waitCounter=1,this.getExternalBundle()&&!this.externalLoaded&&(this.waitCounter++,this.waitExternalTimeout=setTimeout(this.waitExternal.bind(this),Episode.WAIT_FOR_EXTERNAL_TIMEOUT),this.externalLoadTask=new SuccessWait(function(e){cleverapps.bundleLoader.loadBundle(this.bundleExternalId(),e)}.bind(this),this.onceExternalLoaded.bind(this))),this.loadTask=new SuccessWait(function(e){var t=[this.bundleId()].concat(this.listRpgBundles());cleverapps.bundleLoader.loadBundles(t,e)}.bind(this),this.finishWait.bind(this))},HoseEpisode.prototype.onceExternalLoaded=function(){this.externalLoaded=!0,
this.loaded&&this.onExternalLoadListener&&this.onExternalLoadListener(),this.waitExternalTimeout&&(clearTimeout(this.waitExternalTimeout),this.finishWait())},HoseEpisode.prototype.onceLoaded=function(){Episode.prototype.onceLoaded.apply(this,arguments),(this.getExternalBundle()&&this.externalLoaded||!this.getExternalBundle())&&this.onExternalLoadListener&&this.onExternalLoadListener()},HoseEpisode.prototype.getIslandBundleId=function(){return"episode_"+Math.floor(this.episodeNo/10)+"_island"},HoseEpisode.prototype.getIslandBundle=function(){return bundles[this.getIslandBundleId()]},HoseEpisode.prototype.getExternalBundle=function(){if(cleverapps.metha.getType()===Metha.HOSE)return bundles[this.bundleExternalId()]},HoseEpisode.prototype.animatePass=function(e){this.onAnimatePass?this.onAnimatePass(e):e()},HoseEpisode.prototype.animateOpen=function(e){this.onAnimateOpen?this.onAnimateOpen(e):e()},HoseEpisode.isFreshEpisode=function(e){
return e>=cleverapps.user.episode-HoseEpisode.FRESH_EPISODES+1&&e<=cleverapps.user.episode},HoseEpisode.prototype.isFreshEpisode=function(){return HoseEpisode.isFreshEpisode(this.episodeNo)},HoseEpisode.prototype.isAvailableToPlay=function(){return!!cleverapps.config.editorMode||(cleverapps.config.results?this.isFreshEpisode():levels.user.episode>=this.episodeNo)},HoseEpisode.FRESH_EPISODES=3;var EpisodesManager={create:function(){switch(cleverapps.config.name){case"riddles":case"runes":case"adventure":case"crocword":return new HoseEpisodes}return new FakeEpisodes}},Episodes=function(){this.getAmountEpisodes=Episodes.getAmountEpisodes,this.onResetListener=function(){}};Episodes.prototype.reset=function(){delete Episodes.amountEpisodes,this.onResetListener()},Episodes.getAmountEpisodes=function(){return void 0===Episodes.amountEpisodes&&(Episodes.amountEpisodes=Episodes.calcAmountEpisodes()),Episodes.amountEpisodes},Episodes.calcAmountEpisodes=function(){for(
var e=0;void 0!==bundles[Episode.BundleId(e)];){var t=bundles[Episode.BundleId(e)];if(!t.jsons||!t.jsons.levels)break;e++}return e};var HoseEpisodes=function(){Episodes.call(this),this.episodes={},this.onAddEpisode=function(e){},levels.user.onLevelStatusChanged=function(e,t){var s=this.episodes[e];s&&s.levels[t].update()}.bind(this);var e={};cc.sys.isNative&&"match3"===cleverapps.config.type&&(e={amount:cleverapps.styles.PagesView.visiblePages+2,interval:"2 seconds",delay:"2 seconds"}),this.loadEpisodesExecutor=new ExecutorPool(e),cleverapps.config.results&&cleverapps.friends.addFriendsUpdatedListener(function(){for(var e in this.episodes){this.episodes[e].friendsResults.whenFriendListUpdated()}}.bind(this)),cleverapps.friends.addFriendsUpdatedListener(function(){levels.progress.whenFriendListUpdated()}),levels.progress.onUpdated=function(){for(var e in this.episodes){this.episodes[e].updateProgress()}}.bind(this),cleverapps.metha.getType()===Metha.HOSE&&this.reset()}
;HoseEpisodes.prototype=Object.create(Episodes.prototype),(HoseEpisodes.prototype.constructor=HoseEpisodes).prototype.gamePlayed=function(e,t){},HoseEpisodes.prototype.getActiveEpisode=function(){var e=levels.user.getCurrentLevel(),t=this.episodes[e.episodeNo];return t||(this.addEpisode(e.episodeNo),(t=this.episodes[e.episodeNo]).loadData()),t},HoseEpisodes.prototype.wantsToPlay=function(e,t){var s=this.getActiveEpisode().getLevel(levels.user.getCurrentLevel().levelNo);cleverapps.Plot.isPassedAllEpisodes=levels.user.isPassedAll(),((t=t||{}).playNext||t.dailyTask||t.mission||LevelStartWindow.isAvailable(s.episode.episodeNo,s.levelNo))&&BoostersBefore.isAvailable()?cleverapps.metha.compound(e,[function(e){t.playNext?cleverapps.Plot.GameLeave(e,t):e()},function(e){cleverapps.metha.showControlsWhileFocused("MenuBarGoldItem"),new LevelStartWindow({level:s}),cleverapps.metha.onceNoWindowsListener=e}]):(cleverapps.metha.showControlsWhileFocused("mainTableView"),s.play(e))},
HoseEpisodes.prototype.reset=function(){for(var e in delete this.currentEpisode,this.episodes)this.removeEpisode(e);this.episodes={},Episodes.prototype.reset.apply(this,arguments)},HoseEpisodes.prototype.addEpisode=function(e){var t=new HoseEpisode(e);this.episodes[e]=t,this.onAddEpisode(t)},HoseEpisodes.prototype.removeEpisode=function(e){this.episodes[e].destructor(),delete this.episodes[e]},HoseEpisodes.prototype.getCurrentEpisode=function(){return this.episodes[this.currentEpisode]},HoseEpisodes.prototype.loadCurrentEpisode=function(e){var t=[this.getCurrentEpisode()];cleverapps.styles.PagesView.noAutoScroll&&this.episodes[this.currentEpisode+1]&&t.push(this.episodes[this.currentEpisode+1]);var s=cleverapps.wait(t.length,e);t.forEach(function(e){e.whenLoaded(s)})},HoseEpisodes.prototype.range=function(e,t,s){return cleverapps.rangeArray(e+t,e+s).filter(function(e){return 0<=e&&e<=this.getAmountEpisodes()}.bind(this))},HoseEpisodes.prototype.setCurrentEpisode=function(t){void 0===(
t=parseInt(t))&&(t=levels.user.episode),t>=this.getAmountEpisodes()&&(t=this.getAmountEpisodes()),this.currentEpisode=t;var e,s,n=Object.keys(this.episodes).map(function(e){return parseInt(e)});if(this.currentEpisode<0)e=n.concat(n.indexOf(this.currentEpisode)<0?[this.currentEpisode]:[]).filter(function(e){return 0<=e||e===t}),s=[t];else{var i=cleverapps.styles.PagesView.visiblePages;e=this.range(t,-1,i+1),s=this.range(t,cleverapps.styles.PagesView.prevEpisodeShowed?-1:0,i)}cleverapps.substract(n,e).forEach(function(e){this.removeEpisode(e)},this),cleverapps.substract(e,n).forEach(function(e){this.addEpisode(e)},this),s.forEach(function(e){this.loadEpisodesExecutor.execute(function(){return this.episodes[e]?this.episodes[e].loadData():cleverapps.NO_ACTION}.bind(this))},this)},HoseEpisodes.prototype.nextEpisode=function(){this.currentEpisode+cleverapps.styles.PagesView.visiblePages<=this.getAmountEpisodes()&&this.setCurrentEpisode(this.currentEpisode+1)},
HoseEpisodes.prototype.prevEpisode=function(){return 0<this.currentEpisode&&(this.setCurrentEpisode(this.currentEpisode-1),!0)};var FakeEpisodes=function(){Episodes.call(this)};FakeEpisodes.prototype=Object.create(Episodes.prototype),(FakeEpisodes.prototype.constructor=FakeEpisodes).prototype.setCurrentEpisode=function(){},FakeEpisodes.prototype.getCurrentEpisode=function(){};var CloudsAnimation=cc.Node.extend({ctor:function(){this._super(),this.setLocalZOrder(101);var e=this.animation=new cleverapps.Spine(bundles.main.jsons.episode_clouds_spine_json);if(this.addChild(e),this.inUse=!0,cleverapps.styles.EpisodeView.text){var t=cleverapps.UI.generateTTFText("messages:LoadingEpisode",cleverapps.styles.FONTS.EPISODE_CLOUD_TEXT);t.setPositionRound(cleverapps.styles.EpisodeView.text.x,cleverapps.styles.EpisodeView.text.y),t.setDimensions(.5*cleverapps.UI.getSceneSize().width,0),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.addChild(t),(this.text=t).setAnchorPoint2()}},
startLoadAnimation:function(e){this.animation.setAnimation(0,"idle",!0),this.setVisible(!1),this.runAction(new cc.Sequence(new cc.DelayTime(.1),new cc.CallFunc(function(){this.visible=e.isRunningSafe()&&e.visible,this.text&&this.text.runAction(new cc.FadeIn(.3))}.bind(this))))},finishLoadAnimation:function(e){this.animation.setAnimation(0,"open",!1),this.animation.setCompleteListener(function(){this.finishAnimation(e)}.bind(this)),this.text&&(this.text.stopAllActions(),this.text.runAction(new cc.FadeOut(.7)))},finishAnimation:function(e){this.inUse&&(this.inUse=!1,cc.pool.putInPool(this),"function"==typeof e&&e())},unuse:function(){this.animation.visible=!1,this.animation.setCompleteListener(function(){}),this.animation.setStartVisibleListener(function(){}),this.removeFromParent()},reuse:function(){this.inUse=!0}});CloudsAnimation.factory=function(){return cc.pool.hasObject(CloudsAnimation)?cc.pool.getFromPool(CloudsAnimation):new CloudsAnimation},levels.EpisodesController=function(s){
var e=levels.episodes.currentLevel,t=levels.episodes.getCurrentEpisode();t||(levels.episodes.setCurrentEpisode(levels.user.episode),t=levels.episodes.getCurrentEpisode());var n=t.episodeNo;(cleverapps.user.episode<n||!t.isAvailableToPlay()&&!t.isComingSoon())&&(e=n=void 0),void 0===n&&(n=levels.user.episode),void 0===e&&(e=n===levels.user.episode?levels.user.level:0),levels.episodes.changeEpisodeAnimation&&(n=levels.user.episode-1,e=Episode.LEVELS_PER_EPISODE-1),levels.episodes.currentEpisode!==n&&levels.episodes.setCurrentEpisode(n);var i=new PagesView({currentLevelPos:levels.episodes.episodes[n].currentLevelPosition(e),disableLevelScroll:levels.episodes.disableLevelScroll,beginPage:n,amountPages:levels.episodes.getAmountEpisodes()+1,swallowTouches:!0});i.setLocalZOrder(-1),cleverapps.styles.EpisodeView.parallaxContainer?s.parallaxContainer.addChild(i):s.addChild(i),cleverapps.styles.EpisodesScene.hidable&&(cleverapps.UI.makeHideable(i),cleverapps.metha.registerControl("mainTableView"
,i)),s.updateBackgroundScale=function(){i.updateParallaxBackgroundsScale()};var o=function(e){if(i.autoScroll){var t=i.currentPage!==levels.episodes.currentEpisode;i.currentPage=levels.episodes.currentEpisode,i.scrollToCurrentPage(!1,t,e)}};levels.episodes.scrollToCurrentLevel=function(){i.scrollToCurrentLevel(!1)},levels.episodes.scrollToCurrentEpisode=function(e,t,s){i.currentPage=levels.episodes.currentEpisode,i.scrollToCurrentPage(e,t,s,levels.episodes.currentEpisode)};var a=function(){};for(var r in i.onScrolledToCurrentPage=function(){cleverapps.bundleLoader.clearUnusedResources(),a()},levels.episodes.gotoNextEpisode=function(e,t,s){a=function(){a=function(){},e()},i.autoScroll?(levels.episodes.nextEpisode(),o(t)):i.scrollToCurrentPage(!1,!0,t,void 0!==s?s:levels.episodes.currentEpisode+1)},levels.episodes.gotoPrevEpisode=function(e){i.autoScroll?(levels.episodes.prevEpisode(),o(e)):i.scrollToCurrentPage(!1,!0,e,levels.episodes.currentEpisode-1)},i.onNextPageListener=function(){
levels.episodes.nextEpisode(),o()}.bind(this),i.onPrevPageListener=function(){levels.episodes.prevEpisode(),o()}.bind(this),this.addPage=function(e){if(e.isComingSoon()){var t=new ComingSoonEpisodeView(e,s);i.addPage(t)}else if(0<=e.episodeNo){t=new EpisodeView(e,s);i.addPage(t)}},levels.episodes.onAddEpisode=i.createListener(this.addPage),levels.episodes.episodes)this.addPage(levels.episodes.episodes[r]);this.customize()},levels.EpisodesController.prototype.customize=function(){};var PagesView=PagingScrollView.extend({ctor:function(e){this.options=e;var t=cleverapps.UI.getSceneSize(),s=cleverapps.styles.PagesView;this.currentLevelPos=e.currentLevelPos,this.disableLevelScroll=e.disableLevelScroll;var n="scene"===s.pageWidth?t.width:s.pageWidth,i="scene"===s.pageHeight?t.height:s.pageHeight;this._super({beginPage:e.beginPage,amountPages:e.amountPages,swallowTouches:e.swallowTouches,noWheelScroll:e.noWheelScroll,styles:s,pageWidth:n,pageHeight:i}),this.setAnchorPoint(.5,.5)
;var o="scene"===s.width?t.width:s.width,a="scene"===s.height?t.height:s.height;this.setContentSize(o,a),this.calcFirstOffset(),this.parallax=new PagesViewParallax(s.parallax,this.container,s.direction),s["3d"]&&this.scheduleUpdate();var r=cleverapps.styles.PagesView.maxWidth;r&&r<o&&this.setScale(o/r)},updateParallaxBackgroundsScale:function(){this.parallax.updateScale()},update:function(e){if(this._super(e),cleverapps.styles.PagesView["3d"]){var a,r=cleverapps.styles.PagesView["3d"];a=cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?r.mobileScales:r.scales,this.getVisiblePages().forEach(function(e){var t=this.height,s=-this.container.y,n=(t-(e.y-s)+this.pageHeight/2)/t,i=(n=n<1?n:1)*a[1]+a[0],o=i;r.horizont&&(o=n*a[1]+(n*(1-r.horizont.scale)+r.horizont.scale)*a[0]),e.setScale(i,o),e.setLocalZOrder(-e.pageNo)}.bind(this))}},scrollToCurrentLevel:function(e){this.autoScroll||!this.currentLevelPos||this.disableLevelScroll&&e||this.scrollToPositionInPage(this.currentLevelPos,e)},
showAnimation:function(e,t){if(this.stopAllActions(),e)return this.visible=!0,void this.setScale(1);this.getPages().forEach(function(e){e.setVisible(this.currentPage===e.pageNo)}.bind(this)),this.visible=!0,this.runAction(new cc.Sequence(new cc.DelayTime(t||0),new cc.ScaleTo(.25,1),new cc.CallFunc(function(){this.showCurrentPageOnly()}.bind(this))))},hideAnimation:function(e,t){if(this.stopAllActions(),e)return this.setScale(0),void(this.visible=!1);this.getPages().forEach(function(e){e.setVisible(this.currentPage===e.pageNo)}.bind(this)),this.runAction(new cc.Sequence(new cc.DelayTime(t||0),new cc.ScaleTo(.15,0),new cc.CallFunc(function(){this.visible=!1}.bind(this))))},onEnter:function(){this._super(),this.customize(),this.scrollToCurrentPage(!0),this.scrollToCurrentLevel(!0)},customize:function(){this.setPosition(this.width/2,this.height/2+30*resolutionScale)}});cleverapps.styles.PagesView={direction:PagingScrollView.DIRECTIONS.Horizontal,height:1200,width:"scene",visiblePages:1,
prevEpisodeShowed:!1,pageHeight:1200,pageWidth:"scene","3d":!1,parallax:{speed:[0,.15],zIndex:[-1e3,-999],layers:[1,2,2],bundle:"episodes_spines",width:"scene",height:"scene"}};var EpisodeView=cc.Node.extend({ctor:function(e,t){this._super(),this.episode=e,this.pageNo=e.episodeNo,this.levels=[],this.setAnchorPoint(.5,.5),(this.episode.currentView=this).episodesScene=t;var s=cleverapps.UI.getSceneSize(),n=cleverapps.styles.EpisodeView.height,i=cleverapps.styles.EpisodeView.offsetEpisodes?-cleverapps.UI.getSceneOffsetY():0;cleverapps.styles.EpisodeView.direction===cleverapps.UI.VERTICAL?(this.setPositionRound(s.width/2,n*(e.episodeNo+.5)+i),this.bgScale=(n+cleverapps.styles.EpisodeView.addPixels)/n):(this.setPosition(s.width*(e.episodeNo+.5),n/2),this.bgScale=(s.width+cleverapps.styles.EpisodeView.addPixels)/s.width),this.isCustomBackground()||this.addDefaultBackground(),e.onLoadListener=this.createListener(this.onLoad.bind(this)),e.getExternalBundle(
)&&e.externalLoaded&&e.loaded||!e.getExternalBundle()&&e.loaded?this.onExternalLoad():e.onExternalLoadListener=this.createListener(this.onExternalLoad.bind(this)),e.onRemoveListener=this.createListener(this.onDelete.bind(this)),this.setLocalZOrder(-e.episodeNo),this.updateScale()},customize:function(){},updateScale:function(){var e=cleverapps.styles.EpisodeView;if(e.scale)this.setScale(e.scale);else{var t=cleverapps.UI.getSceneSize().width/(e.Background.width+e.padding);(t=Math.max(e.minScale,t))<1&&this.setScale(t)}this.baseScale=this.scale},onShow:function(){this.episode.loaded?this.onLoad():this.startLoadAnimation()},onDelete:function(){this.removeLoadAnimation(),this.removeNotOpennedAnimation(),this.removeFromParent()},addBetweenEpisodesFlag:function(){var e=cleverapps.styles.LevelView;if(e.betweenEpisodesFlag&&(e=e.betweenEpisodesFlag)[this.episode.getBundle().levelPositions]){var t=this.episode.bundleId(),s=e[this.episode.getBundle().levelPositions];if(!1!==s[t]){
var n=new cleverapps.Spine(e.spine);n.setPositionRound(s[t]?s[t]:s.default),n.setAnimation(0,this.episode.episodeNo<levels.user.episode?e.passed:e.notpassed,!0),this.addChild(n)}}},onLoad:function(){this.addDescription(),this.finishLoadAnimation(),this.levelViews=[],cleverapps.config.rpg||(this.levelViews=this.episode.levels.map(function(e){var t=LevelView;cleverapps.config.editorMode&&(t=LevelViewEditor);var s=new t(e,this);return this.addChild(s),s},this)),this.addBetweenEpisodesFlag(),this.addPlayerAvatar(),this.addFingerTip(),this.addTitle(),this.customize(),this.episode.getExternalBundle()&&!this.episode.externalLoaded&&this.addDefaultBackground()},onExternalLoad:function(){this.addSpines(),this.addIsland(),this.addBackground()},addTitle:function(){if("undefined"==typeof match3){var e={episodeNo:this.episode.episodeNo+1},t=cleverapps.styles.EpisodeView.title,s="messages:EpisodeView.Title";if(this.episode.isComingSoon()&&(s="messages:EpisodeView.ComingSoonTitle"),t.bg){
var n=cleverapps.UI.createScale9Sprite(t.bg.image);this.addChild(n),n.setPositionRound(t.bg),n.setContentSize2(t.bg)}var i=this.title=cleverapps.UI.generateTTFText(s,cleverapps.styles.FONTS.EPISODE_TITLE_TEXT,e);i.y=t.y,this.addChild(i,1)}},addDescription:function(){if("board"===cleverapps.config.type&&"stacks"!==cleverapps.config.subtype){var e,t=cleverapps.styles.EpisodeView;if(this.episode.isComingSoon())(e=cleverapps.UI.generateTTFText("messages:EpisodeView.ComingSoonDescription",cleverapps.styles.FONTS.DESCRIPTION_TEXT)).fitTo(.9*t.Background.width);else{for(var s=100,n=0,i=0;i<this.episode.levelsPerEpisode;i++){var o=this.episode.getLevelContent(i);s=Math.min(s,o.base.length),n=Math.max(n,o.base.length)}var a=Math.round(s/3+n/2-2);a<1&&(a=1),5<a&&(a=5),a=this.formatDifficulty(a);var r=s+" - "+n;s===n&&(r=s),e=cleverapps.UI.generateTTFText("messages:EpisodeView.Description",cleverapps.styles.FONTS.DESCRIPTION_TEXT,{letters:r,difficulty:a})}(this.description=e).y=t.description.y,
this.addChild(e)}},isCustomBackground:function(){return this.episode.getExternalBundle()||this.episode.getBundle().urls.background},addBackground:function(){var e=this.episode.getExternalBundle()&&this.episode.getExternalBundle().urls.background||this.episode.getBundle().urls.background;if(e){if(void 0===cc.loader.getRes(e))return console.log("No bg image loaded, using default: "+e),void this.addDefaultBackground();this.bg&&this.bg.removeFromParent(),this.bg=new cc.Sprite(cc.loader.getRes(e)),this.bg.setScale(this.bgScale),this.bg.setLocalZOrder(-1),this.addChild(this.bg)}},addDefaultBackground:function(){if("undefined"==typeof match3){var e=cleverapps.styles.EpisodeView.Background;this.bg=cleverapps.UI.createScale9Sprite(bundles.main.frames.episode_bg_png,cleverapps.UI.Scale9Rect.TwoPixelY),this.bg.setContentSize(e.width,e.height),this.bg.y=e.y,this.bg.setLocalZOrder(-1),this.addChild(this.bg),SceneDecors.add(this.bg,cleverapps.skins.getSlot("episodeView"))
}else bundles.main.urls.blank_bg_jpg&&(this.bg=new cc.Sprite(bundles.main.urls.blank_bg_jpg),this.bg.setScale(2*this.bgScale),this.bg.setLocalZOrder(-2),this.addChild(this.bg))},addSpines:function(){var e=this.episode.getExternalBundle()&&this.episode.getExternalBundle().urls.png;if(e)if(void 0!==cc.loader.getRes(e))for(var t=0;t<10;t++){var s=this.episode.getExternalBundle().jsons["spine_"+t+"_json"];if(!s)break;var n=new cleverapps.Spine(s);n.setAnimation(0,"animation",!0),n.setLocalZOrder(1),this.animation=n,this.addChild(n)}else console.log("No spines image loaded")},addIsland:function(){var e=this.episode.getIslandBundle();if(e&&e.jsons["island_"+this.episode.episodeNo+"_json"]){var t=this.island=new IslandView(this.episode,this.episodesScene);t.setLocalZOrder(3),this.addChild(t)}},removeLoadAnimation:function(){this.loading&&(this.loading.finishAnimation(),delete this.loading)},removeNotOpennedAnimation:function(){this.notOpennedAnimation&&(
this.notOpennedAnimation.removeFromParent(),delete this.notOpennedAnimation)},startLoadAnimation:function(){if(cleverapps.styles.EpisodeView.loadAnimation){var e=CloudsAnimation.factory();e.pageNo=this.pageNo,e.setPositionRound(this.getPosition()),this.getParent().addChild(e),(this.loading=e).startLoadAnimation(this)}},formatDifficulty:function(e){return e},finishLoadAnimation:function(){if(cleverapps.styles.EpisodeView.loadAnimation){if(this.loading)if(cc.director.getRunningScene()instanceof levels.EpisodesScene&&this.loading.visible){cleverapps.styles.EpisodeView;this.loading.finishLoadAnimation(this.removeLoadAnimation.bind(this))}else this.removeLoadAnimation();if(cleverapps.styles.EpisodeView.oldAnimation&&!this.episode.isComingSoon()&&cleverapps.user.episode>=this.episode.episodeNo){var e;if(this.episode.isAvailableToPlay())this.episode.isFirstNotInShadow()&&(e=new cleverapps.Spine(bundles.main.jsons.episode_clouds_line_spine_json)).setAnimation(0,"animation",!0);else{(
e=new cleverapps.Spine(bundles.main.jsons.episode_clouds_spine_json)).setAnimation(0,"old",!0);var t=cleverapps.UI.generateTTFText("messages:EpisodeView.TooOldEpisode",cleverapps.styles.FONTS.EPISODE_CLOUD_TEXT);t.setPositionRound(e.width/2,e.height/2+cleverapps.styles.EpisodeView.text.y),t.setDimensions(.5*cleverapps.UI.getSceneSize().width,0),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setAnchorPoint2(),e.addChild(t)}e&&(e.setLocalZOrder(100),e.pageNo=this.pageNo,e.setPositionRound(this.getPosition()),this.getParent().addChild(e),this.notOpennedAnimation=e)}}},createUserView:function(){return new cleverapps.UI.Avatar(cleverapps.friends.getPlayer())},addPlayerAvatar:function(){var e=this.levelViews[levels.user.level];if(e&&!this.userView&&levels.user.episode===this.episode.episodeNo&&!this.episode.isComingSoon())if(cleverapps.social.isLoggedIn()){var t,s=this.userView=this.createUserView(),n=e.inLeftLevels(!0);cleverapps.styles.EpisodeView["player"+levels.user.level]?(
t=cleverapps.styles.EpisodeView["player"+levels.user.level],n&&cleverapps.styles.EpisodeView["playerLeftLevels"+levels.user.level]&&(t=cleverapps.styles.EpisodeView["playerLeftLevels"+levels.user.level])):(t=cleverapps.styles.EpisodeView.player,n&&cleverapps.styles.EpisodeView.playerLeftLevels&&(t=cleverapps.styles.EpisodeView.playerLeftLevels)),s.setPosition(e.getPosition()),s.x+=e.width/2+t.x,s.y+=e.height/2+t.y,void 0!==t.scale&&s.setScale(s.getScale()*t.scale),this.addChild(s),s.setLocalZOrder(4)}else cleverapps.friends.onUserUpdatedListener=this.createListener(function(){this.addPlayerAvatar()}.bind(this))},addFingerTip:function(){if(levels.user.episode===this.episode.episodeNo&&!this.episode.isComingSoon()&&cleverapps.styles.EpisodeView.fingerTip){var e=this.levelViews[levels.user.level];if(!e||e.fingerTip)return;var t=new FingerView({control:"episode_view_finger"});e.fingerTip=t,e.addChild(t),t.setPositionRound(e.width/2,e.height/2),t.standardLoop({
delay:cleverapps.styles.EpisodeView.finger.delay,delayOnBegin:!0})}}});cleverapps.styles.EpisodeView={height:cleverapps.styles.SCENE_HEIGHT,paddingTop:300,parallaxContainer:!0,addPixels:2,direction:cleverapps.UI.HORIZONTAL,Background:{width:720,height:1200},title:{y:490},description:{y:420},player:{x:5,y:5},episodeNum:{position:[{x:-180,y:480},{x:-540,y:480},{x:-540,y:480}]},finger:{delay:5},loadAnimation:!1,oldAnimation:!1};var ComingSoonEpisodeView=EpisodeView.extend({ctor:function(e,t){this._super(e,t),this.setLocalZOrder(1)},customize:function(){this._super();var e=cleverapps.styles.EpisodeView.comingSoon;e.textOffset&&(this.title.y+=e.textOffset,this.description.y+=e.textOffset)},onExternalLoad:function(){this._super(),this.addCharacter()},addCharacter:function(){var e=cleverapps.styles.EpisodeView.comingSoon.character;if(e.json)(t=new cleverapps.Spine(e.json)).setAnimation(0,e.animationName,!0);else var t=new cc.Sprite(e.image);t.setScale(e.scale),t.setPosition(e.x,e.y),
this.addChild(t)},addBackground:function(){if(bundles.main.jsons.episode_clouds_line_spine_json){var e=new cleverapps.Spine(bundles.main.jsons.episode_clouds_spine_json);e.setAnimation(0,"idle",!0),e.setLocalZOrder(-1),this.addChild(e)}}});cleverapps.overrideStyles(cleverapps.styles.EpisodeView,{comingSoon:{character:{scale:1,x:0,y:0}}});var Level=function(e,t,s){this.episode=e,this.levelNo=t,this.episodeNo=e.episodeNo,this.stars=s||0,this.players=[],this.update()};Level.prototype.getHash=function(){},Level.prototype.listPlayers=function(){return this.players.length<=3?this.players:this.players.splice(0,3)},Level.prototype.isClickable=function(){return!!cleverapps.config.editorMode||!(this.type===Level.TYPE_NOTPASSED||!this.episode.isAvailableToPlay())&&(this.type===Level.TYPE_CURRENT||"olympics"!==cleverapps.config.name)},Level.prototype.getHumanReadableNumber=function(){return cleverapps.humanReadableNumber(this.episodeNo,this.levelNo)},Level.prototype.insertPlayer=function(e){
this.players.push(e)},Level.prototype.removePlayer=function(e){var t=this.players.indexOf(e);-1<t&&this.players.splice(t,1)},Level.prototype.isRegular=function(){return this.episode.isRegular()},Level.prototype.isCurrentLevel=function(){return this.isRegular()&&levels.user.isCurrentLevel(this.levelNo,this.episode.episodeNo)},Level.prototype.isPassedLevel=function(){return levels.user.isPassedLevel(this.levelNo,this.episode.episodeNo)},Level.prototype.isHard=function(){return-1!==this.episode.getHardLevels().indexOf(this.levelNo)},Level.prototype.isTricky=function(){return-1!==this.episode.getTrickyLevels().indexOf(this.levelNo)},Level.prototype.isNew=function(){return this.type!==Level.TYPE_PASSED||this.isCurrentLevel()},Level.prototype.isLastLevelOnEpisode=function(){return this.episode.levels.map(function(e){return e.levelNo}).indexOf(this.levelNo)===this.episode.levelsPerEpisode-1},Level.prototype.getVersion=function(){return void 0===this.version&&(
this.version=this.episode.getLevelContent(this.levelNo).version),this.version},Level.prototype.improveStars=function(e){this.stars=e},Level.prototype.loadBundle=function(e){var t=e&&e.onSuccess||function(){};this.load(t)},Level.prototype.load=function(e,t){this.content&&!cleverapps.config.editorMode?e&&e():(this.episode.loadData(),this.episode.whenLoaded(function(){this.content=this.episode.getLevelContent(this.levelNo),this.hash=Level.CalcHash(this.content),e&&e()}.bind(this),t))},Level.prototype.unload=function(){this.episode.destructor()},Level.CalcHash=function(e){return RecursiveHasher(e,["episodeNo","levelNo","version","hard","paint","extra","gold","hash","hashes","comments","translate","definitions","bundles"])},Level.prototype.play=function(e,n){cleverapps.social.requestFullScreen(function(){cleverapps.config.editorMode&&(this.content=void 0,cleverapps.environment.setScene(cleverapps.Environment.SCENE_GAME)),cleverapps.rewardedAdsManager&&!cleverapps.isLocalhost(
)&&cleverapps.rewardedAdsManager.showInterstitial();var s=new SceneProxy;cleverapps.scenes.replaceScene(s,e,{level:this}),this.episode.levels&&1===this.episode.levels.length&&!this.episode.loaded&&s.whenLoaded(function(e){e.registerCleanupCallback(this.unload.bind(this))}.bind(this)),this.load(function(){var e="mergecraft"===cleverapps.config.name?void 0:new Game(this,n),t=new GameScene(e,this);t instanceof SceneProxy?t.whenLoaded(function(e){s.instance=e,s.onLoad()}):(s.instance=t,s.onLoad())}.bind(this))}.bind(this))},Level.prototype.onPressed=function(){cleverapps.lives&&cleverapps.lives.isEmpty()?cleverapps.metha.display({focus:["LevelPressedNoLives","MenuBarGoldItem","MenuBarLivesItem"],action:function(e){new LivesShopWindow,cleverapps.metha.onceNoWindowsListener=e}}):!BoostersBefore.isAvailable()&&(!0!==cleverapps.config.results||this.isCurrentLevel()&&!this.isHard())||!LevelStartWindow.isAvailable(this.episode.episodeNo,this.levelNo)?cleverapps.metha.display({
focus:"LevelPressedPlay",action:function(e){this.play(e)}.bind(this)}):cleverapps.metha.display({focus:"LevelStartWindow",control:"MenuBarGoldItem",actions:[function(e){this.load(e)}.bind(this),function(e){new LevelStartWindow({level:this}),cleverapps.metha.onceNoWindowsListener=e}.bind(this)]})},Level.prototype.update=function(){cleverapps.metha.getType()===Metha.HOSE?levels.user.episode>this.episode.episodeNo?this.type=Level.TYPE_PASSED:levels.user.episode<this.episode.episodeNo?this.type=Level.TYPE_NOTPASSED:levels.user.level>this.levelNo?this.type=Level.TYPE_PASSED:levels.user.level===this.levelNo?this.type=Level.TYPE_CURRENT:this.type=Level.TYPE_NOTPASSED:this.type=Level.TYPE_CURRENT},Level.prototype.isChampion=function(){if(!this.episode.friendsResults)return!1;var e=this.episode.friendsResults.listTop4(this.levelNo,!0);return!(e.length<=1||levels.user.id!==e[0].id||void 0===e[0].score)},Level.TYPE_PASSED=0,Level.TYPE_CURRENT=1,Level.TYPE_NOTPASSED=2
;var PlayerView=cleverapps.UI.Avatar.extend({ctor:function(e,t,s,n){var i=cleverapps.friends.getById(e);if(this._super(i.avatar),this.id=e,void 0!==t){var o=cleverapps.styles.LevelView;o=t?o["PlayerViewLeft"+n]?o["PlayerViewLeft"+n]:o.PlayerViewLeft:o["PlayerViewRight"+n]?o["PlayerViewRight"+n]:o.PlayerViewRight,this.setPositionRound(o.x,o.y),o.scale&&this.setScale(o.scale)}else{o=cleverapps.styles.LevelView.PlayerView;this.setPositionRound(o.x,o.y),o.scale&&this.setScale(o.scale)}}});PlayerView.TAG=1;var LevelView=cc.Node.extend({ctor:function(e,t){this._super(),this.level=e,void 0!==t&&this.calculatePosition(t),void 0!==t&&t.episode.isComingSoon()?this.setPosition(cleverapps.styles.LevelView.coming_soon[0]):(this.addLevelBg(),this.addLevelId()),this.level.listPlayers().forEach(this.insertPlayer.bind(this)),this.level.isClickable()?(this.addTouchListener(),cleverapps.UI.applyHover(this)):(this.level.type===Level.TYPE_NOTPASSED||!this.level.episode.isAvailableToPlay(
)&&this.level.episode.episodeNo>=levels.user.episode)&&cleverapps.tooltipManager.create(this,{text:Messages.get("LevelNotPassedTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.below}),void 0!==t&&t.episode.isComingSoon()||this.customize()},inLeftLevels:function(e){var t=cleverapps.styles.LevelView;if(t.leftLevels){var s=t.leftLevels;e&&t.playerLeftLevels&&(s=t.playerLeftLevels);var n=!1;return this.level.episodeNo%2&&!t.notAlternate&&(n=!n),0<=s.indexOf(this.level.levelNo)&&(n=!n),n}},insertPlayer:function(e,t){if(cleverapps.friends.getById(e)){var s=cleverapps.styles.LevelView,n=new PlayerView(e,this.inLeftLevels(),this.level.episodeNo,this.level.levelNo),i=cleverapps.styles.LevelView.playersInterval,o=s.notAlternate?!this.inLeftLevels():this.inLeftLevels();n.x+=t*(o?i.x:-i.x),n.y-=t*i.y,0<t&&n.setLocalZOrder(-t),this.addChild(n)}},calculatePosition:function(){var e=cleverapps.styles.LevelView[this.level.episode.getBundle().levelPositions||"levels_1"][this.level.levelNo];(
this.level.levelNo<Episode.LEVELS_PER_EPISODE||e)&&this.setPosition(e)},customize:function(){},getAnimationName:function(){var e=this.level.isHard()?["hard_past","hard_current","hard_future"]:["past","current","future"],t=this.getStars();return void 0!==t&&this.level.type===Level.TYPE_PASSED?(e=this.level.isHard()?["hard_past_stars0","hard_past_stars1","hard_past_stars2","hard_past_stars3"]:["past_stars0","past_stars1","past_stars2","past_stars3"])[t]:e[this.level.type]},getStars:function(){if(cleverapps.config.results&&(this.level.episode.isAvailableToPlay()&&this.level.type!==Level.TYPE_CURRENT&&this.level.type===Level.TYPE_PASSED))return void 0!==this.level.stars?this.level.stars:0},addLevelBg:function(){var e=cleverapps.styles.LevelView,t=new cc.Node;t.setContentSize(e.clickSize),this.setContentSize(t.getContentSize());var s=this.getAnimationName(),n=new cleverapps.Spine(bundles.level.jsons.level_json);n.setAnimation(0,s,!0),n.setPosition(t.width/2,t.height/2+e.dy),t.addChild(n),
this.setAnchorPoint2(),this.addChild(t)},addLevelId:function(){this.level.isHard()&&cleverapps.styles.LevelView.hideHardLevelNo||LevelView.generateLevelId(this,this.level.type,this.level.getHumanReadableNumber())},addTouchListener:function(){cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(e){var t=this.convertTouchToNodeSpace(e);return this.beginLocation=e.getLocation(),!(!cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t)||!this.isVisible())&&(this.onTouchBegan(),!0)}.bind(this),onTouchMoved:function(e){if(this.beginLocation){var t=e.getLocation();if(10<Math.abs(t.x-this.beginLocation.x)+Math.abs(t.y-this.beginLocation.y))return this.onTouchEnded(),this.beginLocation=!1}return!0}.bind(this),onTouchEnded:function(e){if(this.beginLocation){var t=this.convertTouchToNodeSpace(e);if(cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t))return this.onTouchBegan(),this.onPressed(),!0}return!1}.bind(this)},this)},onPressed:function(){
cleverapps.audio.playSound(bundles.main.urls.click_effect),this.level.onPressed()},onTouchBegan:function(){this.startPositionY=this.startPositionY||this.getPositionY(),this.setPositionY(this.startPositionY-3)},onTouchEnded:function(){this.setPositionY(this.startPositionY)}});LevelView.generateLevelId=function(e,t,s){var n=cleverapps.styles.LevelView.LevelId;if(cleverapps.config.editorMode||-1!==n.showTypes.indexOf(t)){var i=cleverapps.styles.FONTS.LEVEL_TITLE_TEXT;t===Level.TYPE_NOTPASSED&&(i=cleverapps.styles.FONTS.LEVEL_NOT_PASSED_TITLE_TEXT),t===Level.TYPE_CURRENT&&cleverapps.styles.FONTS.LEVEL_CURRENT_TITLE_TEXT&&(i=cleverapps.styles.FONTS.LEVEL_CURRENT_TITLE_TEXT);var o,a=cleverapps.UI.generateImageText(s,i);1e3<=s?o=cleverapps.styles.FONTS.LEVEL_TITLE_TEXT.alternativeSizes[1]:100<=s&&(o=cleverapps.styles.FONTS.LEVEL_TITLE_TEXT.alternativeSizes[0]),o&&a.setScale(a.scale*o),e.addChild(a);var r=n;(e.levelId=a).setPositionRound(r.x,r.y)}},cleverapps.overrideFonts(
cleverapps.styles.FONTS,{LEVEL_TITLE_TEXT:{name:"default",size:40,color:cleverapps.styles.COLORS.WHITE,alternativeSizes:[.9,.8]},LEVEL_NOT_PASSED_TITLE_TEXT:{name:"default",size:40,color:cleverapps.styles.COLORS.WHITE,alternativeSizes:[.9,.8]}}),cleverapps.styles.LevelView={curLevelAction:{scale:1.2},coming_soon:[{x:-60,y:-200}],LevelId:{x:{dx:0},y:{dy:0},showTypes:[Level.TYPE_PASSED,Level.TYPE_CURRENT,Level.TYPE_NOTPASSED]},playersInterval:{x:16,y:8},PlayerView:{x:0,y:0},clickSize:{width:90,height:75},dy:-10};var FbConnectWindow=Window.extend({onWindowLoaded:function(e,t,s){var n=cleverapps.styles.FbConnectWindow;s=s||{};var i=n.width,o=[],a=function(e){e.setDimensions(i,0),e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),o.push(e)};s.errorMessage&&a(cleverapps.UI.generateOnlyText(s.errorMessage,cleverapps.styles.FONTS.SMALL_TEXT_ERROR)),a(cleverapps.UI.generateOnlyText("xsolla"===cleverapps.User.calcSource()?"messages:XsollaLogin.text":"messages:FbConnectWindow.text",
cleverapps.styles.FONTS.FBCONNECT_WINDOW_TEXT||cleverapps.styles.FONTS.WINDOW_TEXT));var r=new cleverapps.Layout(o,{padding:n.padding,y:n.offsetY,margin:n.Text.padding,direction:cleverapps.UI.VERTICAL,x:i/2});this._super({title:"messages:SignIn",closeButton:!s.withWindow,name:"fbconnectwindow",content:r}),e=cleverapps.once(e||function(){});var l=function(){this.onClose=function(){},this.close(),e()}.bind(this);t&&(this.onClose=t),this.addButtons(l),cleverapps.audio.playSound(bundles.main.urls.window_effect)},addButtons:function(s){var n=cleverapps.social.getCodes(),i=cleverapps.styles.FbConnectWindow,e=n.map(function(e){i.Button[e]&&i.Button[e].button_png;var t={multiSocials:1<n.length,height:i.Button.height,showText:1===n.length,iconScale:i.Button.iconScale,login:!0,source:e,onSuccess:s};return new FbButton(t)}),t=new cleverapps.Layout(e,{direction:cleverapps.UI.HORIZONTAL,margin:i.Button.margin});this.window.addChild(t);var o=i.Button.bottomPadding
;1<n.length&&void 0!==i.Button.multiSocials.bottomPadding&&(o=i.Button.multiSocials.bottomPadding),t.setPositionRound(this.window.width/2,t.height/2+o)}});cleverapps.styles.FbConnectWindow={width:600,offsetY:75,padding:{x:0,y:0},Button:{bottomPadding:50,height:120,margin:40,iconScale:.9,multiSocials:{}},Text:{extraWidth:0,padding:20},ButtonContent:{width:340,height:120,image:{x:20,y:5},minWidth:80,text:{x:10,y:6},empty:!1}};var Boatswain=function(e){this.level=e,this.level.episode.isDailyCup()?this.intent=this.BACK_TO_DAILY_CUP:this.intent=this.BACK_TO_MAIN};Boatswain.prototype.BACK_TO_DAILY_CUP=function(e){cleverapps.scenes.replaceScene(new DailyCupScene,e)},Boatswain.prototype.DAILY_LEVEL_BACK_TO_MAIN=function(e){var t=function(){cleverapps.metha.gotoMainScene(e)};cleverapps.rewardedAdsManager.isAvailable(RewardedAdsManager.REWARDED)?(t=cleverapps.waitNoMore(3e4,t),cleverapps.rewardedAdsManager.playRewarded(t)):t()},Boatswain.prototype.BACK_TO_MAIN=function(e){
cleverapps.Plot.GameLeave(e,{level:this.level})},Boatswain.prototype.PLAY_NEXT=function(e){cleverapps.metha.wantsToPlay(e,{level:this.level,playNext:!0})},Boatswain.prototype.REPLAY=function(e,t){(t=t||{}).level=this.level,t.replay=!0,cleverapps.metha.wantsToReplay(e,t)},Boatswain.EXIT_INTENT=0,Boatswain.NEXT_INTENT=1,Boatswain.REPLAY_INTENT=2;var DailyLevel=function(){cleverapps.isLocalhost()&&delete DailyLevel.AVAILABLE.source,this.load()};DailyLevel.prototype.load=function(){if(this.isAvailable()){var e=cleverapps.User.calcChannel("event");e&&0===e.indexOf(DailyLevel.EVENT_NAME)&&(this.currentEvent=e.substr(DailyLevel.EVENT_NAME.length),this.startFromPortlet=!0),this.currentEvent=this.currentEvent||this.getCurrentEvent();var t=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.DAILY_LEVEL);this.passed=t&&t.event===this.currentEvent&&(!t.levelsToPass||0===t.levelsToPass),this.levelsToPass=t&&t.levelsToPass?t.levelsToPass:this.getCountOfLevelsForReward(),
cleverapps.config.debugMode&&-1!==["576593702177"].indexOf(cleverapps.user.id)&&(this.passed=!1)}},DailyLevel.prototype.start=function(e){var t=this.getCurrentLevel(),s=new Episode(Episode.Types.DAILY_LEVELS,t).getLevel();LevelStartWindow.isAvailable(cleverapps.user.episode,cleverapps.user.level)&&BoostersBefore.isAvailable()?(new LevelStartWindow({level:s}),cleverapps.metha.onceNoWindowsListener=e):s.play(e)},DailyLevel.prototype.isAvailable=function(){return cleverapps.user.checkAvailable(DailyLevel.AVAILABLE)&&this.getBundle()},DailyLevel.prototype.getBundle=function(){return bundles.episode_daily_levels_ru||bundles.episode_daily_levels},DailyLevel.prototype.isActive=function(){return this.isAvailable()&&!this.passed},DailyLevel.prototype.isStartFromPortlet=function(){return this.isAvailable()&&this.startFromPortlet},DailyLevel.prototype.reset=function(){this.passed=!1,this.levelsToPass=this.getCountOfLevelsForReward(),cleverapps.DataLoader.remove(
cleverapps.DataLoaderTypes.DAILY_LEVEL)},DailyLevel.prototype.onWin=function(e){this.levelsToPass--,cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.DAILY_LEVEL,{event:this.getCurrentEvent(),levelsToPass:this.levelsToPass}),0===this.levelsToPass&&(this.passed=!0,cleverapps.social.setStatus&&cleverapps.social.setStatus(DailyLevel.EVENT_NAME+this.getCurrentEvent(),this.getStatus(e)),cleverapps.eventLogger.logEvent("daily_level_passed_"+this.getCurrentEvent()))},DailyLevel.prototype.getStatus=function(e){var t={},s=e.content;if("board"===cleverapps.config.type){var n=function(e){return 1===e?Messages.get("DailyLevel.Status.wordsAmount1"):e<=4?Messages.get("DailyLevel.Status.wordsAmount234",{amount:e}):Messages.get("DailyLevel.Status.wordsAmount5",{amount:e})};t={firstWord:s.words[0].toUpperCase(),base:s.base.toUpperCase(),amountMinus1:n(s.words.length-1),baseLength:s.base.length,wordsAmount:n(s.words.length)}}else"solitaire"===cleverapps.config.type&&(t={
cardsCount:Game.currentGame.table.beginCards,movesLeft:s.hand.num});var i=Messages.get("DailyLevel.Status.common",t);return i[Math.floor(Math.random()*i.length)]},DailyLevel.prototype.getCurrentEvent=function(){if(this.currentEvent)return this.currentEvent;var e=new Date;return cleverapps.padZeroes(e.getFullYear()%100,2)+cleverapps.padZeroes(e.getMonth()+1,2)+cleverapps.padZeroes(e.getDate(),2)},DailyLevel.prototype.getCurrentLevel=function(){var e=this.getCurrentEvent(),t=e.substr(0,2),s=e.substr(2,2),n=e.substr(4,2),i=new Date;i.setUTCFullYear(parseInt("20"+t),parseInt(s)-1,parseInt(n)),i.setUTCHours(0,0,0,0);var o=i.getTime()-new Date("2019-12-17").getTime();o/=864e5;var a=Math.floor(o),r=this.getBundle().levelsAmount-this.getCountOfLevelsForReward()+1,l=(a%r+r)%r;return console.log("dailylevel.getCurrentLevel event "+e+" levelNo "+l),l+(this.getCountOfLevelsForReward()-this.levelsToPass)},DailyLevel.prototype.getCountOfLevelsForReward=function(){return 1},
DailyLevel.EVENT_NAME="dailylevel",DailyLevel.AVAILABLE={projectName:["wordsoup","crocword","olympics","tripeaks"],language:"ru",source:["web_ok","mobile_ok"]};var DailyLevelWindow=Window.extend({onWindowLoaded:function(e){this.options=e;var t=cleverapps.styles.DailyLevelWindow;this._super({title:"messages:DailyLevelWindow.title",name:"dailylevelwindow",content:this.getContent(),styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.DailyLevelWindow.window,!0),button:{text:Messages.get("Play"),width:t.button.width,height:t.button.height,onPressed:function(){this.close()}.bind(this)}}),t.hero&&(this.hero=new cleverapps.Spine(t.hero.json,1),this.hero.setAnimation(0,t.hero.animation,!0),this.hero.setPositionRound(t.hero),this.hero.setScale(t.hero.scale),this.addChild(this.hero))},getContent:function(){var e=cleverapps.styles.DailyLevelWindow,t=[];if(e.animation.json){var s=this.createAnimation();t.push(s)}if(e.label){var n=new cc.Sprite(e.label);n.rotation=-15,t.push(
n)}var i=new cleverapps.Layout(t,{direction:cleverapps.UI.HORIZONTAL,margin:2*e.contentObjectsMargin}),o=this.createText();return new cleverapps.Layout([o,i],{direction:cleverapps.UI.VERTICAL,margin:e.contentObjectsMargin,padding:{x:0,y:e.contentObjectsMargin}})},createText:function(){var e=cleverapps.styles.DailyLevelWindow,t=cleverapps.UI.generateTTFText("messages:DailyLevelWindow.text",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT,{left:cleverapps.dailyLevel.levelsToPass});return t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setDimensions(cc.size(e.textWidth,0)),t},createAnimation:function(){var e=cleverapps.styles.DailyLevelWindow,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize(e.size);var s=new cleverapps.Spine(e.animation.json,e.scale);return s.setAnimation(0,e.animation.name?e.animation.name:"idle",!0),t.addChild(s),s.setPositionRound(t.width/2+e.animation.dx,t.height/2+e.animation.dy),t}});cleverapps.styles.DailyLevelWindow={contentObjectsMargin:30,textWidth:540,size:{
width:250,height:350},scale:.55,button:{width:200,height:100},animation:{dx:-100,dy:-70,json:bundles.hero.jsons.hero_json,name:"coming_soon"},label:bundles.game.frames.label_50_ok_png},cleverapps.overrideStyles(cleverapps.styles.DailyCupScene,{background:{pattern:bundles.daily_cup.urls.daily_cup_pattern},title:{width:400},timer:{timerBg:{image:bundles.main.frames.timer_bg_png}},tableBg:{image:bundles.windows.frames.window_bg_png,width:800,height:990,x:0,y:70}});var CharView=cc.Node.extend({ctor:function(e,t){this.options=t||{},this._super(),this.setAnchorPoint2();var s=cleverapps.styles.CharView;this.setContentSize2(s),this.withBg=!this.options.noBg,-1!==["ss","SS","ß"].indexOf(e)&&(e="ß");var n=this.getView(e);n.setPosition(this.width/2,this.height/2+this.calcCharPadding(n)),n.setLocalZOrder(2),this.addChild(n),this.withBg&&(this.bg=this.createBg(),this.addChild(this.bg)),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0)},calcCharPadding:function(e){
var t=cleverapps.styles.CharView;return this.withBg?e instanceof cleverapps.UI.LabelTTF&&t.regularFont&&t.regularFont.topPaddingWithBg?t.regularFont.topPaddingWithBg:t.topPaddingWithBg:e instanceof cleverapps.UI.ImageFont&&void 0!==t.imageTopPadding?t.imageTopPadding:t.topPadding},getView:function(e){var t=cleverapps.settings.language===cc.sys.LANGUAGE_JAPANESE?"letters_ja":"game";if(cleverapps.bundleLoader.isLoaded(t)){var s=bundles[t],n=e.toLowerCase();if(s.frames["letter_"+n])return new cc.Sprite(s.frames["letter_"+n])}return cleverapps.UI.generateTTFText(e,cleverapps.styles.FONTS.LETTERS_TEXT)},getImage:function(){return this.options.bgImage?this.options.bgImage:this.options.hard&&bundles.letters.frames.letter_hard_bg_png?bundles.letters.frames.letter_hard_bg_png:bundles.letters.frames.letter_bg_png},createBg:function(){var e=new cc.Sprite(this.getImage());return e.setPositionRound(this.width/2,this.height/2),e}});cleverapps.styles.CharView={width:92,height:92,topPadding:0,
topPaddingWithBg:0,char:{scale:1},hitBox:{radius:60,offset:15}};var CurrentLetterView=cc.Node.extend({ctor:function(e,t){this._super(),this.setAnchorPoint2();var s=cleverapps.styles.CurrentLetterView,n=-1!==["scramble","olympics"].indexOf(cleverapps.config.name)&&!cleverapps.config.wysiwygMode;this.charView=new CharView(e,{hard:t.hard,noBg:n,bgImage:CurrentLetterView.bgImage}),this.addChild(this.charView),this.setContentSize2(this.charView.getContentSize()),this.charView.setPositionRound(this.width/2,this.height/2),this.setScale(s.scale),this.baseScale=this.scale,this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0)},showUp:function(){this.setScale(.4*this.baseScale),this.runAction(new cc.ScaleTo(.2,this.baseScale))}});cleverapps.styles.CurrentLetterView={scale:1},cleverapps.CurrentView=cc.Node.extend({ctor:function(e){this._super(),this.letters=[],this.needReset=!1,this.current=e;var t=cleverapps.styles.CurrentView;if(this.isRegularFont="stacks"===cleverapps.config.subtype
,this.setAnchorPoint2(),"wordheaps"===cleverapps.config.name){var s=cleverapps.styles.BoardView.target;this.setPositionRound(s.x+s.grid.x-s.width/2,s.y+s.grid.height/2*s.grid.scale+t.boardOffsetY)}else this.setPositionRound(t.position);this.content=new cc.Node,this.addChild(this.content),this.content.setAnchorPoint2(),this.content.setPositionRound(cleverapps.styles.CurrentView.content),this.content.setCascadeOpacityEnabled(!0),this.content.setCascadeColorEnabled(!0),this.lettersHolder=new cc.Node,this.lettersHolder.setAnchorPoint2(),this.content.addChild(this.lettersHolder),this.lettersHolder.setPositionRound(t.lettersHolder),this.setCascadeOpacityEnabled(!0),this.setCascadeColorEnabled(!0),this.lettersHolder.setCascadeOpacityEnabled(!0),this.lettersHolder.setCascadeColorEnabled(!0),this.customize(),this.createBg(),this.setLocalZOrder(cleverapps.styles.CurrentView.zOrder),t.hide&&(this.hidePosition=t.hide,cleverapps.UI.makeHideable(this,cleverapps.UI.VERTICAL),this.hide(!0)),e.on(
"push",this.createListener(this.onPushListener.bind(this))),e.on("pop",this.createListener(this.pop.bind(this))),e.on("reset",this.createListener(function(){this.animateHide(),this.reset()}.bind(this))),e.on("status",this.createListener(function(e,t){switch(e){case WordGame.STATUSES.WRONG:this.wrong(t);break;case WordGame.STATUSES.BOARD:this.board();break;case WordGame.STATUSES.BOARD_FOUND:this.boardFound();break;case WordGame.STATUSES.EXTRA:this.extra();break;case WordGame.STATUSES.EXTRA_FOUND:this.extraFound();break;case WordGame.STATUSES.SHORT:this.short(t)}}.bind(this)))},adjustScale:function(){var e=cleverapps.styles.CurrentView.scale||1,t=cleverapps.UI.getSceneSize().width/this.calcHolderWidth();t<e?this.runAction(new cc.ScaleTo(.1,t)):this.runAction(new cc.ScaleTo(.1,e))},customize:function(){},createBg:function(){var e=cleverapps.styles.CurrentView;e.bg&&(this.bg=new cc.Scale9Sprite(this.getBgImage()),this.bg.setLocalZOrder(-1),e.bg.resize?this.content.addChild(this.bg):(
this.addChild(this.bg),this.bg.setContentSize2(e.bg)),this.updateBgSize())},getBgImage:function(){var e=bundles.game.frames.current_bg_png;return cleverapps.isRumble()&&cleverapps.metha.getMainObject().knockoutGame.rumble.getCurrentRound().isLast()&&(e=bundles.game.frames.current_bg_hard_png),this.current.game.level.isHard()&&(e=bundles.game.frames.current_bg_hard_png),this.current.game.level.episode.isBonusRound()&&bundles.game.frames.current_bg_bonus_png&&(e=bundles.game.frames.current_bg_bonus_png),this.current.game.level.isTricky()&&(e=bundles.game.frames.current_bg_tricky_png),e},onPushListener:function(e){this.isRegularFont?this.push(e.toUpperCase()):this.push(new CurrentLetterView(e.toUpperCase(),{hard:Game.currentGame.level.isHard()}))},push:function(e){this.needReset&&this.reset();var t=cleverapps.styles.CurrentView;this.isRegularFont?(this.letters.push(e),this.currentText||(this.currentText=cleverapps.UI.generateOnlyText("",cleverapps.styles.FONTS.CURRENT_TEXT),
this.lettersHolder.addChild(this.currentText),this.currentText.setPositionRound(t.regularText.position)),this.currentText.setString(this.letters.join(""))):(this.lettersHolder.addChild(e),this.letters.push(e),e.setPositionX(this.calcLetterPositionX(this.letters.length-1)),e.showUp(),this.animateMoveX()),1===this.letters.length&&this.animateShow(),this.updateBgSize()},pop:function(){this.isRegularFont?this.currentText.setString(this.currentText.getString().slice(0,-1)):this.lettersHolder.removeChild(this.letters[this.letters.length-1]),this.letters.pop(),this.animateMoveX(),0===this.letters.length&&this.animateHide(),this.updateBgSize()},updateBgSize:function(){var e=cleverapps.styles.CurrentView;this.adjustScale(),this.bg&&e.bg.resize&&(0<this.letters.length?this.isRegularFont?this.bg.setContentSize2(this.currentText.width+e.bg.padding.x,e.bg.height):this.bg.setContentSize2(e.Letter.width*this.letters.length+e.bg.padding.x,e.bg.height):this.bg.setContentSize2(0,0))},reset:function(){
this.needReset=!1,this.letters=[],this.lettersHolder.removeAllChildren(),this.lettersHolder.setPositionX(0),this.updateBgSize(),this.content.stopAllActions(),this.finishStatusAnimation(),delete this.currentText},animateShow:function(){cleverapps.styles.CurrentView.hide&&this.show()},animateHide:function(e){cleverapps.styles.CurrentView.hide&&this.hide(!1,e)},finishStatusAnimation:function(){this.content.setColor(cc.color.WHITE),this.content.setScale(1),this.content.setOpacity(255),this.needReset&&(this.animateHide(.2),this.reset())},runStatusAnimation:function(e){if(this.needReset=!0,this.content.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.Spawn(new cc.Sequence(new cc.FadeTo(.3,0)),new cc.ScaleTo(.3,1.2)),new cc.CallFunc(this.finishStatusAnimation,this))),e&&0<this.letters.length){var t=this.createStatusIcon(e);t.setScale(0),t.runAction(new cc.ScaleTo(.2,cleverapps.styles.CurrentView.statusIcon.scale))}},createStatusIcon:function(e){var t=cleverapps.styles.CurrentView,
s=new cc.Sprite(e);return this.isRegularFont?s.setPositionX(this.currentText.width/2+t.statusIcon.offsetX):s.setPositionX(this.calcLetterPositionX(this.letters.length)+t.statusIcon.offsetX),this.lettersHolder.addChild(s),s},wrong:function(e){cleverapps.audio.playSound(bundles.game.urls.wrong_effect),this.runStatusAnimation(bundles.game.frames.word_wrong_png),cleverapps.Notification.create("messages:CurrentView.Wrong",{toReplace:{word:e.toUpperCase()}})},board:function(){this.runStatusAnimation(bundles.game.frames.word_right_png)},extra:function(){cleverapps.audio.playSound(bundles.game.urls.extra_effect),cleverapps.Notification.create("messages:CurrentView.Extra"),this.runStatusAnimation(bundles.game.frames.word_extra_png)},boardFound:function(){cleverapps.audio.playSound(bundles.game.urls.alreadyfound_effect),this.runStatusAnimation(),cleverapps.Notification.create("messages:CurrentView.BoardFound")},extraFound:function(){cleverapps.audio.playSound(
bundles.game.urls.alreadyfound_effect),this.runStatusAnimation(),cleverapps.Notification.create("messages:CurrentView.ExtraFound")},short:function(e){"stacks"!==cleverapps.config.subtype?(cleverapps.audio.playSound(bundles.game.urls.wrong_effect),this.runStatusAnimation(bundles.game.frames.word_wrong_png),cleverapps.Notification.create("messages:CurrentView.Short",{toReplace:{word:e.toUpperCase()}})):this.reset()},calcLetterPositionX:function(e){return cleverapps.styles.CurrentView.Letter.width*e},calcHolderWidth:function(){return cleverapps.styles.CurrentView.Letter.width*this.letters.length},animateMoveX:function(){this.lettersHolder.stopAllActions(),this.isRegularFont||this.lettersHolder.runAction(new cc.MoveTo(.2,cc.p(-this.calcLetterPositionX(this.letters.length-1)/2,0)))}}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{CURRENT_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.CurrentView={position:{
x:{align:"center"},y:{align:"bottom",dy:630}},Letter:{width:80},content:{x:0,y:0},lettersHolder:{x:0,y:0},statusIcon:{scale:1,offsetX:12},regularText:{position:{x:0,y:2}},zOrder:2},cleverapps.Current=function(e,t){cleverapps.EventEmitter.call(this),this.game=e,this.letters=[],this.game.onChangeOutcomeListeners.current=this.reset.bind(this),t.on("push",this.push.bind(this)),t.on("pop",this.pop.bind(this)),t.on("reset",this.reset.bind(this))},cleverapps.Current.prototype=Object.create(cleverapps.EventEmitter.prototype),cleverapps.Current.prototype.constructor=cleverapps.Current,cleverapps.Current.prototype.status=function(e,t){this.trigger("status",e,t)},cleverapps.Current.prototype.push=function(e){this.letters.push(e.symbol),this.trigger("push",e.symbol)},cleverapps.Current.prototype.pop=function(){0<this.letters.length&&(this.letters.pop(),this.trigger("pop"))},cleverapps.Current.prototype.reset=function(){this.letters=[],this.trigger("reset")},cleverapps.BoardView=cc.Node.extend({
ctor:function(e,t,s){this._super(),this.setLocalZOrder(-1);var n=cleverapps.UI.getSceneSize();this.board=e,this.scene=t,this.coins={},this.stars={},this.letters={},this.options=s=s||{};var i=cleverapps.styles.BoardView;this.setAnchorPoint(.5,.5);var o=n.width*i.widthMultiplier;this.setContentSize(o,s.height||cleverapps.styles.BoardView.HEIGHT),this.addGrid();var a=i.y;if("wordheaps"===cleverapps.config.name?a+=this.grid.height/2*this.grid.scale:a+=this.height/2,this.setPosition(o/2,a),this.createBackground(),this.coinsGrid=this.createGridLayer(),this.addChild(this.coinsGrid),this.starsGrid=this.createGridLayer(),this.addChild(this.starsGrid),this.letterGrid=this.createGridLayer(),this.addChild(this.letterGrid),this.board.game.currentHighlighter){var r=new CurrentHighlighterView(this.board.game.currentHighlighter,this);this.grid.addChild(r)}this.board.game.boostersBefore&&this.board.game.boostersBefore.getActivatedBooster(EyeBooster)&&(this.eyeBoosterView=new EyeBoosterView(
this.board.game.boostersBefore.getActivatedBooster(EyeBooster),this),this.grid.addChild(this.eyeBoosterView)),this.customize(),this.registerTarget(cleverapps.styles.BoardView),this.board.onDiscoveredListener=this.createListener(this.showDiscovery.bind(this)),this.visible=!1},customize:function(){},showUp:function(e){this.showUpAnimation(e)},updateBackgroundScale:function(){if(this.boardBg){var e=cleverapps.styles.BoardView,t=cleverapps.UI.getSceneSize(),s=e.Background.width;"scene"===s?s=1.05*t.width*1.05:"grid"===s&&(s=this.grid.width*this.grid.scaleX+2*e.Background.padding.x);var n=e.Background.height;"board"===n?n=this.height:"grid"===n&&(n=this.grid.height*this.grid.scaleY+2*e.Background.padding.y);var i=this.scene.scene.scale;this.boardBg.setContentSize2(s/i,n)}},toggleElements:function(t){cleverapps.values(this.letters).concat(cleverapps.values(this.stars)).concat(cleverapps.values(this.coins)).forEach(function(e){e.setVisible(t)})},createGridLayer:function(){var e=new cc.Node
;return e.setContentSize(this.grid.getContentSize()),e.setAnchorPoint(this.grid.getAnchorPoint()),e.setPosition(this.grid.getPosition()),e.setScale(this.grid.getScale()),e},onWin:function(e){var t=cc.director.getRunningScene();t.playersView&&t.playersView.replaceParentSamePlace(this);var s=cleverapps.UI.getSceneSize();this.runAction(new cc.Sequence(new cc.MoveTo(.3,cc.p(this.x,s.height+this.height/2+cleverapps.styles.BoardView.verticalPadding)),new cc.CallFunc(function(){this.setVisible(!1),e()}.bind(this))))},createBackground:function(){var e=this.board.level.isHard()&&bundles.game.frames.hard_board_png||bundles.game.frames.board_png;e&&(this.boardBg=cleverapps.UI.createScale9Sprite(e),this.addChild(this.boardBg),this.boardBg.setPositionRound(cleverapps.styles.BoardView.Background),this.boardBg.setLocalZOrder(-1),this.updateBackgroundScale(1))},chooseAmountColumns:function(e,t){if("wordheaps"===cleverapps.config.name)return 5<this.board.words.length?2:1;for(var s=1,n=0,
i=1;i<=this.placeholders.length;i++){var o=cleverapps.styles.BoardView.minSpaceX,a=0;cleverapps.BoardView.divideByColumn(this.placeholders,i,function(e){var t=cleverapps.BoardView.calcGridContentSize(e,bundles.game.frames.placeholder_png,cleverapps.styles.BoardView.minSpaceY);a<t.height&&(a=t.height),o+=cleverapps.styles.BoardView.minSpaceX+t.width});var r=Math.min(e/o,t/a);n<r&&(s=i,n=r)}return s},activateGun:function(e,t){BOARD_GUN_ANIMATIONS[cleverapps.styles.BoardView.gunAnimation].call(this,e,t)},animateAlreadyDiscovered:function(e){var s;s=e[0][0]===e[1][0]?{x:1,y:0}:{x:0,y:1};var n=function(e){if(e&&e.isRunningSafe()){var t=e.getPosition();e.runAction(new cc.Sequence(new cc.MoveTo(.05,t.x-6*resolutionScale*s.x,t.y-6*resolutionScale*s.y),new cc.MoveTo(.05,t.x+6*resolutionScale*s.x,t.y+6*resolutionScale*s.y),new cc.MoveTo(.15,t.x-6*resolutionScale*s.x,t.y-6*resolutionScale*s.y),new cc.MoveTo(.2,t.x+3*resolutionScale*s.x,t.y+6*resolutionScale*s.y),new cc.MoveTo(.2,t.x,t.y)))}}
;e.forEach(function(e){var t=e[0],s=e[1];n(this.placeholders[t][s]),n(this.letters[t+"_"+s])},this)},animateLastWord:function(r){var l=function(a){Game.currentGame&&void 0===Game.currentGame.outcome&&!this.board.isComplete()&&r.forEach(function(e,t){var s=e[0],n=e[1],i=new cc.Sprite(bundles.game.frames.board_letter_frame_png);if(this.letterGrid.addChild(i),i.setPositionRound(this.placeholders[s][n].getPosition()),i.setOpacity(0),i.setLocalZOrder(3),i.runAction(new cc.Sequence(new cc.DelayTime(.2*t),new cc.FadeIn(.2),new cc.FadeOut(.2),new cc.CallFunc(function(){t===r.length-1&&(2===a?this.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.CallFunc(function(){l(0)}.bind(this)))):l(a+1))}.bind(this)),new cc.RemoveSelf)),0===a){var o=new cc.Sprite(bundles.game.frames.board_letter_blink_png);this.letterGrid.addChild(o),o.setPositionRound(this.placeholders[s][n].getPosition()),o.setScale(0),o.setLocalZOrder(3),o.runAction(new cc.Sequence(new cc.DelayTime(.2*t),new cc.ScaleTo(.3,1.3),
new cc.RemoveSelf))}},this)}.bind(this);this.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.CallFunc(function(){l(0),cleverapps.audio.playSound(bundles.game.urls.last_word_effect)})))}}),cleverapps.BoardView.prototype.addGrid=function(){var e=this.board.words;this.placeholders=[];for(var t=0;t<e.length;t++){this.placeholders[t]=[];for(var s=0;s<e[t].length;s++)this.placeholders[t].push(void 0)}var n,i,o=cleverapps.styles.BoardView;this.board.game.tournament?(n=o.tournament.grid.paddingLeft,i=o.tournament.grid.paddingRight):cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?(n=o.mobile.paddingLeft,i=o.mobile.paddingRight):(n=o.paddingLeft,i=o.paddingRight);var a=o.verticalPadding,r=o.gridOffsetY;cleverapps.isRumble()&&(a=o.rumble.verticalPadding,r=o.rumble.gridOffsetY);var l=this.height-2*a,c=this.width-n-i,p=this.options.amountColumns||this.chooseAmountColumns(c,l),d=Math.ceil(this.placeholders.length/p),u=0,h=0;cleverapps.BoardView.divideByColumn(this.placeholders,p,
function(e){var t=cleverapps.BoardView.calcGridContentSize(e,bundles.game.frames.placeholder_png,0);u+=t.width,h=Math.max(h,t.height)});var g=cleverapps.styles.BoardView.minSpaceX,v=cleverapps.styles.BoardView.minSpaceY,m=Math.min(c/(g*(p+1)+u),l/(v*(d+1)+h),cleverapps.styles.BoardView.baseScale);(g=(c/m-u)/(p+1))>cleverapps.styles.BoardView.maxSpaceX&&(g=cleverapps.styles.BoardView.maxSpaceX),v=(l/m-h)/(d+1);var f=this.options.maxSpaceY||o.maxSpaceY;f&&f<v&&(v=f);var _=new cc.Node;u=g,h=0,_.setPosition((this.width-n-i)/2+n,this.height/2+r),_.setAnchorPoint(.5,.5),cleverapps.BoardView.divideByColumn(this.placeholders,p,function(e,i){var o=cleverapps.BoardView.calcGridContentSize(e,bundles.game.frames.placeholder_png,v);h<o.height&&(h=o.height),cleverapps.BoardView.generateGrid(e,bundles.game.frames.placeholder_png,v,function(e,t,s){var n="wordheaps"===cleverapps.config.name;s.setPosition(s.x+u,n?-s.y+o.height:-s.y+h),this.placeholders[e+i][t]=s,
cleverapps.config.debugMode&&cleverapps.UI.onClick(s,function(){"stacks"===cleverapps.config.subtype?this.board.game.hintBooster.addHint({word:this.board.words[e+i],index:t}):this.board.game.hintBooster.addHint({row:e+i,column:t})}.bind(this)),_.addChild(s)}.bind(this)),u+=o.width+g}.bind(this)),_.setContentSize(u,h),_.setScale(m),this.width/2-u*m/2>=n&&this.width/2+u*m/2<=this.width-i&&(_.x=this.width/2),"wordheaps"===cleverapps.config.name&&(_.x=this.width-_.width/2*_.scale-i+g),this.addChild(_),this.grid=_},cleverapps.BoardView.prototype.addStar=function(e,t,s){var n=new cc.Sprite(cleverapps.skins.getSlot("missionStar",{type:s}));this.stars[e+"_"+t]=n,this.starsGrid.addChild(n),n.setPositionRound(this.placeholders[e][t].x,this.placeholders[e][t].y),n.setScale(cleverapps.styles.BoardView.Star.scale)},cleverapps.BoardView.prototype.addCoin=function(e,t){var s=cleverapps.styles.BoardView,n=e+"_"+t;this.coins[n]=new cc.Node,this.coins[n].setAnchorPoint2();var i=new cleverapps.Spine(
bundles.game.jsons.coin_json,1);i.setAnimation(0,"shine",!0),i.setTimeScale(.5+Math.random()),this.coins[n].setContentSize2(s.Coin),i.setPosition(this.coins[n].width/2,0),this.coins[n].addChild(i),this.coins[n].setPosition(this.placeholders[e][t].x,this.placeholders[e][t].y+s.Coin.paddingBottom),this.coinsGrid.addChild(this.coins[n])},cleverapps.BoardView.prototype.takeCoin=function(e,t){var s=e+"_"+t;if(this.coins[s]){var n=this.coins[s];if(delete this.coins[s],cleverapps.styles.MenuBar.GoldItem.target){var i=cc.director.getRunningScene(),o=i.convertToNodeSpace(n.getParent().convertToWorldSpace(n.getPosition())),a=i.convertToNodeSpace(cleverapps.styles.MenuBar.GoldItem.target.convertToWorldSpace(cleverapps.styles.MenuBar.GoldItem.target.icon.getPosition()));n.removeFromParent();var r=new cleverapps.Spine(bundles.game.jsons.coin_json,1);r.setAnimation(0,"spin",!0),r.setTimeScale(1.8),r.setPosition(o),i.addChild(r,10);var l=Math.sqrt((o.x-a.x)*(o.x-a.x)+(o.y-a.y)*(o.y-a.y))/1700
;r.runAction(new cc.Sequence(new cc.Spawn(new cc.MoveBy(.2,{x:0,y:140}),new cc.ScaleBy(.2,2)),new cc.Spawn(new cc.MoveTo(l,a),new cc.ScaleBy(l,.3)),new cc.RemoveSelf)),cleverapps.audio.playSound(bundles.game.urls.coin_collect_effect)}else n.removeFromParent()}},cleverapps.BoardView.prototype.takeStar=function(e,t){var s=cc.director.getRunningScene().cloversView&&cc.director.getRunningScene().cloversView.icon,n=e+"_"+t;if(this.stars[n]&&s){Game.currentGame&&Game.currentGame.addClover(Mission.TYPE_LETTER,0),this.stars[n].runAction(new cc.RepeatForever(new cc.RotateBy(.5,360)));var i=cleverapps.styles.BoardView;WindowHelper.animateCollect(this.stars[n],{scale:i.Star.collect.scale,height:i.Star.collect.height,target:s}),delete this.stars[n]}},cleverapps.BoardView.prototype.createLetter=function(e){var t="stacks"===cleverapps.config.subtype;return new CharView(e.toUpperCase(),{hard:this.board.level.isHard(),noBg:t})},cleverapps.BoardView.prototype.showDiscovery=function(e,s,t){if(
!cleverapps.flags.boardDisable){var n=e.split("").map(this.createLetter.bind(this)),i=this.board.wordIndexes[e],o=.3/n.length,a=Date.now()-.1;n.forEach(function(e,t){this.runAction(new cc.Sequence(new cc.DelayTime((t+1)*o),new cc.CallFunc(function(){var e=a+.1>Date.now();e||(a=Date.now()),this.setCell(i[t][0],i[t][1],n[t],s,!1,e)}.bind(this))))},this),s||this.runAction(new cc.Sequence(new cc.DelayTime(n.length*o),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.letters_effect)})))}},cleverapps.BoardView.prototype.addHint=function(e,t){var s;if("stacks"===cleverapps.config.subtype){var n=this.board.game.keypad.findWordIndexes(this.board.words[e])[t];s=BaseBlockView.GetView(n)}"magicwords"===cleverapps.config.name&&cleverapps.gun&&cleverapps.gun.state===Gun.STATE_BOMBING&&this.scene.gunView&&this.scene.gunView.flyHintStart&&(s=this.scene.gunView.flyHintStart),cleverapps.UI.flyHintAnimation(this.letters[e+"_"+t],{start:s,changeParentToTarget:!0})},
cleverapps.BoardView.prototype.setCell=function(e,t,s,n,i,o){var a=e+"_"+t;if(n||o||cleverapps.audio.playSound(bundles.game.urls.letter_effect),this.takeCoin(e,t),this.takeStar(e,t),!n){var r=new cc.ParticleSystem(bundles.game.jsons.letter_particle_plist);r.setAutoRemoveOnFinish(!0),r.setPosition(this.placeholders[e][t].x,this.placeholders[e][t].y),r.setLocalZOrder(1),this.letterGrid.addChild(r)}this.placeholders[e][t].existLetter||(this.placeholders[e][t].existLetter=!0,s.setPosition(this.placeholders[e][t].x,this.placeholders[e][t].y+cleverapps.styles.BoardView.Letter.paddingBottom),this.letterGrid.addChild(s),i||(s.setScale(1.3),s.setOpacity(0),s.runAction(new cc.Sequence(new cc.DelayTime(.2),new cc.FadeTo(.2,255),new cc.ScaleTo(.5,1)))),this.letters[a]=s)},cleverapps.BoardView.prototype.loseAnimation=function(){var e=cleverapps.values(this.stars).concat(cleverapps.values(this.coins)).concat(cleverapps.values(this.letters)),t=-cleverapps.UI.getSceneSize().height/2;e.forEach(
function(e){e&&e.isRunningSafe()&&(e.replaceParentSamePlace(cc.director.getRunningScene()),e.setScale(this.grid.scaleX*e.scaleX,this.grid.scaleY*e.scaleY),e.setCascadeOpacityEnabled(!0),e.runAction(new cc.Sequence(new cc.Spawn(new cc.MoveBy(.6,0,t).easing(cc.easeIn(4)),new cc.Sequence(new cc.DelayTime(.3),new cc.FadeOut(.3))),new cc.RemoveSelf)))}.bind(this)),this.stars={},this.coins={},this.letters={}},cleverapps.BoardView.calcGridContentSize=function(e,t,s){var n=e[e.length-1].length,i=new cc.Sprite(t);return cc.size(n*(i.width+cleverapps.styles.BoardView.Letter.offset)+cleverapps.styles.BoardView.Letter.offset,e.length*(i.height+s)+s)},cleverapps.BoardView.divideByColumn=function(e,t,s){for(var n,i=0,o=0;o<t;o++)n=Math.floor(e.length/t),o<e.length%t&&n++,s(e.slice(i,i+n),i),i+=n},cleverapps.BoardView.generateGrid=function(e,t,s,n){for(var i=0;i<e.length;i++)for(var o=e[i],a=0;a<o.length;a++){var r=new cc.Sprite(t),l=a*(r.width+cleverapps.styles.BoardView.Letter.offset)+r.width/2,
c=i*(r.height+s)+s+r.height/2;r.setPosition(l,c),n(i,a,r)}},cleverapps.styles.BoardView={minSpaceX:20,maxSpaceX:100,minSpaceY:10,gunAnimation:"default",widthMultiplier:1,baseScale:1,Letter:{offset:5,paddingBottom:0},Coin:{paddingBottom:3,width:70,height:70,simpleShowup:!1},Star:{scale:.55,collect:{scale:.4}},Background:{x:{align:"center"},y:{align:"center"},width:"scene",height:"board"},HEIGHT:626,y:600,paddingLeft:0,paddingRight:0,mobile:{paddingLeft:0,paddingRight:0},verticalPadding:20,gridOffsetY:0,tournament:{grid:{paddingLeft:210,paddingRight:0,gridOffsetY:0}},rumble:{verticalPadding:100,gridOffsetY:0}},cleverapps.BoardView.prototype.showUpAnimation=function(t,e){if(cleverapps.flags.introDisabled)return this.setVisible(!1),void t();e=e||{};var s=function(e){var t=e.scale;return e.setScale(1.2*t,.8*t),new cc.Sequence(new cc.CallFunc(function(){e.setAnchorPoint(.5,0),e.y=e.y-e.height/2*t}),new cc.Show,new cc.ScaleTo(.15,.8*t,1.2*t),new cc.ScaleTo(.15,t,t),new cc.CallFunc(function(){
e.setAnchorPoint2(),e.y=e.y+e.height/2*t}))};cleverapps.values(this.coins).concat(cleverapps.values(this.stars),cleverapps.values(this.letters)).forEach(function(e){e.setVisible(!1)});var i=!(this.board.game.boostersBefore&&this.board.game.boostersBefore.getActivatedBooster(EyeBooster))||e.onlyElements,n=!e.onlyElements,o=function(){if(i){var n=0,e=cleverapps.Random.shuffle(cleverapps.values(this.coins).map(function(e){return{node:e,action:cleverapps.styles.BoardView.Coin.simpleShowup?(t=e,t.setScale(.1),new cc.Sequence(new cc.Show,new cc.ScaleTo(.15,1))):s(e)};var t}).concat(cleverapps.values(this.stars).map(function(e){return{node:e,action:s(e)}})));(e=e.concat(cleverapps.Random.shuffle(cleverapps.values(this.letters).map(function(e){return{node:e,action:s(e)}})))).forEach(function(e,t){var s=n+Math.max(.3*Math.pow(.8,t-1),.015);n=s,e.node.runAction(new cc.Sequence(new cc.DelayTime(s),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.board_element_show_effect,{
throttle:100})}),e.action))}.bind(this))}t&&t()}.bind(this);n?(this.setScale(0),this.runAction(new cc.Sequence(new cc.Show,new cc.CallFunc(function(){this.setScale(.6)}.bind(this)),new cc.ScaleTo(.1,1.2),new cc.ScaleTo(.1,1),new cc.CallFunc(o)))):o()},cleverapps.Board=function(e,t,s){this.game=e,this.level=e.level,this.levelContent=e.level.content,this.words=cleverapps.unique(this.levelContent.words),this.field=this.levelContent.field,this.words.length!==this.levelContent.words.length&&console.log("WARN: duplicate board words"),this.field||(this.field=[],Array.prototype.push.apply(this.field,this.words)),this.wordsSet=cleverapps.createSet(this.words),t=t.filter(function(e){return-1!==this.words.indexOf(e)}.bind(this)),this.foundWordsSet=cleverapps.createSet(t),this.wordIndexes={},this.words.forEach(function(e){this.wordIndexes[e]=this.findWordIndexes(e)}.bind(this)),this.busySet={};for(var n=0;n<this.field.length;n++)this.busySet[n]={};Object.keys(this.foundWordsSet).forEach(function(e
){this.wordIndexes[e]&&this.wordIndexes[e].forEach(this.setBusy.bind(this))}.bind(this)),this.hints=s,this.hints.forEach(this.setBusy.bind(this)),this.openedSet={},this.levelContent.opened&&this.levelContent.opened.forEach(function(e){this.openedSet[e[0]+"_"+e[1]]=!0,this.isBusy(e)||(this.hints.push(e),this.setBusy(e))},this),this.gold=this.levelContent.gold||[],(this.level.quick||this.level.isRegular()&&!this.level.isCurrentLevel())&&(this.gold=[]),this.coins=[],this.hints=this.hints.filter(this.isHasLetter.bind(this)),this.gold=this.gold.filter(this.isHasLetter.bind(this)),this.hints.forEach(function(e){this.busySet[e[0]][e[1]]=!0}.bind(this)),this.level.episode.isBonusRound()&&(this.gold=this.getEmptyPositions().map(function(e){return[e.row,e.column]})),"stacks"===cleverapps.config.subtype&&(this.gold=[]),this.goldSet={},this.gold.forEach(function(e){this.goldSet[e[0]+"_"+e[1]]=!0},this),this.addMissionStars(),this.onChangeSize=function(){},this.onDiscoveredListener=function(e,t,s
){},this.onAddCoinListener=function(e,t){},this.onOpenCellListener=function(e,t,s,n){},this.onAddHintListener=function(e,t,s,n){},this.onWin=function(){},this.onAddStarListener=function(e,t){},this.onOneWordLeft=function(e,t){},this.onAlreadyDiscovered=function(e){},this.onLoseAnimation=function(){},this.onShowUp=function(e){},this.onBoosterAdded=function(){}},cleverapps.Board.prototype.showUp=function(e){this.hints.forEach(function(e){var t=e[0],s=e[1];this.onOpenCellListener(t,s,this.field[t].charAt(s),!0,!0)},this),this.gold.forEach(function(e){this.isBusy(e)||this.createCoin(e[0],e[1])},this),this.stars.forEach(function(e){this.createStar(e[0],e[1],e[2])},this),this.onShowUp(e)},cleverapps.Board.prototype.loseAnimation=function(e){this.onLoseAnimation(),setTimeout(e,800)},cleverapps.Board.prototype.countTotalWords=function(){return this.words.length},cleverapps.Board.prototype.countDiscoveredWords=function(){return Object.keys(this.foundWordsSet).length},
cleverapps.Board.prototype.addMissionStars=function(){if(this.stars=[],Game.currentGame.gameMission&&Game.currentGame.gameMission.type===Mission.TYPE_LETTER){var n={};for(var e in this.wordIndexes){var t=this.level.getHumanReadableNumber()+this.words.indexOf(e)*e.length,i=[];if(this.wordIndexes[e].forEach(function(e){var t=e[0],s=e[1];!this.isHasLetter(t,s)||n[t+"_"+s]||this.openedSet[t+"_"+s]||this.goldSet[t+"_"+s]||i.push(e)},this),0!==i.length)for(var s=Math.max(Math.round(i.length/3),1),o=cleverapps.Random.random(0,s,t);0<o;){var a=cleverapps.Random.random(0,i.length-1,t+o+1),r=i[a];this.stars.push([r[0],r[1],this.stars.length%Missions[Mission.TYPE_LETTER].STAR_TYPES_AMOUNT]),n[r[0]+"_"+r[1]]=!0,i.splice(a,1),o--}}this.stars=this.stars.filter(function(e){return!this.isBusy(e[0],e[1])},this)}},cleverapps.Board.prototype.remindDiscovered=function(){for(var e in this.foundWordsSet)void 0!==this.wordsSet[e]&&this.onDiscoveredListener(e,!0);this.checkOneWordLeft()},
cleverapps.Board.prototype.createStar=function(e,t,s){this.onAddStarListener(e,t,s)},cleverapps.Board.prototype.createCoin=function(e,t){this.coins.push([e,t]),this.onAddCoinListener(e,t)},cleverapps.Board.prototype.takeCoin=function(e,t){var s=this.indexOf(this.coins,e,t);0<=s&&(levels.user.setGold(levels.user.gold+WordGame.BOARD_COIN),this.coins.splice(s,1),this.game.collectedCoins+=WordGame.BOARD_COIN)},cleverapps.Board.prototype.setBusy=function(e,t){"number"!=typeof e&&(t=e[1],e=e[0]),this.isHasLetter(e,t)&&(this.busySet[e][t]=!0)},cleverapps.Board.prototype.isBusy=function(e,t){return"number"!=typeof e&&(t=e[1],e=e[0]),e>=this.field.length||(t>=this.field[e].length||this.busySet[e]&&this.busySet[e][t])},cleverapps.Board.prototype.findNewOpenedWord=function(){for(var e=0;e<this.words.length;e++){var t=this.words[e];if(void 0===this.foundWordsSet[t]&&this.wordIndexes[t].filter(this.isBusy,this).length===t.length)return t}},cleverapps.Board.prototype.addHint=function(e,t){
this.hints.push([e,t]),this.setBusy(e,t),this.takeCoin(e,t),this.takeStar(e,t),this.onAddHintListener(e,t,this.field[e].charAt(t)),this.game.userStatus.reportUserAction()},cleverapps.Board.prototype.getEmptyPositions=function(){for(var e=[],t=0;t<this.field.length;t++)for(var s=0;s<this.field[t].length;s++)this.isHasLetter(t,s)&&!this.isBusy(t,s)&&e.push({row:t,column:s});return e},cleverapps.Board.prototype.selectHintPosition=function(){var e=this.getEmptyPositions();if(0!==e.length)return cleverapps.Board.hintType===cleverapps.Board.hintTypes.random?cleverapps.Random.choose(e):e[0]},cleverapps.Board.prototype.isComplete=function(){return cleverapps.contains(Object.keys(this.foundWordsSet),Object.keys(this.wordsSet))},cleverapps.Board.prototype.markDiscovered=function(e){var t=this.wordIndexes[e];this.hints=this.hints.filter(function(e){return-1===this.indexOf(t,e[0],e[1])}.bind(this)),this.foundWordsSet[e]=!0,t.forEach(function(e){this.setBusy(e[0],e[1]),this.takeCoin(e[0],e[1]),
this.takeStar(e[0],e[1])}.bind(this))},cleverapps.Board.prototype.takeStar=function(e,t){var s=this.indexOf(this.stars,e,t);-1!==s&&(this.stars.splice(s,1),Game.currentGame&&Game.currentGame.addClover(Mission.TYPE_LETTER,1,!0))},cleverapps.Board.prototype.alreadyDiscovered=function(e){this.onAlreadyDiscovered(this.wordIndexes[e])},cleverapps.Board.prototype.discover=function(e,t){this.onDiscoveredListener(e,!1,t),this.markDiscovered(e),this.checkOneWordLeft()},cleverapps.Board.prototype.checkOneWordLeft=function(){if(!this.isComplete()&&!this.lastWordFound){var e=this.getUndiscoveredWords();1===e.length&&(this.lastWordFound=!0,this.onOneWordLeft(this.wordIndexes[e[0]]))}},cleverapps.Board.prototype.getUndiscoveredWords=function(){var t=[];return this.words.forEach(function(e){this.foundWordsSet[e]||t.push(e)},this),t},cleverapps.Board.prototype.contains=function(e){return void 0!==this.wordsSet[e]},cleverapps.Board.prototype.analyze=function(e){
return void 0!==this.foundWordsSet[e]?WordGame.STATUSES.BOARD_FOUND:WordGame.STATUSES.BOARD},cleverapps.Board.prototype.indexOf=function(e,t,s){for(var n=0;n<e.length;n++)if(e[n][0]===t&&e[n][1]===s)return n;return-1},cleverapps.Board.prototype.findWordIndexes=function(e){for(var s=0;s<this.words.length;s++)if(this.words[s]===e)return e.split("").map(function(e,t){return[s,t]});return[]},cleverapps.Board.prototype.getWordByIndexes=function(e,t){return this.words[e]},cleverapps.Board.prototype.charByIndex=function(e){return e[0]<0||e[0]>=this.field.length||e[1]<0||e[1]>=this.field[e[0]].length?".":this.field[e[0]][e[1]]},cleverapps.Board.prototype.listIndexes=function(e,t,s){if(void 0===e)return[];for(var n=[],i=e.row,o=e.col,a=0;a<t;a++)n.push([i,o]),i+=s.row,o+=s.col;return n},cleverapps.Board.prototype.isHasLetter=function(e,t){return"number"!=typeof e&&(t=e[1],e=e[0]),0<=e&&e<this.field.length&&0<=t&&t<this.field[e].length&&"."!==this.field[e].charAt(t)},cleverapps.Board.hintTypes={
first:0,random:1},cleverapps.Board.hintType=cleverapps.Board.hintTypes.first,cleverapps.BoardController=function(e,t){var s=new cleverapps.BoardView(e,t);t.scene.addChild(s),t.boardView=s,this.board=e,this.boardView=s,e.onAddCoinListener=s.createListener(s.addCoin),e.onChangeSize=s.createListener(s.updateBackgroundScale),e.onActivateGunListener=s.createListener(s.activateGun),e.onAddStarListener=s.createListener(s.addStar),e.onOneWordLeft=s.createListener(s.animateLastWord),e.onAlreadyDiscovered=s.createListener(s.animateAlreadyDiscovered),e.onLoseAnimation=s.createListener(s.loseAnimation),e.onShowUp=s.createListener(s.showUp),e.onBoosterAdded=s.createListener(s.addBooster),e.onWin=s.createListener(s.onWin),e.onOpenCellListener=s.createListener(function(e,t,s,n,i){this.boardView.setCell(e,t,this.boardView.createLetter(s.toUpperCase()),n,i,!1)}.bind(this)),e.onAddHintListener=s.createListener(function(e,t,s,n,i){this.board.onOpenCellListener(e,t,s,n,i),this.boardView.addHint(e,t)
}.bind(this))},cleverapps.CookieJar=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.COOKIE_JAR);this.countOfCookies=void 0===e?0:e,this.shouldRewardInCurrentLevel=!1,this.visible=this.shouldBeVisible(),this.onCookieListener=function(){},this.onFullListener=function(){},this.onShowForceListener=function(){},this.onBecomeVisible=function(){},this.onResetListener=function(){}},cleverapps.CookieJar.prototype.shouldBeVisible=function(){return cleverapps.CookieJar.IsAvailable()||0!==this.getCounterValue()},cleverapps.CookieJar.prototype.setVisible=function(){this.visible||(this.visible=!0,this.onBecomeVisible())},cleverapps.CookieJar.prototype.incCounter=function(e){this.shouldRewardInCurrentLevel&&(this.countOfCookies++,this.save(),this.setVisible(),this.onCookieListener(),e&&this.onShowForceListener(),this.isFull()&&(0===Game.currentGame.board.getUndiscoveredWords().length?this.displayGiveReward():this.giveReward()))},
cleverapps.CookieJar.prototype.setShouldRewardInCurrentLevel=function(e){this.shouldRewardInCurrentLevel=e},cleverapps.CookieJar.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.COOKIE_JAR,this.getCounterValue()),e||cleverapps.synchronizer.addUpdateTask("cookiejar")},cleverapps.CookieJar.prototype.getCounterValue=function(){return this.countOfCookies},cleverapps.CookieJar.prototype.updateValue=function(e,t){this.countOfCookies=e?e.counterValue:0,this.save(t)},cleverapps.CookieJar.prototype.isFull=function(){return this.getCounterValue()>=cleverapps.CookieJar.COOKIES_TO_REWARD_GOAL},cleverapps.CookieJar.prototype.displayGiveReward=function(){cleverapps.metha.isFocused()&&"KeypadControl"===cleverapps.metha.focus?cleverapps.metha.displayWhenFreeFocus({focus:"CookieJar",control:"MenuBarGoldItem",action:this.giveReward.bind(this)}):cleverapps.metha.display({focus:"CookieJar",control:"MenuBarGoldItem",action:this.giveReward.bind(this)})},
cleverapps.CookieJar.prototype.giveReward=function(t){var e=new ActionPlayer;e.add(function(e){this.countOfCookies-=cleverapps.CookieJar.COOKIES_TO_REWARD_GOAL,this.save(),this.onFullListener(e)}.bind(this)),e.add(function(e){this.onResetListener(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.COOKIEJAR_REWARD),cleverapps.user.setGold(cleverapps.user.gold+cleverapps.CookieJar.FULL_REWARD),e(),t&&t()}.bind(this)),e.play()},cleverapps.CookieJar.IsAvailable=function(){if(cleverapps.flags.cookieJarDisabled)return!1;var e={level:2};return"olympics"===cleverapps.config.name&&(e={level:9}),levels.user.checkAvailable(e)},cleverapps.CookieJar.COOKIES_TO_REWARD_GOAL=10,cleverapps.CookieJar.FULL_REWARD=50,"stacks"===cleverapps.config.subtype&&(cleverapps.CookieJar.FULL_REWARD=15);var CookieJarView=cc.Node.extend({ctor:function(t,e){this._super(),this.extra=t,e.addChild(this),cleverapps.UI.applyHover(this),cleverapps.UI.onClick(this,function(){cleverapps.forces.isRunningForce(
)?cleverapps.forces.closeRunningForce():levels.cookieJar.isFull()?levels.cookieJar.giveReward():cleverapps.metha.display({focus:"ExtraWindow",action:function(e){new ExtraWindow(t),cleverapps.metha.onceNoWindowsListener=e}})}.bind(this));var s=cleverapps.styles.CookieJarView;cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&this.setScale(s.scale),this.baseScale=this.getScale(),this.setContentSize(s.size),this.setAnchorPoint2(),this.setPositionRound(s.position.x,s.position.y),this.animation=new cleverapps.Spine(bundles.cookiejar.jsons.extra_container_json,s.animation.scale),this.animation.setAnimation(0,"idle",!0),this.animation.setPosition(this.width/2,this.height/2),this.addChild(this.animation),levels.cookieJar.visible?this.makeVisibleHideable():this.setVisible(!1),s.amountBg&&this.addAmountBg(),this.setLocalZOrder(3),levels.cookieJar.onCookieListener=this.createListener(this.addCookie.bind(this)),levels.cookieJar.onFullListener=this.createListener(this.onFull.bind(this)),
levels.cookieJar.onShowForceListener=this.createListener(this.showForce.bind(this)),levels.cookieJar.onBecomeVisible=this.createListener(this.makeVisibleHideable.bind(this)),levels.cookieJar.onResetListener=this.createListener(this.updateAmount.bind(this))},addAmountBg:function(){var e=cleverapps.styles.CookieJarView.amountBg;this.amountBg=new cc.Scale9Sprite(bundles.menubar.frames.menubar_bg_png),this.addChild(this.amountBg),this.amountBg.setContentSize2(e),this.amountBg.setPositionRound(e),this.amountText=cleverapps.UI.generateImageText("",cleverapps.styles.FONTS.COOKIE_JAR_AMOUNT_TEXT),this.updateAmount(),this.addChild(this.amountText),this.amountText.setPositionRound(e.text),this.amountBg.setScale(e.scale),this.amountBg.setLocalZOrder(-1)},updateAmount:function(){this.amountText&&this.amountText.setString(levels.cookieJar.countOfCookies+"/"+cleverapps.CookieJar.COOKIES_TO_REWARD_GOAL)},makeVisibleHideable:function(){cleverapps.UI.makeHideable(this),cleverapps.metha.registerControl(
"cookieJar",this)},addCookie:function(){var e=cc.director.getRunningScene().scene,t=cc.p(e.width/2,e.height/2);"stacks"===cleverapps.config.subtype&&KeypadView.LAST_WORD_POSITION&&(t=KeypadView.LAST_WORD_POSITION);var s=new cleverapps.Spine(bundles.cookiejar.jsons.cookie_json);s.setPositionRound(t),e.addChild(s),s.setLocalZOrder(100),this.runCookieAnimation(s)},runCookieAnimation:function(e){var t=cleverapps.styles.CookieJarView,s=e.getRelativeCoordinates(this);s.y+=t.prizeFlyPositionShift.y,s.x+=t.prizeFlyPositionShift.x,e.runAction(new cc.Spawn(new cc.Sequence(new cc.DelayTime(.1),new cc.CallFunc(function(){this.setAnimation(0,"jump",!1)}.bind(e)),new cc.CallFunc(function(){this.animation.setAnimation(0,"collect",!1),this.animation.addAnimation(0,"idle",!0)}.bind(this)),new cc.MoveTo(1,s),new cc.RemoveSelf),new cc.Sequence(new cc.DelayTime(1),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.jar_collect_effect),this.updateAmount()}.bind(this)))))},
onFull:function(e){var t=cleverapps.styles.CookieJarView,s=cc.director.getRunningScene().scene,n=cc.p(s.width/2,s.height/2),i=new cleverapps.Spine(bundles.cookiejar.jsons.extra_container_json);i.setAnimation(0,"full3",!1),s.addChild(i),i.setPositionRound(n),i.runAction(new cc.Sequence(new cc.DelayTime(2.3),new cc.CallFunc(e),new cc.RemoveSelf));var o=new CoinsRewardView(t);s.addChild(o),o.setPositionRound(t.coinsReward),o.setVisible(!1),o.runAction(new cc.Sequence(new cc.DelayTime(.9),new cc.Show,new cc.CallFunc(function(){o.collectCoins(cleverapps.CookieJar.FULL_REWARD)})))},showForce:function(){cleverapps.forces.isAvailable(this,Forces.COOKIEJAR)&&cleverapps.metha.displayWhenFreeFocus({focus:"CookiejarForce",control:"cookiejar",actions:[function(e){cleverapps.Notification.remove(),setTimeout(e,250)},function(e){this.show(!0),cleverapps.forces.create(this,Forces.COOKIEJAR,cleverapps.styles.CookieJarView.force),cleverapps.forces.onceForceClosed=e}.bind(this),function(e){
new ExtraWindow(this.extra),cleverapps.metha.onceNoWindowsListener=e}.bind(this)]})}});cleverapps.styles.CookieJarView={position:{x:{align:"right",dx:-20},y:{align:"bottom",dy:10}},force:{scaleX:-1},scale:.6,size:{width:168,height:149},animation:{scale:1},prizeFlyPositionShift:{y:-10,x:0},coins:[{radiusX:85,radiusY:95,count:16,scale:.35},{radiusX:55,radiusY:65,count:8,scale:.5,baseAngle:20},{radiusX:20,radiusY:25,count:3,scale:.55,baseAngle:65}],coinsReward:{x:{align:"center"},y:{align:"center",dy:-20}}},cleverapps.Combo=function(e){cleverapps.EventEmitter.call(this),this.level=0,this.game=e,this.currentGoal=0,this.resetAfterPrize=!1},cleverapps.Combo.prototype=Object.create(cleverapps.EventEmitter.prototype),cleverapps.Combo.prototype.constructor=cleverapps.Combo,cleverapps.Combo.prototype.stop=function(){this.stopTimeout()},cleverapps.Combo.prototype.stopTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.trigger("stopAlarm"),this.timeout=void 0)},
cleverapps.Combo.prototype.runTimeout=function(){this.stopTimeout(),this.timeout=new cleverapps.LongTimeout(function(){this.trigger("runAlarm"),this.timeout=new cleverapps.LongTimeout(this.reset.bind(this),cleverapps.parseInterval(cleverapps.Combo.ALARM_TIMEOUT))}.bind(this),cleverapps.parseInterval(cleverapps.Combo.TOTAL_TIMEOUT)-cleverapps.parseInterval(cleverapps.Combo.ALARM_TIMEOUT))},cleverapps.Combo.prototype.reset=function(){0<this.level&&(this.level=0,this.trigger("changeLevel"),this.trigger("stopAlarm")),this.resetAfterPrize=!1},cleverapps.Combo.prototype.increaseLevel=function(e){this.level++,this.level>cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE&&this.afterOverflow(),this.runTimeout(),this.afterIncrease(),this.trigger("changeLevel",e),cleverapps.audio.playSound(bundles.game.urls["combo_effect_"+this.level])},cleverapps.Combo.prototype.decreaseLevel=function(){0<this.level?(this.level--,this.trigger("changeLevel")):0===this.level&&this.resetAfterPrize&&(
this.level=cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE-1,this.afterDecrease(),this.trigger("changeLevel"),this.resetAfterPrize=!1)},cleverapps.Combo.prototype.afterIncrease=function(){},cleverapps.Combo.prototype.afterDecrease=function(){},cleverapps.Combo.prototype.afterOverflow=function(){this.level=1},cleverapps.Combo.prototype.onChangeSize=function(){this.trigger("changeSize")},cleverapps.Combo.isAvailable=function(){return cleverapps.user.checkAvailable(cleverapps.Combo.AVAILABLE)&&!cleverapps.flags.comboDisabled},cleverapps.Combo.GOALS=[],cleverapps.Combo.AVAILABLE={episode:1,level:3},cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE=4,cleverapps.Extra=function(e,t){this.levelContentExtra=e||[],this.savedFoundWords=t,this.oldFounds=[],this.foundWordsSet={},this.foundList=[],this.onChangedListener=function(){}},cleverapps.Extra.prototype.init=function(){this.wordsSet=this.createSet(),this.savedFoundWords.forEach(function(e){void 0!==this.wordsSet[e]?(this.foundWordsSet[e]=!0,
this.foundList.push(e)):this.oldFounds.push(e)},this)},cleverapps.Extra.prototype.createSet=function(){var e=bundles["extra_"+cleverapps.settings.language]&&bundles["extra_"+cleverapps.settings.language].jsons.dictionary_json;return e?cc.loader.getRes(e):cleverapps.createSet(this.levelContentExtra)},cleverapps.Extra.prototype.getAllFoundWords=function(){return this.oldFounds.concat(Object.keys(this.foundWordsSet))},cleverapps.Extra.prototype.discover=function(e){this.foundWordsSet[e]||(this.foundWordsSet[e]=!0,this.foundList.push(e),this.onChangedListener(),cleverapps.dailyTasks.onDiscoverExtraWord(e),levels.cookieJar.incCounter(!0))},cleverapps.Extra.prototype.contains=function(e){return void 0!==this.wordsSet[e]},cleverapps.Extra.prototype.analyze=function(e){return void 0!==this.foundWordsSet[e]?WordGame.STATUSES.EXTRA_FOUND:WordGame.STATUSES.EXTRA},cleverapps.styles.COLORS=cleverapps.overrideColors(cleverapps.styles.COLORS,{DARK_RED:new cc.Color(135,35,29,255),
SUBSCRIPTION_WINDOW_GREEN_COLOR:new cc.Color(55,80,58,255),PLAYER_ALARM_COLOR:new cc.Color(160,160,160,255),HINT_ALARM_COLOR:new cc.Color(150,150,150,255)}),cleverapps.styles.FONTS=cleverapps.overrideFonts(cleverapps.styles.FONTS,{PACK_WHITE_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE},SIDEBAR_ICON_TEXT:{name:"default",size:23},PACK_WHITE_SMALL_TEXT:{name:"default",size:23},BOOSTER_AMOUNT_TEXT:{name:"default",size:38},REWARD_ELEMENT_TEXT:{name:"default",size:40,color:new cc.Color(80,60,35,255)},EXTRA_WINDOW_LETTER_TEXT:{color:cleverapps.styles.COLORS.COLOR_BROWN,size:40},CONGRATE_TEXT:{size:100,color:cleverapps.styles.COLORS.WHITE},SUBSCRIPTION_WINDOW_TITLE_TEXT:{size:60,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.SUBSCRIPTION_WINDOW_GOLD_OFFER_STROKE},SUBSCRIPTION_MAIN_TEXT:{size:24,color:cleverapps.styles.COLORS.SUBSCRIPTION_WINDOW_GREEN_COLOR},SUBSCRIPTION_BUTTON_ADDITIONAL_TEXT:{size:18,
color:cleverapps.styles.COLORS.SUBSCRIPTION_WINDOW_GREEN_COLOR}}),PiggyBank.WINS_TO_FULFILL=5,cleverapps.overrideStyles(cleverapps.styles.PiggyBankWindow,{timer:{bg:bundles.main.frames.timer_bg_png},button:{button_png:bundles.buttons.frames.green_button_png,button_on_png:bundles.buttons.frames.green_button_on_png},amount:{coin:{scale:.7}}}),cleverapps.overrideStyles(cleverapps.styles.PiggyBankRulesWindow,{subText:{left:{x:{align:"left",dx:20},y:{align:"top",dy:-195}},right:{x:{align:"right",dx:60}}}}),cleverapps.overrideStyles(cleverapps.styles.SideBarIconView,{bg:{width:150,height:200},text:{offsetY:0,x:{align:"center",dx:0},y:{align:"bottom",dy:15},bg:{scale9:!0,width:120,height:30}},mark:{x:{align:"left",dx:5},y:{align:"top",dy:-5}}}),cleverapps.overrideStyles(cleverapps.styles.SideBarSlot,{width:180,height:160}),cleverapps.overrideStyles(cleverapps.styles.RewardBuyButton,{height:72,width:144}),cleverapps.overrideStyles(cleverapps.styles.VictoryWindowBase,{rewards:{icon:{x:{
align:"center"},y:{align:"center",dy:47}},amount:{x:{align:"center"},y:{align:"center",dy:-13}},button:{x:{align:"center"},y:{align:"bottom",dy:-15}},noRewards:{width:450}}}),cleverapps.overrideStyles(cleverapps.styles.MissionWindow,{autoScrollText:!1,tableHeight:{styles:{height:750}},window:{HelpButton:{x:{align:"left",dx:70},y:{align:"top",dy:-170}}}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupTable,{y:{align:"center",dy:-25},table:{height:660,padding:50}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupLeadersRow,{place:{font:cleverapps.styles.FONTS.WINDOW_TEXT},text:{font:cleverapps.styles.FONTS.WINDOW_SMALL_TEXT}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupRow,{data:{icon:bundles.daily_cup.frames.daily_cup_row_icon,scale:.9},place:{font:cleverapps.styles.FONTS.WINDOW_TEXT},text:{font:cleverapps.styles.FONTS.WINDOW_SMALL_TEXT},avatar:{scale:.7}}),cleverapps.overrideStyles(cleverapps.styles.SpineSkins,{wardrobe_valentines:{
json:bundles.valentines.jsons.hero_json,skin:"skin_0"},wardrobe_xmas:{json:bundles.xmas.jsons.hero_json,skin:"skin_0"},wardrobe_memorial:{json:bundles.memorial.jsons.hero_json,skin:"skin_0"}}),cleverapps.overrideStyles(cleverapps.styles.LanguagesWindow,{window:{contentOffset:0},padding:{x:0,y:0}}),cleverapps.overrideStyles(cleverapps.styles.RewardsListComponent,{gun:{y:100,animation:{json:bundles.game.jsons.gun_animation_json}}}),cleverapps.overrideStyles(cleverapps.styles.Window,{ShareCheckBox:{offsetBottom:15,offsetTop:5}}),cleverapps.overrideStyles(cleverapps.styles.FinishEpisodeWindow,{width:600,height:560,image:{y:360,width:660}}),cleverapps.overrideStyles(cleverapps.styles.HelpFromFriendsWindow,{button:{Text:{offsetX:0},RewardText:{offsetX:0}},addcoinsvideo:{button:{RewardText:{offsetX:-15}}}}),cleverapps.overrideStyles(cleverapps.styles.UI,{Avatar:{x:8,y:4}}),cleverapps.overrideStyles(cleverapps.styles.DailyTasksWindow,{timer:{margin:0,width:270,height:65,
direction:cleverapps.UI.VERTICAL,timerFont:cleverapps.styles.FONTS.WHITE_TEXT},Border:{x:0,y:120},content:{padding:{x:0}}}),cleverapps.overrideStyles(cleverapps.styles.DailyTaskRewardWindow,{animation:{json:bundles.main.jsons.reward_spine_json}}),cleverapps.overrideStyles(cleverapps.styles.LeadersRow,{placeBadges:{x:-28,text:{x:14}},avatar:{scale:.7}}),cleverapps.overrideStyles(cleverapps.styles.Row,{placeBadges:{x:0,y:-5,icons:[bundles.main.frames.tournament_gold,bundles.main.frames.tournament_silver,bundles.main.frames.tournament_bronze]},data:{scale:.5},avatar:{scale:.7}}),cleverapps.overrideStyles(cleverapps.styles.UI.RewardElementView,{zIndex:11,image:{scale:.6}}),cleverapps.overrideStyles(cleverapps.styles.MenuBarItem,{icon:{fullInsideBg:!0,x:40},plusButton:{position:{y:{align:"center"}}}}),cleverapps.overrideStyles(cleverapps.styles.DialogueView,{persons:{default:{animation:"idle",styles:{json:bundles.hero.jsons.hero_json}}}}),cleverapps.overrideStyles(
cleverapps.styles.DialoguePersonView,{scale:.9,mobileScale:.65}),cleverapps.overrideStyles(cleverapps.styles.PagesView,{prevEpisodeShowed:!0}),cleverapps.overrideStyles(cleverapps.styles.VictoryChestChangeView,{ChestBlock:!1}),cleverapps.overrideStyles(cleverapps.styles.GunPriceView,{icon:{scale:.5}}),cleverapps.overrideStyles(cleverapps.styles.TournamentPlayerView,{background:!1,width:130,height:110,avatar:{scale:.7},amount:{x:{align:"right",dx:12},y:{align:"bottom",dy:3}},name:{y:{align:"center",dy:3},bg:{scale9:!0,playerColor:new cc.Color(251,183,0,255),image:bundles.game.frames.tournament_name_bg_png}}}),cleverapps.overrideStyles(cleverapps.styles.ConfirmExitWindow,{height:250,text:{y:100},animation:!1}),cleverapps.overrideStyles(cleverapps.styles.ShadowView,{opacity:160}),cleverapps.overrideStyles(cleverapps.styles.SubscriptionWindow,{window:{Title:{offset:0,bg:{image:bundles.subscription_window.frames.title_bg_png,zIndex:0,adjustToWindow:{width:-150},x:{align:"center",dx:0},y:{
align:"top",dy:10}}}},animation:{person:{position:{x:{align:"left",dx:180},y:{align:"top",dy:-410}},json:bundles.hero.jsons.hero_json,open:"hint",idle:"idle",scale:.6}},contentPadding:{y:50,isTop:!1}}),cleverapps.overrideStyles(cleverapps.styles.UI.Tooltip,{LOCATION:{above:{rewards:{y:{align:"top",dy:120}}}}}),cleverapps.overrideStyles(cleverapps.styles.ShopUserGoldView,{person:!1,bg:!1,position:[{y:20},{y:40},{y:40}],items:{gold:{dy:-3}}}),cleverapps.TutorialSteps=function(){},cleverapps.TutorialSteps.prototype.list=function(e){for(var t=[],s=0;s<this._getStepsNumber();s++)t.push(this._regularStep.bind(this,e,s));return t.push(this._finalStep.bind(this,e,s)),t},cleverapps.TutorialSteps.prototype.setGame=function(e){this.game=e},cleverapps.TutorialSteps.prototype._getStepsNumber=function(){return"stacks"===cleverapps.config.subtype?3:2},cleverapps.TutorialSteps.prototype._pickWord=function(e){if("stacks"===cleverapps.config.subtype)return e>=Object.keys(this.game.board.foundWordsSet
).length;var t=this.game.board.words[this.game.board.words.length-e-1];return!this.game.board.foundWordsSet[t]&&t},cleverapps.TutorialSteps.prototype._regularStep=function(t,e){var s=this._pickWord(e);if(s){this.game.keypad.tutorialWord(s);var n=this.game.board.markDiscovered;this.game.board.markDiscovered=function(e){n.call(this.game.board,e),s!==e&&"stacks"!==cleverapps.config.subtype||(this.game.board.markDiscovered=n,this.game.keypad.trigger("tutorialStopped"),t())}.bind(this)}else t()},cleverapps.TutorialSteps.prototype._finalStep=function(t,e){this._pickWord(e)&&cleverapps.metha.getType()!==Metha.KNOCKOUT&&"stacks"!==cleverapps.config.subtype?cleverapps.metha.displayWhenFreeFocus({focus:"TutorialFinishWindow",actions:[function(e){setTimeout(e,2e3)},function(e){Game.currentGame===this.game?(new TutorialFinishWindow,cleverapps.metha.onceNoWindowsListener=e,t()):e()}.bind(this)]}):t()},cleverapps.Combo.prototype.afterIncrease=function(){if(
this.level===cleverapps.Combo.COMBO_LEVEL_TO_SHOW_FORCE&&this.canShowForce()){var e=[function(e){setTimeout(e,1500)},function(e){cleverapps.forces.create(Force.NO_ELEMENT,Forces.COMBO),cleverapps.forces.onceForceClosed=e}.bind(this)];"KeypadControl"===cleverapps.metha.focus?cleverapps.metha.displayWhenFreeFocus({focus:"ComboForce",control:"combo",actions:e}):cleverapps.metha.display({focus:"ComboForce",control:"combo",actions:e})}this.level===cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE&&(cleverapps.exclamation.show("messages:comboExclamationText"),levels.cookieJar.incCounter(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.COMBO_PRIZE))},cleverapps.Combo.prototype.canShowForce=function(){var e=this.game.board.getUndiscoveredWords();return!cleverapps.forces.isShown(Forces.COMBO.id)&&e.length>cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE-cleverapps.Combo.COMBO_LEVEL_TO_SHOW_FORCE},cleverapps.Combo.AVAILABLE={episode:1,level:3},cleverapps.Combo.COMBO_LEVEL_TO_SHOW_FORCE=2,
cleverapps.Combo.TOTAL_TIMEOUT="1 minute",cleverapps.Combo.ALARM_TIMEOUT="10 seconds";var WordGame=function(e,t){t=t||{},GameBase.call(this,e,t),this.counter.registerStage(100,this.discoverOpened.bind(this)),this.counter.registerStage(110,this.saveStable.bind(this)),this.counter.registerStage(1e3,this.checkComplete.bind(this));var s=this.loadSave();this.timer.setStartTime(s.timeStart),this.emptySave=s.empty,this.gameMission&&(this.rewards.clover=s.clover),this.collectedCoins=0,this.keypad=new Keypad(this,s),this.keypad.on("attempt",this.onAttempt.bind(this)),this.board=new cleverapps.Board(this,s.words,s.hints),this.extra=new cleverapps.Extra(this.levelContent.extra,s.extra),this.extra.onChangedListener=this.storeSave.bind(this),this.current=new cleverapps.Current(this,this.keypad),this.churnActivated=function(){},Cryptex.IsNeeded(this)&&(this.cryptex=new Cryptex(this)),this.level.episode.isBonusRound()&&(this.bonusRoundCountDown=new BonusRoundCountDown);var n,i=e.isRegular()&&e.isNew(
);(!this.backgroundMission||!this.backgroundMission.tournament||this.timer.getStartTime()<this.backgroundMission.started||cleverapps.isKnockoutGame())&&(i=!1),cleverapps.isRumble()?n=Competition.optionsForKnockoutGame(this):i&&(n=Competition.optionsForTournament(this)),n&&(this.competition=new Competition(n),this.competition.onLoseListener=function(){this.board.isComplete()||this.lose()}.bind(this),this.tournament=i),-1!==["scramble","wordheaps"].indexOf(cleverapps.config.name)&&(this.currentHighlighter=new CurrentHighlighter(this,s)),this.needSave&&this.storeSave(),this.hintBooster=new HintBooster(this),this.hintNotification=new HintNotification(this),cleverapps.flags.introDisabled&&this.keypad.showUp(function(){},!0)},Game=WordGame;WordGame.prototype=Object.create(GameBase.prototype),(WordGame.constructor=WordGame).prototype.saveStable=function(){this.storeSave()},WordGame.prototype.onAttempt=function(e){this.churnActivated();var t=this.keypad.combineWord(e),s=this.analyze(t)
;s===WordGame.STATUSES.BOARD&&(this.discover(t,e),this.userStatus.reportUserAction()),s===WordGame.STATUSES.EXTRA&&(this.extra.discover(t),this.userStatus.reportUserAction()),s===WordGame.STATUSES.BOARD_FOUND&&this.board.alreadyDiscovered(t),s===WordGame.STATUSES.WRONG&&(this.combo&&this.combo.reset(),this.trigger("WrongWord_Booster")),this.keypad.status(s,e),this.current.status(s,t),cleverapps.gun&&cleverapps.gun.onDiscovery&&cleverapps.gun.onDiscovery(s),cleverapps.playSession.notifyActive()},WordGame.prototype.discover=function(e,t){cleverapps.dailyTasks.onDiscoverWord(e),this.board.discover(e,t),this.keypad.markDiscovered(e,t),"stacks"===cleverapps.config.subtype&&(this.pendingBonusBlocks=this.calculatePendingBonusBlocks());var s=50;"stacks"===cleverapps.config.subtype&&(s=150*t.length),setTimeout(function(){cleverapps.exclamation.show(cleverapps.Random.mathChoose(Messages.get("congratulations")))}.bind(this),s),this.counter.setTimeout(function(){},this.getDiscoverDuration(t)),
this.competition&&this.competition.updatePlayerResult(cleverapps.user.id,this.board.countDiscoveredWords()),this.updateCurrentHighlighter&&this.updateCurrentHighlighter(),this.combo&&this.combo.increaseLevel(),this.cryptex&&this.cryptex.attempt(),this.storeSave(),this.counter.trigger(),this.trigger("DiscoveredWord",e)},WordGame.prototype.getDiscoverDuration=function(e){return"stacks"===cleverapps.config.subtype?100*e.length:850},WordGame.prototype.getDailyCupStars=function(){return this.extra.getAllFoundWords().length+Object.keys(this.board.foundWordsSet).length},WordGame.prototype.showUp=function(e){var t=bundles.game.urls.openlevel_effect;this.level.isHard()&&bundles.game.urls.openlevel_effect_hard&&(t=bundles.game.urls.openlevel_effect_hard),this.level.isTricky()&&bundles.game.urls.openlevel_effect_tricky&&(t=bundles.game.urls.openlevel_effect_tricky),this.level.episode.isBonusRound()&&bundles.game.urls.openlevel_effect_bonus&&(t=bundles.game.urls.openlevel_effect_bonus),
cleverapps.audio.playSound(t),cleverapps.metha.compound(e,[function(e){if(cleverapps.isRumble()&&!this.keypad.forceJustShown&&cleverapps.metha.getMainObject().knockoutGame.rumble.getCurrentRound().isLast())this.onGameMessage(e,"messages:message.lastRound");else if(this.level.content.hint){var t="messages:message.regularLevel";this.level.isHard()&&(t="messages:message.hardLevel"),this.level.isTricky()&&(t="messages:message.trickyLevel"),this.onGameMessage(e,this.level.content.hint,t)}else this.level.episode.isBonusRound()&&"stacks"===cleverapps.config.subtype?this.onGameMessage(e,"messages:message.bonusLevel"):this.level.isHard()?this.onGameMessage(e,"messages:message.hardLevel"):e()}.bind(this),function(e){this.keypad.showUp(e)}.bind(this),function(e){cleverapps.metha.showControlsWhileFocused("hintView"),this.board.showUp(e)}.bind(this),function(e){this.boostersBefore?this.boostersBefore.giveBonus(e):e()}.bind(this),function(e){cleverapps.gun.isAvailable()?setTimeout(e,500):e()},
function(e){cleverapps.gun.showUp(),cleverapps.metha.registerControl("gun",function(e){e?cleverapps.gun.show():cleverapps.gun.hide()}),0===levels.user.episode&&0===levels.user.level&&this.level.isCurrentLevel()&&!cleverapps.isKnockoutGame()&&levels.tutorial.start(),this.hintNotification.start(),this.board.remindDiscovered(),this.competition&&this.competition.start(),e()}.bind(this),function(e){this.counter.trigger(),e()}.bind(this)])},WordGame.prototype.afterChangeOutcome=function(){this.stop()},WordGame.STATUSES={BOARD:0,BOARD_FOUND:1,EXTRA:2,EXTRA_FOUND:3,WRONG:4,SHORT:5},WordGame.BOARD_COIN=5,WordGame.prototype.stop=function(){this.hintBooster.clear(),this.cryptex&&this.cryptex.stop(),this.keypad.stop(),this.bonusRoundCountDown&&this.bonusRoundCountDown.stop(),this.competition&&this.competition.stop(),GameBase.prototype.stop.call(this)},WordGame.prototype.getMinWordLength=function(){return-1!==["scramble","wordheaps"].indexOf(cleverapps.config.name
)?"ja"===cleverapps.settings.language||"ko"===cleverapps.settings.language?2:3:this.levelContent.minLength},WordGame.prototype.analyze=function(e){return e.length<this.getMinWordLength()?WordGame.STATUSES.SHORT:this.board.contains(e)?this.board.analyze(e):this.extra.contains(e)?this.extra.analyze(e):WordGame.STATUSES.WRONG},WordGame.prototype.eraseSave=function(){cleverapps.GameSaver.removeSave(GameBase.getStoreKey(this.level))},WordGame.prototype.discoverOpened=function(){var e;(e="stacks"===cleverapps.config.subtype?this.keypad.findOpenedWord():this.board.findNewOpenedWord())&&(this.onAttempt(e),this.counter.setTimeout(function(){},200))},WordGame.prototype.checkComplete=function(){this.board.isComplete()&&this.outcome===GameBase.OUTCOME_UNKNOWN&&this.win()},WordGame.prototype.getInfo=function(){return{words:Object.keys(this.board.foundWordsSet),hints:this.board.hints,extra:this.extra.getAllFoundWords(),clover:this.rewards.clover,timeStart:this.timer.getStartTime()}},
WordGame.prototype.getInitialInfo=function(){return this.needSave=!0,{words:[],extra:[],hints:[],clover:0,timeStart:Date.now(),empty:!0}},WordGame.prototype.loadSave=function(){var e=GameBase.prototype.loadSave.call(this);return e&&(void 0===e.clover&&(e.clover=0,this.needSave=!0),void 0===e.timeStart&&(e.timeStart=Date.now(),this.needSave=!0),e.words=e.words.map(function(e){return e.toLowerCase()}),e.extra=e.extra.map(function(e){return e.toLowerCase()})),e},WordGame.prototype.addClover=function(e,t){GameBase.prototype.addClover.apply(this,arguments),this.storeSave()},WordGame.prototype.updateRewards=function(){if(this.tournament&&this.backgroundMission&&this.backgroundMission.type===Mission.TYPE_STICKERS_COLLECTION&&this.backgroundMission.isRunning()){var e=this.competition.calcPlace()+1;e<4?this.rewards[GameBase.REWARD_BACKGROUND_CLOVER]=StickersCollection.GEMS_BY_PLACE[e]:delete this.rewards[GameBase.REWARD_BACKGROUND_CLOVER]}},cleverapps.config.debugMode&&(
WordGame.prototype.discoverDebug=function(e){if(e.player){var t=this.board.getUndiscoveredWords();0<t.length&&this.keypad.trigger("attempt",t[0])}else this.competition.updatePlayerResult(e.id,e.amount+1)}),WordGame.prototype.totalItemsToSolve=function(){return this.board.countTotalWords()},WordGame.prototype.countDiscovered=function(){return Object.keys(Game.currentGame.board.foundWordsSet).length};var WordGameScene=GameSceneBase.extend({ctor:function(e,t){if(this._super(e,t),new cleverapps.BoardController(e.board,this),"stacks"===cleverapps.config.subtype){var s=GameSceneBase.ChooseStyling(this.level);LetterBlockView.bgImage=s.bgImage,LetterBlockView.bgImageHighlighted=s.bgImageHighlighted,LetterBlockView.bgImageHint=s.bgImageHint,LetterBlockView.hintColor=s.hintColor,cleverapps.BoardView.foundWordBg=s.foundWordBg}var n=new cleverapps.CurrentView(e.current);this.scene.addChild(n);var i=new KeypadView(e.keypad);this.scene.addChild(i),HintBooster.IsAvailable()&&this.createHintButton(),
this.game.shuffleBooster&&(this.shuffleButton=new ShuffleButtonBooster(this.game.shuffleBooster),this.scene.addChild(this.shuffleButton),cleverapps.styles.ShuffleButtonBooster.useSceneDelta&&(this.shuffleButton.hideHandler.originalPosition.y-=cleverapps.UI.getSceneOffsetY()));var o=this.level.isRegular()&&this.level.isNew()||!this.level.isRegular();if(levels.cookieJar.setShouldRewardInCurrentLevel(o),o&&(this.cookieJarView=new CookieJarView(e.extra,this.scene)),levels.tutorial.setGame(e),this.customize(),e.on("stop",this.onStop.bind(this),this),t.content.hint){s=GameSceneBase.ChooseStyling(this.level);HintView.themeBgColor=s.themeBgColor;var a=new HintView(t.content.hint,e);this.scene.addChild(a)}this.game.cryptex&&this.scene.addChild(new CryptexView(this.game.cryptex)),cleverapps.isRumble()&&this.playersView.replaceParentSamePlace(this.boardView),e.extra.init()},onStop:function(){this.gameStopped=!0},onReplace:function(){if(!cc.sys.isNative&&!this.refreshFromTool){
var e=this.level.episode.episodeNo,t=this.level.levelNo;this.gameStopped||cleverapps.throwAsync("WordGameScene exit without game.stop! episodeNo - "+e+" levelNo - "+t)}},createHintButton:function(){this.hintButton=new HintButtonBooster(this.game.hintBooster),this.scene.addChild(this.hintButton),cleverapps.styles.HintButtonBooster.useSceneDelta&&(this.hintButton.hideHandler.originalPosition.y-=cleverapps.UI.getSceneOffsetY())},getRefreshSceneActionOnChangeSize:function(){return!(!Game.currentGame||!Game.currentGame.stillNoPenalty())&&function(e){Game.currentGame&&Game.currentGame.stillNoPenalty()?(Game.currentGame.stop(),Game.currentGame.level.episode.isDailyCup()?cleverapps.dailyCup.wantsToPlay(e):Game.currentGame.level.episode.isDailyLevel()?cleverapps.dailyLevel.start(e):cleverapps.metha.wantsToPlay(e)):e()}.bind(this)},onChangeSize:function(e){this._super(e),this.game&&this.game.board&&this.game.board.onChangeSize&&this.game.board.onChangeSize()},beforeWin:function(){if(
this.game.outcome===GameBase.OUTCOME_VICTORY){if(levels.gameHints.reset(),this.level.isCurrentLevel()&&this.game.tournament){var e=this.game.competition.calcPlace()+1;cleverapps.eventLogger.logEvent(cleverapps.EVENTS.TOURNAMENT_LEVEL_PLACE+"_"+e),1===e&&cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.TOURNAMENT_WIN)}this.game.updateRewards(),this.playersView&&this.game.rewards[GameBase.REWARD_BACKGROUND_CLOVER]&&this.playersView.animateResults&&this.playersView.animateResults(this.game.rewards[GameBase.REWARD_BACKGROUND_CLOVER]),this.game.eraseSave()}"KeypadControl"===cleverapps.metha.focus&&this.game.keypad.reset(),GameSceneBase.prototype.beforeWin.call(this)},waitWinLoseAnimations:function(e){cleverapps.isRumble()&&this.game.outcome===GameBase.OUTCOME_LOST?cleverapps.metha.compound(e,[function(e){setTimeout(e,800)},function(e){new BeforeLoseWindow(this.game),cleverapps.metha.onceNoWindowsListener=e}.bind(this)]):this.game.outcome===GameBase.OUTCOME_LOST?(e=cleverapps.wait(2,e
),this.game.keypad.loseAnimation(e),this.game.board.loseAnimation(e)):(cleverapps.metha.showControlsWhileFocused("MenuBarGoldItem"),setTimeout(function(){cleverapps.metha.hideControlsWhileFocused("MenuBarGoldItem"),e=cleverapps.wait(2,e),this.game.board.onWin(e),this.game.keypad.onWin(e)}.bind(this),50),this.game.outcome===GameBase.OUTCOME_VICTORY&&setTimeout(function(){cleverapps.audio.playSound(bundles.game.urls.win_intro_effect)},500))}});(GameScene=WordGameScene).BUNDLES=function(e,t){return GameSceneBase.BUNDLES(e,t)},"stacks"===cleverapps.config.subtype&&(cleverapps.overrideStyles(cleverapps.styles.GameScene.STYLING,{bonus:{bgImage:bundles.letters.frames.letter_keypad_green_bg_png,bgImageHighlighted:bundles.letters.frames.letter_keypad_yellow_bg_png,foundWordBg:bundles.game.frames.found_word_bg_bonus_png,hintColor:new cc.Color(144,0,236,255),themeBgColor:new cc.Color(112,192,57,220)},hard:{bgImage:bundles.letters.frames.letter_keypad_orange_bg_png,
bgImageHighlighted:bundles.letters.frames.letter_keypad_red_bg_png,foundWordBg:bundles.game.frames.found_word_bg_hard_png,hintColor:new cc.Color(144,0,236,255),themeBgColor:new cc.Color(236,131,0,220)},tricky:{bundle:"game_background",skin:"gameBackground",music:bundles.game.urls.background_music_tricky,bgImage:bundles.letters.frames.letter_keypad_light_blue_bg_png,bgImageHighlighted:bundles.letters.frames.letter_keypad_pink_bg_png,foundWordBg:bundles.game.frames.found_word_bg_tricky_png,hintColor:new cc.Color(244,234,138,255),themeBgColor:new cc.Color(242,167,152,255)}}),cleverapps.overrideStyles(cleverapps.styles.GameScene.STYLING.regular[0],{bgImage:bundles.letters.frames.letter_keypad_green_bg_png,bgImageHighlighted:bundles.letters.frames.letter_keypad_yellow_bg_png,foundWordBg:bundles.game.frames.found_word_bg_bonus_png,hintColor:new cc.Color(144,0,236,255),themeBgColor:new cc.Color(112,192,57,220)}),cleverapps.overrideStyles(cleverapps.styles.GameScene.STYLING.regular[1],{
bgImage:bundles.letters.frames.letter_keypad_blue_bg_png,bgImageHighlighted:bundles.letters.frames.letter_keypad_purple_bg_png,foundWordBg:bundles.game.frames.found_word_bg_png,hintColor:new cc.Color(250,28,115,255),themeBgColor:new cc.Color(36,151,224,220)}),cleverapps.overrideStyles(cleverapps.styles.GameScene.STYLING.regular[2],{bgImage:bundles.letters.frames.letter_keypad_blue_bg_png,bgImageHighlighted:bundles.letters.frames.letter_keypad_purple_bg_png,foundWordBg:bundles.game.frames.found_word_bg_png,hintColor:new cc.Color(250,28,115,255),themeBgColor:new cc.Color(36,151,224,220)}));var BaseButtonBooster=cleverapps.UI.Button.extend({ctor:function(e){this.booster=e.booster;var t,s=this.styles=e.styles;this.content=this.getContent(),t=s.spine_button?cleverapps.extend({},s.spine_button):{button_png:s.button_png,button_on_png:s.button_on_png},t=cleverapps.extend(t,{contentOffset:s.contentOffset,onClicked:this.onPressed.bind(this),content:this.content,clickThrottle:10,
swallowTouches:e.swallowTouches}),cleverapps.overrideStyles(t,this.getSize()),this._super(t),this.setCascadeOpacityEnabled(!0),this.setCascadeColorEnabled(!0),this.baseScale=cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?s.phone.scale:1,this.setScale(this.baseScale),s.position&&this.setPositionRound(s.position.x[cleverapps.wideMode.mode],s.position.y[cleverapps.wideMode.mode]),cleverapps.UI.makeHideable(this,e.hideDirection),this.createArrow(),this.booster.onToggleArrowListener=this.createListener(this.toggleArrow.bind(this)),this.booster.onToggleTintListener=this.createListener(this.toggleTint.bind(this)),this.booster.onForceListener=this.createListener(this.showForce.bind(this)),this.booster.onExecuteListener=this.createListener(this.onExecute.bind(this)),this.registerTarget(this.styles)},getSize:function(){return{width:this.styles.width,height:this.styles.height}},toggleArrow:function(e){this.arrow.setVisible(e),e&&this.arrow.animation.setAnimation(0,"animation",!0),
this.icon instanceof cleverapps.Spine&&this.icon.setAnimation(0,e?"animation":"idle",!0)},toggleTint:function(e){this.hintOn=e,this.runTintAnimation()},getForceActions:function(){return[function(e){this.switchToFreePrice(),setTimeout(e,700)}.bind(this),function(e){this.show(!0),cleverapps.boostersCounter.add(this.booster.getId(),1),cleverapps.forces.create(this,this.booster.getForce()),cleverapps.forces.onceForceClosed=e}.bind(this)]},showForce:function(){if(cleverapps.forces.isAvailable(this,this.booster.getForce())){var e=this.getForceActions();return this.baseZOrder=this.getLocalZOrder(),this.setLocalZOrder(0),cleverapps.metha.isFocused()?"KeypadControl"===cleverapps.metha.focus&&cleverapps.metha.displayWhenFreeFocus({focus:"ButtonBoosterForce",control:"hint_"+this.booster.getId(),actions:e}):cleverapps.metha.display({focus:"ButtonBoosterForce",control:"hint_"+this.booster.getId(),actions:e}),!0}return!1},createArrow:function(){var e=this.styles.mirrorArrowY;this.arrow=new cc.Node,
this.arrow.setAnchorPoint2(),this.arrow.setCascadeColorEnabled(!1),this.addChild(this.arrow);var t=this.styles.arrowOffsetY||0,s=e?this.height+t:-t;this.arrow.setPositionRound(this.width/2,s);var n=this.arrow.animation=new cleverapps.Spine(bundles.game.jsons.hint_button_arrow_json);this.arrow.addChild(n),n.setAnimation(0,"animation",!0),this.arrow.visible=!1,e&&this.arrow.setScale(1,-1)},runTintAnimation:function(){if(!this.tintRunning&&this.hintOn){this.tintRunning=!0;var e=cleverapps.styles.COLORS.WHITE,t=cleverapps.styles.COLORS.HINT_ALARM_COLOR||cleverapps.styles.COLORS.PLAYER_ALARM_COLOR;this.background.runAction(new cc.Sequence(new cc.TintTo(.7,t.r,t.g,t.b),new cc.TintTo(.7,e.r,e.g,e.b),new cc.CallFunc(function(){this.tintRunning=!1,this.runTintAnimation()}.bind(this))))}},createIcon:function(){if(bundles.game.jsons.hint_icon_json){var e=new cleverapps.Spine(bundles.game.jsons.hint_icon_json);return e.setAnimation(0,"idle",!0),e}return new cc.Sprite(
bundles.game.frames.hint_icon_png)},getPriceImage:function(){return bundles.game.frames.hint_coins_png},getContent:function(){var e=this.styles,t=new cc.Node;t.setAnchorPoint2();var s=this.icon=this.createIcon();t.addChild(s),s.setPositionRound(e.content.icon),e.content.iconScale&&s.setScale2(e.content.iconScale);var n=this.price=new cc.Sprite(this.getPriceImage());return t.addChild(n),n.setPositionRound(e.content.price),t},switchToFreePrice:function(){this.freeBlock=new cc.Node,this.freeBlock.setAnchorPoint2(),this.freeBlock.setCascadeOpacityEnabled(!0),this.freeBlock.setPosition(this.price.getPosition()),this.freeBlock.setOpacity(0);var e=cleverapps.UI.generateTTFText("messages:FREE",cleverapps.styles.FONTS.BUTTON_SMALL_TEXT);if(e.fitTo(this.styles.content.textWidth),this.freeBlock.addChild(e),this.styles.content.freeTextBg){var t=new cc.Scale9Sprite(bundles.game.frames.ruby_substrate_png);t.setContentSize2(e.width+2*this.styles.content.freeTextBg.padding.x,
e.height+2*this.styles.content.freeTextBg.padding.y),this.freeBlock.addChild(t),t.setPositionRound(this.styles.content.freeTextBg.dx,this.styles.content.freeTextBg.dy),t.setLocalZOrder(-1)}this.content.addChild(this.freeBlock),this.price.runAction(new cc.FadeOut(.3)),this.freeBlock.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.FadeIn(.3)))},switchToRegularPrice:function(){this.freeBlock.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.FadeOut(.3),new cc.RemoveSelf,new cc.CallFunc(function(){delete this.freeBlock}.bind(this)))),this.price.runAction(new cc.Sequence(new cc.DelayTime(.8),new cc.FadeIn(.3)))},onPressed:function(){cleverapps.forces.isRunningForce(this.booster.getForce())&&(this.switchToRegularPrice(),this.baseZOrder&&this.setLocalZOrder(this.baseZOrder),cleverapps.forces.closeRunningForce(),this.registerTarget(this.styles)),cleverapps.metha.display({focus:"ExecuteButtonBooster",action:function(e){this.booster.onPressed(e)}.bind(this)})},onExecute:function(){
this.icon instanceof cleverapps.Spine&&"crocword"===cleverapps.config.name&&this.icon.setAnimationAndIdleAfter("hint","idle")}}),HintButtonBooster=BaseButtonBooster.extend({ctor:function(e){var t=cleverapps.styles.HintButtonBooster.hideDirection||cleverapps.UI.HORIZONTAL;"object"==typeof t&&(t=t[cleverapps.wideMode.mode]),this._super({booster:e,styles:cleverapps.styles.HintButtonBooster,hideDirection:t}),cleverapps.metha.registerControl("hint_"+this.booster.getId(),this),this.setLocalZOrder(cleverapps.styles.HintButtonBooster.zOrder)}});cleverapps.styles.HintButtonBooster={width:250,height:110,zOrder:0,position:{x:[{align:"right",dx:-10},{align:"right",dx:-10},{align:"right",dx:-10}],y:[{align:"top",dy:-730},{align:"top",dy:-730},{align:"top",dy:-730}]},phone:{scale:.8},content:{textWidth:120,icon:{x:-50,y:0},price:{x:30,y:0}}};var HintNotification=function(e){this.game=e,cleverapps.config.debugMode&&(HintNotification.TIMEOUT=1e4),this.hintBooster=this.game.hintBooster,
this.competition=this.game.competition};HintNotification.prototype.start=function(){this.game.outcome===GameBase.OUTCOME_UNKNOWN&&(this.competition&&(this.competition.onChangeResultsListeners.hintNotification=this.refresh.bind(this),this.refresh()),this.game.onChangeOutcomeListeners.hintNotification=this.stop.bind(this))},HintNotification.prototype.refresh=function(){if(!this.timeout&&this.game.outcome===GameBase.OUTCOME_UNKNOWN&&!this.game.stopped&&!cleverapps.forces.isRunningForce()&&HintBooster.IsAvailable()){var e=this.chooseNotification();e&&(cleverapps.Notification.create(e),this.hintBooster.alarm.start("tournament",2),this.stopAlarmTimeout=new cleverapps.LongTimeout(function(){this.hintBooster.alarm.stop("tournament")}.bind(this),5e3),this.timeout=new cleverapps.LongTimeout(function(){this.clearTimeout(),this.refresh()}.bind(this),HintNotification.TIMEOUT))}},HintNotification.prototype.chooseNotification=function(){var e,t=[],s=this.game.level.content.words.length;if(
this.competition&&(e=this.competition.calcPlace(),t.push(this.competition.player.amount),!(t=t.concat(this.competition.results.filter(function(e){return e.id!==cleverapps.user.id}).map(function(e){return e.amount}))).slice(1).some(function(e){return e<s})))return!1;for(var n=0;n<HintNotification.NOTIFICATIONS.length;n++)if(HintNotification.NOTIFICATIONS[n].filter(e,t,s))return HintNotification.NOTIFICATIONS[n].text;return!1},HintNotification.prototype.clearTimeout=function(){clearTimeout(this.timeout),this.timeout=void 0,clearTimeout(this.stopAlarmTimeout),this.stopAlarmTimeout=void 0},HintNotification.prototype.stop=function(){this.clearTimeout(),this.hintBooster.alarm.stop("tournament"),cleverapps.Notification.remove()},HintNotification.TIMEOUT=6e4,HintNotification.NOTIFICATIONS=[],"olympics"===cleverapps.config.name?(HintNotification.NOTIFICATIONS.push({text:"messages:UserBehind1",filter:function(e,t){return t[0]<t[1]}}),HintNotification.NOTIFICATIONS.push({
text:"messages:UserBehind2",filter:function(e,t){return t[0]+2<=t[1]}}),HintNotification.NOTIFICATIONS.push({text:"messages:UserBehind3",filter:function(e,t,s){return t[0]+1===s&&t[1]+1===s}})):HintNotification.NOTIFICATIONS.push({text:"messages:HintButtonNotification.text",filter:function(e,t){return e===t.length-1}});var KeypadInterface=function(){cleverapps.EventEmitter.call(this)};KeypadInterface.prototype=Object.create(cleverapps.EventEmitter.prototype),(KeypadInterface.prototype.constructor=KeypadInterface).prototype.markDiscovered=function(e){},KeypadInterface.prototype.showUp=function(e){},KeypadInterface.prototype.status=function(e,t){},KeypadInterface.prototype.amountKeys=function(){},KeypadInterface.prototype.reset=function(){},KeypadInterface.prototype.findWordIndexes=function(e){},KeypadInterface.prototype.tutorialWord=function(e){},KeypadInterface.prototype.isForceAvailable=function(){},KeypadInterface.prototype.stop=function(){},(Keypad=function(e){KeypadInterface.call(
this),this.onceControlFinished=void 0,this.game=e,this.level=e.level,this.letters=e.level.content.base.toLowerCase().split("").map(function(e,t){return new KeypadLetter(e,t,this)}.bind(this)),this.indexes=[],this.setControlType(Keypad.CONTROL_TYPES.UNDEFINED),cleverapps.knockoutTutorial&&(cleverapps.knockoutTutorial.onFirstMoveForceListener=this.firstMoveForce.bind(this))}).prototype=Object.create(KeypadInterface.prototype),(Keypad.prototype.constructor=Keypad).prototype.stop=function(){this.trigger("tutorialStopped")},Keypad.prototype.onWin=function(e){this.trigger("win",e)},Keypad.prototype.firstMoveForce=function(e){this.showUp(function(){this.showForce(e),levels.tutorial.start()}.bind(this))},Keypad.prototype.loseAnimation=function(e){e()},Keypad.prototype.touchBegan=function(e){return cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),!this.game.counter.isActive()&&(!!e&&(!!this.grabFocus()&&(this.letterTouched(e),!0)))},Keypad.prototype.touchEnded=function(
){this.controlType===Keypad.CONTROL_TYPES.UNDEFINED&&this.setControlType(Keypad.CONTROL_TYPES.CLICK),0===this.indexes.length&&this.cancel(),this.controlType===Keypad.CONTROL_TYPES.MOVE&&this.submit(),this.letterTouchBlocked=!1},Keypad.prototype.letterTouched=function(e){this.letterTouchBlocked||(this.move(e),this.trigger("touchBegan")),this.controlType===Keypad.CONTROL_TYPES.CLICK&&(this.letterTouchBlocked=!0)},Keypad.prototype.tutorialWord=function(e,t){this.trigger("tutorialStarted",this.findWordIndexes(e),t)},Keypad.prototype.findWordIndexes=function(e){for(var t={},s=[],n=0;n<e.length;n++)for(var i=0;i<this.letters.length;i++)if(!t[i]&&this.letters[i].symbol===e[n]){t[i]=!0,s.push(this.letters[i]);break}return s},Keypad.prototype.stopped=function(){this.trigger("attempt",this.indexes),this.freeFocus()},Keypad.prototype.combineWord=function(e){return"string"==typeof e?e:e.map(function(e){return e.symbol}).join("")},Keypad.prototype.grabFocus=function(){
return"KeypadControl"===cleverapps.metha.focus||(cleverapps.metha.display({focus:"KeypadControl",control:["MenuBarGoldItem","MenuBarCryptexItem"],action:function(e){this.onceControlFinished=e}.bind(this)}),"KeypadControl"===cleverapps.metha.focus)},Keypad.prototype.freeFocus=function(){this.onceControlFinished&&(this.onceControlFinished(),delete this.onceControlFinished)},Keypad.prototype.showUp=function(e,t){this.setControlType(Keypad.CONTROL_TYPES.UNDEFINED),this.trigger("showUp",e,t)},Keypad.prototype.showForce=function(e){this.forceJustShown=!0,this.trigger("force",e)},Keypad.prototype.shuffle=function(){this.letters=cleverapps.Random.shuffle(this.letters),this.letters.forEach(function(e,t){e.shuffle(t)}),this.game.counter.setTimeout(function(){this.setControlType(Keypad.CONTROL_TYPES.UNDEFINED)}.bind(this),1e3*this.getShuffleDuration()),this.setControlType(),this.trigger("shuffle")},Keypad.prototype.getShuffleDuration=function(){return.8},Keypad.prototype.listIndexes=function(){
return this.indexes},Keypad.prototype.amountKeys=function(){return this.letters.length},Keypad.prototype.status=function(t){this.indexes.forEach(function(e){e.status(t)}.bind(this)),this.trigger("status",t),this.indexes=[]},Keypad.prototype.reset=function(){for(this.trigger("reset");0<this.indexes.length;)this.pop();this.freeFocus()},Keypad.prototype.move=function(e){if(e.selected){var t=1<=this.indexes.length&&this.indexes[this.indexes.length-1]===e;(2<=this.indexes.length&&this.indexes[this.indexes.length-2]===e||t&&this.controlType===Keypad.CONTROL_TYPES.CLICK)&&this.pop()}else this.push(e)},Keypad.prototype.push=function(e){this.indexes.push(e),e.select(),this.trigger("push",e)},Keypad.prototype.pop=function(){this.trigger("pop"),this.indexes.pop().unselect()},Keypad.prototype.setControlType=function(e){this.controlType=e,this.trigger("controlTypeChanged",e)},Keypad.prototype.submit=function(){this.stopped(),this.setControlType(Keypad.CONTROL_TYPES.UNDEFINED)},
Keypad.prototype.cancel=function(){this.reset(),this.setControlType(Keypad.CONTROL_TYPES.UNDEFINED)},Keypad.prototype.swipe=function(){this.controlType===Keypad.CONTROL_TYPES.UNDEFINED&&this.setControlType(Keypad.CONTROL_TYPES.MOVE)},Keypad.CONTROL_TYPES={MOVE:0,CLICK:1,UNDEFINED:2};var KeypadLetter=function(e,t,s){cleverapps.EventEmitter.call(this),this.symbol=e,this.index=t,this.keypad=s};KeypadLetter.prototype=Object.create(cleverapps.EventEmitter.prototype),(KeypadLetter.prototype.constructor=KeypadLetter).prototype.select=function(){this.selected=!0,this.trigger("select")},KeypadLetter.prototype.unselect=function(){this.selected=!1,this.trigger("unselect")},KeypadLetter.prototype.status=function(e){this.selected=!1,this.trigger("status",e)},KeypadLetter.prototype.shuffle=function(e){this.index=e,this.trigger("shuffle")},(KeypadView=cc.Node.extend({ctor:function(e){this._super(),this.keypad=e;var t=cleverapps.styles.KeypadView,s=cleverapps.UI.getSceneSize();this.setContentSize2(
s.width,t.height),this.setAnchorPoint2(),this.setPositionRound(s.width/2,this.height/2),this.radius=t.radius[this.keypad.letters.length]||t.radius.default,this.keypad.letters.forEach(function(e){this.addChild(new KeypadLetterView(e,this.radius))}.bind(this)),e.on("push",this.createListener(this.onPush.bind(this))),e.on("pop",this.createListener(this.onPop.bind(this))),e.on("showUp",this.createListener(this.onShowUp.bind(this))),e.on("tutorialStarted",this.createListener(function(e,t){this.tutorialWordLetters=e,this.drawTutorialWord(this.tutorialWordLetters,t)}.bind(this))),e.on("tutorialStopped",this.createListener(function(){this.tutorialWordLetters=!1,this.removeTutorialWord()}.bind(this))),e.on("status",this.createListener(function(e){this.pathNode.pathColor=KeypadView.COLOR_BY_STATUS[e],this.pathNode.animateFadeOut(300),e===WordGame.STATUSES.SHORT&&this.pathNode.reset()}.bind(this))),e.on("force",this.createListener(this.showForce.bind(this))),e.on("controlTypeChanged",
this.createListener(this.onChangeControlType.bind(this))),e.on("win",this.createListener(this.onWin.bind(this))),e.on("touchBegan",this.createListener(function(){this.removeTutorialWord(),this.shuffleButton.toggle(!1)}.bind(this))),e.on("shuffle",this.createListener(this.shuffle.bind(this))),cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&this.setScale(.85),this.addControls(),this.addShuffleButton(),this.pathNode=new cleverapps.Path(this.keypad.level.isHard()?cleverapps.styles.COLORS.PATH_HARD_COLOR:cleverapps.styles.COLORS.PATH_COLOR),this.addChild(this.pathNode),this.setVisible(!1),this.createBackground(),this.createSounds()},createSounds:function(){this.sounds=[];for(var e=0;bundles.game.urls["nota_"+e];)this.sounds.push(bundles.game.urls["nota_"+e]),e++},onPush:function(e){this.pathNode.stopAnimation(),this.pathNode.push(e.onLocateView().getPathPosition()),cleverapps.audio.playSound(this.sounds[(this.keypad.indexes.length-1)%this.sounds.length])},onPop:function(){
this.pathNode.stopAnimation(),this.pathNode.pop(),cleverapps.audio.playSound(this.sounds[this.keypad.indexes.length%this.sounds.length])},showForce:function(e){cleverapps.metha.compound(e,[function(e){cleverapps.forces.isAvailable(this,Forces.KEYPAD)?(this.shuffleButton.toggle(!1),cleverapps.forces.create(this,Forces.KEYPAD),cleverapps.forces.onceForceClosed=e):e()}.bind(this)])},onWin:function(e){this.runAction(new cc.Sequence(new cc.ScaleTo(.3,0).easing(cc.easeIn(2)),new cc.CallFunc(e)))},onShowUp:function(e,t){if(this.isVisible()||t)this.setVisible(!0),e();else{this.setVisible(!0);var s=this.getScale();this.setScale(0),this.runAction(new cc.Sequence(new cc.ScaleTo(.8,s).easing(cc.easeBounceOut()),new cc.CallFunc(function(){cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this)},this),e()}.bind(this))))}},
removeTutorialWord:function(){this.finger&&(this.finger.removeFromParent(!0),this.finger=!1)},drawTutorialWord:function(e,t){if(!this.finger){this.finger=new FingerView({pathColor:cleverapps.styles.COLORS.PATH_COLOR}),this.addChild(this.finger),this.finger.delay(1.2),this.finger.fadeIn(e[0].onLocateView().getPosition()),this.finger.press(),this.finger.delay(.2);for(var s=1;s<e.length;s++)this.finger.moveTo(e[s].onLocateView().getPosition());this.finger.unPress(),this.finger.fadeOut(),(t=t||{looped:!0}).callback&&(t.looped=!1,t.onFinish=function(){t.callback(),this.finger.removeFromParent(),delete this.finger}.bind(this)),this.finger.run(t)}},calcLetterTouched:function(e){for(var t=0;t<this.keypad.letters.length;t++){if(!this.keypad.letters[t].onLocateView()){var s=this.children.filter(function(e){return e instanceof KeypadLetterView});throw new Error("No letter view keypad.stopListeners: "+this.stopListeners+" letter.stopListener: "+(s[t]?s[t].stopListeners:"noView"
)+" gameOutcome: "+this.keypad.game.outcome+" viewsLength: "+s.length+" modelsLength: "+this.keypad.letters.length)}if(this.keypad.letters[t].onLocateView().isTouched(e))return this.keypad.letters[t]}},addControls:function(){var e=cleverapps.styles.KeypadView,t=1;cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL&&(t=e.controls.mobileScale);var s=bundles.buttons.frames.cancel_button_png||bundles.main.frames.button_png,n=bundles.buttons.frames.cancel_button_on_png||bundles.main.frames.button_on_png;"crocword"===cleverapps.config.name&&(s=bundles.controlbuttons.frames.back_button_png,n=bundles.controlbuttons.frames.back_button_on_png),this.cancelButton=new cleverapps.UI.Button({content:new cc.Sprite(bundles.game.frames.cancel_icon_png),button_png:s,button_on_png:n,onClicked:function(){this.keypad.cancel()}.bind(this),width:e.controls.width,height:e.controls.height}),this.cancelButton.baseScale=t,this.cancelButton.setScale(t),this.addChild(this.cancelButton),
this.cancelButton.setPositionRound(cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?e.controls.cancel.xMobile:e.controls.cancel.x,e.controls.cancel.y),s=bundles.buttons.frames.submit_button_png||bundles.main.frames.button_png,n=bundles.buttons.frames.submit_button_on_png||bundles.main.frames.button_on_png,"crocword"===cleverapps.config.name&&(s=bundles.controlbuttons.frames.button_png,n=bundles.controlbuttons.frames.button_on_png),this.submitButton=new cleverapps.UI.Button({content:new cc.Sprite(bundles.game.frames.submit_icon_png),button_png:s,button_on_png:n,onClicked:function(){this.keypad.submit()}.bind(this),width:e.controls.width,height:e.controls.height}),this.submitButton.baseScale=t,this.submitButton.setScale(t),this.addChild(this.submitButton),this.submitButton.setPositionRound(cleverapps.wideMode.mode===cleverapps.WideMode.VERTICAL?e.controls.submit.xMobile:e.controls.submit.x,e.controls.submit.y)},createBackground:function(){var e=cleverapps.styles.KeypadView;if(e.bg
){var t=new cc.Sprite(bundles.game.frames.keypad_bg_png);t.setScale((2*this.radius+e.bg.diameter)/t.width),this.addChild(t),t.setPositionRound(this.width/2,this.height/2),t.setLocalZOrder(-10)}},onChangeControlType:function(e){e===Keypad.CONTROL_TYPES.CLICK?(this.cancelButton.setVisible(!0),this.submitButton.setVisible(!0),this.cancelButton.setScale(0),this.cancelButton.runAction(new cc.ScaleTo(.2,this.cancelButton.baseScale)),this.submitButton.setScale(0),this.submitButton.runAction(new cc.ScaleTo(.2,this.submitButton.baseScale))):(this.cancelButton.setVisible(!1),this.submitButton.setVisible(!1)),this.shuffleButton.toggle(e===Keypad.CONTROL_TYPES.UNDEFINED)},addShuffleButton:function(){this.shuffleButton=new ShuffleButton(this.keypad),this.addChild(this.shuffleButton)},shuffle:function(){},onTouchBegan:function(e){return this.beginPoint=e.getLocation(),this.keypad.touchBegan(this.calcLetterTouched(e))},onTouchMoved:function(e){var t=cleverapps.styles.KeypadView,s=e.getLocation()
;Math.abs(s.x-this.beginPoint.x)+Math.abs(s.y-this.beginPoint.y)>t.moveEps&&this.keypad.swipe(),this.keypad.controlType===Keypad.CONTROL_TYPES.MOVE&&this.pathNode.draw(this.convertTouchToNodeSpace(e));var n=this.calcLetterTouched(e);n&&this.keypad.letterTouched(n)},onTouchEnded:function(e){this.pathNode.draw(),this.keypad.touchEnded()}})).COLOR_BY_STATUS={},KeypadView.COLOR_BY_STATUS[WordGame.STATUSES.BOARD]=new cc.Color(100,200,0,255),KeypadView.COLOR_BY_STATUS[WordGame.STATUSES.BOARD_FOUND]=new cc.Color(250,150,50,255),KeypadView.COLOR_BY_STATUS[WordGame.STATUSES.EXTRA]=new cc.Color(50,150,255,255),KeypadView.COLOR_BY_STATUS[WordGame.STATUSES.EXTRA_FOUND]=new cc.Color(250,150,50,255),KeypadView.COLOR_BY_STATUS[WordGame.STATUSES.WRONG]=new cc.Color(255,70,70,255),KeypadView.COLOR_BY_STATUS[WordGame.STATUSES.SHORT]=new cc.Color(255,70,70,255),cleverapps.styles.KeypadView={height:600,moveEps:30,radius:{default:215,3:160,4:170,5:185,6:200},controls:{width:180,height:120,mobileScale:1,
submit:{x:{align:"center",dx:400},xMobile:{align:"center",dx:300},y:{align:"bottom",dy:70}},cancel:{x:{align:"center",dx:-400},xMobile:{align:"center",dx:-300},y:{align:"bottom",dy:70}}}};var KeypadLetterView=cc.Node.extend({ctor:function(e,t){this._super(),this.letter=e,this.radius=t;var s=cleverapps.styles.KeypadLetterView;if(this.setAnchorPoint2(),this.setContentSize2(s),this.charView=new CharView(this.letter.symbol.toUpperCase(),{noBg:s.noBg,hard:this.letter.keypad.level.isHard(),bgImage:KeypadLetterView.bgImage}),this.addChild(this.charView),this.charView.setPositionRound(this.width/2,this.height/2),this.charView.setColor(KeypadLetterView.letterColor),KeypadLetterView.glowImage&&(this.glow=new cc.Sprite(this.letter.keypad.level.isHard()&&bundles.letters_glow.frames.letter_bg_hard_glow_png||KeypadLetterView.glowImage),this.addChild(this.glow),this.glow.setPositionRound(this.width/2,this.height/2),this.glow.setLocalZOrder(-1),this.glow.setOpacity(0),this.glow.setScale(s.glow.scale))
,this.setScale(s.scale),"wordsoup"===cleverapps.config.name){var n=[-4,4,0,-6,6];this.setRotation(n[this.letter.symbol.charCodeAt(0)%n.length])}this.baseRotation=this.getRotation(),this.baseScale=this.getScale(),this.letter.on("select",this.createListener(this.select.bind(this))),this.letter.on("unselect",this.createListener(this.unselect.bind(this))),this.letter.on("status",this.createListener(this.status.bind(this))),this.letter.on("shuffle",this.createListener(this.shuffle.bind(this))),this.letter.onLocateView=this.createListener(this.locateView.bind(this)),this.setCascadeOpacityEnabled(!0),this.setCascadeColorEnabled(!0),this.setPositionRound(this.calcPosition(this.letter.index))},locateView:function(){return this},select:function(){this.glow&&(this.glow.stopAllActions(),this.glow.runAction(new cc.FadeTo(.2,255))),"wordsoup"===cleverapps.config.name&&this.runAction(new cc.Spawn(new cc.ScaleTo(.2,this.baseScale+.2),new cc.RotateTo(.2,this.baseRotation-4)))},unselect:function(){
this.glow&&(this.glow.stopAllActions(),this.glow.setOpacity(255),this.glow.runAction(new cc.Sequence(new cc.DelayTime(.1),new cc.FadeTo(.3,0)))),"wordsoup"===cleverapps.config.name&&this.runAction(new cc.Spawn(new cc.ScaleTo(.2,this.baseScale),new cc.RotateTo(.2,this.baseRotation)))},status:function(e){var t=KeypadView.COLOR_BY_STATUS[e];this.charView.stopAllActions(),this.stopAllActions(),this.charView.runAction(new cc.TintTo(.2,t.r,t.g,t.b)),this.unselect(),e===WordGame.STATUSES.WRONG&&this.runAction(new cc.Sequence(new cc.MoveBy(.07,10,0),new cc.MoveBy(.06,-10,0),new cc.MoveBy(.05,10,0),new cc.MoveBy(.04,-10,0)));var s=.22;"wordsoup"===cleverapps.config.name&&(s=.4),this.runAction(new cc.Sequence(new cc.DelayTime(s),new cc.CallFunc(function(){this.charView.setColor(KeypadLetterView.letterColor),this.setScale(this.baseScale),this.setRotation(this.baseRotation)}.bind(this))))},isTouched:function(e){var t=cleverapps.styles.CharView.hitBox,s=this.convertTouchToNodeSpace(e);if(
"wordsoup"===cleverapps.config.name)return this.letter.selected?cc.rectContainsPoint(cc.rect(this.width/4,this.height/4,3*this.width/4,3*this.height/4),s):cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),s);var n=cc.p(this.x-this.parent.width/2,this.y-this.parent.height/2),i=Math.sqrt(n.x*n.x+n.y*n.y),o=cc.p(n.x/i,n.y/i),a=cc.p(this.width/2+o.x*t.offset,this.height/2+o.y*t.offset),r=t.radius;return(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y)<=r*r},shuffle:function(){for(var e=this.letter.keypad.letters.length,t=[],s=0;s<4;s++)t.push(this.calcPosition(cleverapps.Random.random(0,e-1)));t.push(this.calcPosition(this.letter.index)),this.runAction(new cc.Sequence(t.map(function(e){return e=cc.p(this.calculateCoordinate(e.x,"x",this.parent.width),this.calculateCoordinate(e.y,"y",this.parent.height)),new cc.MoveTo(this.letter.keypad.getShuffleDuration()/5,e)}.bind(this))))},calcPosition:function(e){var t=2*Math.PI/this.letter.keypad.letters.length*e;return{x:{align:"center",
dx:this.radius*Math.sin(t)},y:{align:"center",dy:this.radius*Math.cos(t)}}},getPathPosition:function(){var e=2*Math.PI/this.letter.keypad.letters.length*this.letter.index;return cc.p(this.parent.width/2+.9*this.radius*Math.sin(e),this.parent.height/2+.9*this.radius*Math.cos(e))}});KeypadLetterView.letterColor=cleverapps.styles.COLORS.WHITE,KeypadLetterView.glowImage=bundles.game.frames.letter_bg_glow_png,cleverapps.styles.KeypadLetterView={width:90,height:90,scale:1,glow:{scale:1}};var ShuffleButton=cleverapps.UI.Button.extend({ctor:function(e){this.keypad=e,levels.tutorial.onStartedListener=this.createListener(this.hide.bind(this)),levels.tutorial.onFinishedListener=this.createListener(this.show.bind(this)),this._super({button_png:bundles.game.frames.shuffle_png,button_on_png:bundles.game.frames.shuffle_on_png,onClicked:this.onClicked.bind(this)}),this.setPositionRound(cleverapps.styles.ShuffleButton)},onClicked:function(){this.keypad.shuffle(),cleverapps.audio.playSound(
bundles.game.urls.shuffle_effect)},hide:function(){this.toggle(!1),this._hidden=!0},show:function(){this._hidden=!1,this.toggle(!1)},toggle:function(e){cleverapps.config.wysiwygMode||this._hidden||(this.setVisible(e),e?this.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.FadeTo(.2,255))):this.setOpacity(0))}});cleverapps.styles.ShuffleButton={x:{align:"center"},y:{align:"center"}};var Booster=function(e){this.game=e,this.onForceListener=function(){},this.onToggleArrowListener=function(){},this.onToggleTintListener=function(){},this.onExecuteListener=function(){},this.alarm=new Alarm,this.alarm.onChangeListeners.tint=this.toggleTint.bind(this),this.alarm.onChangeListeners.arrow=this.toggleArrow.bind(this),this.isForceAvailable()&&this.game.userStatus.on("inactive_long",this.showForce.bind(this))};Booster.prototype.clear=function(){this.alarm.clear()},Booster.prototype.onUserActive=function(){this.stopHint()},Booster.prototype.clearAlarmTimeout=function(){this.alarmTimeout&&(
clearTimeout(this.alarmTimeout),this.alarmTimeout=void 0)},Booster.prototype.startHint=function(e){e&&(this.manualAlarm=!0),this.alarm.start("hint",1),this.clearAlarmTimeout()},Booster.prototype.stopHint=function(){this.manualAlarm=!1,this.alarm.stop("hint"),this.clearAlarmTimeout()},Booster.prototype.onUserInactive=function(){this.manualAlarm||(this.startHint(),this.alarmTimeout=setTimeout(this.stopHint.bind(this),cleverapps.parseInterval(Booster.StopAlarmTimeout)))},Booster.prototype.toggleTint=function(){this.onToggleTintListener(this.alarm.isOn())},Booster.prototype.toggleArrow=function(){this.onToggleArrowListener(1<=this.alarm.priority)},Booster.prototype.showForce=function(){return this.onForceListener()},Booster.prototype.isForceAvailable=function(){return!cleverapps.forces.isShown(this.getForce().id)},Booster.prototype.onPressed=function(e){if(this.game.outcome===GameBase.OUTCOME_UNKNOWN)if(this.game.counter.isActive())e();else if(this.canExecute())this.execute(),e();else{if(
cleverapps.flags.nopayments)return cleverapps.Notification.create("messages:NotEnoughCoins"),void e();cleverapps.metha.compound(e,[function(e){cleverapps.metha.showControlsWhileFocused("MenuBarGoldItem"),new HardCurrencyShopWindow,cleverapps.metha.onceNoWindowsListener=e},function(e){this.canExecute()&&setTimeout(function(){this.execute()}.bind(this),400),e()}.bind(this)])}else e()},Booster.prototype.canExecute=function(){return cleverapps.boostersCounter.canUse(this.getId())||levels.user.canTakeGold(this.getPrice())},Booster.prototype.execute=function(e){var t=this.getPrice();!cleverapps.boostersCounter.canUse(this.getId())&&levels.user.canTakeGold(t)&&(levels.user.takeGold(t),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTERS_BOUGHT,{amount:1}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTERS_BOUGHT_ITEM,{id:this.getId(),amount:1}),cleverapps.boostersCounter.add(this.getId(),1)),this.onExecute(e),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.HINT_USED,{
amount:this.getPrice()}),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTERS_EXECUTE),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.BOOSTERS_EXECUTE+"_"+this.getId()),cleverapps.boostersCounter.use(this.getId()),this.onExecuteListener()},Booster.prototype.getAmount=function(){return cleverapps.boostersCounter.getAmount(this.getId())},Booster.StopAlarmTimeout="5 seconds";var HintBooster=function(t){Booster.call(this,t),t.userStatus.on("inactive_long",this.onUserInactive.bind(this)),t.userStatus.on("active",this.onUserActive.bind(this)),this.isForceAvailable()&&(t.on("WrongWord_Booster",this.showForce.bind(this)),t.on("DiscoveredWord",function(){var e=t.board.countDiscoveredWords();1<e&&e<t.board.words.length&&this.showForce()}.bind(this)))};HintBooster.prototype=Object.create(Booster.prototype),(HintBooster.prototype.constructor=HintBooster).prototype.findHint=function(){return"stacks"===cleverapps.config.subtype?this.game.keypad.selectHintPosition(
):this.game.board.selectHintPosition()},HintBooster.prototype.addHint=function(e,t){if(-1===["scramble","wordheaps"].indexOf(cleverapps.config.name))return this.game.board.addHint(e.row,e.column),void this.game.counter.trigger();t=t||{};if(e.letter){e.letter.setHint(!0,{hintAnimationDuration:t.hintAnimationDuration||.3,startPos:t.startPos});var s=this.game.board.wordIndexes[e.word][e.index];this.game.counter.setTimeout(function(){this.game.board.addHint(s[0],s[1])}.bind(this),300)}},HintBooster.prototype.onExecute=function(){var e=this.findHint();e&&(levels.gameHints.addHint(),this.addHint(e))},HintBooster.prototype.getId=function(){return HintBooster.ID},HintBooster.prototype.getPrice=function(){return"stacks"===cleverapps.config.subtype?150:50},HintBooster.prototype.getForce=function(){return Forces.FREE_HINT_FORCE},HintBooster.prototype.isForceAvailable=function(){return!cleverapps.forces.isShown(this.getForce().id)&&cleverapps.user.checkAvailable(HintBooster.FORCE_AVAILABLE)},
HintBooster.IsAvailable=function(){return levels.user.checkAvailable(HintBooster.AVAILABLE)},HintBooster.AVAILABLE={level:1,olympics:{level:2}},HintBooster.FORCE_AVAILABLE={stacks:{episode:0,level:6}},HintBooster.ID=3,cleverapps.UI.flyHintAnimation=function(s,n){var i=cc.director.getRunningScene().scene,o=(n=n||{},new cleverapps.Spine(bundles.game.jsons.hint_json));o.setAnimation(0,"animation",!1),o.setCompleteListener(function(){o.setAnimation(0,"idle",!1),o.setCompleteListenerRemove()}.bind(this)),i.addChild(o);var e,t=o.getRelativeCoordinates(s);n.startPosition?e=n.startPosition:((e=o.getRelativeCoordinates(n.start?n.start:cleverapps.styles.HintButtonBooster.target)).x+=cleverapps.styles.flyHintAnimation.startDelta.dx,e.y+=cleverapps.styles.flyHintAnimation.startDelta.dy);var a=n.duration||.3;o.setLocalZOrder(10),o.setPositionRound(e),o.setRotation(180*Math.atan2(t.x-e.x,t.y-e.y)/Math.PI),o.runAction(new cc.Sequence(new cc.MoveTo(a,t),new cc.CallFunc(function(){if(
n.changeParentToTarget){for(var e=1,t=s;t&&t!==i;)e*=t.getScale(),t=t.getParent();o.replaceParentSamePlace(s),o.setScale(1/e)}}))),n.callback&&setTimeout(n.callback,a),cleverapps.audio.playSound(bundles.game.urls.hint_effect)},cleverapps.styles.flyHintAnimation={startDelta:{dx:0,dy:30}},Gun.prototype.onExecute=function(e){e=e||function(){},this.attack(),Game.currentGame&&Game.currentGame.userStatus.reportUserAction();var t=Game.currentGame.board.getEmptyPositions();t=cleverapps.shuffle(t).slice(0,Math.ceil(t.length*Gun.OPEN)),setTimeout(function(){Game.currentGame&&Game.currentGame.board?Game.currentGame.board.onActivateGunListener(t,function(){Game.currentGame&&Game.currentGame.board&&(t.forEach(function(e){Game.currentGame.board.addHint(e.row,e.column)}),Game.currentGame.counter.trigger(),this.setAmount(this.getAmount()-1),this.save()),e()}.bind(this)):e(),this.resetState()}.bind(this),this.executeDuration())},Gun.prototype.executeDuration=function(){
return"crocword"===cleverapps.config.name?200:"olympics"===cleverapps.config.name?500:"scramble"===cleverapps.config.name?500:"wordheaps"===cleverapps.config.name?100:1200},Gun.prototype.discovery=function(e){e===WordGame.STATUSES.BOARD&&this.state===Gun.STATE_SHOW_UP&&cleverapps.gun.onDiscoveryListener()},Gun.OPEN=.5;var ExtraWindow=Window.extend({onWindowLoaded:function(e){if(this.extra=e,this._super({title:{text:"messages:ExtraWindow.title",font:cleverapps.styles.FONTS.EXTRA_WINDOW_TITLE_TEXT},name:"extrawindow",help:function(){new ExtraRulesWindow},content:this.getContent(),styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.ExtraWindow.window,!0)}),"scramble"===cleverapps.config.name){var t=cleverapps.styles.ExtraWindow,s=new cleverapps.Spine(bundles.extrawindow.jsons.extra_json);this.window.addChild(s),s.setPositionRound(t.titleAnimation),s.setAnimation(0,"animation",!0)}cleverapps.audio.playSound(bundles.main.urls.window_effect)},addTitleBg:function(e){
this._super(e),e=cleverapps.styles.ExtraWindow.window.Title,this.window.titleText.x=this.window.width/2-e.offsetX*this.titleBg.scale,this.window.titleText.fitTo(e.availableWidth*this.titleBg.scale)},getContent:function(){var e=cleverapps.styles.ExtraWindow,t=this.extra.foundList.slice().sort(function(e,t){return t.length-e.length}),s=[];if(s.push(this.addCookieJarInfo(e.list.width)),0===t.length){var n=new cc.Node;n.setAnchorPoint2(),n.setContentSize2(e.noWordsText);var i=cleverapps.UI.generateOnlyText("messages:ExtraWindow.noWordsText",cleverapps.styles.FONTS.EXTRA_WINDOW_NO_WORDS_TEXT);n.addChild(i),i.setDimensions(e.noWordsText.width,0),i.fitTo(void 0,e.noWordsText.height),i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setPositionRound(n.width/2,n.height/2),s.push(n)}else{var o=new WordsListComponent({words:t,width:e.list.width,height:e.list.height}),a=cleverapps.UI.generateOnlyText("messages:ExtraWindow.foundWord",cleverapps.styles.FONTS.EXTRA_WINDOW_FOUND_WORDS_TEXT)
;a.setDimensions(e.infoTextWidth,0),a.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.push(new cleverapps.Layout([o,a],{direction:cleverapps.UI.VERTICAL,margin:e.infoTextMargin}))}return new cleverapps.Layout(s,{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding})},addCookieJarInfo:function(e){var t=cleverapps.styles.ExtraWindow,s=cleverapps.UI.generateOnlyText("messages:ExtraWindow.info",cleverapps.styles.FONTS.EXTRA_WINDOW_TEXT,{cookiesToReward:cleverapps.CookieJar.COOKIES_TO_REWARD_GOAL});s.setDimensions(t.infoTextWidth,0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER);var n=new cc.Node;n.setAnchorPoint2(),n.setContentSize(e,t.barHeight);var i=cleverapps.UI.createScale9Sprite(bundles.extrawindow.frames.progress_bar_bg);i.setContentSize2(t.barBg.size),i.setPositionRound(t.barBg),n.addChild(i);var o=levels.cookieJar.getCounterValue(),a=new ScaledProgressBar(bundles.extrawindow.frames.progress_bar);a.setPercentage(
o/cleverapps.CookieJar.COOKIES_TO_REWARD_GOAL*100),a.setDimension(t.bar.size),a.setPositionRound(t.bar),n.addChild(a);var r=new cc.Node;r.setAnchorPoint2(),r.setContentSize2(t.prize),n.addChild(r),r.setPositionRound(t.prize);var l=new cleverapps.Spine(bundles.extrawindow.jsons.present_json,t.prize.scale);l.setSkin("blue"),l.setAnimation(0,"animation",!0),r.addChild(l),l.setPositionRound(r.width/2,r.height/2);var c=cleverapps.UI.generateOnlyText("messages:ExtraWindow.rewardTooltip",cleverapps.styles.FONTS.TOOLTIP_TEXT,{reward:cleverapps.CookieJar.FULL_REWARD}),p=new cc.Sprite(bundles.game.frames.coin_png);p.setScale(.7);var d=new cleverapps.Layout([c,p],{direction:cleverapps.UI.HORIZONTAL,margin:t.tooltip.margin});p.y+=t.tooltip.iconOffsetY,cleverapps.tooltipManager.create(r,{content:d,position:cleverapps.styles.UI.Tooltip.LOCATION.below,size:cleverapps.styles.UI.Tooltip.SIZE.short});var u=cleverapps.UI.generateImageText(o+"/"+cleverapps.CookieJar.COOKIES_TO_REWARD_GOAL,
cleverapps.styles.FONTS.COOKIE_JAR_PROGRESS_BAR_TEXT);return u.setPosition(e/2,t.progressText.y),n.addChild(u),new cleverapps.Layout([s,n],{direction:cleverapps.UI.VERTICAL,margin:t.bar.margin})},listBundles:function(){return["extrawindow"]}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{COOKIE_JAR_PROGRESS_BAR_TEXT:{name:"default",size:35},EXTRA_WINDOW_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},EXTRA_WINDOW_TITLE_TEXT:{size:63,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},EXTRA_WINDOW_NO_WORDS_TEXT:{size:35,color:cleverapps.styles.COLORS.COLOR_BROWN},EXTRA_WINDOW_FOUND_WORDS_TEXT:{size:35,color:cleverapps.styles.COLORS.COLOR_BROWN}}),cleverapps.styles.ExtraWindow={margin:20,list:{height:306,width:670},tooltip:{margin:5,iconOffsetY:2},barHeight:78,barBg:{size:{width:540,height:52},x:{align:"center"},y:40},bar:{size:{width:540,height:40},margin:0,x:68,y:20},prize:{x:{align:"right",dx:100},y:{align:"center",dy:5},width:80,
height:80,scale:.5},progressText:{y:40},infoTextWidth:650,infoTextMargin:20,padding:{x:0,y:0},noWordsText:{x:{align:"center"},y:{align:"center"},width:400,height:200},window:{Border:{x:50,y:55},contentOffset:-130,Title:{offsetX:90,offsetY:120,availableWidth:400,bg:{adjustToWindow:{width:-70},image:bundles.extrawindow.frames.extra_words_banner_png,x:{align:"center"},y:{align:"top",dy:30},scale9:!1}},HelpButton:{x:{align:"left",dx:-5},y:{align:"top",dy:5}}}};var ExtraRulesWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.ExtraRulesWindow,t=[this.createAnimation(),this.createText()].filter(function(e){return e}),s=this.content=new cleverapps.Layout(t,{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding});this._super({title:e.prefix+"Title",name:"ExtraRulesWindow",content:s,button:{width:e.button.width,height:e.button.height,text:Messages.get("OK"),onPressed:this.onPressed.bind(this)}})},createAnimation:function(){
var e=cleverapps.styles.ExtraRulesWindow.animation;if(e){var t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e.width,e.height);var s=new cleverapps.Spine(bundles.hero.jsons.hero_json,e.scale);return s.setAnimation(0,e.name||"idle",!0),s.setPositionRound(t.width/2+e.x,t.height/2+e.y),t.addChild(s),t}},createText:function(){var e=cleverapps.styles.ExtraRulesWindow,t=cleverapps.UI.generateTTFText(e.prefix+"text2",cleverapps.styles.FONTS.EXTRA_RULES_WINDOW_TEXT,{comboRewardLevel:cleverapps.Combo.COMBO_LEVEL_WITH_PRIZE,availableLevel:cleverapps.humanReadableNumber(cleverapps.Combo.AVAILABLE.episode,cleverapps.Combo.AVAILABLE.level),limit:cleverapps.parseInterval(cleverapps.Combo.TOTAL_TIMEOUT)/1e3});return t.setDimensions(e.text.width,0),t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setAnchorPoint2(),t},onPressed:function(){this.close()}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{EXTRA_RULES_WINDOW_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN}}),
cleverapps.styles.ExtraRulesWindow={prefix:"messages:ExtraRulesWindow.",animation:{width:200,height:320,x:0,y:-20,scale:.75},text:{width:640},button:{width:250,height:100},margin:60,padding:{x:0,y:30}},TournamentBookChangeView.prototype.animateChange=function(e){e&&this.runAction(new cc.Sequence(new cc.DelayTime(1.5),new cc.CallFunc(function(){this.setVisible(!0);var e="animation1";this.options.isFinished&&(e+="_win"),this.animation.setAnimation(0,e,!1),this.runAction(new cc.Sequence(new cc.DelayTime(1.5),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.tournament_book_change_effect)})))}.bind(this)),new cc.DelayTime(2.5),new cc.CallFunc(function(){cleverapps.UI.animateDelta(e,{x:this.width/2,y:this.height/2+cleverapps.styles.TournamentBookChangeView.delta.y,icon:bundles.main.frames.treasure_search_sticker_png,font:cleverapps.styles.FONTS.TOURNAMENT_BOOK_CHANGE_TEXT,parent:this})}.bind(this))))},cleverapps.overrideFonts(cleverapps.styles.FONTS,{
TOURNAMENT_BOOK_CHANGE_TEXT:{color:cleverapps.styles.COLORS.COLOR_BROWN,size:50}}),cleverapps.overrideStyles(cleverapps.styles.TournamentBookChangeView,{delta:{y:100}}),BoostersSaleWindow.prototype.addBalloons=function(){},cleverapps.overrideStyles(cleverapps.styles.BoostersSaleWindow,{label:{y:{align:"bottom",dy:-15}},title:{ribbonTitle:{width:600,height:150,y:-25}},row:{bg:bundles.tile_shop.frames.shop_tile_bg_png},icons:{bg:!1},progressBar:{width:336,amount:{y:{align:"center",dy:-5},x:{align:"center"}},bar:{lines:!1,height:48,width:330,x:3,y:2},text:{width:350},prizeMargin:7},badge:!1}),FavoriteSaleWindow.prototype.addBottomAnimation=function(){},FavoriteSaleWindow.prototype._getContentSuper=FavoriteSaleWindow.prototype.getContent,FavoriteSaleWindow.prototype.getContent=function(){var e=this._getContentSuper.apply(this,arguments),t=this.getStyles(),s=this.createInfoText();return s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),e=new cleverapps.Layout([e,s],{
direction:cleverapps.UI.VERTICAL,margin:t.margin})},cleverapps.overrideFonts(cleverapps.styles.FONTS,{FAVORITE_SALE_TIMER_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE}}),cleverapps.overrideStyles(cleverapps.styles.FavoriteSaleWindow,{tilesMargin:20,plus:{scale:.6},icon:{light:{json:bundles.main.jsons.reward_spine_json,scale:.8}},bottom:{animation:"idle",json:bundles.hero.jsons.hero_json,scale:.8,text:{width:600},offset:{y:-35}},badge:{text:{x:{align:"center",dx:-10},y:{align:"center",dy:30}}},rewards:{iconHeight:140,direction:cleverapps.UI.VERTICAL},timer:{scaleWithRewards:!1},button:{button_png:bundles.main.frames.green_button_png,button_on_png:bundles.main.frames.green_button_on_png},window:{contentOffset:30,bgOffset:{y:0}}}),MissionRulesWindow.prototype._customize=MissionRulesWindow.prototype.customize,MissionRulesWindow.prototype.customize=function(){this._customize(),this.content.setLocalZOrder(2)},MissionRulesWindow.prototype.listBundles=function(e){return[
e.getWindowBundleName()]},cleverapps.overrideStyles(cleverapps.styles.MissionRulesWindow,{LetterTournament:{text1:{y:460},text2:{y:160},collectImage:{y:330,images:[{image:bundles.main.frames.mission_letter_png,scale:.5},{image:bundles.main.frames.mission_letter_png,scale:.75},{image:bundles.main.frames.mission_letter_png,scale:1},{image:bundles.main.frames.mission_letter_png,scale:.75},{image:bundles.main.frames.mission_letter_png,scale:.5}],margin:6}}}),cleverapps.BonusRoundChest=function(e){cleverapps.config.debugMode&&(cleverapps.BonusRoundChest.TIMEOUT="2 minutes",cleverapps.BonusRoundChest.DURATION=cleverapps.parseInterval("1 minute")),cleverapps.DailyChest.call(this,{isNewUser:e,interval:cleverapps.parseInterval(cleverapps.BonusRoundChest.TIMEOUT),serverTaskName:"bonusgames",storage:cleverapps.DataLoaderTypes.BONUS_GAME_CHEST})},cleverapps.BonusRoundChest.prototype=Object.create(cleverapps.DailyChest.prototype),
cleverapps.BonusRoundChest.prototype.constructor=cleverapps.BonusRoundChest,cleverapps.BonusRoundChest.prototype.isActive=function(){return cleverapps.BonusRoundChest.IsAvailable()&&!this.locked},cleverapps.BonusRoundChest.prototype.resetUnlockCountdown=function(){cleverapps.DailyChest.prototype.resetUnlockCountdown.call(this),cleverapps.localPushes.sendPush(cleverapps.LocalPushes.TYPES.BONUS_ROUND,this.when-Date.now())},cleverapps.BonusRoundChest.prototype.start=function(e){new Episode(Episode.Types.BONUSROUNDS,this.getRandomLevelNo()).getLevel().play(e),cleverapps.dailyTasks.addProgress(cleverapps.DailyTasks.PLAY_BONUS_ROUND)},cleverapps.BonusRoundChest.prototype.getRandomLevelNo=function(){var e=bundles[Episode.BundleId(Episode.Types.BONUSROUNDS)];return Math.floor(Math.random()*e.levelsAmount)},cleverapps.BonusRoundChest.prototype.open=function(e){cleverapps.DailyChest.prototype.open.call(this),this.start(e)},cleverapps.BonusRoundChest.IsAvailable=function(){
return levels.user.checkAvailable(cleverapps.Availables.BONUS_ROUND)},cleverapps.BonusRoundChest.TIMEOUT="1 day",cleverapps.BonusRoundChest.DURATION=cleverapps.parseInterval("5 minutes"),cleverapps.BonusRoundChest.REWARD=10;var BonusRoundCountDown=function(){cleverapps.CountDown.call(this,cleverapps.BonusRoundChest.DURATION,{onFinish:function(){Game.currentGame.setOutcome(GameBase.OUTCOME_LOST)}})};BonusRoundCountDown.prototype=Object.create(cleverapps.CountDown.prototype),BonusRoundCountDown.prototype.constructor=BonusRoundCountDown;var BonusRoundWindow=Window.extend({onWindowLoaded:function(e){var t=cleverapps.styles.BonusRoundWindow;this.game=e,this._super({title:this.getTitle(),name:"bonusroundwindow",content:this.getContent(),button:{text:Messages.get("OK"),width:t.button.width,height:t.button.height,onPressed:function(){this.close()}.bind(this)}}),this.game.outcome!==GameBase.OUTCOME_VICTORY&&bundles.game.urls.bonusround_window_lose_effect?cleverapps.audio.playSound(
bundles.game.urls.bonusround_window_lose_effect):cleverapps.audio.playSound(bundles.game.urls.bonusround_window_effect)},getTitle:function(){return this.game.outcome===GameBase.OUTCOME_LOST?"messages:BonusRoundWindow.Title.Lost":this.game.outcome===GameBase.OUTCOME_VICTORY?"messages:BonusRoundWindow.Title.Victory":void 0},getContent:function(){var e=cleverapps.styles.BonusRoundWindow,t=[],s=this.createAnimation();s&&t.push(s),e.icon&&t.push(new cc.Sprite(e.icon));var n=new cleverapps.Layout(t,{direction:cleverapps.UI.HORIZONTAL,margin:2*e.contentObjectsMargin}),i=this.createText();return new cleverapps.Layout([n,i],{direction:cleverapps.UI.VERTICAL,margin:e.contentObjectsMargin,padding:{x:0,y:e.contentObjectsMargin}})},createText:function(){var e,t=cleverapps.styles.BonusRoundWindow,s=this.game.collectedCoins;this.game.outcome===GameBase.OUTCOME_LOST?e="messages:BonusRoundWindow.Info.Lost":this.game.outcome===GameBase.OUTCOME_VICTORY&&(e="messages:BonusRoundWindow.Info.Victory",
s+=this.game.rewards[GameBase.REWARD_GOLD]);var n=cleverapps.UI.generateTTFText(e,cleverapps.styles.FONTS.SMALL_TEXT_BROWN);n.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),n.setDimensions(cc.size(t.textWidth,0));var i=cleverapps.UI.generateTTFText("messages:BonusRoundWindow.GoldCollected",cleverapps.styles.FONTS.SMALL_TEXT_BROWN,{coins:s});return i.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),i.setDimensions(cc.size(t.textWidth,0)),new cleverapps.Layout([i,n],{direction:cleverapps.UI.VERTICAL,margin:t.textMargin})},createAnimation:function(){var e=bundles.bonus_round_window.jsons.bonus_round_json||bundles.hero.jsons.hero_json;if(e){var t=cleverapps.styles.BonusRoundWindow,s=new cc.Node;s.setAnchorPoint2(),s.setContentSize(t.size);var n=new cleverapps.Spine(e,t.scale);return n.setAnimation(0,t.animation.name||"idle",!0),s.addChild(n),n.setPositionRound(s.width/2+t.animation.dx,s.height/2+t.animation.dy),s}},listBundles:function(){return["bonus_round_window"]}})
;cleverapps.styles.BonusRoundWindow={enabled:!0,contentObjectsMargin:30,textWidth:510,textMargin:3,size:{width:150,height:250},scale:.6,button:{},animation:{dx:15,dy:-30},icon:bundles.windows.frames.bonusround_icon_png};var Cryptex=function(e){this.onAttempt=function(){},this.onOpen=function(){},this.onFail=function(){},this.onStop=function(){},this.onShowForceListener=function(){},this.running=!0,this.opened=!1,this.needAttempts=Cryptex.ATTEMPTS,"board"===cleverapps.config.type&&(this.needAttempts-=Object.keys(e.board.foundWordsSet).length);var t=e.timer.getStartTime()+cleverapps.parseInterval(Cryptex.TIMEOUT)-Date.now();this.countdown=new cleverapps.CountDown(t),this.countdown.onFinish=this.timerFinish.bind(this)};Cryptex.IsNeeded=function(e){return!cleverapps.flags.cryptexDisabled&&(!!cleverapps.user.checkAvailable(Cryptex.AVAILABLE)&&(!e.level.episode.isBonusRound()&&(!(e.totalItemsToSolve()<=Cryptex.ATTEMPTS||Cryptex.ATTEMPTS<=e.countDiscovered())&&e.timer.getStartTime(
)+cleverapps.parseInterval(Cryptex.TIMEOUT)>Date.now())))},Cryptex.prototype.timerFinish=function(){cleverapps.eventLogger.logEvent(cleverapps.EVENTS.CRYPTEX_FAIL),this.onFail(),this.stop()},Cryptex.prototype.isOpen=function(){return this.opened},Cryptex.prototype.attempt=function(){this.running&&(this.needAttempts--,0===this.needAttempts?(this.opened=!0,this.stop(),this.open()):this.onAttempt())},Cryptex.prototype.open=function(){this.onStop(),this.onOpen(),setTimeout(function(){this.opened=!1,cleverapps.eventLogger.logEvent(cleverapps.EVENTS.CRYPTEX_REWARD),cleverapps.user.setGold(cleverapps.user.gold+Cryptex.GOLD_REWARD)}.bind(this),3e3)},Cryptex.prototype.canShowForce=function(){return!cleverapps.forces.isShown(Forces.CRYPTEX.id)&&this.running},Cryptex.prototype.showForce=function(){cleverapps.metha.display({focus:"CryptexForce",control:"MenuBarCryptexItem",actions:[function(e){setTimeout(e,500)},function(e){this.onShowForceListener(),cleverapps.forces.onceForceClosed=e}.bind(this)
]})},Cryptex.prototype.stop=function(){this.running&&(this.countdown&&this.countdown.stop(),this.running=!1,this.isOpen()||this.onStop())},Cryptex.ATTEMPTS=4,Cryptex.GOLD_REWARD=30,Cryptex.TIMEOUT="4 minute",cleverapps.config.debugMode&&(Cryptex.ATTEMPTS=4,Cryptex.TIMEOUT="2 minute"),Cryptex.AVAILABLE={episode:3,level:1};var CryptexView=cc.Node.extend({ctor:function(e){this._super(),this.cryptex=e,this.setAnchorPoint2(),this.setVisible(!1);var t=cleverapps.styles.CryptexView;this.setPositionRound(t.position),this.animation=new cleverapps.Spine(bundles.cryptex.jsons.cryptex_json),this.addChild(this.animation),this.cryptex.onAttempt=this.createListener(this.onAttempt.bind(this)),this.cryptex.onFail=this.createListener(this.onFail.bind(this)),this.cryptex.onOpen=this.createListener(this.onOpen.bind(this))},cryptexAnimation:function(e,t){this.setVisible(!0),this.animation.setCompleteListener(function(){this.setVisible(!1),t&&t()}.bind(this)),this.animation.setAnimation(0,e,!1)},
onAttempt:function(){this.cryptexAnimation("attempt"),cleverapps.audio.playSound(bundles.game.urls.cryptex_attempt_effect)},onFail:function(){this.cryptexAnimation("fail"),cleverapps.audio.playSound(bundles.game.urls.cryptex_fail_effect)},onOpen:function(e){this.cryptexAnimation("open",e),cleverapps.audio.playSound(bundles.game.urls.cryptex_open_effect);var t=cleverapps.styles.CryptexView.rewardView,s=cc.director.getRunningScene().scene,n=new CoinsRewardView(t);s.addChild(n),n.setPositionRound(this.x+t.offsetX,this.y+t.offsetY),n.setVisible(!1),n.runAction(new cc.Sequence(new cc.DelayTime(2),new cc.Show,new cc.CallFunc(function(){n.collectCoins(Cryptex.GOLD_REWARD)})))}});cleverapps.styles.CryptexView={position:{x:{align:"center",dx:0},y:{align:"top",dy:-220}},rewardView:{offsetX:-10,offsetY:5,coins:[{radiusX:40,radiusY:40,count:8,scale:.4},{radiusX:15,radiusY:15,count:3,scale:.4}]}};var CryptexWindow=Window.extend({onWindowLoaded:function(){var e=cleverapps.styles.CryptexWindow,
t=cleverapps.UI.generateTTFText("messages:cryptexWindow.text",cleverapps.styles.FONTS.WINDOW_TEXT,{wordsCount:Cryptex.ATTEMPTS,maxTime:Math.floor(cleverapps.parseInterval(Cryptex.TIMEOUT)/6e4)});t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),t.setDimensions(e.width,0);var s=cleverapps.UI.generateTTFText("messages:cryptexWindow.textProgress",cleverapps.styles.FONTS.WINDOW_TEXT,{openedCount:Game.currentGame.countDiscovered(),wordsCount:Cryptex.ATTEMPTS});s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),s.setDimensions(e.width,0);var n=new cc.Node;n.setAnchorPoint2(),n.setContentSize2(e.animation);var i=new cleverapps.Spine(bundles.cryptex.jsons.cryptex_json);i.setAnimation(0,"idle",!0),i.setPosition(n.width/2,n.height/2),n.addChild(i);var o=new cleverapps.Layout([s,t,n],{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding});this._super({content:o,title:"messages:cryptexWindow.title",name:"cryptexwindow",button:{text:Messages.get("OK"),width:e.button.width},
closeButton:!1}),cleverapps.audio.playSound(bundles.main.urls.window_effect)}});cleverapps.styles.CryptexWindow={width:550,margin:30,padding:{x:0,y:20},animation:{width:200,height:300},button:{width:200}};var SimpleMainScene=MainScene.extend({ctor:function(){this._super();var e=this.playButton=new PlayButtonView;this.scene.addChild(e),e.addFingerTip(),this.scene.addChild(new ProgressView),cleverapps.knockoutTutorial&&(cleverapps.knockoutTutorial.onPlayButtonForceListener=this.createListener(this.showPlayButtonForce.bind(this)))},showPlayButtonForce:function(e){this.playButton.show(!0),cleverapps.forces.isAvailable(this.playButton,Forces.METHA_PLAY_BUTTON)?(cleverapps.forces.create(this.playButton,Forces.METHA_PLAY_BUTTON),cleverapps.forces.onceForceClosed=e):e()},getBackgroundStyles:function(){return{background:bundles["simple_background_"+cleverapps.simple.getCurrent()].urls.background}}});SimpleMainScene.BUNDLES=function(){return["simple_background_"+cleverapps.simple.getCurrent(),
"merge"]};var Simple=function(){for(cleverapps.EventEmitter.call(this),this.stars=0,this.current=0,this.pendingsStars=0,this.bgsAmount=0;bundles["simple_background_"+this.bgsAmount];)this.bgsAmount++;"differences"===cleverapps.config.name&&(this.knockoutGame=new KnockoutGame),this.load()};Simple.prototype=Object.create(cleverapps.EventEmitter.prototype),(Simple.prototype.constructor=Simple).prototype.earnStars=function(e,t){this.stars+=e,t||(this.pendingsStars+=e),this.save(),this.trigger("changeStars")},Simple.prototype.getCurrent=function(){return this.isPassedAll()?this.bgsAmount-1:this.current},Simple.prototype.isPassedAll=function(){return this.current>=this.bgsAmount-1},Simple.prototype.canMoveNext=function(){return this.stars>=this.getRequiredStars()&&this.current<this.bgsAmount-1},Simple.prototype.moveNext=function(e){var t="simple_background_"+(this.current+1);cleverapps.bundleLoader.loadBundle(t),cleverapps.metha.compound(e,[function(e){setTimeout(e,500)},function(e){
cleverapps.metha.hideControlsWhileFocused("play_button"),cleverapps.metha.hideControlsWhileFocused("progress_view");var t=this.current,s=this.stars;this.current++,this.stars=0,this.save(),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.SIMPLE_METHA_BACKGROUND),new BackgroundsWindow({moveNext:!0,current:t,stars:s}),cleverapps.metha.onceNoWindowsListener=e}.bind(this),function(e){new RewardWindow({reward:Simple.CalcReward()}),cleverapps.metha.onceNoWindowsListener=e}.bind(this),function(e){cleverapps.scenes.replaceScene(new SimpleMainScene,e),cleverapps.bundleLoader.deleteBundle(t)}.bind(this)])},Simple.prototype.updateProgress=function(e){this.trigger("updateProgress",this.pendingsStars),e&&setTimeout(e,1e3*this.pendingsStars+1300),this.pendingsStars=0},Simple.prototype.amountLevelStars=function(e){return e.isHard()?3:e.isTricky()?2:1},Simple.prototype.getRequiredStars=function(e){return 0===(e=void 0!==e?e:this.current)?15:e<=12?30:e<=24?50:e<=40?70:e<=50?85:100},
Simple.prototype.isForceAvailable=function(){return 0===cleverapps.user.episode&&cleverapps.user.level<=3&&!cleverapps.forces.isShown(Forces.SIMPLE.id)},Simple.prototype.showForce=function(e){this.trigger("showForce"),cleverapps.forces.onceForceClosed=e},Simple.prototype.gamePlayed=function(e,t){this.knockoutGame&&this.knockoutGame.rumble.getCurrentRound().calcWinners(e),e===GameBase.OUTCOME_VICTORY&&(this.earnStars(this.amountLevelStars(t.level)),cleverapps.eventLogger.logEvent(cleverapps.EVENTS.METHA_LEVEL),cleverapps.playSession.set(cleverapps.EVENTS.METHA_LEVEL,!0))},Simple.prototype.wantsToPlay=function(e,t){var s=this.knockoutGame?this.knockoutGame.wantsToPlayActions():[];s.push(function(){MethaHelper.start(e,!1,t)}.bind(this)),cleverapps.metha.compound(e,s)},Simple.prototype.updateInfo=function(e){this.stars=e.stars||0,this.current=e.current||0,this.knockoutGame&&this.knockoutGame.save(e),this.save(!0)},Simple.prototype.getInfo=function(){var e={stars:this.stars,
current:this.current};return this.knockoutGame&&cleverapps.override(e,this.knockoutGame.getInfo()),e},cleverapps.config.debugMode&&(Simple.prototype.reset=function(){this.stars=0,this.current=0,this.save()}),Simple.prototype.save=function(e){cleverapps.DataLoader.save(cleverapps.DataLoaderTypes.SIMPLE,this.getInfo()),e||cleverapps.synchronizer.addUpdateTask("metha")},Simple.prototype.load=function(){var e=cleverapps.DataLoader.load(cleverapps.DataLoaderTypes.SIMPLE);e&&(this.stars=e.stars||0,this.current=e.current||0),this.knockoutGame&&this.knockoutGame.load(e)},Simple.CalcReward=function(){var t={gold:50},e=[];return"stacks"===cleverapps.config.subtype&&(e=[BoostersBefore.TYPE_HIGHLIGHT,BoostersBefore.TYPE_EYE,BoostersBefore.TYPE_HINT]),"solitaire"===cleverapps.config.type&&(e=[BoostersBefore.TYPE_MAGNET,BoostersBefore.TYPE_DICE,BoostersBefore.TYPE_TWO_JOKERS]),BoostersBefore.isAvailable()&&0<e.length&&e.every(function(e){return cleverapps.user.checkAvailable(
BoostersBeforeConfig[e].available)})&&(t.boosters={},e.forEach(function(e){t.boosters[e]=1})),"differences"===cleverapps.config.name&&(t.boosters={},t.boosters[DiscoverBooster.ID]=1,t.boosters[BrushBooster.ID]=1),t};var StarsProgressBar=cc.Node.extend({ctor:function(e){this._super(),this.options=e,this.stars=void 0!==this.options.stars?this.options.stars:cleverapps.simple.stars,this.current=void 0!==this.options.current?this.options.current:cleverapps.simple.current;var t=cleverapps.styles.StarsProgressBar;this.setAnchorPoint2(),this.setContentSize2(this.options.width,t.bar.height),this.addProgressBar(),this.addCounter(),this.options.withPresent&&this.addPresent(),cleverapps.simple.on("changeStars",function(){this.setStars(0<cleverapps.simple.pendingsStars?cleverapps.simple.stars-cleverapps.simple.pendingsStars:cleverapps.simple.stars)}.bind(this)),this.setStars(this.stars)},addProgressBar:function(){var e=cleverapps.styles.StarsProgressBar;this.barBg=new cc.Scale9Sprite(
bundles.simple.frames.bar_bg_png),this.addChild(this.barBg),this.barBg.setContentSize2(this.options.width+2*e.barBg.padding.x,e.bar.height+2*e.barBg.padding.y),this.barBg.setPositionRound(e.barBg),this.barBg.setLocalZOrder(-10),this.bar=new ScaledProgressBar(bundles.simple.frames.bar_png),this.addChild(this.bar),this.bar.setDimension(this.options.width,e.bar.height),this.bar.setPercentage(0)},addPresent:function(){var e=cleverapps.styles.StarsProgressBar;this.present=new cleverapps.Spine(e.present.json),this.addChild(this.present),this.present.setScale(e.present.scale),this.present.setSkin(e.present.skin),this.present.setAnimation(0,e.present.animation,!0),this.present.setPositionRound(e.present),this.present.setLocalZOrder(10),cleverapps.tooltipManager.create(this.present,{text:"messages:OpenBackgroundTooltip",rewards:Simple.CalcReward(),position:cleverapps.styles.UI.Tooltip.LOCATION.below,size:cleverapps.styles.UI.Tooltip.SIZE.medium})},addCounter:function(){
var e=cleverapps.styles.StarsProgressBar;this.counter=cleverapps.UI.generateImageText(this.stars+"/"+cleverapps.simple.getRequiredStars(this.current),cleverapps.styles.FONTS.STARS_PROGRESS_BAR_TEXT),this.counter.setAnchorPoint2(0,.5),this.star=new cc.Sprite(bundles.simple.frames.star_png),this.counterLayout=new cleverapps.Layout([this.star,this.counter],{direction:cleverapps.UI.HORIZONTAL,margin:e.counter.margin}),this.counter.y+=e.counter.text.offsetY,this.addChild(this.counterLayout),this.counterLayout.setPositionRound(e.counter)},setStars:function(e){this.stars=e,this.counter.setString(e+"/"+cleverapps.simple.getRequiredStars(this.current)),this.bar.setPercentage(100*e/cleverapps.simple.getRequiredStars(this.current))},updateProgress:function(e){var t=cleverapps.styles.StarsProgressBar;this.barAnimation||(this.barAnimation=new cleverapps.Spine(bundles.simple.jsons.progress_bar_json),this.bar.addChild(this.barAnimation)),this.stars+=e,this.counter.setString(
this.stars+"/"+cleverapps.simple.getRequiredStars(this.current));var s=e/cleverapps.simple.getRequiredStars()*100;this.barAnimation.setPositionRound(this.bar.getPercentage()/100*this.bar.totalWidth+t.barAnimation.offsetX,this.bar.totalHeight/2),this.barAnimation.setAnimation(0,"animation",!1),this.barAnimation.runAction(new cc.MoveTo(.8,(this.bar.getPercentage()+s)/100*this.bar.totalWidth+t.barAnimation.offsetX,this.barAnimation.y).easing(cc.easeOut(2))),this.bar.animatedChange(s)}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{STARS_PROGRESS_BAR_TEXT:{name:"default",size:40}}),cleverapps.styles.StarsProgressBar={bar:{height:50},barAnimation:{offsetX:-15},barBg:{padding:{x:15,y:17},x:{align:"center"},y:{align:"center",dy:-4}},counter:{x:{align:"center"},y:{align:"center"},text:{offsetY:0},margin:2},present:{scale:.7,x:{align:"right",dx:90},y:{align:"center",dy:5},json:bundles.windows.jsons.present_json,skin:"green",animation:"animation"}};var ProgressView=cc.Node.extend({
ctor:function(){this._super(),this.setAnchorPoint2(),this.hoverContainer=new cc.Node,this.hoverContainer.setAnchorPoint2(),this.addChild(this.hoverContainer),this.addProgressBar(),this.addArrows(),this.addIcons(),cleverapps.UI.wrap(this.hoverContainer),this.setContentSize2(this.hoverContainer.getContentSize()),this.hoverContainer.setPositionRound(this.width/2,this.height/2),this.addPerson(),cleverapps.UI.wrap(this),cleverapps.UI.applyHover(this.hoverContainer),cleverapps.UI.onClick(this.hoverContainer,function(){cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),cleverapps.metha.display({focus:"BackgroundsWindow",action:function(e){new BackgroundsWindow,cleverapps.metha.onceNoWindowsListener=e}})});var e=cleverapps.styles.ProgressView,t=cc.p(cleverapps.clone(e.x),cleverapps.clone(e.y));t.y.dy-=cleverapps.UI.getSceneOffsetY(),this.setPositionRound(t),cleverapps.UI.makeHideable(this,cleverapps.UI.VERTICAL),cleverapps.metha.registerControl("progress_view",this),
cleverapps.simple.on("updateProgress",this.createListener(this.updateProgress.bind(this))),cleverapps.simple.on("showForce",this.createListener(this.showForce.bind(this))),SceneDecors.add(this.hoverContainer,cleverapps.skins.getSlot("progressViewDecor"))},showForce:function(){this.show(!0),cleverapps.forces.create(this,Forces.SIMPLE)},addPerson:function(){var e=cleverapps.styles.ProgressView.person;if(e){this.person=new cc.Node,this.person.setAnchorPoint2(),this.person.setPositionRound(e),this.person.setContentSize2(e),this.person.setLocalZOrder(e.zOrder||0),this.addChild(this.person);var t=new cleverapps.Spine(bundles.hero.jsons.hero_json,e.scale);if(cleverapps.user.on("heroSkinUpdated",this.createListener(function(e){t.setSkin(e)}.bind(this))),t.setAnimation(0,e.animation.idle,!0),t.setPositionRound(e.animation),this.person.addChild(t),e.animation.click){var s=!1;cleverapps.UI.onClick(this.person,function(){s||(s=!0,t.setCompleteListener(function(){t.setCompleteListener(function(){})
,t.setAnimation(0,e.animation.idle,!0),s=!1}),t.setAnimation(0,e.animation.click,!1),e.animation.clickSound&&this.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.PlaySound(e.animation.clickSound))))}.bind(this))}}},updateProgress:function(s){this.show(!0);for(var n=cc.director.getRunningScene().scene,e=this.progressBar.star,i=n.convertToNodeSpace(e.getParent().convertToWorldSpace(e.getPosition())),o=cleverapps.styles.ProgressView,a=function(){if(!cleverapps.simple.isPassedAll()&&cleverapps.simple.canMoveNext()){var e=new cleverapps.Spine(bundles.simple.jsons.progress_bar_spark_json);this.hoverContainer.addChild(e),e.setPositionRound(o.bar.spark),e.setCompleteListenerRemove(),e.runAction(new cc.Sequence(new cc.DelayTime(.4),new cc.CallFunc(function(){e.setAnimation(0,"animation",!1)})));var t=new cleverapps.Spine(bundles.simple.jsons.avatar_spark_json);this.hoverContainer.addChild(t),t.setPositionRound(this.nextIcon.getPosition()),t.setCompleteListenerRemove(),t.runAction(
new cc.Sequence(new cc.DelayTime(.7),new cc.CallFunc(function(){t.setAnimation(0,"animation",!1),cleverapps.audio.playSound(bundles.simple.urls.simple_win_effect)})))}}.bind(this),t=function(e){var t=new cleverapps.Spine(bundles.simple.jsons.star_json);n.addChild(t),t.setCompleteListenerRemove(),t.setPositionRound(i.x,n.height/2),t.setLocalZOrder(10),t.runAction(new cc.Sequence(new cc.DelayTime(.8*e),new cc.CallFunc(function(){t.setAnimation(0,"collect",!1)}),new cc.MoveTo(1,i).easing(cc.easeIn(2)),new cc.CallFunc(function(){this.hoverContainer.runAction(new cc.Sequence(new cc.ScaleTo(.15,1.15),new cc.ScaleTo(.15,1))),this.progressBar.updateProgress(1),cleverapps.audio.playSound(bundles.simple.urls.star_collect_effect),e===s-1&&a()}.bind(this))))}.bind(this),r=0;r<s;r++)t(r)},addProgressBar:function(){var e=cleverapps.styles.ProgressView;this.progressBar=new StarsProgressBar({width:e.bar.width,
stars:0<cleverapps.simple.pendingsStars?cleverapps.simple.stars-cleverapps.simple.pendingsStars:void 0}),this.hoverContainer.addChild(this.progressBar)},addArrows:function(){if(bundles.simple.frames.arrow_png){for(var e=cleverapps.styles.ProgressView,t=new cc.Sprite(bundles.simple.frames.arrow_png).width,s=(this.progressBar.width-e.arrows.widthOffset)/(t+e.arrows.margin),n=[],i=0;i<s;i++)n.push(new cc.Sprite(bundles.simple.frames.arrow_png));var o=new cleverapps.Layout(n,{direction:cleverapps.UI.HORIZONTAL,margin:e.arrows.margin});o.setLocalZOrder(-1),this.progressBar.addChild(o),o.setPositionRound(this.progressBar.width/2,this.progressBar.height/2)}},addIcons:function(){var e=cleverapps.styles.ProgressView,t=this.currentIcon=this.createIcon();this.hoverContainer.addChild(t),t.setPositionRound(-e.bar.width/2-e.icon.offset.x,this.height/2+e.icon.offset.y),t.setRotation(-e.icon.rotation||0);var s=this.nextIcon=this.createIcon(!0);s.setRotation(e.icon.rotation||0),
this.hoverContainer.addChild(s),s.setPositionRound(e.bar.width/2+e.icon.offset.x,this.height/2+e.icon.offset.y),cleverapps.simple.current===cleverapps.simple.bgsAmount-1&&s.addChild(this.createLock())},createIcon:function(e){var t;t=e?new cc.Sprite(bundles["simple_background_"+cleverapps.simple.current].frames.background_icon_next):new cc.Sprite(bundles["simple_background_"+cleverapps.simple.current].frames.background_icon_current);var s=this.createIconBg(t,e),n=new cc.Node;return n.setAnchorPoint2(),n.setContentSize2(s.getContentSize()),n.addChild(t),n.addChild(s),n.setLocalZOrder(10),t.setPositionRound(n.width/2,n.height/2),n},createLock:function(){var e=cleverapps.styles.ProgressView,t=new cc.Sprite(bundles.simple.frames.lock_png);return t.setLocalZOrder(10),t.setScale(e.comingSoon.lock.scale),t.setPositionRound(e.comingSoon.lock),t},createIconBg:function(e,t){var s=cleverapps.styles.ProgressView.icon.bg,n=new cc.Scale9Sprite(
t?bundles.simple.frames.frame_gold_png:bundles.simple.frames.frame_silver_png);return s.flipped?(s=s.flipped,t&&n.setScaleX(-1),n.setPositionRound(t?s.right:s.left)):(n.setContentSize2(e.width*e.scaleX+2*s.padding.x,e.height*e.scaleY+2*s.padding.y),n.setPositionRound(s)),n}});cleverapps.styles.ProgressView={x:{align:"center"},y:{align:"bottom",dy:250},person:!1,bar:{width:350,spark:{x:{align:"center",dx:0},y:{align:"center",dy:0}}},arrows:{x:{align:"center"},y:{align:"center"},widthOffset:40,margin:15},icon:{offset:{y:0,x:52},bg:{padding:{x:12,y:15},x:{align:"center"},y:{align:"center",dy:-3}}},force:{finger:{y:-140}},comingSoon:{lock:{x:{align:"center"},y:{align:"center"},scale:.3},icon:{width:96,height:92}}};var Keypad,KeypadView,BackgroundsWindow=Window.extend({onWindowLoaded:function(e){this.options=e||{},this.stars=void 0!==this.options.stars?this.options.stars:cleverapps.simple.stars,this.current=void 0!==this.options.current?this.options.current:cleverapps.simple.getCurrent()
;var t=this.createContent();this._super({content:t,title:"messages:BackgroundsWindow.title",name:"backgrounswindow",styles:cleverapps.overrideStyles(cleverapps.styles.Window,cleverapps.styles.BackgroundsWindow.window,!0)}),this.options.moveNext&&this.changeCurrent()},changeCurrent:function(){var e=this.bgs[this.bgs.length-cleverapps.simple.current],t=this.bgs[this.bgs.length-cleverapps.simple.current-1],s=this.bgs[this.bgs.length-cleverapps.simple.current-2];cleverapps.simple.current===this.bgs.length-2&&(s=!1),e.progressBar.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.ScaleTo(.3,1.2*e.progressBar.baseScale).easing(cc.easeOut(2)),new cc.ScaleTo(.3,0).easing(cc.easeIn(2)),new cc.DelayTime(1.3))),this.addTape(e),e.tape.setScale(0),e.tape.runAction(new cc.Sequence(new cc.DelayTime(.7),new cc.ScaleTo(.5,1).easing(cc.easeBackInOut(.6)))),t.lock.runAction(new cc.Sequence(new cc.DelayTime(1.2),new cc.ScaleTo(.4,1.3*t.lock.scale).easing(cc.easeInOut(3)),new cc.ScaleTo(.4,0).easing(
cc.easeIn(3)),new cc.RemoveSelf)),t.layerColor.runAction(new cc.Sequence(new cc.DelayTime(1.4),new cc.FadeOut(.5))),this.runAction(new cc.Sequence(new cc.DelayTime(1.3),new cc.CallFunc(function(){this.scroll.scrollTo(t,1.4),cleverapps.audio.playSound(bundles.simple.urls.simple_transition_effect)}.bind(this)))),s&&(s.closedImage.runAction(new cc.Sequence(new cc.DelayTime(1.4),new cc.FadeOut)),this.addLayerColor(s),s.layerColor.setOpacity(150)),this.addPresent(t),t.name&&this.runAction(new cc.Sequence(new cc.DelayTime(1.6),new cc.CallFunc(function(){t.name.setFont(cleverapps.styles.FONTS.BACKGROUNDS_WINDOW_NAME_TEXT)})))},createContent:function(){var e=cleverapps.styles.BackgroundsWindow,t=Messages.get("messages:BackgroundsWindow.text");this.options.moveNext&&"scramble"===cleverapps.config.name&&(t=Messages.get("messages:BackgroundsWindow.moveNextText",{place:Messages.get("messages:background_name_"+cleverapps.simple.getCurrent())}));var s=cleverapps.UI.generateTTFText(t,
cleverapps.styles.FONTS.BACKGROUNDS_WINDOW_TEXT);s.setDimensions(e.text.width,0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),this.bgs=[];for(var n=0,i=void 0;bundles["backgrounds_window_"+n];){var o=this.createItem(n);n===this.current&&(i=o),this.bgs.unshift(o),n++}this.bgs.unshift(this.createItem(n));var a=new cleverapps.Layout(this.bgs,{direction:cleverapps.UI.VERTICAL,margin:e.scroll.margin,padding:e.scroll.padding}),r=this.scroll=new cleverapps.UI.ScrollView(a,{childrenVisibility:cleverapps.UI.ScrollView.CHILDREN_VISIBILITY_LINEAR});if(r.setContentSize2(a.width,e.scroll.height),r.scrollTo(i),e.scroll.bg){var l=r.bg=new cc.Scale9Sprite(bundles.simple.frames.scroll_bg_png);l.setContentSize2(r.width+2*e.scroll.bg.padding.x,r.height+2*e.scroll.bg.padding.y),l.addChild(r),r.setPositionRound(e.scroll)}return new cleverapps.Layout([r.bg||r,s],{direction:cleverapps.UI.VERTICAL,margin:e.margin})},createItem:function(e){var t=cleverapps.styles.BackgroundsWindow,s=new cc.Node
;s.setAnchorPoint2(),s.setContentSize2(t.item.width+2*t.item.bg.padding.x,t.item.height+2*t.item.bg.padding.y);var n=e<=this.current?t.item.imgCur:t.item.imgLocked,i=cleverapps.UI.createScale9Sprite(n,cleverapps.UI.Scale9Rect.TwoPixelXY);if(i.setContentSize2(s.getContentSize()),s.addChild(i),i.setPositionRound(s.width/2,s.height/2),i.setLocalZOrder(10),e<this.current)this.addTape(s),this.addBg(s,e);else if(e===this.current)this.addProgressBar(s,this.current,this.stars),this.addBg(s,e);else if(e<cleverapps.simple.bgsAmount){var o=s.lock=new cc.Sprite(bundles.simple.frames.lock_png);s.addChild(o),o.setPositionRound(t.lock),e===this.current+1?(this.addBg(s,e),this.addLayerColor(s),s.layerColor.setOpacity(150)):this.addClosedImage(s),this.options.moveNext&&e===this.current+2&&this.addBg(s,e)}else{this.addClosedImage(s);var a=cleverapps.UI.generateTTFText("messages:EpisodeView.ComingSoonTitle",cleverapps.styles.FONTS.BACKGROUNDS_WINDOW_NAME_COMING_SOON);a.setHorizontalAlignment(
cc.TEXT_ALIGNMENT_CENTER),a.setDimensions(t.comingSoon.width,0),s.addChild(a),a.setPositionRound(t.comingSoon)}return s},addPresent:function(n){var e=cleverapps.styles.BackgroundsWindow,t=new cc.Node;t.setAnchorPoint2(),t.setContentSize2(e.present),n.addChild(t),t.setPositionRound(e.present),cleverapps.UI.applyHover(t),t.setScale(0);var s=new cleverapps.Spine(bundles.main.jsons.reward_spine_json);t.addChild(s),s.setScale(e.present.animation.scale),s.setPositionRound(e.present.animation),s.setAnimation(0,"animation",!0);var i=new cleverapps.Spine(e.present.json);t.addChild(i),i.setScale(e.present.scale),i.setSkin(e.present.skin),i.setPositionRound(t.width/2,t.height/2),i.setLocalZOrder(10),i.setAnimation(0,e.present.presentAnimation,!0);var o=new cleverapps.UI.Button({width:e.present.button.width,height:e.present.button.height,button_png:bundles.buttons_main.frames.small_green_button,button_on_png:bundles.buttons_main.frames.small_green_button_on,content:cleverapps.UI.generateTTFText(
"messages:BackgroundsWindow.Get",cleverapps.styles.FONTS.WHITE_TEXT),onClicked:function(){}.bind(this)});i.addChild(o),o.setScale(e.present.button.scale),o.baseScale=o.scale,o.setPositionRound(e.present.button),t.runAction(new cc.Sequence(new cc.DelayTime(2.1),new cc.ScaleTo(.2,1.2).easing(cc.easeOut(2)),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.simple.urls.metha_present_effect)}),new cc.ScaleTo(.2,1).easing(cc.easeIn(2)),new cc.CallFunc(function(){var e=new FingerView;n.addChild(e);var t=n.convertToNodeSpace(o.getParent().convertToWorldSpace(o.getPosition()));e.setPositionRound(t),e.standardLoop({delay:.8});var s=new cc.Node;s.setAnchorPoint2(),this.addChild(s),s.setLocalZOrder(1e3),s.setContentSize2(this.width,this.height),s.setPositionRound(this.width/2,this.height/2),cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(){return!0}.bind(this),onTouchEnded:function(){return this.close(),!0}.bind(this)},s)
}.bind(this))))},addProgressBar:function(e,t,s){var n=cleverapps.styles.BackgroundsWindow,i=e.progressBar=new StarsProgressBar({width:n.bar.width,stars:s,current:t,withPresent:!this.options.moveNext&&!cleverapps.simple.isPassedAll()});e.addChild(i),i.setScale(n.bar.scale),i.baseScale=n.bar.scale,i.setPositionRound(n.bar)},addTape:function(e){var t=cleverapps.styles.BackgroundsWindow,s=e.tape=new cc.Sprite(bundles.simple.frames.tape_png);if(s.setLocalZOrder(11),e.addChild(s),s.setPositionRound(t.tape),s.setRotation(t.tape.rotation),t.tape.text){var n=cleverapps.UI.generateTTFText(Messages.get("messages:BackgroundsWindow.tapeText").toUpperCase(),cleverapps.styles.FONTS.BACKGROUNDS_WINDOW_TAPE_TEXT);n.setLocalZOrder(12),s.addChild(n),n.setRotation(t.tape.text.rotation),n.fitTo(t.tape.text.width),n.setPositionRound(t.tape.text)}},addLayerColor:function(e){var t=cleverapps.styles.BackgroundsWindow;e.layerColor=new cc.LayerColor(cleverapps.styles.COLORS.CLOSED_BACKGROUND_COLOR,t.item.width,
t.item.height),e.layerColor.setLocalZOrder(-9),e.addChild(e.layerColor),e.layerColor.setPositionRound(e.width/2-e.layerColor.width/2+t.layerColor.offsetX,e.height/2-e.layerColor.height/2+t.layerColor.offsetY)},addClosedImage:function(e){var t=cleverapps.styles.BackgroundsWindow;e.closedImage=new cc.Sprite(bundles.simple.frames.closed_bg_png),e.closedImage.setScale(t.item.width/e.closedImage.width),e.closedImage.setLocalZOrder(-9),e.addChild(e.closedImage),e.closedImage.setPositionRound(t.item.bg)},addBg:function(e,t){var s=cleverapps.styles.BackgroundsWindow,n=new cc.Sprite(bundles["backgrounds_window_"+t].urls.background);n.setLocalZOrder(-10),e.addChild(n),n.setPositionRound(s.item.bg),this.addNameText(e,t)},addNameText:function(e,t){var s=cleverapps.styles.BackgroundsWindow;if(s.name){var n=cleverapps.styles.FONTS.BACKGROUNDS_WINDOW_NAME_TEXT,i="messages:background_name_"+t;t>this.current&&(n=cleverapps.styles.FONTS.BACKGROUNDS_WINDOW_NAME_TEXT_CLOSED)
;var o=e.name=cleverapps.UI.generateTTFText(i,n);e.addChild(o,11),o.setPositionRound(s.name),t===this.current+1&&e.lock.setPositionRound(s.lockWithName)}},listBundles:function(e){e=e||{};var t=[],s=cleverapps.simple.current+1;e.moveNext&&s++;for(var n=0;n<=s;n++)t.push("backgrounds_window_"+n);return t}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{BACKGROUNDS_WINDOW_TAPE_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,stroke:{size:1,color:cleverapps.styles.COLORS.BLACK},shadow:{direction:cc.size(0,-2),color:cleverapps.styles.COLORS.BLACK,blur:2}},BACKGROUNDS_WINDOW_NAME_COMING_SOON:{size:60,color:new cc.Color(255,232,72,255),stroke:{size:1,color:new cc.Color(198,90,22,255)},shadow:{direction:cc.size(0,-4),color:new cc.Color(198,90,22,255),blur:1}},BACKGROUNDS_WINDOW_TEXT:{size:35,color:cleverapps.styles.COLORS.COLOR_BROWN},BACKGROUNDS_WINDOW_NAME_TEXT:{size:60,color:new cc.Color(255,232,72,255),stroke:{size:1,color:new cc.Color(198,90,22,255)},shadow:{direction:cc.size(0,-4),
color:new cc.Color(198,90,22,255),blur:1}},BACKGROUNDS_WINDOW_NAME_TEXT_CLOSED:{size:60,color:new cc.Color(190,209,215,255),stroke:{size:1,color:new cc.Color(108,127,155,255)},shadow:{direction:cc.size(0,-4),color:new cc.Color(108,127,155,255),blur:1}}}),cleverapps.overrideColors(cleverapps.styles.COLORS,{CLOSED_BACKGROUND_COLOR:new cc.Color(0,8,38,255)}),cleverapps.styles.BackgroundsWindow={margin:15,text:{width:500},lock:{x:{align:"center"},y:{align:"center",dy:8}},tape:{x:{align:"right",dx:6},y:{align:"bottom",dy:-2},rotation:0,text:{x:88,y:51,rotation:-46,width:110}},layerColor:{offsetX:0,offsetY:5},comingSoon:{width:500,x:{align:"center"},y:{align:"center"}},bar:{width:300,scale:.8,x:{align:"center"},y:{align:"bottom",dy:80}},item:{width:600,height:350,imgCur:bundles.simple.frames.frame_gold_png,imgLocked:bundles.simple.frames.frame_silver_png,bg:{padding:{x:13,y:14},x:{align:"center"},y:{align:"center",dy:3}}},scroll:{x:{align:"center"},y:{align:"center",dy:-1},height:810,
margin:15,padding:{x:35,y:20},bg:{padding:{x:0,y:6}}},present:{json:bundles.windows.jsons.present_json,skin:"green",presentAnimation:"animation",x:{align:"center",dx:0},y:{align:"center",dy:-30},width:200,height:200,scale:1,animation:{scale:.5,x:{align:"center",dx:0},y:{align:"center",dy:0}},button:{width:150,height:80,scale:.7,x:{align:"center"},y:{align:"bottom"}}},window:{Title:{bg:{image:bundles.simple.frames.backgrounds_window_title_bg}},Border:{x:35,y:125},contentOffset:-65}},GunView.prototype._onEnterTransitionDidFinish=GunView.prototype.onEnterTransitionDidFinish,GunView.prototype.onEnterTransitionDidFinish=function(){this._onEnterTransitionDidFinish(),cleverapps.gun.onDiscoveryListener=this.createListener(this.onDiscovery.bind(this)),cleverapps.gun.onDiscovery=this.createListener(function(e){this.gun.discovery(e)}.bind(this)),Game.currentGame.userStatus.on("inactive_short",this.createListener(this.hint.bind(this)))},GunView.prototype.onDiscovery=function(){
cleverapps.styles.GunView.onDiscoveryAnimation&&(this.animation.setAnimation(0,cleverapps.styles.GunView.onDiscoveryAnimation,!1),this.animation.addAnimation(0,"idle",!0))},GunView.prototype._attack=GunView.prototype.attack,GunView.prototype.attack=function(){this.hoverAnimation&&this.hoverAnimation.forceOff(),this._attack()},GunView.prototype.animateHover=function(){cleverapps.styles.GunView.hoverAnimation&&(this.hoverAnimation||(this.hoverAnimation=new GunHoverAnimation(this)),this.hoverAnimation.on())},GunView.prototype.onMouseOver=function(){this.hovered||cleverapps.metha.isFocused()||(this.hovered=!0,this.animateHover())},GunView.prototype.onMouseOut=function(){this.hovered&&(this.hovered=!1,this.hoverAnimation&&this.hoverAnimation.off())},GunPriceView.prototype.hide=function(){this.setVisible(!1)},GunView.prototype._hide=GunView.prototype.hide,GunView.prototype.hide=function(){this._hide(),this.hoverAnimation&&(this.hoverAnimation.unlock(),!this.hovered&&this.hoverAnimation.off()
),void 0!==this.animation.positionY&&(this.visible=!0,this.animation.stopAllActions(),this.animation.runAction(new cc.Sequence(new cc.MoveTo(.2,cc.p(this.animation.x,this.animation.positionY-this.height)),new cc.CallFunc(function(){this.visible=!1}.bind(this)))))},GunView.prototype._showUp=GunView.prototype.showUp,GunView.prototype.showUp=function(){this._showUp(),cleverapps.UI.makeHideable(this),this.animation.positionY=this.animation.y,this.animation.y-=this.height,this.show()},GunView.prototype._show=GunView.prototype.show,GunView.prototype.show=function(){this._show(),void 0!==this.animation.positionY&&(this.animation.stopAllActions(),this.animation.runAction(new cc.MoveTo(.3,cc.p(this.animation.x,this.animation.positionY))))},GunView.prototype.hint=function(){this.animation.setAnimation(0,"hint",!1),this.animation.setCompleteListener(function(){this.animation.setCompleteListener(function(){}),this.animation.setAnimation(0,"idle",!0),this.hoverAnimation&&(
this.hoverAnimation.unlock(),!this.hovered&&this.hoverAnimation.off())}.bind(this)),this.animateHover(),this.hoverAnimation.lock()},cleverapps.overrideStyles(cleverapps.styles.GunView,{json:bundles.hero.jsons.hero_json,actionAnimation:"cannon_shot",onDiscoveryAnimation:"idle_jump",startAnimation:"in",zOrder:0,disableMobileSpecialAnimation:!0}),cleverapps.styles.COLORS=cleverapps.overrideColors(cleverapps.styles.COLORS,{DARK_RED:new cc.Color(165,2,2,255),GREEN:new cc.Color(13,119,0,255)}),cleverapps.overrideFonts(cleverapps.styles.FONTS,{GAME_MESSAGE_TEXT:{size:60,color:cleverapps.styles.COLORS.GREEN},GAME_MESSAGE_HARD_TEXT:{size:60,color:cleverapps.styles.COLORS.DARK_RED},GAME_MESSAGE_TRICKY_TEXT:{size:60,color:new cc.Color(2,132,144,255)},GAME_MESSAGE_BONUS_ROUND_TEXT:{size:80,color:new cc.Color(128,76,79,255),stroke:{color:new cc.Color(255,246,254,255),size:2}},BOOSTER_BEFORE_AMOUNT_TEXT:{name:"default",size:40},COOKIE_JAR_AMOUNT_TEXT:{name:"default",size:35}}),
cleverapps.overrideStyles(cleverapps.styles.RewardsListComponent,{boosters:{icons:{5:bundles.game.frames.shuffle_png,13:bundles.reward_icons.frames.highlight,14:bundles.reward_icons.frames.eye,15:bundles.reward_icons.frames.hint}}}),cleverapps.overrideStyles(cleverapps.styles.TooltipRewardsView,{boosters:{icons:{13:bundles.reward_icons.frames.highlight,14:bundles.reward_icons.frames.eye,15:bundles.reward_icons.frames.hint}}}),cleverapps.overrideStyles(cleverapps.styles.CurrentView,{bg:{height:50,padding:{x:30},resize:!0},lettersHolder:{y:-5},Letter:{width:28},statusIcon:{offsetX:60},position:{x:{align:"center"},y:{align:"center",dy:260}}}),cleverapps.overrideStyles(cleverapps.styles.CharView,{width:100,height:98,topPadding:-10,imageTopPadding:2}),cleverapps.overrideStyles(cleverapps.styles.CookieJarView,{scale:1,position:{x:{align:"right",dx:40},y:{align:"top",dy:-80}},animation:{scale:.4},amountBg:{width:195,height:70,x:{align:"center",dx:-50},y:{align:"center",dy:0},text:{x:{
align:"center",dx:-73},y:{align:"center",dy:0}},scale:.8},prizeFlyPositionShift:{y:30,x:-30}}),cleverapps.styles.SCENE_MAX_WIDTH=1740,cleverapps.styles.SQUARE_MODE_WIDTH=1070,cleverapps.styles.INSTANT_SCENE_MAX_WIDTH=2375,cleverapps.styles.COLORS=cleverapps.overrideColors(cleverapps.styles.COLORS,{PATH_COLOR:new cc.Color(85,244,82,255),LETTER:new cc.Color(80,60,35,255),HELP_BUTTON_COLOR:new cc.Color(255,235,211,255),HELP_BUTTON_STROKE_COLOR:new cc.Color(21,60,3,255),COLOR_VICTORY:new cc.Color(240,73,0,255),MIDNIGHT_BLUE:new cc.Color(40,26,144,255),LIGHT_GRAY:new cc.Color(150,150,150,255),DARK_GRAY:new cc.Color(100,100,100,255),GREEN_YELLOW:new cc.Color(145,255,78,255),LEVEL_NOTPASSED:new cc.Color(241,86,74,255),ORANGE:new cc.Color(255,156,0,255),GOLDVIEW_HINT_COLOR:new cc.Color(87,58,34,255),COLOR_VERYLIGHTBROWN:new cc.Color(220,191,144,255),PLAYER_NAME_COLOR:new cc.Color(255,255,255,255),COMPETITOR_BG_COLOR:new cc.Color(244,90,77,255),PLAYER_BG_COLOR:new cc.Color(250,145,122,255),
PLAYER_ALARM_COLOR:new cc.Color(150,150,150,255),GUN_PRICE_FONT_COLOR:new cc.Color(255,255,255,255),COLOR_BROWN:new cc.Color(130,70,40,255)}),cleverapps.styles.DECORATORS=cleverapps.overrideStyles(cleverapps.styles.DECORATORS,{LEVEL_SHADOW:{color:new cc.Color(14,54,135,255),direction:cc.size(0,-4),blur:1},CONGRATE_STROKE:{color:cleverapps.styles.COLORS.GREEN,size:4},TUTORIAL_STROKE:{color:cleverapps.styles.COLORS.BLACK,size:2},DARK_OLIVE_GREEN_STROKE:{color:new cc.Color(121,94,46,255),size:2},LEADERS_BUTTONS_STROKE:{color:new cc.Color(60,45,25,255),size:2},IMAGE_FONT_SHADOW:{color:new cc.Color(0,0,0,90),direction:cc.size(0,-5),blur:1},IMAGE_FONT_SHADOW_SMALL:{color:new cc.Color(0,0,0,90),direction:cc.size(0,-2),blur:1},REWARDS_TEXT_STROKE:{color:cleverapps.styles.COLORS.BLACK,size:1},IMAGE_FONT_STROKE:{color:cleverapps.styles.COLORS.BLACK_STROKE,size:2},IMAGE_FONT_STROKE_SMALL:{color:cleverapps.styles.COLORS.BLACK_STROKE,size:1},GREY_SHADOW:{color:new cc.Color(40,40,40,180),
direction:cc.size(0,-5),blur:1}}),cleverapps.styles.FONTS=cleverapps.overrideFonts(cleverapps.styles.FONTS,{BUTTON_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},BUTTON_SMALL_TEXT:{size:34,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},WINDOW_TITLE_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW},WINDOW_BIG_TEXT:{size:80,color:cleverapps.styles.COLORS.COLOR_BROWN},DAILY_TASK_GOLD_AMOUNT_TEXT:{size:80,color:cleverapps.styles.COLORS.COLOR_BROWN},SHOP_NO_ADS_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},VICTORY_OK_BUTTON_TEXT:{size:60,
color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},LEVEL_TUTORIAL_TEXT:{size:40,color:cleverapps.styles.COLORS.GOLDVIEW_HINT_COLOR},BIG_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},VICTORY_BONUS_TEXT:{size:75,color:cleverapps.styles.COLORS.COLOR_VICTORY,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},CONGRATE_TEXT:{size:100,color:cleverapps.styles.COLORS.GREEN_YELLOW,stroke:cleverapps.styles.DECORATORS.CONGRATE_STROKE},TUTORIAL_TEXT:{size:65,color:cleverapps.styles.COLORS.ORANGE,stroke:cleverapps.styles.DECORATORS.TUTORIAL_STROKE},SHARE_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SHARE_BUTTON_REWARD_TEXT:{
size:35,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},LETTERS_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},GREEN_BUTTON_SMALL_TEXT:{size:34,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PLAYER_NAME_TEXT:{size:30,color:cleverapps.styles.COLORS.PLAYER_NAME_COLOR},MISSION_NAME_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},PACK_WHITE_SMALL_TEXT:{name:"default",size:30},DAILY_TOURNAMENT_TITLE_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},GAME_REWARD_BUTTON_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,
shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},EXTRA_WINDOW_TITLE_TEXT:{size:70,color:new cc.Color(245,132,46,255),stroke:{size:2,color:new cc.Color(63,47,25,255)},shadow:{color:new cc.Color(63,47,25,255),direction:cc.size(0,-2),blur:1}},ROW_AMOUNT_TEXT:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},ROW_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},PACKWINDOW_BUTTON_TEXT:{size:60,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},BOARD_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},GUN_PRICE_TEXT:{size:40,color:cleverapps.styles.COLORS.GUN_PRICE_FONT_COLOR,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},GUN_PRICE_BUY_TEXT:{
size:40,color:cleverapps.styles.COLORS.GUN_PRICE_FONT_COLOR,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PIGGY_BANK_BUTTON_TEXT:{size:75,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},RULES_WINDOW_TEXT:{size:35,color:cleverapps.styles.COLORS.COLOR_BROWN},REWARDS_LIST_TEXT:{name:"nostroke",size:35,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIPTION_WINDOW_GOLD_COIN_TEXT:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIPTION_WINDOW_GOLD_OFFER_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},SUBSCRIPTION_WINDOW_TITLE_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SUBSCRIPTION_MAIN_TEXT:{size:35,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT},
SUBSCRIPTION_BUTTON_ADDITIONAL_TEXT:{size:18,color:cleverapps.styles.COLORS.COLOR_WINDOW_TEXT},BOOSTERS_SALE_PRICE_TEXT:{size:35,color:cleverapps.styles.COLORS.COLOR_BROWN},BOOSTERS_SALE_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},BOOSTERS_SALE_WINDOW_BUTTON_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},BOOSTERS_SALE_TOP_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},BOOSTERS_SALE_TOP_RED_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_RED},BOOSTERS_SALE_PROGRESS_BAR_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},BOOSTERS_SALE_DESCRIPTION_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},BOOSTERS_SALE_PROGRESS_BAR_AMOUNT_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},REWARDS_TEXT:{size:40,
color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},FAVORITE_SALE_TIMER_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},FAVORITE_SALE_WINDOW_BUTTON_TEXT:{size:75,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},EXTRA_WINDOW_LETTER_TEXT:{color:cleverapps.styles.COLORS.WHITE,size:40,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},EXTRA_WINDOW_TEXT:{size:25,color:cleverapps.styles.COLORS.COLOR_BROWN},MISSION_WINDOW_STATUS_TEXT:{size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},MISSION_WINDOW_TIMER_TEXT:{name:"nostroke",size:35,color:cleverapps.styles.COLORS.COLOR_BROWN},MISSION_WINDOW_TITLE_TEXT:{size:80,
color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE,shadow:{direction:cc.size(0,-5),blur:1,color:new cc.Color(198,68,0,255)}},DAILY_TASK_FONT:{size:25,color:cleverapps.styles.COLORS.COLOR_BROWN},PLAY_BUTTON_TEXT:{size:70,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PLAY_BUTTON_TEXT_HARD:{size:70,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PLAY_BUTTON_TEXT_TRICKY:{size:70,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PACKWINDOW_LABEL_TEXT:{size:80,color:cleverapps.styles.COLORS.WHITE,shadow:{direction:cc.size(0,-3),blur:1,color:cleverapps.styles.COLORS.BLACK}},PACKWINDOW_TITLE_TEXT:{size:50,color:cleverapps.styles.COLORS.PACKWINDOW_TITLE_YELLOW,
shadow:{direction:cc.size(0,-6),blur:1,color:new cc.Color(85,40,13,255)},stroke:{size:2,color:new cc.Color(81,30,6,90)}},BOOSTERS_BEFORE_TEXT:{size:45,color:cleverapps.styles.COLORS.COLOR_BROWN},COINS_PRICE_TEXT:{name:"default",size:40},LEVEL_START_PLAY_BUTTON_TEXT:{size:70,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},MEDALLION_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},TILE_SHOP_BADGE_TEXT:{size:35,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SHOP_SMALL_TILE_BUTTON_TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SHOP_LARGE_TILE_BUTTON_TEXT:{size:45,
color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},TILE_SHOP_OFFER_TEXT_LARGE:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},TILE_SHOP_OFFER_TEXT_SMALL:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},TILE_SHOP_HIGHLIGHTED_IMAGE_TEXT:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},TILE_SHOP_WINDOW_TEXT:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},TILE_SHOP_WINDOW_PACK_TITLE:{size:40,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW},TILE_SHOP_WINDOW_TITLE_TEXT:{size:85,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},LOADING_TEXT:{size:40,color:new cc.Color(96,92,164,255)},REWARD_WINDOW_TEXT:{size:60,
color:cleverapps.styles.COLORS.COLOR_BROWN},WAIT_WINDOW_TEXT:{size:40,color:new cc.Color(0,0,70,255)},BOOSTERS_BEFORE_UNLOCK:{size:30,color:cleverapps.styles.COLORS.WHITE},REWARD_ELEMENT_TEXT:{color:cleverapps.styles.COLORS.WHITE,size:45},DAILY_TASK_PROGRESS_FONT:{name:"default",size:30},BOOSTER_BEFORE_COINS_PRICE_TEXT:{name:"default",size:40,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SIDEBAR_ICON_TEXT:{name:"default",size:30,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE_SMALL,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW_SMALL},TOOLTIP_FONT:{name:"nostroke"},DAILY_TASK_BUTTON_TEXT:{size:46,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW},MISSION_BUTTON_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SUBSCRIPTION_BUTTON_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,
shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},SUBSCRIPTION_BUY_BUTTON_TEXT:{size:50,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},DAILY_CUP_PLAY_BUTTON_TEXT:{size:70,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},PROMOTION_BUTTON_TEXT:{size:55,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},LANGUAGE_TEXT:{size:35,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},BONUS_BUTTON_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},
DAILY_CUP_TIMER_TEXT:{name:"default",size:40,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},CURRENT_TEXT:{size:30,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},BOUNTY_AMOUNT_TEXT:{name:"nostroke",size:30,color:cleverapps.styles.COLORS.COLOR_BROWN},TEXT:{size:40,color:cleverapps.styles.COLORS.WHITE,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW},SHOP_USER_GOLD_TEXT:{color:cleverapps.styles.COLORS.WHITE,size:40,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE},DAILY_TASKS_BAR:{name:"default",size:30},DAILY_TASK_CTA:{size:35,color:cleverapps.styles.COLORS.COLOR_BROWN},TILE_REWARDS_HEADER:{size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},TILE_REWARDS:{name:"nostroke",size:40,color:cleverapps.styles.COLORS.COLOR_BROWN},PRODUCT_TILE_LIMIT_TEXT:{size:30,
color:cleverapps.styles.COLORS.COLOR_BROWN}}),FingerView.PATH_BASE_ALPHA=100,FingerView.PATH_LINE_WIDTH=20,cleverapps.override(cleverapps.styles.Notification,{text:{y:-20},targetY:50}),cleverapps.overrideStyles(cleverapps.styles.FinishEpisodeWindow,{text:{y:0},Button:{width:240,height:110}}),cleverapps.overrideStyles(cleverapps.styles.HelpFromFriendsWindow,{button:{Text:{offsetY:18},RewardText:{offsetY:-24}},addcoinsvideo:{button:{RewardCoins:{offsetX:35,offsetY:-26}}}}),cleverapps.overrideStyles(cleverapps.styles.LoadingScene,{pattern:!0,barBg:{y:140},animations:[{width:800,json:bundles.loading_scene.jsons.loading,name:{start:{en:"animation_en",ru:"animation_ru"},idle:{en:"animation_en_idle",ru:"animation_ru_idle"}},zOrder:10}]}),cleverapps.overrideStyles(cleverapps.styles.LevelView,{coming_soon:[{x:-60,y:-400}],levels_1:[{x:-170,y:340},{x:0,y:340},{x:170,y:340},{x:-170,y:185},{x:0,y:185},{x:170,y:185},{x:-170,y:30},{x:0,y:30},{x:170,y:30},{x:-170,y:-125},{x:0,y:-125},{x:170,y:-125},{
x:-170,y:-280},{x:0,y:-280},{x:170,y:-280}],LevelId:{y:{align:"center",dy:-6}}}),cleverapps.overrideStyles(cleverapps.styles.VictoryWindow,{width:450,height:450,place:!1,title:{y:550},tournament:{title:{y:450}},rewardBlock:{y:240,padding:50,text:{format:"+%{amount}"},coin:{scale:1.3}},button:{y:50,width:220,height:110},flyStar:{width:200,height:200,position:{x:{align:"center",dx:170},y:{align:"center",dy:160}},text:{x:{align:"right",dx:-16},y:{align:"bottom",dy:-6}}},window:{bandButton:!0}}),cleverapps.overrideStyles(cleverapps.styles.BoosterAmountView,{amount:{scale:.8}}),cleverapps.overrideStyles(cleverapps.styles.TournamentPlayerView,{height:95,scale:[.8,1,1],points:{x:150,y:50},avatar:{x:{align:"left",dx:10},y:{align:"top",dy:-5},scale:.7},name:{x:{align:"right",dx:-10},y:{align:"top",dy:0}},goals:{height:24,width:24,margin:4,y:15}}),cleverapps.overrideStyles(cleverapps.styles.TournamentPlayersView,{x:{align:"left",dx:10},y:[{align:"top",dy:-100},{align:"top",dy:-100},{align:"top",
dy:-100}],margin:4}),cleverapps.overrideStyles(cleverapps.styles.ToolbarView,{bg:{height:80},items:{dy:30},margin:13}),cleverapps.overrideStyles(cleverapps.styles.LeadersWindow,{width:570,height:720,head:{y:955},tabs:{x:{align:"right",dx:-40},y:{align:"bottom",dy:-68}},player:{width:660,name:{height:70},place:{dy:0},rating:{dy:0}},table:{rank:{x:70},player:{x:324},rating:{x:580}},window:{CloseButton:{offsetX:30,offsetY:30}},friendsContent:{top:-65,title:{y:150},noFriends:{Text:{y:120},Button:{width:320}}},worldContent:{top:-65,arrow:{x:330,y:-335}}}),cleverapps.overrideStyles(cleverapps.styles.NewLeagueWindow,{width:500,height:250,button:{width:260,height:110,y:-50},hero:{idle:"idle"},text:{y:140},buttonsMargin:20,share:{width:260,height:110,Text:{offsetX:0,offsetY:20},RewardText:{offsetX:-15,offsetY:-20},RewardCoins:{scale:.5,offsetX:40,offsetY:-25}}}),cleverapps.overrideStyles(cleverapps.styles.ShopWindow,{height:770,width:450,tileMargin:60,tabs:{0:{scale:.6,y:{dy:8}}}}),
cleverapps.overrideStyles(levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_ASK_COINS],{}),cleverapps.overrideStyles(levels.FriendRequest.REQUEST_TYPES[levels.FriendRequest.TYPE_SENT_COINS],{}),cleverapps.overrideStyles(cleverapps.styles.SelectFriendWindow,{withFriends:{friendsContainer:{y:120}}}),cleverapps.overrideStyles(cleverapps.styles.DailyTasksWindow,{content:{padding:{x:40,y:15}},timer:{timerPosition:{x:6,y:4},icon:{x:{align:"left",dx:-40},y:{align:"center",dy:3}},margin:40}}),cleverapps.overrideStyles(cleverapps.styles.DailyTaskView,{opacity:180,title:{x:{align:"center",dx:-40}},progressBar:{height:40,offsetY:6,bg:{padding:{y:6}}}}),cleverapps.overrideStyles(cleverapps.styles.DailyTaskNotificationView,{bar:{textDy:2,height:45,padding:{top:2,bottom:5,left:4,right:4}}}),cleverapps.overrideStyles(cleverapps.styles.RewardsListComponent,{gold:{title:{x:0,y:-34},x:0,y:0},gun:{height:300,animation:{json:bundles.hero.jsons.hero_json,name:"gun_reward"},y:0,x:0,scale:.6},
boosters:{title:{x:50,y:-90}}}),cleverapps.overrideStyles(cleverapps.styles.LeadersRow,{size:{width:640,height:90},placeBadges:{y:0,text:{y:0}},place:{x:50,y:0,font:cleverapps.styles.FONTS.ROW_AMOUNT_TEXT},avatar:{position:{x:130}},text:{x:320,y:0,font:cleverapps.styles.FONTS.ROW_TEXT},data:{size:{width:120},position:{x:570},amount:{x:60,y:0}}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupLeadersRow,{size:{width:660},medal:{iconMargin:-1,margin:0},data:{size:{width:300},position:{x:504}}}),cleverapps.overrideStyles(cleverapps.styles.Tabs,{margin:-10,buttons:{y:{align:"bottom",dy:34}}}),cleverapps.overrideStyles(cleverapps.styles.FBLoginOrInvite,{images:{avatars:{scale:.9}}}),cleverapps.overrideStyles(cleverapps.styles.Row,{size:{width:690,height:90},prizes:[{icon:bundles.main.frames.prize_place_1,scale:1,y:6},{icon:bundles.main.frames.prize_place_2,scale:1,y:6},{icon:bundles.main.frames.prize_place_3,scale:1,y:6},{icon:bundles.main.frames.toolbar_dailybonus_icon_png,scale:.6,
y:6},{icon:bundles.main.frames.toolbar_dailybonus_icon_png,scale:.6,y:6}],data:{amount:{y:0},position:{x:610,y:0}},avatar:{position:{x:120,y:0}},text:{x:350,y:0,font:cleverapps.styles.FONTS.ROW_TEXT},place:{x:46,y:0,font:cleverapps.styles.FONTS.ROW_AMOUNT_TEXT},reward:{x:493,y:-4}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupRow,{size:{height:90,width:640},data:{bgYou:bundles.main.frames.light_bg_you_png,position:{x:560},size:{height:80},iconPosition:{x:106,y:0},amount:{x:45,y:0}},reward:{x:434},avatar:{position:{x:140}},prizes:[{icon:bundles.main.frames.prize_place_1,scale:1,y:6},{icon:bundles.main.frames.prize_place_2,scale:1,y:6},{icon:bundles.main.frames.prize_place_3,scale:1,y:6},{icon:bundles.main.frames.toolbar_dailybonus_icon_png,scale:.6,y:0},{icon:bundles.main.frames.toolbar_dailybonus_icon_png,scale:.6,y:0}]}),cleverapps.overrideStyles(cleverapps.styles.MissionAnimationView,{scale:.65}),cleverapps.overrideStyles(cleverapps.styles.MissionWindow,{width:718,height:984,
contentLayout:{y:{align:"center",dy:50}},titleAnimation:{x:{align:"center"},y:{align:"top",dy:303}},tableHeight:{styles:{height:367}},contentObjectsMargin:15,window:{HelpButton:{x:{align:"left",dx:70},y:{align:"top",dy:-498}},BottomButton:{bottomPadding:60},Border:{y:100},Title:{offset:80,bg:!1},bandButton:!0,contentOffset:-200}}),cleverapps.overrideStyles(cleverapps.styles.VictoryWindowBase,{rewards:{margin:65,prizesMargin:7,icon:{y:{align:"center",dy:60},x:{align:"center",dx:0}},amount:{y:{align:"center",dy:-5},x:{align:"center",dx:0}},button:{y:{align:"bottom",dy:-70}},Clover:{scale:.8},Coin:{scale:.8}},missionIcon:{x:{align:"center"},y:610,clover:{x:{align:"center"},y:{align:"bottom",dy:35},clover:{scale:.5}},score:{x:{align:"center"},y:{align:"center",dy:0}},countDown:!1},clover:{x:{align:"right",dx:-50},y:275,clover:{scale:.8,y:{align:"center",dy:4}},text:{y:{align:"center",dy:8},font:"TEXT",imageFont:!1},animation:{x:27,y:15}},buttons:{x:{align:"center"},y:{align:"bottom",dy:-20
}}}),cleverapps.overrideStyles(cleverapps.styles.FbConnectWindow,{Button:{height:120}}),cleverapps.overrideStyles(cleverapps.styles.FbButton,{margin:5,icon:{offsetY:5},multiSocials:{icons:{facebook:bundles.main.frames.fb_icon_blue_png}}}),cleverapps.overrideStyles(cleverapps.styles.Window,{Background:{stitches:{offsetTop:24,offsetBottom:34,offsetLeft:25,offsetRight:25}},HelpButton:{x:{align:"left",dx:25},y:{align:"top",dy:-68}},Title:{offset:110,bg:{image:bundles.main.frames.window_title_bg_png,zIndex:0,adjustToWindow:{width:10,closeButtonOffset:{y:5,x:-20}},x:{align:"center",dx:0},y:{align:"top",dy:-35}}},Border:{x:75,y:190},minHeight:200,minWidth:240,contentOffset:-20}),cleverapps.overrideStyles(cleverapps.styles.SettingsWindow,{window:{Border:{x:75,y:150},contentOffset:-80}}),cleverapps.overrideStyles(cleverapps.styles.GunView,{showUpSound:bundles.main.urls.meow,onDiscoveryAnimation:"idle",startAnimation:"start",hoverAnimation:{json:bundles.hero.jsons.hero_backLight_json,offsetX:0,
offsetY:-50},useSceneDelta:!0,position:[{x:{align:"left",dx:30},y:{align:"bottom",dy:-170}},{x:{align:"left",dx:12},y:{align:"bottom",dy:55}},{x:{align:"left",dx:12},y:{align:"bottom",dy:55}}],amount:{position:[{x:30,y:90},{x:60,y:60},{x:60,y:60}]},scale:[.8,1,1],size:[{width:150,height:310},{width:260,height:340},{width:260,height:340}],animation:{wideModePosition:[{x:{align:"center",dx:-10},y:{align:"center",dy:35}},{x:{align:"center",dx:0},y:{align:"bottom",dy:-30}},{x:{align:"center",dx:0},y:{align:"bottom",dy:-60}}],actionPosition:[{x:{align:"center",dx:130},y:{align:"bottom",dy:80}},{x:{align:"center",dx:180},y:{align:"bottom",dy:-60}},{x:{align:"center",dx:180},y:{align:"bottom",dy:-60}}]},price:{position:[{x:70,y:195},{x:135,y:50},{x:135,y:50}]}}),cleverapps.overrideStyles(cleverapps.styles.GunPriceView,{scale:1,hover:!0,background:{padding:{x:20,y:5}},fitTo:{width:130},label:{mobileScale:.5,offset:{y:[40,60,60]}},position:{y:{align:"center",dy:2}},icon:{scale:.8}}),
cleverapps.overrideStyles(cleverapps.styles.GunAmountView,{background:{scale9:{width:70,height:70}},delay:1,scale:.9}),cleverapps.overrideStyles(cleverapps.styles.VictoryWindowButton,{width:240,height:115}),cleverapps.overrideStyles(cleverapps.styles.Buttons,{margin:{x:20}}),cleverapps.overrideStyles(cleverapps.styles.BeatFriendWindow,{width:450,height:450,Button:{width:200,height:100},bg:{scale:1,offsetY:20},Text:{Margin:{y:0}}}),cleverapps.overrideStyles(cleverapps.styles.RewardBuyButton,{width:162,height:72}),cleverapps.overrideStyles(cleverapps.styles.MenuBarItem,{lotteryIconPosition:"bottom_right",iconBlockWidth:80,plusBlockWidth:70,textOffset:{x:-2},plusButton:{position:{x:{align:"right",dx:-5},y:{align:"center",dy:-2}}},helpButton:{position:{x:{align:"right",dx:-2},y:{align:"center",dy:-3}}},bg:{width:265,minWidth:250,height:81},icon:{x:30,y:2}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupScene,{background:{pattern:!1},leadersButton:{y:{align:"bottom",dy:109},scale:.7},
helpButton:{y:{align:"bottom",dy:140}},tableBg:{width:745,height:930,stitches:{offsetTop:24,offsetBottom:34,offsetLeft:25,offsetRight:25}},timer:{y:{align:"top",dy:-290},regularFontTimerPosition:{x:0,y:-3}},title:{y:{align:"center",dy:10},width:300},titleBg:{y:{align:"top",dy:-130},scale:1,height:150,width:800,icon:{x:{align:"left",dx:-20},y:{align:"center",dy:5}}},textBg:{offsetHeight:5},table:{height:640,width:440}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupTable,{table:{height:600,width:450}}),cleverapps.overrideStyles(cleverapps.styles.ShuffleButton,{y:{align:"bottom",dy:-50}}),cleverapps.overrideStyles(cleverapps.styles.HintButtonBooster,{mirrorArrowY:!0,zOrder:1,useSceneDelta:!0,hideDirection:[cleverapps.UI.VERTICAL,cleverapps.UI.HORIZONTAL,cleverapps.UI.HORIZONTAL],phone:{scale:.8},width:150,height:120,content:{price:{x:0,y:-22},icon:{x:0,y:35}},position:{x:[{align:"right",dx:-10},{align:"right",dx:-10},{align:"right",dx:-10}],y:[{align:"bottom",dy:16},{
align:"bottom",dy:510},{align:"bottom",dy:510}]}}),cleverapps.overrideStyles(cleverapps.styles.FixedWidthScene,{background:{pattern:!1,parallax:!1}}),cleverapps.overrideStyles(cleverapps.styles.PlayButtonView,{height:120,y:{align:"bottom",dy:130},text:{paddingY:15},button:{button_png:bundles.buttons_main.frames.play_button_png,button_on_png:bundles.buttons_main.frames.play_button_on_png,hardLvl:{button_png:bundles.buttons_main.frames.play_button_hard_png,button_on_png:bundles.buttons_main.frames.play_button_hard_on_png}}}),cleverapps.overrideStyles(cleverapps.styles.CurrentLetterView,{scale:.5}),cleverapps.overrideStyles(cleverapps.styles.EpisodeView,{comingSoon:{character:{json:bundles.hero.jsons.hero_json,animationName:"coming_soon",scale:.85,x:0,y:-120}},Background:{colors:[],width:550,height:910,y:50},title:{y:445},minScale:.75,padding:700}),cleverapps.overrideStyles(cleverapps.styles.UI.RewardElementView,{text:{x:40},icon:{x:-48,y:15},scale:[.8,.8,.8],image:{scale:1},width:200,
height:80,background:[{scale9:!0,width:180,height:70},{scale9:!0,width:180,height:70},{scale9:!0,width:180,height:70}],positions:[{x:{align:"left",dx:88},y:{align:"top",dy:-90}},{x:{align:"left",dx:88},y:{align:"top",dy:-90}},{x:{align:"left",dx:88},y:{align:"top",dy:-90}}]}),cleverapps.overrideStyles(cleverapps.styles.UI.Button,{contentOffset:{y:3}}),cleverapps.overrideStyles(cleverapps.styles.DialogueView,{persons:{default:{animation:"talk",styles:{width:250}}},button:{height:70}}),cleverapps.overrideStyles(cleverapps.styles.MinimalDialogue,{verticalHeight:400,person:{height:280,width:280},text:{bg:{padding:{y:30}}}}),cleverapps.overrideStyles(cleverapps.styles.ExtraWindow,{list:{height:306,width:450},bar:{y:22,size:{width:536,height:40},x:-42},infoTextWidth:600,padding:{x:50},titleAnimation:{x:{align:"center"},y:{align:"top",dy:-7}},window:{titleCloseButtonMargin:30,Border:{x:5,y:260},Title:{offsetX:0,offsetY:75,availableWidth:600,bg:!1},CloseButton:{offsetX:-52,offsetY:-52},
HelpButton:{x:{align:"left",dx:37},y:{align:"top",dy:-36}},contentOffset:-205}}),cleverapps.overrideStyles(cleverapps.styles.RestartWindow,{Title:{offset:110,bg:{image:bundles.main.frames.window_title_bg_png,zIndex:0,adjustToWindow:{width:10,closeButtonOffset:{y:5,x:-20}},x:{align:"center",dx:0},y:{align:"top",dy:-35}}}}),cleverapps.overrideStyles(cleverapps.styles.EpisodesScene,{hidable:!0}),cleverapps.overrideStyles(cleverapps.styles.SideBarIconView,{bg:{width:170,height:170},text:{offsetY:2,textWidth:140,regularFont:{offsetY:0},bg:{width:150,height:40},y:{align:"bottom",dy:8}},lock:{x:{align:"right",dx:-10},y:{align:"top",dy:-10}}}),cleverapps.overrideStyles(cleverapps.styles.SideBarSlot,{margin:30,padding:{horizontal:15}}),cleverapps.overrideStyles(cleverapps.styles.GameScene,{sound:{delay:3.3}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupPlayButton,{button_png:bundles.buttons_main.frames.red_button,button_on_png:bundles.buttons_main.frames.red_button_on}),
cleverapps.overrideStyles(cleverapps.styles.BonusButton,{width:240,height:115,margin:-20,RewardCoins:{offsetY:2}}),cleverapps.overrideStyles(cleverapps.styles.MissionRulesWindow,{animation:{height:670,y:-150,x:-35},subText:{bottom:{y:{align:"bottom",dy:10}}}}),cleverapps.overrideStyles(cleverapps.styles.PiggyBankRulesWindow,{subText:{left:{y:{align:"top",dy:-150}},right:{x:{align:"right",dx:30}}}}),cleverapps.overrideStyles(cleverapps.styles.DailyCupRulesWindow,{animation:{height:600,y:-110},subText:{bottom:{y:{align:"center",dy:-280}},right:{x:{align:"right",dx:30},y:{align:"top",dy:-195}}}}),cleverapps.overrideStyles(cleverapps.styles.RulesWindow,{animation:{height:700,y:-35},subText:{left:{y:{align:"top",dy:-130}},right:{y:{align:"top",dy:-170}}},paddingY:0}),cleverapps.overrideStyles(cleverapps.styles.ExtraRulesWindow,{padding:{y:0},animation:{height:250,y:50}}),cleverapps.overrideStyles(cleverapps.styles.PiggyBankWindow,{padding:{y:15}}),cleverapps.overrideStyles(
cleverapps.styles.SubscriptionWindow,{animation:{person:{scale:1,open:!1,size:{width:300,height:470},position:{y:{align:"center",dy:-50},x:{align:"center",dx:0}}}},window:{Title:cleverapps.styles.Window.Title,Border:{y:40},contentOffset:-40}}),cleverapps.overrideStyles(cleverapps.styles.SubscriptionButtons,{shiftY:10,contentObjectsMargin:2}),cleverapps.overrideStyles(cleverapps.styles.GoldBasedPrize,{width:640,height:180,prizes:{margin:10,marginCol:20,marginRow:20,icon:{width:75,height:65,dy:0}},gold:{backgroundAnimation:{scale:.5},position:{x:{align:"right",dx:-80},y:{align:"top",dy:-80}}},goldRibbonBg:{width:640,height:100,dx:0},position:{x:{align:"center",dx:0},y:{align:"center",dy:25}},everyDayText:{margin:20,width:350}}),cleverapps.overrideStyles(cleverapps.styles.RewardWindow,{textWidth:550,button:{height:110}}),cleverapps.overrideStyles(cleverapps.styles.BoostersSaleWindow,{title:{ribbonTitle:!1},row:{padding:[{x:30,y:20},{x:40,y:20},{x:40,y:20}]},icons:{margins:[{margin:-80},{
margin:-80},{margin:-80}]},progressBar:{bar:{y:6,x:2,width:333},amount:{x:{align:"center",dx:10},y:{align:"center",dy:2}},marginY:35,textMargin:10,prizeMargin:-40,text:{width:300},insideWindow:!0,descriptionText:{width:[320,350,350],marginY:-85},scale:[.8,.8,.8]},label:{x:{align:"right",dx:30},y:{align:"bottom",dy:10}},labelBg:{text:{dy:3},padding:{x:20,y:20}},button:{width:200},heroAnimation:{position:[{x:{align:"center",dx:-250},y:{align:"bottom",dy:-200}},{x:{align:"center",dx:-401},y:{align:"bottom",dy:-33}},{x:{align:"center",dx:-401},y:{align:"bottom",dy:-33}}],scale:[1,1,1]},window:{Title:{offset:120,bg:{image:bundles.boosters_sale.frames.title_bg_png,zIndex:0,adjustToWindow:{width:80,closeButtonOffset:{y:15,x:-60}},x:{align:"center",dx:0},y:{align:"top",dy:-45}}},Border:{x:40,y:220},contentOffset:20,noBackground:!1}}),cleverapps.overrideStyles(cleverapps.styles.MenuBar,{position:{x:{align:"left",dx:0},y:{align:"top",anchor:"center",dy:-55}}}),cleverapps.overrideStyles(
cleverapps.styles.GameMessageView,{pattern:{margin:-1},text:{y:{align:"center",dy:-10}},char:{x:{align:"left",dx:50},y:{align:"bottom",dy:-70}}}),cleverapps.overrideStyles(cleverapps.styles.FavoriteSaleWindow,{margin:40,timer:{padding:{x:15,y:7}},badge:{text:{width:75,height:75,x:{align:"center",dx:0},y:{align:"center",dy:0}},x:{align:"right",dx:120},y:{align:"center",dy:-220},rotation:25},heroAnimation:{position:[{x:{align:"center",dx:-220},y:{align:"bottom",dy:-200}},{x:{align:"center",dx:-401},y:{align:"bottom",dy:-33}},{x:{align:"center",dx:-401},y:{align:"bottom",dy:-33}}],scale:[1.25,1,1]},rewards:{iconHeight:70,margin:10},packTile:{scale:.9,size:{width:350,height:420}},bottom:{text:{width:570}},window:{Border:{y:190},contentOffset:-10}}),cleverapps.overrideStyles(cleverapps.styles.BonusRoundWindow,{textMargin:9,animation:{dx:-20,dy:-50},size:{height:270}}),cleverapps.overrideStyles(cleverapps.styles.WordsListComponent,{word:{height:70,scaleYOnly:!0},bg:!1}),
cleverapps.overrideStyles(cleverapps.styles.CoinsRewardView,{sparkAnimation:!1}),cleverapps.overrideStyles(cleverapps.styles.UI,{TTFText:{verticalAlignment:cc.VERTICAL_TEXT_ALIGNMENT_CENTER,safari:{baseline:.35,verticalAlignment:cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM}}}),cleverapps.overrideStyles(cleverapps.styles.PackWindow,{width:796,height:1e3,Title:{fitTo:{width:400},dx:20,dy:365,font:cleverapps.styles.FONTS.PACKWINDOW_TITLE_TEXT,delay:.6},animation:{default:{idleDelay:-.7,dx:0,dy:0},starterPack0:{idleAnimation:"idle1",introAnimation:"open1"},starterPack:{idleAnimation:"idle2",introAnimation:"open2"},starterPack2:{idleAnimation:"idle3",introAnimation:"open3"}},button:{width:300,height:120,button_png:bundles.buttons.frames.green_button_png,button_on_png:bundles.buttons.frames.green_button_on_png,font:cleverapps.styles.FONTS.PACKWINDOW_BUTTON_TEXT},heroAnimation:{json:bundles.hero.jsons.hero_json,animation:"idle",scale:[.9,1,1],position:[{x:{align:"left",dx:-75},y:{align:"bottom",dy:0}},{
x:{align:"left",dx:0},y:{align:"bottom",dy:0}},{x:{align:"left",dx:0},y:{align:"bottom",dy:0}}]},rewards:{font:cleverapps.styles.FONTS.PACKWINDOW_LABEL_TEXT,delay:2.15,duration:.475,positions:{default:{boosters:{13:{x:-273,y:47},14:{x:-145,y:135},15:{x:267,y:45}},gold:{x:75,y:152}},starterPack:{gold:{x:55,y:192}},starterPack2:{gold:{x:75,y:182}}}}}),cleverapps.overrideStyles(cleverapps.styles.PromotionWindow,{margin:40,contentOffset:20,Button:{margin:-10,scale:.8,contentOffset:{y:10}}}),cleverapps.overrideStyles(cleverapps.styles.ConfirmExitWindow,{text:{y:{align:"center"}}}),cleverapps.overrideStyles(cleverapps.styles.BoostersBefore,{duration:0}),cleverapps.overrideStyles(Forces.GUN,{Finger:{startY:140,x:130,y:170,mobile:{startY:270,x:75,y:270}}}),cleverapps.overrideStyles(cleverapps.styles.LevelStartWindow,{padding:20,contentOffset:0,Button:{width:250,height:110,padding:{y:15}}}),cleverapps.overrideStyles(cleverapps.styles.BoostersBeforeComponent,{contentMargin:50}),
cleverapps.overrideStyles(cleverapps.styles.BoosterBeforeView,{price:{y:{align:"top",dy:25},styles:{isLabelFirst:!0,bg:{dx:0,dy:-6},icon:{scale:.5}}},textAvailable:{bg:{x:{align:"center"},y:{align:"bottom",dy:-33},width:190,height:70},x:{align:"center"},y:{align:"bottom",dy:-10},width:140}}),cleverapps.overrideStyles(cleverapps.styles.CoinsPriceView,{contentMargin:50}),cleverapps.overrideStyles(cleverapps.styles.BoosterBeforeAmountView,{icon:{x:{align:"center"},y:{align:"center",dy:3}},amount:{y:{align:"center",dy:6}}}),cleverapps.overrideStyles(cleverapps.styles.HardLevelStartWindow,{Title:{bg:{image:bundles.boosters_before.frames.hard_level_title_bg_png}}}),cleverapps.overrideStyles(cleverapps.styles.TrickyLevelStartWindow,{Title:{bg:{image:bundles.boosters_before.frames.tricky_level_title_bg_png}}}),cleverapps.overrideStyles(cleverapps.styles.TooltipRewardsView,{textMargin:5,goldIconDy:5}),cleverapps.overrideStyles(cleverapps.styles.LotteryIcon,{positions:{piggy_bank_icon:{x:{
align:"center",dx:0},y:{align:"bottom",dy:36},scale:.75},icon:{scale:.75}}}),cleverapps.overrideStyles(cleverapps.styles.VkLotteryIcon,{positions:{icon:{x:{align:"center",dx:-65},y:{align:"bottom",dy:-5},icon:1},bottom_right:{x:{align:"center",dx:0},y:{align:"bottom",dy:-65}},bottom:{x:{align:"center",dx:0},y:{align:"bottom",dy:-60}}}}),cleverapps.overrideStyles(cleverapps.styles.BackgroundsWindow,{lockWithName:{x:{align:"center"},y:{align:"center",dy:-25}},name:{x:{align:"center"},y:{align:"top",dy:-20}}}),cleverapps.overrideStyles(cleverapps.styles.HeroView,{x:{align:"center",dx:-230},y:{align:"center",dy:-300},scale:.7,vertical:void 0}),cleverapps.overrideStyles(cleverapps.styles.TellWindow,{types:{gardenHelp:{horizontalAlignment:cc.TEXT_ALIGNMENT_LEFT}},hero:{idle:"talk",x:{align:"center",dx:-230},y:{align:"center",dy:-320}}}),cleverapps.overrideStyles(cleverapps.styles.HintButtonBooster,{content:{icon:{x:0,y:45}},arrowOffsetY:34}),cleverapps.overrideStyles(
cleverapps.styles.ToolbarItemView,{countdownView:{regularFontTimerPosition:{x:0,y:-3}}}),cleverapps.styles.xmasNewStyles={heroTitleAnimation:{x:{align:"left",dx:-50},y:{align:"top",dy:270},scale:.8}},cleverapps.overrideStyles(cleverapps.styles.ProgressView,{person:{animation:{idle:"idle",click:"meow",clickSound:bundles.main.urls.meow,x:{align:"center"},y:{align:"center",dy:16}},scale:.8,width:200,height:320,x:{align:"center",dx:0},y:{align:"top",dy:294}},icon:{bg:{padding:{x:16,y:17},y:{align:"center",dy:-6}}}}),cleverapps.overrideStyles(cleverapps.styles.BandButton,{position:{y:{align:"top",dy:50}}}),cleverapps.overrideStyles(cleverapps.styles.SceneDecors,{sceneControlButtonXmas:[{x:{align:"center",dx:-4},y:{align:"top",dy:2},image:bundles.xmas.frames.decor_snow_1}],menuBarItemXmas:[{x:{align:"left",dx:28},y:{align:"top",dy:8},image:bundles.xmas.frames.decor_snow_2}],progressViewDecor:[{x:{align:"center",dx:0},y:{align:"center",dy:0},zOrder:-10,json:bundles.xmas.jsons.decor_progress,
animation:"animation"}],progressViewDecorValentines:[{x:{align:"left",dx:-24},y:{align:"center",dy:35},zOrder:-10,scale:{x:-1,y:1},image:bundles.valentines.frames.valentines_decor_progress_png},{x:{align:"right",dx:24},y:{align:"center",dy:35},zOrder:-10,image:bundles.valentines.frames.valentines_decor_progress_png}],sceneControlButtonValentines:[{x:{align:"center",dx:-6},y:{align:"bottom",dy:-24},image:bundles.valentines.frames.valentines_decor_cloud_3_png}],menuBarItemValentines:[{x:{align:"right",dx:14},y:{align:"top",dy:-37},image:bundles.valentines.frames.valentines_decor_cloud_2_png}],missionWindowValentines:[{json:bundles.hero.jsons.hero_json,animation:"idle",x:{align:"center"},y:{align:"top",dy:220},scale:{x:.7,y:.7}}],menuBarItemEaster:[{x:{align:"right",dx:20},y:{align:"bottom",dy:0},image:bundles.easter.frames.menu_bar_item}],sceneControlButtonEaster:[{x:{align:"right",dx:20},y:{align:"bottom",dy:0},image:bundles.easter.frames.menu_bar_item}],progressViewDecorEaster:[{x:{
align:"left",dx:-37},y:{align:"top",dy:30},zOrder:-1,image:bundles.easter.frames.decor_progress},{x:{align:"right",dx:37},y:{align:"top",dy:30},zOrder:-1,image:bundles.easter.frames.decor_progress,scale:{x:-1,y:1}}],missionWindowEaster:[{json:bundles.hero.jsons.hero_json,animation:"idle",x:{align:"center",dx:70},y:{align:"top",dy:153},scale:{x:.7,y:.7}}],menuBarItemMemorial:[{x:{align:"center",dx:116},y:{align:"bottom",dy:1},image:bundles.memorial.frames.menu_bar_item,scale:{x:1,y:1}}],sceneControlButtonMemorial:[{x:{align:"right",dx:-3},y:{align:"bottom",dy:5},image:bundles.memorial.frames.menu_bar_item}],progressViewMemorial:[{x:{align:"left",dx:-26},y:{align:"top",dy:37},zOrder:-1,image:bundles.memorial.frames.decor_progress},{x:{align:"right",dx:26},y:{align:"top",dy:37},zOrder:-1,scale:{x:-1,y:1},image:bundles.memorial.frames.decor_progress}],missionWindowMemorial:[{json:bundles.hero.jsons.hero_json,animation:"idle",x:{align:"center",dx:45},y:{align:"top",dy:153},scale:{x:.7,y:.7}
}]}),cleverapps.overrideStyles(cleverapps.styles.LargeTileIcon,{wrap:{dy:10},goldForVideo:{wrap:{dy:-5}}}),cleverapps.overrideStyles(cleverapps.styles.BaseProductTile,{badge:{x:{align:"right",dx:30},y:{align:"top",dy:30}}}),cleverapps.overrideStyles(cleverapps.styles.TileBadge,{default:{x:{align:"center",dx:0},y:{align:"center",dy:0},width:80,rotation:30}}),cleverapps.overrideStyles(cleverapps.styles.SmallTileButton,{width:175,text:{dy:0},y:{align:"center",dy:-5}}),cleverapps.overrideStyles(cleverapps.styles.SmallTileRewardsBlock,{width:180,height:65,offsetY:2}),cleverapps.overrideStyles(cleverapps.styles.LargeTileButton,{y:{align:"center",dy:-15},text:{dy:0,padding:-100},width:250,height:80}),cleverapps.overrideStyles(cleverapps.styles.CoinsProductSmallTile,{background:{stitches:{offsetTop:13,offsetBottom:16,offsetLeft:15,offsetRight:15}}}),cleverapps.override(cleverapps.styles.PackProductTile,{width:350,height:636,content:{y:{align:"bottom",dy:60},margin:0},title:{paddingX:100,size:{
width:400,height:110},text:{y:{align:"center",dy:10}}},background:{stitches:{offsetTop:13,offsetBottom:16,offsetLeft:15,offsetRight:15}},limit:{y:-70}}),cleverapps.overrideStyles(cleverapps.styles.LargeTileRewardsBlock,{width:280,height:190,offsetY:0,amountMargin:2,colMargin:15}),cleverapps.overrideStyles(cleverapps.styles.MoreTile,{background:{stitches:{offsetTop:13,offsetBottom:16,offsetLeft:15,offsetRight:15}}}),cleverapps.overrideStyles(cleverapps.styles.SpineSkins,{wardrobe_valentines:{json:void 0},wardrobe_memorial:{json:void 0}}),cleverapps.overrideStyles(cleverapps.styles.CookieJarView,{position:{x:{align:"right",dx:80}},size:{width:250},amountBg:{text:{y:{align:"center",dy:2}}}}),cleverapps.overrideStyles(cleverapps.styles.CharView,{topPaddingWithBg:-8,topPadding:0}),cleverapps.overrideStyles(cleverapps.styles.ProductPriceView,{regularFontOffsetY:-3}),cleverapps.overrideStyles(cleverapps.styles.ChatHeader,{back:{offsetY:0}}),cleverapps.overrideStyles(
cleverapps.styles.WaitWindow,{text:!1}),cleverapps.overrideStyles(cleverapps.styles.ShopUserGoldView,{position:[{y:50},{y:50},{y:50}],items:{gold:{dy:0,blockDy:2}}}),cleverapps.overrideStyles(cleverapps.styles.DailyTasksCompleteAllView,{width:700,height:150,bar:{width:490,height:36,x:{align:"right",dx:-100},y:{align:"center",dy:-40},dy:2,padding:{top:3,bottom:6,left:5,right:5}},prize:{x:{align:"right",dx:-27},y:{align:"center",dy:-31}},icon:{x:{align:"left",dx:2},y:{align:"center",dy:-27}},text:{x:{align:"center",dx:0},y:{align:"top",dy:-10}},mark:{x:{align:"right",dx:-46},y:{align:"center",dy:-36}}}),cleverapps.overrideStyles(cleverapps.styles.SubscriptionTile,{width:350,height:636,content:{y:{align:"bottom",dy:60},margin:0},button:{button_png:void 0,button_on_png:void 0,button_off_png:void 0},description:{width:280,height:190,NATextWidth:229,rowMargin:10,margin:5,text:{width:270}},title:{size:{width:400,height:110},paddingX:40,bg:{y:{align:"center",dy:0}},text:{y:{align:"center",
dy:11}}},background:{stitches:{offsetTop:13,offsetBottom:16,offsetLeft:15,offsetRight:15,stitch_png:bundles.tile_shop.frames.stitch_blue_png,stitch_corner_png:bundles.tile_shop.frames.stitch_corner_blue_png}}}),cleverapps.overrideStyles(cleverapps.styles.LargeTileButton,{attention:{x:{align:"right",dx:7},y:{align:"top",dy:-6}}}),(Keypad=function(e,t){KeypadInterface.call(this),this.game=e,this.level=e.level,this.save=t,this.easy=t.easy;var s=cleverapps.unique(this.level.content.words);this.words=cleverapps.substract(s,t.words),this.level.quick&&(this.quick=!0),cleverapps.Random.seed(0),this.createBlockMixerAndField(t),this.indexes=[],this.pendingMagnifiers=[],t.hintBoosters&&this.createMagnifiers(t.hintBoosters),this.game.onChangeOutcomeListeners.keypad=this.stopTouch.bind(this)}).prototype=Object.create(KeypadInterface.prototype),(Keypad.prototype.constructor=Keypad).prototype.stop=function(){this.trigger("tutorialStopped")},Keypad.prototype.onWin=function(e){this.trigger("win",e)},
Keypad.prototype.listHints=function(){var n=[];return this.field.forEach(function(e,t){for(var s=0;s<e.length;s++)e[s]&&e[s]instanceof LetterBlock&&e[s].isHintSet()&&n.push([t,s])}),n},Keypad.prototype.log=function(){return this.field.map(function(e){return e.map(function(e){return e?e instanceof CoinBlock?e.type:e.symbol:" "}).join("")})},Keypad.prototype.showForce=function(){cleverapps.metha.display({focus:"Keypad.force",action:function(e){this.forceJustShown=!0,this.trigger("force",e)}.bind(this)})},Keypad.prototype.isForceAvailable=function(){return!cleverapps.forces.isShown(Forces.KEYPAD.id)&&!this.game.counter.isActive()},Keypad.prototype.isTrickyForceAvailable=function(){return this.tricky&&!cleverapps.forces.isShown(Forces.TRICKY_LEVEL.id)},Keypad.prototype.showTrickyForce=function(e){this.tutorialWord(),this.showTutorialStep(),this.trigger("trickyForce",e)},Keypad.prototype.loseAnimation=function(e){var i=0;this.field.forEach(function(e,t){e.forEach(function(e,t){if(e){
var s=.1*t+.1*Math.random();setTimeout(function(){e.lose()},1e3*s);var n=s+e.getLoseDuration();i<n&&(i=n)}},this)},this),setTimeout(e,1e3*i)},Keypad.prototype.getMagnifiers=function(){for(var e=[],t=0;t<this.field.length;t++)for(var s=0;s<this.field[t].length;s++){var n=this.field[t][s];n&&n.magnifier&&e.push({x:t,y:s})}return e},Keypad.prototype.createMagnifiers=function(e){var t=0;e.forEach(function(e){this.field[e.x]&&this.field[e.x][e.y]&&(this.field[e.x][e.y].addMagnifier(),t++)},this),this.addMagnifiers(e.length-t,!0)},Keypad.prototype.addMagnifiers=function(e,t){for(var s=[],n=0;n<this.field.length;n++)for(var i=0;i<this.field[n].length;i++)this.field[n][i]instanceof LetterBlock&&!this.field[n][i].magnifier&&s.push(this.field[n][i]);for(var o=0;o<e&&0<s.length;o++){var a=cleverapps.Random.random(0,s.length-1);s[a].addMagnifier(),s.splice(a,1)}t||this.game.storeSave()},Keypad.prototype.createField=function(e,o){return e.map(function(e,i){return"string"==typeof e&&(e=e.split("")),
e.map(function(e,t){if(" "!==e){if(e===CoinBlock.TYPE_COIN||e===CoinBlock.TYPE_BAG)return new CoinBlock(i,t,this,e);var s=new LetterBlock(i,t,e.toLowerCase(),this),n=!1;return o.forEach(function(e){e[0]===i&&e[1]===t&&(n=!0)}),n&&s.setHint(!0),s}}.bind(this))}.bind(this))},Keypad.prototype.randomEmptyPosition=function(){for(var e=[],t=0;t<this.field.length;t++)if(this.field[t].length<this.getHeight()&&this.field[t].length){var s={y:this.field[t].length,x:t};this.field[t][this.field[t].length-1]instanceof CoinBlock||e.push(s)}return cleverapps.Random.choose(e)},Keypad.prototype.addRandomBonus=function(){var e=this.randomEmptyPosition();if(e){var t=CoinBlock.TYPE_COIN,s=.1;this.game.level.episode.isBonusRound()&&(s=1),Math.random()<s&&(t=CoinBlock.TYPE_BAG),this.addBlock(new CoinBlock(e.x,e.y,this,t))}},Keypad.prototype.addBlock=function(e){this.field[e.x].push(e),this.trigger("blockAdded",e),e.showUp()},Keypad.prototype.removeBlock=function(e,t){this.field[e].splice(t,1)},
Keypad.prototype.getState=function(){return{width:this.getWidth(),height:this.getHeight(),state:this.log(),hints:this.listHints()}},Keypad.prototype.createBlockMixerAndField=function(e){var t=0;15<this.game.level.getHumanReadableNumber()?t=.5:5<this.game.level.getHumanReadableNumber()&&(t=.2),this.game.level.episode.isBonusRound()&&(t=0);var s=e.keypad&&BlockMixer.isSameWords(e.keypad.state,this.words,{skip:" "+CoinBlock.TYPE_COIN+CoinBlock.TYPE_BAG});this.tricky=this.level.isTricky()&&(this.game.emptySave||!s);var n=this.mixer=new BlockMixer({reverse:t,quick:this.quick,easy:this.easy,fillEmpty:this.tricky||cleverapps.flags.fillEmpty});if(s)return n.setSize(e.keypad),void(this.field=this.createField(e.keypad.state,e.keypad.hints||[]));this.guessSize(),this.field=this.createField(n.getState(),[])},Keypad.prototype.guessSize=function(){if(1===Keypad.SIZES.length)return this.mixer.setSize(Keypad.SIZES[0]),void this.mixer.mix(this.words);var t=0,s=0;this.words.forEach(function(e){
t+=e.length,e.length>s&&(s=e.length)});for(var e=0;e<Keypad.SIZES.length;e++){var n=Keypad.SIZES[e];if(!(.85*(n.width*n.height)<t||n.width+1<s)&&(this.mixer.setSize(n),this.mixer.mix(this.words),this.mixer.state))break}},Keypad.SIZES=[{width:6,height:8},{width:8,height:10},{width:9,height:11},{width:10,height:13},{width:11,height:14},{width:12,height:15},{width:14,height:18},{width:16,height:20},{width:18,height:23},{width:20,height:26}],"wordheaps"===cleverapps.config.name&&(Keypad.SIZES=[{height:6,width:8},{height:8,width:10},{height:9,width:11},{height:10,width:13},{height:11,width:14},{height:12,width:15},{height:14,width:18},{height:16,width:20},{height:18,width:23},{height:20,width:26}]),Keypad.prototype.getWidth=function(){return this.mixer.width},Keypad.prototype.getHeight=function(){return this.mixer.height},Keypad.prototype.moveExists=function(){return this.words.some(function(e){return this.findWordIndexes(e)},this)},Keypad.prototype.activateGun=function(e){this.easy=!0,
this.mixer.options.easy=!0,this.game.counter.setTimeout(function(){this.addRandomBonus(),this.addRandomBonus(),this.addRandomBonus(),e()}.bind(this),5e3);var t=new ActionPlayer;this._shuffle(!0),this.game.storeSave(),this.trigger("beforeGun"),t.add(function(e){setTimeout(e,1e3*this.getBeforeGunDuration())}.bind(this)),t.add(function(e){this.trigger("resize",!0),this.trigger("afterGun"),e()}.bind(this)),t.add(function(e){setTimeout(e,1e3*this.getAfterGunDuration())}.bind(this)),t.add(e),t.play()},Keypad.prototype.getBeforeGunDuration=function(){return 2},Keypad.prototype.getAfterGunDuration=function(){return 2},Keypad.prototype._shuffle=function(i){for(var e=this.field.map(function(e){return e.reduce(function(e,t){return e+(t&&t instanceof LetterBlock&&t.symbol||"")},"")}).filter(function(e){return 0<e.length}),t=0;t<10;t++){var s=this.mixer.mix(this.words);if(void 0!==s&&!BlockMixer.areStatesSame(s,e))break}void 0===this.mixer.state&&(this.guessSize(),i||this.trigger("resize"));for(
var o={},n=[],a=0;a<this.field.length;a++)for(var r=0;r<this.field[a].length;r++)if(this.field[a][r]instanceof LetterBlock){var l=this.field[a][r].symbol;o[l]||(o[l]=[]),o[l].push(this.field[a][r])}else n.push(this.field[a][r]);for(var l in o)cleverapps.Random.shuffle(o[l]);for(var l in this.field=this.mixer.state.map(function(e,n){return"string"==typeof e&&(e=e.split("")),e.map(function(e,t){var s=o[e].pop();return s.move(n,t,i),s})}),o)o[l].forEach(function(e){if(this.easy)e.remove(!0);else{var t=this.randomEmptyPosition();t?(e.move(t.x,t.y),this.field[t.x][t.y]=e):e.remove()}},this);n.forEach(function(e){var t=this.randomEmptyPosition();t?(e.move(t.x,t.y,i),this.field[e.x].push(e)):e.collect()},this)},Keypad.prototype.shuffle=function(){this._shuffle(),this.trigger("shuffle"),this.game.counter.setTimeout(function(){},700)},Keypad.prototype.amountKeys=function(){return this.game.board.words.length},Keypad.prototype.magnifiersShowUp=function(s){for(var n=0,e=0;e<this.field.length;e++
)this.field[e].forEach(function(e){if(e&&e.magnifier){var t=s?0:100*n;this.game.counter.setTimeout(function(){e.magnifier.showUp(s)},t),n++}}.bind(this))},Keypad.prototype.showUp=function(e,t){var s=function(){this.magnifiersShowUp(t),this.trigger("showUp"),e()}.bind(this);if(t)return this.field.forEach(function(e){e.forEach(function(e){e&&e.showUp(!0)},this)},this),void s();var i=0,o=Number.MAX_VALUE;this.field.forEach(function(e,t){e.forEach(function(e,t){if(e){var s=.1*t+.1*Math.random();setTimeout(function(){e.showUp()},1e3*s);var n=s+e.getShowUpDuration();i<n&&(i=n),0===t&&n<o&&(o=n)}},this)},this),setTimeout(function(){cleverapps.audio.playSound(bundles.game.urls.letter_drop_effect_0)},1e3*o),setTimeout(s,1e3*i+100)},Keypad.prototype.tutorialWord=function(){this.isTutorialRunning=!0},Keypad.prototype.showTutorialStep=function(){if(this.isTutorialRunning)for(var e=0;e<this.words.length;e++){var t=this.findWordIndexes(this.words[e]);if(t){this.trigger("tutorialStarted",t),
this.isTutorialRunning=!1;break}}},Keypad.prototype.status=function(t,e){var s=e.length<2?void 0:{x:e[1].x-e[0].x,y:e[1].y-e[0].y};this.reset(),e.forEach(function(e){e.status(t,s)}.bind(this)),this.trigger("status",t,e)},Keypad.prototype.fall=function(){for(var e=this.field,t=0,s=0;s<this.field.length;s++){for(var n=[],i=0,o=0;o<this.field[s].length;o++)if(e[s][o]){if(n.length>i){var a=n[i],r=e[s][o].move(a.x,a.y,{updateKeypad:!0});t<r&&(t=r),i++,n.push({x:s,y:o})}}else n.push({y:o,x:s});var l=n.length-i;l&&this.field[s].splice(-l,l)}0<t&&this.game.counter.setTimeout(function(){},1e3*t+50)},Keypad.prototype.slide=function(){for(var e=this.field,t=!1,s=0;s<e.length/2;s++){if(0<e[s].length){t=!0;break}if(0<e[e.length-s-1].length)break}var n=0,i=[],o=0,a=!1;for(s=0;s<e.length;s++){var r=s;if(t&&(r=e.length-s-1),0<e[r].length)if(a){if(i.length>o){for(var l=i[o],c=0;c<e[r].length;c++){var p=e[r][c],d=p.move(l,p.y,{updateKeypad:!0});n<d&&(n=d)}o++,i.push(r),e[r]=[]}}else a=!0;else a&&i.push(
r)}0<n&&this.game.counter.setTimeout(function(){},1e3*n+50)},Keypad.prototype.processMagnifiers=function(){var e=this.pendingMagnifiers.shift();e&&e.use()},Keypad.prototype.collectLeftMagnifiers=function(){if(0===this.words.length)for(var e=0;e<this.field.length;e++)for(var t=0;t<this.field[e].length;t++)this.field[e][t]&&this.field[e][t].magnifier&&(this.pendingMagnifiers.push(this.field[e][t].magnifier),this.field[e][t].magnifier.beforeUse(),delete this.field[e][t].magnifier)},Keypad.prototype.markDiscovered=function(e,t){t.forEach(function(e){e.removed=!0,e.magnifier&&(this.pendingMagnifiers.push(e.magnifier),e.magnifier.beforeUse()),this.field[e.x][e.y]=void 0}.bind(this)),this.words=cleverapps.substract(this.words,[e]),this.pendingMagnifiers[0]&&this.pendingMagnifiers[0].move()},Keypad.prototype.reset=function(){for(this.trigger("reset");0<this.indexes.length;)this.pop()},Keypad.prototype.stopTouch=function(){this.indexes.forEach(function(e){
this.field[e.x][e.y]&&this.field[e.x][e.y].unhighlight()}.bind(this)),this.reset(),this.freeFocus(),this.trigger("touchStopped")},Keypad.prototype.combineWord=function(e){return e.map(function(e){return e.symbol}).join("")},Keypad.prototype.updateSelection=function(e,t){for(var s,n=[e],i=e.y,o=e.x,a=1;a<t.length&&(i+=t.direction.y,o+=t.direction.x,this.field[o]&&this.field[o][i]&&this.field[o][i]instanceof LetterBlock);a++)n.push(this.field[o][i]);for(s=0;s<this.indexes.length&&s<n.length&&(this.indexes[s].x===n[s].x&&this.indexes[s].y===n[s].y);s++);for(a=0;this.indexes.length>s;a++)this.pop();for(var r=this.indexes.length;r<n.length;r++)this.push(n[r])},Keypad.prototype.touchBegan=function(e){return cleverapps.forces.isRunningForce()&&cleverapps.forces.closeRunningForce(),this.trigger("tutorialStopped"),this.game.outcome===GameBase.OUTCOME_UNKNOWN&&(!this.game.counter.isActive()&&(!!this.grabFocus()&&(this.updateSelection(e,{direction:BlockMixer.DIRECTIONS[0],length:1}),!0)))},
Keypad.prototype.touchMoved=function(e,t){this.game.counter.isActive()||this.updateSelection(e,t)},Keypad.prototype.touchEnded=function(){this.game.counter.isActive()||(this.trigger("attempt",this.indexes.slice()),this.freeFocus(),!this.game.counter.isActive()&&levels.tutorial.isRunning()&&(this.tutorialWord(),this.showTutorialStep()))},Keypad.prototype.push=function(e){this.indexes.push(e),e.highlight(),this.trigger("push",e)},Keypad.prototype.pop=function(){this.indexes.pop().unhighlight(),this.trigger("pop")},Keypad.prototype.findWordIndexes=function(e){var t=BlockMixer.contains(this.field,e,{details:!0});if(t)return t.indexes.map(function(e){return this.field[e.x][e.y]},this)},Keypad.prototype.isOpened=function(e){var t=this.findWordIndexes(e);return t&&t.length===t.filter(function(e){return e.isHintSet()}.bind(this)).length},Keypad.prototype.findOpenedWord=function(){for(var e=0;e<this.words.length;e++){var t=this.words[e];if(this.isOpened(t))return this.findWordIndexes(t)}},
Keypad.prototype.selectHintPosition=function(){var n=[];return this.words.forEach(function(s){var e=this.findWordIndexes(s);e&&e.forEach(function(e,t){e.isHintSet()||n.push({word:s,index:t,letter:e})}.bind(this))}.bind(this)),cleverapps.Random.mathChoose(n)},cleverapps.config.debugMode&&(Keypad.prototype.showWordDebug=function(){for(var e=cleverapps.Random.shuffle(this.words),t=0;t<e.length;t++){var s=this.findWordIndexes(e[t]);if(s){s.forEach(function(e){e.highlight(),setTimeout(function(){e.unhighlight()}.bind(this),500)}.bind(this));break}}},Keypad.prototype.showExtraWordDebug=function(){for(var e=Object.keys(this.game.extra.wordsSet),t=0;t<e.length;t++){var s=e[t];if(-1===this.words.indexOf(s)&&!this.game.extra.foundWordsSet[s]){var n=this.findWordIndexes(s);if(n){n.forEach(function(e){e.highlight(),setTimeout(function(){e.unhighlight()}.bind(this),500)}.bind(this));break}}}}),Keypad.prototype.grabFocus=function(){return"KeypadControl"===cleverapps.metha.focus||(
cleverapps.metha.display({focus:"KeypadControl",control:["MenuBarGoldItem","MenuBarCryptexItem","SceneControlButtonsView","cookieJar","gun","rewardElementClover","hint_5","hint_3","flyingAd","hintView"],action:function(e){this.onceControlFinished=e}.bind(this)}),"KeypadControl"===cleverapps.metha.focus)},Keypad.prototype.freeFocus=function(){this.onceControlFinished&&(this.onceControlFinished(),delete this.onceControlFinished)},(KeypadView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),this.keypad=e,this.lettersContainer=new cc.Node,this.lettersContainer.setAnchorPoint2(),this.addChild(this.lettersContainer),this.animationsContainer=new cc.Node,this.animationsContainer.setAnchorPoint2(),this.addChild(this.animationsContainer),this.createField(),this.addTouchListener(),e.on("tutorialStarted",this.createListener(this.drawTutorialWord.bind(this))),e.on("tutorialStopped",this.createListener(this.removeTutorialWord.bind(this))),e.on("force",this.createListener(
this.showForce.bind(this))),e.on("trickyForce",this.createListener(this.showTrickyForce.bind(this))),e.on("shuffle",this.createListener(this.shuffle.bind(this))),e.on("status",this.createListener(this.status.bind(this))),e.on("beforeGun",this.createListener(this.beforeGun.bind(this))),e.on("afterGun",this.createListener(this.afterGun.bind(this))),e.on("blockAdded",this.createListener(this.addBlockView.bind(this))),e.on("touchStopped",this.createListener(this.removeTouchListener.bind(this))),e.on("resize",this.createListener(this.resize.bind(this))),e.on("win",this.createListener(this.onWin.bind(this))),e.on("push",this.createListener(this.onPush.bind(this))),e.on("pop",this.createListener(this.onPop.bind(this))),this.resize(!0),this.createSounds()},createSounds:function(){this.sounds=[];for(var e=0;bundles.game.urls["nota_"+e];)this.sounds.push(bundles.game.urls["nota_"+e]),e++},onPush:function(){cleverapps.audio.playSound(this.sounds[(this.keypad.indexes.length-1)%this.sounds.length])
},onPop:function(){cleverapps.audio.playSound(this.sounds[this.keypad.indexes.length%this.sounds.length])},onWin:function(e){cleverapps.flags.keypadOnWinDisabled?e():this.runAction(new cc.Sequence(new cc.ScaleTo(.3,0).easing(cc.easeIn(2)),new cc.CallFunc(e)))},status:function(e,t){if(e===WordGame.STATUSES.BOARD&&t.forEach(function(e,t){var s=new cleverapps.Spine(bundles.game.jsons.remove_letter_sparkles_json);this.animationsContainer.addChild(s),s.setPositionRound(BaseBlockView.alignInTheGrid(e.x,e.y)),this.runAction(new cc.Sequence(new cc.DelayTime(.075*t+.1),new cc.CallFunc(function(){s.setAnimation(0,"animation",!1),s.setCompleteListenerRemove()})))}.bind(this)),e===WordGame.STATUSES.BOARD||e===WordGame.STATUSES.EXTRA){var s=cc.director.getRunningScene().scene,n=BaseBlockView.alignInTheGrid(t[0].x,t[0].y),i=BaseBlockView.alignInTheGrid(t[t.length-1].x,t[t.length-1].y);n=s.convertToNodeSpace(this.lettersContainer.convertToWorldSpace(n)),i=s.convertToNodeSpace(
this.lettersContainer.convertToWorldSpace(i)),KeypadView.LAST_WORD_POSITION=cc.p((n.x+i.x)/2,(n.y+i.y)/2)}},showForce:function(e){cleverapps.forces.isAvailable(this,Forces.KEYPAD)?(cleverapps.forces.create(this,Forces.KEYPAD,{onButtonClicked:function(){this.removeTutorialWord(),levels.tutorial.stop()}.bind(this)}),cleverapps.forces.onceForceClosed=e):e()},showTrickyForce:function(e){cleverapps.forces.isAvailable(this,Forces.TRICKY_LEVEL)?(cleverapps.forces.create(this,Forces.TRICKY_LEVEL),cleverapps.forces.onceForceClosed=e):e()},removeTouchListener:function(){this.touchListener&&(cc.eventManager.removeListener(this.touchListener),delete this.touchListener)},addBlockView:function(e){if(void 0!==e){var t=BaseBlockView.CreateView(e);this.lettersContainer.addChild(t)}},createField:function(){this.keypad.field.forEach(function(e){e.forEach(this.addBlockView,this)},this)},resize:function(e){var t,s,n=this.getContentSize();if(this.setContentSize(this.keypad.getWidth(
)*cleverapps.styles.BaseBlockView.width,this.keypad.getHeight()*cleverapps.styles.BaseBlockView.height),cleverapps.styles.KeypadView.fixedPositionAndScale)t=cleverapps.styles.KeypadView.fixedPositionAndScale.scale,s=cleverapps.styles.KeypadView.fixedPositionAndScale.position,e=!0;else{var i=cleverapps.styles.KeypadView.phone;cleverapps.wideMode.mode!==cleverapps.WideMode.VERTICAL&&(i=cleverapps.styles.KeypadView.nonphone);var o=cleverapps.UI.getSceneOffsetY(),a=cleverapps.UI.getSceneSize(),r=a.width*i.widthMultiplier,l=(r-i.paddingLeft-i.paddingRight)/this.width,c=(i.height+o)/this.height;t=Math.min(l,c,1);var p=(a.width-r+i.paddingLeft+(a.width-i.paddingRight))/2;"wordheaps"===cleverapps.config.name&&(p=a.width-r+this.width/2*t+i.paddingLeft),s=cc.p(p,this.height/2*t+i.paddingBottom-o),this.setPositionRound(this.x+(this.width*this.scale-n.width*this.scale)/2,this.y+(this.height*this.scale-n.height*this.scale)/2)}e?(this.setScale(t),this.setPositionRound(s)):this.runAction(
new cc.Spawn(new cc.ScaleTo(.7,t),new cc.MoveTo(.7,s))),this.animationsContainer.setContentSize2(this.getContentSize()),this.animationsContainer.setPositionRound(this.width/2,this.height/2),this.lettersContainer.setContentSize2(this.getContentSize()),this.lettersContainer.setPositionRound(this.width/2,this.height/2)},removeTutorialWord:function(){this.finger&&(this.finger.removeFromParent(!0),this.finger=!1),this.tutorialBlocks&&(this.tutorialBlocks.forEach(function(e){e.unhighlight()}),delete this.tutorialBlocks)},calcGunTargetPosition:function(e){var t=cc.director.getRunningScene().scene;return e.getParent().convertToNodeSpace(t.convertToWorldSpace(cc.p(0,t.height+e.height/2+e.block.y*e.height+cleverapps.UI.getSceneOffsetY())))},beforeGun:function(){var i=this.lettersContainer.children.slice().sort(function(e,t){return t.y-e.y}),o=this.keypad.getBeforeGunDuration()-.3;cleverapps.audio.playSound(bundles.game.urls.gun_flight_effect),i.forEach(function(e,t){e.stopAllActions()
;var s=this.calcGunTargetPosition(e),n=t*o/i.length;e.runAction(new cc.Sequence(new cc.DelayTime(n),new cc.CallFunc(function(){e.fall(.3,cc.p(e.x,s.y))})))}.bind(this))},afterGun:function(){for(var i=this.keypad.getAfterGunDuration()-.3,e=this.lettersContainer.children.slice().filter(function(e){return e.block.removed&&e.removeFromParent(!0),!e.block.removed}).sort(function(e,t){return t.y-e.y}),t=0;t<this.keypad.field.length;t++)this.runAction(new cc.Sequence(new cc.DelayTime(t*i/this.keypad.field.length+.3),new cc.CallFunc(function(){cleverapps.audio.playSound(bundles.game.urls.gun_drop_effect)}.bind(this))));e.forEach(function(e){e.stopAllActions(),e.setPositionRound(this.calcGunTargetPosition(e)),e.setLocalZOrder(e.block.y);var t=e.block.x*i/this.keypad.field.length,s=BaseBlockView.alignInTheGrid(e.block.x,e.block.y),n=cc.p(s.x,e.y);e.setPositionRound(n),e.runAction(new cc.Sequence(new cc.DelayTime(t),new cc.CallFunc(function(){e.fall(.3,s)})))}.bind(this))},
drawTutorialWord:function(t,e){this.finger||(this.tutorialBlocks=t,this.finger=new FingerView({}),this.finger.setLocalZOrder(10),this.addChild(this.finger),this.finger.delay(1.2),this.finger.fadeIn(BaseBlockView.alignInTheGrid(t[0].x,t[0].y)),this.finger.press(),this.finger.addAction(function(e){t[0].highlight(),e()}.bind(this)),this.finger.delay(.2),t.slice(1).forEach(function(t){this.finger.moveTo(BaseBlockView.alignInTheGrid(t.x,t.y)),this.finger.addAction(function(e){t.highlight(),e()}.bind(this))},this),this.finger.unPress(),this.finger.addAction(function(e){t.forEach(function(e){e.unhighlight()}),e()}),this.finger.fadeOut(),(e=e||{looped:!0}).callback&&(e.looped=!1,e.onFinish=function(){e.callback(),this.finger.removeFromParent(),delete this.finger}.bind(this)),this.finger.run(e))},shuffle:function(){this.lettersContainer.children.forEach(function(e){e.stopAllActions();var t=BaseBlockView.alignInTheGrid(e.block.x,e.block.y);e.setLocalZOrder(e.block.y);var s=Math.sqrt(Math.pow(
t.x-this.x,2)+Math.pow(t.y-this.y,2));e.runAction(new cc.Spawn(new cc.MoveTo(s/700,t).easing(cc.easeBackInOut(.6)),new cc.ScaleTo(.3,1)))},this);var e=new cleverapps.Spine(bundles.game.jsons.shuffle_json);cc.director.getRunningScene().scene.addChild(e),e.setPositionRound(cleverapps.styles.KeypadView.shuffleAnimation),e.setAnimation(0,"animation",!1),e.setCompleteListenerRemove(),cleverapps.audio.playSound(bundles.game.urls.shuffle_effect)},addTouchListener:function(){this.touchListener=cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this)},this),cleverapps.isPixiJs()||"undefined"!=typeof document&&document.body&&document.body.addEventListener("mouseleave",function(){cc.inputManager.handleTouchesEnd([cc.inputManager.getTouchByXY(0,0,cc.p(0,0))])}.bind(this))},onTouchBegan:function(e){if(void 0!==this.touchId)return!1
;var t=this.convertTouchToNodeSpace(e);if(cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t)){var s=this.calcLetterTouched(t);if(s)if(this.keypad.touchBegan(s.block))return this.touchId=e.getID(),this.startLetter=s,!0}return!1},onTouchMoved:function(e){if(e.getID()!==this.touchId)return!1;var t=this.calcDirection(this.startLetter,this.convertTouchToNodeSpace(e));return t?(this.keypad.touchMoved(this.startLetter.block,t),!0):void 0},onTouchEnded:function(e){return e.getID()===this.touchId&&(this.keypad.touchEnded(),this.touchId=void 0,!(this.startLetter=void 0))}})).prototype.calcLetterTouched=function(e){var t=Math.floor(e.x/cleverapps.styles.BaseBlockView.width),s=Math.floor(e.y/cleverapps.styles.BaseBlockView.height);if(this.keypad.field[t]&&this.keypad.field[t][s]&&this.keypad.field[t][s]instanceof LetterBlock)return this.keypad.field[t][s].onLocateView()},KeypadView.prototype.calcDirection=function(e,t){if(cc.rectContainsPoint(cc.rect(0,0,this.width,this.height),t)){for(
var s,n=t.x-e.x,i=t.y-e.y,o=Number.MAX_VALUE,a=0;a<BlockMixer.DIRECTIONS.length;a++){var r=BlockMixer.DIRECTIONS[a],l=Math.pow(n-r.x,2)+Math.pow(i-r.y,2);l<o&&(o=l,s=r)}return n*=s.x,i*=s.y,{direction:s,length:Math.round(n/cleverapps.styles.BaseBlockView.width)+Math.round(i/cleverapps.styles.BaseBlockView.height)+1}}},cleverapps.styles.KeypadView={letter:{width:100,height:100},shuffleAnimation:{x:{align:"center",dx:0},y:{align:"center",dy:-100}},phone:{widthMultiplier:1,paddingBottom:145,paddingLeft:12,paddingRight:12,height:740},nonphone:{widthMultiplier:1,paddingBottom:60,paddingLeft:270,paddingRight:270,height:750}},FakeRequestSender.REQUEST_PERIOD="3 hours",cleverapps.overrideStyles(cleverapps.styles.FriendRequestView,{width:500,height:180,close:{x:-20,y:-15},Request:{width:240,height:60,x:50,y:50,font:cleverapps.styles.FONTS.WINDOW_SMALL_TEXT},Icon:{x:215,y:-25},Avatar:{Margin:{x:45,y:5}},processButton:{width:180,height:70,x:35,y:-30,
font:cleverapps.styles.FONTS.GREEN_BUTTON_SMALL_TEXT,noImage:{x:110,y:-30},text:{y:2}}}),cleverapps.overrideStyles(cleverapps.styles.BountyItemView,{Background:{image:bundles.main.frames.bounty_item_bg,width:670},icon:{x:80},avatars:{x:170,width:235},Button:{width:160,height:80,x:-20,font:cleverapps.styles.FONTS.GREEN_BUTTON_SMALL_TEXT,text:{y:2}}}),cleverapps.overrideStyles(cleverapps.styles.BountyWindow,{width:670,height:100,noFriends:{width:600,height:400,Text:{y:180,width:550,height:200},Button:{width:450,height:120,y:-20}}});var BaseBlock=function(e,t,s){cleverapps.EventEmitter.call(this),this.x=e,this.y=t,this.keypad=s,this.game=s.game};BaseBlock.prototype=Object.create(cleverapps.EventEmitter.prototype),(BaseBlock.prototype.constructor=BaseBlock).prototype.move=function(e,t,s){s=s||{};var n=this.getMoveDuration(this.x,this.y,e,t);return s.updateKeypad&&(this.keypad.field[this.x][this.y]=void 0,this.keypad.field[e][t]=this),this.x=e,this.y=t,s.silent||this.trigger("move",n),n},
BaseBlock.prototype.lose=function(){this.trigger("lose")},BaseBlock.prototype.getMoveDuration=function(e,t,s,n){return Math.max(.15,.05*Math.sqrt((e-s)*(e-s)+(t-n)*(t-n)))},BaseBlock.prototype.getLoseDuration=function(){return.5},BaseBlock.prototype.getShowUpDuration=function(){return.5},BaseBlock.prototype.getViewClass=function(){},BaseBlock.prototype.showUp=function(e){this.trigger("showUp",e)},BaseBlock.prototype.remove=function(e){this.removed=!0,e||this.trigger("remove")};var BaseBlockView=cc.Node.extend({ctor:function(e){this._super(),this.setAnchorPoint2(),this.block=e;var t=cleverapps.styles.BaseBlockView;this.setContentSize2(t),this.setAnchorPoint2(),this.setPositionRound(BaseBlockView.alignInTheGrid(this.block.x,this.block.y)),this.setCascadeOpacityEnabled(!0),this.setLocalZOrder(this.block.y),this.block.on("move",this.createListener(this.move.bind(this))),this.block.on("lose",this.createListener(this.lose.bind(this))),this.block.on("remove",this.createListener(
this.removeFromParent.bind(this,!0))),this.block.onLocateView=this.createListener(this.locateView.bind(this)),this.setVisible(!1)},locateView:function(){return this},move:function(e){this.fall(e,BaseBlockView.alignInTheGrid(this.block.x,this.block.y))},fall:function(e,t){this.stopAllActions(),this.runAction(new cc.MoveTo(e,t).easing(cc.easeIn(2)))},lose:function(){var e=cc.director.getRunningScene().scene,t=this.getParent().convertToNodeSpace(e.convertToWorldSpace(cc.p(0,-2*this.height-cleverapps.UI.getSceneOffsetY())));this.fall(this.block.getLoseDuration(),cc.p(this.x,t.y))},showUpAnimation:function(){this.fall(this.block.getShowUpDuration(),BaseBlockView.alignInTheGrid(this.block.x,this.block.y))},showUp:function(e){if(e)this.setVisible(!0);else{var t=cc.director.getRunningScene().scene,s=this.getParent().convertToNodeSpace(t.convertToWorldSpace(cc.p(0,t.height+this.height/2+cleverapps.UI.getSceneOffsetY())));this.setPositionRound(this.x,s.y),this.setVisible(!0),
this.showUpAnimation()}}});BaseBlockView.GetView=function(e){return e.onLocateView()},BaseBlockView.CreateView=function(e){return new(e.getViewClass())(e)},BaseBlockView.alignInTheGrid=function(e,t){return cc.p((e+.5)*cleverapps.styles.BaseBlockView.width,(t+.5)*cleverapps.styles.BaseBlockView.height)},cleverapps.styles.BaseBlockView={width:100,height:98};var LetterBlock=function(e,t,s,n){BaseBlock.call(this,e,t,n),this.symbol=s};LetterBlock.prototype=Object.create(BaseBlock.prototype),(LetterBlock.prototype.constructor=LetterBlock).prototype.getViewClass=function(){return LetterBlockView},LetterBlock.prototype.status=function(e,t){e===WordGame.STATUSES.WRONG&&this.trigger("wrong",t),e===WordGame.STATUSES.BOARD&&this.trigger("board")},LetterBlock.prototype.unhighlight=function(){this.trigger("unhighlight")},LetterBlock.prototype.highlight=function(){this.trigger("highlight")},LetterBlock.prototype.setHint=function(e,t){this.hint!==e&&(this.hint=e,this.trigger("setHint",t))},
LetterBlock.prototype.isHintSet=function(){return this.hint},LetterBlock.prototype.addMagnifier=function(){this.magnifier=new Magnifier(this.game),this.trigger("addMagnifier")};var Magnifier=function(e){cleverapps.EventEmitter.call(this),this.game=e};Magnifier.prototype=Object.create(cleverapps.EventEmitter.prototype),(Magnifier.prototype.constructor=Magnifier).prototype.showUp=function(e){this.trigger("showUp",e)},Magnifier.prototype.beforeUse=function(){this.trigger("beforeUse")},Magnifier.prototype.move=function(){this.ready=!0,this.trigger("move")},Magnifier.prototype.use=function(e){var t=this.game.hintBooster.findHint();t?this.addHint(t,e):this.addGold(e),this.trigger("use",t)},Magnifier.prototype.addHint=function(e,t){this.game.counter.setTimeout(function(){this.game.hintBooster.addHint(e,{startPos:MagnifierView.getCollectPosition(),hintAnimationDuration:.3}),t&&t()}.bind(this),this.ready?400:800)},Magnifier.prototype.addGold=function(e){this.game.counter.setTimeout(function(){
cleverapps.user.setGold(cleverapps.user.gold+Magnifier.GOLD),this.game.counter.setTimeout(function(){e&&e()},200)}.bind(this),this.ready?800:1600)},Magnifier.GOLD=15;var LetterBlockView=BaseBlockView.extend({ctor:function(e){this._super(e),this.charView=new CharView(e.symbol.toUpperCase(),{noBg:!0}),this.addChild(this.charView),this.charView.setPositionRound(this.width/2,this.height/2),this.charView.setColor(this.getLetterColor());var t=cleverapps.styles.LetterBlockView;this.bg=new cc.Sprite(this.getBgImage()),this.addChild(this.bg),this.bg.setLocalZOrder(-1),this.bg.setPositionRound(this.width/2+t.bg.offset.x,this.height/2+t.bg.offset.y),this.baseScale=this.scale,this.updateHint({silent:!0}),this.block.magnifier&&this.addMagnifier(),this.block.on("unhighlight",this.createListener(this.unhighlight.bind(this))),this.block.on("highlight",this.createListener(this.highlight.bind(this))),this.block.on("wrong",this.createListener(this.wrong.bind(this))),this.block.on("board",
this.createListener(this.board.bind(this))),this.block.on("setHint",this.createListener(this.updateHint.bind(this))),this.block.on("addMagnifier",this.createListener(this.addMagnifier.bind(this))),this.block.on("showUp",this.createListener(this.showUp.bind(this)))},board:function(){this.bg.setSpriteFrame(this.getBgImageHighlighted()),this.bg.setColor(this.getBgColorHighlighted()),this.charView.setColor(this.getLetterColorHighlighted())},wrong:function(e){var t=cleverapps.styles.LetterBlockView,s=0!==e.col?t.wrong.dt:0,n=0!==e.row?t.wrong.dt:0,i=BaseBlockView.alignInTheGrid(this.block.x,this.block.y);this.runAction(new cc.Sequence(new cc.MoveTo(.05,i.x+s,i.y+n).easing(cc.easeOut(2)),new cc.MoveTo(.05,i.x-s,i.y-n).easing(cc.easeOut(2)),new cc.MoveTo(.05,i.x+s/2,i.y+n/2).easing(cc.easeOut(2)),new cc.MoveTo(.05,i.x,i.y).easing(cc.easeOut(2))))},addMagnifier:function(){this.magnifier=new MagnifierView(this.block.magnifier),this.addChild(this.magnifier)},updateHint:function(e){e=e||{}
;var t=function(){this.block.removed||(this.bg.setSpriteFrame(this.getBgImage()),this.bg.setColor(this.getBgColor()))}.bind(this),s=e.hintAnimationDuration||0;0===s?t():this.bg.runAction(new cc.Sequence(new cc.DelayTime(s),new cc.CallFunc(t))),this.block.hint&&!e.silent&&(this.runAction(new cc.Sequence(new cc.DelayTime(s),new cc.CallFunc(function(){this.runScaleAnimation()}.bind(this)))),e.hintAnimationDuration&&this.addHintAnimation(e.hintAnimationDuration,e.startPos))},addHintAnimation:function(e,t){cleverapps.UI.flyHintAnimation(this,{duration:e,startPosition:t,changeParentToTarget:!0})},runScaleAnimation:function(){this.setScale(this.baseScale),this.runAction(new cc.Sequence(new cc.ScaleTo(.1,1.2*this.baseScale),new cc.ScaleTo(.1,this.baseScale)))},getBgColor:function(){return this.block.hint&&LetterBlockView.hintColor?LetterBlockView.hintColor:cleverapps.styles.COLORS.WHITE},getBgColorHighlighted:function(){return cleverapps.styles.COLORS.WHITE},getBgImage:function(){
return this.block.hint?LetterBlockView.bgImageHint||bundles.game.frames.letter_keypad_bg_plain_png:LetterBlockView.bgImage},getBgImageHighlighted:function(){return LetterBlockView.bgImageHighlighted},getLetterColor:function(){return LetterBlockView.letterColor||cleverapps.styles.COLORS.WHITE},getLetterColorHighlighted:function(){return LetterBlockView.letterColorHighlighted||cleverapps.styles.COLORS.WHITE},highlight:function(){this.bg.setSpriteFrame(this.getBgImageHighlighted()),this.bg.setColor(this.getBgColorHighlighted()),this.charView.setColor(this.getLetterColorHighlighted()),this.runScaleAnimation()},unhighlight:function(){this.bg.setSpriteFrame(this.getBgImage()),this.bg.setColor(this.getBgColor()),this.charView.setColor(this.getLetterColor())}});cleverapps.styles.LetterBlockView={wrong:{dt:8},bg:{offset:{x:0,y:3}},hint:{start:{dx:0,dy:30}}};var MagnifierView=cc.Node.extend({ctor:function(e){this._super(),this.magnifier=e,this.setAnchorPoint2()
;var t=cleverapps.styles.MagnifierView;this.setPositionRound(t),this.animation=new cleverapps.Spine(bundles.game.jsons.hint_booster_json),this.setLocalZOrder(100),this.addChild(this.animation),this.image=new cc.Sprite(bundles.game.frames.loupe_png),this.addChild(this.image),this.image.setVisible(!1),this.magnifier.on("use",this.use.bind(this)),this.magnifier.on("beforeUse",this.beforeUse.bind(this)),this.magnifier.on("move",this.move.bind(this)),this.magnifier.on("showUp",this.showUp.bind(this))},showUp:function(e){if(e)this.animation.setAnimation(0,"idle",!0);else{var t=cc.director.getRunningScene().scene,s=this.getParent();this.replaceParentSamePlace(t,{keepScale:!0}),this.animation.setAnimation(0,"open",!1),this.animation.setCompleteListenerOnce(function(){this.replaceParentSamePlace(s),this.setScale(1),this.animation.setVisible(!1),this.image.setVisible(!0)}.bind(this)),cleverapps.audio.playSound(bundles.game.urls.hint_booster_before_effect)}},beforeUse:function(){
var e=cc.director.getRunningScene().scene;this.replaceParentSamePlace(e,{keepScale:!0})},use:function(e){this.magnifier.ready?this._collect(e):(this.move(),this.runAction(new cc.Sequence(new cc.DelayTime(.7),new cc.CallFunc(this._collect.bind(this,e)))))},_collect:function(e){var t=cc.director.getRunningScene().scene;if(this.image.setVisible(!1),this.animation.setVisible(!0),this.animation.setAnimation(0,"activate",!1),this.animation.setCompleteListenerRemove(),!e){var s=new CoinsRewardView({showTextTime:.6});t.addChild(s),s.setPositionRound(this.getPosition()),s.collectCoins(Magnifier.GOLD)}},move:function(){var e=cc.director.getRunningScene().scene,t=this.getParent().convertToNodeSpace(e.convertToWorldSpace(MagnifierView.getCollectPosition()));this.image.setVisible(!1),this.animation.setVisible(!0),this.animation.setAnimationAndIdleAfter("collect","collect_idle"),this.runAction(new cc.MoveTo(.7,t))}});MagnifierView.getCollectPosition=function(){var e=cleverapps.styles.MagnifierView,
t=cc.director.getRunningScene().scene;return cc.p(t.width/2,t.height+e.collectPosition.offsetY)},cleverapps.styles.MagnifierView={x:{align:"right",dx:-22},y:{align:"top",dy:-23},collectPosition:{offsetY:-300}};var CoinBlock=function(e,t,s,n){BaseBlock.call(this,e,t,s),this.type=n,this.amount=1,this.type===CoinBlock.TYPE_BAG&&(this.amount=cleverapps.Random.random(CoinBlock.BAG_COINS[0],CoinBlock.BAG_COINS[1]))};CoinBlock.prototype=Object.create(BaseBlock.prototype),(CoinBlock.prototype.constructor=CoinBlock).prototype.getViewClass=function(){return this.type===CoinBlock.TYPE_BAG?CoinBagBlockView:CoinBlockView},CoinBlock.prototype.collect=function(){this.trigger("collect");var e=CoinBlock.COIN_REWARD*this.amount;this.game.collectedCoins+=e,setTimeout(function(){cleverapps.user.setGold(cleverapps.user.gold+e)},500)},CoinBlock.process=function(){if(Game.currentGame){var s=Game.currentGame.keypad,t=[];0===s.words.length?s.field.forEach(function(e){e.forEach(function(e){
e instanceof CoinBlock&&t.push(e)})}):t=s.field.map(function(e){return e[0]}).filter(function(e){return e instanceof CoinBlock}),0!==t.length&&(cleverapps.Random.shuffle(t).forEach(function(e,t){Game.currentGame.counter.setTimeout(function(){e.collect(),s.removeBlock(e.x,e.y)},20*t+20*Math.random())}),0===s.words.length&&Game.currentGame.counter.setTimeout(function(){},1e3))}},CoinBlock.COIN_REWARD=1,CoinBlock.BAG_COINS=[7,15],CoinBlock.TYPE_COIN="*",CoinBlock.TYPE_BAG="#";var CoinBlockView=BaseBlockView.extend({ctor:function(e){this._super(e);var t=cleverapps.styles.CoinBlockView;this.animation=new cleverapps.Spine(bundles.game.jsons.keypad_coin_json),this.addChild(this.animation),this.animation.setPositionRound(this.width/2,this.height/2+t.animation.offsetY),this.animation.setAnimation(0,"idle",!0),this.setLocalZOrder(this.block.y+100),this.block.on("showUp",this.createListener(this.showUp.bind(this))),this.block.on("collect",this.createListener(this.collect.bind(this)))},
showUp:function(e){this._super(e),this.animation.setAnimation(0,"showUp",!1),this.animation.setCompleteListener(function(){this.animation.setAnimation(0,"showUpFinish",!1),this.animation.setCompleteListener(function(){this.animation.setAnimation(0,"idle",!0)}.bind(this))}.bind(this))},collect:function(){var e=cleverapps.styles.MenuBar.GoldItem.target;if(e){var t=cc.director.getRunningScene().scene;this.replaceParentSamePlace(t,{keepScale:!0}),this.animation.setAnimation(0,"collect",!1);var s=t.convertToNodeSpace(e.getParent().convertToWorldSpace(e.getPosition()));this.runAction(new cc.Sequence(new cc.MoveTo(.5,s),new cc.RemoveSelf)),this.setLocalZOrder(100)}else this.removeFromParent(!0)}});cleverapps.styles.CoinBlockView={animation:{offsetY:5}};var CoinBagBlockView=BaseBlockView.extend({ctor:function(e){this._super(e);var t=cleverapps.styles.CoinBagBlockView;this.animation=new cleverapps.Spine(bundles.game.jsons.keypad_bag_coin_json),this.addChild(this.animation),
this.animation.setPositionRound(this.width/2,this.height/2+t.animation.offsetY),this.animation.setAnimation(0,"idle",!0),this.setLocalZOrder(this.block.y+100),this.block.on("showUp",this.createListener(this.showUp.bind(this))),this.block.on("collect",this.createListener(this.collect.bind(this)))},showUp:function(e){this._super(e),this.animation.setAnimation(0,"appearance",!1),this.animation.setCompleteListener(function(){this.animation.setCompleteListener(function(){}),this.animation.setAnimation(0,"idle",!0)}.bind(this))},collect:function(){var e=cc.director.getRunningScene().scene,t=cleverapps.styles.CoinBagBlockView.rewardView,s=new CoinsRewardView(t);e.addChild(s);var n=e.convertToNodeSpace(this.getParent().convertToWorldSpace(this.getPosition()));s.setPositionRound(n.x+t.offsetX,n.y+t.offsetY),s.collectCoins(),this.removeFromParent(!0)}});cleverapps.styles.CoinBagBlockView={animation:{offsetY:-23},rewardView:{offsetX:-10,offsetY:5,coins:[{radiusX:30,radiusY:30,count:5,scale:.4}]}}
;var Scramble=function(){WordGame.apply(this,arguments),ShuffleBooster.IsAvailable()&&(this.shuffleBooster=new ShuffleBooster(this)),this.counter.registerStage(0,this.keypad.fall.bind(this.keypad)),this.counter.registerStage(5,CoinBlock.process),this.counter.registerStage(10,this.keypad.slide.bind(this.keypad)),this.counter.registerStage(20,this.shuffle.bind(this)),this.counter.registerStage(25,this.keypad.collectLeftMagnifiers.bind(this.keypad)),this.counter.registerStage(30,this.keypad.processMagnifiers.bind(this.keypad)),this.counter.registerStage(40,this.addPendingBonusBlocks.bind(this)),this.counter.registerStage(50,this.updateCurrentHighlighter.bind(this)),this.counter.registerStage(60,this.keypadTutorial.bind(this))};Game=Scramble;Scramble.prototype=Object.create(WordGame.prototype),(Scramble.prototype.constructor=Scramble).prototype.calculatePendingBonusBlocks=function(){if(cleverapps.flags.bonusBlocksDisabled)return 0;if(this.level.isRegular()&&!this.level.isCurrentLevel()
)return 0;if(0===this.keypad.words.length)return 0;var e=this.board.words.length-this.keypad.words.length,t=0;return this.level.episode.isBonusRound()?Math.floor(3*Math.random())+1:(1===e?t=1:e%5==0&&0<e&&(t=e/5==1?2:3),t)},Scramble.prototype.addPendingBonusBlocks=function(){if(0<this.pendingBonusBlocks){for(var e=this.level.episode.isBonusRound()?20:100,t=0;t<this.pendingBonusBlocks;t++)this.counter.setTimeout(function(){this.keypad.addRandomBonus()}.bind(this),t*e+Math.random()*e);this.pendingBonusBlocks=0}},Scramble.prototype.updateCurrentHighlighter=function(){this.currentHighlighter.update()},Scramble.prototype.shuffle=function(){!this.keypad.moveExists()&&0<this.keypad.words.length&&this.keypad.shuffle()},Scramble.prototype.keypadTutorial=function(){this.keypad.showTutorialStep()},Scramble.prototype.getInfo=function(){var e=WordGame.prototype.getInfo.call(this);return e.hintBoosters=this.keypad.getMagnifiers(),e.highlightBooster=this.currentHighlighter.isActive(),
e.keypad=this.keypad.getState(),e.easy=this.keypad.easy,e};var words,mixer,start,finish,BlockMixer=function(e){this.options=e||{reverse:0},(this.options.easy||cleverapps.screenshotsMode)&&(this.options.reverse=0),this.width=e.width||10,this.height=e.height||18};BlockMixer.prototype.log=function(e){BlockMixer.log(e)},BlockMixer.log=function(e){for(var t=BlockMixer.calcHeight(e)-1;0<=t;t--){for(var s="",n=0;n<e.length;n++)e[n].length>t?s+=e[n][t]:s+="_";console.log(s)}},BlockMixer.predictHardness=function(e){(e=cleverapps.clone(e)).sort(function(e,t){return t.length-e.length});for(var t=0,s=0,n=e.length-1;0<=n;n--)t+=s,s+=e[n].length;return t},BlockMixer.removeFromState=function(s,e){e.forEach(function(e){for(var t=e.y+1;t<s[e.x].length;t++)s[e.x][t-1]=s[e.x][t];s[e.x]=s[e.x].slice(-1)});for(var t=s.length-1;0<=t;t--)t!==s.length&&0===s[t].length&&s.splice(t,1)},BlockMixer.prototype.calculate=function(e){for(var t=e.words,s=e.state,n=0,i=t.length-1;0<=i;i--){for(var o=t[i],a=1,
r=0;r<i;r++){var l=t[r];BlockMixer.contains(s,l)&&a++}var c=BlockMixer.contains(s,o,{details:!0});if(!c)return-1;n+=c.operations/(a+1),BlockMixer.removeFromState(s,c.indexes)}return n},BlockMixer.prototype.setSize=function(e){this.width=e.width,this.height=e.height},BlockMixer.prototype.mix=function(e,t){this.wordAsArrayMap={},this.wordAsArrayMapReversed={};for(var s=[],n=[],i=0;i<(this.options.quick?1:10);i++){var o=cleverapps.clone(e);(o=cleverapps.Random.shuffle(o)).sort(function(e,t){return Math.round(t.length/3)-Math.round(e.length/3)});for(var a=0;a<Math.ceil(o.length/5);a++){var r=cleverapps.Random.random(0,Math.floor(o.length/2)-1),l=cleverapps.Random.random(Math.min(r+1,o.length-1),o.length-1),c=o[r];o[r]=o[l],o[l]=c}this.options.easy&&o.sort(function(e,t){return e.length-t.length||e.localeCompare(t)});var p=o.join("");-1===n.indexOf(p)&&(n.push(p),s.push({score:0,state:[],words:o}))}for(var d=0;d<e.length;d++){var u=[];s.forEach(function(e){for(var t=this.nextOption(d,e),
s=0;s<t.length;s++)u.push(t[s])},this),u.sort(function(e,t){return e.score-t.score}),s=u.slice(0,this.options.quick?1:BlockMixer.ALPHA_BETTA_LIMIT)}var h=cleverapps.Random.choose(s);if(this.options.fillEmpty&&h){this.options.fillEmpty=!1;for(var g=cleverapps.unique(e.join("").split("")),v=0;v<h.state.length;v++)for(;h.state[v].length<this.height;)h.state[v]=h.state[v].concat(cleverapps.Random.choose(g))}if(h){var m=Math.floor((this.width-h.state.length)/2);for(i=0;i<m;i++)h.state.unshift([])}return t&&t.details?h:this.state=h&&h.state},BlockMixer.isSameWords=function(e,t,s){var n={};for(var i in t.forEach(function(e){for(var t=0;t<e.length;t++)n[e[t].toLowerCase()]=(n[e[t].toLowerCase()]||0)+1}),e.forEach(function(e){for(var t=0;t<e.length;t++)n[e[t].toLowerCase()]||(n[e[t].toLowerCase()]=0),n[e[t].toLowerCase()]--}),n)if(-1===s.skip.indexOf(i)&&0<n[i])return!1;return!0},BlockMixer.prototype.getState=function(){return this.state},BlockMixer.DIRECTIONS=[{x:1,y:0},{x:0,y:1},{x:0,y:-1},{
x:-1,y:0}],BlockMixer.contains=function(e,t,s){s=s||{};for(var n=0,i=void 0,o=0;o<e.length;o++)for(var a=0;a<e[o].length;a++){var r=!0;if((h=e[o][a])instanceof LetterBlock&&(h=h.symbol),t.charAt(0)!==h&&(r=!1),r||n.details)for(var l=0;l<BlockMixer.DIRECTIONS.length;l++){for(var c=o,p=a,d=!0,u=1;u<t.length;u++){if(c+=BlockMixer.DIRECTIONS[l].x,p+=BlockMixer.DIRECTIONS[l].y,c<0||c>=e.length){d=!1;break}if(p<0||p>=e[c].length){d=!1;break}var h;if((h=e[c][p])instanceof LetterBlock&&(h=h.symbol),h!==t.charAt(u)&&(d=!1,!s.details))break}if(n+=t.length,r&&d){if(!s.details)return!0;c=o,p=a;i=[];for(u=0;u<t.length;u++)i.push({x:c,y:p}),c+=BlockMixer.DIRECTIONS[l].x,p+=BlockMixer.DIRECTIONS[l].y}}}if(s.details){if(!i)return;return{operations:n,indexes:i}}return!1},BlockMixer.calcHeight=function(e){for(var t=0,s=0;s<e.length;s++)e[s].length>t&&(t=e[s].length);return t},BlockMixer.prototype.geometryPenalty=function(e){var t=e.length;if(t>this.width)return 1/0;var s=BlockMixer.calcHeight(e);if(
s>this.height)return 1/0;s*=1.25;var n=Math.abs(s-t);return(n=Math.round(n/2))*n+(s+t)},BlockMixer.intersectPenalty=30,BlockMixer.prototype.wordToArray=function(e,t){return t?this.wordAsArrayMapReversed[e]||(this.wordAsArrayMapReversed[e]=e.split("").reverse().join("")):this.wordAsArrayMapReversed[e]||(this.wordAsArrayMapReversed[e]=e),this.wordAsArrayMapReversed[e]},BlockMixer.TYPE_LAY=1,BlockMixer.TYPE_SPLICE=2,BlockMixer.TYPE_ADD=3,BlockMixer.prototype.applyOption=function(e,t,s){var n=cleverapps.Random.nextDouble()<this.options.reverse;this.options.easy&&(n=!1);var i=this.wordToArray(t,n);switch(s.type){case BlockMixer.TYPE_SPLICE:return void e.splice(s.x,0,i.split("").reverse().join(""));case BlockMixer.TYPE_ADD:for(var o=0;o<i.length;o++)var a=i[o];return void(e[s.x]=e[s.x].slice(0,s.y)+i.split("").reverse().join("")+e[s.x].slice(s.y));case BlockMixer.TYPE_LAY:for(o=0;o<i.length;o++){a=i[o];if(s.x+o<0)e.splice(o,0,a);else{var r=s.x+o;s.x<0&&(r=o),r>=e.length?e.push(a
):e[r]=e[r].slice(0,s.y)+a+e[r].slice(s.y)}}return}},BlockMixer.prototype.verticalActions=function(e,t){for(var s=[],n=0;n<=e.length;n++)s.push({type:BlockMixer.TYPE_SPLICE,x:n,y:0});for(var i=0;i<e.length;i++)for(var o=0;o<=e[i].length&&e[i].length-o+t<=this.height;o++)s.push({type:BlockMixer.TYPE_ADD,x:i,y:o});return s},BlockMixer.prototype.horizontalActions=function(e,t){if(0===e.length)return[{type:BlockMixer.TYPE_LAY,x:0,y:0}];var s=[],n=0;if(0===n){var i=this.width-e.length;t-1<i&&(i=t-1);for(var o=-i;o<e.length;o++)s.push({type:BlockMixer.TYPE_LAY,x:o,y:0})}for(n=1;n<this.height;n++)for(var a=0,r=e.length-1;0<=r;r--)r+t<e.length&&e[r+t].length>=n&&a--,e[r].length>=n&&a++,a===t&&s.push({type:BlockMixer.TYPE_LAY,x:r,y:n});return s},BlockMixer.segmentsCross=function(e,t,s,n){return s<=t&&e<=n},BlockMixer.checkIntersection=function(e,t,s,n){var i=e.type===BlockMixer.TYPE_LAY,o=s.type===BlockMixer.TYPE_LAY,a=e.x;a<0&&(a=0);var r=a+(i?t.length-1:0),l=s.x,c=l+(o?n.length-1:0),p=e.y,
d=p+(i?0:t.length-1),u=s.y;o||n.length;return i&&o?!(p<u)&&(BlockMixer.segmentsCross(a,r,l,c)&&(a<l||c<r)):!(!i&&s.type===BlockMixer.TYPE_SPLICE)&&(i||s.type!==BlockMixer.TYPE_ADD?!i&&o?l<=a&&a<=c&&p+1<=u&&u<=d:s.type===BlockMixer.TYPE_SPLICE?a+1<=l&&l<=r:u<=p&&a<=l&&l<=r:a===l&&p+1<=u&&u<=d)},BlockMixer.prototype.nextOption=function(o,a){var r=a.words[o],e=this.verticalActions(a.state,r.length),t=this.horizontalActions(a.state,r.length),s=e.concat(t);if(this.options.easy){var n=0===o?0:a.words[o-1].length-r.length;s=s.filter(function(e){return e.type===BlockMixer.TYPE_LAY&&0===e.y&&n<=e.x&&e.x<=0})}var l=[];return s.forEach(function(e,t){var s=0!==o&&BlockMixer.checkIntersection(a.action,a.words[o-1],e,r),n=BlockMixer.cloneState(a.state);this.applyOption(n,r,e);var i=a.score+this.geometryPenalty(n)+(s?0:BlockMixer.intersectPenalty);i<1/0&&l.push({score:i,state:n,words:a.words,action:e})},this),l},BlockMixer.cloneState=function(e){return e.map(function(e){return e})},
BlockMixer.areStatesSame=function(e,t){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},BlockMixer.ALPHA_BETTA_LIMIT=30,BlockMixer.DIR={VERTICAL:{x:0,y:1},HORIZONTAL:{x:1,y:0}},cleverapps.isLocalhost();var ShuffleButtonBooster=BaseButtonBooster.extend({ctor:function(e){this._super({booster:e,styles:cleverapps.styles.ShuffleButtonBooster,hideDirection:cleverapps.styles.ShuffleButtonBooster.hideDirection[cleverapps.wideMode.mode]}),cleverapps.metha.registerControl("hint_"+this.booster.getId(),this),this.setLocalZOrder(cleverapps.styles.ShuffleButtonBooster.zOrder)},createIcon:function(){return new cc.Sprite(bundles.game.frames.shuffle_png)},getPriceImage:function(){return bundles.game.frames.shuffle_coins_png}});cleverapps.styles.ShuffleButtonBooster={width:150,height:120,zOrder:0,useSceneDelta:!0,hideDirection:[cleverapps.UI.VERTICAL,cleverapps.UI.HORIZONTAL,cleverapps.UI.HORIZONTAL],position:{x:[{align:"right",dx:-140},{align:"right",dx:-10},
{align:"right",dx:-10}],y:[{align:"bottom",dy:16},{align:"bottom",dy:370},{align:"bottom",dy:370}]},phone:{scale:.8},button_png:bundles.game.frames.green_button_png,button_on_png:bundles.game.frames.green_button_on_png,content:{price:{x:0,y:-22},icon:{x:0,y:35},textWidth:120}};var ShuffleBooster=function(e){Booster.call(this,e)};ShuffleBooster.prototype=Object.create(Booster.prototype),(ShuffleBooster.prototype.constructor=ShuffleBooster).prototype.onExecute=function(){this.game.keypad.shuffle()},ShuffleBooster.prototype.onPressed=function(e){this.game.counter.isActive()?e():Booster.prototype.onPressed.call(this,e)},ShuffleBooster.prototype.getId=function(){return ShuffleBooster.ID},ShuffleBooster.prototype.getPrice=function(){return 100},ShuffleBooster.prototype.getForce=function(){return Forces.FREE_SHUFFLE_FORCE},ShuffleBooster.IsAvailable=function(){return levels.user.checkAvailable(ShuffleBooster.AVAILABLE)},ShuffleBooster.AVAILABLE={level:2,projectName:["scramble","wordheaps"]},
ShuffleBooster.ID=5,cleverapps.BoardView.prototype.showDiscoverySilent=function(e,t){var s=this.createWordBg(e);this.addWord(t,s),e.forEach(function(e){this.placeholders[e[0]][e[1]].setVisible(!1)}.bind(this))},cleverapps.BoardView.prototype.showDiscovery=function(e,t,s){if(!cleverapps.flags.boardDisable){var n=this.board.wordIndexes[e];if(t)this.showDiscoverySilent(n,e);else{var i=e.split("").map(this.createLetter.bind(this)),o=s.map(function(e){return BaseBlockView.GetView(e)}.bind(this));this.runLettersFlyAnimation(n,i,e,o)}}},cleverapps.BoardView.prototype.createWordBg=function(e){var t=new cc.Sprite(bundles.game.frames.placeholder_png),s=new cc.Scale9Sprite(cleverapps.BoardView.foundWordBg),n=this.placeholders[e[0][0]][e[0][1]].x,i=this.placeholders[e[e.length-1][0]][e[e.length-1][1]].x;return s.setContentSize(i-n+t.width,t.height),this.grid.addChild(s),s.setPositionRound((i+n)/2,this.placeholders[e[0][0]][e[0][1]].y),s.setCascadeOpacityEnabled(!0),s},
cleverapps.BoardView.prototype.runLettersFlyAnimation=function(d,o,u,h){var g=cleverapps.styles.BoardView.discoverAnimation,a=this.createWordBg(d),r=a.width,e=a.getPosition();a.setAnchorPoint2(0,.5),a.setPositionRound(e.x-r/2,a.y),a.setContentSize2(0,a.height);var v=.075;v>.6/h.length&&(v=.6/h.length),cleverapps.audio.playSound(bundles.game.urls.open_word_effect);for(var t=function(e){var t=h[e];if(t.stopAllActions(),t.replaceParentSamePlace(cc.director.getRunningScene().scene,{keepScale:!0}),t.setLocalZOrder(t.getLocalZOrder()+100),t&&t.isRunningSafe()&&t.getParent()){var s=d[e][0],n=d[e][1],i=this.placeholders[s][n].getPosition();i.y+=g.letter.offsetY;var o=t.getParent().convertToNodeSpace(this.placeholders[s][n].getParent().convertToWorldSpace(i)),a=this.placeholders[s][n].height*this.grid.scale/(t.height+g.letter.paddingY),r=t.getPosition(),l=o,c=cc.p((r.x+2*l.x)/3,(r.y+2*l.y)/3-g.bezier.y),p=e*v;t.runAction(new cc.Sequence(new cc.DelayTime(p),new cc.Spawn(new cc.BezierTo(.5,[r,c,l
]),new cc.ScaleTo(.5,a)),new cc.RemoveSelf))}else cleverapps.throwAsync("runLettersFlyAnimation letter error, word - "+u+", indexes - "+JSON.stringify(d))}.bind(this),s=function(e){var t=e*v,s=d[e][0],n=d[e][1];this.runAction(new cc.Sequence(new cc.DelayTime(t+.4),new cc.CallFunc(function(){this.letters[s+"_"+n]&&this.letters[s+"_"+n].runAction(new cc.FadeOut(.1)),this.placeholders[s][n].runAction(new cc.FadeOut(.1))}.bind(this)),new cc.DelayTime(.1),new cc.CallFunc(function(){this.takeStar(s,n),this.letters[s+"_"+n]&&this.letters[s+"_"+n].setVisible(!1),this.placeholders[s][n].setVisible(!1)}.bind(this))))}.bind(this),n=function(e){var t=d[e][0],s=d[e][1],n=e*v,i=o[e];this.grid.addChild(i),i.setPositionRound(this.placeholders[t][s].x,this.placeholders[t][s].y+g.sprite.offsetY),i.replaceParentSamePlace(a),i.visible=!1,i.runAction(new cc.Sequence(new cc.DelayTime(n+.5),new cc.CallFunc(function(){a.setContentSize2((e+1)/h.length*r,a.height),i.visible=!0}.bind(this))))}.bind(this),
i=0;i<d.length;i++)t(i),s(i),n(i);this.runAction(new cc.Sequence(new cc.DelayTime(v*d.length+.5),new cc.CallFunc(function(){a.setContentSize2(r,a.height),a.setAnchorPoint2(),a.setPositionRound(e),o.forEach(function(e){e.removeFromParent()}),this.addWord(u,a).runAction(new cc.Sequence(new cc.ScaleTo(.2,1.1),new cc.ScaleTo(.2,1))),a.runAction(new cc.Sequence(new cc.ScaleTo(.2,1.1),new cc.ScaleTo(.2,1))),cleverapps.audio.playSound(bundles.game.urls.letters_effect)}.bind(this))))},cleverapps.BoardView.prototype.addWord=function(e,t){var s=cleverapps.styles.BoardView.discoverAnimation;this.wordContainer||(this.wordContainer=this.createWordContainer());var n=cleverapps.UI.generateOnlyText(e.toUpperCase(),cleverapps.styles.FONTS.BOARD_TEXT);this.wordContainer.addChild(n),n.fitTo(void 0,s.text.height*this.grid.getScale());var i=n.getRelativeCoordinates(t);return n.setPositionRound(i.x,i.y+s.text.offsetY*this.grid.getScale()),n},cleverapps.BoardView.prototype.createWordContainer=function(){
var e=new cc.Node;return e.setLocalZOrder(1),e.setAnchorPoint2(),this.grid.getParent().addChild(e),e.setContentSize2(this.grid.width*this.grid.scale,this.grid.height*this.grid.scale),e.setPositionRound(this.grid.getPosition()),e},cleverapps.override(cleverapps.styles.BoardView,{minSpaceX:120,maxSpaceX:200,Letter:{offset:4,paddingBottom:4},Coin:{paddingBottom:6},Background:{visible:!1},Star:{scale:.75,collect:{height:250}},HEIGHT:180,y:954,paddingLeft:80,paddingRight:80,verticalPadding:0,discoverAnimation:{letter:{paddingY:-10,offsetY:0},sprite:{offsetY:0},text:{offsetY:-3,height:125},bezier:{y:400},margin:-40}});var HintView=cc.Node.extend({ctor:function(e,t){this._super(),this.hint=e,this.setAnchorPoint2();var s=cleverapps.styles.HintView;cleverapps.tooltipManager.create(this,{text:Messages.get("LevelTaskTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.below,control:"hintViewTooltip"});var n=this.createText();this.setContentSize2(n.width*n.scaleX,n.height*n.scaleY),
this.addChild(n),n.setPositionRound(this.width/2,this.height/2+s.text.dy);var i=this.width+2*s.bg.padding.x,o=this.height+2*s.bg.padding.y,a=cleverapps.UI.createScale9Sprite(bundles.game.frames.theme_bg_png,cleverapps.UI.Scale9Rect.TwoPixelXY);if(HintView.themeBgColor&&(a.setColor(HintView.themeBgColor),a.setOpacity(HintView.themeBgColor.a)),this.addChild(a),a.setContentSize(i,o),a.setPositionRound(this.width/2,this.height/2),a.setLocalZOrder(-1),this.setCascadeOpacityEnabled(!0),"wordheaps"===cleverapps.config.name){var r=cleverapps.styles.BoardView.target;this.setPositionRound(r.x+r.grid.x-r.width/2,r.y+r.grid.height/2*r.grid.scale+this.height)}else this.setPositionRound(cleverapps.UI.getSceneSize().width*s.widthMultiplier/2,s.y);cleverapps.UI.makeHideable(this,cleverapps.UI.OPACITY_ANIMATION),cleverapps.metha.registerControl("hintView",this),"wordheaps"===cleverapps.config.name&&(t.keypad.on("push",this.setVisible.bind(this,!1)),t.keypad.on("reset",this.setVisible.bind(this,!0)))},
createText:function(){var e=cleverapps.styles.HintView,t=cleverapps.UI.getSceneSize().width*e.widthMultiplier-2*e.text.padding.x-2*e.bg.padding.x,s=cleverapps.UI.generateTTFText(this.hint.toUpperCase(),cleverapps.styles.FONTS.HINT_TEXT);if(.7*s.width>t){for(var n=this.hint.split(" "),i=0,o=n.map(function(e){return i+=e.length,e.length}),a=0,r=i,l=0,c=0;c<o.length;c++){a+=o[c];var p=i-a,d=Math.abs(p-a);d<r&&(r=d,l=c)}var u=n.slice(0,l+1).join(" ");l<n.length-1&&(u=u+"\n"+n.slice(l+1).join(" ")),s=cleverapps.UI.generateTTFText(u.toUpperCase(),cleverapps.styles.FONTS.HINT_TEXT)}s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var h=Math.min(t/s.width,e.text.height/s.height);return h<1&&s.setScale(h),s}});cleverapps.overrideFonts(cleverapps.styles.FONTS,{HINT_TEXT:{size:45,color:cleverapps.styles.COLORS.WHITE,shadow:cleverapps.styles.DECORATORS.IMAGE_FONT_SHADOW,stroke:cleverapps.styles.DECORATORS.IMAGE_FONT_STROKE}}),cleverapps.styles.HintView={widthMultiplier:1,y:{align:"top",
anchor:"center",dy:-150},bg:{padding:{x:10,y:0}},text:{padding:{x:180},dy:-4,height:100}};var StitchesComponent=function(s,e){this.options=e||{};var t=e.offsetTop||0,n=e.offsetBottom||0,i=e.offsetLeft||0,o=e.offsetRight||0,a=cleverapps.styles.StitchesComponent,r=s.height-t-n-2*a.cornerHeight,l=s.width-t-n-2*a.cornerWidth,c=(i+s.width-o)/2,p=(n+s.height-t)/2;[{x:i,y:p,length:r,rotation:-90},{x:s.width-o,y:p,length:r,rotation:-90},{x:c,y:s.height-t,length:l},{x:c,y:n,length:l}].forEach(function(e){var t=this.createLayout(e.length);e.rotation&&t.setRotation(e.rotation),s.addChild(t),t.setPositionRound(e.x,e.y)}.bind(this));var d=a.corner.offsetVertical,u=a.corner.offsetHorizontal;[{x:i+u,y:n+d},{x:s.width-i-u,y:n+d,rotation:-90},{x:i+u,y:s.height-t-d,rotation:90},{x:s.width-i-u,y:s.height-t-d,rotation:180}].forEach(function(e){var t=new cc.Sprite(this.options.stitch_corner_png||bundles.stitches.frames.stitch_corner_png);s.addChild(t),t.setPositionRound(e.x,e.y),e.rotation&&t.setRotation(
e.rotation)}.bind(this))};StitchesComponent.prototype.createLayout=function(e){for(var t=cleverapps.styles.StitchesComponent,s=e/(new cc.Sprite(this.options.stitch_png||bundles.stitches.frames.stitch_png).width+t.margin),n=Math.floor(s),i=t.margin+s%n,o=[],a=0;a<n;a++)o.push(new cc.Sprite(this.options.stitch_png||bundles.stitches.frames.stitch_png));return new cleverapps.Layout(o,{direction:cleverapps.UI.HORIZONTAL,margin:i})},cleverapps.styles.StitchesComponent={corner:{offsetVertical:8,offsetHorizontal:8},cornerHeight:14,cornerWidth:14,margin:20};var CurrentHighlighter=function(e,t){cleverapps.EventEmitter.call(this),this.game=e,this.active=t.highlightBooster};CurrentHighlighter.prototype=Object.create(cleverapps.EventEmitter.prototype),(CurrentHighlighter.prototype.constructor=CurrentHighlighter).prototype.enable=function(){this.active=!0,this.game.storeSave()},CurrentHighlighter.prototype.isActive=function(){return this.active},CurrentHighlighter.prototype.update=function(){
this.isActive()&&(this.current=this.getCurrentWords(),this.trigger("changeCurrent"))},CurrentHighlighter.prototype.getCurrentWords=function(){return this.game.keypad.words.filter(function(e){return this.game.keypad.findWordIndexes(e)}.bind(this)).map(function(e){return this.game.board.words.indexOf(e)}.bind(this))};var CurrentHighlighterView=cc.Node.extend({ctor:function(e,t){this._super(),this.setAnchorPoint2(),this.highlighter=e,this.boardView=t,this.frame=new cc.Scale9Sprite(bundles.game.frames.board_highlight_frame),this.addChild(this.frame),this.setOpacity(0),this.setCascadeOpacityEnabled(!0),this.runningAnimations=[],this.highlighter.on("changeCurrent",this.createListener(this.changeCurrent.bind(this)))},changeCurrent:function(){cleverapps.substract(this.runningAnimations,this.highlighter.current).forEach(function(e){this.stopAnimation(e)}.bind(this)),cleverapps.substract(this.highlighter.current,this.runningAnimations).forEach(function(e){this.runAnimation(e)}.bind(this)),
this.runningAnimations=this.highlighter.current},runAnimation:function(e){var t=cleverapps.styles.CurrentHighlighterView,s=cc.director.getRunningScene().scene;this.runningAnimations.push(e);var n=this.boardView.placeholders[e][0].getPosition();n.y+=t.flashlight.offsetY,n.x+=t.flashlight.offsetX;var i=this.boardView.placeholders[e][this.boardView.placeholders[e].length-1].getPosition();i.y+=t.flashlight.offsetY,i.x+=t.flashlight.offsetX,n=s.convertToNodeSpace(this.boardView.letterGrid.convertToWorldSpace(n)),i=s.convertToNodeSpace(this.boardView.letterGrid.convertToWorldSpace(i));var o=new cleverapps.Spine(bundles.game.jsons.flashlight_json);s.addChild(o),o.setLocalZOrder(10),o.setScale(this.boardView.letterGrid.scale),o.setPositionRound(n),o.setAnimationAndIdleAfter("show","idle");var a=.2*this.boardView.placeholders[e].length;o.runAction(new cc.Sequence(new cc.DelayTime(.3),new cc.MoveTo(a,i),new cc.CallFunc(function(){o.setAnimation(0,"hide",!1),o.setCompleteListenerRemove()}.bind(
this))));var r=this.boardView.placeholders[e].map(function(t,e){return new cc.Sequence(new cc.DelayTime(.3+.2*e),new cc.CallFunc(function(){var e=new cleverapps.Spine(bundles.game.jsons.highlight_booster_json);t.getParent().addChild(e),e.setPositionRound(t.x,t.y),(t.highlightAnimation=e).setAnimation(0,"show",!1),e.setCompleteListener(function(){t.setSpriteFrame(bundles.game.frames.placeholder_highlighted_png),t.setOpacity(255),e.setVisible(!1)}),t.setOpacity(0)}.bind(this)))}.bind(this)),l=new cc.Spawn(r);l.setTag(e),this.runAction(l),cleverapps.audio.playSound(bundles.game.urls.highlight_booster_effect)},stopAnimation:function(e){this.stopActionByTag(e),this.boardView.placeholders[e].forEach(function(e){e.highlightAnimation&&(e.highlightAnimation.setVisible(!0),e.highlightAnimation.setAnimation(0,"hide",!1),e.setOpacity(0),e.highlightAnimation.setCompleteListenerRemove(function(){e.setOpacity(255),e.setSpriteFrame(bundles.game.frames.placeholder_png)}),delete e.highlightAnimation)})}
});cleverapps.styles.CurrentHighlighterView={flashlight:{offsetY:50,offsetX:50},padding:{x:10,y:10},animation:{offsetY:7}},Gun.prototype.onExecute=function(e){e=e||function(){},this.attack(),Game.currentGame&&Game.currentGame.userStatus.reportUserAction(),setTimeout(function(){Game.currentGame&&Game.currentGame.keypad?(Game.currentGame.keypad.activateGun(e),this.setAmount(this.getAmount()-1),this.save()):e(),this.resetState()}.bind(this),this.executeDuration())},TreasureSearchWindow.prototype.createActiveCellContent=function(e,t,s){},TreasureSearchWindow.prototype.generateContent=function(){var e=cleverapps.styles.TreasureSearchWindow.content,t=this.createGame(),s=cleverapps.UI.generateTTFText("messages:TreasureSearchWindow.text",cleverapps.styles.FONTS.WINDOW_SMALL_TEXT);s.setDimensions(t.width*e.text.widthMultiplier[cleverapps.wideMode.mode],0),s.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);var n=new cc.Node;if(n.setAnchorPoint2(),n.setContentSize2(1.05*s.width,1.15*s.height),
n.addChild(s),s.setPositionRound(n.width/2,n.height/2),this.bundle.frames.speech_bubble_png||bundles.main.frames.tournamentstory_bg){var i=cleverapps.UI.createScale9Sprite(this.bundle.frames.speech_bubble_png||bundles.main.frames.tournamentstory_bg);i.setContentSize(n.getContentSize()),n.addChild(i),i.setPositionRound(n.width/2,n.height/2),i.setLocalZOrder(-1)}this.content=new cleverapps.Layout([n,t],{direction:cleverapps.UI.VERTICAL,margin:e.margin,padding:e.padding})},TreasureSearchWindow.prototype.createShovelsNode=function(){var e=cleverapps.styles.TreasureSearchWindow.content.shovel,t=new cc.Node;t.setAnchorPoint2(),t.setAnchorPoint2();var s=new cc.Sprite(this.bundle.frames.shovel);t.setContentSize2(s.getContentSize()),t.addChild(s),s.setPosition(t.width/2,t.height/2);var n=this.amountText=cleverapps.UI.generateImageText(this.game.mission.currency,cleverapps.styles.FONTS.SHOVEL_FONT);if(t.addChild(n),n.setPositionRound(e.amount),n.setLocalZOrder(2),t.setAnchorPoint2(0,0),
this.bundle.frames.amount_bg){var i=new cc.Sprite(this.bundle.frames.amount_bg);t.addChild(i),i.setPositionRound(n.x+e.amountBg.offset.x,n.y+e.amountBg.offset.y),i.setLocalZOrder(1)}return cleverapps.tooltipManager.create(t,{text:Messages.get("ShovelsTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.below}),t},TreasureSearchWindow.prototype.addCustomBg=function(){var e=cleverapps.styles.TreasureSearchWindow;this.closeButton.setLocalZOrder(2),this.content.setLocalZOrder(1);var t=new cc.Sprite(this.bundle.frames.bg);this.window.addChild(t),t.setPosition(this.window.width/2,this.window.height-t.height/2+e.bg.y),t.setLocalZOrder(0);var s=(this.window.width+e.bg.padding)/t.width;t.setScaleX(s);var n=new cc.Sprite(this.bundle.frames.bg_left);this.window.addChild(n),n.setPositionRound(e.bg.left.x,t.y-1.1*t.height*this.content.scale);var i=new cc.Sprite(this.bundle.frames.bg_right);this.window.addChild(i),i.setPositionRound(this.window.width+e.bg.right.x,t.y-t.height)},
TreasureSearchWindow.prototype._customize=TreasureSearchWindow.prototype.customize,TreasureSearchWindow.prototype.customize=function(){this._customize(),this.addCustomBg();var e=cleverapps.styles.TreasureSearchWindow;this.fieldNode.setSkewY(e.skew),this.fieldNode.setRotation(e.skew);var t=.7*this.window.width/(this.fieldNode.width*this.content.scale);t<1&&this.fieldNode.setScale(t);for(var s=0;s<this.field.length;s++)for(var n=0;n<this.field[s].length;n++)this.game.hasElement(n,s)||this.createOpenedCellContent(n,s,this.field[s][n],!1,!0);var i=this.createShovelsNode(),o=this.window.width/(this.infoNode.width*this.content.scale);o<1&&(this.infoNode.setScale(o),i.setScale(.85*o)),this.window.addChild(i),i.setPositionRound(e.content.shovel)},TreasureSearchWindow.prototype.processPointer=function(){this.pointer||(this.pointer=new cleverapps.Spine(this.bundle.jsons.hover,1),this.pointer.setLocalZOrder(21),this.pointer.setAnimation(0,"idle",!0),this.content.addChild(this.pointer))
;var e=this.field[this.index.row][this.index.col];this.pointer.setPositionRound(this.getPositionInContent(e)),this.pointer.setVisible(!0)},TreasureSearchWindow.prototype.createGameInfo=function(){for(var e=cleverapps.styles.TreasureSearchWindow.game.infoNode,t=this.flowers=[],s=0;s<TreasureSearch.GEMS;s++){var n=new cc.Node;n.setAnchorPoint2(),n.setLocalZOrder(TreasureSearch.GEMS-s),n.setContentSize2(e.flowerNode),t.push(n);var i=new cleverapps.Spine(this.bundle.jsons.holder,1);i.setPosition(n.width/2,n.height/2+e.flowerNode.flower.y),n.addChild(i),n.animation=i,this.game.mission.result<=s?i.setAnimation(0,"glass_empty",!0):i.setAnimation(0,"glass_idle",!0)}var o=new cleverapps.Layout(t,{direction:cleverapps.UI.HORIZONTAL}),a=new cc.Node;a.setAnchorPoint2(),a.setContentSize2(e.prize);var r=this.prizeBox=new cleverapps.Spine(this.bundle.jsons.prize,1);r.setAnimation(0,"red_idle_closed",!0),r.setPosition(a.width/2,a.height/2),a.addChild(r),cleverapps.tooltipManager.create(a,{
rewards:this.game.getReward(),text:Messages.get("TreasureSearch.prizeTooltip"),position:cleverapps.styles.UI.Tooltip.LOCATION.below}),cleverapps.UI.applyHover(a),cleverapps.UI.onClick(a,this.onClickHelp.bind(this));var l=new cc.Node;return l.setAnchorPoint2(),l.setContentSize2(e),o.setPositionRound(e.flowerNode),a.setPositionRound(e.prize),l.addChild(o),l.addChild(a),l},TreasureSearchWindow.prototype.onClickHelp=function(){new TellWindow({type:"gardenHelp",text:"messages:TreasureSearchWindow.Help.Text",title:"messages:TreasureSearchWindow.Help.Title"})},TreasureSearchWindow.prototype._createCell=TreasureSearchWindow.prototype.createCell,TreasureSearchWindow.prototype.createCell=function(){var e=this._createCell(),t=new cc.Sprite(this.bundle.frames.tile);return t.setPosition(e.width/2,e.height/2),e.addChild(t),e},TreasureSearchWindow.prototype.createOpenedCellContent=function(e,t,s,n,i){if(!n){var o=new cleverapps.Spine(this.bundle.jsons.weed,1);o.setLocalZOrder(
TreasureSearch.HEIGHT*TreasureSearch.WIDTH-(e+t*TreasureSearch.HEIGHT)),o.setPosition(this.getPositionInContent(s)),this.content.addChild(o),o.runAction(new cc.Sequence(new cc.DelayTime(i?0:.7),new cc.CallFunc(function(){i?o.setAnimation(0,"idle",!0):(o.setAnimation(0,"animation",!1),o.addAnimation(0,"idle",!0))})))}},TreasureSearchWindow.prototype._open=TreasureSearchWindow.prototype.open,TreasureSearchWindow.prototype.open=function(e){this._open(e);var t=this.field[e.row][e.col];t.runAction(new cc.Sequence(new cc.DelayTime(this.game.gemWasThere(e.col,e.row)?1.3:0),new cc.CallFunc(function(){this.createOpenedCellContent(e.col,e.row,t)}.bind(this))))},TreasureSearchWindow.prototype.prize=function(e){var t=this.field[e.row][e.col],s=this.getPositionInContent(t),n=this.flowers[e.score-1],i=cc.p(this.content.width/2,this.content.height),o=this.getPositionInContent(n);this.runAction(new cc.Sequence(new cc.DelayTime(.5),new cc.CallFunc(function(){var e=new cleverapps.Spine(
this.bundle.jsons.holder,1);e.setPosition(s.x,s.y+cleverapps.styles.TreasureSearchWindow.content.flower.y),e.setAnimation(0,"in",!1),e.setLocalZOrder(22),this.content.addChild(e),e.setCompleteListener(function(){e.setAnimation(0,"glass_in",!1),e.setCompleteListener(function(){}),cleverapps.audio.playSound(bundles.main.urls.treasure_search_found_effect),n.animation.setAnimation(0,"empty_out",!1),n.animation.setCompleteListener(function(){n.animation.setCompleteListener(function(){}),n.animation.setVisible(!1)})}),e.runAction(new cc.Sequence(new cc.DelayTime(1.5),new cc.BezierTo(.7,[e.getPosition(),i,o]),new cc.CallFunc(function(){n.animation.setAnimation(0,"glass_idle",!0),e.runAction(new cc.RemoveSelf)})))}.bind(this))))},TreasureSearchWindow.prototype.finish=function(e){var t=this.getPositionInContent(this.prizeBox);this.prizeBox.removeFromParent(),this.prizeBox.setPosition(t),this.content.addChild(this.prizeBox);var s=cc.p(this.content.width/2,1.1*this.content.height),n=cc.p(
this.content.width/2,.55*this.content.height);this.runAction(new cc.Sequence(new cc.DelayTime(e&&e.silent?0:2.7),new cc.CallFunc(function(){this.prizeBox.setLocalZOrder(22),this.prizeBox.runAction(new cc.Spawn(new cc.BezierTo(.6,[t,s,n]),new cc.Sequence(new cc.DelayTime(.37),new cc.CallFunc(function(){this.prizeBox.setAnimation(0,"red_open",!1)}.bind(this)),new cc.DelayTime(.55),new cc.CallFunc(function(){this.close()}.bind(this)))))}.bind(this))))},cleverapps.overrideStyles(cleverapps.styles.TreasureSearchWindow,{skew:10,bg:{y:-126,padding:-20,left:{x:179},right:{x:-213}},content:{margin:25,shovel:{amount:{x:{align:"right",dx:-20},y:{align:"bottom",dy:-30}},x:{align:"right",dx:-20},y:{align:"center",dy:-140}},flower:{y:30}},game:{margin:20,field:{padding:{x:0,y:10}},cell:{width:120,height:80},infoNode:{width:810,height:246,margin:20,padding:{x:35,y:0},prize:{x:{align:"right",dx:0},y:{align:"center",dy:-10},width:200,height:200},flowerNode:{x:{align:"left",dx:100},y:{align:"center"},
width:130,height:245,flower:{y:-30}}}},window:{contentOffset:-30,Border:{y:50}}}),TreasureSearchWindow.prototype.addCustomBg=function(){var e=cleverapps.styles.TreasureSearchWindow;this.content.setLocalZOrder(1);var t=new cc.Sprite(this.bundle.frames.bg);this.window.addChild(t),t.setScale(1.98),t.setPositionRound(e.bg);var s=new cc.Sprite(this.bundle.frames.tray);this.window.addChild(s),s.setScale(1.72),s.setPositionRound(e.tray);var n=new cleverapps.Spine(this.bundle.jsons.hero,1);this.window.addChild(n),n.setPositionRound(e.hero),n.setAnimation(0,"animation",!0)},cleverapps.overrideStyles(cleverapps.styles.TreasureSearchWindow,{skew:0,bg:{x:{align:"center"},y:{align:"top",dy:-8}},tray:{x:{align:"center"},y:{align:"top",dy:-595}},game:{cell:{width:110,height:50},infoNode:{width:850,reverseItems:!0,flowerNode:{height:200,width:100,x:{align:"center",dx:0},y:{align:"center",dy:-10}},prize:{x:{align:"left",dx:10},y:{align:"center",dy:-30}}}},hero:{x:{align:"center"},y:{align:"center",
dy:110}},content:{shovel:{x:{align:"right",dx:-50},y:{align:"center",dy:30},amount:{x:{align:"center",dx:60},y:{align:"center",dy:-60}},amountBg:{offset:{x:0,y:0}}},text:{widthMultiplier:[.8,.8,.8]},margin:55},window:{Title:{bg:{zIndex:1}},Border:{y:160,x:0},CloseButton:{zOrder:2},HelpButton:{zOrder:2},contentOffset:-160}}),cleverapps.styles.Decorators={web_bottom:{type:Decors.TYPE_IMAGE,lovesBackground:!0,image:bundles.halloween.frames.web,scale:1,zOrder:0,x:{align:"left",dx:13},y:{align:"bottom",dy:16}},pumpkin_animation:{type:Decors.TYPE_ANIMATION,lovesBackground:!0,json:bundles.halloween.jsons.pumpkin_json,fearHigh:!0,animation:"animation",scale:1,zOrder:100,x:{align:"center",dx:0},y:{align:"top",dy:28}},black_friday_balloon:{type:Decors.TYPE_IMAGE,image:bundles.black_friday.frames.balloon_png,scale:{x:-.9,y:.9},zOrder:100,x:{align:"center",dx:280},y:{align:"bottom",dy:-54}},black_friday_label:{type:Decors.TYPE_IMAGE,image:bundles.black_friday.frames.label_png,scale:1,zOrder:100,
x:{align:"center",dx:-340},y:{align:"top",dy:-30}},xmas_decor_left_top:{type:Decors.TYPE_ANIMATION,json:bundles.xmas.jsons.decor_window_top,animation:"left",zOrder:2,x:{align:"left",dx:-110},y:{align:"top",dy:130},lovesBackground:!0},xmas_decor_right_top:{type:Decors.TYPE_ANIMATION,json:bundles.xmas.jsons.decor_window_top,animation:"right",zOrder:2,x:{align:"right",dx:110},y:{align:"top",dy:130},lovesBackground:!0},xmas_decor_bottom:{type:Decors.TYPE_IMAGE,image:bundles.xmas.frames.decor_window_bottom,scale:{x:-1,y:1},zOrder:1,x:{align:"right",dx:30},y:{align:"bottom",dy:-33},lovesBackground:!0},valentines_decor_top:{type:Decors.TYPE_IMAGE,image:bundles.valentines.frames.valentines_decor_top_png,zOrder:1,scale:1,x:{align:"left",dx:52},y:{align:"top",dy:109},lovesBackground:!0},valentines_decor_bottom:{type:Decors.TYPE_IMAGE,image:bundles.valentines.frames.valentines_decor_bottom_png,zOrder:1,scale:1,x:{align:"right",dx:-60},y:{align:"bottom",dy:-33},lovesBackground:!0},
easter_decor_top:{type:Decors.TYPE_IMAGE,image:bundles.easter.frames.decor_window_top,zOrder:1,scale:1,x:{align:"right",dx:44},y:{align:"top",dy:79},lovesBackground:!0},easter_decor_bottom:{type:Decors.TYPE_IMAGE,image:bundles.easter.frames.decor_window_bottom,zOrder:1,scale:1,x:{align:"left",dx:-21},y:{align:"bottom",dy:-50},lovesBackground:!0},memorial_decor_top:{type:Decors.TYPE_IMAGE,image:bundles.memorial.frames.memorial_decor_top,lovesBackground:!0,scale:1,zOrder:-1,x:{align:"right",dx:0},y:{align:"top",dy:89}},memorial_decor_bottom_left:{type:Decors.TYPE_IMAGE,image:bundles.memorial.frames.memorial_decor_bottom_left,lovesBackground:!0,scale:1,zOrder:1,x:{align:"left",dx:5},y:{align:"bottom",dy:-11}}},WardrobeWindow.stages=[1,3,5,10,10,15,15,15,30,50],WardrobeWindow.prices=[100,150,300,350,500,1e3,1250,1500,2e3,5e3],WardrobeWindow.prizes={3:{prize:{gold:100,boosters:{13:1,14:1,15:1}},skin:"pink"},6:{prize:{gold:200,boosters:{13:2,14:2,15:2}},skin:"blue"},10:{prize:{gold:300,
boosters:{13:3,14:3,15:3}},skin:"green"}},cleverapps.overrideStyles(cleverapps.styles.WardrobeWindow,{zOrder:3,stages:{stage:{icon:{scale:1},present:{x:134,y:44,scale:.35,zOrder:1}}},person:{position:{x:-180,y:20},scale:.6},banner:{position:{x:0,y:166}}}),cleverapps.overrideStyles(cleverapps.styles.WardrobeRulesWindow,{person:{position:{x:{align:"center"},y:{align:"center",dy:130}}},icon:{scale:.8,margin:20},states:[{time:2,mirror:!0},{time:1,mirror:!1},{time:1,mirror:!0},{animation:"meow",sound:bundles.main.urls.meow,time:2,mirror:!1},{time:1,mirror:!0},{time:1,mirror:!1},{animation:"meow",sound:bundles.main.urls.meow,time:2,mirror:!0},{time:1,mirror:!1},{time:1,mirror:!0},{time:1,mirror:!1},{animation:"meow",sound:bundles.main.urls.meow,time:2,mirror:!0}]}),cc.game.onStart=function(){cleverapps.onStart()},cc.game.run();}.call(this));